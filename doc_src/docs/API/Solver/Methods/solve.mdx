# Solving

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

The `Solver` class has a `solve` method that represents the core functionality of the Lively interface. At a high level, it returns a fully-filled [`state`](../../state) object and accepts the following fields:
:::note
The **optional** field can be left empty if the no specification is needed. The `Solver` will just use the default values for the optional parameters.
:::

| Field          | Type                                                                | Optional | Description                                                                                                                        |
| -------------- | ------------------------------------------------------------------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| `goals`        | look-up table of [`goal`](../../Goals/goal) indexed by a string key | no       | The key of the look-up table should match with that of the [`objectives`](../../Objectives) to which the `goals` are corresponded. |
| `weights`      | look-up table of float value indexed by a string key                | no       | The key of the look-up table should match with that of the [`objectives`](../../Objectives) to which the weights are corresponded. |
| `time`         | float                                                               | no       | The current time stamp. It is advised to always pass in a increasing time stamp for the solver to have a more consistent behavior. |
| `shape_update` | list of [`shape`](../../shapes) objects                             | yes      | see below                                                                                                                          |

## shape_update

`shape_update` parameter allows the users to add, move, and delete environmental shapes in the solver.

### adding a new environmental shape

<Tabs>
  <TabItem value="js" label="Javascript">

```js
const addCube = {
  Add: {
    id: "env-box", // must be an unique id
    shape: {
      type: "Box", //can be 'Cylinder', 'Capsule', or 'Sphere'
      name: "box", // name can be arbitrary
      frame: "world", // or 'world'
      physical: true, // physical collision
      x: 0.25,
      y: 0.25,
      z: 0.25, // dimension of the box
      localTransform: {
        translation: [0.6, 0.05, 0.15],
        rotation: [0.0, 0.0, 0.0, 1.0],
      },
    },
  },
};
const d = new Date();
let time = d.getTime(); // Get the time in milliseconds
currentSolver.solve({}, {}, time / 1000, addCube);
```

  </TabItem>
  <TabItem value="py" label="Python">
```py

````
   </TabItem>
   <TabItem value= "rust" label="Rust">
```rust

````

   </TabItem>
</Tabs>

### moving an existing environmental shape

<Tabs>
  <TabItem value="js" label="Javascript">

```js
const moveCube = {
  Move: {
    id: "env-box", // must be identical to the id created in the shape is added
    transform: {
      translation: [0.6, 0.05, 0.15],
      rotation: [0.0, 0.0, 0.0, 1.0],
    },
  },
};
const d = new Date();
let time = d.getTime(); // Get the time in milliseconds
currentSolver.solve({}, {}, time / 1000, moveCube);
```

  </TabItem>
  <TabItem value="py" label="Python">
```py

````
   </TabItem>
   <TabItem value= "rust" label="Rust">
```rust

````

   </TabItem>
</Tabs>

### deleting an existing environmental shape

<Tabs>
  <TabItem value="js" label="Javascript">

```js
const deleteCube = {Delete: "env-box"};// must be identical to the id created in the shape is added
const d = new Date();
let time = d.getTime(); // Get the time in milliseconds
currentSolver.solve({}, {}, time / 1000, deleteCube);
```

  </TabItem>
  <TabItem value="py" label="Python">
```py

````
   </TabItem>
   <TabItem value= "rust" label="Rust">
```rust

````

   </TabItem>
</Tabs>
