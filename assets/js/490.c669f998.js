/*! For license information please see 490.c669f998.js.LICENSE.txt */
(self.webpackChunklively_documentation=self.webpackChunklively_documentation||[]).push([[490],{3905:(t,e,n)=>{"use strict";n.d(e,{Zo:()=>u,kt:()=>p});var r=n(7294);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var l=r.createContext({}),c=function(t){var e=r.useContext(l),n=e;return t&&(n="function"==typeof t?t(e):s(s({},e),t)),n},u=function(t){var e=c(t.components);return r.createElement(l.Provider,{value:e},t.children)},h="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return r.createElement(r.Fragment,{},e)}},f=r.forwardRef((function(t,e){var n=t.components,i=t.mdxType,a=t.originalType,l=t.parentName,u=o(t,["components","mdxType","originalType","parentName"]),h=c(n),f=i,p=h["".concat(l,".").concat(f)]||h[f]||d[f]||a;return n?r.createElement(p,s(s({ref:e},u),{},{components:n})):r.createElement(p,s({ref:e},u))}));function p(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var a=n.length,s=new Array(a);s[0]=f;var o={};for(var l in e)hasOwnProperty.call(e,l)&&(o[l]=e[l]);o.originalType=t,o[h]="string"==typeof t?t:i,s[1]=o;for(var c=2;c<a;c++)s[c]=n[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},5876:(t,e,n)=>{"use strict";n.d(e,{L:()=>Zl});const r="148",i=100,a=301,s=302,o=303,l=304,c=306,u=1e3,h=1001,d=1002,f=1003,p=1004,m=1005,g=1006,y=1007,v=1008,b=1009,x=1014,_=1015,w=1016,S=1020,E=1023,M=1026,C=1027,T=33776,A=33777,k=33778,L=33779,P=2300,R=2301,I=2302,D=2400,B=2401,O=2402,N=3e3,F=3001,z="srgb",U="srgb-linear",G=7680,H=35044,j="300 es",V=1035;class W{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t);t.target=null}}}const $=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Y=1234567;const q=Math.PI/180,X=180/Math.PI;function J(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return($[255&t]+$[t>>8&255]+$[t>>16&255]+$[t>>24&255]+"-"+$[255&e]+$[e>>8&255]+"-"+$[e>>16&15|64]+$[e>>24&255]+"-"+$[63&n|128]+$[n>>8&255]+"-"+$[n>>16&255]+$[n>>24&255]+$[255&r]+$[r>>8&255]+$[r>>16&255]+$[r>>24&255]).toLowerCase()}function Z(t,e,n){return Math.max(e,Math.min(n,t))}function K(t,e){return(t%e+e)%e}function Q(t,e,n){return(1-n)*t+n*e}function tt(t){return 0==(t&t-1)&&0!==t}function et(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function nt(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function rt(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function it(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}var at=Object.freeze({__proto__:null,DEG2RAD:q,RAD2DEG:X,generateUUID:J,clamp:Z,euclideanModulo:K,mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:Q,damp:function(t,e,n,r){return Q(t,e,1-Math.exp(-n*r))},pingpong:function(t,e=1){return e-Math.abs(K(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(Y=t);let e=Y+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*q},radToDeg:function(t){return t*X},isPowerOfTwo:tt,ceilPowerOfTwo:et,floorPowerOfTwo:nt,setQuaternionFromProperEuler:function(t,e,n,r,i){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),c=a((e+r)/2),u=s((e+r)/2),h=a((e-r)/2),d=s((e-r)/2),f=a((r-e)/2),p=s((r-e)/2);switch(i){case"XYX":t.set(o*u,l*h,l*d,o*c);break;case"YZY":t.set(l*d,o*u,l*h,o*c);break;case"ZXZ":t.set(l*h,l*d,o*u,o*c);break;case"XZX":t.set(o*u,l*p,l*f,o*c);break;case"YXY":t.set(l*f,o*u,l*p,o*c);break;case"ZYZ":t.set(l*p,l*f,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:it,denormalize:rt});class st{constructor(t=0,e=0){st.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,a=this.y-t.y;return this.x=i*n-a*r+t.x,this.y=i*r+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ot{constructor(){ot.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,i,a,s,o,l){const c=this.elements;return c[0]=t,c[1]=r,c[2]=s,c[3]=e,c[4]=i,c[5]=o,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],y=r[1],v=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=a*p+s*y+o*x,i[3]=a*m+s*v+o*_,i[6]=a*g+s*b+o*w,i[1]=l*p+c*y+u*x,i[4]=l*m+c*v+u*_,i[7]=l*g+c*b+u*w,i[2]=h*p+d*y+f*x,i[5]=h*m+d*v+f*_,i[8]=h*g+d*b+f*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],s=t[5],o=t[6],l=t[7],c=t[8];return e*a*c-e*s*l-n*i*c+n*s*o+r*i*l-r*a*o}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],s=t[5],o=t[6],l=t[7],c=t[8],u=c*a-s*l,h=s*o-c*i,d=l*i-a*o,f=e*u+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return t[0]=u*p,t[1]=(r*l-c*n)*p,t[2]=(s*n-r*a)*p,t[3]=h*p,t[4]=(c*e-r*o)*p,t[5]=(r*i-s*e)*p,t[6]=d*p,t[7]=(n*o-l*e)*p,t[8]=(a*e-n*i)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,a,s){const o=Math.cos(i),l=Math.sin(i);return this.set(n*o,n*l,-n*(o*a+l*s)+a+t,-r*l,r*o,-r*(-l*a+o*s)+s+e,0,0,1),this}scale(t,e){return this.premultiply(lt.makeScale(t,e)),this}rotate(t){return this.premultiply(lt.makeRotation(-t)),this}translate(t,e){return this.premultiply(lt.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const lt=new ot;function ct(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function ut(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function ht(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function dt(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const ft={[z]:{[U]:ht},[U]:{[z]:dt}},pt={legacyMode:!0,get workingColorSpace(){return U},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(ft[e]&&void 0!==ft[e][n]){const r=ft[e][n];return t.r=r(t.r),t.g=r(t.g),t.b=r(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},mt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},gt={r:0,g:0,b:0},yt={h:0,s:0,l:0},vt={h:0,s:0,l:0};function bt(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function xt(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class _t{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=z){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,pt.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=pt.workingColorSpace){return this.r=t,this.g=e,this.b=n,pt.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=pt.workingColorSpace){if(t=K(t,1),e=Z(e,0,1),n=Z(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=bt(i,r,t+1/3),this.g=bt(i,r,t),this.b=bt(i,r,t-1/3)}return pt.toWorkingColorSpace(this,r),this}setStyle(t,e=z){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=r[1],a=r[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,pt.toWorkingColorSpace(this,e),n(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,pt.toWorkingColorSpace(this,e),n(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const r=parseFloat(t[1])/360,i=parseFloat(t[2])/100,a=parseFloat(t[3])/100;return n(t[4]),this.setHSL(r,i,a,e)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=r[1],n=t.length;if(3===n)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,pt.toWorkingColorSpace(this,e),this;if(6===n)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,pt.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=z){const n=mt[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ht(t.r),this.g=ht(t.g),this.b=ht(t.b),this}copyLinearToSRGB(t){return this.r=dt(t.r),this.g=dt(t.g),this.b=dt(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=z){return pt.fromWorkingColorSpace(xt(this,gt),t),Z(255*gt.r,0,255)<<16^Z(255*gt.g,0,255)<<8^Z(255*gt.b,0,255)<<0}getHexString(t=z){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=pt.workingColorSpace){pt.fromWorkingColorSpace(xt(this,gt),e);const n=gt.r,r=gt.g,i=gt.b,a=Math.max(n,r,i),s=Math.min(n,r,i);let o,l;const c=(s+a)/2;if(s===a)o=0,l=0;else{const t=a-s;switch(l=c<=.5?t/(a+s):t/(2-a-s),a){case n:o=(r-i)/t+(r<i?6:0);break;case r:o=(i-n)/t+2;break;case i:o=(n-r)/t+4}o/=6}return t.h=o,t.s=l,t.l=c,t}getRGB(t,e=pt.workingColorSpace){return pt.fromWorkingColorSpace(xt(this,gt),e),t.r=gt.r,t.g=gt.g,t.b=gt.b,t}getStyle(t=z){return pt.fromWorkingColorSpace(xt(this,gt),t),t!==z?`color(${t} ${gt.r} ${gt.g} ${gt.b})`:`rgb(${255*gt.r|0},${255*gt.g|0},${255*gt.b|0})`}offsetHSL(t,e,n){return this.getHSL(yt),yt.h+=t,yt.s+=e,yt.l+=n,this.setHSL(yt.h,yt.s,yt.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(yt),t.getHSL(vt);const n=Q(yt.h,vt.h,e),r=Q(yt.s,vt.s,e),i=Q(yt.l,vt.l,e);return this.setHSL(n,r,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let wt;_t.NAMES=mt;class St{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===wt&&(wt=ut("canvas")),wt.width=t.width,wt.height=t.height;const n=wt.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=wt}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=ut("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*ht(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*ht(e[t]/255)):e[t]=ht(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class Et{constructor(t=null){this.isSource=!0,this.uuid=J(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(Mt(r[e].image)):t.push(Mt(r[e]))}else t=Mt(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function Mt(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?St.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ct=0;class Tt extends W{constructor(t=Tt.DEFAULT_IMAGE,e=Tt.DEFAULT_MAPPING,n=1001,r=1001,i=1006,a=1008,s=1023,o=1009,l=Tt.DEFAULT_ANISOTROPY,c=3e3){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ct++}),this.uuid=J(),this.name="",this.source=new Et(t),this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new st(0,0),this.repeat=new st(1,1),this.center=new st(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ot,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case u:t.x=t.x-Math.floor(t.x);break;case h:t.x=t.x<0?0:1;break;case d:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case u:t.y=t.y-Math.floor(t.y);break;case h:t.y=t.y<0?0:1;break;case d:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}Tt.DEFAULT_IMAGE=null,Tt.DEFAULT_MAPPING=300,Tt.DEFAULT_ANISOTROPY=1;class At{constructor(t=0,e=0,n=0,r=1){At.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*e+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*e+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*e+a[7]*n+a[11]*r+a[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const a=.01,s=.1,o=t.elements,l=o[0],c=o[4],u=o[8],h=o[1],d=o[5],f=o[9],p=o[2],m=o[6],g=o[10];if(Math.abs(c-h)<a&&Math.abs(u-p)<a&&Math.abs(f-m)<a){if(Math.abs(c+h)<s&&Math.abs(u+p)<s&&Math.abs(f+m)<s&&Math.abs(l+d+g-3)<s)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,o=(d+1)/2,y=(g+1)/2,v=(c+h)/4,b=(u+p)/4,x=(f+m)/4;return t>o&&t>y?t<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=v/n,i=b/n):o>y?o<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=v/r,i=x/r):y<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(y),n=b/i,r=x/i),this.set(n,r,i,e),this}let y=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(y)<.001&&(y=1),this.x=(m-f)/y,this.y=(u-p)/y,this.z=(h-c)/y,this.w=Math.acos((l+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class kt extends W{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new At(0,0,t,e),this.scissorTest=!1,this.viewport=new At(0,0,t,e);const r={width:t,height:e,depth:1};this.texture=new Tt(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:g,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Et(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Lt extends Tt{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=f,this.minFilter=f,this.wrapR=h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Pt extends Tt{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=f,this.minFilter=f,this.wrapR=h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Rt{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,a,s){let o=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[a+0],d=i[a+1],f=i[a+2],p=i[a+3];if(0===s)return t[e+0]=o,t[e+1]=l,t[e+2]=c,void(t[e+3]=u);if(1===s)return t[e+0]=h,t[e+1]=d,t[e+2]=f,void(t[e+3]=p);if(u!==p||o!==h||l!==d||c!==f){let t=1-s;const e=o*h+l*d+c*f+u*p,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),a=Math.atan2(i,e*n);t=Math.sin(t*a)/i,s=Math.sin(s*a)/i}const i=s*n;if(o=o*t+h*i,l=l*t+d*i,c=c*t+f*i,u=u*t+p*i,t===1-s){const t=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=t,l*=t,c*=t,u*=t}}t[e]=o,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,r,i,a){const s=n[r],o=n[r+1],l=n[r+2],c=n[r+3],u=i[a],h=i[a+1],d=i[a+2],f=i[a+3];return t[e]=s*f+c*u+o*d-l*h,t[e+1]=o*f+c*h+l*u-s*d,t[e+2]=l*f+c*d+s*h-o*u,t[e+3]=c*f-s*u-o*h-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,i=t._z,a=t._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(r/2),u=s(i/2),h=o(n/2),d=o(r/2),f=o(i/2);switch(a){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],a=e[1],s=e[5],o=e[9],l=e[2],c=e[6],u=e[10],h=n+s+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(c-o)*t,this._y=(i-l)*t,this._z=(a-r)*t}else if(n>s&&n>u){const t=2*Math.sqrt(1+n-s-u);this._w=(c-o)/t,this._x=.25*t,this._y=(r+a)/t,this._z=(i+l)/t}else if(s>u){const t=2*Math.sqrt(1+s-n-u);this._w=(i-l)/t,this._x=(r+a)/t,this._y=.25*t,this._z=(o+c)/t}else{const t=2*Math.sqrt(1+u-n-s);this._w=(a-r)/t,this._x=(i+l)/t,this._y=(o+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Z(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,a=t._w,s=e._x,o=e._y,l=e._z,c=e._w;return this._x=n*c+a*s+r*l-i*o,this._y=r*c+a*o+i*s-n*l,this._z=i*c+a*l+n*o-r*s,this._w=a*c-n*s-r*o-i*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,a=this._w;let s=a*t._w+n*t._x+r*t._y+i*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;const o=1-s*s;if(o<=Number.EPSILON){const t=1-e;return this._w=t*a+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),u=Math.sin((1-e)*c)/l,h=Math.sin(e*c)/l;return this._w=a*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(i),n*Math.cos(i),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class It{constructor(t=0,e=0,n=0){It.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Bt.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Bt.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,a=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,s=t.z,o=t.w,l=o*e+a*r-s*n,c=o*n+s*e-i*r,u=o*r+i*n-a*e,h=-i*e-a*n-s*r;return this.x=l*o+h*-i+c*-s-u*-a,this.y=c*o+h*-a+u*-i-l*-s,this.z=u*o+h*-s+l*-a-c*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,a=e.x,s=e.y,o=e.z;return this.x=r*o-i*s,this.y=i*a-n*o,this.z=n*s-r*a,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Dt.copy(this).projectOnVector(t),this.sub(Dt)}reflect(t){return this.sub(Dt.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Z(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Dt=new It,Bt=new Rt;class Ot{constructor(t=new It(1/0,1/0,1/0),e=new It(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,s=-1/0;for(let o=0,l=t.length;o<l;o+=3){const l=t[o],c=t[o+1],u=t[o+2];l<e&&(e=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>a&&(a=c),u>s&&(s=u)}return this.min.set(e,n,r),this.max.set(i,a,s),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,s=-1/0;for(let o=0,l=t.count;o<l;o++){const l=t.getX(o),c=t.getY(o),u=t.getZ(o);l<e&&(e=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>a&&(a=c),u>s&&(s=u)}return this.min.set(e,n,r),this.max.set(i,a,s),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Ft.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,r=e.count;n<r;n++)Ft.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(Ft)}else null===n.boundingBox&&n.computeBoundingBox(),zt.copy(n.boundingBox),zt.applyMatrix4(t.matrixWorld),this.union(zt);const r=t.children;for(let i=0,a=r.length;i<a;i++)this.expandByObject(r[i],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Ft),Ft.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter($t),Yt.subVectors(this.max,$t),Ut.subVectors(t.a,$t),Gt.subVectors(t.b,$t),Ht.subVectors(t.c,$t),jt.subVectors(Gt,Ut),Vt.subVectors(Ht,Gt),Wt.subVectors(Ut,Ht);let e=[0,-jt.z,jt.y,0,-Vt.z,Vt.y,0,-Wt.z,Wt.y,jt.z,0,-jt.x,Vt.z,0,-Vt.x,Wt.z,0,-Wt.x,-jt.y,jt.x,0,-Vt.y,Vt.x,0,-Wt.y,Wt.x,0];return!!Jt(e,Ut,Gt,Ht,Yt)&&(e=[1,0,0,0,1,0,0,0,1],!!Jt(e,Ut,Gt,Ht,Yt)&&(qt.crossVectors(jt,Vt),e=[qt.x,qt.y,qt.z],Jt(e,Ut,Gt,Ht,Yt)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Ft.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(Ft).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Nt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Nt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Nt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Nt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Nt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Nt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Nt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Nt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Nt)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Nt=[new It,new It,new It,new It,new It,new It,new It,new It],Ft=new It,zt=new Ot,Ut=new It,Gt=new It,Ht=new It,jt=new It,Vt=new It,Wt=new It,$t=new It,Yt=new It,qt=new It,Xt=new It;function Jt(t,e,n,r,i){for(let a=0,s=t.length-3;a<=s;a+=3){Xt.fromArray(t,a);const s=i.x*Math.abs(Xt.x)+i.y*Math.abs(Xt.y)+i.z*Math.abs(Xt.z),o=e.dot(Xt),l=n.dot(Xt),c=r.dot(Xt);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const Zt=new Ot,Kt=new It,Qt=new It;class te{constructor(t=new It,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Zt.setFromPoints(t).getCenter(n);let r=0;for(let i=0,a=t.length;i<a;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Kt.subVectors(t,this.center);const e=Kt.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(Kt,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Qt.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Kt.copy(t.center).add(Qt)),this.expandByPoint(Kt.copy(t.center).sub(Qt))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ee=new It,ne=new It,re=new It,ie=new It,ae=new It,se=new It,oe=new It;class le{constructor(t=new It,e=new It(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,ee)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=ee.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(ee.copy(this.direction).multiplyScalar(e).add(this.origin),ee.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){ne.copy(t).add(e).multiplyScalar(.5),re.copy(e).sub(t).normalize(),ie.copy(this.origin).sub(ne);const i=.5*t.distanceTo(e),a=-this.direction.dot(re),s=ie.dot(this.direction),o=-ie.dot(re),l=ie.lengthSq(),c=Math.abs(1-a*a);let u,h,d,f;if(c>0)if(u=a*o-s,h=a*s-o,f=i*c,u>=0)if(h>=-f)if(h<=f){const t=1/c;u*=t,h*=t,d=u*(u+a*h+2*s)+h*(a*u+h+2*o)+l}else h=i,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;else h=-i,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;else h<=-f?(u=Math.max(0,-(-a*i+s)),h=u>0?-i:Math.min(Math.max(-i,-o),i),d=-u*u+h*(h+2*o)+l):h<=f?(u=0,h=Math.min(Math.max(-i,-o),i),d=h*(h+2*o)+l):(u=Math.max(0,-(a*i+s)),h=u>0?i:Math.min(Math.max(-i,-o),i),d=-u*u+h*(h+2*o)+l);else h=a>0?-i:i,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(re).multiplyScalar(h).add(ne),d}intersectSphere(t,e){ee.subVectors(t.center,this.origin);const n=ee.dot(this.direction),r=ee.dot(ee)-n*n,i=t.radius*t.radius;if(r>i)return null;const a=Math.sqrt(i-r),s=n-a,o=n+a;return s<0&&o<0?null:s<0?this.at(o,e):this.at(s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,r=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,r=(t.min.x-h.x)*l),c>=0?(i=(t.min.y-h.y)*c,a=(t.max.y-h.y)*c):(i=(t.max.y-h.y)*c,a=(t.min.y-h.y)*c),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),u>=0?(s=(t.min.z-h.z)*u,o=(t.max.z-h.z)*u):(s=(t.max.z-h.z)*u,o=(t.min.z-h.z)*u),n>o||s>r?null:((s>n||n!=n)&&(n=s),(o<r||r!=r)&&(r=o),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,ee)}intersectTriangle(t,e,n,r,i){ae.subVectors(e,t),se.subVectors(n,t),oe.crossVectors(ae,se);let a,s=this.direction.dot(oe);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}ie.subVectors(this.origin,t);const o=a*this.direction.dot(se.crossVectors(ie,se));if(o<0)return null;const l=a*this.direction.dot(ae.cross(ie));if(l<0)return null;if(o+l>s)return null;const c=-a*ie.dot(oe);return c<0?null:this.at(c/s,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ce{constructor(){ce.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,r,i,a,s,o,l,c,u,h,d,f,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ce).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/ue.setFromMatrixColumn(t,0).length(),i=1/ue.setFromMatrixColumn(t,1).length(),a=1/ue.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,i=t.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===t.order){const t=a*c,n=a*u,r=s*c,i=s*u;e[0]=o*c,e[4]=-o*u,e[8]=l,e[1]=n+r*l,e[5]=t-i*l,e[9]=-s*o,e[2]=i-t*l,e[6]=r+n*l,e[10]=a*o}else if("YXZ"===t.order){const t=o*c,n=o*u,r=l*c,i=l*u;e[0]=t+i*s,e[4]=r*s-n,e[8]=a*l,e[1]=a*u,e[5]=a*c,e[9]=-s,e[2]=n*s-r,e[6]=i+t*s,e[10]=a*o}else if("ZXY"===t.order){const t=o*c,n=o*u,r=l*c,i=l*u;e[0]=t-i*s,e[4]=-a*u,e[8]=r+n*s,e[1]=n+r*s,e[5]=a*c,e[9]=i-t*s,e[2]=-a*l,e[6]=s,e[10]=a*o}else if("ZYX"===t.order){const t=a*c,n=a*u,r=s*c,i=s*u;e[0]=o*c,e[4]=r*l-n,e[8]=t*l+i,e[1]=o*u,e[5]=i*l+t,e[9]=n*l-r,e[2]=-l,e[6]=s*o,e[10]=a*o}else if("YZX"===t.order){const t=a*o,n=a*l,r=s*o,i=s*l;e[0]=o*c,e[4]=i-t*u,e[8]=r*u+n,e[1]=u,e[5]=a*c,e[9]=-s*c,e[2]=-l*c,e[6]=n*u+r,e[10]=t-i*u}else if("XZY"===t.order){const t=a*o,n=a*l,r=s*o,i=s*l;e[0]=o*c,e[4]=-u,e[8]=l*c,e[1]=t*u+i,e[5]=a*c,e[9]=n*u-r,e[2]=r*u-n,e[6]=s*c,e[10]=i*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(de,t,fe)}lookAt(t,e,n){const r=this.elements;return ge.subVectors(t,e),0===ge.lengthSq()&&(ge.z=1),ge.normalize(),pe.crossVectors(n,ge),0===pe.lengthSq()&&(1===Math.abs(n.z)?ge.x+=1e-4:ge.z+=1e-4,ge.normalize(),pe.crossVectors(n,ge)),pe.normalize(),me.crossVectors(ge,pe),r[0]=pe.x,r[4]=me.x,r[8]=ge.x,r[1]=pe.y,r[5]=me.y,r[9]=ge.y,r[2]=pe.z,r[6]=me.z,r[10]=ge.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],y=n[3],v=n[7],b=n[11],x=n[15],_=r[0],w=r[4],S=r[8],E=r[12],M=r[1],C=r[5],T=r[9],A=r[13],k=r[2],L=r[6],P=r[10],R=r[14],I=r[3],D=r[7],B=r[11],O=r[15];return i[0]=a*_+s*M+o*k+l*I,i[4]=a*w+s*C+o*L+l*D,i[8]=a*S+s*T+o*P+l*B,i[12]=a*E+s*A+o*R+l*O,i[1]=c*_+u*M+h*k+d*I,i[5]=c*w+u*C+h*L+d*D,i[9]=c*S+u*T+h*P+d*B,i[13]=c*E+u*A+h*R+d*O,i[2]=f*_+p*M+m*k+g*I,i[6]=f*w+p*C+m*L+g*D,i[10]=f*S+p*T+m*P+g*B,i[14]=f*E+p*A+m*R+g*O,i[3]=y*_+v*M+b*k+x*I,i[7]=y*w+v*C+b*L+x*D,i[11]=y*S+v*T+b*P+x*B,i[15]=y*E+v*A+b*R+x*O,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],a=t[1],s=t[5],o=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+i*o*u-r*l*u-i*s*h+n*l*h+r*s*d-n*o*d)+t[7]*(+e*o*d-e*l*h+i*a*h-r*a*d+r*l*c-i*o*c)+t[11]*(+e*l*u-e*s*d-i*a*u+n*a*d+i*s*c-n*l*c)+t[15]*(-r*s*c-e*o*u+e*s*h+r*a*u-n*a*h+n*o*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],s=t[5],o=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15],y=u*m*l-p*h*l+p*o*d-s*m*d-u*o*g+s*h*g,v=f*h*l-c*m*l-f*o*d+a*m*d+c*o*g-a*h*g,b=c*p*l-f*u*l+f*s*d-a*p*d-c*s*g+a*u*g,x=f*u*o-c*p*o-f*s*h+a*p*h+c*s*m-a*u*m,_=e*y+n*v+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return t[0]=y*w,t[1]=(p*h*i-u*m*i-p*r*d+n*m*d+u*r*g-n*h*g)*w,t[2]=(s*m*i-p*o*i+p*r*l-n*m*l-s*r*g+n*o*g)*w,t[3]=(u*o*i-s*h*i-u*r*l+n*h*l+s*r*d-n*o*d)*w,t[4]=v*w,t[5]=(c*m*i-f*h*i+f*r*d-e*m*d-c*r*g+e*h*g)*w,t[6]=(f*o*i-a*m*i-f*r*l+e*m*l+a*r*g-e*o*g)*w,t[7]=(a*h*i-c*o*i+c*r*l-e*h*l-a*r*d+e*o*d)*w,t[8]=b*w,t[9]=(f*u*i-c*p*i-f*n*d+e*p*d+c*n*g-e*u*g)*w,t[10]=(a*p*i-f*s*i+f*n*l-e*p*l-a*n*g+e*s*g)*w,t[11]=(c*s*i-a*u*i-c*n*l+e*u*l+a*n*d-e*s*d)*w,t[12]=x*w,t[13]=(c*p*r-f*u*r+f*n*h-e*p*h-c*n*m+e*u*m)*w,t[14]=(f*s*r-a*p*r-f*n*o+e*p*o+a*n*m-e*s*m)*w,t[15]=(a*u*r-c*s*r+c*n*o-e*u*o-a*n*h+e*s*h)*w,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,a=t.x,s=t.y,o=t.z,l=i*a,c=i*s;return this.set(l*a+n,l*s-r*o,l*o+r*s,0,l*s+r*o,c*s+n,c*o-r*a,0,l*o-r*s,c*o+r*a,i*o*o+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,a){return this.set(1,n,i,0,t,1,a,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,a=e._y,s=e._z,o=e._w,l=i+i,c=a+a,u=s+s,h=i*l,d=i*c,f=i*u,p=a*c,m=a*u,g=s*u,y=o*l,v=o*c,b=o*u,x=n.x,_=n.y,w=n.z;return r[0]=(1-(p+g))*x,r[1]=(d+b)*x,r[2]=(f-v)*x,r[3]=0,r[4]=(d-b)*_,r[5]=(1-(h+g))*_,r[6]=(m+y)*_,r[7]=0,r[8]=(f+v)*w,r[9]=(m-y)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=ue.set(r[0],r[1],r[2]).length();const a=ue.set(r[4],r[5],r[6]).length(),s=ue.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],he.copy(this);const o=1/i,l=1/a,c=1/s;return he.elements[0]*=o,he.elements[1]*=o,he.elements[2]*=o,he.elements[4]*=l,he.elements[5]*=l,he.elements[6]*=l,he.elements[8]*=c,he.elements[9]*=c,he.elements[10]*=c,e.setFromRotationMatrix(he),n.x=i,n.y=a,n.z=s,this}makePerspective(t,e,n,r,i,a){const s=this.elements,o=2*i/(e-t),l=2*i/(n-r),c=(e+t)/(e-t),u=(n+r)/(n-r),h=-(a+i)/(a-i),d=-2*a*i/(a-i);return s[0]=o,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,e,n,r,i,a){const s=this.elements,o=1/(e-t),l=1/(n-r),c=1/(a-i),u=(e+t)*o,h=(n+r)*l,d=(a+i)*c;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const ue=new It,he=new ce,de=new It(0,0,0),fe=new It(1,1,1),pe=new It,me=new It,ge=new It,ye=new ce,ve=new Rt;class be{constructor(t=0,e=0,n=0,r=be.DefaultOrder){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,i=r[0],a=r[4],s=r[8],o=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin(Z(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Z(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Z(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-Z(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Z(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Z(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return ye.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ye,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return ve.setFromEuler(this),this.setFromQuaternion(ve,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}be.DefaultOrder="XYZ",be.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class xe{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let _e=0;const we=new It,Se=new Rt,Ee=new ce,Me=new It,Ce=new It,Te=new It,Ae=new Rt,ke=new It(1,0,0),Le=new It(0,1,0),Pe=new It(0,0,1),Re={type:"added"},Ie={type:"removed"};class De extends W{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_e++}),this.uuid=J(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=De.DefaultUp.clone();const t=new It,e=new be,n=new Rt,r=new It(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ce},normalMatrix:{value:new ot}}),this.matrix=new ce,this.matrixWorld=new ce,this.matrixAutoUpdate=De.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=De.DefaultMatrixWorldAutoUpdate,this.layers=new xe,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Se.setFromAxisAngle(t,e),this.quaternion.multiply(Se),this}rotateOnWorldAxis(t,e){return Se.setFromAxisAngle(t,e),this.quaternion.premultiply(Se),this}rotateX(t){return this.rotateOnAxis(ke,t)}rotateY(t){return this.rotateOnAxis(Le,t)}rotateZ(t){return this.rotateOnAxis(Pe,t)}translateOnAxis(t,e){return we.copy(t).applyQuaternion(this.quaternion),this.position.add(we.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(ke,t)}translateY(t){return this.translateOnAxis(Le,t)}translateZ(t){return this.translateOnAxis(Pe,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ee.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Me.copy(t):Me.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Ce.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ee.lookAt(Ce,Me,this.up):Ee.lookAt(Me,Ce,this.up),this.quaternion.setFromRotationMatrix(Ee),r&&(Ee.extractRotation(r.matrixWorld),Se.setFromRotationMatrix(Ee),this.quaternion.premultiply(Se.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Re)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Ie)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Ie)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ee.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ee.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ee),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(t,e);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ce,t,Te),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ce,Ae,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++){const r=e[n];!0!==r.matrixWorldAutoUpdate&&!0!==t||r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=a(t.geometries),r=a(t.materials),i=a(t.textures),s=a(t.images),o=a(t.shapes),l=a(t.skeletons),c=a(t.animations),u=a(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function a(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}De.DefaultUp=new It(0,1,0),De.DefaultMatrixAutoUpdate=!0,De.DefaultMatrixWorldAutoUpdate=!0;const Be=new It,Oe=new It,Ne=new It,Fe=new It,ze=new It,Ue=new It,Ge=new It,He=new It,je=new It,Ve=new It;class We{constructor(t=new It,e=new It,n=new It){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),Be.subVectors(t,e),r.cross(Be);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){Be.subVectors(r,e),Oe.subVectors(n,e),Ne.subVectors(t,e);const a=Be.dot(Be),s=Be.dot(Oe),o=Be.dot(Ne),l=Oe.dot(Oe),c=Oe.dot(Ne),u=a*l-s*s;if(0===u)return i.set(-2,-1,-1);const h=1/u,d=(l*o-s*c)*h,f=(a*c-s*o)*h;return i.set(1-d-f,f,d)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,Fe),Fe.x>=0&&Fe.y>=0&&Fe.x+Fe.y<=1}static getUV(t,e,n,r,i,a,s,o){return this.getBarycoord(t,e,n,r,Fe),o.set(0,0),o.addScaledVector(i,Fe.x),o.addScaledVector(a,Fe.y),o.addScaledVector(s,Fe.z),o}static isFrontFacing(t,e,n,r){return Be.subVectors(n,e),Oe.subVectors(t,e),Be.cross(Oe).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Be.subVectors(this.c,this.b),Oe.subVectors(this.a,this.b),.5*Be.cross(Oe).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return We.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return We.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return We.getUV(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return We.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return We.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let a,s;ze.subVectors(r,n),Ue.subVectors(i,n),He.subVectors(t,n);const o=ze.dot(He),l=Ue.dot(He);if(o<=0&&l<=0)return e.copy(n);je.subVectors(t,r);const c=ze.dot(je),u=Ue.dot(je);if(c>=0&&u<=c)return e.copy(r);const h=o*u-c*l;if(h<=0&&o>=0&&c<=0)return a=o/(o-c),e.copy(n).addScaledVector(ze,a);Ve.subVectors(t,i);const d=ze.dot(Ve),f=Ue.dot(Ve);if(f>=0&&d<=f)return e.copy(i);const p=d*l-o*f;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),e.copy(n).addScaledVector(Ue,s);const m=c*f-d*u;if(m<=0&&u-c>=0&&d-f>=0)return Ge.subVectors(i,r),s=(u-c)/(u-c+(d-f)),e.copy(r).addScaledVector(Ge,s);const g=1/(m+p+h);return a=p*g,s=h*g,e.copy(n).addScaledVector(ze,a).addScaledVector(Ue,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let $e=0;class Ye extends W{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:$e++}),this.uuid=J(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=i,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=G,this.stencilZFail=G,this.stencilZPass=G,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class qe extends Ye{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new _t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Xe=new It,Je=new st;class Ze{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=H,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Je.fromBufferAttribute(this,e),Je.applyMatrix3(t),this.setXY(e,Je.x,Je.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Xe.fromBufferAttribute(this,e),Xe.applyMatrix3(t),this.setXYZ(e,Xe.x,Xe.y,Xe.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Xe.fromBufferAttribute(this,e),Xe.applyMatrix4(t),this.setXYZ(e,Xe.x,Xe.y,Xe.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Xe.fromBufferAttribute(this,e),Xe.applyNormalMatrix(t),this.setXYZ(e,Xe.x,Xe.y,Xe.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Xe.fromBufferAttribute(this,e),Xe.transformDirection(t),this.setXYZ(e,Xe.x,Xe.y,Xe.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=rt(e,this.array)),e}setX(t,e){return this.normalized&&(e=it(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=rt(e,this.array)),e}setY(t,e){return this.normalized&&(e=it(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=rt(e,this.array)),e}setZ(t,e){return this.normalized&&(e=it(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=rt(e,this.array)),e}setW(t,e){return this.normalized&&(e=it(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=it(e,this.array),n=it(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=it(e,this.array),n=it(n,this.array),r=it(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=it(e,this.array),n=it(n,this.array),r=it(r,this.array),i=it(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==H&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Ke extends Ze{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Qe extends Ze{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class tn extends Ze{constructor(t,e,n){super(new Float32Array(t),e,n)}}let en=0;const nn=new ce,rn=new De,an=new It,sn=new Ot,on=new Ot,ln=new It;class cn extends W{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:en++}),this.uuid=J(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(ct(t)?Qe:Ke)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new ot).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return nn.makeRotationFromQuaternion(t),this.applyMatrix4(nn),this}rotateX(t){return nn.makeRotationX(t),this.applyMatrix4(nn),this}rotateY(t){return nn.makeRotationY(t),this.applyMatrix4(nn),this}rotateZ(t){return nn.makeRotationZ(t),this.applyMatrix4(nn),this}translate(t,e,n){return nn.makeTranslation(t,e,n),this.applyMatrix4(nn),this}scale(t,e,n){return nn.makeScale(t,e,n),this.applyMatrix4(nn),this}lookAt(t){return rn.lookAt(t),rn.updateMatrix(),this.applyMatrix4(rn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(an).negate(),this.translate(an.x,an.y,an.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new tn(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ot);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new It(-1/0,-1/0,-1/0),new It(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++){const t=e[n];sn.setFromBufferAttribute(t),this.morphTargetsRelative?(ln.addVectors(this.boundingBox.min,sn.min),this.boundingBox.expandByPoint(ln),ln.addVectors(this.boundingBox.max,sn.max),this.boundingBox.expandByPoint(ln)):(this.boundingBox.expandByPoint(sn.min),this.boundingBox.expandByPoint(sn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new te);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new It,1/0);if(t){const n=this.boundingSphere.center;if(sn.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const n=e[t];on.setFromBufferAttribute(n),this.morphTargetsRelative?(ln.addVectors(sn.min,on.min),sn.expandByPoint(ln),ln.addVectors(sn.max,on.max),sn.expandByPoint(ln)):(sn.expandByPoint(on.min),sn.expandByPoint(on.max))}sn.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)ln.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(ln));if(e)for(let i=0,a=e.length;i<a;i++){const a=e[i],s=this.morphTargetsRelative;for(let e=0,i=a.count;e<i;e++)ln.fromBufferAttribute(a,e),s&&(an.fromBufferAttribute(t,e),ln.add(an)),r=Math.max(r,n.distanceToSquared(ln))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,a=e.uv.array,s=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ze(new Float32Array(4*s),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let M=0;M<s;M++)l[M]=new It,c[M]=new It;const u=new It,h=new It,d=new It,f=new st,p=new st,m=new st,g=new It,y=new It;function v(t,e,n){u.fromArray(r,3*t),h.fromArray(r,3*e),d.fromArray(r,3*n),f.fromArray(a,2*t),p.fromArray(a,2*e),m.fromArray(a,2*n),h.sub(u),d.sub(u),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(i),y.copy(d).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(i),l[t].add(g),l[e].add(g),l[n].add(g),c[t].add(y),c[e].add(y),c[n].add(y))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let M=0,C=b.length;M<C;++M){const t=b[M],e=t.start;for(let r=e,i=e+t.count;r<i;r+=3)v(n[r+0],n[r+1],n[r+2])}const x=new It,_=new It,w=new It,S=new It;function E(t){w.fromArray(i,3*t),S.copy(w);const e=l[t];x.copy(e),x.sub(w.multiplyScalar(w.dot(e))).normalize(),_.crossVectors(S,e);const n=_.dot(c[t])<0?-1:1;o[4*t]=x.x,o[4*t+1]=x.y,o[4*t+2]=x.z,o[4*t+3]=n}for(let M=0,C=b.length;M<C;++M){const t=b[M],e=t.start;for(let r=e,i=e+t.count;r<i;r+=3)E(n[r+0]),E(n[r+1]),E(n[r+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Ze(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new It,i=new It,a=new It,s=new It,o=new It,l=new It,c=new It,u=new It;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),f=t.getX(h+1),p=t.getX(h+2);r.fromBufferAttribute(e,d),i.fromBufferAttribute(e,f),a.fromBufferAttribute(e,p),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),s.fromBufferAttribute(n,d),o.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),s.add(c),o.add(c),l.add(c),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(f,o.x,o.y,o.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,h=e.count;t<h;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),a.fromBufferAttribute(e,t+2),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)ln.fromBufferAttribute(t,e),ln.normalize(),t.setXYZ(e,ln.x,ln.y,ln.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,a=new n.constructor(e.length*r);let s=0,o=0;for(let l=0,c=e.length;l<c;l++){s=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*r;for(let t=0;t<r;t++)a[o++]=n[s++]}return new Ze(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new cn,n=this.index.array,r=this.attributes;for(const s in r){const i=t(r[s],n);e.setAttribute(s,i)}const i=this.morphAttributes;for(const s in i){const r=[],a=i[s];for(let e=0,i=a.length;e<i;e++){const i=t(a[e],n);r.push(i)}e.morphAttributes[s]=r}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,o=a.length;s<o;s++){const t=a[s];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const o in n){const e=n[o];t.data.attributes[o]=e.toJSON(t.data)}const r={};let i=!1;for(const o in this.morphAttributes){const e=this.morphAttributes[o],n=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];n.push(i.toJSON(t.data))}n.length>0&&(r[o]=n,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const l in r){const t=r[l];this.setAttribute(l,t.clone(e))}const i=t.morphAttributes;for(const l in i){const t=[],n=i[l];for(let r=0,i=n.length;r<i;r++)t.push(n[r].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let l=0,c=a.length;l<c;l++){const t=a[l];this.addGroup(t.start,t.count,t.materialIndex)}const s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const un=new ce,hn=new le,dn=new te,fn=new It,pn=new It,mn=new It,gn=new It,yn=new It,vn=new st,bn=new st,xn=new st,_n=new It,wn=new It;class Sn extends De{constructor(t=new cn,e=new qe){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;e.fromBufferAttribute(r,t);const s=this.morphTargetInfluences;if(i&&s){yn.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=s[n],o=i[n];0!==r&&(gn.fromBufferAttribute(o,t),a?yn.addScaledVector(gn,r):yn.addScaledVector(gn.sub(e),r))}e.add(yn)}return this.isSkinnedMesh&&this.boneTransform(t,e),e}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),dn.copy(n.boundingSphere),dn.applyMatrix4(i),!1===t.ray.intersectsSphere(dn))return;if(un.copy(i).invert(),hn.copy(t.ray).applyMatrix4(un),null!==n.boundingBox&&!1===hn.intersectsBox(n.boundingBox))return;let a;const s=n.index,o=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,u=n.groups,h=n.drawRange;if(null!==s)if(Array.isArray(r))for(let d=0,f=u.length;d<f;d++){const n=u[d],i=r[n.materialIndex];for(let r=Math.max(n.start,h.start),o=Math.min(s.count,Math.min(n.start+n.count,h.start+h.count));r<o;r+=3){const o=s.getX(r),u=s.getX(r+1),h=s.getX(r+2);a=En(this,i,t,hn,l,c,o,u,h),a&&(a.faceIndex=Math.floor(r/3),a.face.materialIndex=n.materialIndex,e.push(a))}}else{for(let n=Math.max(0,h.start),i=Math.min(s.count,h.start+h.count);n<i;n+=3){const i=s.getX(n),o=s.getX(n+1),u=s.getX(n+2);a=En(this,r,t,hn,l,c,i,o,u),a&&(a.faceIndex=Math.floor(n/3),e.push(a))}}else if(void 0!==o)if(Array.isArray(r))for(let d=0,f=u.length;d<f;d++){const n=u[d],i=r[n.materialIndex];for(let r=Math.max(n.start,h.start),s=Math.min(o.count,Math.min(n.start+n.count,h.start+h.count));r<s;r+=3){a=En(this,i,t,hn,l,c,r,r+1,r+2),a&&(a.faceIndex=Math.floor(r/3),a.face.materialIndex=n.materialIndex,e.push(a))}}else{for(let n=Math.max(0,h.start),i=Math.min(o.count,h.start+h.count);n<i;n+=3){a=En(this,r,t,hn,l,c,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),e.push(a))}}}}function En(t,e,n,r,i,a,s,o,l){t.getVertexPosition(s,fn),t.getVertexPosition(o,pn),t.getVertexPosition(l,mn);const c=function(t,e,n,r,i,a,s,o){let l;if(l=1===e.side?r.intersectTriangle(s,a,i,!0,o):r.intersectTriangle(i,a,s,0===e.side,o),null===l)return null;wn.copy(o),wn.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(wn);return c<n.near||c>n.far?null:{distance:c,point:wn.clone(),object:t}}(t,e,n,r,fn,pn,mn,_n);if(c){i&&(vn.fromBufferAttribute(i,s),bn.fromBufferAttribute(i,o),xn.fromBufferAttribute(i,l),c.uv=We.getUV(_n,fn,pn,mn,vn,bn,xn,new st)),a&&(vn.fromBufferAttribute(a,s),bn.fromBufferAttribute(a,o),xn.fromBufferAttribute(a,l),c.uv2=We.getUV(_n,fn,pn,mn,vn,bn,xn,new st));const t={a:s,b:o,c:l,normal:new It,materialIndex:0};We.getNormal(fn,pn,mn,t.normal),c.face=t}return c}class Mn extends cn{constructor(t=1,e=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};const s=this;r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);const o=[],l=[],c=[],u=[];let h=0,d=0;function f(t,e,n,r,i,a,f,p,m,g,y){const v=a/m,b=f/g,x=a/2,_=f/2,w=p/2,S=m+1,E=g+1;let M=0,C=0;const T=new It;for(let s=0;s<E;s++){const a=s*b-_;for(let o=0;o<S;o++){const h=o*v-x;T[t]=h*r,T[e]=a*i,T[n]=w,l.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[n]=p>0?1:-1,c.push(T.x,T.y,T.z),u.push(o/m),u.push(1-s/g),M+=1}}for(let s=0;s<g;s++)for(let t=0;t<m;t++){const e=h+t+S*s,n=h+t+S*(s+1),r=h+(t+1)+S*(s+1),i=h+(t+1)+S*s;o.push(e,n,i),o.push(n,r,i),C+=6}s.addGroup(d,C,y),d+=C,h+=M}f("z","y","x",-1,-1,n,e,t,a,i,0),f("z","y","x",1,-1,n,e,-t,a,i,1),f("x","z","y",1,1,t,n,e,r,a,2),f("x","z","y",1,-1,t,n,-e,r,a,3),f("x","y","z",1,-1,t,e,n,r,i,4),f("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(o),this.setAttribute("position",new tn(l,3)),this.setAttribute("normal",new tn(c,3)),this.setAttribute("uv",new tn(u,2))}static fromJSON(t){return new Mn(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Cn(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Tn(t){const e={};for(let n=0;n<t.length;n++){const r=Cn(t[n]);for(const t in r)e[t]=r[t]}return e}function An(t){return null===t.getRenderTarget()&&t.outputEncoding===F?z:U}const kn={clone:Cn,merge:Tn};class Ln extends Ye{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Cn(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?e.uniforms[r]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[r]={type:"m4",value:n.toArray()}:e.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class Pn extends De{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ce,this.projectionMatrix=new ce,this.projectionMatrixInverse=new ce}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Rn extends Pn{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*X*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*q*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*X*Math.atan(Math.tan(.5*q*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,i,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*q*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const t=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/t,e-=a.offsetY*n/s,r*=a.width/t,n*=a.height/s}const s=this.filmOffset;0!==s&&(i+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const In=-90;class Dn extends De{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new Rn(In,1,t,e);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const i=new Rn(In,1,t,e);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(-1,0,0),this.add(i);const a=new Rn(In,1,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);const s=new Rn(In,1,t,e);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(0,-1,0),this.add(s);const o=new Rn(In,1,t,e);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);const l=new Rn(In,1,t,e);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,a,s,o,l]=this.children,c=t.getRenderTarget(),u=t.toneMapping,h=t.xr.enabled;t.toneMapping=0,t.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,a),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,o),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(c),t.toneMapping=u,t.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class Bn extends Tt{constructor(t,e,n,r,i,s,o,l,c,u){super(t=void 0!==t?t:[],e=void 0!==e?e:a,n,r,i,s,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class On extends kt{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];this.texture=new Bn(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:g}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Mn(5,5,5),i=new Ln({name:"CubemapFromEquirect",uniforms:Cn(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=e;const a=new Sn(r,i),s=e.minFilter;e.minFilter===v&&(e.minFilter=g);return new Dn(1,10,this).update(t,a),e.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,n,r);t.setRenderTarget(i)}}const Nn=new It,Fn=new It,zn=new ot;class Un{constructor(t=new It(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=Nn.subVectors(n,e).cross(Fn.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(Nn),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(n).multiplyScalar(i).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||zn.getNormalMatrix(t),r=this.coplanarPoint(Nn).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Gn=new te,Hn=new It;class jn{constructor(t=new Un,e=new Un,n=new Un,r=new Un,i=new Un,a=new Un){this.planes=[t,e,n,r,i,a]}set(t,e,n,r,i,a){const s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(a),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],y=n[14],v=n[15];return e[0].setComponents(s-r,u-o,p-h,v-m).normalize(),e[1].setComponents(s+r,u+o,p+h,v+m).normalize(),e[2].setComponents(s+i,u+l,p+d,v+g).normalize(),e[3].setComponents(s-i,u-l,p-d,v-g).normalize(),e[4].setComponents(s-a,u-c,p-f,v-y).normalize(),e[5].setComponents(s+a,u+c,p+f,v+y).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Gn.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Gn)}intersectsSprite(t){return Gn.center.set(0,0,0),Gn.radius=.7071067811865476,Gn.applyMatrix4(t.matrixWorld),this.intersectsSphere(Gn)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(Hn.x=r.normal.x>0?t.max.x:t.min.x,Hn.y=r.normal.y>0?t.max.y:t.min.y,Hn.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Hn)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Vn(){let t=null,e=!1,n=null,r=null;function i(e,a){n(e,a),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Wn(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const a=r.get(e);void 0===a?r.set(e,function(e,r){const i=e.array,a=e.usage,s=t.createBuffer();let o;if(t.bindBuffer(r,s),t.bufferData(r,i,a),e.onUploadCallback(),i instanceof Float32Array)o=5126;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=5131}else o=5123;else if(i instanceof Int16Array)o=5122;else if(i instanceof Uint32Array)o=5125;else if(i instanceof Int32Array)o=5124;else if(i instanceof Int8Array)o=5120;else if(i instanceof Uint8Array)o=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);o=5121}return{buffer:s,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):a.version<e.version&&(!function(e,r,i){const a=r.array,s=r.updateRange;t.bindBuffer(i,e),-1===s.count?t.bufferSubData(i,0,a):(n?t.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):t.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),r.onUploadCallback()}(a.buffer,e,i),a.version=e.version)}}}class $n extends cn{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,a=e/2,s=Math.floor(n),o=Math.floor(r),l=s+1,c=o+1,u=t/s,h=e/o,d=[],f=[],p=[],m=[];for(let g=0;g<c;g++){const t=g*h-a;for(let e=0;e<l;e++){const n=e*u-i;f.push(n,-t,0),p.push(0,0,1),m.push(e/s),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let t=0;t<s;t++){const e=t+l*g,n=t+l*(g+1),r=t+1+l*(g+1),i=t+1+l*g;d.push(e,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new tn(f,3)),this.setAttribute("normal",new tn(p,3)),this.setAttribute("uv",new tn(m,2))}static fromJSON(t){return new $n(t.width,t.height,t.widthSegments,t.heightSegments)}}const Yn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},qn={common:{diffuse:{value:new _t(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ot},uv2Transform:{value:new ot},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new st(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _t(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _t(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ot}},sprite:{diffuse:{value:new _t(16777215)},opacity:{value:1},center:{value:new st(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ot}}},Xn={basic:{uniforms:Tn([qn.common,qn.specularmap,qn.envmap,qn.aomap,qn.lightmap,qn.fog]),vertexShader:Yn.meshbasic_vert,fragmentShader:Yn.meshbasic_frag},lambert:{uniforms:Tn([qn.common,qn.specularmap,qn.envmap,qn.aomap,qn.lightmap,qn.emissivemap,qn.bumpmap,qn.normalmap,qn.displacementmap,qn.fog,qn.lights,{emissive:{value:new _t(0)}}]),vertexShader:Yn.meshlambert_vert,fragmentShader:Yn.meshlambert_frag},phong:{uniforms:Tn([qn.common,qn.specularmap,qn.envmap,qn.aomap,qn.lightmap,qn.emissivemap,qn.bumpmap,qn.normalmap,qn.displacementmap,qn.fog,qn.lights,{emissive:{value:new _t(0)},specular:{value:new _t(1118481)},shininess:{value:30}}]),vertexShader:Yn.meshphong_vert,fragmentShader:Yn.meshphong_frag},standard:{uniforms:Tn([qn.common,qn.envmap,qn.aomap,qn.lightmap,qn.emissivemap,qn.bumpmap,qn.normalmap,qn.displacementmap,qn.roughnessmap,qn.metalnessmap,qn.fog,qn.lights,{emissive:{value:new _t(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Yn.meshphysical_vert,fragmentShader:Yn.meshphysical_frag},toon:{uniforms:Tn([qn.common,qn.aomap,qn.lightmap,qn.emissivemap,qn.bumpmap,qn.normalmap,qn.displacementmap,qn.gradientmap,qn.fog,qn.lights,{emissive:{value:new _t(0)}}]),vertexShader:Yn.meshtoon_vert,fragmentShader:Yn.meshtoon_frag},matcap:{uniforms:Tn([qn.common,qn.bumpmap,qn.normalmap,qn.displacementmap,qn.fog,{matcap:{value:null}}]),vertexShader:Yn.meshmatcap_vert,fragmentShader:Yn.meshmatcap_frag},points:{uniforms:Tn([qn.points,qn.fog]),vertexShader:Yn.points_vert,fragmentShader:Yn.points_frag},dashed:{uniforms:Tn([qn.common,qn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Yn.linedashed_vert,fragmentShader:Yn.linedashed_frag},depth:{uniforms:Tn([qn.common,qn.displacementmap]),vertexShader:Yn.depth_vert,fragmentShader:Yn.depth_frag},normal:{uniforms:Tn([qn.common,qn.bumpmap,qn.normalmap,qn.displacementmap,{opacity:{value:1}}]),vertexShader:Yn.meshnormal_vert,fragmentShader:Yn.meshnormal_frag},sprite:{uniforms:Tn([qn.sprite,qn.fog]),vertexShader:Yn.sprite_vert,fragmentShader:Yn.sprite_frag},background:{uniforms:{uvTransform:{value:new ot},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Yn.background_vert,fragmentShader:Yn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Yn.backgroundCube_vert,fragmentShader:Yn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Yn.cube_vert,fragmentShader:Yn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Yn.equirect_vert,fragmentShader:Yn.equirect_frag},distanceRGBA:{uniforms:Tn([qn.common,qn.displacementmap,{referencePosition:{value:new It},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Yn.distanceRGBA_vert,fragmentShader:Yn.distanceRGBA_frag},shadow:{uniforms:Tn([qn.lights,qn.fog,{color:{value:new _t(0)},opacity:{value:1}}]),vertexShader:Yn.shadow_vert,fragmentShader:Yn.shadow_frag}};Xn.physical={uniforms:Tn([Xn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new st(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new _t(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new st},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new _t(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new _t(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Yn.meshphysical_vert,fragmentShader:Yn.meshphysical_frag};const Jn={r:0,b:0,g:0};function Zn(t,e,n,r,i,a,s){const o=new _t(0);let l,u,h=!0===a?0:1,d=null,f=0,p=null;function m(e,n){e.getRGB(Jn,An(t)),r.buffers.color.setClear(Jn.r,Jn.g,Jn.b,n,s)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),h=e,m(o,h)},getClearAlpha:function(){return h},setClearAlpha:function(t){h=t,m(o,h)},render:function(r,a){let s=!1,g=!0===a.isScene?a.background:null;if(g&&g.isTexture){g=(a.backgroundBlurriness>0?n:e).get(g)}const y=t.xr,v=y.getSession&&y.getSession();v&&"additive"===v.environmentBlendMode&&(g=null),null===g?m(o,h):g&&g.isColor&&(m(g,1),s=!0),(t.autoClear||s)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),g&&(g.isCubeTexture||g.mapping===c)?(void 0===u&&(u=new Sn(new Mn(1,1,1),new Ln({name:"BackgroundCubeMaterial",uniforms:Cn(Xn.backgroundCube.uniforms),vertexShader:Xn.backgroundCube.vertexShader,fragmentShader:Xn.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=g,u.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=a.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,u.material.toneMapped=g.encoding!==F,d===g&&f===g.version&&p===t.toneMapping||(u.material.needsUpdate=!0,d=g,f=g.version,p=t.toneMapping),u.layers.enableAll(),r.unshift(u,u.geometry,u.material,0,0,null)):g&&g.isTexture&&(void 0===l&&(l=new Sn(new $n(2,2),new Ln({name:"BackgroundMaterial",uniforms:Cn(Xn.background.uniforms),vertexShader:Xn.background.vertexShader,fragmentShader:Xn.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=g,l.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,l.material.toneMapped=g.encoding!==F,!0===g.matrixAutoUpdate&&g.updateMatrix(),l.material.uniforms.uvTransform.value.copy(g.matrix),d===g&&f===g.version&&p===t.toneMapping||(l.material.needsUpdate=!0,d=g,f=g.version,p=t.toneMapping),l.layers.enableAll(),r.unshift(l,l.geometry,l.material,0,0,null))}}}function Kn(t,e,n,r){const i=t.getParameter(34921),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||null!==a,o={},l=f(null);let c=l,u=!1;function h(e){return r.isWebGL2?t.bindVertexArray(e):a.bindVertexArrayOES(e)}function d(e){return r.isWebGL2?t.deleteVertexArray(e):a.deleteVertexArrayOES(e)}function f(t){const e=[],n=[],r=[];for(let a=0;a<i;a++)e[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function p(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function m(t){g(t,0)}function g(n,i){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;if(a[n]=1,0===s[n]&&(t.enableVertexAttribArray(n),s[n]=1),o[n]!==i){(r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),o[n]=i}}function y(){const e=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function v(e,n,i,a,s,o){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,a,s,o):t.vertexAttribIPointer(e,n,i,s,o)}function b(){x(),u=!0,c!==l&&(c=l,h(c.object))}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,b,x){let _=!1;if(s){const e=function(e,n,i){const s=!0===i.wireframe;let l=o[e.id];void 0===l&&(l={},o[e.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[s];void 0===u&&(u=f(r.isWebGL2?t.createVertexArray():a.createVertexArrayOES()),c[s]=u);return u}(b,d,l);c!==e&&(c=e,h(c.object)),_=function(t,e,n,r){const i=c.attributes,a=e.attributes;let s=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){const e=i[l];let n=a[l];if(void 0===n&&("instanceMatrix"===l&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(n=t.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;s++}}return c.attributesNum!==s||c.index!==r}(i,b,d,x),_&&function(t,e,n,r){const i={},a=e.attributes;let s=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){let e=a[l];void 0===e&&("instanceMatrix"===l&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(e=t.instanceColor));const n={};n.attribute=e,e&&e.data&&(n.data=e.data),i[l]=n,s++}}c.attributes=i,c.attributesNum=s,c.index=r}(i,b,d,x)}else{const t=!0===l.wireframe;c.geometry===b.id&&c.program===d.id&&c.wireframe===t||(c.geometry=b.id,c.program=d.id,c.wireframe=t,_=!0)}null!==x&&n.update(x,34963),(_||u)&&(u=!1,function(i,a,s,o){if(!1===r.isWebGL2&&(i.isInstancedMesh||o.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;p();const l=o.attributes,c=s.getAttributes(),u=a.defaultAttributeValues;for(const e in c){const r=c[e];if(r.location>=0){let a=l[e];if(void 0===a&&("instanceMatrix"===e&&i.instanceMatrix&&(a=i.instanceMatrix),"instanceColor"===e&&i.instanceColor&&(a=i.instanceColor)),void 0!==a){const e=a.normalized,s=a.itemSize,l=n.get(a);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(a.isInterleavedBufferAttribute){const n=a.data,l=n.stride,d=a.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<r.locationSize;t++)g(r.location+t,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<r.locationSize;t++)m(r.location+t);t.bindBuffer(34962,c);for(let t=0;t<r.locationSize;t++)v(r.location+t,s/r.locationSize,u,e,l*h,(d+s/r.locationSize*t)*h)}else{if(a.isInstancedBufferAttribute){for(let t=0;t<r.locationSize;t++)g(r.location+t,a.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let t=0;t<r.locationSize;t++)m(r.location+t);t.bindBuffer(34962,c);for(let t=0;t<r.locationSize;t++)v(r.location+t,s/r.locationSize,u,e,s*h,s/r.locationSize*t*h)}}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r.location,n);break;case 3:t.vertexAttrib3fv(r.location,n);break;case 4:t.vertexAttrib4fv(r.location,n);break;default:t.vertexAttrib1fv(r.location,n)}}}}y()}(i,l,d,b),null!==x&&t.bindBuffer(34963,n.get(x).buffer))},reset:b,resetDefaultState:x,dispose:function(){b();for(const t in o){const e=o[t];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete o[t]}},releaseStatesOfGeometry:function(t){if(void 0===o[t.id])return;const e=o[t.id];for(const n in e){const t=e[n];for(const e in t)d(t[e].object),delete t[e];delete e[n]}delete o[t.id]},releaseStatesOfProgram:function(t){for(const e in o){const n=o[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)d(r[t].object),delete r[t];delete n[t.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:y}}function Qn(t,e,n,r){const i=r.isWebGL2;let a;this.setMode=function(t){a=t},this.render=function(e,r){t.drawArrays(a,e,r),n.update(r,a,1)},this.renderInstances=function(r,s,o){if(0===o)return;let l,c;if(i)l=t,c="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,r,s,o),n.update(s,a,o)}}function tr(t,e,n){let r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let s=void 0!==n.precision?n.precision:"highp";const o=i(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=a||e.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=t.getParameter(34930),h=t.getParameter(35660),d=t.getParameter(3379),f=t.getParameter(34076),p=t.getParameter(34921),m=t.getParameter(36347),g=t.getParameter(36348),y=t.getParameter(36349),v=h>0,b=a||e.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:v,floatFragmentTextures:b,floatVertexTextures:v&&b,maxSamples:a?t.getParameter(36183):0}}function er(t){const e=this;let n=null,r=0,i=!1,a=!1;const s=new Un,o=new ot,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(t,n,r,i){const a=null!==t?t.length:0;let c=null;if(0!==a){if(c=l.value,!0!==i||null===c){const e=r+4*a,i=n.matrixWorldInverse;o.getNormalMatrix(i),(null===c||c.length<e)&&(c=new Float32Array(e));for(let n=0,l=r;n!==a;++n,l+=4)s.copy(t[n]).applyMatrix4(i,o),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=a,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,a){const s=0!==t.length||e||0!==r||i;return i=e,n=u(t,a,0),r=t.length,s},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1,c()},this.setState=function(e,s,o){const h=e.clippingPlanes,d=e.clipIntersection,f=e.clipShadows,p=t.get(e);if(!i||null===h||0===h.length||a&&!f)a?u(null):c();else{const t=a?0:r,e=4*t;let i=p.clippingState||null;l.value=i,i=u(h,s,e,o);for(let r=0;r!==e;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function nr(t){let e=new WeakMap;function n(t,e){return e===o?t.mapping=a:e===l&&(t.mapping=s),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const a=i.mapping;if(a===o||a===l){if(e.has(i)){return n(e.get(i).texture,i.mapping)}{const a=i.image;if(a&&a.height>0){const s=new On(a.height/2);return s.fromEquirectangularTexture(t,i),e.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}class rr extends Pn{constructor(t=-1,e=1,n=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,a=n+t,s=r+e,o=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,a=i+t*this.view.width,s-=e*this.view.offsetY,o=s-e*this.view.height}this.projectionMatrix.makeOrthographic(i,a,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const ir=[.125,.215,.35,.446,.526,.582],ar=20,sr=new rr,or=new _t;let lr=null;const cr=(1+Math.sqrt(5))/2,ur=1/cr,hr=[new It(1,1,1),new It(-1,1,1),new It(1,1,-1),new It(-1,1,-1),new It(0,cr,ur),new It(0,cr,-ur),new It(ur,0,cr),new It(-ur,0,cr),new It(cr,ur,0),new It(-cr,ur,0)];class dr{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){lr=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=gr(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=mr(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(lr),t.scissorTest=!1,pr(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===a||t.mapping===s?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),lr=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:g,minFilter:g,generateMipmaps:!1,type:w,format:E,encoding:N,depthBuffer:!1},r=fr(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=fr(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],r=[];let i=t;const a=t-4+1+ir.length;for(let s=0;s<a;s++){const a=Math.pow(2,i);n.push(a);let o=1/a;s>t-4?o=ir[s-t+4-1]:0===s&&(o=0),r.push(o);const l=1/(a-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,p=3,m=2,g=1,y=new Float32Array(p*f*d),v=new Float32Array(m*f*d),b=new Float32Array(g*f*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];y.set(r,p*f*t),v.set(h,m*f*t);const i=[t,t,t,t,t,t];b.set(i,g*f*t)}const x=new cn;x.setAttribute("position",new Ze(y,p)),x.setAttribute("uv",new Ze(v,m)),x.setAttribute("faceIndex",new Ze(b,g)),e.push(x),i>4&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(t,e,n){const r=new Float32Array(ar),i=new It(0,1,0),a=new Ln({name:"SphericalGaussianBlur",defines:{n:ar,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:yr(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return a}(r,t,e)}return r}_compileMaterial(t){const e=new Sn(this._lodPlanes[0],t);this._renderer.compile(e,sr)}_sceneToCubeUV(t,e,n,r){const i=new Rn(90,1,e,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(or),o.toneMapping=0,o.autoClear=!1;const u=new qe({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new Sn(new Mn,u);let d=!1;const f=t.background;f?f.isColor&&(u.color.copy(f),t.background=null,d=!0):(u.color.copy(or),d=!0);for(let p=0;p<6;p++){const e=p%3;0===e?(i.up.set(0,a[p],0),i.lookAt(s[p],0,0)):1===e?(i.up.set(0,0,a[p]),i.lookAt(0,s[p],0)):(i.up.set(0,a[p],0),i.lookAt(0,0,s[p]));const n=this._cubeSize;pr(r,e*n,p>2?n:0,n,n),o.setRenderTarget(r),d&&o.render(h,i),o.render(t,i)}h.geometry.dispose(),h.material.dispose(),o.toneMapping=c,o.autoClear=l,t.background=f}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===a||t.mapping===s;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=gr()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=mr());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new Sn(this._lodPlanes[0],i);i.uniforms.envMap.value=t;const l=this._cubeSize;pr(e,0,0,3*l,2*l),n.setRenderTarget(e),n.render(o,sr)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const e=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=hr[(r-1)%hr.length];this._blur(t,r-1,r,e,n)}e.autoClear=n}_blur(t,e,n,r,i){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,r,"latitudinal",i),this._halfBlur(a,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Sn(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):ar;p>ar&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let b=0;b<ar;++b){const t=b/f,e=Math.exp(-t*t/2);m.push(e),0===b?g+=e:b<p&&(g+=2*e)}for(let b=0;b<m.length;b++)m[b]=m[b]/g;u.envMap.value=t.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===a,s&&(u.poleAxis.value=s);const{_lodMax:y}=this;u.dTheta.value=d,u.mipInt.value=y-n;const v=this._sizeLods[r];pr(e,3*v*(r>y-4?r-y+4:0),4*(this._cubeSize-v),3*v,2*v),o.setRenderTarget(e),o.render(c,sr)}}function fr(t,e,n){const r=new kt(t,e,n);return r.texture.mapping=c,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function pr(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function mr(){return new Ln({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:yr(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function gr(){return new Ln({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:yr(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function yr(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function vr(t){let e=new WeakMap,n=null;function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const c=i.mapping,u=c===o||c===l,h=c===a||c===s;if(u||h){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=e.get(i);return null===n&&(n=new dr(t)),r=u?n.fromEquirectangular(i,r):n.fromCubemap(i,r),e.set(i,r),r.texture}if(e.has(i))return e.get(i).texture;{const a=i.image;if(u&&a&&a.height>0||h&&a&&function(t){let e=0;const n=6;for(let r=0;r<n;r++)void 0!==t[r]&&e++;return e===n}(a)){null===n&&(n=new dr(t));const a=u?n.fromEquirectangular(i):n.fromCubemap(i);return e.set(i,a),i.addEventListener("dispose",r),a.texture}return null}}}return i},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function br(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function xr(t,e,n,r){const i={},a=new WeakMap;function s(t){const o=t.target;null!==o.index&&e.remove(o.index);for(const n in o.attributes)e.remove(o.attributes[n]);o.removeEventListener("dispose",s),delete i[o.id];const l=a.get(o);l&&(e.remove(l),a.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(t){const n=[],r=t.index,i=t.attributes.position;let s=0;if(null!==r){const t=r.array;s=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],a=t[e+2];n.push(r,i,i,a,a,r)}}else{const t=i.array;s=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const o=new(ct(n)?Qe:Ke)(n,1);o.version=s;const l=a.get(t);l&&e.remove(l),a.set(t,o)}return{get:function(t,e){return!0===i[e.id]||(e.addEventListener("dispose",s),i[e.id]=!0,n.memory.geometries++),e},update:function(t){const n=t.attributes;for(const i in n)e.update(n[i],34962);const r=t.morphAttributes;for(const i in r){const t=r[i];for(let n=0,r=t.length;n<r;n++)e.update(t[n],34962)}},getWireframeAttribute:function(t){const e=a.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&o(t)}else o(t);return a.get(t)}}}function _r(t,e,n,r){const i=r.isWebGL2;let a,s,o;this.setMode=function(t){a=t},this.setIndex=function(t){s=t.type,o=t.bytesPerElement},this.render=function(e,r){t.drawElements(a,r,s,e*o),n.update(r,a,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(i)u=t,h="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](a,l,s,r*o,c),n.update(l,a,c)}}function wr(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Sr(t,e){return t[0]-e[0]}function Er(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Mr(t,e,n){const r={},i=new Float32Array(8),a=new WeakMap,s=new At,o=[];for(let l=0;l<8;l++)o[l]=[l,0];return{update:function(l,c,u,h){const d=l.morphTargetInfluences;if(!0===e.isWebGL2){const f=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==f?f.length:0;let m=a.get(c);if(void 0===m||m.count!==p){void 0!==m&&m.texture.dispose();const v=void 0!==c.morphAttributes.position,b=void 0!==c.morphAttributes.normal,x=void 0!==c.morphAttributes.color,w=c.morphAttributes.position||[],S=c.morphAttributes.normal||[],E=c.morphAttributes.color||[];let M=0;!0===v&&(M=1),!0===b&&(M=2),!0===x&&(M=3);let C=c.attributes.position.count*M,T=1;C>e.maxTextureSize&&(T=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const A=new Float32Array(C*T*4*p),k=new Lt(A,C,T,p);k.type=_,k.needsUpdate=!0;const L=4*M;for(let R=0;R<p;R++){const I=w[R],D=S[R],B=E[R],O=C*T*4*R;for(let N=0;N<I.count;N++){const F=N*L;!0===v&&(s.fromBufferAttribute(I,N),A[O+F+0]=s.x,A[O+F+1]=s.y,A[O+F+2]=s.z,A[O+F+3]=0),!0===b&&(s.fromBufferAttribute(D,N),A[O+F+4]=s.x,A[O+F+5]=s.y,A[O+F+6]=s.z,A[O+F+7]=0),!0===x&&(s.fromBufferAttribute(B,N),A[O+F+8]=s.x,A[O+F+9]=s.y,A[O+F+10]=s.z,A[O+F+11]=4===B.itemSize?s.w:1)}}function P(){k.dispose(),a.delete(c),c.removeEventListener("dispose",P)}m={count:p,texture:k,size:new st(C,T)},a.set(c,m),c.addEventListener("dispose",P)}let g=0;for(let z=0;z<d.length;z++)g+=d[z];const y=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(t,"morphTargetBaseInfluence",y),h.getUniforms().setValue(t,"morphTargetInfluences",d),h.getUniforms().setValue(t,"morphTargetsTexture",m.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",m.size)}else{const U=void 0===d?0:d.length;let G=r[c.id];if(void 0===G||G.length!==U){G=[];for(let $=0;$<U;$++)G[$]=[$,0];r[c.id]=G}for(let Y=0;Y<U;Y++){const q=G[Y];q[0]=Y,q[1]=d[Y]}G.sort(Er);for(let X=0;X<8;X++)X<U&&G[X][1]?(o[X][0]=G[X][0],o[X][1]=G[X][1]):(o[X][0]=Number.MAX_SAFE_INTEGER,o[X][1]=0);o.sort(Sr);const H=c.morphAttributes.position,j=c.morphAttributes.normal;let V=0;for(let J=0;J<8;J++){const Z=o[J],K=Z[0],Q=Z[1];K!==Number.MAX_SAFE_INTEGER&&Q?(H&&c.getAttribute("morphTarget"+J)!==H[K]&&c.setAttribute("morphTarget"+J,H[K]),j&&c.getAttribute("morphNormal"+J)!==j[K]&&c.setAttribute("morphNormal"+J,j[K]),i[J]=Q,V+=Q):(H&&!0===c.hasAttribute("morphTarget"+J)&&c.deleteAttribute("morphTarget"+J),j&&!0===c.hasAttribute("morphNormal"+J)&&c.deleteAttribute("morphNormal"+J),i[J]=0)}const W=c.morphTargetsRelative?1:1-V;h.getUniforms().setValue(t,"morphTargetBaseInfluence",W),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}}}function Cr(t,e,n,r){let i=new WeakMap;function a(t){const e=t.target;e.removeEventListener("dispose",a),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const s=r.render.frame,o=t.geometry,l=e.get(t,o);return i.get(l)!==s&&(e.update(l),i.set(l,s)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",a)&&t.addEventListener("dispose",a),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}const Tr=new Tt,Ar=new Lt,kr=new Pt,Lr=new Bn,Pr=[],Rr=[],Ir=new Float32Array(16),Dr=new Float32Array(9),Br=new Float32Array(4);function Or(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let a=Pr[i];if(void 0===a&&(a=new Float32Array(i),Pr[i]=a),0!==e){r.toArray(a,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(a,i)}return a}function Nr(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Fr(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function zr(t,e){let n=Rr[e];void 0===n&&(n=new Int32Array(e),Rr[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Ur(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Gr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Nr(n,e))return;t.uniform2fv(this.addr,e),Fr(n,e)}}function Hr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Nr(n,e))return;t.uniform3fv(this.addr,e),Fr(n,e)}}function jr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Nr(n,e))return;t.uniform4fv(this.addr,e),Fr(n,e)}}function Vr(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Nr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Fr(n,e)}else{if(Nr(n,r))return;Br.set(r),t.uniformMatrix2fv(this.addr,!1,Br),Fr(n,r)}}function Wr(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Nr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Fr(n,e)}else{if(Nr(n,r))return;Dr.set(r),t.uniformMatrix3fv(this.addr,!1,Dr),Fr(n,r)}}function $r(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Nr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Fr(n,e)}else{if(Nr(n,r))return;Ir.set(r),t.uniformMatrix4fv(this.addr,!1,Ir),Fr(n,r)}}function Yr(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function qr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Nr(n,e))return;t.uniform2iv(this.addr,e),Fr(n,e)}}function Xr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Nr(n,e))return;t.uniform3iv(this.addr,e),Fr(n,e)}}function Jr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Nr(n,e))return;t.uniform4iv(this.addr,e),Fr(n,e)}}function Zr(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Kr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Nr(n,e))return;t.uniform2uiv(this.addr,e),Fr(n,e)}}function Qr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Nr(n,e))return;t.uniform3uiv(this.addr,e),Fr(n,e)}}function ti(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Nr(n,e))return;t.uniform4uiv(this.addr,e),Fr(n,e)}}function ei(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||Tr,i)}function ni(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||kr,i)}function ri(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Lr,i)}function ii(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Ar,i)}function ai(t,e){t.uniform1fv(this.addr,e)}function si(t,e){const n=Or(e,this.size,2);t.uniform2fv(this.addr,n)}function oi(t,e){const n=Or(e,this.size,3);t.uniform3fv(this.addr,n)}function li(t,e){const n=Or(e,this.size,4);t.uniform4fv(this.addr,n)}function ci(t,e){const n=Or(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function ui(t,e){const n=Or(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function hi(t,e){const n=Or(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function di(t,e){t.uniform1iv(this.addr,e)}function fi(t,e){t.uniform2iv(this.addr,e)}function pi(t,e){t.uniform3iv(this.addr,e)}function mi(t,e){t.uniform4iv(this.addr,e)}function gi(t,e){t.uniform1uiv(this.addr,e)}function yi(t,e){t.uniform2uiv(this.addr,e)}function vi(t,e){t.uniform3uiv(this.addr,e)}function bi(t,e){t.uniform4uiv(this.addr,e)}function xi(t,e,n){const r=this.cache,i=e.length,a=zr(n,i);Nr(r,a)||(t.uniform1iv(this.addr,a),Fr(r,a));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||Tr,a[s])}function _i(t,e,n){const r=this.cache,i=e.length,a=zr(n,i);Nr(r,a)||(t.uniform1iv(this.addr,a),Fr(r,a));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||kr,a[s])}function wi(t,e,n){const r=this.cache,i=e.length,a=zr(n,i);Nr(r,a)||(t.uniform1iv(this.addr,a),Fr(r,a));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||Lr,a[s])}function Si(t,e,n){const r=this.cache,i=e.length,a=zr(n,i);Nr(r,a)||(t.uniform1iv(this.addr,a),Fr(r,a));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||Ar,a[s])}class Ei{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Ur;case 35664:return Gr;case 35665:return Hr;case 35666:return jr;case 35674:return Vr;case 35675:return Wr;case 35676:return $r;case 5124:case 35670:return Yr;case 35667:case 35671:return qr;case 35668:case 35672:return Xr;case 35669:case 35673:return Jr;case 5125:return Zr;case 36294:return Kr;case 36295:return Qr;case 36296:return ti;case 35678:case 36198:case 36298:case 36306:case 35682:return ei;case 35679:case 36299:case 36307:return ni;case 35680:case 36300:case 36308:case 36293:return ri;case 36289:case 36303:case 36311:case 36292:return ii}}(e.type)}}class Mi{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return ai;case 35664:return si;case 35665:return oi;case 35666:return li;case 35674:return ci;case 35675:return ui;case 35676:return hi;case 5124:case 35670:return di;case 35667:case 35671:return fi;case 35668:case 35672:return pi;case 35669:case 35673:return mi;case 5125:return gi;case 36294:return yi;case 36295:return vi;case 36296:return bi;case 35678:case 36198:case 36298:case 36306:case 35682:return xi;case 35679:case 36299:case 36307:return _i;case 35680:case 36300:case 36308:case 36293:return wi;case 36289:case 36303:case 36311:case 36292:return Si}}(e.type)}}class Ci{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const a=r[i];a.setValue(t,e[a.id],n)}}}const Ti=/(\w+)(\])?(\[|\.)?/g;function Ai(t,e){t.seq.push(e),t.map[e.id]=e}function ki(t,e,n){const r=t.name,i=r.length;for(Ti.lastIndex=0;;){const a=Ti.exec(r),s=Ti.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===i){Ai(n,void 0===c?new Ei(o,t,e):new Mi(o,t,e));break}{let t=n.map[o];void 0===t&&(t=new Ci(o),Ai(n,t)),n=t}}}class Li{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);ki(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,a=e.length;i!==a;++i){const a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n}}function Pi(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let Ri=0;function Ii(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let s=i;s<a;s++){const t=s+1;r.push(`${t===e?">":" "} ${t}: ${n[s]}`)}return r.join("\n")}(t.getShaderSource(e),r)}return i}function Di(t,e){const n=function(t){switch(t){case N:return["Linear","( value )"];case F:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Bi(t,e){let n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Oi(t){return""!==t}function Ni(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Fi(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const zi=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ui(t){return t.replace(zi,Gi)}function Gi(t,e){const n=Yn[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Ui(n)}const Hi=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ji(t){return t.replace(Hi,Vi)}function Vi(t,e,n,r){let i="";for(let a=parseInt(e);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Wi(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function $i(t,e,n,r){const i=t.getContext(),o=n.defines;let l=n.vertexShader,u=n.fragmentShader;const h=function(t){let e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),d=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case a:case s:e="ENVMAP_TYPE_CUBE";break;case c:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),f=function(t){let e="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===s&&(e="ENVMAP_MODE_REFRACTION");return e}(n),p=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),m=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),g=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Oi).join("\n")}(n),y=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(o),v=i.createProgram();let b,x,_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(b=[y].filter(Oi).join("\n"),b.length>0&&(b+="\n"),x=[g,y].filter(Oi).join("\n"),x.length>0&&(x+="\n")):(b=[Wi(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Oi).join("\n"),x=[g,Wi(n),"#define SHADER_NAME "+n.shaderName,y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",n.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Yn.tonemapping_pars_fragment:"",0!==n.toneMapping?Bi("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Yn.encodings_pars_fragment,Di("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Oi).join("\n")),l=Ui(l),l=Ni(l,n),l=Fi(l,n),u=Ui(u),u=Ni(u,n),u=Fi(u,n),l=ji(l),u=ji(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,x=["#define varying in",n.glslVersion===j?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===j?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const w=_+x+u,S=Pi(i,35633,_+b+l),E=Pi(i,35632,w);if(i.attachShader(v,S),i.attachShader(v,E),void 0!==n.index0AttributeName?i.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v),t.debug.checkShaderErrors){const t=i.getProgramInfoLog(v).trim(),e=i.getShaderInfoLog(S).trim(),n=i.getShaderInfoLog(E).trim();let r=!0,a=!0;if(!1===i.getProgramParameter(v,35714)){r=!1;const e=Ii(i,S,"vertex"),n=Ii(i,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==e&&""!==n||(a=!1);a&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e,prefix:b},fragmentShader:{log:n,prefix:x}})}let M,C;return i.deleteShader(S),i.deleteShader(E),this.getUniforms=function(){return void 0===M&&(M=new Li(i,v)),M},this.getAttributes=function(){return void 0===C&&(C=function(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),a=r.name;let s=1;35674===r.type&&(s=2),35675===r.type&&(s=3),35676===r.type&&(s=4),n[a]={type:r.type,location:t.getAttribLocation(e,a),locationSize:s}}return n}(i,v)),C},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=Ri++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=S,this.fragmentShader=E,this}let Yi=0;class qi{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new Xi(t),e.set(t,n)),n}}class Xi{constructor(t){this.id=Yi++,this.code=t,this.usedTimes=0}}function Ji(t,e,n,r,i,a,s){const o=new xe,l=new qi,u=[],h=i.isWebGL2,d=i.logarithmicDepthBuffer,f=i.vertexTextures;let p=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,o,u,g,y){const v=g.fog,b=y.geometry,x=a.isMeshStandardMaterial?g.environment:null,_=(a.isMeshStandardMaterial?n:e).get(a.envMap||x),w=_&&_.mapping===c?_.image.height:null,S=m[a.type];null!==a.precision&&(p=i.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));const E=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,M=void 0!==E?E.length:0;let C,T,A,k,L=0;if(void 0!==b.morphAttributes.position&&(L=1),void 0!==b.morphAttributes.normal&&(L=2),void 0!==b.morphAttributes.color&&(L=3),S){const t=Xn[S];C=t.vertexShader,T=t.fragmentShader}else C=a.vertexShader,T=a.fragmentShader,l.update(a),A=l.getVertexShaderID(a),k=l.getFragmentShaderID(a);const P=t.getRenderTarget(),R=a.alphaTest>0,I=a.clearcoat>0,D=a.iridescence>0;return{isWebGL2:h,shaderID:S,shaderName:a.type,vertexShader:C,fragmentShader:T,defines:a.defines,customVertexShaderID:A,customFragmentShaderID:k,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:f,outputEncoding:null===P?t.outputEncoding:!0===P.isXRRenderTarget?P.texture.encoding:N,map:!!a.map,matcap:!!a.matcap,envMap:!!_,envMapMode:_&&_.mapping,envMapCubeUVHeight:w,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:1===a.normalMapType,tangentSpaceNormalMap:0===a.normalMapType,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===F,clearcoat:I,clearcoatMap:I&&!!a.clearcoatMap,clearcoatRoughnessMap:I&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:I&&!!a.clearcoatNormalMap,iridescence:D,iridescenceMap:D&&!!a.iridescenceMap,iridescenceThicknessMap:D&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&1===a.blending,alphaMap:!!a.alphaMap,alphaTest:R,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!b.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheenColorMap||a.sheenRoughnessMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!v,useFog:!0===a.fog,fogExp2:v&&v.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:M,morphTextureStride:L,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:a.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){o.disableAll(),e.isWebGL2&&o.enable(0);e.supportsVertexTextures&&o.enable(1);e.instancing&&o.enable(2);e.instancingColor&&o.enable(3);e.map&&o.enable(4);e.matcap&&o.enable(5);e.envMap&&o.enable(6);e.lightMap&&o.enable(7);e.aoMap&&o.enable(8);e.emissiveMap&&o.enable(9);e.bumpMap&&o.enable(10);e.normalMap&&o.enable(11);e.objectSpaceNormalMap&&o.enable(12);e.tangentSpaceNormalMap&&o.enable(13);e.clearcoat&&o.enable(14);e.clearcoatMap&&o.enable(15);e.clearcoatRoughnessMap&&o.enable(16);e.clearcoatNormalMap&&o.enable(17);e.iridescence&&o.enable(18);e.iridescenceMap&&o.enable(19);e.iridescenceThicknessMap&&o.enable(20);e.displacementMap&&o.enable(21);e.specularMap&&o.enable(22);e.roughnessMap&&o.enable(23);e.metalnessMap&&o.enable(24);e.gradientMap&&o.enable(25);e.alphaMap&&o.enable(26);e.alphaTest&&o.enable(27);e.vertexColors&&o.enable(28);e.vertexAlphas&&o.enable(29);e.vertexUvs&&o.enable(30);e.vertexTangents&&o.enable(31);e.uvsVertexOnly&&o.enable(32);t.push(o.mask),o.disableAll(),e.fog&&o.enable(0);e.useFog&&o.enable(1);e.flatShading&&o.enable(2);e.logarithmicDepthBuffer&&o.enable(3);e.skinning&&o.enable(4);e.morphTargets&&o.enable(5);e.morphNormals&&o.enable(6);e.morphColors&&o.enable(7);e.premultipliedAlpha&&o.enable(8);e.shadowMapEnabled&&o.enable(9);e.physicallyCorrectLights&&o.enable(10);e.doubleSided&&o.enable(11);e.flipSided&&o.enable(12);e.useDepthPacking&&o.enable(13);e.dithering&&o.enable(14);e.specularIntensityMap&&o.enable(15);e.specularColorMap&&o.enable(16);e.transmission&&o.enable(17);e.transmissionMap&&o.enable(18);e.thicknessMap&&o.enable(19);e.sheen&&o.enable(20);e.sheenColorMap&&o.enable(21);e.sheenRoughnessMap&&o.enable(22);e.decodeVideoTexture&&o.enable(23);e.opaque&&o.enable(24);t.push(o.mask)}(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=m[t.type];let n;if(e){const t=Xn[e];n=kn.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let t=0,i=u.length;t<i;t++){const e=u[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new $i(t,n,e,a),u.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=u.indexOf(t);u[e]=u[u.length-1],u.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:u,dispose:function(){l.dispose()}}}function Zi(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function Ki(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Qi(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ta(){const t=[];let e=0;const n=[],r=[],i=[];function a(n,r,i,a,s,o){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),e++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){e=0,n.length=0,r.length=0,i.length=0},push:function(t,e,s,o,l,c){const u=a(t,e,s,o,l,c);s.transmission>0?r.push(u):!0===s.transparent?i.push(u):n.push(u)},unshift:function(t,e,s,o,l,c){const u=a(t,e,s,o,l,c);s.transmission>0?r.unshift(u):!0===s.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Ki),r.length>1&&r.sort(e||Qi),i.length>1&&i.sort(e||Qi)}}}function ea(){let t=new WeakMap;return{get:function(e,n){const r=t.get(e);let i;return void 0===r?(i=new ta,t.set(e,[i])):n>=r.length?(i=new ta,r.push(i)):i=r[n],i},dispose:function(){t=new WeakMap}}}function na(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new It,color:new _t};break;case"SpotLight":n={position:new It,direction:new It,color:new _t,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new It,color:new _t,distance:0,decay:0};break;case"HemisphereLight":n={direction:new It,skyColor:new _t,groundColor:new _t};break;case"RectAreaLight":n={color:new _t,position:new It,halfWidth:new It,halfHeight:new It}}return t[e.id]=n,n}}}let ra=0;function ia(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function aa(t,e){const n=new na,r=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new st};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new st,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let l=0;l<9;l++)i.probe.push(new It);const a=new It,s=new ce,o=new ce;return{setup:function(a,s){let o=0,l=0,c=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let u=0,h=0,d=0,f=0,p=0,m=0,g=0,y=0,v=0,b=0;a.sort(ia);const x=!0!==s?Math.PI:1;for(let t=0,e=a.length;t<e;t++){const e=a[t],s=e.color,_=e.intensity,w=e.distance,S=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)o+=s.r*_*x,l+=s.g*_*x,c+=s.b*_*x;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],_);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*x),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=S,i.directionalShadowMatrix[u]=e.shadow.matrix,m++}i.directional[u]=t,u++}else if(e.isSpotLight){const t=n.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(s).multiplyScalar(_*x),t.distance=w,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,i.spot[d]=t;const a=e.shadow;if(e.map&&(i.spotLightMap[v]=e.map,v++,a.updateMatrices(e),e.castShadow&&b++),i.spotLightMatrix[d]=a.matrix,e.castShadow){const t=r.get(e);t.shadowBias=a.bias,t.shadowNormalBias=a.normalBias,t.shadowRadius=a.radius,t.shadowMapSize=a.mapSize,i.spotShadow[d]=t,i.spotShadowMap[d]=S,y++}d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(s).multiplyScalar(_),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[f]=t,f++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*x),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=S,i.pointShadowMatrix[h]=e.shadow.matrix,g++}i.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(_*x),t.groundColor.copy(e.groundColor).multiplyScalar(_*x),i.hemi[p]=t,p++}}f>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=qn.LTC_FLOAT_1,i.rectAreaLTC2=qn.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=qn.LTC_HALF_1,i.rectAreaLTC2=qn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=l,i.ambient[2]=c;const _=i.hash;_.directionalLength===u&&_.pointLength===h&&_.spotLength===d&&_.rectAreaLength===f&&_.hemiLength===p&&_.numDirectionalShadows===m&&_.numPointShadows===g&&_.numSpotShadows===y&&_.numSpotMaps===v||(i.directional.length=u,i.spot.length=d,i.rectArea.length=f,i.point.length=h,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=y+v-b,i.spotLightMap.length=v,i.numSpotLightShadowsWithMaps=b,_.directionalLength=u,_.pointLength=h,_.spotLength=d,_.rectAreaLength=f,_.hemiLength=p,_.numDirectionalShadows=m,_.numPointShadows=g,_.numSpotShadows=y,_.numSpotMaps=v,i.version=ra++)},setupView:function(t,e){let n=0,r=0,l=0,c=0,u=0;const h=e.matrixWorldInverse;for(let d=0,f=t.length;d<f;d++){const e=t[d];if(e.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),a.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(h),n++}else if(e.isSpotLight){const t=i.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(e.matrixWorld),a.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(h),l++}else if(e.isRectAreaLight){const t=i.rectArea[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),o.identity(),s.copy(e.matrixWorld),s.premultiply(h),o.extractRotation(s),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(o),t.halfHeight.applyMatrix4(o),c++}else if(e.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),r++}else if(e.isHemisphereLight){const t=i.hemi[u];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(h),u++}}},state:i}}function sa(t,e){const n=new aa(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(t){n.setup(r,t)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function oa(t,e){let n=new WeakMap;return{get:function(r,i=0){const a=n.get(r);let s;return void 0===a?(s=new sa(t,e),n.set(r,[s])):i>=a.length?(s=new sa(t,e),a.push(s)):s=a[i],s},dispose:function(){n=new WeakMap}}}class la extends Ye{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class ca extends Ye{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new It,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function ua(t,e,n){let r=new jn;const i=new st,a=new st,s=new At,o=new la({depthPacking:3201}),l=new ca,c={},u=n.maxTextureSize,h={0:1,1:0,2:2},d=new Ln({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new st},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const m=new cn;m.setAttribute("position",new Ze(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Sn(m,d),y=this;function v(n,r){const a=e.update(g);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new kt(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,a,d,g,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,a,p,g,null)}function b(e,n,r,i,a,s){let u=null;const d=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==d)u=d;else if(u=!0===r.isPointLight?l:o,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=u.uuid,e=n.uuid;let r=c[t];void 0===r&&(r={},c[t]=r);let i=r[e];void 0===i&&(i=u.clone(),r[e]=i),u=i}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=3===s?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.map=n.map,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=i,u.farDistance=a),u}function x(n,i,a,s,o){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],u=i[c.materialIndex];if(u&&u.visible){const e=b(n,u,s,a.near,a.far,o);t.renderBufferDirect(a,null,r,e,n,c)}}}else if(i.visible){const e=b(n,i,s,a.near,a.far,o);t.renderBufferDirect(a,null,r,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)x(l[t],i,a,s,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,n,o){if(!1===y.enabled)return;if(!1===y.autoUpdate&&!1===y.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let p=0,m=e.length;p<m;p++){const l=e[p],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const h=c.getFrameExtents();if(i.multiply(h),a.copy(c.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(a.x=Math.floor(u/h.x),i.x=a.x*h.x,c.mapSize.x=a.x),i.y>u&&(a.y=Math.floor(u/h.y),i.y=a.y*h.y,c.mapSize.y=a.y)),null===c.map){const t=3!==this.type?{minFilter:f,magFilter:f}:{};c.map=new kt(i.x,i.y,t),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}t.setRenderTarget(c.map),t.clear();const m=c.getViewportCount();for(let t=0;t<m;t++){const e=c.getViewport(t);s.set(a.x*e.x,a.y*e.y,a.x*e.z,a.y*e.w),d.viewport(s),c.updateMatrices(l,t),r=c.getFrustum(),x(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&3===this.type&&v(c,o),c.needsUpdate=!1}y.needsUpdate=!1,t.setRenderTarget(l,c,h)}}function ha(t,e,n){const r=n.isWebGL2;const a=new function(){let e=!1;const n=new At;let r=null;const i=new At(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,a,s,o){!0===o&&(e*=s,r*=s,a*=s),n.set(e,r,a,s),!1===i.equals(n)&&(t.clearColor(e,r,a,s),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(t){t?G(2929):H(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},o=new function(){let e=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(t){e||(t?G(2960):H(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,s){r===e&&i===n&&a===s||(t.stencilFunc(e,n,s),r=e,i=n,a=s)},setOp:function(e,n,r){s===e&&o===n&&l===r||(t.stencilOp(e,n,r),s=e,o=n,l=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,c=null}}},l=new WeakMap,c=new WeakMap;let u={},h={},d=new WeakMap,f=[],p=null,m=!1,g=null,y=null,v=null,b=null,x=null,_=null,w=null,S=!1,E=null,M=null,C=null,T=null,A=null;const k=t.getParameter(35661);let L=!1,P=0;const R=t.getParameter(7938);-1!==R.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(R)[1]),L=P>=1):-1!==R.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),L=P>=2);let I=null,D={};const B=t.getParameter(3088),O=t.getParameter(2978),N=(new At).fromArray(B),F=(new At).fromArray(O);function z(e,n,r){const i=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let s=0;s<r;s++)t.texImage2D(n+s,0,6408,1,1,0,6408,5121,i);return a}const U={};function G(e){!0!==u[e]&&(t.enable(e),u[e]=!0)}function H(e){!1!==u[e]&&(t.disable(e),u[e]=!1)}U[3553]=z(3553,3553,1),U[34067]=z(34067,34069,6),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),G(2929),s.setFunc(3),$(!1),Y(1),G(2884),W(0);const j={[i]:32774,101:32778,102:32779};if(r)j[103]=32775,j[104]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(j[103]=t.MIN_EXT,j[104]=t.MAX_EXT)}const V={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function W(e,n,r,a,s,o,l,c){if(0!==e){if(!1===m&&(G(3042),m=!0),5===e)s=s||n,o=o||r,l=l||a,n===y&&s===x||(t.blendEquationSeparate(j[n],j[s]),y=n,x=s),r===v&&a===b&&o===_&&l===w||(t.blendFuncSeparate(V[r],V[a],V[o],V[l]),v=r,b=a,_=o,w=l),g=e,S=!1;else if(e!==g||c!==S){if(y===i&&x===i||(t.blendEquation(32774),y=i,x=i),c)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}v=null,b=null,_=null,w=null,g=e,S=c}}else!0===m&&(H(3042),m=!1)}function $(e){E!==e&&(e?t.frontFace(2304):t.frontFace(2305),E=e)}function Y(e){0!==e?(G(2884),e!==M&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):H(2884),M=e}function q(e,n,r){e?(G(32823),T===n&&A===r||(t.polygonOffset(n,r),T=n,A=r)):H(32823)}return{buffers:{color:a,depth:s,stencil:o},enable:G,disable:H,bindFramebuffer:function(e,n){return h[e]!==n&&(t.bindFramebuffer(e,n),h[e]=n,r&&(36009===e&&(h[36160]=n),36160===e&&(h[36009]=n)),!0)},drawBuffers:function(r,i){let a=f,s=!1;if(r)if(a=d.get(i),void 0===a&&(a=[],d.set(i,a)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(a.length!==t.length||36064!==a[0]){for(let e=0,n=t.length;e<n;e++)a[e]=36064+e;a.length=t.length,s=!0}}else 36064!==a[0]&&(a[0]=36064,s=!0);else 1029!==a[0]&&(a[0]=1029,s=!0);s&&(n.isWebGL2?t.drawBuffers(a):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(e){return p!==e&&(t.useProgram(e),p=e,!0)},setBlending:W,setMaterial:function(t,e){2===t.side?H(2884):G(2884);let n=1===t.side;e&&(n=!n),$(n),1===t.blending&&!1===t.transparent?W(0):W(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),a.setMask(t.colorWrite);const r=t.stencilWrite;o.setTest(r),r&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?G(32926):H(32926)},setFlipSided:$,setCullFace:Y,setLineWidth:function(e){e!==C&&(L&&t.lineWidth(e),C=e)},setPolygonOffset:q,setScissorTest:function(t){t?G(3089):H(3089)},activeTexture:function(e){void 0===e&&(e=33984+k-1),I!==e&&(t.activeTexture(e),I=e)},bindTexture:function(e,n,r){void 0===r&&(r=null===I?33984+k-1:I);let i=D[r];void 0===i&&(i={type:void 0,texture:void 0},D[r]=i),i.type===e&&i.texture===n||(I!==r&&(t.activeTexture(r),I=r),t.bindTexture(e,n||U[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=D[I];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(e,n){let r=c.get(n);void 0===r&&(r=new WeakMap,c.set(n,r));let i=r.get(e);void 0===i&&(i=t.getUniformBlockIndex(n,e.name),r.set(e,i))},uniformBlockBinding:function(e,n){const r=c.get(n).get(e);l.get(n)!==r&&(t.uniformBlockBinding(n,r,e.__bindingPointIndex),l.set(n,r))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===N.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),N.copy(e))},viewport:function(e){!1===F.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),F.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},I=null,D={},h={},d=new WeakMap,f=[],p=null,m=!1,g=null,y=null,v=null,b=null,x=null,_=null,w=null,S=!1,E=null,M=null,C=null,T=null,A=null,N.set(0,0,t.canvas.width,t.canvas.height),F.set(0,0,t.canvas.width,t.canvas.height),a.reset(),s.reset(),o.reset()}}}function da(t,e,n,r,i,a,s){const o=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,T=i.maxTextureSize,A=i.maxSamples,k=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,L="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),P=new WeakMap;let R;const I=new WeakMap;let D=!1;try{D="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ht){}function B(t,e){return D?new OffscreenCanvas(t,e):ut("canvas")}function O(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?nt:Math.floor,a=r(i*t.width),s=r(i*t.height);void 0===R&&(R=B(a,s));const o=n?B(a,s):R;o.width=a,o.height=s;return o.getContext("2d").drawImage(t,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+s+")."),o}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function z(t){return tt(t.width)&&tt(t.height)}function U(t,e){return t.generateMipmaps&&e&&t.minFilter!==f&&t.minFilter!==g}function G(e){t.generateMipmap(e)}function H(n,r,i,a,s=!1){if(!1===o)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=a===F&&!1===s?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||e.get("EXT_color_buffer_float"),l}function j(t,e,n){return!0===U(t,n)||t.isFramebufferTexture&&t.minFilter!==f&&t.minFilter!==g?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function W(t){return t===f||t===p||t===m?9728:9729}function $(t){const e=t.target;e.removeEventListener("dispose",$),function(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=I.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&q(t),0===Object.keys(i).length&&I.delete(n)}r.remove(t)}(e),e.isVideoTexture&&P.delete(e)}function Y(e){const n=e.target;n.removeEventListener("dispose",Y),function(e){const n=e.texture,i=r.get(e),a=r.get(n);void 0!==a.__webglTexture&&(t.deleteTexture(a.__webglTexture),s.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)t.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[r]);else{if(t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let e=0;e<i.__webglColorRenderbuffer.length;e++)i.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(i.__webglColorRenderbuffer[e]);i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let o=0,l=n.length;o<l;o++){const e=r.get(n[o]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),s.memory.textures--),r.remove(n[o])}r.remove(n),r.remove(e)}(n)}function q(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source;delete I.get(i)[n.__cacheKey],s.memory.textures--}let X=0;function J(t,e){const i=r.get(t);if(t.isVideoTexture&&function(t){const e=s.render.frame;P.get(t)!==e&&(P.set(t,e),t.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version){const n=t.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void rt(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,i.__webglTexture,33984+e)}const Z={[u]:10497,[h]:33071,[d]:33648},K={[f]:9728,[p]:9984,[m]:9986,[g]:9729,[y]:9985,[v]:9987};function Q(n,a,s){if(s?(t.texParameteri(n,10242,Z[a.wrapS]),t.texParameteri(n,10243,Z[a.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,Z[a.wrapR]),t.texParameteri(n,10240,K[a.magFilter]),t.texParameteri(n,10241,K[a.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),a.wrapS===h&&a.wrapT===h||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,W(a.magFilter)),t.texParameteri(n,10241,W(a.minFilter)),a.minFilter!==f&&a.minFilter!==g&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const s=e.get("EXT_texture_filter_anisotropic");if(a.magFilter===f)return;if(a.minFilter!==m&&a.minFilter!==v)return;if(a.type===_&&!1===e.has("OES_texture_float_linear"))return;if(!1===o&&a.type===w&&!1===e.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function et(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",$));const i=n.source;let a=I.get(i);void 0===a&&(a={},I.set(i,a));const o=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}(n);if(o!==e.__cacheKey){void 0===a[o]&&(a[o]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,r=!0),a[o].usedTimes++;const i=a[e.__cacheKey];void 0!==i&&(a[e.__cacheKey].usedTimes--,0===i.usedTimes&&q(n)),e.__cacheKey=o,e.__webglTexture=a[o].texture}return r}function rt(e,i,s){let l=3553;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(l=35866),i.isData3DTexture&&(l=32879);const c=et(e,i),u=i.source;n.bindTexture(l,e.__webglTexture,33984+s);const d=r.get(u);if(u.version!==d.__version||!0===c){n.activeTexture(33984+s),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const e=function(t){return!o&&(t.wrapS!==h||t.wrapT!==h||t.minFilter!==f&&t.minFilter!==g)}(i)&&!1===z(i.image);let r=O(i.image,e,!1,T);r=ct(i,r);const p=z(r)||o,m=a.convert(i.format,i.encoding);let y,v=a.convert(i.type),b=H(i.internalFormat,m,v,i.encoding,i.isVideoTexture);Q(l,i,p);const w=i.mipmaps,A=o&&!0!==i.isVideoTexture,k=void 0===d.__version||!0===c,L=j(i,r,p);if(i.isDepthTexture)b=6402,o?b=i.type===_?36012:i.type===x?33190:i.type===S?35056:33189:i.type===_&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===M&&6402===b&&1012!==i.type&&i.type!==x&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=x,v=a.convert(i.type)),i.format===C&&6402===b&&(b=34041,i.type!==S&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=S,v=a.convert(i.type))),k&&(A?n.texStorage2D(3553,1,b,r.width,r.height):n.texImage2D(3553,0,b,r.width,r.height,0,m,v,null));else if(i.isDataTexture)if(w.length>0&&p){A&&k&&n.texStorage2D(3553,L,b,w[0].width,w[0].height);for(let t=0,e=w.length;t<e;t++)y=w[t],A?n.texSubImage2D(3553,t,0,0,y.width,y.height,m,v,y.data):n.texImage2D(3553,t,b,y.width,y.height,0,m,v,y.data);i.generateMipmaps=!1}else A?(k&&n.texStorage2D(3553,L,b,r.width,r.height),n.texSubImage2D(3553,0,0,0,r.width,r.height,m,v,r.data)):n.texImage2D(3553,0,b,r.width,r.height,0,m,v,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){A&&k&&n.texStorage3D(35866,L,b,w[0].width,w[0].height,r.depth);for(let t=0,e=w.length;t<e;t++)y=w[t],i.format!==E?null!==m?A?n.compressedTexSubImage3D(35866,t,0,0,0,y.width,y.height,r.depth,m,y.data,0,0):n.compressedTexImage3D(35866,t,b,y.width,y.height,r.depth,0,y.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):A?n.texSubImage3D(35866,t,0,0,0,y.width,y.height,r.depth,m,v,y.data):n.texImage3D(35866,t,b,y.width,y.height,r.depth,0,m,v,y.data)}else{A&&k&&n.texStorage2D(3553,L,b,w[0].width,w[0].height);for(let t=0,e=w.length;t<e;t++)y=w[t],i.format!==E?null!==m?A?n.compressedTexSubImage2D(3553,t,0,0,y.width,y.height,m,y.data):n.compressedTexImage2D(3553,t,b,y.width,y.height,0,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):A?n.texSubImage2D(3553,t,0,0,y.width,y.height,m,v,y.data):n.texImage2D(3553,t,b,y.width,y.height,0,m,v,y.data)}else if(i.isDataArrayTexture)A?(k&&n.texStorage3D(35866,L,b,r.width,r.height,r.depth),n.texSubImage3D(35866,0,0,0,0,r.width,r.height,r.depth,m,v,r.data)):n.texImage3D(35866,0,b,r.width,r.height,r.depth,0,m,v,r.data);else if(i.isData3DTexture)A?(k&&n.texStorage3D(32879,L,b,r.width,r.height,r.depth),n.texSubImage3D(32879,0,0,0,0,r.width,r.height,r.depth,m,v,r.data)):n.texImage3D(32879,0,b,r.width,r.height,r.depth,0,m,v,r.data);else if(i.isFramebufferTexture){if(k)if(A)n.texStorage2D(3553,L,b,r.width,r.height);else{let t=r.width,e=r.height;for(let r=0;r<L;r++)n.texImage2D(3553,r,b,t,e,0,m,v,null),t>>=1,e>>=1}}else if(w.length>0&&p){A&&k&&n.texStorage2D(3553,L,b,w[0].width,w[0].height);for(let t=0,e=w.length;t<e;t++)y=w[t],A?n.texSubImage2D(3553,t,0,0,m,v,y):n.texImage2D(3553,t,b,m,v,y);i.generateMipmaps=!1}else A?(k&&n.texStorage2D(3553,L,b,r.width,r.height),n.texSubImage2D(3553,0,0,0,m,v,r)):n.texImage2D(3553,0,b,m,v,r);U(i,p)&&G(l),d.__version=u.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}function it(e,i,s,o,l){const c=a.convert(s.format,s.encoding),u=a.convert(s.type),h=H(s.internalFormat,c,u,s.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,h,i.width,i.height,0,c,u,null)),n.bindFramebuffer(36160,e),lt(i)?k.framebufferTexture2DMultisampleEXT(36160,o,l,r.get(s).__webglTexture,0,ot(i)):(3553===l||l>=34069&&l<=34074)&&t.framebufferTexture2D(36160,o,l,r.get(s).__webglTexture,0),n.bindFramebuffer(36160,null)}function at(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||lt(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===_?i=36012:e.type===x&&(i=33190));const r=ot(n);lt(n)?k.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):t.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const i=ot(n);r&&!1===lt(n)?t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):lt(n)?k.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<e.length;i++){const s=e[i],o=a.convert(s.format,s.encoding),l=a.convert(s.type),c=H(s.internalFormat,o,l,s.encoding),u=ot(n);r&&!1===lt(n)?t.renderbufferStorageMultisample(36161,u,c,n.width,n.height):lt(n)?k.renderbufferStorageMultisampleEXT(36161,u,c,n.width,n.height):t.renderbufferStorage(36161,c,n.width,n.height)}}t.bindRenderbuffer(36161,null)}function st(e){const i=r.get(e),a=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),J(i.depthTexture,0);const a=r.get(i.depthTexture).__webglTexture,s=ot(i);if(i.depthTexture.format===M)lt(i)?k.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,s):t.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==C)throw new Error("Unknown depthTexture format");lt(i)?k.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,s):t.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,e)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),at(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),at(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function ot(t){return Math.min(A,t.samples)}function lt(t){const n=r.get(t);return o&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function ct(t,n){const r=t.encoding,i=t.format,a=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===V||r!==N&&(r===F?!1===o?!0===e.has("EXT_sRGB")&&i===E?(t.format=V,t.minFilter=g,t.generateMipmaps=!1):n=St.sRGBToLinear(n):i===E&&a===b||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){const t=X;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),X+=1,t},this.resetTextureUnits=function(){X=0},this.setTexture2D=J,this.setTexture2DArray=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?rt(i,t,e):n.bindTexture(35866,i.__webglTexture,33984+e)},this.setTexture3D=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?rt(i,t,e):n.bindTexture(32879,i.__webglTexture,33984+e)},this.setTextureCube=function(e,i){const s=r.get(e);e.version>0&&s.__version!==e.version?function(e,i,s){if(6!==i.image.length)return;const l=et(e,i),u=i.source;n.bindTexture(34067,e.__webglTexture,33984+s);const h=r.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(33984+s),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const e=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,d=[];for(let t=0;t<6;t++)d[t]=e||r?r?i.image[t].image:i.image[t]:O(i.image[t],!1,!0,c),d[t]=ct(i,d[t]);const f=d[0],p=z(f)||o,m=a.convert(i.format,i.encoding),g=a.convert(i.type),y=H(i.internalFormat,m,g,i.encoding),v=o&&!0!==i.isVideoTexture,b=void 0===h.__version||!0===l;let x,_=j(i,f,p);if(Q(34067,i,p),e){v&&b&&n.texStorage2D(34067,_,y,f.width,f.height);for(let t=0;t<6;t++){x=d[t].mipmaps;for(let e=0;e<x.length;e++){const r=x[e];i.format!==E?null!==m?v?n.compressedTexSubImage2D(34069+t,e,0,0,r.width,r.height,m,r.data):n.compressedTexImage2D(34069+t,e,y,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v?n.texSubImage2D(34069+t,e,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+t,e,y,r.width,r.height,0,m,g,r.data)}}}else{x=i.mipmaps,v&&b&&(x.length>0&&_++,n.texStorage2D(34067,_,y,d[0].width,d[0].height));for(let t=0;t<6;t++)if(r){v?n.texSubImage2D(34069+t,0,0,0,d[t].width,d[t].height,m,g,d[t].data):n.texImage2D(34069+t,0,y,d[t].width,d[t].height,0,m,g,d[t].data);for(let e=0;e<x.length;e++){const r=x[e].image[t].image;v?n.texSubImage2D(34069+t,e+1,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+t,e+1,y,r.width,r.height,0,m,g,r.data)}}else{v?n.texSubImage2D(34069+t,0,0,0,m,g,d[t]):n.texImage2D(34069+t,0,y,m,g,d[t]);for(let e=0;e<x.length;e++){const r=x[e];v?n.texSubImage2D(34069+t,e+1,0,0,m,g,r.image[t]):n.texImage2D(34069+t,e+1,y,m,g,r.image[t])}}}U(i,p)&&G(34067),h.__version=u.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}(s,e,i):n.bindTexture(34067,s.__webglTexture,33984+i)},this.rebindTextures=function(t,e,n){const i=r.get(t);void 0!==e&&it(i.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&st(t)},this.setupRenderTarget=function(e){const l=e.texture,c=r.get(e),u=r.get(l);e.addEventListener("dispose",Y),!0!==e.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=t.createTexture()),u.__version=l.version,s.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,f=z(e)||o;if(h){c.__webglFramebuffer=[];for(let e=0;e<6;e++)c.__webglFramebuffer[e]=t.createFramebuffer()}else{if(c.__webglFramebuffer=t.createFramebuffer(),d)if(i.drawBuffers){const n=e.texture;for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&e.samples>0&&!1===lt(e)){const r=d?l:[l];c.__webglMultisampledFramebuffer=t.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);const s=a.convert(i.format,i.encoding),o=a.convert(i.type),l=H(i.internalFormat,s,o,i.encoding,!0===e.isXRRenderTarget),u=ot(e);t.renderbufferStorageMultisample(36161,u,l,e.width,e.height),t.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(c.__webglDepthRenderbuffer=t.createRenderbuffer(),at(c.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,u.__webglTexture),Q(34067,l,f);for(let t=0;t<6;t++)it(c.__webglFramebuffer[t],e,l,36064,34069+t);U(l,f)&&G(34067),n.unbindTexture()}else if(d){const t=e.texture;for(let i=0,a=t.length;i<a;i++){const a=t[i],s=r.get(a);n.bindTexture(3553,s.__webglTexture),Q(3553,a,f),it(c.__webglFramebuffer,e,a,36064+i,3553),U(a,f)&&G(3553)}n.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(o?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(t,u.__webglTexture),Q(t,l,f),it(c.__webglFramebuffer,e,l,36064,t),U(l,f)&&G(t),n.unbindTexture()}e.depthBuffer&&st(e)},this.updateRenderTargetMipmap=function(t){const e=z(t)||o,i=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let a=0,s=i.length;a<s;a++){const s=i[a];if(U(s,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,i=r.get(s).__webglTexture;n.bindTexture(e,i),G(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(o&&e.samples>0&&!1===lt(e)){const i=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=e.width,s=e.height;let o=16384;const l=[],c=e.stencilBuffer?33306:36096,u=r.get(e),h=!0===e.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<i.length;e++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),e.depthBuffer&&l.push(c);const d=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===d&&(e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024)),h&&t.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[n]),!0===d&&(t.invalidateFramebuffer(36008,[c]),t.invalidateFramebuffer(36009,[c])),h){const e=r.get(i[n]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,e,0)}t.blitFramebuffer(0,0,a,s,0,0,a,s,o,9728),L&&t.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(let e=0;e<i.length;e++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,u.__webglColorRenderbuffer[e]);const a=r.get(i[e]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,a,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=st,this.setupFrameBufferTexture=it,this.useMultisampledRTT=lt}function fa(t,e,n){const r=n.isWebGL2;return{convert:function(n,i=null){let a;if(n===b)return 5121;if(1017===n)return 32819;if(1018===n)return 32820;if(1010===n)return 5120;if(1011===n)return 5122;if(1012===n)return 5123;if(1013===n)return 5124;if(n===x)return 5125;if(n===_)return 5126;if(n===w)return r?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===n)return 6406;if(n===E)return 6408;if(1024===n)return 6409;if(1025===n)return 6410;if(n===M)return 6402;if(n===C)return 34041;if(1022===n)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===V)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===n)return 6403;if(1029===n)return 36244;if(1030===n)return 33319;if(1031===n)return 33320;if(1033===n)return 36249;if(n===T||n===A||n===k||n===L)if(i===F){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(n===T)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===A)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===k)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===L)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(n===T)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===A)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===k)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===L)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===n)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===n)return i===F?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return i===F?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===n){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===n)return i===F?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===S?r?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}}}class pa extends Rn{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class ma extends De{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ga={type:"move"};class ya{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ma,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ma,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new It,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new It),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ma,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new It,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new It),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){a=!0;for(const a of t.hand.values()){const t=e.getJointPose(a,n),r=this._getHandJoint(l,a);null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=t.radius),r.visible=null!==t}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==o&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(ga)))}return null!==s&&(s.visible=null!==r),null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==a),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new ma;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class va extends Tt{constructor(t,e,n,r,i,a,s,o,l,c){if((c=void 0!==c?c:M)!==M&&c!==C)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===M&&(n=x),void 0===n&&c===C&&(n=S),super(null,r,i,a,s,o,c,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==s?s:f,this.minFilter=void 0!==o?o:f,this.flipY=!1,this.generateMipmaps=!1}}class ba extends W{constructor(t,e){super();const n=this;let r=null,i=1,a=null,s="local-floor",o=null,l=null,c=null,u=null,h=null,d=null;const f=e.getContextAttributes();let p=null,m=null;const g=[],y=[],v=new Set,_=new Map,w=new Rn;w.layers.enable(1),w.viewport=new At;const T=new Rn;T.layers.enable(2),T.viewport=new At;const A=[w,T],k=new pa;k.layers.enable(1),k.layers.enable(2);let L=null,P=null;function R(t){const e=y.indexOf(t.inputSource);if(-1===e)return;const n=g[e];void 0!==n&&n.dispatchEvent({type:t.type,data:t.inputSource})}function I(){r.removeEventListener("select",R),r.removeEventListener("selectstart",R),r.removeEventListener("selectend",R),r.removeEventListener("squeeze",R),r.removeEventListener("squeezestart",R),r.removeEventListener("squeezeend",R),r.removeEventListener("end",I),r.removeEventListener("inputsourceschange",D);for(let t=0;t<g.length;t++){const e=y[t];null!==e&&(y[t]=null,g[t].disconnect(e))}L=null,P=null,t.setRenderTarget(p),h=null,u=null,c=null,r=null,m=null,z.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function D(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=y.indexOf(n);r>=0&&(y[r]=null,g[r].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let r=y.indexOf(n);if(-1===r){for(let t=0;t<g.length;t++){if(t>=y.length){y.push(n),r=t;break}if(null===y[t]){y[t]=n,r=t;break}}if(-1===r)break}const i=g[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=g[t];return void 0===e&&(e=new ya,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=g[t];return void 0===e&&(e=new ya,g[t]=e),e.getGripSpace()},this.getHand=function(t){let e=g[t];return void 0===e&&(e=new ya,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o||a},this.setReferenceSpace=function(t){o=t},this.getBaseLayer=function(){return null!==u?u:h},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(p=t.getRenderTarget(),r.addEventListener("select",R),r.addEventListener("selectstart",R),r.addEventListener("selectend",R),r.addEventListener("squeeze",R),r.addEventListener("squeezestart",R),r.addEventListener("squeezeend",R),r.addEventListener("end",I),r.addEventListener("inputsourceschange",D),!0!==f.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:h}),m=new kt(h.framebufferWidth,h.framebufferHeight,{format:E,type:b,encoding:t.outputEncoding,stencilBuffer:f.stencil})}else{let n=null,a=null,s=null;f.depth&&(s=f.stencil?35056:33190,n=f.stencil?C:M,a=f.stencil?S:x);const o={colorFormat:32856,depthFormat:s,scaleFactor:i};c=new XRWebGLBinding(r,e),u=c.createProjectionLayer(o),r.updateRenderState({layers:[u]}),m=new kt(u.textureWidth,u.textureHeight,{format:E,type:b,depthTexture:new va(u.textureWidth,u.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,encoding:t.outputEncoding,samples:f.antialias?4:0});t.properties.get(m).__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),o=null,a=await r.requestReferenceSpace(s),z.setContext(r),z.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const B=new It,O=new It;function N(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;k.near=T.near=w.near=t.near,k.far=T.far=w.far=t.far,L===k.near&&P===k.far||(r.updateRenderState({depthNear:k.near,depthFar:k.far}),L=k.near,P=k.far);const e=t.parent,n=k.cameras;N(k,e);for(let r=0;r<n.length;r++)N(n[r],e);k.matrixWorld.decompose(k.position,k.quaternion,k.scale),t.matrix.copy(k.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale);const i=t.children;for(let r=0,a=i.length;r<a;r++)i[r].updateMatrixWorld(!0);2===n.length?function(t,e,n){B.setFromMatrixPosition(e.matrixWorld),O.setFromMatrixPosition(n.matrixWorld);const r=B.distanceTo(O),i=e.projectionMatrix.elements,a=n.projectionMatrix.elements,s=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(a[8]+1)/a[0],d=s*u,f=s*h,p=r/(-u+h),m=p*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=s+p,y=o+p,v=d-m,b=f+(r-m),x=l*o/y*g,_=c*o/y*g;t.projectionMatrix.makePerspective(v,b,x,_,g,y)}(k,w,T):k.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return k},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(t){null!==u&&(u.fixedFoveation=t),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=t)},this.getPlanes=function(){return v};let F=null;const z=new Vn;z.setAnimationLoop((function(e,r){if(l=r.getViewerPose(o||a),d=r,null!==l){const e=l.views;null!==h&&(t.setRenderTargetFramebuffer(m,h.framebuffer),t.setRenderTarget(m));let n=!1;e.length!==k.cameras.length&&(k.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r];let a=null;if(null!==h)a=h.getViewport(i);else{const e=c.getViewSubImage(u,i);a=e.viewport,0===r&&(t.setRenderTargetTextures(m,e.colorTexture,u.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(m))}let s=A[r];void 0===s&&(s=new Rn,s.layers.enable(r),s.viewport=new At,A[r]=s),s.matrix.fromArray(i.transform.matrix),s.projectionMatrix.fromArray(i.projectionMatrix),s.viewport.set(a.x,a.y,a.width,a.height),0===r&&k.matrix.copy(s.matrix),!0===n&&k.cameras.push(s)}}for(let t=0;t<g.length;t++){const e=y[t],n=g[t];null!==e&&void 0!==n&&n.update(e,r,o||a)}if(F&&F(e,r),r.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:r.detectedPlanes});let t=null;for(const e of v)r.detectedPlanes.has(e)||(null===t&&(t=[]),t.push(e));if(null!==t)for(const e of t)v.delete(e),_.delete(e),n.dispatchEvent({type:"planeremoved",data:e});for(const e of r.detectedPlanes)if(v.has(e)){const t=_.get(e);e.lastChangedTime>t&&(_.set(e,e.lastChangedTime),n.dispatchEvent({type:"planechanged",data:e}))}else v.add(e),_.set(e,r.lastChangedTime),n.dispatchEvent({type:"planeadded",data:e})}d=null})),this.setAnimationLoop=function(t){F=t},this.dispose=function(){}}}function xa(t,e){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,1===r.side&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),1===r.side&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=e.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const e=!0!==t.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*e}let a,s;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?a=r.map:r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.roughnessMap?a=r.roughnessMap:r.metalnessMap?a=r.metalnessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap?a=r.emissiveMap:r.clearcoatMap?a=r.clearcoatMap:r.clearcoatNormalMap?a=r.clearcoatNormalMap:r.clearcoatRoughnessMap?a=r.clearcoatRoughnessMap:r.iridescenceMap?a=r.iridescenceMap:r.iridescenceThicknessMap?a=r.iridescenceThicknessMap:r.specularIntensityMap?a=r.specularIntensityMap:r.specularColorMap?a=r.specularColorMap:r.transmissionMap?a=r.transmissionMap:r.thicknessMap?a=r.thicknessMap:r.sheenColorMap?a=r.sheenColorMap:r.sheenRoughnessMap&&(a=r.sheenRoughnessMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uvTransform.value.copy(a.matrix)),r.aoMap?s=r.aoMap:r.lightMap&&(s=r.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uv2Transform.value.copy(s.matrix))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,An(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,r,i,a,s){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(t,r):r.isMeshToonMaterial?(n(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,r)):r.isMeshPhongMaterial?(n(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,r)):r.isMeshStandardMaterial?(n(t,r),function(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap);const r=e.get(n).envMap;r&&(t.envMapIntensity.value=n.envMapIntensity)}(t,r),r.isMeshPhysicalMaterial&&function(t,e,n){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate()));e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap);e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,r,s)):r.isMeshMatcapMaterial?(n(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,r)):r.isMeshDepthMaterial?n(t,r):r.isMeshDistanceMaterial?(n(t,r),function(t,e){t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?n(t,r):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let i;e.map?i=e.map:e.alphaMap&&(i=e.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,i,a):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function _a(t,e,n,r){let i={},a={},s=[];const o=n.isWebGL2?t.getParameter(35375):0;function l(t,e,n){const r=t.value;if(void 0===n[e]){if("number"==typeof r)n[e]=r;else{const t=Array.isArray(r)?r:[r],i=[];for(let e=0;e<t.length;e++)i.push(t[e].clone());n[e]=i}return!0}if("number"==typeof r){if(n[e]!==r)return n[e]=r,!0}else{const t=Array.isArray(n[e])?n[e]:[n[e]],i=Array.isArray(r)?r:[r];for(let e=0;e<t.length;e++){const n=t[e];if(!1===n.equals(i[e]))return n.copy(i[e]),!0}}return!1}function c(t){const e={boundary:0,storage:0};return"number"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function u(e){const n=e.target;n.removeEventListener("dispose",u);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),t.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(t,e){const n=e.program;r.uniformBlockBinding(t,n)},update:function(n,h){let d=i[n.id];void 0===d&&(!function(t){const e=t.uniforms;let n=0;const r=16;let i=0;for(let a=0,s=e.length;a<s;a++){const t=e[a],s={boundary:0,storage:0},o=Array.isArray(t.value)?t.value:[t.value];for(let e=0,n=o.length;e<n;e++){const t=c(o[e]);s.boundary+=t.boundary,s.storage+=t.storage}if(t.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,a>0){i=n%r;0!==i&&r-i-s.boundary<0&&(n+=r-i,t.__offset=n)}n+=s.storage}i=n%r,i>0&&(n+=r-i);t.__size=n,t.__cache={}}(n),d=function(e){const n=function(){for(let t=0;t<o;t++)if(-1===s.indexOf(t))return s.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const r=t.createBuffer(),i=e.__size,a=e.usage;return t.bindBuffer(35345,r),t.bufferData(35345,i,a),t.bindBuffer(35345,null),t.bindBufferBase(35345,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));const f=h.program;r.updateUBOMapping(n,f);const p=e.render.frame;a[n.id]!==p&&(!function(e){const n=i[e.id],r=e.uniforms,a=e.__cache;t.bindBuffer(35345,n);for(let i=0,s=r.length;i<s;i++){const e=r[i];if(!0===l(e,i,a)){const n=e.__offset,r=Array.isArray(e.value)?e.value:[e.value];let i=0;for(let a=0;a<r.length;a++){const s=r[a],o=c(s);"number"==typeof s?(e.__data[0]=s,t.bufferSubData(35345,n+i,e.__data)):s.isMatrix3?(e.__data[0]=s.elements[0],e.__data[1]=s.elements[1],e.__data[2]=s.elements[2],e.__data[3]=s.elements[0],e.__data[4]=s.elements[3],e.__data[5]=s.elements[4],e.__data[6]=s.elements[5],e.__data[7]=s.elements[0],e.__data[8]=s.elements[6],e.__data[9]=s.elements[7],e.__data[10]=s.elements[8],e.__data[11]=s.elements[0]):(s.toArray(e.__data,i),i+=o.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,n,e.__data)}}t.bindBuffer(35345,null)}(n),a[n.id]=p)},dispose:function(){for(const e in i)t.deleteBuffer(i[e]);s=[],i={},a={}}}}function wa(t={}){this.isWebGLRenderer=!0;const e=void 0!==t.canvas?t.canvas:function(){const t=ut("canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,i=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,s=void 0!==t.antialias&&t.antialias,o=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",u=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let h;h=null!==n?n.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;let d=null,f=null;const p=[],m=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=N,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const g=this;let y=!1,x=0,S=0,M=null,C=-1,T=null;const A=new At,k=new At;let L=null,P=e.width,R=e.height,I=1,D=null,B=null;const O=new At(0,0,P,R),F=new At(0,0,P,R);let z=!1;const U=new jn;let G=!1,H=!1,j=null;const V=new ce,W=new st,$=new It,Y={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function q(){return null===M?I:1}let X,J,Z,K,Q,tt,et,rt,it,at,ot,lt,ct,ht,dt,ft,pt,mt,gt,yt,vt,bt,xt,_t,wt=n;function St(t,n){for(let r=0;r<t.length;r++){const i=t[r],a=e.getContext(i,n);if(null!==a)return a}return null}try{const t={alpha:!0,depth:i,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${r}`),e.addEventListener("webglcontextlost",Ct,!1),e.addEventListener("webglcontextrestored",Tt,!1),e.addEventListener("webglcontextcreationerror",Lt,!1),null===wt){const e=["webgl2","webgl","experimental-webgl"];if(!0===g.isWebGL1Renderer&&e.shift(),wt=St(e,t),null===wt)throw St(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===wt.getShaderPrecisionFormat&&(wt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(jt){throw console.error("THREE.WebGLRenderer: "+jt.message),jt}function Et(){X=new br(wt),J=new tr(wt,X,t),X.init(J),bt=new fa(wt,X,J),Z=new ha(wt,X,J),K=new wr,Q=new Zi,tt=new da(wt,X,Z,Q,J,bt,K),et=new nr(g),rt=new vr(g),it=new Wn(wt,J),xt=new Kn(wt,X,it,J),at=new xr(wt,it,K,xt),ot=new Cr(wt,at,it,K),gt=new Mr(wt,J,tt),ft=new er(Q),lt=new Ji(g,et,rt,X,J,xt,ft),ct=new xa(g,Q),ht=new ea,dt=new oa(X,J),mt=new Zn(g,et,rt,Z,ot,h,o),pt=new ua(g,ot,J),_t=new _a(wt,K,J,Z),yt=new Qn(wt,X,K,J),vt=new _r(wt,X,K,J),K.programs=lt.programs,g.capabilities=J,g.extensions=X,g.properties=Q,g.renderLists=ht,g.shadowMap=pt,g.state=Z,g.info=K}Et();const Mt=new ba(g,wt);function Ct(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Tt(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const t=K.autoReset,e=pt.enabled,n=pt.autoUpdate,r=pt.needsUpdate,i=pt.type;Et(),K.autoReset=t,pt.enabled=e,pt.autoUpdate=n,pt.needsUpdate=r,pt.type=i}function Lt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Pt(t){const e=t.target;e.removeEventListener("dispose",Pt),function(t){(function(t){const e=Q.get(t).programs;void 0!==e&&(e.forEach((function(t){lt.releaseProgram(t)})),t.isShaderMaterial&&lt.releaseShaderCache(t))})(t),Q.remove(t)}(e)}this.xr=Mt,this.getContext=function(){return wt},this.getContextAttributes=function(){return wt.getContextAttributes()},this.forceContextLoss=function(){const t=X.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=X.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(t){void 0!==t&&(I=t,this.setSize(P,R,!1))},this.getSize=function(t){return t.set(P,R)},this.setSize=function(t,n,r){Mt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(P=t,R=n,e.width=Math.floor(t*I),e.height=Math.floor(n*I),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(P*I,R*I).floor()},this.setDrawingBufferSize=function(t,n,r){P=t,R=n,I=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(A)},this.getViewport=function(t){return t.copy(O)},this.setViewport=function(t,e,n,r){t.isVector4?O.set(t.x,t.y,t.z,t.w):O.set(t,e,n,r),Z.viewport(A.copy(O).multiplyScalar(I).floor())},this.getScissor=function(t){return t.copy(F)},this.setScissor=function(t,e,n,r){t.isVector4?F.set(t.x,t.y,t.z,t.w):F.set(t,e,n,r),Z.scissor(k.copy(F).multiplyScalar(I).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(t){Z.setScissorTest(z=t)},this.setOpaqueSort=function(t){D=t},this.setTransparentSort=function(t){B=t},this.getClearColor=function(t){return t.copy(mt.getClearColor())},this.setClearColor=function(){mt.setClearColor.apply(mt,arguments)},this.getClearAlpha=function(){return mt.getClearAlpha()},this.setClearAlpha=function(){mt.setClearAlpha.apply(mt,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;t&&(r|=16384),e&&(r|=256),n&&(r|=1024),wt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ct,!1),e.removeEventListener("webglcontextrestored",Tt,!1),e.removeEventListener("webglcontextcreationerror",Lt,!1),ht.dispose(),dt.dispose(),Q.dispose(),et.dispose(),rt.dispose(),ot.dispose(),xt.dispose(),_t.dispose(),lt.dispose(),Mt.dispose(),Mt.removeEventListener("sessionstart",Dt),Mt.removeEventListener("sessionend",Bt),j&&(j.dispose(),j=null),Ot.stop()},this.renderBufferDirect=function(t,e,n,r,i,a){null===e&&(e=Y);const s=i.isMesh&&i.matrixWorld.determinant()<0,o=function(t,e,n,r,i){!0!==e.isScene&&(e=Y);tt.resetTextureUnits();const a=e.fog,s=r.isMeshStandardMaterial?e.environment:null,o=null===M?g.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:N,l=(r.isMeshStandardMaterial?rt:et).get(r.envMap||s),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,m=r.toneMapped?g.toneMapping:0,y=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==y?y.length:0,b=Q.get(r),x=f.state.lights;if(!0===G&&(!0===H||t!==T)){const e=t===T&&r.id===C;ft.setState(r,t,e)}let _=!1;r.version===b.__version?b.needsLights&&b.lightsStateVersion!==x.state.version||b.outputEncoding!==o||i.isInstancedMesh&&!1===b.instancing?_=!0:i.isInstancedMesh||!0!==b.instancing?i.isSkinnedMesh&&!1===b.skinning?_=!0:i.isSkinnedMesh||!0!==b.skinning?b.envMap!==l||!0===r.fog&&b.fog!==a?_=!0:void 0===b.numClippingPlanes||b.numClippingPlanes===ft.numPlanes&&b.numIntersection===ft.numIntersection?(b.vertexAlphas!==c||b.vertexTangents!==u||b.morphTargets!==h||b.morphNormals!==d||b.morphColors!==p||b.toneMapping!==m||!0===J.isWebGL2&&b.morphTargetsCount!==v)&&(_=!0):_=!0:_=!0:_=!0:(_=!0,b.__version=r.version);let w=b.currentProgram;!0===_&&(w=Gt(r,e,i));let S=!1,E=!1,A=!1;const k=w.getUniforms(),L=b.uniforms;Z.useProgram(w.program)&&(S=!0,E=!0,A=!0);r.id!==C&&(C=r.id,E=!0);if(S||T!==t){if(k.setValue(wt,"projectionMatrix",t.projectionMatrix),J.logarithmicDepthBuffer&&k.setValue(wt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),T!==t&&(T=t,E=!0,A=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const e=k.map.cameraPosition;void 0!==e&&e.setValue(wt,$.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&k.setValue(wt,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&k.setValue(wt,"viewMatrix",t.matrixWorldInverse)}if(i.isSkinnedMesh){k.setOptional(wt,i,"bindMatrix"),k.setOptional(wt,i,"bindMatrixInverse");const t=i.skeleton;t&&(J.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),k.setValue(wt,"boneTexture",t.boneTexture,tt),k.setValue(wt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const P=n.morphAttributes;(void 0!==P.position||void 0!==P.normal||void 0!==P.color&&!0===J.isWebGL2)&&gt.update(i,n,r,w);(E||b.receiveShadow!==i.receiveShadow)&&(b.receiveShadow=i.receiveShadow,k.setValue(wt,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(L.envMap.value=l,L.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);E&&(k.setValue(wt,"toneMappingExposure",g.toneMappingExposure),b.needsLights&&(B=A,(D=L).ambientLightColor.needsUpdate=B,D.lightProbe.needsUpdate=B,D.directionalLights.needsUpdate=B,D.directionalLightShadows.needsUpdate=B,D.pointLights.needsUpdate=B,D.pointLightShadows.needsUpdate=B,D.spotLights.needsUpdate=B,D.spotLightShadows.needsUpdate=B,D.rectAreaLights.needsUpdate=B,D.hemisphereLights.needsUpdate=B),a&&!0===r.fog&&ct.refreshFogUniforms(L,a),ct.refreshMaterialUniforms(L,r,I,R,j),Li.upload(wt,b.uniformsList,L,tt));var D,B;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Li.upload(wt,b.uniformsList,L,tt),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&k.setValue(wt,"center",i.center);if(k.setValue(wt,"modelViewMatrix",i.modelViewMatrix),k.setValue(wt,"normalMatrix",i.normalMatrix),k.setValue(wt,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const t=r.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(J.isWebGL2){const n=t[e];_t.update(n,w),_t.bind(n,w)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return w}(t,e,n,r,i);Z.setMaterial(r,s);let l=n.index,c=1;!0===r.wireframe&&(l=at.getWireframeAttribute(n),c=2);const u=n.drawRange,h=n.attributes.position;let d=u.start*c,p=(u.start+u.count)*c;null!==a&&(d=Math.max(d,a.start*c),p=Math.min(p,(a.start+a.count)*c)),null!==l?(d=Math.max(d,0),p=Math.min(p,l.count)):null!=h&&(d=Math.max(d,0),p=Math.min(p,h.count));const m=p-d;if(m<0||m===1/0)return;let y;xt.setup(i,r,o,n,l);let v=yt;if(null!==l&&(y=it.get(l),v=vt,v.setIndex(y)),i.isMesh)!0===r.wireframe?(Z.setLineWidth(r.wireframeLinewidth*q()),v.setMode(1)):v.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),Z.setLineWidth(t*q()),i.isLineSegments?v.setMode(1):i.isLineLoop?v.setMode(2):v.setMode(3)}else i.isPoints?v.setMode(0):i.isSprite&&v.setMode(4);if(i.isInstancedMesh)v.renderInstances(d,m,i.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);v.renderInstances(d,m,e)}else v.render(d,m)},this.compile=function(t,e){function n(t,e,n){!0===t.transparent&&3===t.side?(t.side=1,t.needsUpdate=!0,Gt(t,e,n),t.side=0,t.needsUpdate=!0,Gt(t,e,n),t.side=3):Gt(t,e,n)}f=dt.get(t),f.init(),m.push(f),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(g.physicallyCorrectLights),t.traverse((function(e){const r=e.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){n(r[i],t,e)}else n(r,t,e)})),m.pop(),f=null};let Rt=null;function Dt(){Ot.stop()}function Bt(){Ot.start()}const Ot=new Vn;function Nt(t,e,n,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||U.intersectsSprite(t)){r&&$.setFromMatrixPosition(t.matrixWorld).applyMatrix4(V);const e=ot.update(t),i=t.material;i.visible&&d.push(t,e,i,n,$.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==K.render.frame&&(t.skeleton.update(),t.skeleton.frame=K.render.frame),!t.frustumCulled||U.intersectsObject(t))){r&&$.setFromMatrixPosition(t.matrixWorld).applyMatrix4(V);const e=ot.update(t),i=t.material;if(Array.isArray(i)){const r=e.groups;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=i[s.materialIndex];o&&o.visible&&d.push(t,e,o,n,$.z,s)}}else i.visible&&d.push(t,e,i,n,$.z,null)}const i=t.children;for(let a=0,s=i.length;a<s;a++)Nt(i[a],e,n,r)}function Ft(t,e,n,r){const i=t.opaque,a=t.transmissive,o=t.transparent;f.setupLightsView(n),a.length>0&&function(t,e,n){const r=J.isWebGL2;null===j&&(j=new kt(1,1,{generateMipmaps:!0,type:X.has("EXT_color_buffer_half_float")?w:b,minFilter:v,samples:r&&!0===s?4:0}));g.getDrawingBufferSize(W),r?j.setSize(W.x,W.y):j.setSize(nt(W.x),nt(W.y));const i=g.getRenderTarget();g.setRenderTarget(j),g.clear();const a=g.toneMapping;g.toneMapping=0,zt(t,e,n),g.toneMapping=a,tt.updateMultisampleRenderTarget(j),tt.updateRenderTargetMipmap(j),g.setRenderTarget(i)}(i,e,n),r&&Z.viewport(A.copy(r)),i.length>0&&zt(i,e,n),a.length>0&&zt(a,e,n),o.length>0&&zt(o,e,n),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1)}function zt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,a=t.length;i<a;i++){const a=t[i],s=a.object,o=a.geometry,l=null===r?a.material:r,c=a.group;s.layers.test(n.layers)&&Ut(s,e,n,o,l,c)}}function Ut(t,e,n,r,i,a){t.onBeforeRender(g,e,n,r,i,a),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(g,e,n,r,t,a),!0===i.transparent&&3===i.side?(i.side=1,i.needsUpdate=!0,g.renderBufferDirect(n,e,r,i,t,a),i.side=0,i.needsUpdate=!0,g.renderBufferDirect(n,e,r,i,t,a),i.side=3):g.renderBufferDirect(n,e,r,i,t,a),t.onAfterRender(g,e,n,r,i,a)}function Gt(t,e,n){!0!==e.isScene&&(e=Y);const r=Q.get(t),i=f.state.lights,a=f.state.shadowsArray,s=i.state.version,o=lt.getParameters(t,i.state,a,e,n),l=lt.getProgramCacheKey(o);let c=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?rt:et).get(t.envMap||r.environment),void 0===c&&(t.addEventListener("dispose",Pt),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===s)return Ht(t,o),u}else o.uniforms=lt.getUniforms(t),t.onBuild(n,o,g),t.onBeforeCompile(o,g),u=lt.acquireProgram(o,l),c.set(l,u),r.uniforms=o.uniforms;const h=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=ft.uniform),Ht(t,o),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=s,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=u.getUniforms(),p=Li.seqWithValue(d.seq,h);return r.currentProgram=u,r.uniformsList=p,u}function Ht(t,e){const n=Q.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Ot.setAnimationLoop((function(t){Rt&&Rt(t)})),"undefined"!=typeof self&&Ot.setContext(self),this.setAnimationLoop=function(t){Rt=t,Mt.setAnimationLoop(t),null===t?Ot.stop():Ot.start()},Mt.addEventListener("sessionstart",Dt),Mt.addEventListener("sessionend",Bt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===y)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Mt.enabled&&!0===Mt.isPresenting&&(!0===Mt.cameraAutoUpdate&&Mt.updateCamera(e),e=Mt.getCamera()),!0===t.isScene&&t.onBeforeRender(g,t,e,M),f=dt.get(t,m.length),f.init(),m.push(f),V.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),U.setFromProjectionMatrix(V),H=this.localClippingEnabled,G=ft.init(this.clippingPlanes,H,e),d=ht.get(t,p.length),d.init(),p.push(d),Nt(t,e,0,g.sortObjects),d.finish(),!0===g.sortObjects&&d.sort(D,B),!0===G&&ft.beginShadows();const n=f.state.shadowsArray;if(pt.render(n,t,e),!0===G&&ft.endShadows(),!0===this.info.autoReset&&this.info.reset(),mt.render(d,t),f.setupLights(g.physicallyCorrectLights),e.isArrayCamera){const n=e.cameras;for(let e=0,r=n.length;e<r;e++){const r=n[e];Ft(d,t,r,r.viewport)}}else Ft(d,t,e);null!==M&&(tt.updateMultisampleRenderTarget(M),tt.updateRenderTargetMipmap(M)),!0===t.isScene&&t.onAfterRender(g,t,e),xt.resetDefaultState(),C=-1,T=null,m.pop(),f=m.length>0?m[m.length-1]:null,p.pop(),d=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(t,e,n){Q.get(t.texture).__webglTexture=e,Q.get(t.depthTexture).__webglTexture=n;const r=Q.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===X.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=Q.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){M=t,x=e,S=n;let r=!0,i=null,a=!1,s=!1;if(t){const n=Q.get(t);void 0!==n.__useDefaultFramebuffer?(Z.bindFramebuffer(36160,null),r=!1):void 0===n.__webglFramebuffer?tt.setupRenderTarget(t):n.__hasExternalTextures&&tt.rebindTextures(t,Q.get(t.texture).__webglTexture,Q.get(t.depthTexture).__webglTexture);const o=t.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(s=!0);const l=Q.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=l[e],a=!0):i=J.isWebGL2&&t.samples>0&&!1===tt.useMultisampledRTT(t)?Q.get(t).__webglMultisampledFramebuffer:l,A.copy(t.viewport),k.copy(t.scissor),L=t.scissorTest}else A.copy(O).multiplyScalar(I).floor(),k.copy(F).multiplyScalar(I).floor(),L=z;if(Z.bindFramebuffer(36160,i)&&J.drawBuffers&&r&&Z.drawBuffers(t,i),Z.viewport(A),Z.scissor(k),Z.setScissorTest(L),a){const r=Q.get(t.texture);wt.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}else if(s){const r=Q.get(t.texture),i=e||0;wt.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}C=-1},this.readRenderTargetPixels=function(t,e,n,r,i,a,s){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=Q.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){Z.bindFramebuffer(36160,o);try{const s=t.texture,o=s.format,l=s.type;if(o!==E&&bt.convert(o)!==wt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===w&&(X.has("EXT_color_buffer_half_float")||J.isWebGL2&&X.has("EXT_color_buffer_float"));if(!(l===b||bt.convert(l)===wt.getParameter(35738)||l===_&&(J.isWebGL2||X.has("OES_texture_float")||X.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&wt.readPixels(e,n,r,i,bt.convert(o),bt.convert(l),a)}finally{const t=null!==M?Q.get(M).__webglFramebuffer:null;Z.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),a=Math.floor(e.image.height*r);tt.setTexture2D(e,0),wt.copyTexSubImage2D(3553,n,0,0,t.x,t.y,i,a),Z.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,a=e.image.height,s=bt.convert(n.format),o=bt.convert(n.type);tt.setTexture2D(n,0),wt.pixelStorei(37440,n.flipY),wt.pixelStorei(37441,n.premultiplyAlpha),wt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?wt.texSubImage2D(3553,r,t.x,t.y,i,a,s,o,e.image.data):e.isCompressedTexture?wt.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):wt.texSubImage2D(3553,r,t.x,t.y,s,o,e.image),0===r&&n.generateMipmaps&&wt.generateMipmap(3553),Z.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(g.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=t.max.x-t.min.x+1,s=t.max.y-t.min.y+1,o=t.max.z-t.min.z+1,l=bt.convert(r.format),c=bt.convert(r.type);let u;if(r.isData3DTexture)tt.setTexture3D(r,0),u=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");tt.setTexture2DArray(r,0),u=35866}wt.pixelStorei(37440,r.flipY),wt.pixelStorei(37441,r.premultiplyAlpha),wt.pixelStorei(3317,r.unpackAlignment);const h=wt.getParameter(3314),d=wt.getParameter(32878),f=wt.getParameter(3316),p=wt.getParameter(3315),m=wt.getParameter(32877),y=n.isCompressedTexture?n.mipmaps[0]:n.image;wt.pixelStorei(3314,y.width),wt.pixelStorei(32878,y.height),wt.pixelStorei(3316,t.min.x),wt.pixelStorei(3315,t.min.y),wt.pixelStorei(32877,t.min.z),n.isDataTexture||n.isData3DTexture?wt.texSubImage3D(u,i,e.x,e.y,e.z,a,s,o,l,c,y.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),wt.compressedTexSubImage3D(u,i,e.x,e.y,e.z,a,s,o,l,y.data)):wt.texSubImage3D(u,i,e.x,e.y,e.z,a,s,o,l,c,y),wt.pixelStorei(3314,h),wt.pixelStorei(32878,d),wt.pixelStorei(3316,f),wt.pixelStorei(3315,p),wt.pixelStorei(32877,m),0===i&&r.generateMipmaps&&wt.generateMipmap(u),Z.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?tt.setTextureCube(t,0):t.isData3DTexture?tt.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?tt.setTexture2DArray(t,0):tt.setTexture2D(t,0),Z.unbindTexture()},this.resetState=function(){x=0,S=0,M=null,Z.reset(),xt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends wa{}).prototype.isWebGL1Renderer=!0;class Sa{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=H,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=J()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=J()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=J()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ea=new It;class Ma{constructor(t,e,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Ea.fromBufferAttribute(this,e),Ea.applyMatrix4(t),this.setXYZ(e,Ea.x,Ea.y,Ea.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ea.fromBufferAttribute(this,e),Ea.applyNormalMatrix(t),this.setXYZ(e,Ea.x,Ea.y,Ea.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ea.fromBufferAttribute(this,e),Ea.transformDirection(t),this.setXYZ(e,Ea.x,Ea.y,Ea.z);return this}setX(t,e){return this.normalized&&(e=it(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=it(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=it(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=it(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=rt(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=rt(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=rt(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=rt(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=it(e,this.array),n=it(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=it(e,this.array),n=it(n,this.array),r=it(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=it(e,this.array),n=it(n,this.array),r=it(r,this.array),i=it(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Ze(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Ma(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Ca=new It,Ta=new At,Aa=new At,ka=new It,La=new ce;class Pa extends Sn{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ce,this.bindMatrixInverse=new ce}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new At,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,r=this.geometry;Ta.fromBufferAttribute(r.attributes.skinIndex,t),Aa.fromBufferAttribute(r.attributes.skinWeight,t),Ca.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let i=0;i<4;i++){const t=Aa.getComponent(i);if(0!==t){const r=Ta.getComponent(i);La.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(ka.copy(Ca).applyMatrix4(La),t)}}return e.applyMatrix4(this.bindMatrixInverse)}}class Ra extends De{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ia extends Tt{constructor(t=null,e=1,n=1,r,i,a,s,o,l=1003,c=1003,u,h){super(null,a,s,o,l,c,r,i,u,h),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Da=new ce,Ba=new ce;class Oa{constructor(t=[],e=[]){this.uuid=J(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new ce)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new ce;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,a=t.length;i<a;i++){const r=t[i]?t[i].matrixWorld:Ba;Da.multiplyMatrices(r,e[i]),Da.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new Oa(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=et(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Ia(e,t,t,E,_);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const r=t.bones[n];let i=e[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Ra),this.bones.push(i),this.boneInverses.push((new ce).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,i=e.length;r<i;r++){const i=e[r];t.bones.push(i.uuid);const a=n[r];t.boneInverses.push(a.toArray())}return t}}class Na extends Ye{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new _t(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Fa=new It,za=new It,Ua=new ce,Ga=new le,Ha=new te;class ja extends De{constructor(t=new cn,e=new Na){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)Fa.fromBufferAttribute(e,t-1),za.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=Fa.distanceTo(za);t.setAttribute("lineDistance",new tn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ha.copy(n.boundingSphere),Ha.applyMatrix4(r),Ha.radius+=i,!1===t.ray.intersectsSphere(Ha))return;Ua.copy(r).invert(),Ga.copy(t.ray).applyMatrix4(Ua);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new It,c=new It,u=new It,h=new It,d=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f){for(let n=Math.max(0,a.start),r=Math.min(f.count,a.start+a.count)-1;n<r;n+=d){const r=f.getX(n),i=f.getX(n+1);l.fromBufferAttribute(p,r),c.fromBufferAttribute(p,i);if(Ga.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const a=t.ray.origin.distanceTo(h);a<t.near||a>t.far||e.push({distance:a,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,a.start),r=Math.min(p.count,a.start+a.count)-1;n<r;n+=d){l.fromBufferAttribute(p,n),c.fromBufferAttribute(p,n+1);if(Ga.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(h);r<t.near||r>t.far||e.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}const Va=new It,Wa=new It;class $a extends ja{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)Va.fromBufferAttribute(e,t),Wa.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Va.distanceTo(Wa);t.setAttribute("lineDistance",new tn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Ya extends ja{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class qa extends Ye{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new _t(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const Xa=new ce,Ja=new le,Za=new te,Ka=new It;class Qa extends De{constructor(t=new cn,e=new qa){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Za.copy(n.boundingSphere),Za.applyMatrix4(r),Za.radius+=i,!1===t.ray.intersectsSphere(Za))return;Xa.copy(r).invert(),Ja.copy(t.ray).applyMatrix4(Xa);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);n<i;n++){const i=l.getX(n);Ka.fromBufferAttribute(c,i),ts(Ka,i,o,r,t,e,this)}}else{for(let n=Math.max(0,a.start),i=Math.min(c.count,a.start+a.count);n<i;n++)Ka.fromBufferAttribute(c,n),ts(Ka,n,o,r,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function ts(t,e,n,r,i,a,s){const o=Ja.distanceSqToPoint(t);if(o<n){const n=new It;Ja.closestPointToPoint(t,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:e,face:null,object:s})}}class es extends Ye{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _t(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new st(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ns extends es{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new st(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Z(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new _t(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new _t(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new _t(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}function rs(t,e,n){return as(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function is(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function as(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ss(t){const e=t.length,n=new Array(e);for(let r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n}function os(t,e,n){const r=t.length,i=new t.constructor(r);for(let a=0,s=0;s!==r;++a){const r=n[a]*e;for(let n=0;n!==e;++n)i[s++]=t[r+n]}return i}function ls(t,e,n,r){let i=1,a=t[0];for(;void 0!==a&&void 0===a[r];)a=t[i++];if(void 0===a)return;let s=a[r];if(void 0!==s)if(Array.isArray(s))do{s=a[r],void 0!==s&&(e.push(a.time),n.push.apply(n,s)),a=t[i++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[r],void 0!==s&&(e.push(a.time),s.toArray(n,n.length)),a=t[i++]}while(void 0!==a);else do{s=a[r],void 0!==s&&(e.push(a.time),n.push(s)),a=t[i++]}while(void 0!==a)}class cs{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let a;n:{r:if(!(t<r)){for(let a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=e[++n],t<r)break e}a=e.length;break n}if(t>=i)break t;{const s=e[1];t<s&&(n=2,i=s);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,i=e[--n-1],t>=i)break e}a=n,n=0}}for(;n<a;){const r=n+a>>>1;t<e[r]?a=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let a=0;a!==r;++a)e[a]=n[i+a];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class us extends cs{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:D,endingEnd:D}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,a=t+1,s=r[i],o=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case B:i=t,s=2*e-n;break;case O:i=r.length-2,s=e+r[i]-r[i+1];break;default:i=t,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case B:a=t,o=2*n-e;break;case O:a=1,o=n+r[1]-r[0];break;default:a=t-1,o=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(o-n),this._offsetPrev=i*c,this._offsetNext=a*c}interpolate_(t,e,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=t*s,l=o-s,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-e)/(r-e),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,y=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,v=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p;for(let x=0;x!==s;++x)i[x]=g*a[c+x]+y*a[l+x]+v*a[o+x]+b*a[u+x];return i}}class hs extends cs{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=t*s,l=o-s,c=(n-e)/(r-e),u=1-c;for(let h=0;h!==s;++h)i[h]=a[l+h]*u+a[o+h]*c;return i}}class ds extends cs{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class fs{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=is(e,this.TimeBufferType),this.values=is(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:is(t.times,Array),values:is(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new ds(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new hs(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new us(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case P:e=this.InterpolantFactoryMethodDiscrete;break;case R:e=this.InterpolantFactoryMethodLinear;break;case I:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return P;case this.InterpolantFactoryMethodLinear:return R;case this.InterpolantFactoryMethodSmooth:return I}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,a=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const t=this.getValueSize();this.times=rs(n,i,a),this.values=rs(this.values,i*t,a*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let s=0;s!==i;s++){const e=n[s];if("number"==typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,e),t=!1;break}if(null!==a&&a>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,e,a),t=!1;break}a=e}if(void 0!==r&&as(r))for(let s=0,o=r.length;s!==o;++s){const e=r[s];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,e),t=!1;break}}return t}optimize(){const t=rs(this.times),e=rs(this.values),n=this.getValueSize(),r=this.getInterpolation()===I,i=t.length-1;let a=1;for(let s=1;s<i;++s){let i=!1;const o=t[s];if(o!==t[s+1]&&(1!==s||o!==t[0]))if(r)i=!0;else{const t=s*n,r=t-n,a=t+n;for(let s=0;s!==n;++s){const n=e[t+s];if(n!==e[r+s]||n!==e[a+s]){i=!0;break}}}if(i){if(s!==a){t[a]=t[s];const r=s*n,i=a*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++a}}if(i>0){t[a]=t[i];for(let t=i*n,r=a*n,s=0;s!==n;++s)e[r+s]=e[t+s];++a}return a!==t.length?(this.times=rs(t,0,a),this.values=rs(e,0,a*n)):(this.times=t,this.values=e),this}clone(){const t=rs(this.times,0),e=rs(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}fs.prototype.TimeBufferType=Float32Array,fs.prototype.ValueBufferType=Float32Array,fs.prototype.DefaultInterpolation=R;class ps extends fs{}ps.prototype.ValueTypeName="bool",ps.prototype.ValueBufferType=Array,ps.prototype.DefaultInterpolation=P,ps.prototype.InterpolantFactoryMethodLinear=void 0,ps.prototype.InterpolantFactoryMethodSmooth=void 0;class ms extends fs{}ms.prototype.ValueTypeName="color";class gs extends fs{}gs.prototype.ValueTypeName="number";class ys extends cs{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-e)/(r-e);let l=t*s;for(let c=l+s;l!==c;l+=4)Rt.slerpFlat(i,0,a,l-s,a,l,o);return i}}class vs extends fs{InterpolantFactoryMethodLinear(t){return new ys(this.times,this.values,this.getValueSize(),t)}}vs.prototype.ValueTypeName="quaternion",vs.prototype.DefaultInterpolation=R,vs.prototype.InterpolantFactoryMethodSmooth=void 0;class bs extends fs{}bs.prototype.ValueTypeName="string",bs.prototype.ValueBufferType=Array,bs.prototype.DefaultInterpolation=P,bs.prototype.InterpolantFactoryMethodLinear=void 0,bs.prototype.InterpolantFactoryMethodSmooth=void 0;class xs extends fs{}xs.prototype.ValueTypeName="vector";class _s{constructor(t,e=-1,n,r=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=J(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let a=0,s=n.length;a!==s;++a)e.push(ws(n[a]).scale(r));const i=new this(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let i=0,a=n.length;i!==a;++i)e.push(fs.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const i=e.length,a=[];for(let s=0;s<i;s++){let t=[],o=[];t.push((s+i-1)%i,s,(s+1)%i),o.push(0,1,0);const l=ss(t);t=os(t,1,l),o=os(o,1,l),r||0!==t[0]||(t.push(i),o.push(o[0])),a.push(new gs(".morphTargetInfluences["+e[s].name+"]",t,o).scale(1/n))}return new this(t,-1,a)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let s=0,o=t.length;s<o;s++){const e=t[s],n=e.name.match(i);if(n&&n.length>1){const t=n[1];let i=r[t];i||(r[t]=i=[]),i.push(e)}}const a=[];for(const s in r)a.push(this.CreateFromMorphTargetSequence(s,r[s],e,n));return a}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,i){if(0!==n.length){const a=[],s=[];ls(n,a,s,r),0!==a.length&&i.push(new t(e,a,s))}},r=[],i=t.name||"default",a=t.fps||30,s=t.blendMode;let o=t.length||-1;const l=t.hierarchy||[];for(let c=0;c<l.length;c++){const t=l[c].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let n;for(n=0;n<t.length;n++)if(t[n].morphTargets)for(let r=0;r<t[n].morphTargets.length;r++)e[t[n].morphTargets[r]]=-1;for(const i in e){const e=[],a=[];for(let r=0;r!==t[n].morphTargets.length;++r){const r=t[n];e.push(r.time),a.push(r.morphTarget===i?1:0)}r.push(new gs(".morphTargetInfluence["+i+"]",e,a))}o=e.length*a}else{const i=".bones["+e[c].name+"]";n(xs,i+".position",t,"pos",r),n(vs,i+".quaternion",t,"rot",r),n(xs,i+".scale",t,"scl",r)}}if(0===r.length)return null;return new this(i,o,r,s)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ws(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return gs;case"vector":case"vector2":case"vector3":case"vector4":return xs;case"color":return ms;case"quaternion":return vs;case"bool":case"boolean":return ps;case"string":return bs}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];ls(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Ss={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Es{constructor(t,e,n){const r=this;let i,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===a&&void 0!==r.onStart&&r.onStart(t,s,o),a=!0},this.itemEnd=function(t){s++,void 0!==r.onProgress&&r.onProgress(t,s,o),s===o&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}const Ms=new Es;class Cs{constructor(t){this.manager=void 0!==t?t:Ms,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Ts={};class As extends Error{constructor(t,e){super(t),this.response=e}}class ks extends Cs{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=Ss.get(t);if(void 0!==i)return this.manager.itemStart(t),setTimeout((()=>{e&&e(i),this.manager.itemEnd(t)}),0),i;if(void 0!==Ts[t])return void Ts[t].push({onLoad:e,onProgress:n,onError:r});Ts[t]=[],Ts[t].push({onLoad:e,onProgress:n,onError:r});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=Ts[t],r=e.body.getReader(),i=e.headers.get("Content-Length")||e.headers.get("X-File-Size"),a=i?parseInt(i):0,s=0!==a;let o=0;const l=new ReadableStream({start(t){!function e(){r.read().then((({done:r,value:i})=>{if(r)t.close();else{o+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(r)}t.enqueue(i),e()}}))}()}});return new Response(l)}throw new As(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`,e)})).then((t=>{switch(o){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,s)));case"json":return t.json();default:if(void 0===s)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(s),n=e&&e[1]?e[1].toLowerCase():void 0,r=new TextDecoder(n);return t.arrayBuffer().then((t=>r.decode(t)))}}})).then((e=>{Ss.add(t,e);const n=Ts[t];delete Ts[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onLoad&&r.onLoad(e)}})).catch((e=>{const n=Ts[t];if(void 0===n)throw this.manager.itemError(t),e;delete Ts[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Ls extends Cs{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,a=Ss.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;const s=ut("img");function o(){c(),Ss.add(t,this),e&&e(this),i.manager.itemEnd(t)}function l(e){c(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function c(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(t),s.src=t,s}}class Ps extends Cs{constructor(t){super(t)}load(t,e,n,r){const i=new Tt,a=new Ls(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}class Rs extends De{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new _t(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const Is=new ce,Ds=new It,Bs=new It;class Os{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new st(512,512),this.map=null,this.mapPass=null,this.matrix=new ce,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jn,this._frameExtents=new st(1,1),this._viewportCount=1,this._viewports=[new At(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;Ds.setFromMatrixPosition(t.matrixWorld),e.position.copy(Ds),Bs.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Bs),e.updateMatrixWorld(),Is.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Is),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Is)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Ns extends Os{constructor(){super(new Rn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*X*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Fs extends Rs{constructor(t,e,n=0,r=Math.PI/3,i=0,a=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(De.DefaultUp),this.updateMatrix(),this.target=new De,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.map=null,this.shadow=new Ns}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const zs=new ce,Us=new It,Gs=new It;class Hs extends Os{constructor(){super(new Rn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new st(4,2),this._viewportCount=6,this._viewports=[new At(2,1,1,1),new At(0,1,1,1),new At(3,1,1,1),new At(1,1,1,1),new At(3,0,1,1),new At(1,0,1,1)],this._cubeDirections=[new It(1,0,0),new It(-1,0,0),new It(0,0,1),new It(0,0,-1),new It(0,1,0),new It(0,-1,0)],this._cubeUps=[new It(0,1,0),new It(0,1,0),new It(0,1,0),new It(0,1,0),new It(0,0,1),new It(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Us.setFromMatrixPosition(t.matrixWorld),n.position.copy(Us),Gs.copy(n.position),Gs.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(Gs),n.updateMatrixWorld(),r.makeTranslation(-Us.x,-Us.y,-Us.z),zs.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zs)}}class js extends Rs{constructor(t,e,n=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Hs}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Vs extends Os{constructor(){super(new rr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ws extends Rs{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(De.DefaultUp),this.updateMatrix(),this.target=new De,this.shadow=new Vs}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class $s{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let r=0,i=t.length;r<i;r++)e+=String.fromCharCode(t[r]);try{return decodeURIComponent(escape(e))}catch(n){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class Ys extends Cs{constructor(t){super(t),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,a=Ss.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(t,s).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Ss.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}const qs="\\[\\]\\.:\\/",Xs=new RegExp("["+qs+"]","g"),Js="[^"+qs+"]",Zs="[^"+qs.replace("\\.","")+"]",Ks=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Js)+/(WCOD+)?/.source.replace("WCOD",Zs)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Js)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Js)+"$"),Qs=["material","materials","bones","map"];class to{constructor(t,e,n){this.path=e,this.parsedPath=n||to.parseTrackName(e),this.node=to.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new to.Composite(t,e,n):new to(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Xs,"")}static parseTrackName(t){const e=Ks.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==Qs.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const a=n(i.children);if(a)return a}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=to.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const a=t[r];if(void 0===a){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}to.Composite=class{constructor(t,e,n){const r=n||to.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},to.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},to.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},to.prototype.GetterByBindingType=[to.prototype._getValue_direct,to.prototype._getValue_array,to.prototype._getValue_arrayElement,to.prototype._getValue_toArray],to.prototype.SetterByBindingTypeAndVersioning=[[to.prototype._setValue_direct,to.prototype._setValue_direct_setNeedsUpdate,to.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[to.prototype._setValue_array,to.prototype._setValue_array_setNeedsUpdate,to.prototype._setValue_array_setMatrixWorldNeedsUpdate],[to.prototype._setValue_arrayElement,to.prototype._setValue_arrayElement_setNeedsUpdate,to.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[to.prototype._setValue_fromArray,to.prototype._setValue_fromArray_setNeedsUpdate,to.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r);const eo=new WeakMap;class no extends Cs{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,r){const i=new ks(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(t,(t=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(t,n).then(e).catch(r)}),n,r)}decodeDracoFile(t,e,n,r){const i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(t,i).then(e)}decodeGeometry(t,e){for(const o in e.attributeTypes){const t=e.attributeTypes[o];void 0!==t.BYTES_PER_ELEMENT&&(e.attributeTypes[o]=t.name)}const n=JSON.stringify(e);if(eo.has(t)){const e=eo.get(t);if(e.key===n)return e.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,a=t.byteLength,s=this._getWorker(i,a).then((n=>(r=n,new Promise(((n,a)=>{r._callbacks[i]={resolve:n,reject:a},r.postMessage({type:"decode",id:i,taskConfig:e,buffer:t},[t])}))))).then((t=>this._createGeometry(t.geometry)));return s.catch((()=>!0)).then((()=>{r&&i&&this._releaseTask(r,i)})),eo.set(t,{key:n,promise:s}),s}_createGeometry(t){const e=new cn;t.index&&e.setIndex(new Ze(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const r=t.attributes[n],i=r.name,a=r.array,s=r.itemSize;e.setAttribute(i,new Ze(a,s))}return e}_loadLibrary(t,e){const n=new ks(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise(((e,r)=>{n.load(t,e,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then((e=>{const n=e[0];t||(this.decoderConfig.wasmBinary=e[1]);const r=ro.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(t,e){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const t=new Worker(this.workerSourceURL);t._callbacks={},t._taskCosts={},t._taskLoad=0,t.postMessage({type:"init",decoderConfig:this.decoderConfig}),t.onmessage=function(e){const n=e.data;switch(n.type){case"decode":t._callbacks[n.id].resolve(n);break;case"error":t._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(t)}else this.workerPool.sort((function(t,e){return t._taskLoad>e._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n}))}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map((t=>t._taskLoad)))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function ro(){let t,e;function n(t,e,n,r,i,a){const s=a.num_components(),o=n.num_points()*s,l=o*i.BYTES_PER_ELEMENT,c=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32}}(t,i),u=t._malloc(l);e.GetAttributeDataArrayForAllPoints(n,a,c,l,u);const h=new i(t.HEAPF32.buffer,u,o).slice();return t._free(u),{name:r,array:h,itemSize:s}}onmessage=function(r){const i=r.data;switch(i.type){case"init":t=i.decoderConfig,e=new Promise((function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)}));break;case"decode":const r=i.buffer,a=i.taskConfig;e.then((t=>{const e=t.draco,s=new e.Decoder,o=new e.DecoderBuffer;o.Init(new Int8Array(r),r.byteLength);try{const t=function(t,e,r,i){const a=i.attributeIDs,s=i.attributeTypes;let o,l;const c=e.GetEncodedGeometryType(r);if(c===t.TRIANGULAR_MESH)o=new t.Mesh,l=e.DecodeBufferToMesh(r,o);else{if(c!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new t.PointCloud,l=e.DecodeBufferToPointCloud(r,o)}if(!l.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const h in a){const r=self[s[h]];let l,c;if(i.useUniqueIDs)c=a[h],l=e.GetAttributeByUniqueId(o,c);else{if(c=e.GetAttributeId(o,t[a[h]]),-1===c)continue;l=e.GetAttribute(o,c)}u.attributes.push(n(t,e,o,h,r,l))}c===t.TRIANGULAR_MESH&&(u.index=function(t,e,n){const r=n.num_faces(),i=3*r,a=4*i,s=t._malloc(a);e.GetTrianglesUInt32Array(n,a,s);const o=new Uint32Array(t.HEAPF32.buffer,s,i).slice();return t._free(s),{array:o,itemSize:1}}(t,e,o));return t.destroy(o),u}(e,s,o,a),r=t.attributes.map((t=>t.array.buffer));t.index&&r.push(t.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:t},r)}catch(l){console.error(l),self.postMessage({type:"error",id:i.id,error:l.message})}finally{e.destroy(o),e.destroy(s)}}))}}}let io;const ao=()=>{if(io)return io;const t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),e=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!=typeof WebAssembly)return{supported:!1};let n,r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(t)&&(r="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");const i=WebAssembly.instantiate(function(t){const n=new Uint8Array(t.length);for(let e=0;e<t.length;++e){const r=t.charCodeAt(e);n[e]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let r=0;for(let i=0;i<t.length;++i)n[r++]=n[i]<60?e[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}(r),{}).then((t=>{n=t.instance,n.exports.__wasm_call_ctors()}));function a(t,e,r,i,a,s){const o=n.exports.sbrk,l=r+3&-4,c=o(l*i),u=o(a.length),h=new Uint8Array(n.exports.memory.buffer);h.set(a,u);const d=t(c,r,i,u,a.length);if(0===d&&s&&s(c,l,i),e.set(h.subarray(c,c+r*i)),o(c-o(0)),0!==d)throw new Error(`Malformed buffer data: ${d}`)}const s={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},o={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return io={ready:i,supported:!0,decodeVertexBuffer(t,e,r,i,o){a(n.exports.meshopt_decodeVertexBuffer,t,e,r,i,n.exports[s[o]])},decodeIndexBuffer(t,e,r,i){a(n.exports.meshopt_decodeIndexBuffer,t,e,r,i)},decodeIndexSequence(t,e,r,i){a(n.exports.meshopt_decodeIndexSequence,t,e,r,i)},decodeGltfBuffer(t,e,r,i,l,c){a(n.exports[o[l]],t,e,r,i,n.exports[s[c]])}},io};class so extends Cs{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new fo(t)})),this.register((function(t){return new xo(t)})),this.register((function(t){return new _o(t)})),this.register((function(t){return new mo(t)})),this.register((function(t){return new go(t)})),this.register((function(t){return new yo(t)})),this.register((function(t){return new vo(t)})),this.register((function(t){return new ho(t)})),this.register((function(t){return new bo(t)})),this.register((function(t){return new po(t)})),this.register((function(t){return new co(t)})),this.register((function(t){return new wo(t)}))}load(t,e,n,r){const i=this;let a;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:$s.extractUrlBase(t),this.manager.itemStart(t);const s=function(e){r?r(e):console.error(e),i.manager.itemError(t),i.manager.itemEnd(t)},o=new ks(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{i.parse(n,a,(function(n){e(n),i.manager.itemEnd(t)}),s)}catch(r){s(r)}}),n,s)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,r){let i;const a={},s={};if("string"==typeof t)i=t;else{if($s.decodeText(new Uint8Array(t,0,4))===So){try{a[lo.KHR_BINARY_GLTF]=new Co(t)}catch(c){return void(r&&r(c))}i=a[lo.KHR_BINARY_GLTF].content}else i=$s.decodeText(new Uint8Array(t))}const o=JSON.parse(i);if(void 0===o.asset||o.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new il(o,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const t=this.pluginCallbacks[u](l);s[t.name]=t,a[t.name]=!0}if(o.extensionsUsed)for(let u=0;u<o.extensionsUsed.length;++u){const t=o.extensionsUsed[u],e=o.extensionsRequired||[];switch(t){case lo.KHR_MATERIALS_UNLIT:a[t]=new uo;break;case lo.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[t]=new Lo;break;case lo.KHR_DRACO_MESH_COMPRESSION:a[t]=new To(o,this.dracoLoader);break;case lo.KHR_TEXTURE_TRANSFORM:a[t]=new Ao;break;case lo.KHR_MESH_QUANTIZATION:a[t]=new Po;break;default:e.indexOf(t)>=0&&void 0===s[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}l.setExtensions(a),l.setPlugins(s),l.parse(n,r)}parseAsync(t,e){const n=this;return new Promise((function(r,i){n.parse(t,e,r,i)}))}}function oo(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const lo={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class co{constructor(t){this.parser=t,this.name=lo.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,r=e.length;n<r;n++){const r=e[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let r=e.cache.get(n);if(r)return r;const i=e.json,a=((i.extensions&&i.extensions[this.name]||{}).lights||[])[t];let s;const o=new _t(16777215);void 0!==a.color&&o.fromArray(a.color);const l=void 0!==a.range?a.range:0;switch(a.type){case"directional":s=new Ws(o),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new js(o),s.distance=l;break;case"spot":s=new Fs(o),s.distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,s.angle=a.spot.outerConeAngle,s.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return s.position.set(0,0,0),s.decay=2,void 0!==a.intensity&&(s.intensity=a.intensity),s.name=e.createUniqueName(a.name||"light_"+t),r=Promise.resolve(s),e.cache.add(n,r),r}createNodeAttachment(t){const e=this,n=this.parser,r=n.json.nodes[t],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(t){return n._getNodeRef(e.cache,i,t)}))}}class uo{constructor(){this.name=lo.KHR_MATERIALS_UNLIT}getMaterialType(){return qe}extendParams(t,e,n){const r=[];t.color=new _t(1,1,1),t.opacity=1;const i=e.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const e=i.baseColorFactor;t.color.fromArray(e),t.opacity=e[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(t,"map",i.baseColorTexture,F))}return Promise.all(r)}}class ho{constructor(t){this.parser=t,this.name=lo.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(e.emissiveIntensity=r),Promise.resolve()}}class fo{constructor(t){this.parser=t,this.name=lo.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?ns:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(e.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(e,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(e.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(e,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(e,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const t=a.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new st(t,t)}return Promise.all(i)}}class po{constructor(t){this.parser=t,this.name=lo.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?ns:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(e.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(e,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(e.iridescenceIOR=a.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(e,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}class mo{constructor(t){this.parser=t,this.name=lo.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?ns:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];e.sheenColor=new _t(0,0,0),e.sheenRoughness=0,e.sheen=1;const a=r.extensions[this.name];return void 0!==a.sheenColorFactor&&e.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(e.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(e,"sheenColorMap",a.sheenColorTexture,F)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(e,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}class go{constructor(t){this.parser=t,this.name=lo.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?ns:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(e.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(e,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}class yo{constructor(t){this.parser=t,this.name=lo.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?ns:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];e.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(e,"thicknessMap",a.thicknessTexture)),e.attenuationDistance=a.attenuationDistance||1/0;const s=a.attenuationColor||[1,1,1];return e.attenuationColor=new _t(s[0],s[1],s[2]),Promise.all(i)}}class vo{constructor(t){this.parser=t,this.name=lo.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?ns:null}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return e.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class bo{constructor(t){this.parser=t,this.name=lo.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?ns:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];e.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(e,"specularIntensityMap",a.specularTexture));const s=a.specularColorFactor||[1,1,1];return e.specularColor=new _t(s[0],s[1],s[2]),void 0!==a.specularColorTexture&&i.push(n.assignTexture(e,"specularColorMap",a.specularColorTexture,F)),Promise.all(i)}}class xo{constructor(t){this.parser=t,this.name=lo.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],a=e.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,i.source,a)}}class _o{constructor(t){this.parser=t,this.name=lo.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,i=r.textures[t];if(!i.extensions||!i.extensions[e])return null;const a=i.extensions[e],s=r.images[a.source];let o=n.textureLoader;if(s.uri){const t=n.options.manager.getHandler(s.uri);null!==t&&(o=t)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(t,a.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class wo{constructor(t){this.name=lo.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const t=n.extensions[this.name],r=this.parser.getDependency("buffer",t.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(e){const n=t.byteOffset||0,r=t.byteLength||0,a=t.count,s=t.byteStride,o=new Uint8Array(e,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(a,s,o,t.mode,t.filter).then((function(t){return t.buffer})):i.ready.then((function(){const e=new ArrayBuffer(a*s);return i.decodeGltfBuffer(new Uint8Array(e),a,s,o,t.mode,t.filter),e}))}))}return null}}const So="glTF",Eo=1313821514,Mo=5130562;class Co{constructor(t){this.name=lo.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:$s.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==So)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(t,12);let i=0;for(;i<n;){const e=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,n===Eo){const n=new Uint8Array(t,12+i,e);this.content=$s.decodeText(n)}else if(n===Mo){const n=12+i;this.body=t.slice(n,n+e)}i+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class To{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=lo.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,r=this.dracoLoader,i=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,s={},o={},l={};for(const c in a){const t=$o[c]||c.toLowerCase();s[t]=a[c]}for(const c in t.attributes){const e=$o[c]||c.toLowerCase();if(void 0!==a[c]){const r=n.accessors[t.attributes[c]],i=Ho[r.componentType];l[e]=i.name,o[e]=!0===r.normalized}}return e.getDependency("bufferView",i).then((function(t){return new Promise((function(e){r.decodeDracoFile(t,(function(t){for(const e in t.attributes){const n=t.attributes[e],r=o[e];void 0!==r&&(n.normalized=r)}e(t)}),s,l)}))}))}}class Ao{constructor(){this.name=lo.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class ko extends es{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new _t).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(t){for(const e in s)t.uniforms[e]=s[e];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(t){s.specular.value=t}},specularMap:{get:function(){return s.specularMap.value},set:function(t){s.specularMap.value=t,t?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(t){s.glossiness.value=t}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(t){s.glossinessMap.value=t,t?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Lo{constructor(){this.name=lo.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return ko}extendParams(t,e,n){const r=e.extensions[this.name];t.color=new _t(1,1,1),t.opacity=1;const i=[];if(Array.isArray(r.diffuseFactor)){const e=r.diffuseFactor;t.color.fromArray(e),t.opacity=e[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(t,"map",r.diffuseTexture,F)),t.emissive=new _t(0,0,0),t.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,t.specular=new _t(1,1,1),Array.isArray(r.specularFactor)&&t.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const e=r.specularGlossinessTexture;i.push(n.assignTexture(t,"glossinessMap",e)),i.push(n.assignTexture(t,"specularMap",e,F))}return Promise.all(i)}createMaterial(t){const e=new ko(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=void 0===t.emissiveIntensity?1:t.emissiveIntensity,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=0,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}class Po{constructor(){this.name=lo.KHR_MESH_QUANTIZATION}}class Ro extends cs{constructor(t,e,n,r){super(t,e,n,r)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r*3+r;for(let a=0;a!==r;a++)e[a]=n[i+a];return e}interpolate_(t,e,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=2*s,l=3*s,c=r-e,u=(n-e)/c,h=u*u,d=h*u,f=t*l,p=f-l,m=-2*d+3*h,g=d-h,y=1-m,v=g-h+u;for(let b=0;b!==s;b++){const t=a[p+b+s],e=a[p+b+o]*c,n=a[f+b+s],r=a[f+b]*c;i[b]=y*t+v*e+m*n+g*r}return i}}const Io=new Rt;class Do extends Ro{interpolate_(t,e,n,r){const i=super.interpolate_(t,e,n,r);return Io.fromArray(i).normalize().toArray(i),i}}const Bo=0,Oo=1,No=2,Fo=3,zo=4,Uo=5,Go=6,Ho={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},jo={9728:f,9729:g,9984:p,9985:y,9986:m,9987:v},Vo={33071:h,33648:d,10497:u},Wo={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$o={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Yo={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},qo={CUBICSPLINE:void 0,LINEAR:R,STEP:P},Xo="OPAQUE",Jo="MASK",Zo="BLEND";function Ko(t,e,n){for(const r in n.extensions)void 0===t[r]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function Qo(t,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function tl(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let e=0,r=n.length;e<r;e++)t.morphTargetDictionary[n[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function el(t){const e=t.extensions&&t.extensions[lo.KHR_DRACO_MESH_COMPRESSION];let n;return n=e?"draco:"+e.bufferView+":"+e.indices+":"+nl(e.attributes):t.indices+":"+nl(t.attributes)+":"+t.mode,n}function nl(t){let e="";const n=Object.keys(t).sort();for(let r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function rl(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class il{constructor(t={},e={}){var n,r;this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new oo,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i="undefined"!=typeof navigator&&!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a="undefined"!=typeof navigator&&(null===(n=navigator.userAgent)||void 0===n?void 0:n.indexOf("Firefox"))>-1,s="undefined"!=typeof navigator&&a?null===(r=navigator.userAgent)||void 0===r?void 0:r.match(/Firefox\/([0-9]+)\./)[1]:-1;"undefined"==typeof createImageBitmap||i||a&&s<98?this.textureLoader=new Ps(this.options.manager):this.textureLoader=new Ys(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ks(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(e){const a={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:n,userData:{}};Ko(i,a,r),Qo(a,r),Promise.all(n._invokeAll((function(t){return t.afterRoot&&t.afterRoot(a)}))).then((function(){t(a)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=e.length;r<i;r++){const n=e[r].joints;for(let e=0,r=n.length;e<r;e++)t[n[e]].isBone=!0}for(let r=0,i=t.length;r<i;r++){const e=t[r];void 0!==e.mesh&&(this._addNodeRef(this.meshCache,e.mesh),void 0!==e.skin&&(n[e.mesh].isSkinnedMesh=!0)),void 0!==e.camera&&this._addNodeRef(this.cameraCache,e.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const r=n.clone(),i=(t,e)=>{const n=this.associations.get(t);null!=n&&this.associations.set(e,n);for(const[r,a]of t.children.entries())i(a,e.children[r])};return i(n,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const r=t(e[n]);if(r)return r}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let r=0;r<e.length;r++){const i=t(e[r]);i&&n.push(i)}return n}getDependency(t,e){const n=t+":"+e;let r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this.loadNode(e);break;case"mesh":r=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":r=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne((function(t){return t.loadAnimation&&t.loadAnimation(e)}));break;case"camera":r=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,r=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(r.map((function(e,r){return n.getDependency(t,r)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[lo.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(t,i){n.load($s.resolveURL(e.uri,r.path),t,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){const n=e.byteLength||0,r=e.byteOffset||0;return t.slice(r,r+n)}))}loadAccessor(t){const e=this,n=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(t){const i=t[0],a=Wo[r.type],s=Ho[r.componentType],o=s.BYTES_PER_ELEMENT,l=o*a,c=r.byteOffset||0,u=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,h=!0===r.normalized;let d,f;if(u&&u!==l){const t=Math.floor(c/u),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+t+":"+r.count;let l=e.cache.get(n);l||(d=new s(i,t*u,r.count*u/o),l=new Sa(d,u/o),e.cache.add(n,l)),f=new Ma(l,a,c%u/o,h)}else d=null===i?new s(r.count*a):new s(i,c,r.count*a),f=new Ze(d,a,h);if(void 0!==r.sparse){const e=Wo.SCALAR,n=Ho[r.sparse.indices.componentType],o=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,c=new n(t[1],o,r.sparse.count*e),u=new s(t[2],l,r.sparse.count*a);null!==i&&(f=new Ze(f.array.slice(),f.itemSize,f.normalized));for(let t=0,r=c.length;t<r;t++){const e=c[t];if(f.setX(e,u[t*a]),a>=2&&f.setY(e,u[t*a+1]),a>=3&&f.setZ(e,u[t*a+2]),a>=4&&f.setW(e,u[t*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return f}))}loadTexture(t){const e=this.json,n=this.options,r=e.textures[t].source,i=e.images[r];let a=this.textureLoader;if(i.uri){const t=n.manager.getHandler(i.uri);null!==t&&(a=t)}return this.loadTextureImage(t,r,a)}loadTextureImage(t,e,n){const r=this,i=this.json,a=i.textures[t],s=i.images[e],o=(s.uri||s.bufferView)+":"+a.sampler;if(this.textureCache[o])return this.textureCache[o];const l=this.loadImageSource(e,n).then((function(e){e.flipY=!1,a.name&&(e.name=a.name);const n=(i.samplers||{})[a.sampler]||{};return e.magFilter=jo[n.magFilter]||g,e.minFilter=jo[n.minFilter]||v,e.wrapS=Vo[n.wrapS]||u,e.wrapT=Vo[n.wrapT]||u,r.associations.set(e,{textures:t}),e})).catch((function(){return null}));return this.textureCache[o]=l,l}loadImageSource(t,e){const n=this,r=this.json,i=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then((t=>t.clone()));const a=r.images[t],s=self.URL||self.webkitURL;let o=a.uri||"",l=!1;if(void 0!==a.bufferView)o=n.getDependency("bufferView",a.bufferView).then((function(t){l=!0;const e=new Blob([t],{type:a.mimeType});return o=s.createObjectURL(e),o}));else if(void 0===a.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const c=Promise.resolve(o).then((function(t){return new Promise((function(n,r){let a=n;!0===e.isImageBitmapLoader&&(a=function(t){const e=new Tt(t);e.needsUpdate=!0,n(e)}),e.load($s.resolveURL(t,i.path),a,void 0,r)}))})).then((function(t){var e;return!0===l&&s.revokeObjectURL(o),t.userData.mimeType=a.mimeType||((e=a.uri).search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"),t})).catch((function(t){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),t}));return this.sourceCache[t]=c,c}assignTexture(t,e,n,r){const i=this;return this.getDependency("texture",n.index).then((function(a){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===e&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+e+" not yet supported."),i.extensions[lo.KHR_TEXTURE_TRANSFORM]){const t=void 0!==n.extensions?n.extensions[lo.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=i.associations.get(a);a=i.extensions[lo.KHR_TEXTURE_TRANSFORM].extendTexture(a,t),i.associations.set(a,e)}}return void 0!==r&&(a.encoding=r),t[e]=a,a}))}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const r=void 0===e.attributes.tangent,i=void 0!==e.attributes.color,a=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new qa,Ye.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,e.sizeAttenuation=!1,this.cache.add(t,e)),n=e}else if(t.isLine){const t="LineBasicMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new Na,Ye.prototype.copy.call(e,n),e.color.copy(n.color),this.cache.add(t,e)),n=e}if(r||i||a){let t="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(t+="specular-glossiness:"),r&&(t+="derivative-tangents:"),i&&(t+="vertex-colors:"),a&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=n.clone(),i&&(e.vertexColors=!0),a&&(e.flatShading=!0),r&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(n))),n=e}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=n}getMaterialType(){return es}loadMaterial(t){const e=this,n=this.json,r=this.extensions,i=n.materials[t];let a;const s={},o=i.extensions||{},l=[];if(o[lo.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const t=r[lo.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=t.getMaterialType(),l.push(t.extendParams(s,i,e))}else if(o[lo.KHR_MATERIALS_UNLIT]){const t=r[lo.KHR_MATERIALS_UNLIT];a=t.getMaterialType(),l.push(t.extendParams(s,i,e))}else{const n=i.pbrMetallicRoughness||{};if(s.color=new _t(1,1,1),s.opacity=1,Array.isArray(n.baseColorFactor)){const t=n.baseColorFactor;s.color.fromArray(t),s.opacity=t[3]}void 0!==n.baseColorTexture&&l.push(e.assignTexture(s,"map",n.baseColorTexture,F)),s.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,s.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(e.assignTexture(s,"metalnessMap",n.metallicRoughnessTexture)),l.push(e.assignTexture(s,"roughnessMap",n.metallicRoughnessTexture))),a=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),l.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,s)}))))}!0===i.doubleSided&&(s.side=2);const c=i.alphaMode||Xo;if(c===Zo?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,c===Jo&&(s.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&a!==qe&&(l.push(e.assignTexture(s,"normalMap",i.normalTexture)),s.normalScale=new st(1,1),void 0!==i.normalTexture.scale)){const t=i.normalTexture.scale;s.normalScale.set(t,t)}return void 0!==i.occlusionTexture&&a!==qe&&(l.push(e.assignTexture(s,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(s.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&a!==qe&&(s.emissive=(new _t).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&a!==qe&&l.push(e.assignTexture(s,"emissiveMap",i.emissiveTexture,F)),Promise.all(l).then((function(){let n;return n=a===ko?r[lo.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new a(s),i.name&&(n.name=i.name),Qo(n,i),e.associations.set(n,{materials:t}),i.extensions&&Ko(r,n,i),n}))}createUniqueName(t){const e=to.sanitizeNodeName(t||"");let n=e;for(let r=1;this.nodeNamesUsed[n];++r)n=e+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(t){const e=this,n=this.extensions,r=this.primitiveCache;function i(t){return n[lo.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return sl(n,t,e)}))}const a=[];for(let s=0,o=t.length;s<o;s++){const n=t[s],o=el(n),l=r[o];if(l)a.push(l.promise);else{let t;t=n.extensions&&n.extensions[lo.KHR_DRACO_MESH_COMPRESSION]?i(n):sl(new cn,n,e),r[o]={primitive:n,promise:t},a.push(t)}}return Promise.all(a)}loadMesh(t){const e=this,n=this.json,r=this.extensions,i=n.meshes[t],a=i.primitives,s=[];for(let l=0,c=a.length;l<c;l++){const t=void 0===a[l].material?(void 0===(o=this.cache).DefaultMaterial&&(o.DefaultMaterial=new es({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),o.DefaultMaterial):this.getDependency("material",a[l].material);s.push(t)}var o;return s.push(e.loadGeometries(a)),Promise.all(s).then((function(n){const s=n.slice(0,n.length-1),o=n[n.length-1],l=[];for(let u=0,h=o.length;u<h;u++){const n=o[u],c=a[u];let h;const d=s[u];if(c.mode===zo||c.mode===Uo||c.mode===Go||void 0===c.mode)h=!0===i.isSkinnedMesh?new Pa(n,d):new Sn(n,d),!0!==h.isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),c.mode===Uo?h.geometry=ol(h.geometry,1):c.mode===Go&&(h.geometry=ol(h.geometry,2));else if(c.mode===Oo)h=new $a(n,d);else if(c.mode===Fo)h=new ja(n,d);else if(c.mode===No)h=new Ya(n,d);else{if(c.mode!==Bo)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);h=new Qa(n,d)}Object.keys(h.geometry.morphAttributes).length>0&&tl(h,i),h.name=e.createUniqueName(i.name||"mesh_"+t),Qo(h,i),c.extensions&&Ko(r,h,c),e.assignFinalMaterial(h),l.push(h)}for(let r=0,i=l.length;r<i;r++)e.associations.set(l[r],{meshes:t,primitives:r});if(1===l.length)return l[0];const c=new ma;e.associations.set(c,{meshes:t});for(let t=0,e=l.length;t<e;t++)c.add(l[t]);return c}))}loadCamera(t){let e;const n=this.json.cameras[t],r=n[n.type];if(r)return"perspective"===n.type?e=new Rn(at.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(e=new rr(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),Qo(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return n.inverseBindMatrices=t,n}))}loadAnimation(t){const e=this.json.animations[t],n=[],r=[],i=[],a=[],s=[];for(let o=0,l=e.channels.length;o<l;o++){const t=e.channels[o],l=e.samplers[t.sampler],c=t.target,u=c.node,h=void 0!==e.parameters?e.parameters[l.input]:l.input,d=void 0!==e.parameters?e.parameters[l.output]:l.output;n.push(this.getDependency("node",u)),r.push(this.getDependency("accessor",h)),i.push(this.getDependency("accessor",d)),a.push(l),s.push(c)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(s)]).then((function(n){const r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],l=[];for(let t=0,e=r.length;t<e;t++){const e=r[t],n=i[t],c=a[t],u=s[t],h=o[t];if(void 0===e)continue;let d;switch(e.updateMatrix(),Yo[h.path]){case Yo.weights:d=gs;break;case Yo.rotation:d=vs;break;default:d=xs}const f=e.name?e.name:e.uuid,p=void 0!==u.interpolation?qo[u.interpolation]:R,m=[];Yo[h.path]===Yo.weights?e.traverse((function(t){t.morphTargetInfluences&&m.push(t.name?t.name:t.uuid)})):m.push(f);let g=c.array;if(c.normalized){const t=rl(g.constructor),e=new Float32Array(g.length);for(let n=0,r=g.length;n<r;n++)e[n]=g[n]*t;g=e}for(let t=0,r=m.length;t<r;t++){const e=new d(m[t]+"."+Yo[h.path],n.array,g,p);"CUBICSPLINE"===u.interpolation&&(e.createInterpolant=function(t){return new(this instanceof vs?Do:Ro)(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(e)}}const c=e.name?e.name:"animation_"+t;return new _s(c,void 0,l)}))}createNodeMesh(t){const e=this.json,n=this,r=e.nodes[t];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(t){const e=n._getNodeRef(n.meshCache,r.mesh,t);return void 0!==r.weights&&e.traverse((function(t){if(t.isMesh)for(let e=0,n=r.weights.length;e<n;e++)t.morphTargetInfluences[e]=r.weights[e]})),e}))}loadNode(t){const e=this.json,n=this.extensions,r=this,i=e.nodes[t],a=i.name?r.createUniqueName(i.name):"";return function(){const e=[],n=r._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));return n&&e.push(n),void 0!==i.camera&&e.push(r.getDependency("camera",i.camera).then((function(t){return r._getNodeRef(r.cameraCache,i.camera,t)}))),r._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){e.push(t)})),Promise.all(e)}().then((function(e){let s;if(s=!0===i.isBone?new Ra:e.length>1?new ma:1===e.length?e[0]:new De,s!==e[0])for(let t=0,n=e.length;t<n;t++)s.add(e[t]);if(i.name&&(s.userData.name=i.name,s.name=a),Qo(s,i),i.extensions&&Ko(n,s,i),void 0!==i.matrix){const t=new ce;t.fromArray(i.matrix),s.applyMatrix4(t)}else void 0!==i.translation&&s.position.fromArray(i.translation),void 0!==i.rotation&&s.quaternion.fromArray(i.rotation),void 0!==i.scale&&s.scale.fromArray(i.scale);return r.associations.has(s)||r.associations.set(s,{}),r.associations.get(s).nodes=t,s}))}loadScene(t){const e=this.json,n=this.extensions,r=this.json.scenes[t],i=this,a=new ma;r.name&&(a.name=i.createUniqueName(r.name)),Qo(a,r),r.extensions&&Ko(n,a,r);const s=r.nodes||[],o=[];for(let l=0,c=s.length;l<c;l++)o.push(al(s[l],a,e,i));return Promise.all(o).then((function(){return i.associations=(t=>{const e=new Map;for(const[n,r]of i.associations)(n instanceof Ye||n instanceof Tt)&&e.set(n,r);return t.traverse((t=>{const n=i.associations.get(t);null!=n&&e.set(t,n)})),e})(a),a}))}}function al(t,e,n,r){const i=n.nodes[t];return r.getDependency("node",t).then((function(t){if(void 0===i.skin)return t;let e;return r.getDependency("skin",i.skin).then((function(t){e=t;const n=[];for(let i=0,a=e.joints.length;i<a;i++)n.push(r.getDependency("node",e.joints[i]));return Promise.all(n)})).then((function(n){return t.traverse((function(t){if(!t.isMesh)return;const r=[],i=[];for(let a=0,s=n.length;a<s;a++){const t=n[a];if(t){r.push(t);const n=new ce;void 0!==e.inverseBindMatrices&&n.fromArray(e.inverseBindMatrices.array,16*a),i.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[a])}t.bind(new Oa(r,i),t.matrixWorld)})),t}))})).then((function(t){e.add(t);const a=[];if(i.children){const e=i.children;for(let i=0,s=e.length;i<s;i++){const s=e[i];a.push(al(s,t,n,r))}}return Promise.all(a)}))}function sl(t,e,n){const r=e.attributes,i=[];function a(e,r){return n.getDependency("accessor",e).then((function(e){t.setAttribute(r,e)}))}for(const s in r){const e=$o[s]||s.toLowerCase();e in t.attributes||i.push(a(r[s],e))}if(void 0!==e.indices&&!t.index){const r=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));i.push(r)}return Qo(t,e),function(t,e,n){const r=e.attributes,i=new Ot;if(void 0===r.POSITION)return;{const t=n.json.accessors[r.POSITION],e=t.min,a=t.max;if(void 0===e||void 0===a)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new It(e[0],e[1],e[2]),new It(a[0],a[1],a[2])),t.normalized){const e=rl(Ho[t.componentType]);i.min.multiplyScalar(e),i.max.multiplyScalar(e)}}const a=e.targets;if(void 0!==a){const t=new It,e=new It;for(let r=0,i=a.length;r<i;r++){const i=a[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],a=r.min,s=r.max;if(void 0!==a&&void 0!==s){if(e.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),e.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),e.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),r.normalized){const t=rl(Ho[r.componentType]);e.multiplyScalar(t)}t.max(e)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(t)}t.boundingBox=i;const s=new te;i.getCenter(s.center),s.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=s}(t,e,n),Promise.all(i).then((function(){return void 0!==e.targets?function(t,e,n){let r=!1,i=!1,a=!1;for(let c=0,u=e.length;c<u;c++){const t=e[c];if(void 0!==t.POSITION&&(r=!0),void 0!==t.NORMAL&&(i=!0),void 0!==t.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(t);const s=[],o=[],l=[];for(let c=0,u=e.length;c<u;c++){const u=e[c];if(r){const e=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):t.attributes.position;s.push(e)}if(i){const e=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):t.attributes.normal;o.push(e)}if(a){const e=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):t.attributes.color;l.push(e)}}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(l)]).then((function(e){const n=e[0],s=e[1],o=e[2];return r&&(t.morphAttributes.position=n),i&&(t.morphAttributes.normal=s),a&&(t.morphAttributes.color=o),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}function ol(t,e){let n=t.getIndex();if(null===n){const e=[],r=t.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(let t=0;t<r.count;t++)e.push(t);t.setIndex(e),n=t.getIndex()}const r=n.count-2,i=[];if(2===e)for(let s=1;s<=r;s++)i.push(n.getX(0)),i.push(n.getX(s)),i.push(n.getX(s+1));else for(let s=0;s<r;s++)s%2==0?(i.push(n.getX(s)),i.push(n.getX(s+1)),i.push(n.getX(s+2))):(i.push(n.getX(s+2)),i.push(n.getX(s+1)),i.push(n.getX(s)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=t.clone();return a.setIndex(i),a}var ll=n(7294),cl=n(2576),ul=n(6525),hl=n.n(ul),dl=n(3840);function fl(t,e,n=((t,e)=>t===e)){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}const pl=[];function ml(t,e,n=!1,r={}){for(const a of pl)if(fl(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return a.response;if(!n)throw a.promise}const i={keys:e,equal:r.equal,promise:t(...e).then((t=>i.response=t)).then((()=>{r.lifespan&&r.lifespan>0&&setTimeout((()=>{const t=pl.indexOf(i);-1!==t&&pl.splice(t,1)}),r.lifespan)})).catch((t=>i.error=t))};if(pl.push(i),!n)throw i.promise}var gl,yl;"undefined"!=typeof window&&(null!=(gl=window.document)&&gl.createElement||"ReactNative"===(null==(yl=window.navigator)?void 0:yl.product))?ll.useLayoutEffect:ll.useEffect;class vl extends ll.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}vl.getDerivedStateFromError=()=>({error:!0});const bl="__default";const xl={obj:t=>t===Object(t)&&!xl.arr(t)&&"function"!=typeof t,fun:t=>"function"==typeof t,str:t=>"string"==typeof t,num:t=>"number"==typeof t,boo:t=>"boolean"==typeof t,und:t=>void 0===t,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(xl.str(t)||xl.num(t))return t===e;const a=xl.obj(t);if(a&&"reference"===r)return t===e;const s=xl.arr(t);if(s&&"reference"===n)return t===e;if((s||a)&&t===e)return!0;let o;for(o in t)if(!(o in e))return!1;for(o in i?e:t)if(t[o]!==e[o])return!1;if(xl.und(o)){if(s&&0===t.length&&0===e.length)return!0;if(a&&0===Object.keys(t).length&&0===Object.keys(e).length)return!0;if(t!==e)return!1}return!0}};function _l(t){const e={nodes:{},materials:{}};return t&&t.traverse((t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)})),e}function wl(t,e){const n=t;return(null!=e&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function Sl(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce(((t,e)=>t[e]),t),{target:n,key:i}}return{target:n,key:e}}const El=/-\d+$/;function Ml(t,e,n){if(xl.str(n)){if(El.test(n)){const e=n.replace(El,""),{target:r,key:i}=Sl(t,e);Array.isArray(r[i])||(r[i]=[])}const{target:r,key:i}=Sl(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function Cl(t,e,n){var r,i;if(xl.str(n)){const{target:r,key:i}=Sl(t,n),a=e.__r3f.previousAttach;void 0===a?delete r[i]:r[i]=a}else null==(r=e.__r3f)||null==r.previousAttach||r.previousAttach(t,e);null==(i=e.__r3f)||delete i.previousAttach}function Tl(t,{children:e,key:n,ref:r,...i},{children:a,key:s,ref:o,...l}={},c=!1){var u;const h=null!=(u=null==t?void 0:t.__r3f)?u:{},d=Object.entries(i),f=[];if(c){const t=Object.keys(l);for(let e=0;e<t.length;e++)i.hasOwnProperty(t[e])||d.unshift([t[e],bl+"remove"])}d.forEach((([e,n])=>{var r;if(null!=(r=t.__r3f)&&r.primitive&&"object"===e)return;if(xl.equ(n,l[e]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(e))return f.push([e,n,!0,[]]);let a=[];e.includes("-")&&(a=e.split("-")),f.push([e,n,!1,a]);for(const t in i){const n=i[t];t.startsWith(`${e}-`)&&f.push([t,n,!1,t.split("-")])}}));const p={...i};return h.memoizedProps&&h.memoizedProps.args&&(p.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(p.attach=h.memoizedProps.attach),{memoized:p,changes:f}}function Al(t,e){var n,r,i;const a=null!=(n=t.__r3f)?n:{},s=a.root,o=null!=(r=null==s||null==s.getState?void 0:s.getState())?r:{},{memoized:l,changes:c}=(u=e)&&u.memoized&&u.changes?e:Tl(t,e);var u;const h=a.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let p=0;p<c.length;p++){let[e,n,r,i]=c[p],s=t,u=s[e];if(i.length&&(u=i.reduce(((t,e)=>t[e]),t),!u||!u.set)){const[n,...r]=i.reverse();s=r.reverse().reduce(((t,e)=>t[e]),t),e=n}var d;if(n===bl+"remove")if(u&&u.constructor)n=new u.constructor(...null!=(d=l.args)?d:[]);else if(s.constructor){var f;const t=new s.constructor(...null!=(f=s.__r3f.memoizedProps.args)?f:[]);n=t[u],t.dispose&&t.dispose()}else n=0;if(r)n?a.handlers[e]=n:delete a.handlers[e],a.eventCount=Object.keys(a.handlers).length;else if(u&&u.set&&(u.copy||u instanceof xe)){if(Array.isArray(n))u.fromArray?u.fromArray(n):u.set(...n);else if(u.copy&&n&&n.constructor&&u.constructor.name===n.constructor.name)u.copy(n);else if(void 0!==n){const t=u instanceof _t;!t&&u.setScalar?u.setScalar(n):u instanceof xe&&n instanceof xe?u.mask=n.mask:u.set(n);!0||o.linear||!t||u.convertSRGBToLinear()}}else s[e]=n,!o.linear&&s[e]instanceof Tt&&(s[e].encoding=F);kl(t)}if(a.parent&&o.internal&&t.raycast&&h!==a.eventCount){const e=o.internal.interaction.indexOf(t);e>-1&&o.internal.interaction.splice(e,1),a.eventCount&&o.internal.interaction.push(t)}return c.length&&null!=(i=t.__r3f)&&i.parent&&Ll(t),t}function kl(t){var e,n;const r=null==(e=t.__r3f)||null==(n=e.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function Ll(t){null==t.onUpdate||t.onUpdate(t)}function Pl(t,e,n,r){const i=n.get(e);i&&(n.delete(e),0===n.size&&(t.delete(r),i.target.releasePointerCapture(r)))}let Rl={};let Il,Dl=new Set,Bl=new Set,Ol=new Set;function Nl(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function Fl(t,e){switch(t){case"before":return Nl(Dl,e);case"after":return Nl(Bl,e);case"tail":return Nl(Ol,e)}}let zl,Ul;function Gl(t,e,n){let r=e.clock.getDelta();for("never"===e.frameloop&&"number"==typeof t&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),zl=e.internal.subscribers,Il=0;Il<zl.length;Il++)Ul=zl[Il],Ul.ref.current(Ul.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),"always"===e.frameloop?1:e.internal.frames}function Hl(t,e){return function(n,...r){const i=new n;return t&&t(i),Promise.all(r.map((t=>new Promise(((n,r)=>i.load(t,(t=>{t.scene&&Object.assign(t,_l(t.scene)),n(t)}),e,(e=>r(new Error(`Could not load ${t}: ${e.message})`)))))))))}}function jl(t,e,n,r){const i=Array.isArray(e)?e:[e],a=((t,e,n)=>ml(t,e,!1,n))(Hl(n,r),[t,...i],{equal:xl.equ});return Array.isArray(e)?a:a[0]}jl.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return((t,e,n)=>{ml(t,e,!0,n)})(Hl(n),[t,...r])},jl.clear=function(t,e){return(t=>{if(void 0===t||0===t.length)pl.splice(0,pl.length);else{const e=pl.find((e=>fl(t,e.keys,e.equal)));if(e){const t=pl.indexOf(e);-1!==t&&pl.splice(t,1)}}})([t,...Array.isArray(e)?e:[e]])};const Vl=new Map,{invalidate:Wl,advance:$l}=function(t){let e,n,r,i=!1;function a(s){n=requestAnimationFrame(a),i=!0,e=0,Fl("before",s);for(const n of t.values()){var o;r=n.store.getState(),!r.internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(o=r.gl.xr)&&o.isPresenting||(e+=Gl(s,r))}if(Fl("after",s),0===e)return Fl("tail",s),i=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function e(n,r=1){var s;if(!n)return t.forEach((t=>e(t.store.getState())),r);null!=(s=n.gl.xr)&&s.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+r),i||(i=!0,requestAnimationFrame(a)))},advance:function(e,n=!0,r,i){if(n&&Fl("before",e),r)Gl(e,r,i);else for(const a of t.values())Gl(e,a.store.getState());n&&Fl("after",e)}}}(Vl),{reconciler:Yl,applyProps:ql}=function(t,e){function n(t,{args:e=[],attach:n,...r},i){let a,s=`${t[0].toUpperCase()}${t.slice(1)}`;if("primitive"===t){if(void 0===r.object)throw new Error("R3F: Primitives without 'object' are invalid!");a=wl(r.object,{type:t,root:i,attach:n,primitive:!0})}else{const r=Rl[s];if(!r)throw new Error(`R3F: ${s} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(e))throw new Error("R3F: The args prop must be an array!");a=wl(new r(...e),{type:t,root:i,attach:n,memoizedProps:{args:e}})}return void 0===a.__r3f.attach&&(a instanceof cn?a.__r3f.attach="geometry":a instanceof Ye&&(a.__r3f.attach="material")),"inject"!==s&&Al(a,r),a}function r(t,e){let n=!1;var r,i;e&&(null!=(r=e.__r3f)&&r.attach?Ml(t,e,e.__r3f.attach):e.isObject3D&&t.isObject3D&&(t.add(e),n=!0),n||null==(i=t.__r3f)||i.objects.push(e),e.__r3f||wl(e,{}),e.__r3f.parent=t,Ll(e),kl(e))}function i(t,e,n){let r=!1;if(e){var i,a;if(null!=(i=e.__r3f)&&i.attach)Ml(t,e,e.__r3f.attach);else if(e.isObject3D&&t.isObject3D){e.parent=t,e.dispatchEvent({type:"added"});const i=t.children.filter((t=>t!==e)),a=i.indexOf(n);t.children=[...i.slice(0,a),e,...i.slice(a)],r=!0}r||null==(a=t.__r3f)||a.objects.push(e),e.__r3f||wl(e,{}),e.__r3f.parent=t,Ll(e),kl(e)}}function a(t,e,n=!1){t&&[...t].forEach((t=>s(e,t,n)))}function s(t,e,n){if(e){var r,i,s;if(e.__r3f&&(e.__r3f.parent=null),null!=(r=t.__r3f)&&r.objects&&(t.__r3f.objects=t.__r3f.objects.filter((t=>t!==e))),null!=(i=e.__r3f)&&i.attach)Cl(t,e,e.__r3f.attach);else if(e.isObject3D&&t.isObject3D){var o;t.remove(e),null!=(o=e.__r3f)&&o.root&&function(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter((t=>t!==e)),n.initialHits=n.initialHits.filter((t=>t!==e)),n.hovered.forEach(((t,r)=>{t.eventObject!==e&&t.object!==e||n.hovered.delete(r)})),n.capturedMap.forEach(((t,r)=>{Pl(n.capturedMap,e,t,r)}))}(e.__r3f.root,e)}const c=null==(s=e.__r3f)?void 0:s.primitive,u=void 0===n?null!==e.dispose&&!c:n;var l;if(!c)a(null==(l=e.__r3f)?void 0:l.objects,e,u),a(e.children,e,u);e.__r3f&&(delete e.__r3f.root,delete e.__r3f.objects,delete e.__r3f.handlers,delete e.__r3f.memoizedProps,c||delete e.__r3f),u&&e.dispose&&"Scene"!==e.type&&(0,dl.unstable_scheduleCallback)(dl.unstable_IdlePriority,(()=>{try{e.dispose()}catch(t){}})),kl(t)}}const o=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:hl()({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(t,e)=>{if(!e)return;const n=t.getState().scene;n.__r3f&&(n.__r3f.root=t,r(n,e))},removeChildFromContainer:(t,e)=>{e&&s(t.getState().scene,e)},insertInContainerBefore:(t,e,n)=>{if(!e||!n)return;const r=t.getState().scene;r.__r3f&&i(r,e,n)},getRootHostContext:()=>null,getChildHostContext:t=>t,finalizeInitialChildren(t){var e;const n=null!=(e=null==t?void 0:t.__r3f)?e:{};return Boolean(n.handlers)},prepareUpdate(t,e,n,r){if(t.__r3f.primitive&&r.object&&r.object!==t)return[!0];{const{args:e=[],children:i,...a}=r,{args:s=[],children:o,...l}=n;if(!Array.isArray(e))throw new Error("R3F: the args prop must be an array!");if(e.some(((t,e)=>t!==s[e])))return[!0];const c=Tl(t,a,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(t,[e,i],a,o,l,c){e?function(t,e,i,a){var o;const l=null==(o=t.__r3f)?void 0:o.parent;if(!l)return;const c=n(e,i,t.__r3f.root);if(t.children){for(const e of t.children)e.__r3f&&r(c,e);t.children=t.children.filter((t=>!t.__r3f))}t.__r3f.objects.forEach((t=>r(c,t))),t.__r3f.objects=[],t.__r3f.autoRemovedBeforeAppend||s(l,t),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),r(l,c),c.raycast&&c.__r3f.eventCount&&c.__r3f.root.getState().internal.interaction.push(c);[a,a.alternate].forEach((t=>{null!==t&&(t.stateNode=c,t.ref&&("function"==typeof t.ref?t.ref(c):t.ref.current=c))}))}(t,a,l,c):Al(t,i)},commitMount(t,e,n,r){var i;const a=null!=(i=t.__r3f)?i:{};t.raycast&&a.handlers&&a.eventCount&&t.__r3f.root.getState().internal.interaction.push(t)},getPublicInstance:t=>t,prepareForCommit:()=>null,preparePortalMount:t=>wl(t.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(t){var e;const{attach:n,parent:r}=null!=(e=t.__r3f)?e:{};n&&r&&Cl(r,t,n),t.isObject3D&&(t.visible=!1),kl(t)},unhideInstance(t,e){var n;const{attach:r,parent:i}=null!=(n=t.__r3f)?n:{};r&&i&&Ml(i,t,r),(t.isObject3D&&null==e.visible||e.visible)&&(t.visible=!0),kl(t)},createTextInstance:o,hideTextInstance:o,unhideTextInstance:o,getCurrentEventPriority:()=>e?e():cl.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&xl.fun(performance.now)?performance.now:xl.fun(Date.now)?Date.now:()=>0,scheduleTimeout:xl.fun(setTimeout)?setTimeout:void 0,cancelTimeout:xl.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Al}}(0,(function(){var t;const e="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!e)return cl.DefaultEventPriority;switch(null==(t=e.event)?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return cl.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return cl.ContinuousEventPriority;default:return cl.DefaultEventPriority}}));Yl.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ll.version});ll.unstable_act;let Xl=null;function Jl(t,e,n){return r=>{n&&n(r),t&&(Xl||(Xl=new no),Xl.setDecoderPath("string"==typeof t?t:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),r.setDRACOLoader(Xl)),e&&r.setMeshoptDecoder(ao())}}function Zl(t,e=!0,n=!0,r){return jl(so,t,Jl(e,n,r))}Zl.preload=(t,e=!0,n=!0,r)=>jl.preload(so,t,Jl(e,n,r)),Zl.clear=t=>jl.clear(so,t)},2503:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var r=n(7462),i=n(7294),a=n(6010),s=n(5999),o=n(6668);const l="anchorWithStickyNavbar_LWe7",c="anchorWithHideOnScrollNavbar_WYt5";function u(t){let{as:e,id:n,...u}=t;const{navbar:{hideOnScroll:h}}=(0,o.L)();return"h1"!==e&&n?i.createElement(e,(0,r.Z)({},u,{className:(0,a.Z)("anchor",h?c:l),id:n}),u.children,i.createElement("a",{className:"hash-link",href:`#${n}`,title:(0,s.I)({id:"theme.common.headingLinkTitle",message:"Direct link to heading",description:"Title for link to heading"})},"\u200b")):i.createElement(e,(0,r.Z)({},u,{id:void 0}))}},4912:(t,e,n)=>{"use strict";n.d(e,{Z:()=>wi});var r=n(7294),i=n(3905),a=n(7462),s=n(5742);var o=n(6010),l=n(2389),c=n(460),u=n(7410);const h={plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","atrule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]};var d={Prism:u.Z,theme:h};function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(){return p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p.apply(this,arguments)}var m=/\r\n|\r|\n/,g=function(t){0===t.length?t.push({types:["plain"],content:"\n",empty:!0}):1===t.length&&""===t[0].content&&(t[0].content="\n",t[0].empty=!0)},y=function(t,e){var n=t.length;return n>0&&t[n-1]===e?t:t.concat(e)},v=function(t,e){var n=t.plain,r=Object.create(null),i=t.styles.reduce((function(t,n){var r=n.languages,i=n.style;return r&&!r.includes(e)||n.types.forEach((function(e){var n=p({},t[e],i);t[e]=n})),t}),r);return i.root=n,i.plain=p({},n,{backgroundColor:null}),i};function b(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}var x=function(t){function e(){for(var e=this,n=[],r=arguments.length;r--;)n[r]=arguments[r];t.apply(this,n),f(this,"getThemeDict",(function(t){if(void 0!==e.themeDict&&t.theme===e.prevTheme&&t.language===e.prevLanguage)return e.themeDict;e.prevTheme=t.theme,e.prevLanguage=t.language;var n=t.theme?v(t.theme,t.language):void 0;return e.themeDict=n})),f(this,"getLineProps",(function(t){var n=t.key,r=t.className,i=t.style,a=p({},b(t,["key","className","style","line"]),{className:"token-line",style:void 0,key:void 0}),s=e.getThemeDict(e.props);return void 0!==s&&(a.style=s.plain),void 0!==i&&(a.style=void 0!==a.style?p({},a.style,i):i),void 0!==n&&(a.key=n),r&&(a.className+=" "+r),a})),f(this,"getStyleForToken",(function(t){var n=t.types,r=t.empty,i=n.length,a=e.getThemeDict(e.props);if(void 0!==a){if(1===i&&"plain"===n[0])return r?{display:"inline-block"}:void 0;if(1===i&&!r)return a[n[0]];var s=r?{display:"inline-block"}:{},o=n.map((function(t){return a[t]}));return Object.assign.apply(Object,[s].concat(o))}})),f(this,"getTokenProps",(function(t){var n=t.key,r=t.className,i=t.style,a=t.token,s=p({},b(t,["key","className","style","token"]),{className:"token "+a.types.join(" "),children:a.content,style:e.getStyleForToken(a),key:void 0});return void 0!==i&&(s.style=void 0!==s.style?p({},s.style,i):i),void 0!==n&&(s.key=n),r&&(s.className+=" "+r),s})),f(this,"tokenize",(function(t,e,n,r){var i={code:e,grammar:n,language:r,tokens:[]};t.hooks.run("before-tokenize",i);var a=i.tokens=t.tokenize(i.code,i.grammar,i.language);return t.hooks.run("after-tokenize",i),a}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.props,e=t.Prism,n=t.language,r=t.code,i=t.children,a=this.getThemeDict(this.props),s=e.languages[n],o=function(t){for(var e=[[]],n=[t],r=[0],i=[t.length],a=0,s=0,o=[],l=[o];s>-1;){for(;(a=r[s]++)<i[s];){var c=void 0,u=e[s],h=n[s][a];if("string"==typeof h?(u=s>0?u:["plain"],c=h):(u=y(u,h.type),h.alias&&(u=y(u,h.alias)),c=h.content),"string"==typeof c){var d=c.split(m),f=d.length;o.push({types:u,content:d[0]});for(var p=1;p<f;p++)g(o),l.push(o=[]),o.push({types:u,content:d[p]})}else s++,e.push(u),n.push(c),r.push(0),i.push(c.length)}s--,e.pop(),n.pop(),r.pop(),i.pop()}return g(o),l}(void 0!==s?this.tokenize(e,r,s,n):[r]);return i({tokens:o,className:"prism-code language-"+n,style:void 0!==a?a.root:{},getLineProps:this.getLineProps,getTokenProps:this.getTokenProps})},e}(r.Component);const _=x;var w={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},S="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",E={5:S,6:S+" const class extends export import super"},M=/^in(stanceof)?$/,C="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7b9\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",T="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",A=new RegExp("["+C+"]"),k=new RegExp("["+C+T+"]");C=T=null;var L=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],P=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function R(t,e){for(var n=65536,r=0;r<e.length;r+=2){if((n+=e[r])>t)return!1;if((n+=e[r+1])>=t)return!0}}function I(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&A.test(String.fromCharCode(t)):!1!==e&&R(t,L)))}function D(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&k.test(String.fromCharCode(t)):!1!==e&&(R(t,L)||R(t,P)))))}var B=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function O(t,e){return new B(t,{beforeExpr:!0,binop:e})}var N={beforeExpr:!0},F={startsExpr:!0},z={};function U(t,e){return void 0===e&&(e={}),e.keyword=t,z[t]=new B(t,e)}var G={num:new B("num",F),regexp:new B("regexp",F),string:new B("string",F),name:new B("name",F),eof:new B("eof"),bracketL:new B("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new B("]"),braceL:new B("{",{beforeExpr:!0,startsExpr:!0}),braceR:new B("}"),parenL:new B("(",{beforeExpr:!0,startsExpr:!0}),parenR:new B(")"),comma:new B(",",N),semi:new B(";",N),colon:new B(":",N),dot:new B("."),question:new B("?",N),arrow:new B("=>",N),template:new B("template"),invalidTemplate:new B("invalidTemplate"),ellipsis:new B("...",N),backQuote:new B("`",F),dollarBraceL:new B("${",{beforeExpr:!0,startsExpr:!0}),eq:new B("=",{beforeExpr:!0,isAssign:!0}),assign:new B("_=",{beforeExpr:!0,isAssign:!0}),incDec:new B("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new B("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:O("||",1),logicalAND:O("&&",2),bitwiseOR:O("|",3),bitwiseXOR:O("^",4),bitwiseAND:O("&",5),equality:O("==/!=/===/!==",6),relational:O("</>/<=/>=",7),bitShift:O("<</>>/>>>",8),plusMin:new B("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:O("%",10),star:O("*",10),slash:O("/",10),starstar:new B("**",{beforeExpr:!0}),_break:U("break"),_case:U("case",N),_catch:U("catch"),_continue:U("continue"),_debugger:U("debugger"),_default:U("default",N),_do:U("do",{isLoop:!0,beforeExpr:!0}),_else:U("else",N),_finally:U("finally"),_for:U("for",{isLoop:!0}),_function:U("function",F),_if:U("if"),_return:U("return",N),_switch:U("switch"),_throw:U("throw",N),_try:U("try"),_var:U("var"),_const:U("const"),_while:U("while",{isLoop:!0}),_with:U("with"),_new:U("new",{beforeExpr:!0,startsExpr:!0}),_this:U("this",F),_super:U("super",F),_class:U("class",F),_extends:U("extends",N),_export:U("export"),_import:U("import"),_null:U("null",F),_true:U("true",F),_false:U("false",F),_in:U("in",{beforeExpr:!0,binop:7}),_instanceof:U("instanceof",{beforeExpr:!0,binop:7}),_typeof:U("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:U("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:U("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},H=/\r\n?|\n|\u2028|\u2029/,j=new RegExp(H.source,"g");function V(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var W=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,$=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Y=Object.prototype,q=Y.hasOwnProperty,X=Y.toString;function J(t,e){return q.call(t,e)}var Z=Array.isArray||function(t){return"[object Array]"===X.call(t)};function K(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var Q=function(t,e){this.line=t,this.column=e};Q.prototype.offset=function(t){return new Q(this.line,this.column+t)};var tt=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function et(t,e){for(var n=1,r=0;;){j.lastIndex=r;var i=j.exec(t);if(!(i&&i.index<e))return new Q(n,e-r);++n,r=i.index+i[0].length}}var nt={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function rt(t,e){return 2|(t?4:0)|(e?8:0)}var it=function(t,e,n){this.options=t=function(t){var e={};for(var n in nt)e[n]=t&&J(t,n)?t[n]:nt[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),Z(e.onToken)){var r=e.onToken;e.onToken=function(t){return r.push(t)}}return Z(e.onComment)&&(e.onComment=function(t,e){return function(n,r,i,a,s,o){var l={type:n?"Block":"Line",value:r,start:i,end:a};t.locations&&(l.loc=new tt(this,s,o)),t.ranges&&(l.range=[i,a]),e.push(l)}}(e,e.onComment)),e}(t),this.sourceFile=t.sourceFile,this.keywords=K(E[t.ecmaVersion>=6?6:5]);var r="";if(!t.allowReserved){for(var i=t.ecmaVersion;!(r=w[i]);i--);"module"===t.sourceType&&(r+=" await")}this.reservedWords=K(r);var a=(r?r+" ":"")+w.strict;this.reservedWordsStrict=K(a),this.reservedWordsStrictBind=K(a+" "+w.strictBind),this.input=String(e),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(H).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=G.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},at={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};it.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},at.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},at.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},at.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},at.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},at.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},at.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},it.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},it.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,r=0;r<t.length;r++)n=t[r](n);return n},it.parse=function(t,e){return new this(e,t).parse()},it.parseExpressionAt=function(t,e,n){var r=new this(n,t,e);return r.nextToken(),r.parseExpression()},it.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(it.prototype,at);var st=it.prototype,ot=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function lt(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}st.strictDirective=function(t){for(;;){$.lastIndex=t,t+=$.exec(this.input)[0].length;var e=ot.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2]))return!0;$.lastIndex=t+=e[0].length,t+=$.exec(this.input)[0].length,";"===this.input[t]&&t++}},st.eat=function(t){return this.type===t&&(this.next(),!0)},st.isContextual=function(t){return this.type===G.name&&this.value===t&&!this.containsEsc},st.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},st.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},st.canInsertSemicolon=function(){return this.type===G.eof||this.type===G.braceR||H.test(this.input.slice(this.lastTokEnd,this.start))},st.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},st.semicolon=function(){this.eat(G.semi)||this.insertSemicolon()||this.unexpected()},st.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},st.expect=function(t){this.eat(t)||this.unexpected()},st.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},st.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},st.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,r=t.doubleProto;if(!e)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},st.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},st.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var ct=it.prototype;ct.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==G.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var a=i[r];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),this.options.ecmaVersion>=6&&(t.sourceType=this.options.sourceType),this.finishNode(t,"Program")};var ut={kind:"loop"},ht={kind:"switch"};ct.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;$.lastIndex=this.pos;var e=$.exec(this.input),n=this.pos+e[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(t)return!1;if(123===r)return!0;if(I(r,!0)){for(var i=n+1;D(this.input.charCodeAt(i),!0);)++i;var a=this.input.slice(n,i);if(!M.test(a))return!0}return!1},ct.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;$.lastIndex=this.pos;var t=$.exec(this.input),e=this.pos+t[0].length;return!(H.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&D(this.input.charAt(e+8)))},ct.parseStatement=function(t,e,n){var r,i=this.type,a=this.startNode();switch(this.isLet(t)&&(i=G._var,r="let"),i){case G._break:case G._continue:return this.parseBreakContinueStatement(a,i.keyword);case G._debugger:return this.parseDebuggerStatement(a);case G._do:return this.parseDoStatement(a);case G._for:return this.parseForStatement(a);case G._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!t);case G._class:return t&&this.unexpected(),this.parseClass(a,!0);case G._if:return this.parseIfStatement(a);case G._return:return this.parseReturnStatement(a);case G._switch:return this.parseSwitchStatement(a);case G._throw:return this.parseThrowStatement(a);case G._try:return this.parseTryStatement(a);case G._const:case G._var:return r=r||this.value,t&&"var"!==r&&this.unexpected(),this.parseVarStatement(a,r);case G._while:return this.parseWhileStatement(a);case G._with:return this.parseWithStatement(a);case G.braceL:return this.parseBlock(!0,a);case G.semi:return this.parseEmptyStatement(a);case G._export:case G._import:return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===G._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!t);var s=this.value,o=this.parseExpression();return i===G.name&&"Identifier"===o.type&&this.eat(G.colon)?this.parseLabeledStatement(a,s,o,t):this.parseExpressionStatement(a,o)}},ct.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(G.semi)||this.insertSemicolon()?t.label=null:this.type!==G.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(t.label&&n)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},ct.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},ct.parseDoStatement=function(t){return this.next(),this.labels.push(ut),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(G._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(G.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},ct.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ut),this.enterScope(0),this.expect(G.parenL),this.type===G.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===G._var||this.type===G._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),!(this.type===G._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==i&&r.declarations[0].init?(e>-1&&this.unexpected(e),this.parseFor(t,r)):(this.options.ecmaVersion>=9&&(this.type===G._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,r))}var a=new lt,s=this.parseExpression(!0,a);return this.type===G._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===G._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(s,!1,a),this.checkLVal(s),this.parseForIn(t,s)):(this.checkExpressionErrors(a,!0),e>-1&&this.unexpected(e),this.parseFor(t,s))},ct.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,ft|(n?0:pt),!1,e)},ct.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(G._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},ct.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(G.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},ct.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(G.braceL),this.labels.push(ht),this.enterScope(0);for(var n=!1;this.type!==G.braceR;)if(this.type===G._case||this.type===G._default){var r=this.type===G._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(G.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},ct.parseThrowStatement=function(t){return this.next(),H.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var dt=[];ct.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===G._catch){var e=this.startNode();if(this.next(),this.eat(G.parenL)){e.param=this.parseBindingAtom();var n="Identifier"===e.param.type;this.enterScope(n?32:0),this.checkLVal(e.param,n?4:2),this.expect(G.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(G._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},ct.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},ct.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(ut),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},ct.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},ct.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},ct.parseLabeledStatement=function(t,e,n,r){for(var i=0,a=this.labels;i<a.length;i+=1)a[i].name===e&&this.raise(n.start,"Label '"+e+"' is already declared");for(var s=this.type.isLoop?"loop":this.type===G._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==t.start)break;l.statementStart=this.start,l.kind=s}return this.labels.push({name:e,kind:s,statementStart:this.start}),t.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},ct.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},ct.parseBlock=function(t,e){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(G.braceL),t&&this.enterScope(0);!this.eat(G.braceR);){var n=this.parseStatement(null);e.body.push(n)}return t&&this.exitScope(),this.finishNode(e,"BlockStatement")},ct.parseFor=function(t,e){return t.init=e,this.expect(G.semi),t.test=this.type===G.semi?null:this.parseExpression(),this.expect(G.semi),t.update=this.type===G.parenR?null:this.parseExpression(),this.expect(G.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},ct.parseForIn=function(t,e){var n=this.type===G._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===n&&("AssignmentPattern"===e.type||"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(this.strict||"Identifier"!==e.declarations[0].id.type))&&this.raise(e.start,"Invalid assignment in for-in loop head"),t.left=e,t.right="ForInStatement"===n?this.parseExpression():this.parseMaybeAssign(),this.expect(G.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n)},ct.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(G.eq)?r.init=this.parseMaybeAssign(e):"const"!==n||this.type===G._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||e&&(this.type===G._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(G.comma))break}return t},ct.parseVarId=function(t,e){"const"!==e&&"let"!==e||!this.isContextual("let")||this.raiseRecoverable(this.start,"let is disallowed as a lexically bound name"),t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?1:2,!1)};var ft=1,pt=2;ct.parseFunction=function(t,e,n,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===G.star&&e&pt&&this.unexpected(),t.generator=this.eat(G.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&ft&&(t.id=4&e&&this.type!==G.name?null:this.parseIdent(),!t.id||e&pt||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,a=this.awaitPos,s=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(rt(t.async,t.generator)),e&ft||(t.id=this.type===G.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=s,this.finishNode(t,e&ft?"FunctionDeclaration":"FunctionExpression")},ct.parseFunctionParams=function(t){this.expect(G.parenL),t.params=this.parseBindingList(G.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},ct.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var r=this.startNode(),i=!1;for(r.body=[],this.expect(G.braceL);!this.eat(G.braceR);){var a=this.parseClassElement(null!==t.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(i&&this.raise(a.start,"Duplicate constructor in the same class"),i=!0))}return t.body=this.finishNode(r,"ClassBody"),this.strict=n,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},ct.parseClassElement=function(t){var e=this;if(this.eat(G.semi))return null;var n=this.startNode(),r=function(t,r){void 0===r&&(r=!1);var i=e.start,a=e.startLoc;return!(!e.eatContextual(t)||(e.type===G.parenL||r&&e.canInsertSemicolon())&&(n.key&&e.unexpected(),n.computed=!1,n.key=e.startNodeAt(i,a),n.key.name=t,e.finishNode(n.key,"Identifier"),1))};n.kind="method",n.static=r("static");var i=this.eat(G.star),a=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(a=!0,i=this.options.ecmaVersion>=9&&this.eat(G.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var s=n.key,o=!1;return n.computed||n.static||!("Identifier"===s.type&&"constructor"===s.name||"Literal"===s.type&&"constructor"===s.value)?n.static&&"Identifier"===s.type&&"prototype"===s.name&&this.raise(s.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(s.start,"Constructor can't have get/set modifier"),i&&this.raise(s.start,"Constructor can't be a generator"),a&&this.raise(s.start,"Constructor can't be an async method"),n.kind="constructor",o=t),this.parseClassMethod(n,i,a,o),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},ct.parseClassMethod=function(t,e,n,r){return t.value=this.parseMethod(e,n,r),this.finishNode(t,"MethodDefinition")},ct.parseClassId=function(t,e){this.type===G.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},ct.parseClassSuper=function(t){t.superClass=this.eat(G._extends)?this.parseExprSubscripts():null},ct.parseExport=function(t,e){if(this.next(),this.eat(G.star))return this.expectContextual("from"),this.type!==G.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(G._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===G._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(r,4|ft,!1,n)}else if(this.type===G._class){var i=this.startNode();t.declaration=this.parseClass(i,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==G.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var a=0,s=t.specifiers;a<s.length;a+=1){var o=s[a];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},ct.checkExport=function(t,e,n){t&&(J(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},ct.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===n)for(var r=0,i=e.properties;r<i.length;r+=1)this.checkPatternExport(t,i[r]);else if("ArrayPattern"===n)for(var a=0,s=e.elements;a<s.length;a+=1){var o=s[a];o&&this.checkPatternExport(t,o)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},ct.checkVariableExport=function(t,e){if(t)for(var n=0,r=e;n<r.length;n+=1)this.checkPatternExport(t,r[n].id)},ct.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},ct.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(G.braceL);!this.eat(G.braceR);){if(n)n=!1;else if(this.expect(G.comma),this.afterTrailingComma(G.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(t,r.exported.name,r.exported.start),e.push(this.finishNode(r,"ExportSpecifier"))}return e},ct.parseImport=function(t){return this.next(),this.type===G.string?(t.specifiers=dt,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===G.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},ct.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===G.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(G.comma))return t}if(this.type===G.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t}for(this.expect(G.braceL);!this.eat(G.braceR);){if(e)e=!1;else if(this.expect(G.comma),this.afterTrailingComma(G.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),t.push(this.finishNode(i,"ImportSpecifier"))}return t},ct.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},ct.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var mt=it.prototype;mt.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,e),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},mt.toAssignableList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];i&&this.toAssignable(i,e)}if(n){var a=t[n-1];6===this.options.ecmaVersion&&e&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return t},mt.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},mt.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==G.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},mt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case G.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(G.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case G.braceL:return this.parseObj(!0)}return this.parseIdent()},mt.parseBindingList=function(t,e,n){for(var r=[],i=!0;!this.eat(t);)if(i?i=!1:this.expect(G.comma),e&&this.type===G.comma)r.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===G.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===G.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var s=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(s),r.push(s)}return r},mt.parseBindingListItem=function(t){return t},mt.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(G.eq))return n;var r=this.startNodeAt(t,e);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},mt.checkLVal=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(J(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),0!==e&&5!==e&&this.declareName(t.name,e,t.start);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=t.properties;r<i.length;r+=1)this.checkLVal(i[r],e,n);break;case"Property":this.checkLVal(t.value,e,n);break;case"ArrayPattern":for(var a=0,s=t.elements;a<s.length;a+=1){var o=s[a];o&&this.checkLVal(o,e,n)}break;case"AssignmentPattern":this.checkLVal(t.left,e,n);break;case"RestElement":this.checkLVal(t.argument,e,n);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var gt=it.prototype;gt.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r,i=t.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var a=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===a&&(e.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),e.proto=!0);else{var s=e[r="$"+r];s?("init"===a?this.strict&&s.init||s.get||s.set:s.init||s[a])&&this.raiseRecoverable(i.start,"Redefinition of property"):s=e[r]={init:!1,get:!1,set:!1},s[a]=!0}}},gt.parseExpression=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(t,e);if(this.type===G.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(G.comma);)a.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(a,"SequenceExpression")}return i},gt.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var r=!1,i=-1,a=-1,s=-1;e?(i=e.parenthesizedAssign,a=e.trailingComma,s=e.shorthandAssign,e.parenthesizedAssign=e.trailingComma=e.shorthandAssign=-1):(e=new lt,r=!0);var o=this.start,l=this.startLoc;this.type!==G.parenL&&this.type!==G.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(t,e);if(n&&(c=n.call(this,c,o,l)),this.type.isAssign){var u=this.startNodeAt(o,l);return u.operator=this.value,u.left=this.type===G.eq?this.toAssignable(c,!1,e):c,r||lt.call(e),e.shorthandAssign=-1,this.checkLVal(c),this.next(),u.right=this.parseMaybeAssign(t),this.finishNode(u,"AssignmentExpression")}return r&&this.checkExpressionErrors(e,!0),i>-1&&(e.parenthesizedAssign=i),a>-1&&(e.trailingComma=a),s>-1&&(e.shorthandAssign=s),c},gt.parseMaybeConditional=function(t,e){var n=this.start,r=this.startLoc,i=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return i;if(this.eat(G.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(G.colon),a.alternate=this.parseMaybeAssign(t),this.finishNode(a,"ConditionalExpression")}return i},gt.parseExprOps=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,t)},gt.parseExprOp=function(t,e,n,r,i){var a=this.type.binop;if(null!=a&&(!i||this.type!==G._in)&&a>r){var s=this.type===G.logicalOR||this.type===G.logicalAND,o=this.value;this.next();var l=this.start,c=this.startLoc,u=this.parseExprOp(this.parseMaybeUnary(null,!1),l,c,a,i),h=this.buildBinary(e,n,t,u,o,s);return this.parseExprOp(h,e,n,r,i)}return t},gt.buildBinary=function(t,e,n,r,i,a){var s=this.startNodeAt(t,e);return s.left=n,s.operator=i,s.right=r,this.finishNode(s,a?"LogicalExpression":"BinaryExpression")},gt.parseMaybeUnary=function(t,e){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.type.prefix){var a=this.startNode(),s=this.type===G.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),s?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):e=!0,n=this.finishNode(a,s?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,i);o.operator=this.value,o.prefix=!1,o.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(o,"UpdateExpression")}}return!e&&this.eat(G.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},gt.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,r=this.parseExprAtom(t),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||i)return r;var a=this.parseSubscripts(r,e,n);return t&&"MemberExpression"===a.type&&(t.parenthesizedAssign>=a.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=a.start&&(t.parenthesizedBind=-1)),a},gt.parseSubscripts=function(t,e,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end);;){var a=this.parseSubscript(t,e,n,r,i);if(a===t||"ArrowFunctionExpression"===a.type)return a;t=a}},gt.parseSubscript=function(t,e,n,r,i){var a=this.eat(G.bracketL);if(a||this.eat(G.dot)){var s=this.startNodeAt(e,n);s.object=t,s.property=a?this.parseExpression():this.parseIdent(!0),s.computed=!!a,a&&this.expect(G.bracketR),t=this.finishNode(s,"MemberExpression")}else if(!r&&this.eat(G.parenL)){var o=new lt,l=this.yieldPos,c=this.awaitPos,u=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(G.parenR,this.options.ecmaVersion>=8,!1,o);if(i&&!this.canInsertSemicolon()&&this.eat(G.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=c,this.awaitIdentPos=u,this.parseArrowExpression(this.startNodeAt(e,n),h,!0);this.checkExpressionErrors(o,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=c||this.awaitPos,this.awaitIdentPos=u||this.awaitIdentPos;var d=this.startNodeAt(e,n);d.callee=t,d.arguments=h,t=this.finishNode(d,"CallExpression")}else if(this.type===G.backQuote){var f=this.startNodeAt(e,n);f.tag=t,f.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(f,"TaggedTemplateExpression")}return t},gt.parseExprAtom=function(t){this.type===G.slash&&this.readRegexp();var e,n=this.potentialArrowAt===this.start;switch(this.type){case G._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==G.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==G.dot&&this.type!==G.bracketL&&this.type!==G.parenL&&this.unexpected(),this.finishNode(e,"Super");case G._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case G.name:var r=this.start,i=this.startLoc,a=this.containsEsc,s=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===s.name&&!this.canInsertSemicolon()&&this.eat(G._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(G.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[s],!1);if(this.options.ecmaVersion>=8&&"async"===s.name&&this.type===G.name&&!a)return s=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(G.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[s],!0)}return s;case G.regexp:var o=this.value;return(e=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},e;case G.num:case G.string:return this.parseLiteral(this.value);case G._null:case G._true:case G._false:return(e=this.startNode()).value=this.type===G._null?null:this.type===G._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case G.parenL:var l=this.start,c=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(t.parenthesizedAssign=l),t.parenthesizedBind<0&&(t.parenthesizedBind=l)),c;case G.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(G.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case G.braceL:return this.parseObj(!1,t);case G._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case G._class:return this.parseClass(this.startNode(),!1);case G._new:return this.parseNew();case G.backQuote:return this.parseTemplate();default:this.unexpected()}},gt.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(e,"Literal")},gt.parseParenExpression=function(){this.expect(G.parenL);var t=this.parseExpression();return this.expect(G.parenR),t},gt.parseParenAndDistinguishExpression=function(t){var e,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,s=this.start,o=this.startLoc,l=[],c=!0,u=!1,h=new lt,d=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==G.parenR;){if(c?c=!1:this.expect(G.comma),i&&this.afterTrailingComma(G.parenR,!0)){u=!0;break}if(this.type===G.ellipsis){a=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===G.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var p=this.start,m=this.startLoc;if(this.expect(G.parenR),t&&!this.canInsertSemicolon()&&this.eat(G.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=f,this.parseParenArrowList(n,r,l);l.length&&!u||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=f||this.awaitPos,l.length>1?((e=this.startNodeAt(s,o)).expressions=l,this.finishNodeAt(e,"SequenceExpression",p,m)):e=l[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=e,this.finishNode(g,"ParenthesizedExpression")}return e},gt.parseParenItem=function(t){return t},gt.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var yt=[];gt.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(G.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||n)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var r=this.start,i=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),t.arguments=this.eat(G.parenL)?this.parseExprList(G.parenR,this.options.ecmaVersion>=8,!1):yt,this.finishNode(t,"NewExpression")},gt.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===G.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===G.backQuote,this.finishNode(n,"TemplateElement")},gt.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(n.quasis=[r];!r.tail;)this.type===G.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(G.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(G.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},gt.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===G.name||this.type===G.num||this.type===G.string||this.type===G.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===G.star)&&!H.test(this.input.slice(this.lastTokEnd,this.start))},gt.parseObj=function(t,e){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(G.braceR);){if(r)r=!1;else if(this.expect(G.comma),this.afterTrailingComma(G.braceR))break;var a=this.parseProperty(t,e);t||this.checkPropClash(a,i,e),n.properties.push(a)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},gt.parseProperty=function(t,e){var n,r,i,a,s=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(G.ellipsis))return t?(s.argument=this.parseIdent(!1),this.type===G.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(s,"RestElement")):(this.type===G.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),s.argument=this.parseMaybeAssign(!1,e),this.type===G.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(s,"SpreadElement"));this.options.ecmaVersion>=6&&(s.method=!1,s.shorthand=!1,(t||e)&&(i=this.start,a=this.startLoc),t||(n=this.eat(G.star)));var o=this.containsEsc;return this.parsePropertyName(s),!t&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(s)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(G.star),this.parsePropertyName(s,e)):r=!1,this.parsePropertyValue(s,t,n,r,i,a,e,o),this.finishNode(s,"Property")},gt.parsePropertyValue=function(t,e,n,r,i,a,s,o){(n||r)&&this.type===G.colon&&this.unexpected(),this.eat(G.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,s),t.kind="init"):this.options.ecmaVersion>=6&&this.type===G.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,r)):e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===G.comma||this.type===G.braceR?this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),t.kind="init",e?t.value=this.parseMaybeDefault(i,a,t.key):this.type===G.eq&&s?(s.shorthandAssign<0&&(s.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,a,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected():((n||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1),t.value.params.length!==("get"===t.kind?0:1)?this.raiseRecoverable(t.value.start,"get"===t.kind?"getter should have no params":"setter should have exactly one param"):"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params"))},gt.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(G.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(G.bracketR),t.key;t.computed=!1}return t.key=this.type===G.num||this.type===G.string?this.parseExprAtom():this.parseIdent(!0)},gt.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},gt.parseMethod=function(t,e,n){var r=this.startNode(),i=this.yieldPos,a=this.awaitPos,s=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=t),this.options.ecmaVersion>=8&&(r.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|rt(e,r.generator)|(n?128:0)),this.expect(G.parenL),r.params=this.parseBindingList(G.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=s,this.finishNode(r,"FunctionExpression")},gt.parseArrowExpression=function(t,e,n){var r=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|rt(n,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},gt.parseFunctionBody=function(t,e,n){var r=this.strict,i=!1;if(e&&this.type!==G.braceL)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);r&&!a||(i=this.strictDirective(this.end))&&a&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var s=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(t,!r&&!i&&!e&&!n&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=s}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,5),this.strict=r},gt.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1)if("Identifier"!==n[e].type)return!1;return!0},gt.checkParams=function(t,e){for(var n={},r=0,i=t.params;r<i.length;r+=1)this.checkLVal(i[r],1,e?null:n)},gt.parseExprList=function(t,e,n,r){for(var i=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(G.comma),e&&this.afterTrailingComma(t))break;var s=void 0;n&&this.type===G.comma?s=null:this.type===G.ellipsis?(s=this.parseSpread(r),r&&this.type===G.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):s=this.parseMaybeAssign(!1,r),i.push(s)}return i},gt.checkUnreserved=function(t){var e=t.start,n=t.end,r=t.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(e,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+r+"' is reserved"))},gt.parseIdent=function(t,e){var n=this.startNode();return t&&"never"===this.options.allowReserved&&(t=!1),this.type===G.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),t||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},gt.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===G.semi||this.canInsertSemicolon()||this.type!==G.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(G.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},gt.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var vt=it.prototype;vt.raise=function(t,e){var n=et(this.input,t),r=new SyntaxError(e+=" ("+n.line+":"+n.column+")");throw r.pos=t,r.loc=n,r.raisedAt=this.pos,r},vt.raiseRecoverable=vt.raise,vt.curPosition=function(){if(this.options.locations)return new Q(this.curLine,this.pos-this.lineStart)};var bt=it.prototype,xt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};bt.enterScope=function(t){this.scopeStack.push(new xt(t))},bt.exitScope=function(){this.scopeStack.pop()},bt.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},bt.declareName=function(t,e,n){var r=!1;if(2===e){var i=this.currentScope();r=i.lexical.indexOf(t)>-1||i.functions.indexOf(t)>-1||i.var.indexOf(t)>-1,i.lexical.push(t),this.inModule&&1&i.flags&&delete this.undefinedExports[t]}else if(4===e)this.currentScope().lexical.push(t);else if(3===e){var a=this.currentScope();r=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var s=this.scopeStack.length-1;s>=0;--s){var o=this.scopeStack[s];if(o.lexical.indexOf(t)>-1&&!(32&o.flags&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){r=!0;break}if(o.var.push(t),this.inModule&&1&o.flags&&delete this.undefinedExports[t],3&o.flags)break}r&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},bt.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},bt.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},bt.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags)return e}},bt.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags&&!(16&e.flags))return e}};var _t=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new tt(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},wt=it.prototype;function St(t,e,n,r){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=n),t}wt.startNode=function(){return new _t(this,this.start,this.startLoc)},wt.startNodeAt=function(t,e){return new _t(this,t,e)},wt.finishNode=function(t,e){return St.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},wt.finishNodeAt=function(t,e,n,r){return St.call(this,t,e,n,r)};var Et=function(t,e,n,r,i){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=r,this.generator=!!i},Mt={b_stat:new Et("{",!1),b_expr:new Et("{",!0),b_tmpl:new Et("${",!1),p_stat:new Et("(",!1),p_expr:new Et("(",!0),q_tmpl:new Et("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new Et("function",!1),f_expr:new Et("function",!0),f_expr_gen:new Et("function",!0,!1,null,!0),f_gen:new Et("function",!1,!1,null,!0)},Ct=it.prototype;Ct.initialContext=function(){return[Mt.b_stat]},Ct.braceIsBlock=function(t){var e=this.curContext();return e===Mt.f_expr||e===Mt.f_stat||(t!==G.colon||e!==Mt.b_stat&&e!==Mt.b_expr?t===G._return||t===G.name&&this.exprAllowed?H.test(this.input.slice(this.lastTokEnd,this.start)):t===G._else||t===G.semi||t===G.eof||t===G.parenR||t===G.arrow||(t===G.braceL?e===Mt.b_stat:t!==G._var&&t!==G._const&&t!==G.name&&!this.exprAllowed):!e.isExpr)},Ct.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},Ct.updateContext=function(t){var e,n=this.type;n.keyword&&t===G.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},G.parenR.updateContext=G.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===Mt.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},G.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?Mt.b_stat:Mt.b_expr),this.exprAllowed=!0},G.dollarBraceL.updateContext=function(){this.context.push(Mt.b_tmpl),this.exprAllowed=!0},G.parenL.updateContext=function(t){this.context.push(t===G._if||t===G._for||t===G._with||t===G._while?Mt.p_stat:Mt.p_expr),this.exprAllowed=!0},G.incDec.updateContext=function(){},G._function.updateContext=G._class.updateContext=function(t){!t.beforeExpr||t===G.semi||t===G._else||t===G._return&&H.test(this.input.slice(this.lastTokEnd,this.start))||(t===G.colon||t===G.braceL)&&this.curContext()===Mt.b_stat?this.context.push(Mt.f_stat):this.context.push(Mt.f_expr),this.exprAllowed=!1},G.backQuote.updateContext=function(){this.curContext()===Mt.q_tmpl?this.context.pop():this.context.push(Mt.q_tmpl),this.exprAllowed=!1},G.star.updateContext=function(t){if(t===G._function){var e=this.context.length-1;this.context[e]=this.context[e]===Mt.f_expr?Mt.f_expr_gen:Mt.f_gen}this.exprAllowed=!0},G.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==G.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Tt="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",At={9:Tt,10:Tt+" Extended_Pictographic"},kt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Lt="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Pt={9:Lt,10:Lt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd"},Rt={};function It(t){var e=Rt[t]={binary:K(At[t]+" "+kt),nonBinary:{General_Category:K(kt),Script:K(Pt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}It(9),It(10);var Dt=it.prototype,Bt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Rt[t.options.ecmaVersion>=10?10:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Ot(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function Nt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Ft(t){return t>=65&&t<=90||t>=97&&t<=122}function zt(t){return Ft(t)||95===t}function Ut(t){return zt(t)||Gt(t)}function Gt(t){return t>=48&&t<=57}function Ht(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function jt(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Vt(t){return t>=48&&t<=55}Bt.prototype.reset=function(t,e,n){var r=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Bt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Bt.prototype.at=function(t){var e=this.source,n=e.length;if(t>=n)return-1;var r=e.charCodeAt(t);return!this.switchU||r<=55295||r>=57344||t+1>=n?r:(r<<10)+e.charCodeAt(t+1)-56613888},Bt.prototype.nextIndex=function(t){var e=this.source,n=e.length;if(t>=n)return n;var r=e.charCodeAt(t);return!this.switchU||r<=55295||r>=57344||t+1>=n?t+1:t+2},Bt.prototype.current=function(){return this.at(this.pos)},Bt.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},Bt.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},Bt.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},Dt.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===e.indexOf(i)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},Dt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Dt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1)-1===t.groupNames.indexOf(n[e])&&t.raise("Invalid named capture referenced")},Dt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Dt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Dt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!(t.switchU?!this.regexp_eatAtom(t):!this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Dt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},Dt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Dt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Dt.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue),t.eat(125)))return-1!==i&&i<r&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},Dt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Dt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Dt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Dt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Dt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Dt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Dt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Nt(e)&&(t.lastIntValue=e,t.advance(),!0)},Dt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!Nt(n);)t.advance();return t.pos!==e},Dt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e||(t.advance(),0))},Dt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Dt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Dt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Ot(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Ot(t.lastIntValue);return!0}return!1},Dt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return I(t,!0)||36===t||95===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Dt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return D(t,!0)||36===t||95===t||8204===t||8205===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Dt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Dt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},Dt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Dt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Dt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Dt.regexp_eatZero=function(t){return 48===t.current()&&!Gt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Dt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Dt.regexp_eatControlLetter=function(t){var e=t.current();return!!Ft(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Dt.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e,n=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(t.switchU&&r>=55296&&r<=56319){var i=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=1024*(r-55296)+(a-56320)+65536,!0}t.pos=i,t.lastIntValue=r}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&(e=t.lastIntValue)>=0&&e<=1114111)return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=n}return!1},Dt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e||(t.lastIntValue=e,t.advance(),0))},Dt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Dt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Dt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t))return this.regexp_validateUnicodePropertyNameAndValue(t,n,t.lastStringValue),!0}return t.pos=e,!!this.regexp_eatLoneUnicodePropertyNameOrValue(t)&&(this.regexp_validateUnicodePropertyNameOrValue(t,t.lastStringValue),!0)},Dt.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){J(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},Dt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},Dt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";zt(e=t.current());)t.lastStringValue+=Ot(e),t.advance();return""!==t.lastStringValue},Dt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";Ut(e=t.current());)t.lastStringValue+=Ot(e),t.advance();return""!==t.lastStringValue},Dt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Dt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Dt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},Dt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||Vt(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var r=t.current();return 93!==r&&(t.lastIntValue=r,t.advance(),!0)},Dt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Dt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Gt(e)&&95!==e||(t.lastIntValue=e%32,t.advance(),0))},Dt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Dt.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Gt(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},Dt.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Ht(n=t.current());)t.lastIntValue=16*t.lastIntValue+jt(n),t.advance();return t.pos!==e},Dt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;t.lastIntValue=e<=3&&this.regexp_eatOctalDigit(t)?64*e+8*n+t.lastIntValue:8*e+n}else t.lastIntValue=e;return!0}return!1},Dt.regexp_eatOctalDigit=function(t){var e=t.current();return Vt(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Dt.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var i=t.current();if(!Ht(i))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+jt(i),t.advance()}return!0};var Wt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new tt(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},$t=it.prototype;function Yt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}$t.next=function(){this.options.onToken&&this.options.onToken(new Wt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},$t.getToken=function(){return this.next(),new Wt(this)},"undefined"!=typeof Symbol&&($t[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===G.eof,value:e}}}}),$t.curContext=function(){return this.context[this.context.length-1]},$t.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(G.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},$t.readToken=function(t){return I(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},$t.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},$t.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(j.lastIndex=n;(t=j.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,e,this.curPosition())},$t.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!V(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},$t.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&W.test(String.fromCharCode(t))))break t;++this.pos}}},$t.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},$t.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(G.ellipsis)):(++this.pos,this.finishToken(G.dot))},$t.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(G.assign,2):this.finishOp(G.slash,1)},$t.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,r=42===t?G.star:G.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,r=G.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(G.assign,n+1):this.finishOp(r,n)},$t.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?G.logicalOR:G.logicalAND,2):61===e?this.finishOp(G.assign,2):this.finishOp(124===t?G.bitwiseOR:G.bitwiseAND,1)},$t.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(G.assign,2):this.finishOp(G.bitwiseXOR,1)},$t.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!H.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(G.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(G.assign,2):this.finishOp(G.plusMin,1)},$t.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(G.assign,n+1):this.finishOp(G.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(G.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},$t.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(G.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(G.arrow)):this.finishOp(61===t?G.eq:G.prefix,1)},$t.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(G.parenL);case 41:return++this.pos,this.finishToken(G.parenR);case 59:return++this.pos,this.finishToken(G.semi);case 44:return++this.pos,this.finishToken(G.comma);case 91:return++this.pos,this.finishToken(G.bracketL);case 93:return++this.pos,this.finishToken(G.bracketR);case 123:return++this.pos,this.finishToken(G.braceL);case 125:return++this.pos,this.finishToken(G.braceR);case 58:return++this.pos,this.finishToken(G.colon);case 63:return++this.pos,this.finishToken(G.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(G.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(G.prefix,1)}this.raise(this.pos,"Unexpected character '"+Yt(t)+"'")},$t.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},$t.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(H.test(r)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,s=this.readWord1();this.containsEsc&&this.unexpected(a);var o=this.regexpState||(this.regexpState=new Bt(this));o.reset(n,i,s),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(i,s)}catch(t){}return this.finishToken(G.regexp,{pattern:i,flags:s,value:l})},$t.readInt=function(t,e){for(var n=this.pos,r=0,i=0,a=null==e?1/0:e;i<a;++i){var s,o=this.input.charCodeAt(this.pos);if((s=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=t)break;++this.pos,r=r*t+s}return this.pos===n||null!=e&&this.pos-n!==e?null:r},$t.readRadixNumber=function(t){this.pos+=2;var e=this.readInt(t);return null==e&&this.raise(this.start+2,"Expected number in radix "+t),I(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(G.num,e)},$t.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number"),n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),I(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(e,this.pos),a=n?parseInt(i,8):parseFloat(i);return this.finishToken(G.num,a)},$t.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},$t.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):(V(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(G.string,e)};var qt={};$t.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(w){if(w!==qt)throw w;this.readInvalidTemplateToken()}this.inTemplateElement=!1},$t.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw qt;this.raise(t,e)},$t.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==G.template&&this.type!==G.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(G.template,t)):36===n?(this.pos+=2,this.finishToken(G.dollarBraceL)):(++this.pos,this.finishToken(G.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(V(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},$t.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(G.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},$t.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Yt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,e=this.input.charCodeAt(this.pos),"0"===n&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-n.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return V(e)?"":String.fromCharCode(e)}},$t.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},$t.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(D(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var s=this.readCodePoint();(e?I:D)(s,r)||this.invalidStringToken(a,"Invalid Unicode escape"),t+=Yt(s),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},$t.readWord=function(){var t=this.readWord1(),e=G.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=z[t]),this.finishToken(e,t)};var Xt={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",times:"\xd7",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",divide:"\xf7",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",frasl:"\u2044",euro:"\u20ac",image:"\u2111",weierp:"\u2118",real:"\u211c",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lArr:"\u21d0",uArr:"\u21d1",rArr:"\u21d2",dArr:"\u21d3",hArr:"\u21d4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",lang:"\u2329",rang:"\u232a",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"},Jt={version:"6.1.1",parse:function(t,e){return it.parse(t,e)},parseExpressionAt:function(t,e,n){return it.parseExpressionAt(t,e,n)},tokenizer:function(t,e){return it.tokenizer(t,e)},Parser:it,defaultOptions:nt,Position:Q,SourceLocation:tt,getLineInfo:et,Node:_t,TokenType:B,tokTypes:G,keywordTypes:z,TokContext:Et,tokContexts:Mt,isIdentifierChar:D,isIdentifierStart:I,Token:Wt,isNewLine:V,lineBreak:H,lineBreakG:j,nonASCIIwhitespace:W};const Zt=/^[\da-fA-F]+$/,Kt=/^\d+$/,Qt=Jt.tokTypes,te=Jt.TokContext,ee=Jt.tokContexts,ne=Jt.TokenType,re=Jt.isNewLine,ie=Jt.isIdentifierStart,ae=Jt.isIdentifierChar,se=new te("<tag",!1),oe=new te("</tag",!1),le=new te("<tag>...</tag>",!0,!0),ce={jsxName:new ne("jsxName"),jsxText:new ne("jsxText",{beforeExpr:!0}),jsxTagStart:new ne("jsxTagStart"),jsxTagEnd:new ne("jsxTagEnd")};function ue(t){return t?"JSXIdentifier"===t.type?t.name:"JSXNamespacedName"===t.type?t.namespace.name+":"+t.name.name:"JSXMemberExpression"===t.type?ue(t.object)+"."+ue(t.property):void 0:t}ce.jsxTagStart.updateContext=function(){this.context.push(le),this.context.push(se),this.exprAllowed=!1},ce.jsxTagEnd.updateContext=function(t){let e=this.context.pop();e===se&&t===Qt.slash||e===oe?(this.context.pop(),this.exprAllowed=this.curContext()===le):this.exprAllowed=!0};var he=function(t){return t=t||{},function(e){return function(t,e){return class extends e{jsx_readToken(){let t="",e=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");let n=this.input.charCodeAt(this.pos);switch(n){case 60:case 123:return this.pos===this.start?60===n&&this.exprAllowed?(++this.pos,this.finishToken(ce.jsxTagStart)):this.getTokenFromCode(n):(t+=this.input.slice(e,this.pos),this.finishToken(ce.jsxText,t));case 38:t+=this.input.slice(e,this.pos),t+=this.jsx_readEntity(),e=this.pos;break;default:re(n)?(t+=this.input.slice(e,this.pos),t+=this.jsx_readNewLine(!0),e=this.pos):++this.pos}}}jsx_readNewLine(t){let e,n=this.input.charCodeAt(this.pos);return++this.pos,13===n&&10===this.input.charCodeAt(this.pos)?(++this.pos,e=t?"\n":"\r\n"):e=String.fromCharCode(n),this.options.locations&&(++this.curLine,this.lineStart=this.pos),e}jsx_readString(t){let e="",n=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");let r=this.input.charCodeAt(this.pos);if(r===t)break;38===r?(e+=this.input.slice(n,this.pos),e+=this.jsx_readEntity(),n=this.pos):re(r)?(e+=this.input.slice(n,this.pos),e+=this.jsx_readNewLine(!1),n=this.pos):++this.pos}return e+=this.input.slice(n,this.pos++),this.finishToken(Qt.string,e)}jsx_readEntity(){let t,e="",n=0,r=this.input[this.pos];"&"!==r&&this.raise(this.pos,"Entity must start with an ampersand");let i=++this.pos;for(;this.pos<this.input.length&&n++<10;){if(";"===(r=this.input[this.pos++])){"#"===e[0]?"x"===e[1]?(e=e.substr(2),Zt.test(e)&&(t=String.fromCharCode(parseInt(e,16)))):(e=e.substr(1),Kt.test(e)&&(t=String.fromCharCode(parseInt(e,10)))):t=Xt[e];break}e+=r}return t||(this.pos=i,"&")}jsx_readWord(){let t,e=this.pos;do{t=this.input.charCodeAt(++this.pos)}while(ae(t)||45===t);return this.finishToken(ce.jsxName,this.input.slice(e,this.pos))}jsx_parseIdentifier(){let t=this.startNode();return this.type===ce.jsxName?t.name=this.value:this.type.keyword?t.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(t,"JSXIdentifier")}jsx_parseNamespacedName(){let e=this.start,n=this.startLoc,r=this.jsx_parseIdentifier();if(!t.allowNamespaces||!this.eat(Qt.colon))return r;var i=this.startNodeAt(e,n);return i.namespace=r,i.name=this.jsx_parseIdentifier(),this.finishNode(i,"JSXNamespacedName")}jsx_parseElementName(){if(this.type===ce.jsxTagEnd)return"";let e=this.start,n=this.startLoc,r=this.jsx_parseNamespacedName();for(this.type!==Qt.dot||"JSXNamespacedName"!==r.type||t.allowNamespacedObjects||this.unexpected();this.eat(Qt.dot);){let t=this.startNodeAt(e,n);t.object=r,t.property=this.jsx_parseIdentifier(),r=this.finishNode(t,"JSXMemberExpression")}return r}jsx_parseAttributeValue(){switch(this.type){case Qt.braceL:let t=this.jsx_parseExpressionContainer();return"JSXEmptyExpression"===t.expression.type&&this.raise(t.start,"JSX attributes must only be assigned a non-empty expression"),t;case ce.jsxTagStart:case Qt.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}}jsx_parseEmptyExpression(){let t=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(t,"JSXEmptyExpression",this.start,this.startLoc)}jsx_parseExpressionContainer(){let t=this.startNode();return this.next(),t.expression=this.type===Qt.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(Qt.braceR),this.finishNode(t,"JSXExpressionContainer")}jsx_parseAttribute(){let t=this.startNode();return this.eat(Qt.braceL)?(this.expect(Qt.ellipsis),t.argument=this.parseMaybeAssign(),this.expect(Qt.braceR),this.finishNode(t,"JSXSpreadAttribute")):(t.name=this.jsx_parseNamespacedName(),t.value=this.eat(Qt.eq)?this.jsx_parseAttributeValue():null,this.finishNode(t,"JSXAttribute"))}jsx_parseOpeningElementAt(t,e){let n=this.startNodeAt(t,e);n.attributes=[];let r=this.jsx_parseElementName();for(r&&(n.name=r);this.type!==Qt.slash&&this.type!==ce.jsxTagEnd;)n.attributes.push(this.jsx_parseAttribute());return n.selfClosing=this.eat(Qt.slash),this.expect(ce.jsxTagEnd),this.finishNode(n,r?"JSXOpeningElement":"JSXOpeningFragment")}jsx_parseClosingElementAt(t,e){let n=this.startNodeAt(t,e),r=this.jsx_parseElementName();return r&&(n.name=r),this.expect(ce.jsxTagEnd),this.finishNode(n,r?"JSXClosingElement":"JSXClosingFragment")}jsx_parseElementAt(t,e){let n=this.startNodeAt(t,e),r=[],i=this.jsx_parseOpeningElementAt(t,e),a=null;if(!i.selfClosing){t:for(;;)switch(this.type){case ce.jsxTagStart:if(t=this.start,e=this.startLoc,this.next(),this.eat(Qt.slash)){a=this.jsx_parseClosingElementAt(t,e);break t}r.push(this.jsx_parseElementAt(t,e));break;case ce.jsxText:r.push(this.parseExprAtom());break;case Qt.braceL:r.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}ue(a.name)!==ue(i.name)&&this.raise(a.start,"Expected corresponding JSX closing tag for <"+ue(i.name)+">")}let s=i.name?"Element":"Fragment";return n["opening"+s]=i,n["closing"+s]=a,n.children=r,this.type===Qt.relational&&"<"===this.value&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(n,"JSX"+s)}jsx_parseText(t){let e=this.parseLiteral(t);return e.type="JSXText",e}jsx_parseElement(){let t=this.start,e=this.startLoc;return this.next(),this.jsx_parseElementAt(t,e)}parseExprAtom(t){return this.type===ce.jsxText?this.jsx_parseText(this.value):this.type===ce.jsxTagStart?this.jsx_parseElement():super.parseExprAtom(t)}readToken(t){let e=this.curContext();if(e===le)return this.jsx_readToken();if(e===se||e===oe){if(ie(t))return this.jsx_readWord();if(62==t)return++this.pos,this.finishToken(ce.jsxTagEnd);if((34===t||39===t)&&e==se)return this.jsx_readString(t)}return 60===t&&this.exprAllowed&&33!==this.input.charCodeAt(this.pos+1)?(++this.pos,this.finishToken(ce.jsxTagStart)):super.readToken(t)}updateContext(t){if(this.type==Qt.braceL){var e=this.curContext();e==se?this.context.push(ee.b_expr):e==le?this.context.push(ee.b_tmpl):super.updateContext(t),this.exprAllowed=!0}else{if(this.type!==Qt.slash||t!==ce.jsxTagStart)return super.updateContext(t);this.context.length-=2,this.context.push(oe),this.exprAllowed=!1}}}}({allowNamespaces:!1!==t.allowNamespaces,allowNamespacedObjects:!!t.allowNamespacedObjects},e)}};he.tokTypes=ce;var de,fe,pe=(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicImportKey=void 0;var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0};e.default=function(t){return function(e){function a(){return function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,t),n(a,[{key:"parseStatement",value:function(t,e,n){return this.type===Jt.tokTypes._import&&function(){return/^(\s|\/\/.*|\/\*[^]*?\*\/)*\(/.test(this.input.slice(this.pos))}.call(this)?this.parseExpressionStatement(this.startNode(),this.parseExpression()):r(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"parseStatement",this).call(this,t,e,n)}},{key:"parseExprAtom",value:function(t){return this.type===Jt.tokTypes._import?function(){var t=this.startNode();return this.next(),this.type!==Jt.tokTypes.parenL&&this.unexpected(),this.finishNode(t,i)}.call(this):r(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"parseExprAtom",this).call(this,t)}}]),a}()};var i=e.DynamicImportKey="Import";Jt.tokTypes._import.startsExpr=!0}(de={exports:{}},de.exports),(fe=de.exports)&&fe.__esModule&&Object.prototype.hasOwnProperty.call(fe,"default")?fe.default:fe);const me=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ge=Jt.tokTypes;function ye(t){if(this.eat(ge.eq)){const e=this._inFieldValue;this._inFieldValue=!0,t.value=this.parseExpression(),this._inFieldValue=e}else t.value=null}function ve(){const t=this.startNode();return t.name=this.value,this.next(),this.finishNode(t,"PrivateName"),"never"==this.options.allowReserved&&this.checkUnreserved(t),t}const be=new(0,Jt.TokenType)("privateName");function xe(t){var e="";t=t<0?-t<<1|1:t<<1;do{var n=31&t;(t>>=5)>0&&(n|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[n]}while(t>0);return e}var _e=function(t,e,n){this.start=t,this.end=e,this.original=n,this.intro="",this.outro="",this.content=n,this.storeName=!1,this.edited=!1,Object.defineProperties(this,{previous:{writable:!0,value:null},next:{writable:!0,value:null}})};_e.prototype.appendLeft=function(t){this.outro+=t},_e.prototype.appendRight=function(t){this.intro=this.intro+t},_e.prototype.clone=function(){var t=new _e(this.start,this.end,this.original);return t.intro=this.intro,t.outro=this.outro,t.content=this.content,t.storeName=this.storeName,t.edited=this.edited,t},_e.prototype.contains=function(t){return this.start<t&&t<this.end},_e.prototype.eachNext=function(t){for(var e=this;e;)t(e),e=e.next},_e.prototype.eachPrevious=function(t){for(var e=this;e;)t(e),e=e.previous},_e.prototype.edit=function(t,e,n){return this.content=t,n||(this.intro="",this.outro=""),this.storeName=e,this.edited=!0,this},_e.prototype.prependLeft=function(t){this.outro=t+this.outro},_e.prototype.prependRight=function(t){this.intro=t+this.intro},_e.prototype.split=function(t){var e=t-this.start,n=this.original.slice(0,e),r=this.original.slice(e);this.original=n;var i=new _e(t,this.end,r);return i.outro=this.outro,this.outro="",this.end=t,this.edited?(i.edit("",!1),this.content=""):this.content=n,i.next=this.next,i.next&&(i.next.previous=i),i.previous=this,this.next=i,i},_e.prototype.toString=function(){return this.intro+this.content+this.outro},_e.prototype.trimEnd=function(t){if(this.outro=this.outro.replace(t,""),this.outro.length)return!0;var e=this.content.replace(t,"");return e.length?(e!==this.content&&this.split(this.start+e.length).edit("",void 0,!0),!0):(this.edit("",void 0,!0),this.intro=this.intro.replace(t,""),!!this.intro.length||void 0)},_e.prototype.trimStart=function(t){if(this.intro=this.intro.replace(t,""),this.intro.length)return!0;var e=this.content.replace(t,"");return e.length?(e!==this.content&&(this.split(this.end-e.length),this.edit("",void 0,!0)),!0):(this.edit("",void 0,!0),this.outro=this.outro.replace(t,""),!!this.outro.length||void 0)};var we=function(){throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")};"undefined"!=typeof window&&"function"==typeof window.btoa?we=function(t){return window.btoa(unescape(encodeURIComponent(t)))}:"function"==typeof Buffer&&(we=function(t){return Buffer.from(t,"utf-8").toString("base64")});var Se=function(t){this.version=3,this.file=t.file,this.sources=t.sources,this.sourcesContent=t.sourcesContent,this.names=t.names,this.mappings=function(t){for(var e=0,n=0,r=0,i=0,a="",s=0;s<t.length;s++){var o=t[s];if(s>0&&(a+=";"),0!==o.length){for(var l=0,c=[],u=0,h=o;u<h.length;u++){var d=h[u],f=xe(d[0]-l);l=d[0],d.length>1&&(f+=xe(d[1]-e)+xe(d[2]-n)+xe(d[3]-r),e=d[1],n=d[2],r=d[3]),5===d.length&&(f+=xe(d[4]-i),i=d[4]),c.push(f)}a+=c.join(",")}}return a}(t.mappings)};function Ee(t){var e=t.split("\n"),n=e.filter((function(t){return/^\t+/.test(t)})),r=e.filter((function(t){return/^ {2,}/.test(t)}));if(0===n.length&&0===r.length)return null;if(n.length>=r.length)return"\t";var i=r.reduce((function(t,e){var n=/^ +/.exec(e)[0].length;return Math.min(n,t)}),1/0);return new Array(i+1).join(" ")}function Me(t,e){var n=t.split(/[\/\\]/),r=e.split(/[\/\\]/);for(n.pop();n[0]===r[0];)n.shift(),r.shift();if(n.length)for(var i=n.length;i--;)n[i]="..";return n.concat(r).join("/")}Se.prototype.toString=function(){return JSON.stringify(this)},Se.prototype.toUrl=function(){return"data:application/json;charset=utf-8;base64,"+we(this.toString())};var Ce=Object.prototype.toString;function Te(t){for(var e=t.split("\n"),n=[],r=0,i=0;r<e.length;r++)n.push(i),i+=e[r].length+1;return function(t){for(var e=0,r=n.length;e<r;){var i=e+r>>1;t<n[i]?r=i:e=i+1}var a=e-1;return{line:a,column:t-n[a]}}}var Ae=function(t){this.hires=t,this.generatedCodeLine=0,this.generatedCodeColumn=0,this.raw=[],this.rawSegments=this.raw[this.generatedCodeLine]=[],this.pending=null};Ae.prototype.addEdit=function(t,e,n,r){if(e.length){var i=[this.generatedCodeColumn,t,n.line,n.column];r>=0&&i.push(r),this.rawSegments.push(i)}else this.pending&&this.rawSegments.push(this.pending);this.advance(e),this.pending=null},Ae.prototype.addUneditedChunk=function(t,e,n,r,i){for(var a=e.start,s=!0;a<e.end;)(this.hires||s||i[a])&&this.rawSegments.push([this.generatedCodeColumn,t,r.line,r.column]),"\n"===n[a]?(r.line+=1,r.column=0,this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0):(r.column+=1,this.generatedCodeColumn+=1),a+=1,s=!1;this.pending=[this.generatedCodeColumn,t,r.line,r.column]},Ae.prototype.advance=function(t){if(t){var e=t.split("\n");if(e.length>1){for(var n=0;n<e.length-1;n++)this.generatedCodeLine++,this.raw[this.generatedCodeLine]=this.rawSegments=[];this.generatedCodeColumn=0}this.generatedCodeColumn+=e[e.length-1].length}};var ke="\n",Le={insertLeft:!1,insertRight:!1,storeName:!1},Pe=function(t,e){void 0===e&&(e={});var n=new _e(0,t.length,t);Object.defineProperties(this,{original:{writable:!0,value:t},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:n},lastChunk:{writable:!0,value:n},lastSearchedChunk:{writable:!0,value:n},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:e.filename},indentExclusionRanges:{writable:!0,value:e.indentExclusionRanges},sourcemapLocations:{writable:!0,value:{}},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:Ee(t)}}),this.byStart[0]=n,this.byEnd[t.length]=n};function Re(t){var e={};return Object.keys(t).forEach((function(n){"parent"!==n&&"program"!==n&&"keys"!==n&&"__wrapped"!==n&&(e[n]=Array.isArray(t[n])?t[n].map(Re):t[n]&&t[n].toJSON?t[n].toJSON():t[n])})),e}Pe.prototype.addSourcemapLocation=function(t){this.sourcemapLocations[t]=!0},Pe.prototype.append=function(t){if("string"!=typeof t)throw new TypeError("outro content must be a string");return this.outro+=t,this},Pe.prototype.appendLeft=function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var n=this.byEnd[t];return n?n.appendLeft(e):this.intro+=e,this},Pe.prototype.appendRight=function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var n=this.byStart[t];return n?n.appendRight(e):this.outro+=e,this},Pe.prototype.clone=function(){for(var t=new Pe(this.original,{filename:this.filename}),e=this.firstChunk,n=t.firstChunk=t.lastSearchedChunk=e.clone();e;){t.byStart[n.start]=n,t.byEnd[n.end]=n;var r=e.next,i=r&&r.clone();i&&(n.next=i,i.previous=n,n=i),e=r}return t.lastChunk=n,this.indentExclusionRanges&&(t.indentExclusionRanges=this.indentExclusionRanges.slice()),Object.keys(this.sourcemapLocations).forEach((function(e){t.sourcemapLocations[e]=!0})),t},Pe.prototype.generateDecodedMap=function(t){var e=this;t=t||{};var n=Object.keys(this.storedNames),r=new Ae(t.hires),i=Te(this.original);return this.intro&&r.advance(this.intro),this.firstChunk.eachNext((function(t){var a=i(t.start);t.intro.length&&r.advance(t.intro),t.edited?r.addEdit(0,t.content,a,t.storeName?n.indexOf(t.original):-1):r.addUneditedChunk(0,t,e.original,a,e.sourcemapLocations),t.outro.length&&r.advance(t.outro)})),{file:t.file?t.file.split(/[\/\\]/).pop():null,sources:[t.source?Me(t.file||"",t.source):null],sourcesContent:t.includeContent?[this.original]:[null],names:n,mappings:r.raw}},Pe.prototype.generateMap=function(t){return new Se(this.generateDecodedMap(t))},Pe.prototype.getIndentString=function(){return null===this.indentStr?"\t":this.indentStr},Pe.prototype.indent=function(t,e){var n=/^[^\r\n]/gm;if("[object Object]"===Ce.call(t)&&(e=t,t=void 0),""===(t=void 0!==t?t:this.indentStr||"\t"))return this;var r={};(e=e||{}).exclude&&("number"==typeof e.exclude[0]?[e.exclude]:e.exclude).forEach((function(t){for(var e=t[0];e<t[1];e+=1)r[e]=!0}));var i=!1!==e.indentStart,a=function(e){return i?""+t+e:(i=!0,e)};this.intro=this.intro.replace(n,a);for(var s=0,o=this.firstChunk;o;){var l=o.end;if(o.edited)r[s]||(o.content=o.content.replace(n,a),o.content.length&&(i="\n"===o.content[o.content.length-1]));else for(s=o.start;s<l;){if(!r[s]){var c=this.original[s];"\n"===c?i=!0:"\r"!==c&&i&&(i=!1,s===o.start?o.prependRight(t):(this._splitChunk(o,s),(o=o.next).prependRight(t)))}s+=1}s=o.end,o=o.next}return this.outro=this.outro.replace(n,a),this},Pe.prototype.insert=function(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")},Pe.prototype.insertLeft=function(t,e){return Le.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),Le.insertLeft=!0),this.appendLeft(t,e)},Pe.prototype.insertRight=function(t,e){return Le.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),Le.insertRight=!0),this.prependRight(t,e)},Pe.prototype.move=function(t,e,n){if(n>=t&&n<=e)throw new Error("Cannot move a selection inside itself");this._split(t),this._split(e),this._split(n);var r=this.byStart[t],i=this.byEnd[e],a=r.previous,s=i.next,o=this.byStart[n];if(!o&&i===this.lastChunk)return this;var l=o?o.previous:this.lastChunk;return a&&(a.next=s),s&&(s.previous=a),l&&(l.next=r),o&&(o.previous=i),r.previous||(this.firstChunk=i.next),i.next||(this.lastChunk=r.previous,this.lastChunk.next=null),r.previous=l,i.next=o||null,l||(this.firstChunk=r),o||(this.lastChunk=i),this},Pe.prototype.overwrite=function(t,e,n,r){if("string"!=typeof n)throw new TypeError("replacement content must be a string");for(;t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;if(e>this.original.length)throw new Error("end is out of bounds");if(t===e)throw new Error("Cannot overwrite a zero-length range \u2013 use appendLeft or prependRight instead");this._split(t),this._split(e),!0===r&&(Le.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),Le.storeName=!0),r={storeName:!0});var i=void 0!==r&&r.storeName,a=void 0!==r&&r.contentOnly;if(i){var s=this.original.slice(t,e);this.storedNames[s]=!0}var o=this.byStart[t],l=this.byEnd[e];if(o){if(e>o.end&&o.next!==this.byStart[o.end])throw new Error("Cannot overwrite across a split point");if(o.edit(n,i,a),o!==l){for(var c=o.next;c!==l;)c.edit("",!1),c=c.next;c.edit("",!1)}}else{var u=new _e(t,e,"").edit(n,i);l.next=u,u.previous=l}return this},Pe.prototype.prepend=function(t){if("string"!=typeof t)throw new TypeError("outro content must be a string");return this.intro=t+this.intro,this},Pe.prototype.prependLeft=function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var n=this.byEnd[t];return n?n.prependLeft(e):this.intro=e+this.intro,this},Pe.prototype.prependRight=function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var n=this.byStart[t];return n?n.prependRight(e):this.outro=e+this.outro,this},Pe.prototype.remove=function(t,e){for(;t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;if(t===e)return this;if(t<0||e>this.original.length)throw new Error("Character is out of bounds");if(t>e)throw new Error("end must be greater than start");this._split(t),this._split(e);for(var n=this.byStart[t];n;)n.intro="",n.outro="",n.edit(""),n=e>n.end?this.byStart[n.end]:null;return this},Pe.prototype.lastChar=function(){if(this.outro.length)return this.outro[this.outro.length-1];var t=this.lastChunk;do{if(t.outro.length)return t.outro[t.outro.length-1];if(t.content.length)return t.content[t.content.length-1];if(t.intro.length)return t.intro[t.intro.length-1]}while(t=t.previous);return this.intro.length?this.intro[this.intro.length-1]:""},Pe.prototype.lastLine=function(){var t=this.outro.lastIndexOf(ke);if(-1!==t)return this.outro.substr(t+1);var e=this.outro,n=this.lastChunk;do{if(n.outro.length>0){if(-1!==(t=n.outro.lastIndexOf(ke)))return n.outro.substr(t+1)+e;e=n.outro+e}if(n.content.length>0){if(-1!==(t=n.content.lastIndexOf(ke)))return n.content.substr(t+1)+e;e=n.content+e}if(n.intro.length>0){if(-1!==(t=n.intro.lastIndexOf(ke)))return n.intro.substr(t+1)+e;e=n.intro+e}}while(n=n.previous);return-1!==(t=this.intro.lastIndexOf(ke))?this.intro.substr(t+1)+e:this.intro+e},Pe.prototype.slice=function(t,e){for(void 0===t&&(t=0),void 0===e&&(e=this.original.length);t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;for(var n="",r=this.firstChunk;r&&(r.start>t||r.end<=t);){if(r.start<e&&r.end>=e)return n;r=r.next}if(r&&r.edited&&r.start!==t)throw new Error("Cannot use replaced character "+t+" as slice start anchor.");for(var i=r;r;){!r.intro||i===r&&r.start!==t||(n+=r.intro);var a=r.start<e&&r.end>=e;if(a&&r.edited&&r.end!==e)throw new Error("Cannot use replaced character "+e+" as slice end anchor.");if(n+=r.content.slice(i===r?t-r.start:0,a?r.content.length+e-r.end:r.content.length),!r.outro||a&&r.end!==e||(n+=r.outro),a)break;r=r.next}return n},Pe.prototype.snip=function(t,e){var n=this.clone();return n.remove(0,t),n.remove(e,n.original.length),n},Pe.prototype._split=function(t){if(!this.byStart[t]&&!this.byEnd[t])for(var e=this.lastSearchedChunk,n=t>e.end;e;){if(e.contains(t))return this._splitChunk(e,t);e=n?this.byStart[e.end]:this.byEnd[e.start]}},Pe.prototype._splitChunk=function(t,e){if(t.edited&&t.content.length){var n=Te(this.original)(e);throw new Error("Cannot split a chunk that has already been edited ("+n.line+":"+n.column+' \u2013 "'+t.original+'")')}var r=t.split(e);return this.byEnd[e]=t,this.byStart[e]=r,this.byEnd[r.end]=r,t===this.lastChunk&&(this.lastChunk=r),this.lastSearchedChunk=t,!0},Pe.prototype.toString=function(){for(var t=this.intro,e=this.firstChunk;e;)t+=e.toString(),e=e.next;return t+this.outro},Pe.prototype.isEmpty=function(){var t=this.firstChunk;do{if(t.intro.length&&t.intro.trim()||t.content.length&&t.content.trim()||t.outro.length&&t.outro.trim())return!1}while(t=t.next);return!0},Pe.prototype.length=function(){var t=this.firstChunk,e=0;do{e+=t.intro.length+t.content.length+t.outro.length}while(t=t.next);return e},Pe.prototype.trimLines=function(){return this.trim("[\\r\\n]")},Pe.prototype.trim=function(t){return this.trimStart(t).trimEnd(t)},Pe.prototype.trimEndAborted=function(t){var e=new RegExp((t||"\\s")+"+$");if(this.outro=this.outro.replace(e,""),this.outro.length)return!0;var n=this.lastChunk;do{var r=n.end,i=n.trimEnd(e);if(n.end!==r&&(this.lastChunk===n&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),i)return!0;n=n.previous}while(n);return!1},Pe.prototype.trimEnd=function(t){return this.trimEndAborted(t),this},Pe.prototype.trimStartAborted=function(t){var e=new RegExp("^"+(t||"\\s")+"+");if(this.intro=this.intro.replace(e,""),this.intro.length)return!0;var n=this.firstChunk;do{var r=n.end,i=n.trimStart(e);if(n.end!==r&&(n===this.lastChunk&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),i)return!0;n=n.next}while(n);return!1},Pe.prototype.trimStart=function(t){return this.trimStartAborted(t),this};var Ie=function(){};function De(t){var e=[];return Be[t.type](e,t),e}Ie.prototype.ancestor=function(t){for(var e=this;t--;)if(!(e=e.parent))return null;return e},Ie.prototype.contains=function(t){for(;t;){if(t===this)return!0;t=t.parent}return!1},Ie.prototype.findLexicalBoundary=function(){return this.parent.findLexicalBoundary()},Ie.prototype.findNearest=function(t){return"string"==typeof t&&(t=new RegExp("^"+t+"$")),t.test(this.type)?this:this.parent.findNearest(t)},Ie.prototype.unparenthesizedParent=function(){for(var t=this.parent;t&&"ParenthesizedExpression"===t.type;)t=t.parent;return t},Ie.prototype.unparenthesize=function(){for(var t=this;"ParenthesizedExpression"===t.type;)t=t.expression;return t},Ie.prototype.findScope=function(t){return this.parent.findScope(t)},Ie.prototype.getIndentation=function(){return this.parent.getIndentation()},Ie.prototype.initialise=function(t){for(var e=0,n=this.keys;e<n.length;e+=1){var r=this[n[e]];Array.isArray(r)?r.forEach((function(e){return e&&e.initialise(t)})):r&&"object"==typeof r&&r.initialise(t)}},Ie.prototype.toJSON=function(){return Re(this)},Ie.prototype.toString=function(){return this.program.magicString.original.slice(this.start,this.end)},Ie.prototype.transpile=function(t,e){for(var n=0,r=this.keys;n<r.length;n+=1){var i=this[r[n]];Array.isArray(i)?i.forEach((function(n){return n&&n.transpile(t,e)})):i&&"object"==typeof i&&i.transpile(t,e)}};var Be={Identifier:function(t,e){t.push(e)},ObjectPattern:function(t,e){for(var n=0,r=e.properties;n<r.length;n+=1){var i=r[n];Be[i.type](t,i)}},Property:function(t,e){Be[e.value.type](t,e.value)},ArrayPattern:function(t,e){for(var n=0,r=e.elements;n<r.length;n+=1){var i=r[n];i&&Be[i.type](t,i)}},RestElement:function(t,e){Be[e.argument.type](t,e.argument)},AssignmentPattern:function(t,e){Be[e.left.type](t,e.left)}},Oe=Object.create(null);function Ne(t){this.parent=(t=t||{}).parent,this.isBlockScope=!!t.block,this.createDeclarationCallback=t.declare;for(var e=this;e.isBlockScope;)e=e.parent;this.functionScope=e,this.identifiers=[],this.declarations=Object.create(null),this.references=Object.create(null),this.blockScopedDeclarations=this.isBlockScope?null:Object.create(null),this.aliases=Object.create(null)}function Fe(t,e){for(var n="";e--;)n+=t;return n}function ze(t,e,n){void 0===n&&(n=1);var r=Math.max(e.line-5,0),i=e.line,a=String(i).length,s=t.split("\n").slice(r,i),o=s[s.length-1].slice(0,e.column).replace(/\t/g,"  ").length;return s.map((function(t,e){return n=a,(i=String(e+r+1))+Fe(" ",n-i.length)+" : "+t.replace(/\t/g,"  ");var n,i})).join("\n")+"\n"+Fe(" ",a+3+o)+Fe("^",n)}"do if in for let new try var case else enum eval null this true void with await break catch class const false super throw while yield delete export import public return static switch typeof default extends finally package private continue debugger function arguments interface protected implements instanceof".split(" ").forEach((function(t){return Oe[t]=!0})),Ne.prototype={addDeclaration:function(t,e){for(var n=0,r=De(t);n<r.length;n+=1){var i=r[n],a=i.name,s={name:a,node:i,kind:e,instances:[]};this.declarations[a]=s,this.isBlockScope&&(this.functionScope.blockScopedDeclarations[a]||(this.functionScope.blockScopedDeclarations[a]=[]),this.functionScope.blockScopedDeclarations[a].push(s))}},addReference:function(t){this.consolidated?this.consolidateReference(t):this.identifiers.push(t)},consolidate:function(){for(var t=0;t<this.identifiers.length;t+=1)this.consolidateReference(this.identifiers[t]);this.consolidated=!0},consolidateReference:function(t){var e=this.declarations[t.name];e?e.instances.push(t):(this.references[t.name]=!0,this.parent&&this.parent.addReference(t))},contains:function(t){return this.declarations[t]||!!this.parent&&this.parent.contains(t)},createIdentifier:function(t){"number"==typeof t&&(t=t.toString());for(var e=t=t.replace(/\s/g,"").replace(/\[([^\]]+)\]/g,"_$1").replace(/[^a-zA-Z0-9_$]/g,"_").replace(/_{2,}/,"_"),n=1;this.declarations[e]||this.references[e]||this.aliases[e]||e in Oe;)e=t+"$"+n++;return this.aliases[e]=!0,e},createDeclaration:function(t){var e=this.createIdentifier(t);return this.createDeclarationCallback(e),e},findDeclaration:function(t){return this.declarations[t]||this.parent&&this.parent.findDeclaration(t)},resolveName:function(t){var e=this.findDeclaration(t);return e?e.name:t}};var Ue=function(t){function e(e,n){if(t.call(this,e),this.name="CompileError",n){var r=n.program.magicString.original,i=function(t,e){var n,r=t.split("\n"),i=r.length,a=0;for(n=0;n<i;n+=1){var s=a+r[n].length+1;if(s>e)return{line:n+1,column:e-a,char:n};a=s}throw new Error("Could not determine location of character")}(r,n.start);this.message=e+" ("+i.line+":"+i.column+")",this.stack=(new t).stack.replace(new RegExp(".+new "+this.name+".+\\n","m"),""),this.loc=i,this.snippet=ze(r,i,n.end-n.start)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+"\n"+this.snippet},e.missingTransform=function(t,n,r,i){throw void 0===i&&(i=null),new e("Transforming "+t+" is not "+(i?"fully supported":"implemented")+". Use `transforms: { "+n+": false }` to skip transformation and disable this error"+(i?", or `transforms: { "+i+": true }` if you know what you're doing":"")+".",r)},e}(Error);function Ge(t,e){for(var n=0;n<t.length;n+=1)if(e(t[n],n))return n;return-1}var He={Identifier:Ve,AssignmentPattern:function(t,e,n,r,i,a,s){var o="Identifier"===r.left.type,l=o?r.left.name:i;a||s.push((function(e,n,i){t.prependRight(r.left.end,n+"if ( "+l+" === void 0 ) "+l),t.move(r.left.end,r.right.end,e),t.appendLeft(r.right.end,i)})),o||je(t,e,n,r.left,i,a,s)},ArrayPattern:function(t,e,n,r,i,a,s){var o=r.start;r.elements.forEach((function(r,l){r&&("RestElement"===r.type?$e(t,e,n,o,r.argument,i+".slice("+l+")",a,s):$e(t,e,n,o,r,i+"["+l+"]",a,s),o=r.end)})),t.remove(o,r.end)},ObjectPattern:We};function je(t,e,n,r,i,a,s){He[r.type](t,e,n,r,i,a,s)}function Ve(t,e,n,r,i,a,s){s.push((function(e,s,o){t.overwrite(r.start,r.end,(a?s:s+"var ")+n(r)+" = "+i+o),t.move(r.start,r.end,e)}))}function We(t,e,n,r,i,a,s){var o=this,l=r.start,c=[];r.properties.forEach((function(r){var u,h;if("Property"===r.type)if(h=r.value,r.computed||"Identifier"!==r.key.type)if(r.computed||"Literal"!==r.key.type){var d=t.slice(r.key.start,r.key.end);u=i+"["+d+"]",c.push("String("+d+")")}else u=i+"["+r.key.raw+"]",c.push(JSON.stringify(String(r.key.value)));else u=i+"."+r.key.name,c.push('"'+r.key.name+'"');else{if("RestElement"!==r.type)throw new Ue(o,"Unexpected node of type "+r.type+" in object pattern");h=r.argument,u=e("rest"),s.push((function(e,n,s){var o=r.program.getObjectWithoutPropertiesHelper(t);t.overwrite(r.start,l=r.argument.start,(a?n:n+"var ")+u+" = "+o+"( "+i+", ["+c.join(", ")+"] )"+s),t.move(r.start,l,e)}))}$e(t,e,n,l,h,u,a,s),l=r.end})),t.remove(l,r.end)}function $e(t,e,n,r,i,a,s,o){switch(i.type){case"Identifier":t.remove(r,i.start),Ve(t,0,n,i,a,s,o);break;case"MemberExpression":t.remove(r,i.start),function(t,e,n,r,i,a,s){s.push((function(e,n,a){t.prependRight(r.start,n),t.appendLeft(r.end," = "+i+a),t.move(r.start,r.end,e)}))}(t,0,0,i,a,0,o);break;case"AssignmentPattern":var l,c="Identifier"===i.left.type;l=c?n(i.left):e(a),o.push((function(e,n,r){s?(t.prependRight(i.right.start,l+" = "+a+", "+l+" = "+l+" === void 0 ? "),t.appendLeft(i.right.end," : "+l+r)):(t.prependRight(i.right.start,n+"var "+l+" = "+a+"; if ( "+l+" === void 0 ) "+l+" = "),t.appendLeft(i.right.end,r)),t.move(i.right.start,i.right.end,e)})),c?t.remove(r,i.right.start):(t.remove(r,i.left.start),t.remove(i.left.end,i.right.start),$e(t,e,n,r,i.left,l,s,o));break;case"ObjectPattern":t.remove(r,r=i.start);var u=a;i.properties.length>1&&(u=e(a),o.push((function(e,n,o){t.prependRight(i.start,(s?"":n+"var ")+u+" = "),t.overwrite(i.start,r=i.start+1,a),t.appendLeft(r,o),t.overwrite(i.start,r=i.start+1,(s?"":n+"var ")+u+" = "+a+o),t.move(i.start,r,e)}))),We(t,e,n,i,u,s,o);break;case"ArrayPattern":if(t.remove(r,r=i.start),i.elements.filter(Boolean).length>1){var h=e(a);o.push((function(e,n,o){t.prependRight(i.start,(s?"":n+"var ")+h+" = "),t.overwrite(i.start,r=i.start+1,a,{contentOnly:!0}),t.appendLeft(r,o),t.move(i.start,r,e)})),i.elements.forEach((function(i,a){i&&("RestElement"===i.type?$e(t,e,n,r,i.argument,h+".slice("+a+")",s,o):$e(t,e,n,r,i,h+"["+a+"]",s,o),r=i.end)}))}else{var d=Ge(i.elements,Boolean),f=i.elements[d];"RestElement"===f.type?$e(t,e,n,r,f.argument,a+".slice("+d+")",s,o):$e(t,e,n,r,f,a+"["+d+"]",s,o),r=f.end}t.remove(r,i.end);break;default:throw new Error("Unexpected node type in destructuring ("+i.type+")")}}var Ye=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createScope=function(){var t=this;this.parentIsFunction=/Function/.test(this.parent.type),this.isFunctionBlock=this.parentIsFunction||"Root"===this.parent.type,this.scope=new Ne({block:!this.isFunctionBlock,parent:this.parent.findScope(!1),declare:function(e){return t.createdDeclarations.push(e)}}),this.parentIsFunction&&this.parent.params.forEach((function(e){t.scope.addDeclaration(e,"param")}))},e.prototype.initialise=function(t){this.thisAlias=null,this.argumentsAlias=null,this.defaultParameters=[],this.createdDeclarations=[],this.scope||this.createScope(),this.body.forEach((function(e){return e.initialise(t)})),this.scope.consolidate()},e.prototype.findLexicalBoundary=function(){return"Program"===this.type||/^Function/.test(this.parent.type)?this:this.parent.findLexicalBoundary()},e.prototype.findScope=function(t){return t&&!this.isFunctionBlock?this.parent.findScope(t):this.scope},e.prototype.getArgumentsAlias=function(){return this.argumentsAlias||(this.argumentsAlias=this.scope.createIdentifier("arguments")),this.argumentsAlias},e.prototype.getArgumentsArrayAlias=function(){return this.argumentsArrayAlias||(this.argumentsArrayAlias=this.scope.createIdentifier("argsArray")),this.argumentsArrayAlias},e.prototype.getThisAlias=function(){return this.thisAlias||(this.thisAlias=this.scope.createIdentifier("this")),this.thisAlias},e.prototype.getIndentation=function(){if(void 0===this.indentation){for(var t=this.program.magicString.original,e=this.synthetic||!this.body.length,n=e?this.start:this.body[0].start;n&&"\n"!==t[n];)n-=1;for(this.indentation="";;){var r=t[n+=1];if(" "!==r&&"\t"!==r)break;this.indentation+=r}for(var i=this.program.magicString.getIndentString(),a=this.parent;a;)"constructor"!==a.kind||a.parent.parent.superClass||(this.indentation=this.indentation.replace(i,"")),a=a.parent;e&&(this.indentation+=i)}return this.indentation},e.prototype.transpile=function(e,n){var r,i,a=this,s=this.getIndentation(),o=[];if(this.argumentsAlias&&o.push((function(t,n,r){e.appendLeft(t,n+"var "+a.argumentsAlias+" = arguments"+r)})),this.thisAlias&&o.push((function(t,n,r){e.appendLeft(t,n+"var "+a.thisAlias+" = this"+r)})),this.argumentsArrayAlias&&o.push((function(t,n,r){var i=a.scope.createIdentifier("i");e.appendLeft(t,n+"var "+i+" = arguments.length, "+a.argumentsArrayAlias+" = Array("+i+");\n"+s+"while ( "+i+"-- ) "+a.argumentsArrayAlias+"["+i+"] = arguments["+i+"]"+r)})),/Function/.test(this.parent.type)?this.transpileParameters(this.parent.params,e,n,s,o):"CatchClause"===this.parent.type&&this.transpileParameters([this.parent.param],e,n,s,o),n.letConst&&this.isFunctionBlock&&this.transpileBlockScopedIdentifiers(e),t.prototype.transpile.call(this,e,n),this.createdDeclarations.length&&o.push((function(t,n,r){var i=n+"var "+a.createdDeclarations.join(", ")+r;e.appendLeft(t,i)})),this.synthetic)if("ArrowFunctionExpression"===this.parent.type){var l=this.body[0];o.length?(e.appendLeft(this.start,"{").prependRight(this.end,this.parent.getIndentation()+"}"),e.prependRight(l.start,"\n"+s+"return "),e.appendLeft(l.end,";\n")):n.arrow&&(e.prependRight(l.start,"{ return "),e.appendLeft(l.end,"; }"))}else o.length&&e.prependRight(this.start,"{").appendLeft(this.end,"}");r=(i=this.body[0])&&"ExpressionStatement"===i.type&&"Literal"===i.expression.type&&"use strict"===i.expression.value?this.body[0].end:this.synthetic||"Root"===this.parent.type?this.start:this.start+1;var c="\n"+s,u=";";o.forEach((function(t,e){e===o.length-1&&(u=";\n"),t(r,c,u)}))},e.prototype.transpileParameters=function(t,e,n,r,i){var a=this;t.forEach((function(s){if("AssignmentPattern"===s.type&&"Identifier"===s.left.type)n.defaultParameter&&i.push((function(t,n,r){e.prependRight(s.left.end,n+"if ( "+s.left.name+" === void 0 ) "+s.left.name).move(s.left.end,s.right.end,t).appendLeft(s.right.end,r)}));else if("RestElement"===s.type)n.spreadRest&&i.push((function(n,i,o){var l=t[t.length-2];if(l)e.remove(l?l.end:s.start,s.end);else{for(var c=s.start,u=s.end;/\s/.test(e.original[c-1]);)c-=1;for(;/\s/.test(e.original[u]);)u+=1;e.remove(c,u)}var h=s.argument.name,d=a.scope.createIdentifier("len"),f=t.length-1;e.prependRight(n,f?i+"var "+h+" = [], "+d+" = arguments.length - "+f+";\n"+r+"while ( "+d+"-- > 0 ) "+h+"[ "+d+" ] = arguments[ "+d+" + "+f+" ]"+o:i+"var "+h+" = [], "+d+" = arguments.length;\n"+r+"while ( "+d+"-- ) "+h+"[ "+d+" ] = arguments[ "+d+" ]"+o)}));else if("Identifier"!==s.type&&n.parameterDestructuring){var o=a.scope.createIdentifier("ref");je(e,(function(t){return a.scope.createIdentifier(t)}),(function(t){return a.scope.resolveName(t.name)}),s,o,!1,i),e.prependRight(s.start,o)}}))},e.prototype.transpileBlockScopedIdentifiers=function(t){var e=this;Object.keys(this.scope.blockScopedDeclarations).forEach((function(n){for(var r=0,i=e.scope.blockScopedDeclarations[n];r<i.length;r+=1){var a=i[r],s=!1;if("for.let"===a.kind){var o=a.node.findNearest("ForStatement");if(o.shouldRewriteAsFunction){var l=e.scope.createIdentifier(n),c=o.reassigned[n]?e.scope.createIdentifier(n):n;a.name=l,t.overwrite(a.node.start,a.node.end,l,{storeName:!0}),o.aliases[n]={outer:l,inner:c};for(var u=0,h=a.instances;u<h.length;u+=1){var d=h[u],f=o.body.contains(d)?c:l;n!==f&&t.overwrite(d.start,d.end,f,{storeName:!0})}s=!0}}if(!s){var p=e.scope.createIdentifier(n);if(n!==p){a.name=p,t.overwrite(a.node.start,a.node.end,p,{storeName:!0});for(var m=0,g=a.instances;m<g.length;m+=1){var y=g[m];y.rewritten=!0,t.overwrite(y.start,y.end,p,{storeName:!0})}}}}}))},e}(Ie);function qe(t){return"Identifier"===t.type&&"arguments"===t.name}function Xe(t,e,n){for(var r=n.length;r--;){var i=n[r];if(i&&"SpreadElement"===i.type){var a=i.argument;if("ArrayExpression"===a.type){var s=a.elements;if(!s.some((function(t){return null===t}))){var o=r===n.length-1;0===s.length?t.remove(o&&0!==r?n[r-1].end:i.start,o?e.end-1:n[r+1].start):(t.remove(i.start,s[0].start),t.remove(s[s.length-1].end,o?e.end-1:i.end)),n.splice.apply(n,[r,1].concat(s)),r+=s.length}}}}}function Je(t){switch(t.type){case"ArrayExpression":case"CallExpression":case"Identifier":case"ParenthesizedExpression":case"ThisExpression":return!1;default:return!0}}function Ze(t,e,n,r,i){for(var a=e.length,s=-1;a--;){var o=e[a];o&&"SpreadElement"===o.type&&(qe(o.argument)&&t.overwrite(o.argument.start,o.argument.end,r),s=a)}if(-1===s)return!1;if(i){for(a=0;a<e.length;a+=1){var l=e[a];"SpreadElement"===l.type?t.remove(l.start,l.argument.start):(t.prependRight(l.start,"["),t.prependRight(l.end,"]"))}return!0}var c=e[s],u=e[s-1];if(u)t.overwrite(u.end,c.start," ].concat( ");else{var h;if(n!==c.start)(h=Je(c.argument))?t.overwrite(n,c.start,"( "):t.remove(n,c.start);else{if("CallExpression"!==c.parent.type)throw new Ue("Unsupported spread construct, please raise an issue at https://github.com/bublejs/buble/issues",c);h=Je(c.argument)}t.overwrite(c.end,e[1].start,h?" ).concat( ":".concat( ")}for(a=s;a<e.length;a+=1)(c=e[a])&&("SpreadElement"===c.type?t.remove(c.start,c.argument.start):(t.appendLeft(c.start,"["),t.appendLeft(c.end,"]")));return!0}var Ke=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if(e.spreadRest&&this.elements.length)for(var n=this.findLexicalBoundary(),r=this.elements.length;r--;){var i=this.elements[r];i&&"SpreadElement"===i.type&&qe(i.argument)&&(this.argumentsArrayAlias=n.getArgumentsArrayAlias())}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){if(t.prototype.transpile.call(this,e,n),n.spreadRest){if(Xe(e,this,this.elements),this.elements.length){var r=this.elements[this.elements.length-1];r&&/\s*,/.test(e.original.slice(r.end,this.end))&&e.overwrite(r.end,this.end-1," ")}if(1===this.elements.length){var i=this.elements[0];i&&"SpreadElement"===i.type&&(qe(i.argument)?e.overwrite(this.start,this.end,"[].concat( "+this.argumentsArrayAlias+" )"):(e.overwrite(this.start,i.argument.start,"[].concat( "),e.overwrite(i.end,this.end," )")))}else Ze(e,this.elements,this.start,this.argumentsArrayAlias)&&e.overwrite(this.end-1,this.end,")")}},e}(Ie);function Qe(t,e){for(;")"!==t.original[e];){if(","===t.original[e])return void t.remove(e,e+1);"/"===t.original[e]&&(e="/"===t.original[e+1]?t.original.indexOf("\n",e):t.original.indexOf("*/",e)+1),e+=1}}var tn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.async&&e.asyncAwait&&Ue.missingTransform("async arrow functions","asyncAwait",this),this.body.createScope(),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){for(var r=this.start,i=(this.body||this.params[0]).start-1;"("!==e.original[r]&&r<i;)++r;"("!==e.original[r]&&(r=-1);var a=-1===r;if(n.arrow||this.needsArguments(n)){for(var s=this.body.start;"="!==e.original[s];)s-=1;e.remove(s,this.body.start),t.prototype.transpile.call(this,e,n),a&&(e.prependRight(this.params[0].start,"("),e.appendLeft(this.params[0].end,")"));var o,l=this.parent&&"ExpressionStatement"===this.parent.type,c=l?"!":"";this.async&&(c+="async "),c+="function",l||(c+=" "),(o=a?this.params[0].start:r)>this.start?e.overwrite(this.start,o,c):e.prependRight(this.start,c)}else t.prototype.transpile.call(this,e,n);n.trailingFunctionCommas&&this.params.length&&!a&&Qe(e,this.params[this.params.length-1].end)},e.prototype.needsArguments=function(t){return t.spreadRest&&this.params.filter((function(t){return"RestElement"===t.type})).length>0},e}(Ie);function en(t,e){var n=e.findDeclaration(t.name);if(n&&"const"===n.kind)throw new Ue(t.name+" is read-only",t)}var nn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if("Identifier"===this.left.type){var n=this.findScope(!1).findDeclaration(this.left.name),r=n&&n.node.ancestor(3);r&&"ForStatement"===r.type&&r.body.contains(this)&&(r.reassigned[this.left.name]=!0)}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){"Identifier"===this.left.type&&en(this.left,this.findScope(!1)),"**="===this.operator&&n.exponentiation?this.transpileExponentiation(e,n):/Pattern/.test(this.left.type)&&n.destructuring&&this.transpileDestructuring(e),t.prototype.transpile.call(this,e,n)},e.prototype.transpileDestructuring=function(t){var e=this,n=this.findScope(!0),r=this.findScope(!1),i=n.createDeclaration("assign");t.appendRight(this.left.end,"("+i),t.appendLeft(this.right.end,", ");var a=[];je(t,(function(t){return n.createDeclaration(t)}),(function(t){var e=r.resolveName(t.name);return en(t,r),e}),this.left,i,!0,a);var s=", ";a.forEach((function(t,n){n===a.length-1&&(s=""),t(e.end,"",s)})),"ExpressionStatement"===this.unparenthesizedParent().type?t.prependRight(this.end,")"):t.appendRight(this.end,", "+i+")")},e.prototype.transpileExponentiation=function(t){for(var e,n=this.findScope(!1),r=this.left.end;"*"!==t.original[r];)r+=1;t.remove(r,r+2);var i=this.left.unparenthesize();if("Identifier"===i.type)e=n.resolveName(i.name);else if("MemberExpression"===i.type){var a,s,o=!1,l=!1,c=this.findNearest(/(?:Statement|Declaration)$/),u=c.getIndentation();"Identifier"===i.property.type?s=i.computed?n.resolveName(i.property.name):i.property.name:(s=n.createDeclaration("property"),l=!0),"Identifier"===i.object.type?a=n.resolveName(i.object.name):(a=n.createDeclaration("object"),o=!0),i.start===c.start?o&&l?(t.prependRight(c.start,a+" = "),t.overwrite(i.object.end,i.property.start,";\n"+u+s+" = "),t.overwrite(i.property.end,i.end,";\n"+u+a+"["+s+"]")):o?(t.prependRight(c.start,a+" = "),t.appendLeft(i.object.end,";\n"+u),t.appendLeft(i.object.end,a)):l&&(t.prependRight(i.property.start,s+" = "),t.appendLeft(i.property.end,";\n"+u),t.move(i.property.start,i.property.end,this.start),t.appendLeft(i.object.end,"["+s+"]"),t.remove(i.object.end,i.property.start),t.remove(i.property.end,i.end)):(o&&l?(t.prependRight(i.start,"( "+a+" = "),t.overwrite(i.object.end,i.property.start,", "+s+" = "),t.overwrite(i.property.end,i.end,", "+a+"["+s+"]")):o?(t.prependRight(i.start,"( "+a+" = "),t.appendLeft(i.object.end,", "+a)):l&&(t.prependRight(i.property.start,"( "+s+" = "),t.appendLeft(i.property.end,", "),t.move(i.property.start,i.property.end,i.start),t.overwrite(i.object.end,i.property.start,"["+s+"]"),t.remove(i.property.end,i.end)),l&&t.appendLeft(this.end," )")),e=a+(i.computed||l?"["+s+"]":"."+s)}t.prependRight(this.right.start,"Math.pow( "+e+", "),t.appendLeft(this.right.end," )")},e}(Ie),rn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.asyncAwait&&Ue.missingTransform("await","asyncAwait",this),t.prototype.initialise.call(this,e)},e}(Ie),an=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,n){"**"===this.operator&&n.exponentiation&&(e.prependRight(this.start,"Math.pow( "),e.overwrite(this.left.end,this.right.start,", "),e.appendLeft(this.end," )")),t.prototype.transpile.call(this,e,n)},e}(Ie),sn=/(?:For(?:In|Of)?|While)Statement/,on=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(){var t=this.findNearest(sn),e=this.findNearest("SwitchCase");t&&(!e||t.depth>e.depth)&&(t.canBreak=!0,this.loop=t)},e.prototype.transpile=function(t){if(this.loop&&this.loop.shouldRewriteAsFunction){if(this.label)throw new Ue("Labels are not currently supported in a loop with locally-scoped variables",this);t.overwrite(this.start,this.start+5,"return 'break'")}},e}(Ie),ln=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if(e.spreadRest&&this.arguments.length>1)for(var n=this.findLexicalBoundary(),r=this.arguments.length;r--;){var i=this.arguments[r];"SpreadElement"===i.type&&qe(i.argument)&&(this.argumentsArrayAlias=n.getArgumentsArrayAlias())}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){if(n.spreadRest&&this.arguments.length&&Xe(e,this,this.arguments),n.spreadRest&&this.arguments.length){var r,i=!1,a=this.arguments[0];if(1===this.arguments.length?"SpreadElement"===a.type&&(e.remove(a.start,a.argument.start),i=!0):i=Ze(e,this.arguments,a.start,this.argumentsArrayAlias),i){var s=null;if("Super"===this.callee.type?s=this.callee:"MemberExpression"===this.callee.type&&"Super"===this.callee.object.type&&(s=this.callee.object),s||"MemberExpression"!==this.callee.type)r="void 0";else if("Identifier"===this.callee.object.type)r=this.callee.object.name;else{r=this.findScope(!0).createDeclaration("ref");var o=this.callee.object;e.prependRight(o.start,"("+r+" = "),e.appendLeft(o.end,")")}e.appendLeft(this.callee.end,".apply"),s?(s.noCall=!0,this.arguments.length>1&&("SpreadElement"===a.type?Je(a.argument)&&e.prependRight(a.start,"( "):e.prependRight(a.start,"[ "),e.appendLeft(this.arguments[this.arguments.length-1].end," )"))):1===this.arguments.length?e.prependRight(a.start,r+", "):("SpreadElement"===a.type?Je(a.argument)?e.appendLeft(a.start,r+", ( "):e.appendLeft(a.start,r+", "):e.appendLeft(a.start,r+", [ "),e.appendLeft(this.arguments[this.arguments.length-1].end," )"))}}n.trailingFunctionCommas&&this.arguments.length&&Qe(e,this.arguments[this.arguments.length-1].end),t.prototype.transpile.call(this,e,n)},e}(Ie),cn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,n,r,i){var a=this;if(n.classes){var s=this.parent.name,o=e.getIndentString(),l=this.getIndentation()+(r?o:""),c=l+o,u=Ge(this.body,(function(t){return"constructor"===t.kind})),h=this.body[u],d="",f="";if(this.body.length?(e.remove(this.start,this.body[0].start),e.remove(this.body[this.body.length-1].end,this.end)):e.remove(this.start,this.end),h){h.value.body.isConstructorBody=!0;var p=this.body[u+1];u>0&&(e.remove(this.body[u-1].end,h.start),e.move(h.start,p?p.start:this.end-1,this.body[0].start)),r||e.appendLeft(h.end,";")}var m=[];this.body.forEach((function(t){if("FieldDefinition"===t.type&&(m.push(t.computed?"this"+e.slice(t.start,t.end)+";":"this."+e.slice(t.start,t.end)+";"),e.remove(t.start,t.end),""!==e.byStart[t.end].content)){for(var n=0;n<e.byStart[t.end].content.length&&-1===e.byStart[t.end].content.slice(0,n).indexOf(";");n++);n>0&&e.remove(t.end,t.end+n)}}));var g=!1!==this.program.options.namedFunctionExpressions,y=g||this.parent.superClass||"ClassDeclaration"!==this.parent.type;if(this.parent.superClass){var v="if ( "+i+" ) "+s+".__proto__ = "+i+";\n"+l+s+".prototype = Object.create( "+i+" && "+i+".prototype );\n"+l+s+".prototype.constructor = "+s+";";d+=h?"\n\n"+l+v:(v="function "+s+" () {"+(m.length?"\n"+c+m.join("\n"+c)+"\n"+c:"")+(i?"\n"+c+i+".apply(this, arguments);\n"+l+"}":"}")+(r?"":";")+(this.body.length?"\n\n"+l:"")+v)+"\n\n"+l}else if(!h){var b="function "+(y?s+" ":"")+"() {"+(m.length?"\n"+c+m.join("\n"+c)+"\n"+l:"")+"}";"ClassDeclaration"===this.parent.type&&(b+=";"),this.body.length&&(b+="\n\n"+l),d+=b}h&&m.length&&e.appendLeft(h.value.body.start+1,"\n"+c+m.join("\n"+c));var x,_,w=this.findScope(!1),S=[],E=[];if(this.body.forEach((function(t,r){if("get"!==t.kind&&"set"!==t.kind||!n.getterSetter||Ue.missingTransform("getters and setters","getterSetter",t),"FieldDefinition"!==t.type)if("constructor"!==t.kind){t.static&&e.remove(t.start,t.start+(" "==e.original[t.start+6]?7:6));var i,o="method"!==t.kind,c=t.key.name;(Oe[c]||t.value.body.scope.references[c])&&(c=w.createIdentifier(c));var h=!1;if(t.computed||"Literal"!==t.key.type||(h=!0,t.computed=!0),o){if(t.computed)throw new Error("Computed accessor properties are not currently supported");e.remove(t.start,t.key.start),t.static?(~E.indexOf(t.key.name)||E.push(t.key.name),_||(_=w.createIdentifier("staticAccessors")),i=""+_):(~S.indexOf(t.key.name)||S.push(t.key.name),x||(x=w.createIdentifier("prototypeAccessors")),i=""+x)}else i=t.static?""+s:s+".prototype";t.computed||(i+="."),(u>0&&r===u+1||0===r&&u===a.body.length-1)&&(i="\n\n"+l+i);var d=t.key.end;if(t.computed)if(h)e.prependRight(t.key.start,"["),e.appendLeft(t.key.end,"]");else{for(;"]"!==e.original[d];)d+=1;d+=1}var f=(o?"."+t.kind:"")+" = "+(t.value.async?"async ":"")+"function"+(t.value.generator?"* ":" ")+(t.computed||o||!g?"":c+" ");e.remove(d,t.value.start),e.prependRight(t.value.start,f),e.appendLeft(t.end,";"),t.value.generator&&e.remove(t.start,t.key.start);var p=t.key.start;if(t.computed&&!h)for(;"["!=e.original[p];)--p;t.start<p?e.overwrite(t.start,p,i):e.prependRight(t.start,i)}else e.overwrite(t.key.start,t.key.end,"function"+(y?" "+s:""))})),S.length||E.length){var M=[],C=[];S.length&&(M.push("var "+x+" = { "+S.map((function(t){return t+": { configurable: true }"})).join(",")+" };"),C.push("Object.defineProperties( "+s+".prototype, "+x+" );")),E.length&&(M.push("var "+_+" = { "+E.map((function(t){return t+": { configurable: true }"})).join(",")+" };"),C.push("Object.defineProperties( "+s+", "+_+" );")),h&&(d+="\n\n"+l),d+=M.join("\n"+l),h||(d+="\n\n"+l),f+="\n\n"+l+C.join("\n"+l)}h?e.appendLeft(h.end,d):e.prependRight(this.start,d),e.appendLeft(this.end,f)}t.prototype.transpile.call(this,e,n)},e}(Ie),un=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.id?(this.name=this.id.name,this.findScope(!0).addDeclaration(this.id,"class")):this.name=this.findScope(!0).createIdentifier("defaultExport"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(t,e){if(e.classes){this.superClass||function(t,e){var n=t.start,r=t.end,i=e.getIndentString(),a=i.length,s=n-a;t.program.indentExclusions[s]||e.original.slice(s,n)!==i||e.remove(s,n);for(var o,l=new RegExp(i+"\\S","g"),c=e.original.slice(n,r);o=l.exec(c);){var u=n+o.index;t.program.indentExclusions[u]||e.remove(u,u+a)}}(this.body,t);var n=this.superClass&&(this.superClass.name||"superclass"),r=this.getIndentation(),i=r+t.getIndentString(),a="ExportDefaultDeclaration"===this.parent.type;a&&t.remove(this.parent.start,this.start);var s=this.start;this.id?(t.overwrite(s,this.id.start,"var "),s=this.id.end):t.prependLeft(s,"var "+this.name),this.superClass?this.superClass.end===this.body.start?(t.remove(s,this.superClass.start),t.appendLeft(s," = /*@__PURE__*/(function ("+n+") {\n"+i)):(t.overwrite(s,this.superClass.start," = "),t.overwrite(this.superClass.end,this.body.start,"/*@__PURE__*/(function ("+n+") {\n"+i)):s===this.body.start?t.appendLeft(s," = "):t.overwrite(s,this.body.start," = "),this.body.transpile(t,e,!!this.superClass,n);var o=a?"\n\n"+r+"export default "+this.name+";":"";this.superClass?(t.appendLeft(this.end,"\n\n"+i+"return "+this.name+";\n"+r+"}("),t.move(this.superClass.start,this.superClass.end,this.end),t.prependRight(this.end,"));"+o)):o&&t.prependRight(this.end,o)}else this.body.transpile(t,e,!1,null)},e}(Ie),hn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.name=(this.id?this.id.name:"VariableDeclarator"===this.parent.type?this.parent.id.name:"AssignmentExpression"!==this.parent.type?null:"Identifier"===this.parent.left.type?this.parent.left.name:"MemberExpression"===this.parent.left.type?this.parent.left.property.name:null)||this.findScope(!0).createIdentifier("anonymous"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(t,e){if(e.classes){var n=this.superClass&&(this.superClass.name||"superclass"),r=this.getIndentation(),i=r+t.getIndentString();this.superClass?(t.remove(this.start,this.superClass.start),t.remove(this.superClass.end,this.body.start),t.appendRight(this.start,"/*@__PURE__*/(function ("+n+") {\n"+i)):t.overwrite(this.start,this.body.start,"/*@__PURE__*/(function () {\n"+i),this.body.transpile(t,e,!0,n);var a="";this.superClass&&(a=t.slice(this.superClass.start,this.superClass.end),t.remove(this.superClass.start,this.superClass.end)),t.appendLeft(this.end,"\n\n"+i+"return "+this.name+";\n"+r+"}("+a+"))")}else this.body.transpile(t,e,!1)},e}(Ie),dn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(t){if(this.findNearest(sn).shouldRewriteAsFunction){if(this.label)throw new Ue("Labels are not currently supported in a loop with locally-scoped variables",this);t.overwrite(this.start,this.start+8,"return")}},e}(Ie),fn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.moduleExport&&Ue.missingTransform("export","moduleExport",this),t.prototype.initialise.call(this,e)},e}(Ie),pn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.moduleExport&&Ue.missingTransform("export","moduleExport",this),t.prototype.initialise.call(this,e)},e}(Ie),mn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.findScope=function(t){return t||!this.createdScope?this.parent.findScope(t):this.body.scope},e.prototype.initialise=function(e){if(this.body.createScope(),this.createdScope=!0,this.reassigned=Object.create(null),this.aliases=Object.create(null),this.thisRefs=[],t.prototype.initialise.call(this,e),e.letConst)for(var n=Object.keys(this.body.scope.declarations),r=n.length;r--;){for(var i=this.body.scope.declarations[n[r]],a=i.instances.length;a--;){var s=i.instances[a].findNearest(/Function/);if(s&&s.depth>this.depth){this.shouldRewriteAsFunction=!0;for(var o=0,l=this.thisRefs;o<l.length;o+=1){var c=l[o];c.alias=c.alias||c.findLexicalBoundary().getThisAlias()}break}}if(this.shouldRewriteAsFunction)break}},e.prototype.transpile=function(e,n){var r="ForOfStatement"!=this.type&&("BlockStatement"!==this.body.type||"BlockStatement"===this.body.type&&this.body.synthetic);if(this.shouldRewriteAsFunction){var i=this.getIndentation(),a=i+e.getIndentString(),s=this.args?" "+this.args.join(", ")+" ":"",o=this.params?" "+this.params.join(", ")+" ":"",l=this.findScope(!0),c=l.createIdentifier("loop"),u="var "+c+" = function ("+o+") "+(this.body.synthetic?"{\n"+i+e.getIndentString():""),h=(this.body.synthetic?"\n"+i+"}":"")+";\n\n"+i;if(e.prependRight(this.body.start,u),e.appendLeft(this.body.end,h),e.move(this.start,this.body.start,this.body.end),this.canBreak||this.canReturn){var d=l.createIdentifier("returned"),f="{\n"+a+"var "+d+" = "+c+"("+s+");\n";this.canBreak&&(f+="\n"+a+"if ( "+d+" === 'break' ) break;"),this.canReturn&&(f+="\n"+a+"if ( "+d+" ) return "+d+".v;"),e.prependRight(this.body.end,f+="\n"+i+"}")}else{var p=c+"("+s+");";"DoWhileStatement"===this.type?e.overwrite(this.start,this.body.start,"do {\n"+a+p+"\n"+i+"}"):e.prependRight(this.body.end,p)}}else r&&(e.appendLeft(this.body.start,"{ "),e.prependRight(this.body.end," }"));t.prototype.transpile.call(this,e,n)},e}(Ie),gn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.findScope=function(t){return t||!this.createdScope?this.parent.findScope(t):this.body.scope},e.prototype.transpile=function(e,n){var r=this,i=this.getIndentation()+e.getIndentString();if(this.shouldRewriteAsFunction){var a="VariableDeclaration"===this.init.type?this.init.declarations.map((function(t){return De(t.id)})):[],s=this.aliases;this.args=a.map((function(t){return t in r.aliases?r.aliases[t].outer:t})),this.params=a.map((function(t){return t in r.aliases?r.aliases[t].inner:t}));var o=Object.keys(this.reassigned).map((function(t){return s[t].outer+" = "+s[t].inner+";"}));o.length&&(this.body.synthetic?e.appendLeft(this.body.body[0].end,"; "+o.join(" ")):e.appendLeft(this.body.body[this.body.body.length-1].end,"\n\n"+i+o.join("\n"+i)))}t.prototype.transpile.call(this,e,n)},e}(mn),yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.findScope=function(t){return t||!this.createdScope?this.parent.findScope(t):this.body.scope},e.prototype.transpile=function(e,n){var r=this,i="VariableDeclaration"===this.left.type;if(this.shouldRewriteAsFunction){var a=i?this.left.declarations.map((function(t){return De(t.id)})):[];this.args=a.map((function(t){return t in r.aliases?r.aliases[t].outer:t})),this.params=a.map((function(t){return t in r.aliases?r.aliases[t].inner:t}))}t.prototype.transpile.call(this,e,n);var s=i?this.left.declarations[0].id:this.left;"Identifier"!==s.type&&this.destructurePattern(e,s,i)},e.prototype.destructurePattern=function(t,e,n){var r=this.findScope(!0),i=this.getIndentation()+t.getIndentString(),a=r.createIdentifier("ref"),s=this.body.body.length?this.body.body[0].start:this.body.start+1;t.move(e.start,e.end,s),t.prependRight(e.end,n?a:"var "+a);var o=[];je(t,(function(t){return r.createIdentifier(t)}),(function(t){return r.resolveName(t.name)}),e,a,!1,o);var l=";\n"+i;o.forEach((function(t,e){e===o.length-1&&(l=";\n\n"+i),t(s,"",l)}))},e}(mn),vn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.forOf&&!e.dangerousForOf&&Ue.missingTransform("for-of statements","forOf",this,"dangerousForOf"),this.await&&e.asyncAwait&&Ue.missingTransform("for-await-of statements","asyncAwait",this),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){if(t.prototype.transpile.call(this,e,n),n.dangerousForOf)if(this.body.body[0]){var r=this.findScope(!0),i=this.getIndentation(),a=i+e.getIndentString(),s=r.createIdentifier("i"),o=r.createIdentifier("list");this.body.synthetic&&(e.prependRight(this.left.start,"{\n"+a),e.appendLeft(this.body.body[0].end,"\n"+i+"}"));var l=this.body.body[0].start;e.remove(this.left.end,this.right.start),e.move(this.left.start,this.left.end,l),e.prependRight(this.right.start,"var "+s+" = 0, "+o+" = "),e.appendLeft(this.right.end,"; "+s+" < "+o+".length; "+s+" += 1");var c="VariableDeclaration"===this.left.type,u=c?this.left.declarations[0].id:this.left;if("Identifier"!==u.type){var h=[],d=r.createIdentifier("ref");je(e,(function(t){return r.createIdentifier(t)}),(function(t){return r.resolveName(t.name)}),u,d,!c,h);var f=";\n"+a;h.forEach((function(t,e){e===h.length-1&&(f=";\n\n"+a),t(l,"",f)})),c?(e.appendLeft(this.left.start+this.left.kind.length+1,d),e.appendLeft(this.left.end," = "+o+"["+s+"];\n"+a)):e.appendLeft(this.left.end,"var "+d+" = "+o+"["+s+"];\n"+a)}else e.appendLeft(this.left.end," = "+o+"["+s+"];\n\n"+a)}else"VariableDeclaration"===this.left.type&&"var"===this.left.kind?(e.remove(this.start,this.left.start),e.appendLeft(this.left.end,";"),e.remove(this.left.end,this.end)):e.remove(this.start,this.end)},e}(mn),bn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.generator&&e.generator&&Ue.missingTransform("generators","generator",this),this.async&&e.asyncAwait&&Ue.missingTransform("async functions","asyncAwait",this),this.body.createScope(),this.id&&this.findScope(!0).addDeclaration(this.id,"function"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){t.prototype.transpile.call(this,e,n),n.trailingFunctionCommas&&this.params.length&&Qe(e,this.params[this.params.length-1].end)},e}(Ie),xn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.generator&&e.generator&&Ue.missingTransform("generators","generator",this),this.async&&e.asyncAwait&&Ue.missingTransform("async functions","asyncAwait",this),this.body.createScope(),this.id&&this.body.scope.addDeclaration(this.id,"function"),t.prototype.initialise.call(this,e);var n,r=this.parent;if(e.conciseMethodProperty&&"Property"===r.type&&"init"===r.kind&&r.method&&"Identifier"===r.key.type||e.classes&&"MethodDefinition"===r.type&&"method"===r.kind&&"Identifier"===r.key.type?n=r.key.name:this.id&&"Identifier"===this.id.type&&(n=this.id.alias||this.id.name),n)for(var i=0,a=this.params;i<a.length;i+=1){var s=a[i];if("Identifier"===s.type&&n===s.name){var o=this.body.scope,l=o.declarations[n],c=o.createIdentifier(n);s.alias=c;for(var u=0,h=l.instances;u<h.length;u+=1)h[u].alias=c;break}}},e.prototype.transpile=function(e,n){t.prototype.transpile.call(this,e,n),n.trailingFunctionCommas&&this.params.length&&Qe(e,this.params[this.params.length-1].end)},e}(Ie),_n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.findScope=function(t){return this.parent.params&&~this.parent.params.indexOf(this)||"FunctionExpression"===this.parent.type&&this===this.parent.id?this.parent.body.scope:this.parent.findScope(t)},e.prototype.initialise=function(t){if(function t(e,n){return"MemberExpression"===e.type?!e.computed&&t(e.object,e):"Identifier"===e.type?!n||!/(Function|Class)Expression/.test(n.type)&&("VariableDeclarator"===n.type?e===n.init:"MemberExpression"===n.type||"MethodDefinition"===n.type?n.computed||e===n.object:"ArrayPattern"!==n.type&&("Property"===n.type?"ObjectPattern"!==n.parent.type&&(n.computed||e===n.value):"MethodDefinition"!==n.type&&("ExportSpecifier"!==n.type||e===n.local))):void 0}(this,this.parent)){if(t.arrow&&"arguments"===this.name&&!this.findScope(!1).contains(this.name)){var e=this.findLexicalBoundary(),n=this.findNearest("ArrowFunctionExpression"),r=this.findNearest(sn);n&&n.depth>e.depth&&(this.alias=e.getArgumentsAlias()),r&&r.body.contains(this)&&r.depth>e.depth&&(this.alias=e.getArgumentsAlias())}this.findScope(!1).addReference(this)}},e.prototype.transpile=function(t){this.alias&&t.overwrite(this.start,this.end,this.alias,{storeName:!0,contentOnly:!0})},e}(Ie),wn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){("BlockStatement"!==this.consequent.type||"BlockStatement"===this.consequent.type&&this.consequent.synthetic)&&(e.appendLeft(this.consequent.start,"{ "),e.prependRight(this.consequent.end," }")),this.alternate&&"IfStatement"!==this.alternate.type&&("BlockStatement"!==this.alternate.type||"BlockStatement"===this.alternate.type&&this.alternate.synthetic)&&(e.appendLeft(this.alternate.start,"{ "),e.prependRight(this.alternate.end," }")),t.prototype.transpile.call(this,e,n)},e}(Ie),Sn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.moduleImport&&Ue.missingTransform("dynamic import expressions","moduleImport",this),t.prototype.initialise.call(this,e)},e}(Ie),En=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.moduleImport&&Ue.missingTransform("import","moduleImport",this),t.prototype.initialise.call(this,e)},e}(Ie),Mn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.findScope(!0).addDeclaration(this.local,"import"),t.prototype.initialise.call(this,e)},e}(Ie),Cn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.findScope(!0).addDeclaration(this.local,"import"),t.prototype.initialise.call(this,e)},e}(Ie),Tn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,n){var r,i=this.name;e.overwrite(i.start,this.value?this.value.start:this.name.end,(/-/.test(r=i.name)?"'"+r+"'":r)+": "+(this.value?"":"true")),t.prototype.transpile.call(this,e,n)},e}(Ie),An=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(t){var e,n=!0,r=this.parent.children[this.parent.children.length-1];(r&&"JSXText"===(e=r).type&&!/\S/.test(e.value)&&/\n/.test(e.value)||this.parent.openingElement.attributes.length)&&(n=!1),t.overwrite(this.start,this.end,n?" )":")")},e}(Ie),kn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(t){var e,n=!0,r=this.parent.children[this.parent.children.length-1];r&&"JSXText"===(e=r).type&&!/\S/.test(e.value)&&/\n/.test(e.value)&&(n=!1),t.overwrite(this.start,this.end,n?" )":")")},e}(Ie);function Ln(t,e){return t=t.replace(/\u00a0/g,"&nbsp;"),e&&/\n/.test(t)&&(t=t.replace(/\s+$/,"")),t=t.replace(/^\n\r?\s+/,"").replace(/\s*\n\r?\s*/gm," "),JSON.stringify(t)}var Pn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,n){t.prototype.transpile.call(this,e,n);var r=this.children.filter((function(t){return"JSXText"!==t.type||/\S/.test(t.raw)||!/\n/.test(t.raw)}));if(r.length){var i,a=(this.openingElement||this.openingFragment).end;for(i=0;i<r.length;i+=1){var s=r[i];if("JSXExpressionContainer"===s.type&&"JSXEmptyExpression"===s.expression.type||e.appendLeft(a,","+("\n"===e.original[a]&&"JSXText"!==s.type?"":" ")),"JSXText"===s.type){var o=Ln(s.value,i===r.length-1);e.overwrite(s.start,s.end,o)}a=s.end}}},e}(Ie),Rn=/[\u2028-\u2029]/g,In={ArrayExpression:Ke,ArrowFunctionExpression:tn,AssignmentExpression:nn,AwaitExpression:rn,BinaryExpression:an,BreakStatement:on,CallExpression:ln,ClassBody:cn,ClassDeclaration:un,ClassExpression:hn,ContinueStatement:dn,DoWhileStatement:mn,ExportNamedDeclaration:pn,ExportDefaultDeclaration:fn,ForStatement:gn,ForInStatement:yn,ForOfStatement:vn,FunctionDeclaration:bn,FunctionExpression:xn,Identifier:_n,IfStatement:wn,Import:Sn,ImportDeclaration:En,ImportDefaultSpecifier:Mn,ImportSpecifier:Cn,JSXAttribute:Tn,JSXClosingElement:An,JSXClosingFragment:kn,JSXElement:Pn,JSXExpressionContainer:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,n){e.remove(this.start,this.expression.start),e.remove(this.expression.end,this.end),t.prototype.transpile.call(this,e,n)},e}(Ie),JSXFragment:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Pn),JSXOpeningElement:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,n){t.prototype.transpile.call(this,e,n),e.overwrite(this.start,this.name.start,this.program.jsx+"( ");var r="JSXIdentifier"===this.name.type&&this.name.name[0]===this.name.name[0].toLowerCase();r&&e.prependRight(this.name.start,"'");var i=this.attributes.length,a=this.name.end;if(i){var s,o,l,c=!1;for(s=0;s<i;s+=1)if("JSXSpreadAttribute"===this.attributes[s].type){c=!0;break}for(a=this.attributes[0].end,s=0;s<i;s+=1){var u=this.attributes[s];if(s>0&&(u.start===a?e.prependRight(a,", "):e.overwrite(a,u.start,", ")),c&&"JSXSpreadAttribute"!==u.type){var h=this.attributes[s-1],d=this.attributes[s+1];h&&"JSXSpreadAttribute"!==h.type||e.prependRight(u.start,"{ "),d&&"JSXSpreadAttribute"!==d.type||e.appendLeft(u.end," }")}a=u.end}if(c)if(1===i)l=r?"',":",";else{if(!this.program.options.objectAssign)throw new Ue("Mixed JSX attributes ending in spread requires specified objectAssign option with 'Object.assign' or polyfill helper.",this);l=r?"', "+this.program.options.objectAssign+"({},":", "+this.program.options.objectAssign+"({},",o=")"}else l=r?"', {":", {",o=" }";e.prependRight(this.name.end,l),o&&e.appendLeft(this.attributes[i-1].end,o)}else e.appendLeft(this.name.end,r?"', null":", null"),a=this.name.end;this.selfClosing?e.overwrite(a,this.end,this.attributes.length?")":" )"):e.remove(a,this.end)},e}(Ie),JSXOpeningFragment:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(t){t.overwrite(this.start,this.end,this.program.jsx+"( React.Fragment, null")},e}(Ie),JSXSpreadAttribute:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,n){e.remove(this.start,this.argument.start),e.remove(this.argument.end,this.end),t.prototype.transpile.call(this,e,n)},e}(Ie),Literal:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(){"string"==typeof this.value&&this.program.indentExclusionElements.push(this)},e.prototype.transpile=function(t,e){e.numericLiteral&&this.raw.match(/^0[bo]/i)&&t.overwrite(this.start,this.end,String(this.value),{storeName:!0,contentOnly:!0}),"string"==typeof this.value&&this.value.match(Rn)&&t.overwrite(this.start,this.end,this.raw.replace(Rn,(function(t){return"\u2028"==t?"\\u2028":"\\u2029"})),{contentOnly:!0})},e}(Ie),MemberExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,n){n.reservedProperties&&Oe[this.property.name]&&(e.overwrite(this.object.end,this.property.start,"['"),e.appendLeft(this.property.end,"']")),t.prototype.transpile.call(this,e,n)},e}(Ie),NewExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if(e.spreadRest&&this.arguments.length)for(var n=this.findLexicalBoundary(),r=this.arguments.length;r--;){var i=this.arguments[r];if("SpreadElement"===i.type&&qe(i.argument)){this.argumentsArrayAlias=n.getArgumentsArrayAlias();break}}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){if(t.prototype.transpile.call(this,e,n),n.spreadRest&&this.arguments.length&&Xe(e,this,this.arguments),n.spreadRest&&this.arguments.length){var r=this.arguments[0];Ze(e,this.arguments,r.start,this.argumentsArrayAlias,!0)&&(e.prependRight(this.start+"new".length," (Function.prototype.bind.apply("),e.overwrite(this.callee.end,r.start,", [ null ].concat( "),e.appendLeft(this.end," ))"))}this.arguments.length&&Qe(e,this.arguments[this.arguments.length-1].end)},e}(Ie),ObjectExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,n){var r;t.prototype.transpile.call(this,e,n);for(var i=this.start+1,a=0,s=0,o=null,l=null,c=0;c<this.properties.length;++c){var u=this.properties[c];if("SpreadElement"===u.type){var h=u.argument;"ObjectExpression"===h.type||"Literal"===h.type&&"string"!=typeof h.value?"ObjectExpression"===h.type&&h.properties.length>0?(e.remove(u.start,h.properties[0].start),e.remove(h.properties[h.properties.length-1].end,u.end),(r=this.properties).splice.apply(r,[c,1].concat(h.properties)),c--):(e.remove(u.start,c===this.properties.length-1?u.end:this.properties[c+1].start),this.properties.splice(c,1),c--):(a+=1,null===o&&(o=c))}else u.computed&&n.computedProperty&&(s+=1,null===l&&(l=c))}if(!a||n.objectRestSpread||s&&n.computedProperty){if(a){if(!this.program.options.objectAssign)throw new Ue("Object spread operator requires specified objectAssign option with 'Object.assign' or polyfill helper.",this);for(var d=this.properties.length;d--;){var f=this.properties[d];if("Property"===f.type&&!s){var p=this.properties[d-1],m=this.properties[d+1];p&&"Property"===p.type||e.prependRight(f.start,"{"),m&&"Property"===m.type||e.appendLeft(f.end,"}")}"SpreadElement"===f.type&&(e.remove(f.start,f.argument.start),e.remove(f.argument.end,f.end))}i=this.properties[0].start,s?"SpreadElement"===this.properties[0].type?(e.overwrite(this.start,i,this.program.options.objectAssign+"({}, "),e.remove(this.end-1,this.end),e.appendRight(this.end,")")):(e.prependLeft(this.start,this.program.options.objectAssign+"("),e.appendRight(this.end,")")):(e.overwrite(this.start,i,this.program.options.objectAssign+"({}, "),e.overwrite(this.properties[this.properties.length-1].end,this.end,")"))}}else a=0,o=null;if(s&&n.computedProperty){var g,y,v=this.getIndentation();"VariableDeclarator"===this.parent.type&&1===this.parent.parent.declarations.length&&"Identifier"===this.parent.id.type?(g=!0,y=this.parent.id.alias||this.parent.id.name):("AssignmentExpression"===this.parent.type&&"ExpressionStatement"===this.parent.parent.type&&"Identifier"===this.parent.left.type||"AssignmentPattern"===this.parent.type&&"Identifier"===this.parent.left.type)&&(g=!0,y=this.parent.left.alias||this.parent.left.name),a&&(g=!1),y=this.findScope(!1).resolveName(y);var b=i,x=this.end;g||(null===o||l<o?(y=this.findScope(!0).createDeclaration("obj"),e.prependRight(this.start,"( "+y+" = ")):y=null);for(var _,w=this.properties.length,S=!1,E=!0,M=0;M<w;M+=1){var C=this.properties[M],T=M>0?this.properties[M-1].end:b;if("Property"===C.type&&(C.computed||_&&!a)){if(0===M&&(T=this.start+1),_=C,y){var A=(g?";\n"+v+y:", "+y)+("Literal"===C.key.type||C.computed?"":".");T<C.start?e.overwrite(T,C.start,A):e.prependRight(C.start,A)}else y=this.findScope(!0).createDeclaration("obj"),e.appendRight(C.start,"( "+y+" = {}, "+y+(C.computed?"":"."));var k=C.key.end;if(C.computed){for(;"]"!==e.original[k];)k+=1;k+=1}"Literal"!==C.key.type||C.computed?C.shorthand||C.method&&!C.computed&&n.conciseMethodProperty?e.overwrite(C.key.start,C.key.end,e.slice(C.key.start,C.key.end).replace(/:/," =")):(C.value.start>k&&e.remove(k,C.value.start),e.prependLeft(k," = ")):e.overwrite(C.start,C.key.end+1,"["+e.slice(C.start,C.key.end)+"] = "),!C.method||!C.computed&&n.conciseMethodProperty||(C.value.generator&&e.remove(C.start,C.key.start),e.prependRight(C.value.start,"function"+(C.value.generator?"*":"")+" "))}else"SpreadElement"===C.type?y&&M>0&&(_||(_=this.properties[M-1]),e.appendLeft(_.end,", "+y+" )"),_=null,y=null):(!E&&a&&(e.prependRight(C.start,"{"),e.appendLeft(C.end,"}")),S=!0);if(E&&("SpreadElement"===C.type||C.computed)){var L=S?this.properties[this.properties.length-1].end:this.end-1;","==e.original[L]&&++L;var P=e.slice(L,x);e.prependLeft(T,P),e.remove(L,x),E=!1}var R=C.end;if(M<w-1&&!S)for(;","!==e.original[R];)R+=1;else M==w-1&&(R=this.end);C.end!=R&&e.overwrite(C.end,R,"",{contentOnly:!0})}!g&&y&&e.appendLeft(_.end,", "+y+" )")}},e}(Ie),Property:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){"get"!==this.kind&&"set"!==this.kind||!e.getterSetter||Ue.missingTransform("getters and setters","getterSetter",this),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){if(t.prototype.transpile.call(this,e,n),n.conciseMethodProperty&&!this.computed&&"ObjectPattern"!==this.parent.type)if(this.shorthand)e.prependRight(this.start,this.key.name+": ");else if(this.method){var r="";!1!==this.program.options.namedFunctionExpressions&&(r=" "+(r="Literal"===this.key.type&&"number"==typeof this.key.value?"":"Identifier"===this.key.type?Oe[this.key.name]||!/^[a-z_$][a-z0-9_$]*$/i.test(this.key.name)||this.value.body.scope.references[this.key.name]?this.findScope(!0).createIdentifier(this.key.name):this.key.name:this.findScope(!0).createIdentifier(this.key.value))),this.start<this.key.start&&e.remove(this.start,this.key.start),e.appendLeft(this.key.end,": "+(this.value.async?"async ":"")+"function"+(this.value.generator?"*":"")+r)}n.reservedProperties&&Oe[this.key.name]&&(e.prependRight(this.key.start,"'"),e.appendLeft(this.key.end,"'"))},e}(Ie),ReturnStatement:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(t){this.loop=this.findNearest(sn),this.nearestFunction=this.findNearest(/Function/),this.loop&&(!this.nearestFunction||this.loop.depth>this.nearestFunction.depth)&&(this.loop.canReturn=!0,this.shouldWrap=!0),this.argument&&this.argument.initialise(t)},e.prototype.transpile=function(t,e){var n=this.shouldWrap&&this.loop&&this.loop.shouldRewriteAsFunction;this.argument?(n&&t.prependRight(this.argument.start,"{ v: "),this.argument.transpile(t,e),n&&t.appendLeft(this.argument.end," }")):n&&t.appendLeft(this.start+6," {}")},e}(Ie),Super:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(t){if(t.classes){if(this.method=this.findNearest("MethodDefinition"),!this.method)throw new Ue("use of super outside class method",this);var e=this.findNearest("ClassBody").parent;if(this.superClassName=e.superClass&&(e.superClass.name||"superclass"),!this.superClassName)throw new Ue("super used in base class",this);if(this.isCalled="CallExpression"===this.parent.type&&this===this.parent.callee,"constructor"!==this.method.kind&&this.isCalled)throw new Ue("super() not allowed outside class constructor",this);if(this.isMember="MemberExpression"===this.parent.type,!this.isCalled&&!this.isMember)throw new Ue("Unexpected use of `super` (expected `super(...)` or `super.*`)",this)}if(t.arrow){var n=this.findLexicalBoundary(),r=this.findNearest("ArrowFunctionExpression"),i=this.findNearest(sn);r&&r.depth>n.depth&&(this.thisAlias=n.getThisAlias()),i&&i.body.contains(this)&&i.depth>n.depth&&(this.thisAlias=n.getThisAlias())}},e.prototype.transpile=function(t,e){if(e.classes){t.overwrite(this.start,this.end,this.isCalled||this.method.static?this.superClassName:this.superClassName+".prototype",{storeName:!0,contentOnly:!0});var n=this.isCalled?this.parent:this.parent.parent;if(n&&"CallExpression"===n.type){this.noCall||t.appendLeft(n.callee.end,".call");var r=this.thisAlias||"this";n.arguments.length?t.appendLeft(n.arguments[0].start,r+", "):t.appendLeft(n.end-1,""+r)}}},e}(Ie),TaggedTemplateExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.templateString&&!e.dangerousTaggedTemplateString&&Ue.missingTransform("tagged template strings","templateString",this,"dangerousTaggedTemplateString"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){if(n.templateString&&n.dangerousTaggedTemplateString){var r=this.quasi.expressions.concat(this.quasi.quasis).sort((function(t,e){return t.start-e.start})),i=this.program.body.scope,a=this.quasi.quasis.map((function(t){return JSON.stringify(t.value.cooked)})).join(", "),s=this.program.templateLiteralQuasis[a];s||(s=i.createIdentifier("templateObject"),e.prependLeft(this.program.prependAt,"var "+s+" = Object.freeze(["+a+"]);\n"),this.program.templateLiteralQuasis[a]=s),e.overwrite(this.tag.end,r[0].start,"("+s);var o=r[0].start;r.forEach((function(t){"TemplateElement"===t.type?e.remove(o,t.end):e.overwrite(o,t.start,", "),o=t.end})),e.overwrite(o,this.end,")")}t.prototype.transpile.call(this,e,n)},e}(Ie),TemplateElement:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(){this.program.indentExclusionElements.push(this)},e}(Ie),TemplateLiteral:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,n){if(t.prototype.transpile.call(this,e,n),n.templateString&&"TaggedTemplateExpression"!==this.parent.type){var r=this.expressions.concat(this.quasis).sort((function(t,e){return t.start-e.start||t.end-e.end})).filter((function(t,e){return"TemplateElement"!==t.type||!!t.value.raw||!e}));if(r.length>=3){var i=r[0];"TemplateElement"===i.type&&""===i.value.raw&&"TemplateElement"===r[2].type&&r.shift()}var a=!(1===this.quasis.length&&0===this.expressions.length||"TemplateLiteral"===this.parent.type||"AssignmentExpression"===this.parent.type||"AssignmentPattern"===this.parent.type||"VariableDeclarator"===this.parent.type||"BinaryExpression"===this.parent.type&&"+"===this.parent.operator);a&&e.appendRight(this.start,"(");var s=this.start;r.forEach((function(t,n){var r=0===n?a?"(":"":" + ";if("TemplateElement"===t.type)e.overwrite(s,t.end,r+JSON.stringify(t.value.cooked));else{var i="Identifier"!==t.type;i&&(r+="("),e.remove(s,t.start),r&&e.prependRight(t.start,r),i&&e.appendLeft(t.end,")")}s=t.end})),a&&e.appendLeft(s,")"),e.overwrite(s,this.end,"",{contentOnly:!0})}},e}(Ie),ThisExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(t){var e=this.findLexicalBoundary();if(t.letConst)for(var n=this.findNearest(sn);n&&n.depth>e.depth;)n.thisRefs.push(this),n=n.parent.findNearest(sn);if(t.arrow){var r=this.findNearest("ArrowFunctionExpression");r&&r.depth>e.depth&&(this.alias=e.getThisAlias())}},e.prototype.transpile=function(t){this.alias&&t.overwrite(this.start,this.end,this.alias,{storeName:!0,contentOnly:!0})},e}(Ie),UpdateExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if("Identifier"===this.argument.type){var n=this.findScope(!1).findDeclaration(this.argument.name),r=n&&n.node.ancestor(3);r&&"ForStatement"===r.type&&r.body.contains(this)&&(r.reassigned[this.argument.name]=!0)}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){"Identifier"===this.argument.type&&en(this.argument,this.findScope(!1)),t.prototype.transpile.call(this,e,n)},e}(Ie),VariableDeclaration:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(t){this.scope=this.findScope("var"===this.kind),this.declarations.forEach((function(e){return e.initialise(t)}))},e.prototype.transpile=function(t,e){var n=this,r=this.getIndentation(),i=this.kind;if(e.letConst&&"var"!==i&&t.overwrite(this.start,this.start+this.kind.length,i="var",{contentOnly:!0,storeName:!0}),e.destructuring&&"ForOfStatement"!==this.parent.type&&"ForInStatement"!==this.parent.type){var a,s=this.start;this.declarations.forEach((function(i,o){if(i.transpile(t,e),"Identifier"===i.id.type)o>0&&"Identifier"!==n.declarations[o-1].id.type&&t.overwrite(s,i.id.start,"var ");else{var l=sn.test(n.parent.type);0===o?t.remove(s,i.id.start):t.overwrite(s,i.id.start,";\n"+r);var c="Identifier"===i.init.type&&!i.init.rewritten,u=c?i.init.alias||i.init.name:i.findScope(!0).createIdentifier("ref");s=i.start;var h=[];c?t.remove(i.id.end,i.end):h.push((function(e,n,r){t.prependRight(i.id.end,"var "+u),t.appendLeft(i.init.end,""+r),t.move(i.id.end,i.end,e)}));var d=i.findScope(!1);je(t,(function(t){return d.createIdentifier(t)}),(function(t){return d.resolveName(t.name)}),i.id,u,l,h);var f=l?"var ":"",p=l?", ":";\n"+r;h.forEach((function(t,e){o===n.declarations.length-1&&e===h.length-1&&(p=l?"":";"),t(i.start,0===e?f:"",p)}))}s=i.end,a="Identifier"!==i.id.type})),a&&this.end>s&&t.overwrite(s,this.end,"",{contentOnly:!0})}else this.declarations.forEach((function(n){n.transpile(t,e)}))},e}(Ie),VariableDeclarator:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){var n=this.parent.kind;"let"===n&&"ForStatement"===this.parent.parent.type&&(n="for.let"),this.parent.scope.addDeclaration(this.id,n),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(t,e){if(!this.init&&e.letConst&&"var"!==this.parent.kind){var n=this.findNearest(/Function|^For(In|Of)?Statement|^(?:Do)?WhileStatement/);!n||/Function/.test(n.type)||this.isLeftDeclaratorOfLoop()||t.appendLeft(this.id.end," = (void 0)")}this.id&&this.id.transpile(t,e),this.init&&this.init.transpile(t,e)},e.prototype.isLeftDeclaratorOfLoop=function(){return this.parent&&"VariableDeclaration"===this.parent.type&&this.parent.parent&&("ForInStatement"===this.parent.parent.type||"ForOfStatement"===this.parent.parent.type)&&this.parent.parent.left&&this.parent.parent.left.declarations[0]===this},e}(Ie),WhileStatement:mn},Dn={Program:["body"],Literal:[]},Bn={IfStatement:"consequent",ForStatement:"body",ForInStatement:"body",ForOfStatement:"body",WhileStatement:"body",DoWhileStatement:"body",ArrowFunctionExpression:"body"};function On(t,e,n,r){this.type="Root",this.jsx=r.jsx||"React.createElement",this.options=r,this.source=t,this.magicString=new Pe(t),this.ast=e,this.depth=0,function t(e,n){if(e)if("length"in e)for(var r=e.length;r--;)t(e[r],n);else if(!e.__wrapped){e.__wrapped=!0,Dn[e.type]||(Dn[e.type]=Object.keys(e).filter((function(t){return"object"==typeof e[t]})));var i=Bn[e.type];if(i&&"BlockStatement"!==e[i].type){var a=e[i];e[i]={start:a.start,end:a.end,type:"BlockStatement",body:[a],synthetic:!0}}e.parent=n,e.program=n.program||n,e.depth=n.depth+1,e.keys=Dn[e.type],e.indentation=void 0;for(var s=0,o=Dn[e.type];s<o.length;s+=1)t(e[o[s]],e);e.program.magicString.addSourcemapLocation(e.start),e.program.magicString.addSourcemapLocation(e.end),e.__proto__=(("BlockStatement"===e.type?Ye:In[e.type])||Ie).prototype}}(this.body=e,this),this.body.__proto__=Ye.prototype,this.templateLiteralQuasis=Object.create(null);for(var i=0;i<this.body.body.length;++i)if(!this.body.body[i].directive){this.prependAt=this.body.body[i].start;break}this.objectWithoutPropertiesHelper=null,this.indentExclusionElements=[],this.body.initialise(n),this.indentExclusions=Object.create(null);for(var a=0,s=this.indentExclusionElements;a<s.length;a+=1)for(var o=s[a],l=o.start;l<o.end;l+=1)this.indentExclusions[l]=!0;this.body.transpile(this.magicString,n)}On.prototype={export:function(t){return void 0===t&&(t={}),{code:this.magicString.toString(),map:this.magicString.generateMap({file:t.file,source:t.source,includeContent:!1!==t.includeContent})}},findNearest:function(){return null},findScope:function(){return null},getObjectWithoutPropertiesHelper:function(t){return this.objectWithoutPropertiesHelper||(this.objectWithoutPropertiesHelper=this.body.scope.createIdentifier("objectWithoutProperties"),t.prependLeft(this.prependAt,"function "+this.objectWithoutPropertiesHelper+" (obj, exclude) { var target = {}; for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k) && exclude.indexOf(k) === -1) target[k] = obj[k]; return target; }\n")),this.objectWithoutPropertiesHelper}};var Nn=it.extend(pe,he(),(function(t){return class extends t{getTokenFromCode(t){if(35===t){++this.pos;const t=this.readWord1();return this.finishToken(be,t)}return super.getTokenFromCode(t)}parseClass(t,e){this._privateBoundNamesStack=this._privateBoundNamesStack||[];const n=Object.create(this._privateBoundNamesStack[this._privateBoundNamesStack.length-1]||null);this._privateBoundNamesStack.push(n),this._unresolvedPrivateNamesStack=this._unresolvedPrivateNamesStack||[];const r=Object.create(null);this._unresolvedPrivateNamesStack.push(r);const i=super.parseClass(t,e);if(this._privateBoundNamesStack.pop(),this._unresolvedPrivateNamesStack.pop(),this._unresolvedPrivateNamesStack.length)Object.assign(this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1],r);else{const t=Object.keys(r);t.length&&(t.sort(((t,e)=>r[t]-r[e])),this.raise(r[t[0]],"Usage of undeclared private name"))}return i}parseClassElement(t){if(this.eat(ge.semi))return null;const e=this.startNode();if(!(this.options.ecmaVersion>=8)||this.type!=be){if(this.isContextual("async")){me.lastIndex=this.pos;let t=me.exec(this.input),n=this.input.charAt(this.pos+t[0].length);if(";"===n||"="===n)return e.key=this.parseIdent(!0),e.computed=!1,ye.call(this,e),this.finishNode(e,"FieldDefinition"),this.semicolon(),e}return super.parseClassElement.apply(this,arguments)}return e.key=ve.call(this),e.computed=!1,"constructor"==e.key.name&&this.raise(e.start,"Classes may not have a field named constructor"),Object.prototype.hasOwnProperty.call(this._privateBoundNamesStack[this._privateBoundNamesStack.length-1],e.key.name)&&this.raise(e.start,"Duplicate private element"),this._privateBoundNamesStack[this._privateBoundNamesStack.length-1][e.key.name]=!0,delete this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1][e.key.name],ye.call(this,e),this.finishNode(e,"FieldDefinition"),this.semicolon(),e}parseClassMethod(t,e,n,r){return e||n||"method"!=t.kind||t.static||this.options.ecmaVersion<8||this.type==ge.parenL?super.parseClassMethod.apply(this,arguments):(ye.call(this,t),delete t.kind,delete t.static,t=this.finishNode(t,"FieldDefinition"),this.semicolon(),t)}parseSubscripts(t,e,n,r){for(let i;;){if(!(i=this.eat(ge.bracketL))&&!this.eat(ge.dot))return super.parseSubscripts(t,e,n,r);{let r=this.startNodeAt(e,n);r.object=t,i?r.property=this.parseExpression():this.type==be?(r.property=ve.call(this),this._privateBoundNamesStack.length&&this._privateBoundNamesStack[this._privateBoundNamesStack.length-1][r.property.name]||(this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1][r.property.name]=r.property.start)):r.property=this.parseIdent(!0),r.computed=Boolean(i),i&&this.expect(ge.bracketR),t=this.finishNode(r,"MemberExpression")}}}parseMaybeUnary(t,e){const n=super.parseMaybeUnary(t,e);return"delete"==n.operator&&"MemberExpression"==n.argument.type&&"PrivateName"==n.argument.property.type&&this.raise(n.start,"Private elements may not be deleted"),n}parseIdent(t,e){const n=super.parseIdent(t,e);return this._inFieldValue&&"arguments"==n.name&&this.raise(n.start,"A class field initializer may not contain arguments"),n}parseExprAtom(t){const e=super.parseExprAtom(t);return this._inFieldValue&&"Super"==e.type&&this.raise(e.start,"A class field initializer may not contain super"),e}}})),Fn=["getterSetter","arrow","classes","computedProperty","conciseMethodProperty","defaultParameter","destructuring","forOf","generator","letConst","moduleExport","moduleImport","numericLiteral","parameterDestructuring","spreadRest","stickyRegExp","templateString","exponentiation","reservedProperties","trailingFunctionCommas","asyncAwait","objectRestSpread"],zn=["dangerousTaggedTemplateString","dangerousForOf"];function Un(t,e){return function(t,e){var n;void 0===e&&(e={});var r=null;try{n=Nn.parse(t,{ecmaVersion:10,preserveParens:!0,sourceType:"module",allowAwaitOutsideFunction:!0,allowReturnOutsideFunction:!0,allowHashBang:!0,onComment:function(t,e){if(!r){var n=/@jsx\s+([^\s]+)/.exec(e);n&&(r=n[1])}}}),e.jsx=r||e.jsx}catch(e){throw e.snippet=ze(t,e.loc),e.toString=function(){return e.name+": "+e.message+"\n"+e.snippet},e}var i=Object.create(null);return Fn.forEach((function(t){i[t]=!0})),zn.forEach((function(t){i[t]=!0})),Object.keys(e.transforms||{}).forEach((function(t){if("modules"===t)return"moduleImport"in e.transforms||(i.moduleImport=e.transforms.modules),void("moduleExport"in e.transforms||(i.moduleExport=e.transforms.modules));if(!(t in i))throw new Error("Unknown transform '"+t+"'");i[t]=e.transforms[t]})),!0===e.objectAssign&&(e.objectAssign="Object.assign"),new On(t,n,i,e).export(e)}(t,{...e,transforms:{asyncAwait:!1,classes:!1,getterSetter:!1,...e.transforms}})}var Gn=n(2817),Hn=n.n(Gn),jn={plain:{color:"#C5C8C6",backgroundColor:"#1D1F21"},styles:[{types:["prolog","comment","doctype","cdata"],style:{color:"hsl(30, 20%, 50%)"}},{types:["property","tag","boolean","number","constant","symbol"],style:{color:"hsl(350, 40%, 70%)"}},{types:["attr-name","string","char","builtin","insterted"],style:{color:"hsl(75, 70%, 60%)"}},{types:["operator","entity","url","string","variable","language-css"],style:{color:"hsl(40, 90%, 60%)"}},{types:["deleted"],style:{color:"rgb(255, 85, 85)"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["regex","important"],style:{color:"#e90"}},{types:["atrule","attr-value","keyword"],style:{color:"hsl(350, 40%, 70%)"}},{types:["punctuation","symbol"],style:{opacity:"0.7"}}]},Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wn=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},$n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yn=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},qn=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},Xn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Jn=function(t){function e(){var n,i;Wn(this,e);for(var a=arguments.length,s=Array(a),o=0;o<a;o++)s[o]=arguments[o];return n=i=Xn(this,t.call.apply(t,[this].concat(s))),i.state={code:""},i.updateContent=function(t){i.setState({code:t},(function(){i.props.onChange&&i.props.onChange(i.state.code)}))},i.highlightCode=function(t){return r.createElement(_,{Prism:u.Z,code:t,theme:i.props.theme||jn,language:i.props.language},(function(t){var e=t.tokens,n=t.getLineProps,i=t.getTokenProps;return r.createElement(r.Fragment,null,e.map((function(t,e){return r.createElement("div",n({line:t,key:e}),t.map((function(t,e){return r.createElement("span",i({token:t,key:e}))})))})))}))},Xn(i,n)}return Yn(e,t),e.getDerivedStateFromProps=function(t,e){return t.code!==e.prevCodeProp?{code:t.code,prevCodeProp:t.code}:null},e.prototype.render=function(){var t=this.props,e=t.style,n=(t.code,t.onChange,t.language,t.theme),i=qn(t,["style","code","onChange","language","theme"]),a=this.state.code,s=n&&"object"===Vn(n.plain)?n.plain:{};return r.createElement(c.Z,$n({value:a,padding:10,highlight:this.highlightCode,onValueChange:this.updateContent,style:$n({whiteSpace:"pre",fontFamily:"monospace"},s,e)},i))},e}(r.Component),Zn=(0,r.createContext)({}),Kn={assign:Hn()},Qn={objectAssign:"_poly.assign",transforms:{dangerousForOf:!0,dangerousTaggedTemplateString:!0}},tr=function(t){return Un(t,Qn).code},er=function(t,e){return function(n){function i(){return Wn(this,i),Xn(this,n.apply(this,arguments))}return Yn(i,n),i.prototype.componentDidCatch=function(t){e(t)},i.prototype.render=function(){return"function"==typeof t?r.createElement(t,null):t},i}(r.Component)},nr=function(t,e){var n=Object.keys(e),i=n.map((function(t){return e[t]}));return(new(Function.prototype.bind.apply(Function,[null].concat(["_poly","React"],n,[t])))).apply(void 0,[Kn,r].concat(i))},rr=function(t,e){var n=t.code,r=void 0===n?"":n,i=t.scope,a=void 0===i?{}:i,s=r.trim().replace(/;$/,""),o=tr("return ("+s+")").trim();return er(nr(o,a),e)},ir=function(t,e,n){var r=t.code,i=void 0===r?"":r,a=t.scope,s=void 0===a?{}:a;if(!/render\s*\(/.test(i))return n(new SyntaxError("No-Inline evaluations must call `render`."));nr(tr(i),$n({},s,{render:function(t){void 0===t?n(new SyntaxError("`render` must be called with valid JSX.")):e(er(t,n))}}))},ar=function(t){function e(){var n,r;Wn(this,e);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=Xn(this,t.call.apply(t,[this].concat(a))),r.onChange=function(t){var e=r.props,n=e.scope,i=e.transformCode,a=e.noInline;r.transpile({code:t,scope:n,transformCode:i,noInline:a})},r.onError=function(t){r.setState({error:t.toString()})},r.transpile=function(t){var e=t.code,n=t.scope,i=t.transformCode,a=t.noInline,s=void 0!==a&&a,o={code:i?i(e):e,scope:n},l=function(t){return r.setState({element:void 0,error:t.toString()})},c=function(t){return r.setState($n({},u,{element:t}))},u={unsafeWrapperError:void 0,error:void 0};try{s?(r.setState($n({},u,{element:null})),ir(o,c,l)):c(rr(o,l))}catch(h){r.setState($n({},u,{error:h.toString()}))}},Xn(r,n)}return Yn(e,t),e.prototype.UNSAFE_componentWillMount=function(){var t=this.props,e=t.code,n=t.scope,r=t.transformCode,i=t.noInline;this.transpile({code:e,scope:n,transformCode:r,noInline:i})},e.prototype.componentDidUpdate=function(t){var e=t.code,n=t.scope,r=t.noInline,i=t.transformCode,a=this.props,s=a.code,o=a.scope,l=a.noInline,c=a.transformCode;s===e&&o===n&&l===r&&c===i||this.transpile({code:s,scope:o,transformCode:c,noInline:l})},e.prototype.render=function(){var t=this.props,e=t.children,n=t.code,i=t.language,a=t.theme,s=t.disabled;return r.createElement(Zn.Provider,{value:$n({},this.state,{code:n,language:i,theme:a,disabled:s,onError:this.onError,onChange:this.onChange})},e)},e}(r.Component);function sr(t){return r.createElement(Zn.Consumer,null,(function(e){var n=e.code,i=e.language,a=e.theme,s=e.disabled,o=e.onChange;return r.createElement(Jn,$n({theme:a,code:n,language:i,disabled:s,onChange:o},t))}))}function or(t){return r.createElement(Zn.Consumer,null,(function(e){var n=e.error;return n?r.createElement("pre",t,n):null}))}function lr(t){var e=t.Component,n=qn(t,["Component"]);return r.createElement(e,n,r.createElement(Zn.Consumer,null,(function(t){var e=t.element;return e&&r.createElement(e,null)})))}ar.defaultProps={code:"",noInline:!1,language:"jsx",disabled:!1},lr.defaultProps={Component:"div"};var cr=n(5999),ur=n(2263);function hr(t){let{children:e,fallback:n}=t;return(0,l.Z)()?r.createElement(r.Fragment,null,e?.()):n??null}var dr=n(6412);const fr="playgroundContainer_X_Ta",pr="playgroundHeader_dyrN",mr="playgroundEditor_Q6Y7",gr="playgroundPreview_DzOI";function yr(t){let{children:e}=t;return r.createElement("div",{className:(0,o.Z)(pr)},e)}function vr(){return r.createElement("div",null,"Loading...")}function br(){return r.createElement(r.Fragment,null,r.createElement(yr,null,r.createElement(cr.Z,{id:"theme.Playground.result",description:"The result label of the live codeblocks"},"Result")),r.createElement("div",{className:gr},r.createElement(hr,{fallback:r.createElement(vr,null)},(()=>r.createElement(r.Fragment,null,r.createElement(lr,null),r.createElement(or,null))))))}function xr(){const t=(0,l.Z)();return r.createElement(sr,{key:String(t),className:mr})}function _r(){return r.createElement(r.Fragment,null,r.createElement(yr,null,r.createElement(cr.Z,{id:"theme.Playground.liveEditor",description:"The live editor label of the live codeblocks"},"Live Editor")),r.createElement(xr,null))}function wr(t){let{children:e,transformCode:n,...i}=t;const{siteConfig:{themeConfig:s}}=(0,ur.Z)(),{liveCodeBlock:{playgroundPosition:o}}=s,l=(0,dr.p)(),c=i.metastring?.includes("noInline")??!1;return r.createElement("div",{className:fr},r.createElement(ar,(0,a.Z)({code:e.replace(/\n$/,""),noInline:c,transformCode:n??(t=>`${t};`),theme:l},i),"top"===o?r.createElement(r.Fragment,null,r.createElement(br,null),r.createElement(_r,null)):r.createElement(r.Fragment,null,r.createElement(_r,null),r.createElement(br,null))))}var Sr=n(9071),Er=n(5281),Mr=n(7594),Cr=n.n(Mr);const Tr=/title=(?<quote>["'])(?<title>.*?)\1/,Ar=/\{(?<range>[\d,-]+)\}/,kr={js:{start:"\\/\\/",end:""},jsBlock:{start:"\\/\\*",end:"\\*\\/"},jsx:{start:"\\{\\s*\\/\\*",end:"\\*\\/\\s*\\}"},bash:{start:"#",end:""},html:{start:"\x3c!--",end:"--\x3e"}};function Lr(t,e){const n=t.map((t=>{const{start:n,end:r}=kr[t];return`(?:${n}\\s*(${e.flatMap((t=>[t.line,t.block?.start,t.block?.end].filter(Boolean))).join("|")})\\s*${r})`})).join("|");return new RegExp(`^\\s*(?:${n})\\s*$`)}function Pr(t,e){let n=t.replace(/\n$/,"");const{language:r,magicComments:i,metastring:a}=e;if(a&&Ar.test(a)){const t=a.match(Ar).groups.range;if(0===i.length)throw new Error(`A highlight range has been given in code block's metastring (\`\`\` ${a}), but no magic comment config is available. Docusaurus applies the first magic comment entry's className for metastring ranges.`);const e=i[0].className,r=Cr()(t).filter((t=>t>0)).map((t=>[t-1,[e]]));return{lineClassNames:Object.fromEntries(r),code:n}}if(void 0===r)return{lineClassNames:{},code:n};const s=function(t,e){switch(t){case"js":case"javascript":case"ts":case"typescript":return Lr(["js","jsBlock"],e);case"jsx":case"tsx":return Lr(["js","jsBlock","jsx"],e);case"html":return Lr(["js","jsBlock","html"],e);case"python":case"py":case"bash":return Lr(["bash"],e);case"markdown":case"md":return Lr(["html","jsx","bash"],e);default:return Lr(Object.keys(kr),e)}}(r,i),o=n.split("\n"),l=Object.fromEntries(i.map((t=>[t.className,{start:0,range:""}]))),c=Object.fromEntries(i.filter((t=>t.line)).map((t=>{let{className:e,line:n}=t;return[n,e]}))),u=Object.fromEntries(i.filter((t=>t.block)).map((t=>{let{className:e,block:n}=t;return[n.start,e]}))),h=Object.fromEntries(i.filter((t=>t.block)).map((t=>{let{className:e,block:n}=t;return[n.end,e]})));for(let f=0;f<o.length;){const t=o[f].match(s);if(!t){f+=1;continue}const e=t.slice(1).find((t=>void 0!==t));c[e]?l[c[e]].range+=`${f},`:u[e]?l[u[e]].start=f:h[e]&&(l[h[e]].range+=`${l[h[e]].start}-${f-1},`),o.splice(f,1)}n=o.join("\n");const d={};return Object.entries(l).forEach((t=>{let[e,{range:n}]=t;Cr()(n).forEach((t=>{d[t]??=[],d[t].push(e)}))})),{lineClassNames:d,code:n}}const Rr="codeBlockContainer_Ckt0";function Ir(t){let{as:e,...n}=t;const i=function(t){const e={color:"--prism-color",backgroundColor:"--prism-background-color"},n={};return Object.entries(t.plain).forEach((t=>{let[r,i]=t;const a=e[r];a&&"string"==typeof i&&(n[a]=i)})),n}((0,dr.p)());return r.createElement(e,(0,a.Z)({},n,{style:i,className:(0,o.Z)(n.className,Rr,Er.k.common.codeBlock)}))}const Dr={codeBlockContent:"codeBlockContent_biex",codeBlockTitle:"codeBlockTitle_Ktv7",codeBlock:"codeBlock_bY9V",codeBlockStandalone:"codeBlockStandalone_MEMb",codeBlockLines:"codeBlockLines_e6Vv",codeBlockLinesWithNumbering:"codeBlockLinesWithNumbering_o6Pm",buttonGroup:"buttonGroup__atx"};function Br(t){let{children:e,className:n}=t;return r.createElement(Ir,{as:"pre",tabIndex:0,className:(0,o.Z)(Dr.codeBlockStandalone,"thin-scrollbar",n)},r.createElement("code",{className:Dr.codeBlockLines},e))}var Or=n(6668),Nr=n(902);const Fr={attributes:!0,characterData:!0,childList:!0,subtree:!0};function zr(t,e){const[n,i]=(0,r.useState)(),a=(0,r.useCallback)((()=>{i(t.current?.closest("[role=tabpanel][hidden]"))}),[t,i]);(0,r.useEffect)((()=>{a()}),[a]),function(t,e,n){void 0===n&&(n=Fr);const i=(0,Nr.zX)(e),a=(0,Nr.Ql)(n);(0,r.useEffect)((()=>{const e=new MutationObserver(i);return t&&e.observe(t,a),()=>e.disconnect()}),[t,i,a])}(n,(t=>{t.forEach((t=>{"attributes"===t.type&&"hidden"===t.attributeName&&(e(),a())}))}),{attributes:!0,characterData:!1,childList:!1,subtree:!1})}const Ur="codeLine_lJS_",Gr="codeLineNumber_Tfdd",Hr="codeLineContent_feaV";function jr(t){let{line:e,classNames:n,showLineNumbers:i,getLineProps:s,getTokenProps:l}=t;1===e.length&&"\n"===e[0].content&&(e[0].content="");const c=s({line:e,className:(0,o.Z)(n,i&&Ur)}),u=e.map(((t,e)=>r.createElement("span",(0,a.Z)({key:e},l({token:t,key:e})))));return r.createElement("span",c,i?r.createElement(r.Fragment,null,r.createElement("span",{className:Gr}),r.createElement("span",{className:Hr},u)):u,r.createElement("br",null))}const Vr={copyButtonCopied:"copyButtonCopied_obH4",copyButtonIcons:"copyButtonIcons_eSgA",copyButtonIcon:"copyButtonIcon_y97N",copyButtonSuccessIcon:"copyButtonSuccessIcon_LjdS"};function Wr(t){let{code:e,className:n}=t;const[i,a]=(0,r.useState)(!1),s=(0,r.useRef)(void 0),l=(0,r.useCallback)((()=>{!function(t,e){let{target:n=document.body}=void 0===e?{}:e;const r=document.createElement("textarea"),i=document.activeElement;r.value=t,r.setAttribute("readonly",""),r.style.contain="strict",r.style.position="absolute",r.style.left="-9999px",r.style.fontSize="12pt";const a=document.getSelection();let s=!1;a.rangeCount>0&&(s=a.getRangeAt(0)),n.append(r),r.select(),r.selectionStart=0,r.selectionEnd=t.length;let o=!1;try{o=document.execCommand("copy")}catch{}r.remove(),s&&(a.removeAllRanges(),a.addRange(s)),i&&i.focus()}(e),a(!0),s.current=window.setTimeout((()=>{a(!1)}),1e3)}),[e]);return(0,r.useEffect)((()=>()=>window.clearTimeout(s.current)),[]),r.createElement("button",{type:"button","aria-label":i?(0,cr.I)({id:"theme.CodeBlock.copied",message:"Copied",description:"The copied button label on code blocks"}):(0,cr.I)({id:"theme.CodeBlock.copyButtonAriaLabel",message:"Copy code to clipboard",description:"The ARIA label for copy code blocks button"}),title:(0,cr.I)({id:"theme.CodeBlock.copy",message:"Copy",description:"The copy button label on code blocks"}),className:(0,o.Z)("clean-btn",n,Vr.copyButton,i&&Vr.copyButtonCopied),onClick:l},r.createElement("span",{className:Vr.copyButtonIcons,"aria-hidden":"true"},r.createElement("svg",{className:Vr.copyButtonIcon,viewBox:"0 0 24 24"},r.createElement("path",{d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"})),r.createElement("svg",{className:Vr.copyButtonSuccessIcon,viewBox:"0 0 24 24"},r.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))}const $r="wordWrapButtonIcon_Bwma",Yr="wordWrapButtonEnabled_EoeP";function qr(t){let{className:e,onClick:n,isEnabled:i}=t;const a=(0,cr.I)({id:"theme.CodeBlock.wordWrapToggle",message:"Toggle word wrap",description:"The title attribute for toggle word wrapping button of code block lines"});return r.createElement("button",{type:"button",onClick:n,className:(0,o.Z)("clean-btn",e,i&&Yr),"aria-label":a,title:a},r.createElement("svg",{className:$r,viewBox:"0 0 24 24","aria-hidden":"true"},r.createElement("path",{fill:"currentColor",d:"M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"})))}function Xr(t){let{children:e,className:n="",metastring:i,title:s,showLineNumbers:l,language:c}=t;const{prism:{defaultLanguage:u,magicComments:h}}=(0,Or.L)(),f=c??n.split(" ").find((t=>t.startsWith("language-")))?.replace(/language-/,"")??u;const p=(0,dr.p)(),m=function(){const[t,e]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),a=(0,r.useRef)(null),s=(0,r.useCallback)((()=>{const n=a.current.querySelector("code");t?n.removeAttribute("style"):(n.style.whiteSpace="pre-wrap",n.style.overflowWrap="anywhere"),e((t=>!t))}),[a,t]),o=(0,r.useCallback)((()=>{const{scrollWidth:t,clientWidth:e}=a.current,n=t>e||a.current.querySelector("code").hasAttribute("style");i(n)}),[a]);return zr(a,o),(0,r.useEffect)((()=>{o()}),[t,o]),(0,r.useEffect)((()=>(window.addEventListener("resize",o,{passive:!0}),()=>{window.removeEventListener("resize",o)})),[o]),{codeBlockRef:a,isEnabled:t,isCodeScrollable:n,toggle:s}}(),g=function(t){return t?.match(Tr)?.groups.title??""}(i)||s,{lineClassNames:y,code:v}=Pr(e,{metastring:i,language:f,magicComments:h}),b=l??function(t){return Boolean(t?.includes("showLineNumbers"))}(i);return r.createElement(Ir,{as:"div",className:(0,o.Z)(n,f&&!n.includes(`language-${f}`)&&`language-${f}`)},g&&r.createElement("div",{className:Dr.codeBlockTitle},g),r.createElement("div",{className:Dr.codeBlockContent},r.createElement(_,(0,a.Z)({},d,{theme:p,code:v,language:f??"text"}),(t=>{let{className:e,tokens:n,getLineProps:i,getTokenProps:a}=t;return r.createElement("pre",{tabIndex:0,ref:m.codeBlockRef,className:(0,o.Z)(e,Dr.codeBlock,"thin-scrollbar")},r.createElement("code",{className:(0,o.Z)(Dr.codeBlockLines,b&&Dr.codeBlockLinesWithNumbering)},n.map(((t,e)=>r.createElement(jr,{key:e,line:t,getLineProps:i,getTokenProps:a,classNames:y[e],showLineNumbers:b})))))})),r.createElement("div",{className:Dr.buttonGroup},(m.isEnabled||m.isCodeScrollable)&&r.createElement(qr,{className:Dr.codeButton,onClick:()=>m.toggle(),isEnabled:m.isEnabled}),r.createElement(Wr,{className:Dr.codeButton,code:v}))))}const Jr=(t=>function(e){return e.live?r.createElement(wr,(0,a.Z)({scope:Sr.Z},e)):r.createElement(t,e)})((function(t){let{children:e,...n}=t;const i=(0,l.Z)(),s=function(t){return r.Children.toArray(t).some((t=>(0,r.isValidElement)(t)))?t:Array.isArray(t)?t.join(""):t}(e),o="string"==typeof s?Xr:Br;return r.createElement(o,(0,a.Z)({key:String(i)},n),s)}));var Zr=n(9960);var Kr=n(6043);const Qr="details_lb9f",ti="isBrowser_bmU9",ei="collapsibleContent_i85q";function ni(t){return!!t&&("SUMMARY"===t.tagName||ni(t.parentElement))}function ri(t,e){return!!t&&(t===e||ri(t.parentElement,e))}function ii(t){let{summary:e,children:n,...i}=t;const s=(0,l.Z)(),c=(0,r.useRef)(null),{collapsed:u,setCollapsed:h}=(0,Kr.u)({initialState:!i.open}),[d,f]=(0,r.useState)(i.open);return r.createElement("details",(0,a.Z)({},i,{ref:c,open:d,"data-collapsed":u,className:(0,o.Z)(Qr,s&&ti,i.className),onMouseDown:t=>{ni(t.target)&&t.detail>1&&t.preventDefault()},onClick:t=>{t.stopPropagation();const e=t.target;ni(e)&&ri(e,c.current)&&(t.preventDefault(),u?(h(!1),f(!0)):h(!0))}}),e??r.createElement("summary",null,"Details"),r.createElement(Kr.z,{lazy:!1,collapsed:u,disableSSRStyle:!0,onCollapseTransitionEnd:t=>{h(t),f(!t)}},r.createElement("div",{className:ei},n)))}const ai="details_b_Ee";function si(t){let{...e}=t;return r.createElement(ii,(0,a.Z)({},e,{className:(0,o.Z)("alert alert--info",ai,e.className)}))}var oi=n(2503);function li(t){return r.createElement(oi.Z,t)}const ci="containsTaskList_mC6p";const ui="img_ev3q";const hi="admonition_LlT9",di="admonitionHeading_tbUL",fi="admonitionIcon_kALy",pi="admonitionContent_S0QG";const mi={note:{infimaClassName:"secondary",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))},label:r.createElement(cr.Z,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)"},"note")},tip:{infimaClassName:"success",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 12 16"},r.createElement("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))},label:r.createElement(cr.Z,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)"},"tip")},danger:{infimaClassName:"danger",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 12 16"},r.createElement("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))},label:r.createElement(cr.Z,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)"},"danger")},info:{infimaClassName:"info",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))},label:r.createElement(cr.Z,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)"},"info")},caution:{infimaClassName:"warning",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 16 16"},r.createElement("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))},label:r.createElement(cr.Z,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)"},"caution")}},gi={secondary:"note",important:"info",success:"tip",warning:"danger"};function yi(t){const{mdxAdmonitionTitle:e,rest:n}=function(t){const e=r.Children.toArray(t),n=e.find((t=>r.isValidElement(t)&&"mdxAdmonitionTitle"===t.props?.mdxType)),i=r.createElement(r.Fragment,null,e.filter((t=>t!==n)));return{mdxAdmonitionTitle:n,rest:i}}(t.children);return{...t,title:t.title??e,children:n}}var vi=n(5357);const bi="container_lyt7";function xi(t){let{value:e}=t;const n=(0,vi.pv)(e);return r.createElement("div",{className:`${vi.ZE} ${bi}`,dangerouslySetInnerHTML:{__html:n}})}const _i={head:function(t){const e=r.Children.map(t.children,(t=>r.isValidElement(t)?function(t){if(t.props?.mdxType&&t.props.originalType){const{mdxType:e,originalType:n,...i}=t.props;return r.createElement(t.props.originalType,i)}return t}(t):t));return r.createElement(s.Z,t,e)},code:function(t){const e=["a","abbr","b","br","button","cite","code","del","dfn","em","i","img","input","ins","kbd","label","object","output","q","ruby","s","small","span","strong","sub","sup","time","u","var","wbr"];return r.Children.toArray(t.children).every((t=>"string"==typeof t&&!t.includes("\n")||(0,r.isValidElement)(t)&&e.includes(t.props?.mdxType)))?r.createElement("code",t):r.createElement(Jr,t)},a:function(t){return r.createElement(Zr.Z,t)},pre:function(t){return r.createElement(Jr,(0,r.isValidElement)(t.children)&&"code"===t.children.props?.originalType?t.children.props:{...t})},details:function(t){const e=r.Children.toArray(t.children),n=e.find((t=>r.isValidElement(t)&&"summary"===t.props?.mdxType)),i=r.createElement(r.Fragment,null,e.filter((t=>t!==n)));return r.createElement(si,(0,a.Z)({},t,{summary:n}),i)},ul:function(t){return r.createElement("ul",(0,a.Z)({},t,{className:(e=t.className,(0,o.Z)(e,e?.includes("contains-task-list")&&ci))}));var e},img:function(t){return r.createElement("img",(0,a.Z)({loading:"lazy"},t,{className:(e=t.className,(0,o.Z)(e,ui))}));var e},h1:t=>r.createElement(li,(0,a.Z)({as:"h1"},t)),h2:t=>r.createElement(li,(0,a.Z)({as:"h2"},t)),h3:t=>r.createElement(li,(0,a.Z)({as:"h3"},t)),h4:t=>r.createElement(li,(0,a.Z)({as:"h4"},t)),h5:t=>r.createElement(li,(0,a.Z)({as:"h5"},t)),h6:t=>r.createElement(li,(0,a.Z)({as:"h6"},t)),admonition:function(t){const{children:e,type:n,title:i,icon:a}=yi(t),s=function(t){const e=gi[t]??t,n=mi[e];return n||(console.warn(`No admonition config found for admonition type "${e}". Using Info as fallback.`),mi.info)}(n),l=i??s.label,{iconComponent:c}=s,u=a??r.createElement(c,null);return r.createElement("div",{className:(0,o.Z)(Er.k.common.admonition,Er.k.common.admonitionType(t.type),"alert",`alert--${s.infimaClassName}`,hi)},r.createElement("div",{className:di},r.createElement("span",{className:fi},u),l),r.createElement("div",{className:pi},e))},mermaid:function(t){return r.createElement(hr,null,(()=>r.createElement(xi,t)))}};function wi(t){let{children:e}=t;return r.createElement(i.Zo,{components:_i},e)}},9407:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(7462),i=n(7294),a=n(6010),s=n(3743);const o="tableOfContents_bqdL";function l(t){let{className:e,...n}=t;return i.createElement("div",{className:(0,a.Z)(o,"thin-scrollbar",e)},i.createElement(s.Z,(0,r.Z)({},n,{linkClassName:"table-of-contents__link toc-highlight",linkActiveClassName:"table-of-contents__link--active"})))}},3743:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var r=n(7462),i=n(7294),a=n(6668);function s(t){const e=t.map((t=>({...t,parentIndex:-1,children:[]}))),n=Array(7).fill(-1);e.forEach(((t,e)=>{const r=n.slice(2,t.level);t.parentIndex=Math.max(...r),n[t.level]=e}));const r=[];return e.forEach((t=>{const{parentIndex:n,...i}=t;n>=0?e[n].children.push(i):r.push(i)})),r}function o(t){let{toc:e,minHeadingLevel:n,maxHeadingLevel:r}=t;return e.flatMap((t=>{const e=o({toc:t.children,minHeadingLevel:n,maxHeadingLevel:r});return function(t){return t.level>=n&&t.level<=r}(t)?[{...t,children:e}]:e}))}function l(t){const e=t.getBoundingClientRect();return e.top===e.bottom?l(t.parentNode):e}function c(t,e){let{anchorTopOffset:n}=e;const r=t.find((t=>l(t).top>=n));if(r){return function(t){return t.top>0&&t.bottom<window.innerHeight/2}(l(r))?r:t[t.indexOf(r)-1]??null}return t[t.length-1]??null}function u(){const t=(0,i.useRef)(0),{navbar:{hideOnScroll:e}}=(0,a.L)();return(0,i.useEffect)((()=>{t.current=e?0:document.querySelector(".navbar").clientHeight}),[e]),t}function h(t){const e=(0,i.useRef)(void 0),n=u();(0,i.useEffect)((()=>{if(!t)return()=>{};const{linkClassName:r,linkActiveClassName:i,minHeadingLevel:a,maxHeadingLevel:s}=t;function o(){const t=function(t){return Array.from(document.getElementsByClassName(t))}(r),o=function(t){let{minHeadingLevel:e,maxHeadingLevel:n}=t;const r=[];for(let i=e;i<=n;i+=1)r.push(`h${i}.anchor`);return Array.from(document.querySelectorAll(r.join()))}({minHeadingLevel:a,maxHeadingLevel:s}),l=c(o,{anchorTopOffset:n.current}),u=t.find((t=>l&&l.id===function(t){return decodeURIComponent(t.href.substring(t.href.indexOf("#")+1))}(t)));t.forEach((t=>{!function(t,n){n?(e.current&&e.current!==t&&e.current.classList.remove(i),t.classList.add(i),e.current=t):t.classList.remove(i)}(t,t===u)}))}return document.addEventListener("scroll",o),document.addEventListener("resize",o),o(),()=>{document.removeEventListener("scroll",o),document.removeEventListener("resize",o)}}),[t,n])}function d(t){let{toc:e,className:n,linkClassName:r,isChild:a}=t;return e.length?i.createElement("ul",{className:a?void 0:n},e.map((t=>i.createElement("li",{key:t.id},i.createElement("a",{href:`#${t.id}`,className:r??void 0,dangerouslySetInnerHTML:{__html:t.value}}),i.createElement(d,{isChild:!0,toc:t.children,className:n,linkClassName:r}))))):null}const f=i.memo(d);function p(t){let{toc:e,className:n="table-of-contents table-of-contents__left-border",linkClassName:l="table-of-contents__link",linkActiveClassName:c,minHeadingLevel:u,maxHeadingLevel:d,...p}=t;const m=(0,a.L)(),g=u??m.tableOfContents.minHeadingLevel,y=d??m.tableOfContents.maxHeadingLevel,v=function(t){let{toc:e,minHeadingLevel:n,maxHeadingLevel:r}=t;return(0,i.useMemo)((()=>o({toc:s(e),minHeadingLevel:n,maxHeadingLevel:r})),[e,n,r])}({toc:e,minHeadingLevel:g,maxHeadingLevel:y});return h((0,i.useMemo)((()=>{if(l&&c)return{linkClassName:l,linkActiveClassName:c,minHeadingLevel:g,maxHeadingLevel:y}}),[l,c,g,y])),i.createElement(f,(0,r.Z)({toc:v,className:n,linkClassName:l},p))}},6412:(t,e,n)=>{"use strict";n.d(e,{p:()=>a});var r=n(2949),i=n(6668);function a(){const{prism:t}=(0,i.L)(),{colorMode:e}=(0,r.I)(),n=t.theme,a=t.darkTheme||n;return"dark"===e?a:n}},1173:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Collapsible:()=>p.z,HtmlClassNameProvider:()=>y.FG,NavbarSecondaryMenuFiller:()=>b.Zo,PageMetadata:()=>y.d,ReactContextError:()=>g.i6,SkipToContentFallbackId:()=>L.u,SkipToContentLink:()=>L.l,ThemeClassNames:()=>m.k,composeProviders:()=>g.Qc,createStorageSlot:()=>i.W,duplicates:()=>C.l,filterDocCardListItems:()=>s.MN,isMultiColumnFooterLinks:()=>E.a,isRegexpStringMatch:()=>M.F,listStorageKeys:()=>i._,listTagsByLetters:()=>S,processAdmonitionProps:()=>k,translateTagsPageTitle:()=>w,uniq:()=>C.j,useCollapsible:()=>p.u,useColorMode:()=>v.I,useContextualSearchFilters:()=>a._q,useCurrentSidebarCategory:()=>s.jA,useDocsPreferredVersion:()=>A.J,useEvent:()=>g.zX,useIsomorphicLayoutEffect:()=>g.LI,usePluralForm:()=>f,usePrevious:()=>g.D9,usePrismTheme:()=>T.p,useThemeConfig:()=>r.L,useWindowSize:()=>x.i});var r=n(6668),i=n(12),a=n(3320),s=n(3438),o=n(7294),l=n(2263);const c=["zero","one","two","few","many","other"];function u(t){return c.filter((e=>t.includes(e)))}const h={locale:"en",pluralForms:u(["one","other"]),select:t=>1===t?"one":"other"};function d(){const{i18n:{currentLocale:t}}=(0,l.Z)();return(0,o.useMemo)((()=>{try{return function(t){const e=new Intl.PluralRules(t);return{locale:t,pluralForms:u(e.resolvedOptions().pluralCategories),select:t=>e.select(t)}}(t)}catch(e){return console.error(`Failed to use Intl.PluralRules for locale "${t}".\nDocusaurus will fallback to the default (English) implementation.\nError: ${e.message}\n`),h}}),[t])}function f(){const t=d();return{selectMessage:(e,n)=>function(t,e,n){const r=t.split("|");if(1===r.length)return r[0];r.length>n.pluralForms.length&&console.error(`For locale=${n.locale}, a maximum of ${n.pluralForms.length} plural forms are expected (${n.pluralForms.join(",")}), but the message contains ${r.length}: ${t}`);const i=n.select(e),a=n.pluralForms.indexOf(i);return r[Math.min(a,r.length-1)]}(n,e,t)}}var p=n(6043),m=n(5281),g=n(902),y=n(1944),v=n(2949),b=n(3102),x=n(7524),_=n(5999);const w=()=>(0,_.I)({id:"theme.tags.tagsPageTitle",message:"Tags",description:"The title of the tag list page"});function S(t){const e={};return Object.values(t).forEach((t=>{const n=function(t){return t[0].toUpperCase()}(t.label);e[n]??=[],e[n].push(t)})),Object.entries(e).sort(((t,e)=>{let[n]=t,[r]=e;return n.localeCompare(r)})).map((t=>{let[e,n]=t;return{letter:e,tags:n.sort(((t,e)=>t.label.localeCompare(e.label)))}}))}var E=n(2489),M=n(8022),C=n(7392),T=n(6412),A=n(373);function k(t){const{mdxAdmonitionTitle:e,rest:n}=function(t){const e=o.Children.toArray(t),n=e.find((t=>o.isValidElement(t)&&"mdxAdmonitionTitle"===t.props?.mdxType)),r=o.createElement(o.Fragment,null,e.filter((t=>t!==n)));return{mdxAdmonitionTitle:n?.props.children,rest:r}}(t.children),r=t.title??e;return{...t,...r&&{title:r},children:n}}var L=n(5225)},5357:(t,e,n)=>{"use strict";e.pv=e.ZE=void 0;const r=n(655),i=n(7294),a=n(1173),s=r.__importDefault(n(3231));function o(){return(0,a.useThemeConfig)().mermaid}function l(){const{colorMode:t}=(0,a.useColorMode)(),e=o(),n=e.theme[t],{options:r}=e;return(0,i.useMemo)((()=>({startOnLoad:!1,...r,theme:n})),[n,r])}e.ZE="docusaurus-mermaid-container",e.pv=function(t,e){const n=l(),r=e??n;return(0,i.useMemo)((()=>{s.default.mermaidAPI.initialize(r);const e=`mermaid-svg-${Math.round(1e7*Math.random())}`;return s.default.render(e,t)}),[t,r])}},6486:function(t,e,n){var r;t=n.nmd(t),function(){var i,a="Expected a function",s="__lodash_hash_undefined__",o="__lodash_placeholder__",l=16,c=32,u=64,h=128,d=256,f=1/0,p=9007199254740991,m=NaN,g=4294967295,y=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",d]],v="[object Arguments]",b="[object Array]",x="[object Boolean]",_="[object Date]",w="[object Error]",S="[object Function]",E="[object GeneratorFunction]",M="[object Map]",C="[object Number]",T="[object Object]",A="[object Promise]",k="[object RegExp]",L="[object Set]",P="[object String]",R="[object Symbol]",I="[object WeakMap]",D="[object ArrayBuffer]",B="[object DataView]",O="[object Float32Array]",N="[object Float64Array]",F="[object Int8Array]",z="[object Int16Array]",U="[object Int32Array]",G="[object Uint8Array]",H="[object Uint8ClampedArray]",j="[object Uint16Array]",V="[object Uint32Array]",W=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,Y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,J=RegExp(q.source),Z=RegExp(X.source),K=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/[\\^$.*+?()[\]{}|]/g,at=RegExp(it.source),st=/^\s+/,ot=/\s/,lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ct=/\{\n\/\* \[wrapped with (.+)\] \*/,ut=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dt=/[()=,{}\[\]\/\s]/,ft=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mt=/\w*$/,gt=/^[-+]0x[0-9a-f]+$/i,yt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,bt=/^0o[0-7]+$/i,xt=/^(?:0|[1-9]\d*)$/,_t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wt=/($^)/,St=/['\n\r\u2028\u2029\\]/g,Et="\\ud800-\\udfff",Mt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ct="\\u2700-\\u27bf",Tt="a-z\\xdf-\\xf6\\xf8-\\xff",At="A-Z\\xc0-\\xd6\\xd8-\\xde",kt="\\ufe0e\\ufe0f",Lt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pt="['\u2019]",Rt="["+Et+"]",It="["+Lt+"]",Dt="["+Mt+"]",Bt="\\d+",Ot="["+Ct+"]",Nt="["+Tt+"]",Ft="[^"+Et+Lt+Bt+Ct+Tt+At+"]",zt="\\ud83c[\\udffb-\\udfff]",Ut="[^"+Et+"]",Gt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ht="[\\ud800-\\udbff][\\udc00-\\udfff]",jt="["+At+"]",Vt="\\u200d",Wt="(?:"+Nt+"|"+Ft+")",$t="(?:"+jt+"|"+Ft+")",Yt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",qt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Xt="(?:"+Dt+"|"+zt+")"+"?",Jt="["+kt+"]?",Zt=Jt+Xt+("(?:"+Vt+"(?:"+[Ut,Gt,Ht].join("|")+")"+Jt+Xt+")*"),Kt="(?:"+[Ot,Gt,Ht].join("|")+")"+Zt,Qt="(?:"+[Ut+Dt+"?",Dt,Gt,Ht,Rt].join("|")+")",te=RegExp(Pt,"g"),ee=RegExp(Dt,"g"),ne=RegExp(zt+"(?="+zt+")|"+Qt+Zt,"g"),re=RegExp([jt+"?"+Nt+"+"+Yt+"(?="+[It,jt,"$"].join("|")+")",$t+"+"+qt+"(?="+[It,jt+Wt,"$"].join("|")+")",jt+"?"+Wt+"+"+Yt,jt+"+"+qt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Bt,Kt].join("|"),"g"),ie=RegExp("["+Vt+Et+Mt+kt+"]"),ae=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,se=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],oe=-1,le={};le[O]=le[N]=le[F]=le[z]=le[U]=le[G]=le[H]=le[j]=le[V]=!0,le[v]=le[b]=le[D]=le[x]=le[B]=le[_]=le[w]=le[S]=le[M]=le[C]=le[T]=le[k]=le[L]=le[P]=le[I]=!1;var ce={};ce[v]=ce[b]=ce[D]=ce[B]=ce[x]=ce[_]=ce[O]=ce[N]=ce[F]=ce[z]=ce[U]=ce[M]=ce[C]=ce[T]=ce[k]=ce[L]=ce[P]=ce[R]=ce[G]=ce[H]=ce[j]=ce[V]=!0,ce[w]=ce[S]=ce[I]=!1;var ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},he=parseFloat,de=parseInt,fe="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pe="object"==typeof self&&self&&self.Object===Object&&self,me=fe||pe||Function("return this")(),ge=e&&!e.nodeType&&e,ye=ge&&t&&!t.nodeType&&t,ve=ye&&ye.exports===ge,be=ve&&fe.process,xe=function(){try{var t=ye&&ye.require&&ye.require("util").types;return t||be&&be.binding&&be.binding("util")}catch(e){}}(),_e=xe&&xe.isArrayBuffer,we=xe&&xe.isDate,Se=xe&&xe.isMap,Ee=xe&&xe.isRegExp,Me=xe&&xe.isSet,Ce=xe&&xe.isTypedArray;function Te(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ae(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var s=t[i];e(r,s,n(s),t)}return r}function ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Le(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Pe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Re(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}function Ie(t,e){return!!(null==t?0:t.length)&&je(t,e,0)>-1}function De(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Be(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Oe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Ne(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function Fe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ze(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Ue=Ye("length");function Ge(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function He(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function je(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):He(t,We,n)}function Ve(t,e,n,r){for(var i=n-1,a=t.length;++i<a;)if(r(t[i],e))return i;return-1}function We(t){return t!=t}function $e(t,e){var n=null==t?0:t.length;return n?Je(t,e)/n:m}function Ye(t){return function(e){return null==e?i:e[t]}}function qe(t){return function(e){return null==t?i:t[e]}}function Xe(t,e,n,r,i){return i(t,(function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)})),n}function Je(t,e){for(var n,r=-1,a=t.length;++r<a;){var s=e(t[r]);s!==i&&(n=n===i?s:n+s)}return n}function Ze(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ke(t){return t?t.slice(0,yn(t)+1).replace(st,""):t}function Qe(t){return function(e){return t(e)}}function tn(t,e){return Be(e,(function(e){return t[e]}))}function en(t,e){return t.has(e)}function nn(t,e){for(var n=-1,r=t.length;++n<r&&je(e,t[n],0)>-1;);return n}function rn(t,e){for(var n=t.length;n--&&je(e,t[n],0)>-1;);return n}function an(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var sn=qe({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),on=qe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ln(t){return"\\"+ue[t]}function cn(t){return ie.test(t)}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function hn(t,e){return function(n){return t(e(n))}}function dn(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var s=t[n];s!==e&&s!==o||(t[n]=o,a[i++]=n)}return a}function fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function pn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function mn(t){return cn(t)?function(t){var e=ne.lastIndex=0;for(;ne.test(t);)++e;return e}(t):Ue(t)}function gn(t){return cn(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.split("")}(t)}function yn(t){for(var e=t.length;e--&&ot.test(t.charAt(e)););return e}var vn=qe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var bn=function t(e){var n,r=(e=null==e?me:bn.defaults(me.Object(),e,bn.pick(me,se))).Array,ot=e.Date,Et=e.Error,Mt=e.Function,Ct=e.Math,Tt=e.Object,At=e.RegExp,kt=e.String,Lt=e.TypeError,Pt=r.prototype,Rt=Mt.prototype,It=Tt.prototype,Dt=e["__core-js_shared__"],Bt=Rt.toString,Ot=It.hasOwnProperty,Nt=0,Ft=(n=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",zt=It.toString,Ut=Bt.call(Tt),Gt=me._,Ht=At("^"+Bt.call(Ot).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jt=ve?e.Buffer:i,Vt=e.Symbol,Wt=e.Uint8Array,$t=jt?jt.allocUnsafe:i,Yt=hn(Tt.getPrototypeOf,Tt),qt=Tt.create,Xt=It.propertyIsEnumerable,Jt=Pt.splice,Zt=Vt?Vt.isConcatSpreadable:i,Kt=Vt?Vt.iterator:i,Qt=Vt?Vt.toStringTag:i,ne=function(){try{var t=fa(Tt,"defineProperty");return t({},"",{}),t}catch(e){}}(),ie=e.clearTimeout!==me.clearTimeout&&e.clearTimeout,ue=ot&&ot.now!==me.Date.now&&ot.now,fe=e.setTimeout!==me.setTimeout&&e.setTimeout,pe=Ct.ceil,ge=Ct.floor,ye=Tt.getOwnPropertySymbols,be=jt?jt.isBuffer:i,xe=e.isFinite,Ue=Pt.join,qe=hn(Tt.keys,Tt),xn=Ct.max,_n=Ct.min,wn=ot.now,Sn=e.parseInt,En=Ct.random,Mn=Pt.reverse,Cn=fa(e,"DataView"),Tn=fa(e,"Map"),An=fa(e,"Promise"),kn=fa(e,"Set"),Ln=fa(e,"WeakMap"),Pn=fa(Tt,"create"),Rn=Ln&&new Ln,In={},Dn=Ua(Cn),Bn=Ua(Tn),On=Ua(An),Nn=Ua(kn),Fn=Ua(Ln),zn=Vt?Vt.prototype:i,Un=zn?zn.valueOf:i,Gn=zn?zn.toString:i;function Hn(t){if(ro(t)&&!$s(t)&&!(t instanceof $n)){if(t instanceof Wn)return t;if(Ot.call(t,"__wrapped__"))return Ga(t)}return new Wn(t)}var jn=function(){function t(){}return function(e){if(!no(e))return{};if(qt)return qt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Vn(){}function Wn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function $n(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Jn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Xn;++e<n;)this.add(t[e])}function Zn(t){var e=this.__data__=new qn(t);this.size=e.size}function Kn(t,e){var n=$s(t),r=!n&&Ws(t),i=!n&&!r&&Js(t),a=!n&&!r&&!i&&ho(t),s=n||r||i||a,o=s?Ze(t.length,kt):[],l=o.length;for(var c in t)!e&&!Ot.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||xa(c,l))||o.push(c);return o}function Qn(t){var e=t.length;return e?t[Jr(0,e-1)]:i}function tr(t,e){return Na(Pi(t),cr(e,0,t.length))}function er(t){return Na(Pi(t))}function nr(t,e,n){(n!==i&&!Hs(t[e],n)||n===i&&!(e in t))&&or(t,e,n)}function rr(t,e,n){var r=t[e];Ot.call(t,e)&&Hs(r,n)&&(n!==i||e in t)||or(t,e,n)}function ir(t,e){for(var n=t.length;n--;)if(Hs(t[n][0],e))return n;return-1}function ar(t,e,n,r){return pr(t,(function(t,i,a){e(r,t,n(t),a)})),r}function sr(t,e){return t&&Ri(e,Do(e),t)}function or(t,e,n){"__proto__"==e&&ne?ne(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function lr(t,e){for(var n=-1,a=e.length,s=r(a),o=null==t;++n<a;)s[n]=o?i:ko(t,e[n]);return s}function cr(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ur(t,e,n,r,a,s){var o,l=1&e,c=2&e,u=4&e;if(n&&(o=a?n(t,r,a,s):n(t)),o!==i)return o;if(!no(t))return t;var h=$s(t);if(h){if(o=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Ot.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!l)return Pi(t,o)}else{var d=ga(t),f=d==S||d==E;if(Js(t))return Mi(t,l);if(d==T||d==v||f&&!a){if(o=c||f?{}:va(t),!l)return c?function(t,e){return Ri(t,ma(t),e)}(t,function(t,e){return t&&Ri(e,Bo(e),t)}(o,t)):function(t,e){return Ri(t,pa(t),e)}(t,sr(o,t))}else{if(!ce[d])return a?t:{};o=function(t,e,n){var r=t.constructor;switch(e){case D:return Ci(t);case x:case _:return new r(+t);case B:return function(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case O:case N:case F:case z:case U:case G:case H:case j:case V:return Ti(t,n);case M:return new r;case C:case P:return new r(t);case k:return function(t){var e=new t.constructor(t.source,mt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case L:return new r;case R:return i=t,Un?Tt(Un.call(i)):{}}var i}(t,d,l)}}s||(s=new Zn);var p=s.get(t);if(p)return p;s.set(t,o),lo(t)?t.forEach((function(r){o.add(ur(r,e,n,r,t,s))})):io(t)&&t.forEach((function(r,i){o.set(i,ur(r,e,n,i,t,s))}));var m=h?i:(u?c?sa:aa:c?Bo:Do)(t);return ke(m||t,(function(r,i){m&&(r=t[i=r]),rr(o,i,ur(r,e,n,i,t,s))})),o}function hr(t,e,n){var r=n.length;if(null==t)return!r;for(t=Tt(t);r--;){var a=n[r],s=e[a],o=t[a];if(o===i&&!(a in t)||!s(o))return!1}return!0}function dr(t,e,n){if("function"!=typeof t)throw new Lt(a);return Ia((function(){t.apply(i,n)}),e)}function fr(t,e,n,r){var i=-1,a=Ie,s=!0,o=t.length,l=[],c=e.length;if(!o)return l;n&&(e=Be(e,Qe(n))),r?(a=De,s=!1):e.length>=200&&(a=en,s=!1,e=new Jn(e));t:for(;++i<o;){var u=t[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,s&&h==h){for(var d=c;d--;)if(e[d]===h)continue t;l.push(u)}else a(e,h,r)||l.push(u)}return l}Hn.templateSettings={escape:K,evaluate:Q,interpolate:tt,variable:"",imports:{_:Hn}},Hn.prototype=Vn.prototype,Hn.prototype.constructor=Hn,Wn.prototype=jn(Vn.prototype),Wn.prototype.constructor=Wn,$n.prototype=jn(Vn.prototype),$n.prototype.constructor=$n,Yn.prototype.clear=function(){this.__data__=Pn?Pn(null):{},this.size=0},Yn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Yn.prototype.get=function(t){var e=this.__data__;if(Pn){var n=e[t];return n===s?i:n}return Ot.call(e,t)?e[t]:i},Yn.prototype.has=function(t){var e=this.__data__;return Pn?e[t]!==i:Ot.call(e,t)},Yn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Pn&&e===i?s:e,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(t){var e=this.__data__,n=ir(e,t);return!(n<0)&&(n==e.length-1?e.pop():Jt.call(e,n,1),--this.size,!0)},qn.prototype.get=function(t){var e=this.__data__,n=ir(e,t);return n<0?i:e[n][1]},qn.prototype.has=function(t){return ir(this.__data__,t)>-1},qn.prototype.set=function(t,e){var n=this.__data__,r=ir(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Xn.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn,map:new(Tn||qn),string:new Yn}},Xn.prototype.delete=function(t){var e=ha(this,t).delete(t);return this.size-=e?1:0,e},Xn.prototype.get=function(t){return ha(this,t).get(t)},Xn.prototype.has=function(t){return ha(this,t).has(t)},Xn.prototype.set=function(t,e){var n=ha(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Jn.prototype.add=Jn.prototype.push=function(t){return this.__data__.set(t,s),this},Jn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.clear=function(){this.__data__=new qn,this.size=0},Zn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Zn.prototype.get=function(t){return this.__data__.get(t)},Zn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof qn){var r=n.__data__;if(!Tn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Xn(r)}return n.set(t,e),this.size=n.size,this};var pr=Bi(wr),mr=Bi(Sr,!0);function gr(t,e){var n=!0;return pr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function yr(t,e,n){for(var r=-1,a=t.length;++r<a;){var s=t[r],o=e(s);if(null!=o&&(l===i?o==o&&!uo(o):n(o,l)))var l=o,c=s}return c}function vr(t,e){var n=[];return pr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function br(t,e,n,r,i){var a=-1,s=t.length;for(n||(n=ba),i||(i=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?br(o,e-1,n,r,i):Oe(i,o):r||(i[i.length]=o)}return i}var xr=Oi(),_r=Oi(!0);function wr(t,e){return t&&xr(t,e,Do)}function Sr(t,e){return t&&_r(t,e,Do)}function Er(t,e){return Re(e,(function(e){return Qs(t[e])}))}function Mr(t,e){for(var n=0,r=(e=_i(e,t)).length;null!=t&&n<r;)t=t[za(e[n++])];return n&&n==r?t:i}function Cr(t,e,n){var r=e(t);return $s(t)?r:Oe(r,n(t))}function Tr(t){return null==t?t===i?"[object Undefined]":"[object Null]":Qt&&Qt in Tt(t)?function(t){var e=Ot.call(t,Qt),n=t[Qt];try{t[Qt]=i;var r=!0}catch(s){}var a=zt.call(t);r&&(e?t[Qt]=n:delete t[Qt]);return a}(t):function(t){return zt.call(t)}(t)}function Ar(t,e){return t>e}function kr(t,e){return null!=t&&Ot.call(t,e)}function Lr(t,e){return null!=t&&e in Tt(t)}function Pr(t,e,n){for(var a=n?De:Ie,s=t[0].length,o=t.length,l=o,c=r(o),u=1/0,h=[];l--;){var d=t[l];l&&e&&(d=Be(d,Qe(e))),u=_n(d.length,u),c[l]=!n&&(e||s>=120&&d.length>=120)?new Jn(l&&d):i}d=t[0];var f=-1,p=c[0];t:for(;++f<s&&h.length<u;){var m=d[f],g=e?e(m):m;if(m=n||0!==m?m:0,!(p?en(p,g):a(h,g,n))){for(l=o;--l;){var y=c[l];if(!(y?en(y,g):a(t[l],g,n)))continue t}p&&p.push(g),h.push(m)}}return h}function Rr(t,e,n){var r=null==(t=ka(t,e=_i(e,t)))?t:t[za(Ka(e))];return null==r?i:Te(r,t,n)}function Ir(t){return ro(t)&&Tr(t)==v}function Dr(t,e,n,r,a){return t===e||(null==t||null==e||!ro(t)&&!ro(e)?t!=t&&e!=e:function(t,e,n,r,a,s){var o=$s(t),l=$s(e),c=o?b:ga(t),u=l?b:ga(e),h=(c=c==v?T:c)==T,d=(u=u==v?T:u)==T,f=c==u;if(f&&Js(t)){if(!Js(e))return!1;o=!0,h=!1}if(f&&!h)return s||(s=new Zn),o||ho(t)?ra(t,e,n,r,a,s):function(t,e,n,r,i,a,s){switch(n){case B:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case D:return!(t.byteLength!=e.byteLength||!a(new Wt(t),new Wt(e)));case x:case _:case C:return Hs(+t,+e);case w:return t.name==e.name&&t.message==e.message;case k:case P:return t==e+"";case M:var o=un;case L:var l=1&r;if(o||(o=fn),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var u=ra(o(t),o(e),r,i,a,s);return s.delete(t),u;case R:if(Un)return Un.call(t)==Un.call(e)}return!1}(t,e,c,n,r,a,s);if(!(1&n)){var p=h&&Ot.call(t,"__wrapped__"),m=d&&Ot.call(e,"__wrapped__");if(p||m){var g=p?t.value():t,y=m?e.value():e;return s||(s=new Zn),a(g,y,n,r,s)}}if(!f)return!1;return s||(s=new Zn),function(t,e,n,r,a,s){var o=1&n,l=aa(t),c=l.length,u=aa(e),h=u.length;if(c!=h&&!o)return!1;var d=c;for(;d--;){var f=l[d];if(!(o?f in e:Ot.call(e,f)))return!1}var p=s.get(t),m=s.get(e);if(p&&m)return p==e&&m==t;var g=!0;s.set(t,e),s.set(e,t);var y=o;for(;++d<c;){var v=t[f=l[d]],b=e[f];if(r)var x=o?r(b,v,f,e,t,s):r(v,b,f,t,e,s);if(!(x===i?v===b||a(v,b,n,r,s):x)){g=!1;break}y||(y="constructor"==f)}if(g&&!y){var _=t.constructor,w=e.constructor;_==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(g=!1)}return s.delete(t),s.delete(e),g}(t,e,n,r,a,s)}(t,e,n,r,Dr,a))}function Br(t,e,n,r){var a=n.length,s=a,o=!r;if(null==t)return!s;for(t=Tt(t);a--;){var l=n[a];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<s;){var c=(l=n[a])[0],u=t[c],h=l[1];if(o&&l[2]){if(u===i&&!(c in t))return!1}else{var d=new Zn;if(r)var f=r(u,h,c,t,e,d);if(!(f===i?Dr(h,u,3,r,d):f))return!1}}return!0}function Or(t){return!(!no(t)||(e=t,Ft&&Ft in e))&&(Qs(t)?Ht:vt).test(Ua(t));var e}function Nr(t){return"function"==typeof t?t:null==t?sl:"object"==typeof t?$s(t)?jr(t[0],t[1]):Hr(t):ml(t)}function Fr(t){if(!Ma(t))return qe(t);var e=[];for(var n in Tt(t))Ot.call(t,n)&&"constructor"!=n&&e.push(n);return e}function zr(t){if(!no(t))return function(t){var e=[];if(null!=t)for(var n in Tt(t))e.push(n);return e}(t);var e=Ma(t),n=[];for(var r in t)("constructor"!=r||!e&&Ot.call(t,r))&&n.push(r);return n}function Ur(t,e){return t<e}function Gr(t,e){var n=-1,i=qs(t)?r(t.length):[];return pr(t,(function(t,r,a){i[++n]=e(t,r,a)})),i}function Hr(t){var e=da(t);return 1==e.length&&e[0][2]?Ta(e[0][0],e[0][1]):function(n){return n===t||Br(n,t,e)}}function jr(t,e){return wa(t)&&Ca(e)?Ta(za(t),e):function(n){var r=ko(n,t);return r===i&&r===e?Lo(n,t):Dr(e,r,3)}}function Vr(t,e,n,r,a){t!==e&&xr(e,(function(s,o){if(a||(a=new Zn),no(s))!function(t,e,n,r,a,s,o){var l=Pa(t,n),c=Pa(e,n),u=o.get(c);if(u)return void nr(t,n,u);var h=s?s(l,c,n+"",t,e,o):i,d=h===i;if(d){var f=$s(c),p=!f&&Js(c),m=!f&&!p&&ho(c);h=c,f||p||m?$s(l)?h=l:Xs(l)?h=Pi(l):p?(d=!1,h=Mi(c,!0)):m?(d=!1,h=Ti(c,!0)):h=[]:so(c)||Ws(c)?(h=l,Ws(l)?h=xo(l):no(l)&&!Qs(l)||(h=va(c))):d=!1}d&&(o.set(c,h),a(h,c,r,s,o),o.delete(c));nr(t,n,h)}(t,e,o,n,Vr,r,a);else{var l=r?r(Pa(t,o),s,o+"",t,e,a):i;l===i&&(l=s),nr(t,o,l)}}),Bo)}function Wr(t,e){var n=t.length;if(n)return xa(e+=e<0?n:0,n)?t[e]:i}function $r(t,e,n){e=e.length?Be(e,(function(t){return $s(t)?function(e){return Mr(e,1===t.length?t[0]:t)}:t})):[sl];var r=-1;e=Be(e,Qe(ua()));var i=Gr(t,(function(t,n,i){var a=Be(e,(function(e){return e(t)}));return{criteria:a,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,a=e.criteria,s=i.length,o=n.length;for(;++r<s;){var l=Ai(i[r],a[r]);if(l)return r>=o?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Yr(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var s=e[r],o=Mr(t,s);n(o,s)&&ei(a,_i(s,t),o)}return a}function qr(t,e,n,r){var i=r?Ve:je,a=-1,s=e.length,o=t;for(t===e&&(e=Pi(e)),n&&(o=Be(t,Qe(n)));++a<s;)for(var l=0,c=e[a],u=n?n(c):c;(l=i(o,u,l,r))>-1;)o!==t&&Jt.call(o,l,1),Jt.call(t,l,1);return t}function Xr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==a){var a=i;xa(i)?Jt.call(t,i,1):fi(t,i)}}return t}function Jr(t,e){return t+ge(En()*(e-t+1))}function Zr(t,e){var n="";if(!t||e<1||e>p)return n;do{e%2&&(n+=t),(e=ge(e/2))&&(t+=t)}while(e);return n}function Kr(t,e){return Da(Aa(t,e,sl),t+"")}function Qr(t){return Qn(jo(t))}function ti(t,e){var n=jo(t);return Na(n,cr(e,0,n.length))}function ei(t,e,n,r){if(!no(t))return t;for(var a=-1,s=(e=_i(e,t)).length,o=s-1,l=t;null!=l&&++a<s;){var c=za(e[a]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(a!=o){var h=l[c];(u=r?r(h,c,l):i)===i&&(u=no(h)?h:xa(e[a+1])?[]:{})}rr(l,c,u),l=l[c]}return t}var ni=Rn?function(t,e){return Rn.set(t,e),t}:sl,ri=ne?function(t,e){return ne(t,"toString",{configurable:!0,enumerable:!1,value:rl(e),writable:!0})}:sl;function ii(t){return Na(jo(t))}function ai(t,e,n){var i=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(n=n>a?a:n)<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var s=r(a);++i<a;)s[i]=t[i+e];return s}function si(t,e){var n;return pr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function oi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var a=r+i>>>1,s=t[a];null!==s&&!uo(s)&&(n?s<=e:s<e)?r=a+1:i=a}return i}return li(t,e,sl,n)}function li(t,e,n,r){var a=0,s=null==t?0:t.length;if(0===s)return 0;for(var o=(e=n(e))!=e,l=null===e,c=uo(e),u=e===i;a<s;){var h=ge((a+s)/2),d=n(t[h]),f=d!==i,p=null===d,m=d==d,g=uo(d);if(o)var y=r||m;else y=u?m&&(r||f):l?m&&f&&(r||!p):c?m&&f&&!p&&(r||!g):!p&&!g&&(r?d<=e:d<e);y?a=h+1:s=h}return _n(s,4294967294)}function ci(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var s=t[n],o=e?e(s):s;if(!n||!Hs(o,l)){var l=o;a[i++]=0===s?0:s}}return a}function ui(t){return"number"==typeof t?t:uo(t)?m:+t}function hi(t){if("string"==typeof t)return t;if($s(t))return Be(t,hi)+"";if(uo(t))return Gn?Gn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function di(t,e,n){var r=-1,i=Ie,a=t.length,s=!0,o=[],l=o;if(n)s=!1,i=De;else if(a>=200){var c=e?null:Zi(t);if(c)return fn(c);s=!1,i=en,l=new Jn}else l=e?[]:o;t:for(;++r<a;){var u=t[r],h=e?e(u):u;if(u=n||0!==u?u:0,s&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),o.push(u)}else i(l,h,n)||(l!==o&&l.push(h),o.push(u))}return o}function fi(t,e){return null==(t=ka(t,e=_i(e,t)))||delete t[za(Ka(e))]}function pi(t,e,n,r){return ei(t,e,n(Mr(t,e)),r)}function mi(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?ai(t,r?0:a,r?a+1:i):ai(t,r?a+1:0,r?i:a)}function gi(t,e){var n=t;return n instanceof $n&&(n=n.value()),Ne(e,(function(t,e){return e.func.apply(e.thisArg,Oe([t],e.args))}),n)}function yi(t,e,n){var i=t.length;if(i<2)return i?di(t[0]):[];for(var a=-1,s=r(i);++a<i;)for(var o=t[a],l=-1;++l<i;)l!=a&&(s[a]=fr(s[a]||o,t[l],e,n));return di(br(s,1),e,n)}function vi(t,e,n){for(var r=-1,a=t.length,s=e.length,o={};++r<a;){var l=r<s?e[r]:i;n(o,t[r],l)}return o}function bi(t){return Xs(t)?t:[]}function xi(t){return"function"==typeof t?t:sl}function _i(t,e){return $s(t)?t:wa(t,e)?[t]:Fa(_o(t))}var wi=Kr;function Si(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ai(t,e,n)}var Ei=ie||function(t){return me.clearTimeout(t)};function Mi(t,e){if(e)return t.slice();var n=t.length,r=$t?$t(n):new t.constructor(n);return t.copy(r),r}function Ci(t){var e=new t.constructor(t.byteLength);return new Wt(e).set(new Wt(t)),e}function Ti(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ai(t,e){if(t!==e){var n=t!==i,r=null===t,a=t==t,s=uo(t),o=e!==i,l=null===e,c=e==e,u=uo(e);if(!l&&!u&&!s&&t>e||s&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!a)return 1;if(!r&&!s&&!u&&t<e||u&&n&&a&&!r&&!s||l&&n&&a||!o&&a||!c)return-1}return 0}function ki(t,e,n,i){for(var a=-1,s=t.length,o=n.length,l=-1,c=e.length,u=xn(s-o,0),h=r(c+u),d=!i;++l<c;)h[l]=e[l];for(;++a<o;)(d||a<s)&&(h[n[a]]=t[a]);for(;u--;)h[l++]=t[a++];return h}function Li(t,e,n,i){for(var a=-1,s=t.length,o=-1,l=n.length,c=-1,u=e.length,h=xn(s-l,0),d=r(h+u),f=!i;++a<h;)d[a]=t[a];for(var p=a;++c<u;)d[p+c]=e[c];for(;++o<l;)(f||a<s)&&(d[p+n[o]]=t[a++]);return d}function Pi(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ri(t,e,n,r){var a=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var l=e[s],c=r?r(n[l],t[l],l,n,t):i;c===i&&(c=t[l]),a?or(n,l,c):rr(n,l,c)}return n}function Ii(t,e){return function(n,r){var i=$s(n)?Ae:ar,a=e?e():{};return i(n,t,ua(r,2),a)}}function Di(t){return Kr((function(e,n){var r=-1,a=n.length,s=a>1?n[a-1]:i,o=a>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(a--,s):i,o&&_a(n[0],n[1],o)&&(s=a<3?i:s,a=1),e=Tt(e);++r<a;){var l=n[r];l&&t(e,l,r,s)}return e}))}function Bi(t,e){return function(n,r){if(null==n)return n;if(!qs(n))return t(n,r);for(var i=n.length,a=e?i:-1,s=Tt(n);(e?a--:++a<i)&&!1!==r(s[a],a,s););return n}}function Oi(t){return function(e,n,r){for(var i=-1,a=Tt(e),s=r(e),o=s.length;o--;){var l=s[t?o:++i];if(!1===n(a[l],l,a))break}return e}}function Ni(t){return function(e){var n=cn(e=_o(e))?gn(e):i,r=n?n[0]:e.charAt(0),a=n?Si(n,1).join(""):e.slice(1);return r[t]()+a}}function Fi(t){return function(e){return Ne(tl($o(e).replace(te,"")),t,"")}}function zi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=jn(t.prototype),r=t.apply(n,e);return no(r)?r:n}}function Ui(t){return function(e,n,r){var a=Tt(e);if(!qs(e)){var s=ua(n,3);e=Do(e),n=function(t){return s(a[t],t,a)}}var o=t(e,n,r);return o>-1?a[s?e[o]:o]:i}}function Gi(t){return ia((function(e){var n=e.length,r=n,s=Wn.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new Lt(a);if(s&&!l&&"wrapper"==la(o))var l=new Wn([],!0)}for(r=l?r:n;++r<n;){var c=la(o=e[r]),u="wrapper"==c?oa(o):i;l=u&&Sa(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[la(u[0])].apply(l,u[3]):1==o.length&&Sa(o)?l[c]():l.thru(o)}return function(){var t=arguments,r=t[0];if(l&&1==t.length&&$s(r))return l.plant(r).value();for(var i=0,a=n?e[i].apply(this,t):r;++i<n;)a=e[i].call(this,a);return a}}))}function Hi(t,e,n,a,s,o,l,c,u,d){var f=e&h,p=1&e,m=2&e,g=24&e,y=512&e,v=m?i:zi(t);return function i(){for(var h=arguments.length,b=r(h),x=h;x--;)b[x]=arguments[x];if(g)var _=ca(i),w=an(b,_);if(a&&(b=ki(b,a,s,g)),o&&(b=Li(b,o,l,g)),h-=w,g&&h<d){var S=dn(b,_);return Xi(t,e,Hi,i.placeholder,n,b,S,c,u,d-h)}var E=p?n:this,M=m?E[t]:t;return h=b.length,c?b=La(b,c):y&&h>1&&b.reverse(),f&&u<h&&(b.length=u),this&&this!==me&&this instanceof i&&(M=v||zi(M)),M.apply(E,b)}}function ji(t,e){return function(n,r){return function(t,e,n,r){return wr(t,(function(t,i,a){e(r,n(t),i,a)})),r}(n,t,e(r),{})}}function Vi(t,e){return function(n,r){var a;if(n===i&&r===i)return e;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=hi(n),r=hi(r)):(n=ui(n),r=ui(r)),a=t(n,r)}return a}}function Wi(t){return ia((function(e){return e=Be(e,Qe(ua())),Kr((function(n){var r=this;return t(e,(function(t){return Te(t,r,n)}))}))}))}function $i(t,e){var n=(e=e===i?" ":hi(e)).length;if(n<2)return n?Zr(e,t):e;var r=Zr(e,pe(t/mn(e)));return cn(e)?Si(gn(r),0,t).join(""):r.slice(0,t)}function Yi(t){return function(e,n,a){return a&&"number"!=typeof a&&_a(e,n,a)&&(n=a=i),e=go(e),n===i?(n=e,e=0):n=go(n),function(t,e,n,i){for(var a=-1,s=xn(pe((e-t)/(n||1)),0),o=r(s);s--;)o[i?s:++a]=t,t+=n;return o}(e,n,a=a===i?e<n?1:-1:go(a),t)}}function qi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=bo(e),n=bo(n)),t(e,n)}}function Xi(t,e,n,r,a,s,o,l,h,d){var f=8&e;e|=f?c:u,4&(e&=~(f?u:c))||(e&=-4);var p=[t,e,a,f?s:i,f?o:i,f?i:s,f?i:o,l,h,d],m=n.apply(i,p);return Sa(t)&&Ra(m,p),m.placeholder=r,Ba(m,t,e)}function Ji(t){var e=Ct[t];return function(t,n){if(t=bo(t),(n=null==n?0:_n(yo(n),292))&&xe(t)){var r=(_o(t)+"e").split("e");return+((r=(_o(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Zi=kn&&1/fn(new kn([,-0]))[1]==f?function(t){return new kn(t)}:hl;function Ki(t){return function(e){var n=ga(e);return n==M?un(e):n==L?pn(e):function(t,e){return Be(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Qi(t,e,n,s,f,p,m,g){var y=2&e;if(!y&&"function"!=typeof t)throw new Lt(a);var v=s?s.length:0;if(v||(e&=-97,s=f=i),m=m===i?m:xn(yo(m),0),g=g===i?g:yo(g),v-=f?f.length:0,e&u){var b=s,x=f;s=f=i}var _=y?i:oa(t),w=[t,e,n,s,f,b,x,p,m,g];if(_&&function(t,e){var n=t[1],r=e[1],i=n|r,a=i<131,s=r==h&&8==n||r==h&&n==d&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!a&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var l=e[3];if(l){var c=t[3];t[3]=c?ki(c,l,e[4]):l,t[4]=c?dn(t[3],o):e[4]}(l=e[5])&&(c=t[5],t[5]=c?Li(c,l,e[6]):l,t[6]=c?dn(t[5],o):e[6]);(l=e[7])&&(t[7]=l);r&h&&(t[8]=null==t[8]?e[8]:_n(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(w,_),t=w[0],e=w[1],n=w[2],s=w[3],f=w[4],!(g=w[9]=w[9]===i?y?0:t.length:xn(w[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)S=8==e||e==l?function(t,e,n){var a=zi(t);return function s(){for(var o=arguments.length,l=r(o),c=o,u=ca(s);c--;)l[c]=arguments[c];var h=o<3&&l[0]!==u&&l[o-1]!==u?[]:dn(l,u);return(o-=h.length)<n?Xi(t,e,Hi,s.placeholder,i,l,h,i,i,n-o):Te(this&&this!==me&&this instanceof s?a:t,this,l)}}(t,e,g):e!=c&&33!=e||f.length?Hi.apply(i,w):function(t,e,n,i){var a=1&e,s=zi(t);return function e(){for(var o=-1,l=arguments.length,c=-1,u=i.length,h=r(u+l),d=this&&this!==me&&this instanceof e?s:t;++c<u;)h[c]=i[c];for(;l--;)h[c++]=arguments[++o];return Te(d,a?n:this,h)}}(t,e,n,s);else var S=function(t,e,n){var r=1&e,i=zi(t);return function e(){return(this&&this!==me&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Ba((_?ni:Ra)(S,w),t,e)}function ta(t,e,n,r){return t===i||Hs(t,It[n])&&!Ot.call(r,n)?e:t}function ea(t,e,n,r,a,s){return no(t)&&no(e)&&(s.set(e,t),Vr(t,e,i,ea,s),s.delete(e)),t}function na(t){return so(t)?i:t}function ra(t,e,n,r,a,s){var o=1&n,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(t),h=s.get(e);if(u&&h)return u==e&&h==t;var d=-1,f=!0,p=2&n?new Jn:i;for(s.set(t,e),s.set(e,t);++d<l;){var m=t[d],g=e[d];if(r)var y=o?r(g,m,d,e,t,s):r(m,g,d,t,e,s);if(y!==i){if(y)continue;f=!1;break}if(p){if(!ze(e,(function(t,e){if(!en(p,e)&&(m===t||a(m,t,n,r,s)))return p.push(e)}))){f=!1;break}}else if(m!==g&&!a(m,g,n,r,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function ia(t){return Da(Aa(t,i,Ya),t+"")}function aa(t){return Cr(t,Do,pa)}function sa(t){return Cr(t,Bo,ma)}var oa=Rn?function(t){return Rn.get(t)}:hl;function la(t){for(var e=t.name+"",n=In[e],r=Ot.call(In,e)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function ca(t){return(Ot.call(Hn,"placeholder")?Hn:t).placeholder}function ua(){var t=Hn.iteratee||ol;return t=t===ol?Nr:t,arguments.length?t(arguments[0],arguments[1]):t}function ha(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function da(t){for(var e=Do(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ca(i)]}return e}function fa(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Or(n)?n:i}var pa=ye?function(t){return null==t?[]:(t=Tt(t),Re(ye(t),(function(e){return Xt.call(t,e)})))}:vl,ma=ye?function(t){for(var e=[];t;)Oe(e,pa(t)),t=Yt(t);return e}:vl,ga=Tr;function ya(t,e,n){for(var r=-1,i=(e=_i(e,t)).length,a=!1;++r<i;){var s=za(e[r]);if(!(a=null!=t&&n(t,s)))break;t=t[s]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&eo(i)&&xa(s,i)&&($s(t)||Ws(t))}function va(t){return"function"!=typeof t.constructor||Ma(t)?{}:jn(Yt(t))}function ba(t){return $s(t)||Ws(t)||!!(Zt&&t&&t[Zt])}function xa(t,e){var n=typeof t;return!!(e=null==e?p:e)&&("number"==n||"symbol"!=n&&xt.test(t))&&t>-1&&t%1==0&&t<e}function _a(t,e,n){if(!no(n))return!1;var r=typeof e;return!!("number"==r?qs(n)&&xa(e,n.length):"string"==r&&e in n)&&Hs(n[e],t)}function wa(t,e){if($s(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!uo(t))||(nt.test(t)||!et.test(t)||null!=e&&t in Tt(e))}function Sa(t){var e=la(t),n=Hn[e];if("function"!=typeof n||!(e in $n.prototype))return!1;if(t===n)return!0;var r=oa(n);return!!r&&t===r[0]}(Cn&&ga(new Cn(new ArrayBuffer(1)))!=B||Tn&&ga(new Tn)!=M||An&&ga(An.resolve())!=A||kn&&ga(new kn)!=L||Ln&&ga(new Ln)!=I)&&(ga=function(t){var e=Tr(t),n=e==T?t.constructor:i,r=n?Ua(n):"";if(r)switch(r){case Dn:return B;case Bn:return M;case On:return A;case Nn:return L;case Fn:return I}return e});var Ea=Dt?Qs:bl;function Ma(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||It)}function Ca(t){return t==t&&!no(t)}function Ta(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==i||t in Tt(n)))}}function Aa(t,e,n){return e=xn(e===i?t.length-1:e,0),function(){for(var i=arguments,a=-1,s=xn(i.length-e,0),o=r(s);++a<s;)o[a]=i[e+a];a=-1;for(var l=r(e+1);++a<e;)l[a]=i[a];return l[e]=n(o),Te(t,this,l)}}function ka(t,e){return e.length<2?t:Mr(t,ai(e,0,-1))}function La(t,e){for(var n=t.length,r=_n(e.length,n),a=Pi(t);r--;){var s=e[r];t[r]=xa(s,n)?a[s]:i}return t}function Pa(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ra=Oa(ni),Ia=fe||function(t,e){return me.setTimeout(t,e)},Da=Oa(ri);function Ba(t,e,n){var r=e+"";return Da(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(lt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ke(y,(function(n){var r="_."+n[0];e&n[1]&&!Ie(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ct);return e?e[1].split(ut):[]}(r),n)))}function Oa(t){var e=0,n=0;return function(){var r=wn(),a=16-(r-n);if(n=r,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Na(t,e){var n=-1,r=t.length,a=r-1;for(e=e===i?r:e;++n<e;){var s=Jr(n,a),o=t[s];t[s]=t[n],t[n]=o}return t.length=e,t}var Fa=function(t){var e=Os(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(rt,(function(t,n,r,i){e.push(r?i.replace(ft,"$1"):n||t)})),e}));function za(t){if("string"==typeof t||uo(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ua(t){if(null!=t){try{return Bt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Ga(t){if(t instanceof $n)return t.clone();var e=new Wn(t.__wrapped__,t.__chain__);return e.__actions__=Pi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ha=Kr((function(t,e){return Xs(t)?fr(t,br(e,1,Xs,!0)):[]})),ja=Kr((function(t,e){var n=Ka(e);return Xs(n)&&(n=i),Xs(t)?fr(t,br(e,1,Xs,!0),ua(n,2)):[]})),Va=Kr((function(t,e){var n=Ka(e);return Xs(n)&&(n=i),Xs(t)?fr(t,br(e,1,Xs,!0),i,n):[]}));function Wa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:yo(n);return i<0&&(i=xn(r+i,0)),He(t,ua(e,3),i)}function $a(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var a=r-1;return n!==i&&(a=yo(n),a=n<0?xn(r+a,0):_n(a,r-1)),He(t,ua(e,3),a,!0)}function Ya(t){return(null==t?0:t.length)?br(t,1):[]}function qa(t){return t&&t.length?t[0]:i}var Xa=Kr((function(t){var e=Be(t,bi);return e.length&&e[0]===t[0]?Pr(e):[]})),Ja=Kr((function(t){var e=Ka(t),n=Be(t,bi);return e===Ka(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Pr(n,ua(e,2)):[]})),Za=Kr((function(t){var e=Ka(t),n=Be(t,bi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Pr(n,i,e):[]}));function Ka(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Qa=Kr(ts);function ts(t,e){return t&&t.length&&e&&e.length?qr(t,e):t}var es=ia((function(t,e){var n=null==t?0:t.length,r=lr(t,e);return Xr(t,Be(e,(function(t){return xa(t,n)?+t:t})).sort(Ai)),r}));function ns(t){return null==t?t:Mn.call(t)}var rs=Kr((function(t){return di(br(t,1,Xs,!0))})),is=Kr((function(t){var e=Ka(t);return Xs(e)&&(e=i),di(br(t,1,Xs,!0),ua(e,2))})),as=Kr((function(t){var e=Ka(t);return e="function"==typeof e?e:i,di(br(t,1,Xs,!0),i,e)}));function ss(t){if(!t||!t.length)return[];var e=0;return t=Re(t,(function(t){if(Xs(t))return e=xn(t.length,e),!0})),Ze(e,(function(e){return Be(t,Ye(e))}))}function os(t,e){if(!t||!t.length)return[];var n=ss(t);return null==e?n:Be(n,(function(t){return Te(e,i,t)}))}var ls=Kr((function(t,e){return Xs(t)?fr(t,e):[]})),cs=Kr((function(t){return yi(Re(t,Xs))})),us=Kr((function(t){var e=Ka(t);return Xs(e)&&(e=i),yi(Re(t,Xs),ua(e,2))})),hs=Kr((function(t){var e=Ka(t);return e="function"==typeof e?e:i,yi(Re(t,Xs),i,e)})),ds=Kr(ss);var fs=Kr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,os(t,n)}));function ps(t){var e=Hn(t);return e.__chain__=!0,e}function ms(t,e){return e(t)}var gs=ia((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,a=function(e){return lr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof $n&&xa(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ms,args:[a],thisArg:i}),new Wn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(a)}));var ys=Ii((function(t,e,n){Ot.call(t,n)?++t[n]:or(t,n,1)}));var vs=Ui(Wa),bs=Ui($a);function xs(t,e){return($s(t)?ke:pr)(t,ua(e,3))}function _s(t,e){return($s(t)?Le:mr)(t,ua(e,3))}var ws=Ii((function(t,e,n){Ot.call(t,n)?t[n].push(e):or(t,n,[e])}));var Ss=Kr((function(t,e,n){var i=-1,a="function"==typeof e,s=qs(t)?r(t.length):[];return pr(t,(function(t){s[++i]=a?Te(e,t,n):Rr(t,e,n)})),s})),Es=Ii((function(t,e,n){or(t,n,e)}));function Ms(t,e){return($s(t)?Be:Gr)(t,ua(e,3))}var Cs=Ii((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Ts=Kr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&_a(t,e[0],e[1])?e=[]:n>2&&_a(e[0],e[1],e[2])&&(e=[e[0]]),$r(t,br(e,1),[])})),As=ue||function(){return me.Date.now()};function ks(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Qi(t,h,i,i,i,i,e)}function Ls(t,e){var n;if("function"!=typeof e)throw new Lt(a);return t=yo(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Ps=Kr((function(t,e,n){var r=1;if(n.length){var i=dn(n,ca(Ps));r|=c}return Qi(t,r,e,n,i)})),Rs=Kr((function(t,e,n){var r=3;if(n.length){var i=dn(n,ca(Rs));r|=c}return Qi(e,r,t,n,i)}));function Is(t,e,n){var r,s,o,l,c,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new Lt(a);function m(e){var n=r,a=s;return r=s=i,h=e,l=t.apply(a,n)}function g(t){return h=t,c=Ia(v,e),d?m(t):l}function y(t){var n=t-u;return u===i||n>=e||n<0||f&&t-h>=o}function v(){var t=As();if(y(t))return b(t);c=Ia(v,function(t){var n=e-(t-u);return f?_n(n,o-(t-h)):n}(t))}function b(t){return c=i,p&&r?m(t):(r=s=i,l)}function x(){var t=As(),n=y(t);if(r=arguments,s=this,u=t,n){if(c===i)return g(u);if(f)return Ei(c),c=Ia(v,e),m(u)}return c===i&&(c=Ia(v,e)),l}return e=bo(e)||0,no(n)&&(d=!!n.leading,o=(f="maxWait"in n)?xn(bo(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),x.cancel=function(){c!==i&&Ei(c),h=0,r=u=s=c=i},x.flush=function(){return c===i?l:b(As())},x}var Ds=Kr((function(t,e){return dr(t,1,e)})),Bs=Kr((function(t,e,n){return dr(t,bo(e)||0,n)}));function Os(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Lt(a);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(Os.Cache||Xn),n}function Ns(t){if("function"!=typeof t)throw new Lt(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Os.Cache=Xn;var Fs=wi((function(t,e){var n=(e=1==e.length&&$s(e[0])?Be(e[0],Qe(ua())):Be(br(e,1),Qe(ua()))).length;return Kr((function(r){for(var i=-1,a=_n(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return Te(t,this,r)}))})),zs=Kr((function(t,e){var n=dn(e,ca(zs));return Qi(t,c,i,e,n)})),Us=Kr((function(t,e){var n=dn(e,ca(Us));return Qi(t,u,i,e,n)})),Gs=ia((function(t,e){return Qi(t,d,i,i,i,e)}));function Hs(t,e){return t===e||t!=t&&e!=e}var js=qi(Ar),Vs=qi((function(t,e){return t>=e})),Ws=Ir(function(){return arguments}())?Ir:function(t){return ro(t)&&Ot.call(t,"callee")&&!Xt.call(t,"callee")},$s=r.isArray,Ys=_e?Qe(_e):function(t){return ro(t)&&Tr(t)==D};function qs(t){return null!=t&&eo(t.length)&&!Qs(t)}function Xs(t){return ro(t)&&qs(t)}var Js=be||bl,Zs=we?Qe(we):function(t){return ro(t)&&Tr(t)==_};function Ks(t){if(!ro(t))return!1;var e=Tr(t);return e==w||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!so(t)}function Qs(t){if(!no(t))return!1;var e=Tr(t);return e==S||e==E||"[object AsyncFunction]"==e||"[object Proxy]"==e}function to(t){return"number"==typeof t&&t==yo(t)}function eo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function no(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ro(t){return null!=t&&"object"==typeof t}var io=Se?Qe(Se):function(t){return ro(t)&&ga(t)==M};function ao(t){return"number"==typeof t||ro(t)&&Tr(t)==C}function so(t){if(!ro(t)||Tr(t)!=T)return!1;var e=Yt(t);if(null===e)return!0;var n=Ot.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Bt.call(n)==Ut}var oo=Ee?Qe(Ee):function(t){return ro(t)&&Tr(t)==k};var lo=Me?Qe(Me):function(t){return ro(t)&&ga(t)==L};function co(t){return"string"==typeof t||!$s(t)&&ro(t)&&Tr(t)==P}function uo(t){return"symbol"==typeof t||ro(t)&&Tr(t)==R}var ho=Ce?Qe(Ce):function(t){return ro(t)&&eo(t.length)&&!!le[Tr(t)]};var fo=qi(Ur),po=qi((function(t,e){return t<=e}));function mo(t){if(!t)return[];if(qs(t))return co(t)?gn(t):Pi(t);if(Kt&&t[Kt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Kt]());var e=ga(t);return(e==M?un:e==L?fn:jo)(t)}function go(t){return t?(t=bo(t))===f||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function yo(t){var e=go(t),n=e%1;return e==e?n?e-n:e:0}function vo(t){return t?cr(yo(t),0,g):0}function bo(t){if("number"==typeof t)return t;if(uo(t))return m;if(no(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=no(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ke(t);var n=yt.test(t);return n||bt.test(t)?de(t.slice(2),n?2:8):gt.test(t)?m:+t}function xo(t){return Ri(t,Bo(t))}function _o(t){return null==t?"":hi(t)}var wo=Di((function(t,e){if(Ma(e)||qs(e))Ri(e,Do(e),t);else for(var n in e)Ot.call(e,n)&&rr(t,n,e[n])})),So=Di((function(t,e){Ri(e,Bo(e),t)})),Eo=Di((function(t,e,n,r){Ri(e,Bo(e),t,r)})),Mo=Di((function(t,e,n,r){Ri(e,Do(e),t,r)})),Co=ia(lr);var To=Kr((function(t,e){t=Tt(t);var n=-1,r=e.length,a=r>2?e[2]:i;for(a&&_a(e[0],e[1],a)&&(r=1);++n<r;)for(var s=e[n],o=Bo(s),l=-1,c=o.length;++l<c;){var u=o[l],h=t[u];(h===i||Hs(h,It[u])&&!Ot.call(t,u))&&(t[u]=s[u])}return t})),Ao=Kr((function(t){return t.push(i,ea),Te(No,i,t)}));function ko(t,e,n){var r=null==t?i:Mr(t,e);return r===i?n:r}function Lo(t,e){return null!=t&&ya(t,e,Lr)}var Po=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),t[e]=n}),rl(sl)),Ro=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),Ot.call(t,e)?t[e].push(n):t[e]=[n]}),ua),Io=Kr(Rr);function Do(t){return qs(t)?Kn(t):Fr(t)}function Bo(t){return qs(t)?Kn(t,!0):zr(t)}var Oo=Di((function(t,e,n){Vr(t,e,n)})),No=Di((function(t,e,n,r){Vr(t,e,n,r)})),Fo=ia((function(t,e){var n={};if(null==t)return n;var r=!1;e=Be(e,(function(e){return e=_i(e,t),r||(r=e.length>1),e})),Ri(t,sa(t),n),r&&(n=ur(n,7,na));for(var i=e.length;i--;)fi(n,e[i]);return n}));var zo=ia((function(t,e){return null==t?{}:function(t,e){return Yr(t,e,(function(e,n){return Lo(t,n)}))}(t,e)}));function Uo(t,e){if(null==t)return{};var n=Be(sa(t),(function(t){return[t]}));return e=ua(e),Yr(t,n,(function(t,n){return e(t,n[0])}))}var Go=Ki(Do),Ho=Ki(Bo);function jo(t){return null==t?[]:tn(t,Do(t))}var Vo=Fi((function(t,e,n){return e=e.toLowerCase(),t+(n?Wo(e):e)}));function Wo(t){return Qo(_o(t).toLowerCase())}function $o(t){return(t=_o(t))&&t.replace(_t,sn).replace(ee,"")}var Yo=Fi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),qo=Fi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Xo=Ni("toLowerCase");var Jo=Fi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Zo=Fi((function(t,e,n){return t+(n?" ":"")+Qo(e)}));var Ko=Fi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Qo=Ni("toUpperCase");function tl(t,e,n){return t=_o(t),(e=n?i:e)===i?function(t){return ae.test(t)}(t)?function(t){return t.match(re)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var el=Kr((function(t,e){try{return Te(t,i,e)}catch(n){return Ks(n)?n:new Et(n)}})),nl=ia((function(t,e){return ke(e,(function(e){e=za(e),or(t,e,Ps(t[e],t))})),t}));function rl(t){return function(){return t}}var il=Gi(),al=Gi(!0);function sl(t){return t}function ol(t){return Nr("function"==typeof t?t:ur(t,1))}var ll=Kr((function(t,e){return function(n){return Rr(n,t,e)}})),cl=Kr((function(t,e){return function(n){return Rr(t,n,e)}}));function ul(t,e,n){var r=Do(e),i=Er(e,r);null!=n||no(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Er(e,Do(e)));var a=!(no(n)&&"chain"in n&&!n.chain),s=Qs(t);return ke(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),i=n.__actions__=Pi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Oe([this.value()],arguments))})})),t}function hl(){}var dl=Wi(Be),fl=Wi(Pe),pl=Wi(ze);function ml(t){return wa(t)?Ye(za(t)):function(t){return function(e){return Mr(e,t)}}(t)}var gl=Yi(),yl=Yi(!0);function vl(){return[]}function bl(){return!1}var xl=Vi((function(t,e){return t+e}),0),_l=Ji("ceil"),wl=Vi((function(t,e){return t/e}),1),Sl=Ji("floor");var El,Ml=Vi((function(t,e){return t*e}),1),Cl=Ji("round"),Tl=Vi((function(t,e){return t-e}),0);return Hn.after=function(t,e){if("function"!=typeof e)throw new Lt(a);return t=yo(t),function(){if(--t<1)return e.apply(this,arguments)}},Hn.ary=ks,Hn.assign=wo,Hn.assignIn=So,Hn.assignInWith=Eo,Hn.assignWith=Mo,Hn.at=Co,Hn.before=Ls,Hn.bind=Ps,Hn.bindAll=nl,Hn.bindKey=Rs,Hn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return $s(t)?t:[t]},Hn.chain=ps,Hn.chunk=function(t,e,n){e=(n?_a(t,e,n):e===i)?1:xn(yo(e),0);var a=null==t?0:t.length;if(!a||e<1)return[];for(var s=0,o=0,l=r(pe(a/e));s<a;)l[o++]=ai(t,s,s+=e);return l},Hn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var a=t[e];a&&(i[r++]=a)}return i},Hn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Oe($s(n)?Pi(n):[n],br(e,1))},Hn.cond=function(t){var e=null==t?0:t.length,n=ua();return t=e?Be(t,(function(t){if("function"!=typeof t[1])throw new Lt(a);return[n(t[0]),t[1]]})):[],Kr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Te(i[0],this,n))return Te(i[1],this,n)}}))},Hn.conforms=function(t){return function(t){var e=Do(t);return function(n){return hr(n,t,e)}}(ur(t,1))},Hn.constant=rl,Hn.countBy=ys,Hn.create=function(t,e){var n=jn(t);return null==e?n:sr(n,e)},Hn.curry=function t(e,n,r){var a=Qi(e,8,i,i,i,i,i,n=r?i:n);return a.placeholder=t.placeholder,a},Hn.curryRight=function t(e,n,r){var a=Qi(e,l,i,i,i,i,i,n=r?i:n);return a.placeholder=t.placeholder,a},Hn.debounce=Is,Hn.defaults=To,Hn.defaultsDeep=Ao,Hn.defer=Ds,Hn.delay=Bs,Hn.difference=Ha,Hn.differenceBy=ja,Hn.differenceWith=Va,Hn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ai(t,(e=n||e===i?1:yo(e))<0?0:e,r):[]},Hn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ai(t,0,(e=r-(e=n||e===i?1:yo(e)))<0?0:e):[]},Hn.dropRightWhile=function(t,e){return t&&t.length?mi(t,ua(e,3),!0,!0):[]},Hn.dropWhile=function(t,e){return t&&t.length?mi(t,ua(e,3),!0):[]},Hn.fill=function(t,e,n,r){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&_a(t,e,n)&&(n=0,r=a),function(t,e,n,r){var a=t.length;for((n=yo(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:yo(r))<0&&(r+=a),r=n>r?0:vo(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Hn.filter=function(t,e){return($s(t)?Re:vr)(t,ua(e,3))},Hn.flatMap=function(t,e){return br(Ms(t,e),1)},Hn.flatMapDeep=function(t,e){return br(Ms(t,e),f)},Hn.flatMapDepth=function(t,e,n){return n=n===i?1:yo(n),br(Ms(t,e),n)},Hn.flatten=Ya,Hn.flattenDeep=function(t){return(null==t?0:t.length)?br(t,f):[]},Hn.flattenDepth=function(t,e){return(null==t?0:t.length)?br(t,e=e===i?1:yo(e)):[]},Hn.flip=function(t){return Qi(t,512)},Hn.flow=il,Hn.flowRight=al,Hn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Hn.functions=function(t){return null==t?[]:Er(t,Do(t))},Hn.functionsIn=function(t){return null==t?[]:Er(t,Bo(t))},Hn.groupBy=ws,Hn.initial=function(t){return(null==t?0:t.length)?ai(t,0,-1):[]},Hn.intersection=Xa,Hn.intersectionBy=Ja,Hn.intersectionWith=Za,Hn.invert=Po,Hn.invertBy=Ro,Hn.invokeMap=Ss,Hn.iteratee=ol,Hn.keyBy=Es,Hn.keys=Do,Hn.keysIn=Bo,Hn.map=Ms,Hn.mapKeys=function(t,e){var n={};return e=ua(e,3),wr(t,(function(t,r,i){or(n,e(t,r,i),t)})),n},Hn.mapValues=function(t,e){var n={};return e=ua(e,3),wr(t,(function(t,r,i){or(n,r,e(t,r,i))})),n},Hn.matches=function(t){return Hr(ur(t,1))},Hn.matchesProperty=function(t,e){return jr(t,ur(e,1))},Hn.memoize=Os,Hn.merge=Oo,Hn.mergeWith=No,Hn.method=ll,Hn.methodOf=cl,Hn.mixin=ul,Hn.negate=Ns,Hn.nthArg=function(t){return t=yo(t),Kr((function(e){return Wr(e,t)}))},Hn.omit=Fo,Hn.omitBy=function(t,e){return Uo(t,Ns(ua(e)))},Hn.once=function(t){return Ls(2,t)},Hn.orderBy=function(t,e,n,r){return null==t?[]:($s(e)||(e=null==e?[]:[e]),$s(n=r?i:n)||(n=null==n?[]:[n]),$r(t,e,n))},Hn.over=dl,Hn.overArgs=Fs,Hn.overEvery=fl,Hn.overSome=pl,Hn.partial=zs,Hn.partialRight=Us,Hn.partition=Cs,Hn.pick=zo,Hn.pickBy=Uo,Hn.property=ml,Hn.propertyOf=function(t){return function(e){return null==t?i:Mr(t,e)}},Hn.pull=Qa,Hn.pullAll=ts,Hn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?qr(t,e,ua(n,2)):t},Hn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?qr(t,e,i,n):t},Hn.pullAt=es,Hn.range=gl,Hn.rangeRight=yl,Hn.rearg=Gs,Hn.reject=function(t,e){return($s(t)?Re:vr)(t,Ns(ua(e,3)))},Hn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],a=t.length;for(e=ua(e,3);++r<a;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return Xr(t,i),n},Hn.rest=function(t,e){if("function"!=typeof t)throw new Lt(a);return Kr(t,e=e===i?e:yo(e))},Hn.reverse=ns,Hn.sampleSize=function(t,e,n){return e=(n?_a(t,e,n):e===i)?1:yo(e),($s(t)?tr:ti)(t,e)},Hn.set=function(t,e,n){return null==t?t:ei(t,e,n)},Hn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ei(t,e,n,r)},Hn.shuffle=function(t){return($s(t)?er:ii)(t)},Hn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&_a(t,e,n)?(e=0,n=r):(e=null==e?0:yo(e),n=n===i?r:yo(n)),ai(t,e,n)):[]},Hn.sortBy=Ts,Hn.sortedUniq=function(t){return t&&t.length?ci(t):[]},Hn.sortedUniqBy=function(t,e){return t&&t.length?ci(t,ua(e,2)):[]},Hn.split=function(t,e,n){return n&&"number"!=typeof n&&_a(t,e,n)&&(e=n=i),(n=n===i?g:n>>>0)?(t=_o(t))&&("string"==typeof e||null!=e&&!oo(e))&&!(e=hi(e))&&cn(t)?Si(gn(t),0,n):t.split(e,n):[]},Hn.spread=function(t,e){if("function"!=typeof t)throw new Lt(a);return e=null==e?0:xn(yo(e),0),Kr((function(n){var r=n[e],i=Si(n,0,e);return r&&Oe(i,r),Te(t,this,i)}))},Hn.tail=function(t){var e=null==t?0:t.length;return e?ai(t,1,e):[]},Hn.take=function(t,e,n){return t&&t.length?ai(t,0,(e=n||e===i?1:yo(e))<0?0:e):[]},Hn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ai(t,(e=r-(e=n||e===i?1:yo(e)))<0?0:e,r):[]},Hn.takeRightWhile=function(t,e){return t&&t.length?mi(t,ua(e,3),!1,!0):[]},Hn.takeWhile=function(t,e){return t&&t.length?mi(t,ua(e,3)):[]},Hn.tap=function(t,e){return e(t),t},Hn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Lt(a);return no(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Is(t,e,{leading:r,maxWait:e,trailing:i})},Hn.thru=ms,Hn.toArray=mo,Hn.toPairs=Go,Hn.toPairsIn=Ho,Hn.toPath=function(t){return $s(t)?Be(t,za):uo(t)?[t]:Pi(Fa(_o(t)))},Hn.toPlainObject=xo,Hn.transform=function(t,e,n){var r=$s(t),i=r||Js(t)||ho(t);if(e=ua(e,4),null==n){var a=t&&t.constructor;n=i?r?new a:[]:no(t)&&Qs(a)?jn(Yt(t)):{}}return(i?ke:wr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Hn.unary=function(t){return ks(t,1)},Hn.union=rs,Hn.unionBy=is,Hn.unionWith=as,Hn.uniq=function(t){return t&&t.length?di(t):[]},Hn.uniqBy=function(t,e){return t&&t.length?di(t,ua(e,2)):[]},Hn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?di(t,i,e):[]},Hn.unset=function(t,e){return null==t||fi(t,e)},Hn.unzip=ss,Hn.unzipWith=os,Hn.update=function(t,e,n){return null==t?t:pi(t,e,xi(n))},Hn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:pi(t,e,xi(n),r)},Hn.values=jo,Hn.valuesIn=function(t){return null==t?[]:tn(t,Bo(t))},Hn.without=ls,Hn.words=tl,Hn.wrap=function(t,e){return zs(xi(e),t)},Hn.xor=cs,Hn.xorBy=us,Hn.xorWith=hs,Hn.zip=ds,Hn.zipObject=function(t,e){return vi(t||[],e||[],rr)},Hn.zipObjectDeep=function(t,e){return vi(t||[],e||[],ei)},Hn.zipWith=fs,Hn.entries=Go,Hn.entriesIn=Ho,Hn.extend=So,Hn.extendWith=Eo,ul(Hn,Hn),Hn.add=xl,Hn.attempt=el,Hn.camelCase=Vo,Hn.capitalize=Wo,Hn.ceil=_l,Hn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=bo(n))==n?n:0),e!==i&&(e=(e=bo(e))==e?e:0),cr(bo(t),e,n)},Hn.clone=function(t){return ur(t,4)},Hn.cloneDeep=function(t){return ur(t,5)},Hn.cloneDeepWith=function(t,e){return ur(t,5,e="function"==typeof e?e:i)},Hn.cloneWith=function(t,e){return ur(t,4,e="function"==typeof e?e:i)},Hn.conformsTo=function(t,e){return null==e||hr(t,e,Do(e))},Hn.deburr=$o,Hn.defaultTo=function(t,e){return null==t||t!=t?e:t},Hn.divide=wl,Hn.endsWith=function(t,e,n){t=_o(t),e=hi(e);var r=t.length,a=n=n===i?r:cr(yo(n),0,r);return(n-=e.length)>=0&&t.slice(n,a)==e},Hn.eq=Hs,Hn.escape=function(t){return(t=_o(t))&&Z.test(t)?t.replace(X,on):t},Hn.escapeRegExp=function(t){return(t=_o(t))&&at.test(t)?t.replace(it,"\\$&"):t},Hn.every=function(t,e,n){var r=$s(t)?Pe:gr;return n&&_a(t,e,n)&&(e=i),r(t,ua(e,3))},Hn.find=vs,Hn.findIndex=Wa,Hn.findKey=function(t,e){return Ge(t,ua(e,3),wr)},Hn.findLast=bs,Hn.findLastIndex=$a,Hn.findLastKey=function(t,e){return Ge(t,ua(e,3),Sr)},Hn.floor=Sl,Hn.forEach=xs,Hn.forEachRight=_s,Hn.forIn=function(t,e){return null==t?t:xr(t,ua(e,3),Bo)},Hn.forInRight=function(t,e){return null==t?t:_r(t,ua(e,3),Bo)},Hn.forOwn=function(t,e){return t&&wr(t,ua(e,3))},Hn.forOwnRight=function(t,e){return t&&Sr(t,ua(e,3))},Hn.get=ko,Hn.gt=js,Hn.gte=Vs,Hn.has=function(t,e){return null!=t&&ya(t,e,kr)},Hn.hasIn=Lo,Hn.head=qa,Hn.identity=sl,Hn.includes=function(t,e,n,r){t=qs(t)?t:jo(t),n=n&&!r?yo(n):0;var i=t.length;return n<0&&(n=xn(i+n,0)),co(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&je(t,e,n)>-1},Hn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:yo(n);return i<0&&(i=xn(r+i,0)),je(t,e,i)},Hn.inRange=function(t,e,n){return e=go(e),n===i?(n=e,e=0):n=go(n),function(t,e,n){return t>=_n(e,n)&&t<xn(e,n)}(t=bo(t),e,n)},Hn.invoke=Io,Hn.isArguments=Ws,Hn.isArray=$s,Hn.isArrayBuffer=Ys,Hn.isArrayLike=qs,Hn.isArrayLikeObject=Xs,Hn.isBoolean=function(t){return!0===t||!1===t||ro(t)&&Tr(t)==x},Hn.isBuffer=Js,Hn.isDate=Zs,Hn.isElement=function(t){return ro(t)&&1===t.nodeType&&!so(t)},Hn.isEmpty=function(t){if(null==t)return!0;if(qs(t)&&($s(t)||"string"==typeof t||"function"==typeof t.splice||Js(t)||ho(t)||Ws(t)))return!t.length;var e=ga(t);if(e==M||e==L)return!t.size;if(Ma(t))return!Fr(t).length;for(var n in t)if(Ot.call(t,n))return!1;return!0},Hn.isEqual=function(t,e){return Dr(t,e)},Hn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Dr(t,e,i,n):!!r},Hn.isError=Ks,Hn.isFinite=function(t){return"number"==typeof t&&xe(t)},Hn.isFunction=Qs,Hn.isInteger=to,Hn.isLength=eo,Hn.isMap=io,Hn.isMatch=function(t,e){return t===e||Br(t,e,da(e))},Hn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Br(t,e,da(e),n)},Hn.isNaN=function(t){return ao(t)&&t!=+t},Hn.isNative=function(t){if(Ea(t))throw new Et("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Or(t)},Hn.isNil=function(t){return null==t},Hn.isNull=function(t){return null===t},Hn.isNumber=ao,Hn.isObject=no,Hn.isObjectLike=ro,Hn.isPlainObject=so,Hn.isRegExp=oo,Hn.isSafeInteger=function(t){return to(t)&&t>=-9007199254740991&&t<=p},Hn.isSet=lo,Hn.isString=co,Hn.isSymbol=uo,Hn.isTypedArray=ho,Hn.isUndefined=function(t){return t===i},Hn.isWeakMap=function(t){return ro(t)&&ga(t)==I},Hn.isWeakSet=function(t){return ro(t)&&"[object WeakSet]"==Tr(t)},Hn.join=function(t,e){return null==t?"":Ue.call(t,e)},Hn.kebabCase=Yo,Hn.last=Ka,Hn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=yo(n))<0?xn(r+a,0):_n(a,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,a):He(t,We,a,!0)},Hn.lowerCase=qo,Hn.lowerFirst=Xo,Hn.lt=fo,Hn.lte=po,Hn.max=function(t){return t&&t.length?yr(t,sl,Ar):i},Hn.maxBy=function(t,e){return t&&t.length?yr(t,ua(e,2),Ar):i},Hn.mean=function(t){return $e(t,sl)},Hn.meanBy=function(t,e){return $e(t,ua(e,2))},Hn.min=function(t){return t&&t.length?yr(t,sl,Ur):i},Hn.minBy=function(t,e){return t&&t.length?yr(t,ua(e,2),Ur):i},Hn.stubArray=vl,Hn.stubFalse=bl,Hn.stubObject=function(){return{}},Hn.stubString=function(){return""},Hn.stubTrue=function(){return!0},Hn.multiply=Ml,Hn.nth=function(t,e){return t&&t.length?Wr(t,yo(e)):i},Hn.noConflict=function(){return me._===this&&(me._=Gt),this},Hn.noop=hl,Hn.now=As,Hn.pad=function(t,e,n){t=_o(t);var r=(e=yo(e))?mn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return $i(ge(i),n)+t+$i(pe(i),n)},Hn.padEnd=function(t,e,n){t=_o(t);var r=(e=yo(e))?mn(t):0;return e&&r<e?t+$i(e-r,n):t},Hn.padStart=function(t,e,n){t=_o(t);var r=(e=yo(e))?mn(t):0;return e&&r<e?$i(e-r,n)+t:t},Hn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Sn(_o(t).replace(st,""),e||0)},Hn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&_a(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=go(t),e===i?(e=t,t=0):e=go(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var a=En();return _n(t+a*(e-t+he("1e-"+((a+"").length-1))),e)}return Jr(t,e)},Hn.reduce=function(t,e,n){var r=$s(t)?Ne:Xe,i=arguments.length<3;return r(t,ua(e,4),n,i,pr)},Hn.reduceRight=function(t,e,n){var r=$s(t)?Fe:Xe,i=arguments.length<3;return r(t,ua(e,4),n,i,mr)},Hn.repeat=function(t,e,n){return e=(n?_a(t,e,n):e===i)?1:yo(e),Zr(_o(t),e)},Hn.replace=function(){var t=arguments,e=_o(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Hn.result=function(t,e,n){var r=-1,a=(e=_i(e,t)).length;for(a||(a=1,t=i);++r<a;){var s=null==t?i:t[za(e[r])];s===i&&(r=a,s=n),t=Qs(s)?s.call(t):s}return t},Hn.round=Cl,Hn.runInContext=t,Hn.sample=function(t){return($s(t)?Qn:Qr)(t)},Hn.size=function(t){if(null==t)return 0;if(qs(t))return co(t)?mn(t):t.length;var e=ga(t);return e==M||e==L?t.size:Fr(t).length},Hn.snakeCase=Jo,Hn.some=function(t,e,n){var r=$s(t)?ze:si;return n&&_a(t,e,n)&&(e=i),r(t,ua(e,3))},Hn.sortedIndex=function(t,e){return oi(t,e)},Hn.sortedIndexBy=function(t,e,n){return li(t,e,ua(n,2))},Hn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=oi(t,e);if(r<n&&Hs(t[r],e))return r}return-1},Hn.sortedLastIndex=function(t,e){return oi(t,e,!0)},Hn.sortedLastIndexBy=function(t,e,n){return li(t,e,ua(n,2),!0)},Hn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=oi(t,e,!0)-1;if(Hs(t[n],e))return n}return-1},Hn.startCase=Zo,Hn.startsWith=function(t,e,n){return t=_o(t),n=null==n?0:cr(yo(n),0,t.length),e=hi(e),t.slice(n,n+e.length)==e},Hn.subtract=Tl,Hn.sum=function(t){return t&&t.length?Je(t,sl):0},Hn.sumBy=function(t,e){return t&&t.length?Je(t,ua(e,2)):0},Hn.template=function(t,e,n){var r=Hn.templateSettings;n&&_a(t,e,n)&&(e=i),t=_o(t),e=Eo({},e,r,ta);var a,s,o=Eo({},e.imports,r.imports,ta),l=Do(o),c=tn(o,l),u=0,h=e.interpolate||wt,d="__p += '",f=At((e.escape||wt).source+"|"+h.source+"|"+(h===tt?pt:wt).source+"|"+(e.evaluate||wt).source+"|$","g"),p="//# sourceURL="+(Ot.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++oe+"]")+"\n";t.replace(f,(function(e,n,r,i,o,l){return r||(r=i),d+=t.slice(u,l).replace(St,ln),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),o&&(s=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),d+="';\n";var m=Ot.call(e,"variable")&&e.variable;if(m){if(dt.test(m))throw new Et("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(W,""):d).replace($,"$1").replace(Y,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=el((function(){return Mt(l,p+"return "+d).apply(i,c)}));if(g.source=d,Ks(g))throw g;return g},Hn.times=function(t,e){if((t=yo(t))<1||t>p)return[];var n=g,r=_n(t,g);e=ua(e),t-=g;for(var i=Ze(r,e);++n<t;)e(n);return i},Hn.toFinite=go,Hn.toInteger=yo,Hn.toLength=vo,Hn.toLower=function(t){return _o(t).toLowerCase()},Hn.toNumber=bo,Hn.toSafeInteger=function(t){return t?cr(yo(t),-9007199254740991,p):0===t?t:0},Hn.toString=_o,Hn.toUpper=function(t){return _o(t).toUpperCase()},Hn.trim=function(t,e,n){if((t=_o(t))&&(n||e===i))return Ke(t);if(!t||!(e=hi(e)))return t;var r=gn(t),a=gn(e);return Si(r,nn(r,a),rn(r,a)+1).join("")},Hn.trimEnd=function(t,e,n){if((t=_o(t))&&(n||e===i))return t.slice(0,yn(t)+1);if(!t||!(e=hi(e)))return t;var r=gn(t);return Si(r,0,rn(r,gn(e))+1).join("")},Hn.trimStart=function(t,e,n){if((t=_o(t))&&(n||e===i))return t.replace(st,"");if(!t||!(e=hi(e)))return t;var r=gn(t);return Si(r,nn(r,gn(e))).join("")},Hn.truncate=function(t,e){var n=30,r="...";if(no(e)){var a="separator"in e?e.separator:a;n="length"in e?yo(e.length):n,r="omission"in e?hi(e.omission):r}var s=(t=_o(t)).length;if(cn(t)){var o=gn(t);s=o.length}if(n>=s)return t;var l=n-mn(r);if(l<1)return r;var c=o?Si(o,0,l).join(""):t.slice(0,l);if(a===i)return c+r;if(o&&(l+=c.length-l),oo(a)){if(t.slice(l).search(a)){var u,h=c;for(a.global||(a=At(a.source,_o(mt.exec(a))+"g")),a.lastIndex=0;u=a.exec(h);)var d=u.index;c=c.slice(0,d===i?l:d)}}else if(t.indexOf(hi(a),l)!=l){var f=c.lastIndexOf(a);f>-1&&(c=c.slice(0,f))}return c+r},Hn.unescape=function(t){return(t=_o(t))&&J.test(t)?t.replace(q,vn):t},Hn.uniqueId=function(t){var e=++Nt;return _o(t)+e},Hn.upperCase=Ko,Hn.upperFirst=Qo,Hn.each=xs,Hn.eachRight=_s,Hn.first=qa,ul(Hn,(El={},wr(Hn,(function(t,e){Ot.call(Hn.prototype,e)||(El[e]=t)})),El),{chain:!1}),Hn.VERSION="4.17.21",ke(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Hn[t].placeholder=Hn})),ke(["drop","take"],(function(t,e){$n.prototype[t]=function(n){n=n===i?1:xn(yo(n),0);var r=this.__filtered__&&!e?new $n(this):this.clone();return r.__filtered__?r.__takeCount__=_n(n,r.__takeCount__):r.__views__.push({size:_n(n,g),type:t+(r.__dir__<0?"Right":"")}),r},$n.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ke(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;$n.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ua(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),ke(["head","last"],(function(t,e){var n="take"+(e?"Right":"");$n.prototype[t]=function(){return this[n](1).value()[0]}})),ke(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");$n.prototype[t]=function(){return this.__filtered__?new $n(this):this[n](1)}})),$n.prototype.compact=function(){return this.filter(sl)},$n.prototype.find=function(t){return this.filter(t).head()},$n.prototype.findLast=function(t){return this.reverse().find(t)},$n.prototype.invokeMap=Kr((function(t,e){return"function"==typeof t?new $n(this):this.map((function(n){return Rr(n,t,e)}))})),$n.prototype.reject=function(t){return this.filter(Ns(ua(t)))},$n.prototype.slice=function(t,e){t=yo(t);var n=this;return n.__filtered__&&(t>0||e<0)?new $n(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=yo(e))<0?n.dropRight(-e):n.take(e-t)),n)},$n.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},$n.prototype.toArray=function(){return this.take(g)},wr($n.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),a=Hn[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);a&&(Hn.prototype[e]=function(){var e=this.__wrapped__,o=r?[1]:arguments,l=e instanceof $n,c=o[0],u=l||$s(e),h=function(t){var e=a.apply(Hn,Oe([t],o));return r&&d?e[0]:e};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=s&&!d,m=l&&!f;if(!s&&u){e=m?e:new $n(this);var g=t.apply(e,o);return g.__actions__.push({func:ms,args:[h],thisArg:i}),new Wn(g,d)}return p&&m?t.apply(this,o):(g=this.thru(h),p?r?g.value()[0]:g.value():g)})})),ke(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Pt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Hn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply($s(i)?i:[],t)}return this[n]((function(n){return e.apply($s(n)?n:[],t)}))}})),wr($n.prototype,(function(t,e){var n=Hn[e];if(n){var r=n.name+"";Ot.call(In,r)||(In[r]=[]),In[r].push({name:e,func:n})}})),In[Hi(i,2).name]=[{name:"wrapper",func:i}],$n.prototype.clone=function(){var t=new $n(this.__wrapped__);return t.__actions__=Pi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Pi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Pi(this.__views__),t},$n.prototype.reverse=function(){if(this.__filtered__){var t=new $n(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},$n.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=$s(t),r=e<0,i=n?t.length:0,a=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],s=a.size;switch(a.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=_n(e,t+s);break;case"takeRight":t=xn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=a.start,o=a.end,l=o-s,c=r?o:s-1,u=this.__iteratees__,h=u.length,d=0,f=_n(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return gi(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var m=-1,g=t[c+=e];++m<h;){var y=u[m],v=y.iteratee,b=y.type,x=v(g);if(2==b)g=x;else if(!x){if(1==b)continue t;break t}}p[d++]=g}return p},Hn.prototype.at=gs,Hn.prototype.chain=function(){return ps(this)},Hn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Hn.prototype.next=function(){this.__values__===i&&(this.__values__=mo(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Hn.prototype.plant=function(t){for(var e,n=this;n instanceof Vn;){var r=Ga(n);r.__index__=0,r.__values__=i,e?a.__wrapped__=r:e=r;var a=r;n=n.__wrapped__}return a.__wrapped__=t,e},Hn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof $n){var e=t;return this.__actions__.length&&(e=new $n(this)),(e=e.reverse()).__actions__.push({func:ms,args:[ns],thisArg:i}),new Wn(e,this.__chain__)}return this.thru(ns)},Hn.prototype.toJSON=Hn.prototype.valueOf=Hn.prototype.value=function(){return gi(this.__wrapped__,this.__actions__)},Hn.prototype.first=Hn.prototype.head,Kt&&(Hn.prototype[Kt]=function(){return this}),Hn}();me._=bn,(r=function(){return bn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},3231:function(t,e,n){(t=n.nmd(t)).exports=function(){"use strict";var r=Object.defineProperty,i=(t,e,n)=>e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,a=(t,e,n)=>(i(t,"symbol"!=typeof e?e+"":e,n),n);function s(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"&&self;var o,l,u={exports:{}};l=function(){var t;function e(){return t.apply(null,arguments)}function n(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function r(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;for(var e in t)if(i(t,e))return;return 1}function l(t){return void 0===t}function c(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function u(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function h(t,e){for(var n=[],r=t.length,i=0;i<r;++i)n.push(e(t[i],i));return n}function d(t,e){for(var n in e)i(e,n)&&(t[n]=e[n]);return i(e,"toString")&&(t.toString=e.toString),i(e,"valueOf")&&(t.valueOf=e.valueOf),t}function f(t,e,n,r){return Le(t,e,n,r,!0).utc()}function p(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function m(t){if(null==t._isValid){var e=p(t),n=y.call(e.parsedDateParts,(function(t){return null!=t}));if(n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function g(t){var e=f(NaN);return null!=t?d(p(e),t):p(e).userInvalidated=!0,e}var y=Array.prototype.some||function(t){for(var e=Object(this),n=e.length>>>0,r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1},v=e.momentProperties=[],b=!1;function x(t,e){var n,r,i,a=v.length;if(l(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),l(e._i)||(t._i=e._i),l(e._f)||(t._f=e._f),l(e._l)||(t._l=e._l),l(e._strict)||(t._strict=e._strict),l(e._tzm)||(t._tzm=e._tzm),l(e._isUTC)||(t._isUTC=e._isUTC),l(e._offset)||(t._offset=e._offset),l(e._pf)||(t._pf=p(e)),l(e._locale)||(t._locale=e._locale),0<a)for(n=0;n<a;n++)l(i=e[r=v[n]])||(t[r]=i);return t}function _(t){x(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,e.updateOffset(this),b=!1)}function w(t){return t instanceof _||null!=t&&null!=t._isAMomentObject}function S(t){!1===e.suppressDeprecationWarnings&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function E(t,n){var r=!0;return d((function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),r){for(var a,s,o=[],l=arguments.length,c=0;c<l;c++){if(a="","object"==typeof arguments[c]){for(s in a+="\n["+c+"] ",arguments[0])i(arguments[0],s)&&(a+=s+": "+arguments[0][s]+", ");a=a.slice(0,-2)}else a=arguments[c];o.push(a)}S(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)}),n)}var M={};function C(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),M[t]||(S(n),M[t]=!0)}function T(t){return typeof Function<"u"&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function A(t,e){var n,a=d({},t);for(n in e)i(e,n)&&(r(t[n])&&r(e[n])?(a[n]={},d(a[n],t[n]),d(a[n],e[n])):null!=e[n]?a[n]=e[n]:delete a[n]);for(n in t)i(t,n)&&!i(e,n)&&r(t[n])&&(a[n]=d({},a[n]));return a}function k(t){null!=t&&this.set(t)}e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var L=Object.keys||function(t){var e,n=[];for(e in t)i(t,e)&&n.push(e);return n};function P(t,e,n){var r=""+Math.abs(t);return(0<=t?n?"+":"":"-")+Math.pow(10,Math.max(0,e-r.length)).toString().substr(1)+r}var R=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,I=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,D={},B={};function O(t,e,n,r){var i="string"==typeof r?function(){return this[r]()}:r;t&&(B[t]=i),e&&(B[e[0]]=function(){return P(i.apply(this,arguments),e[1],e[2])}),n&&(B[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function N(t,e){return t.isValid()?(e=F(e,t.localeData()),D[e]=D[e]||function(t){for(var e,n=t.match(R),r=0,i=n.length;r<i;r++)B[n[r]]?n[r]=B[n[r]]:n[r]=(e=n[r]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){for(var r="",a=0;a<i;a++)r+=T(n[a])?n[a].call(e,t):n[a];return r}}(e),D[e](t)):t.localeData().invalidDate()}function F(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(I.lastIndex=0;0<=n&&I.test(t);)t=t.replace(I,r),I.lastIndex=0,--n;return t}var z={};function U(t,e){var n=t.toLowerCase();z[n]=z[n+"s"]=z[e]=t}function G(t){return"string"==typeof t?z[t]||z[t.toLowerCase()]:void 0}function H(t){var e,n,r={};for(n in t)i(t,n)&&(e=G(n))&&(r[e]=t[n]);return r}var j={};function V(t,e){j[t]=e}function W(t){return t%4==0&&t%100!=0||t%400==0}function $(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function Y(t){var e=0;return 0!=(t=+t)&&isFinite(t)?$(t):e}function q(t,n){return function(r){return null!=r?(J(this,t,r),e.updateOffset(this,n),this):X(this,t)}}function X(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function J(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&W(t.year())&&1===t.month()&&29===t.date()?(n=Y(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Lt(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}var Z=/\d/,K=/\d\d/,Q=/\d{3}/,tt=/\d{4}/,et=/[+-]?\d{6}/,nt=/\d\d?/,rt=/\d\d\d\d?/,it=/\d\d\d\d\d\d?/,at=/\d{1,3}/,st=/\d{1,4}/,ot=/[+-]?\d{1,6}/,lt=/\d+/,ct=/[+-]?\d+/,ut=/Z|[+-]\d\d:?\d\d/gi,ht=/Z|[+-]\d\d(?::?\d\d)?/gi,dt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function ft(t,e,n){gt[t]=T(e)?e:function(t,r){return t&&n?n:e}}function pt(t,e){return i(gt,t)?gt[t](e._strict,e._locale):new RegExp(mt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i}))))}function mt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var gt={},yt={};function vt(t,e){var n,r,i=e;for("string"==typeof t&&(t=[t]),c(e)&&(i=function(t,n){n[e]=Y(t)}),r=t.length,n=0;n<r;n++)yt[t[n]]=i}function bt(t,e){vt(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}var xt,_t=0,wt=1,St=2,Et=3,Mt=4,Ct=5,Tt=6,At=7,kt=8;function Lt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=(e%(n=12)+n)%n;return t+=(e-n)/12,1==n?W(t)?29:28:31-n%7%2}xt=Array.prototype.indexOf||function(t){for(var e=0;e<this.length;++e)if(this[e]===t)return e;return-1},O("M",["MM",2],"Mo",(function(){return this.month()+1})),O("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),O("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),U("month","M"),V("month",8),ft("M",nt),ft("MM",nt,K),ft("MMM",(function(t,e){return e.monthsShortRegex(t)})),ft("MMMM",(function(t,e){return e.monthsRegex(t)})),vt(["M","MM"],(function(t,e){e[wt]=Y(t)-1})),vt(["MMM","MMMM"],(function(t,e,n,r){null!=(r=n._locale.monthsParse(t,r,n._strict))?e[wt]=r:p(n).invalidMonth=t}));var Pt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Rt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),It=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Dt=dt,Bt=dt;function Ot(t,e){var n;if(t.isValid()){if("string"==typeof e)if(/^\d+$/.test(e))e=Y(e);else if(!c(e=t.localeData().monthsParse(e)))return;n=Math.min(t.date(),Lt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n)}}function Nt(t){return null!=t?(Ot(this,t),e.updateOffset(this,!0),this):X(this,"Month")}function Ft(){function t(t,e){return e.length-t.length}for(var e,n=[],r=[],i=[],a=0;a<12;a++)e=f([2e3,a]),n.push(this.monthsShort(e,"")),r.push(this.months(e,"")),i.push(this.months(e,"")),i.push(this.monthsShort(e,""));for(n.sort(t),r.sort(t),i.sort(t),a=0;a<12;a++)n[a]=mt(n[a]),r[a]=mt(r[a]);for(a=0;a<24;a++)i[a]=mt(i[a]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function zt(t){return W(t)?366:365}O("Y",0,0,(function(){var t=this.year();return t<=9999?P(t,4):"+"+t})),O(0,["YY",2],0,(function(){return this.year()%100})),O(0,["YYYY",4],0,"year"),O(0,["YYYYY",5],0,"year"),O(0,["YYYYYY",6,!0],0,"year"),U("year","y"),V("year",1),ft("Y",ct),ft("YY",nt,K),ft("YYYY",st,tt),ft("YYYYY",ot,et),ft("YYYYYY",ot,et),vt(["YYYYY","YYYYYY"],_t),vt("YYYY",(function(t,n){n[_t]=2===t.length?e.parseTwoDigitYear(t):Y(t)})),vt("YY",(function(t,n){n[_t]=e.parseTwoDigitYear(t)})),vt("Y",(function(t,e){e[_t]=parseInt(t,10)})),e.parseTwoDigitYear=function(t){return Y(t)+(68<Y(t)?1900:2e3)};var Ut=q("FullYear",!0);function Gt(t,e,n,r,i,a,s){var o;return t<100&&0<=t?(o=new Date(t+400,e,n,r,i,a,s),isFinite(o.getFullYear())&&o.setFullYear(t)):o=new Date(t,e,n,r,i,a,s),o}function Ht(t){var e;return t<100&&0<=t?((e=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,e)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function jt(t,e,n){return(n=7+e-n)-(7+Ht(t,0,n).getUTCDay()-e)%7-1}function Vt(t,e,n,r,i){var a;return n=(e=1+7*(e-1)+(7+n-r)%7+jt(t,r,i))<=0?zt(a=t-1)+e:e>zt(t)?(a=t+1,e-zt(t)):(a=t,e),{year:a,dayOfYear:n}}function Wt(t,e,n){var r,i,a=jt(t.year(),e,n);return(a=Math.floor((t.dayOfYear()-a-1)/7)+1)<1?r=a+$t(i=t.year()-1,e,n):a>$t(t.year(),e,n)?(r=a-$t(t.year(),e,n),i=t.year()+1):(i=t.year(),r=a),{week:r,year:i}}function $t(t,e,n){var r=jt(t,e,n);return e=jt(t+1,e,n),(zt(t)-r+e)/7}function Yt(t,e){return t.slice(e,7).concat(t.slice(0,e))}O("w",["ww",2],"wo","week"),O("W",["WW",2],"Wo","isoWeek"),U("week","w"),U("isoWeek","W"),V("week",5),V("isoWeek",5),ft("w",nt),ft("ww",nt,K),ft("W",nt),ft("WW",nt,K),bt(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=Y(t)})),O("d",0,"do","day"),O("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),O("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),O("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),O("e",0,0,"weekday"),O("E",0,0,"isoWeekday"),U("day","d"),U("weekday","e"),U("isoWeekday","E"),V("day",11),V("weekday",11),V("isoWeekday",11),ft("d",nt),ft("e",nt),ft("E",nt),ft("dd",(function(t,e){return e.weekdaysMinRegex(t)})),ft("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),ft("dddd",(function(t,e){return e.weekdaysRegex(t)})),bt(["dd","ddd","dddd"],(function(t,e,n,r){null!=(r=n._locale.weekdaysParse(t,r,n._strict))?e.d=r:p(n).invalidWeekday=t})),bt(["d","e","E"],(function(t,e,n,r){e[r]=Y(t)}));var qt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Xt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Jt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Zt=dt,Kt=dt,Qt=dt;function te(){function t(t,e){return e.length-t.length}for(var e,n,r,i=[],a=[],s=[],o=[],l=0;l<7;l++)r=f([2e3,1]).day(l),e=mt(this.weekdaysMin(r,"")),n=mt(this.weekdaysShort(r,"")),r=mt(this.weekdays(r,"")),i.push(e),a.push(n),s.push(r),o.push(e),o.push(n),o.push(r);i.sort(t),a.sort(t),s.sort(t),o.sort(t),this._weekdaysRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function ee(){return this.hours()%12||12}function ne(t,e){O(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function re(t,e){return e._meridiemParse}O("H",["HH",2],0,"hour"),O("h",["hh",2],0,ee),O("k",["kk",2],0,(function(){return this.hours()||24})),O("hmm",0,0,(function(){return""+ee.apply(this)+P(this.minutes(),2)})),O("hmmss",0,0,(function(){return""+ee.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)})),O("Hmm",0,0,(function(){return""+this.hours()+P(this.minutes(),2)})),O("Hmmss",0,0,(function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)})),ne("a",!0),ne("A",!1),U("hour","h"),V("hour",13),ft("a",re),ft("A",re),ft("H",nt),ft("h",nt),ft("k",nt),ft("HH",nt,K),ft("hh",nt,K),ft("kk",nt,K),ft("hmm",rt),ft("hmmss",it),ft("Hmm",rt),ft("Hmmss",it),vt(["H","HH"],Et),vt(["k","kk"],(function(t,e,n){t=Y(t),e[Et]=24===t?0:t})),vt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),vt(["h","hh"],(function(t,e,n){e[Et]=Y(t),p(n).bigHour=!0})),vt("hmm",(function(t,e,n){var r=t.length-2;e[Et]=Y(t.substr(0,r)),e[Mt]=Y(t.substr(r)),p(n).bigHour=!0})),vt("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[Et]=Y(t.substr(0,r)),e[Mt]=Y(t.substr(r,2)),e[Ct]=Y(t.substr(i)),p(n).bigHour=!0})),vt("Hmm",(function(t,e,n){var r=t.length-2;e[Et]=Y(t.substr(0,r)),e[Mt]=Y(t.substr(r))})),vt("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[Et]=Y(t.substr(0,r)),e[Mt]=Y(t.substr(r,2)),e[Ct]=Y(t.substr(i))})),dt=q("Hours",!0);var ie,ae={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Pt,monthsShort:Rt,week:{dow:0,doy:6},weekdays:qt,weekdaysMin:Jt,weekdaysShort:Xt,meridiemParse:/[ap]\.?m?\.?/i},se={},oe={};function le(t){return t&&t.toLowerCase().replace("_","-")}function ce(t){for(var e,n,r,i,a=0;a<t.length;){for(e=(i=le(t[a]).split("-")).length,n=(n=le(t[a+1]))?n.split("-"):null;0<e;){if(r=ue(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r+=1)if(t[r]!==e[r])return r;return n}(i,n)>=e-1)break;e--}a++}return ie}function ue(t){var e;if(void 0===se[t]&&o&&o.exports&&null!=t.match("^[^/\\\\]*$"))try{e=ie._abbr,s("./locale/"+t),he(e)}catch{se[t]=null}return se[t]}function he(t,e){return t&&((e=l(e)?fe(t):de(t,e))?ie=e:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),ie._abbr}function de(t,e){if(null===e)return delete se[t],null;var n,r=ae;if(e.abbr=t,null!=se[t])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=se[t]._config;else if(null!=e.parentLocale)if(null!=se[e.parentLocale])r=se[e.parentLocale]._config;else{if(null==(n=ue(e.parentLocale)))return oe[e.parentLocale]||(oe[e.parentLocale]=[]),oe[e.parentLocale].push({name:t,config:e}),null;r=n._config}return se[t]=new k(A(r,e)),oe[t]&&oe[t].forEach((function(t){de(t.name,t.config)})),he(t),se[t]}function fe(t){var e;if(!(t=t&&t._locale&&t._locale._abbr?t._locale._abbr:t))return ie;if(!n(t)){if(e=ue(t))return e;t=[t]}return ce(t)}function pe(t){var e=t._a;return e&&-2===p(t).overflow&&(e=e[wt]<0||11<e[wt]?wt:e[St]<1||e[St]>Lt(e[_t],e[wt])?St:e[Et]<0||24<e[Et]||24===e[Et]&&(0!==e[Mt]||0!==e[Ct]||0!==e[Tt])?Et:e[Mt]<0||59<e[Mt]?Mt:e[Ct]<0||59<e[Ct]?Ct:e[Tt]<0||999<e[Tt]?Tt:-1,p(t)._overflowDayOfYear&&(e<_t||St<e)&&(e=St),p(t)._overflowWeeks&&-1===e&&(e=At),p(t)._overflowWeekday&&-1===e&&(e=kt),p(t).overflow=e),t}var me=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ge=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ye=/Z|[+-]\d\d(?::?\d\d)?/,ve=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],be=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],xe=/^\/?Date\((-?\d+)/i,_e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,we={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Se(t){var e,n,r,i,a,s,o=t._i,l=me.exec(o)||ge.exec(o),c=(o=ve.length,be.length);if(l){for(p(t).iso=!0,e=0,n=o;e<n;e++)if(ve[e][1].exec(l[1])){i=ve[e][0],r=!1!==ve[e][2];break}if(null==i)t._isValid=!1;else{if(l[3]){for(e=0,n=c;e<n;e++)if(be[e][1].exec(l[3])){a=(l[2]||" ")+be[e][0];break}if(null==a)return void(t._isValid=!1)}if(r||null==a){if(l[4]){if(!ye.exec(l[4]))return void(t._isValid=!1);s="Z"}t._f=i+(a||"")+(s||""),Ae(t)}else t._isValid=!1}}else t._isValid=!1}function Ee(t,e,n,r,i,a){return t=[(s=t,(s=parseInt(s,10))<=49?2e3+s:s<=999?1900+s:s),Rt.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)],a&&t.push(parseInt(a,10)),t;var s}function Me(t){var e,n,r,i,a=_e.exec(t._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));a?(r=e=Ee(a[4],a[3],a[2],a[5],a[6],a[7]),i=t,(n=a[1])&&Xt.indexOf(n)!==new Date(r[0],r[1],r[2]).getDay()?(p(i).weekdayMismatch=!0,i._isValid=!1):(t._a=e,t._tzm=(n=a[8],r=a[9],i=a[10],n?we[n]:r?0:((n=parseInt(i,10))-(r=n%100))/100*60+r),t._d=Ht.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0)):t._isValid=!1}function Ce(t,e,n){return null!=t?t:null!=e?e:n}function Te(t){var n,r,i,a,s,o,l,c,u,h,d,f=[];if(!t._d){for(i=t,a=new Date(e.now()),r=i._useUTC?[a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()]:[a.getFullYear(),a.getMonth(),a.getDate()],t._w&&null==t._a[St]&&null==t._a[wt]&&(null!=(a=(i=t)._w).GG||null!=a.W||null!=a.E?(c=1,u=4,s=Ce(a.GG,i._a[_t],Wt(Pe(),1,4).year),o=Ce(a.W,1),((l=Ce(a.E,1))<1||7<l)&&(h=!0)):(c=i._locale._week.dow,u=i._locale._week.doy,d=Wt(Pe(),c,u),s=Ce(a.gg,i._a[_t],d.year),o=Ce(a.w,d.week),null!=a.d?((l=a.d)<0||6<l)&&(h=!0):null!=a.e?(l=a.e+c,(a.e<0||6<a.e)&&(h=!0)):l=c),o<1||o>$t(s,c,u)?p(i)._overflowWeeks=!0:null!=h?p(i)._overflowWeekday=!0:(d=Vt(s,o,l,c,u),i._a[_t]=d.year,i._dayOfYear=d.dayOfYear)),null!=t._dayOfYear&&(a=Ce(t._a[_t],r[_t]),(t._dayOfYear>zt(a)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),h=Ht(a,0,t._dayOfYear),t._a[wt]=h.getUTCMonth(),t._a[St]=h.getUTCDate()),n=0;n<3&&null==t._a[n];++n)t._a[n]=f[n]=r[n];for(;n<7;n++)t._a[n]=f[n]=null==t._a[n]?2===n?1:0:t._a[n];24===t._a[Et]&&0===t._a[Mt]&&0===t._a[Ct]&&0===t._a[Tt]&&(t._nextDay=!0,t._a[Et]=0),t._d=(t._useUTC?Ht:Gt).apply(null,f),s=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Et]=24),t._w&&void 0!==t._w.d&&t._w.d!==s&&(p(t).weekdayMismatch=!0)}}function Ae(t){if(t._f===e.ISO_8601)Se(t);else if(t._f===e.RFC_2822)Me(t);else{t._a=[],p(t).empty=!0;for(var n,r,a,s,o,l=""+t._i,c=l.length,u=0,h=F(t._f,t._locale).match(R)||[],d=h.length,f=0;f<d;f++)r=h[f],(n=(l.match(pt(r,t))||[])[0])&&(0<(a=l.substr(0,l.indexOf(n))).length&&p(t).unusedInput.push(a),l=l.slice(l.indexOf(n)+n.length),u+=n.length),B[r]?(n?p(t).empty=!1:p(t).unusedTokens.push(r),a=r,o=t,null!=(s=n)&&i(yt,a)&&yt[a](s,o._a,o,a)):t._strict&&!n&&p(t).unusedTokens.push(r);p(t).charsLeftOver=c-u,0<l.length&&p(t).unusedInput.push(l),t._a[Et]<=12&&!0===p(t).bigHour&&0<t._a[Et]&&(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[Et]=(m=t._locale,g=t._a[Et],null==(y=t._meridiem)?g:null!=m.meridiemHour?m.meridiemHour(g,y):null!=m.isPM?((m=m.isPM(y))&&g<12&&(g+=12),g=m||12!==g?g:0):g),null!==(c=p(t).era)&&(t._a[_t]=t._locale.erasConvertYear(c,t._a[_t])),Te(t),pe(t)}var m,g,y}function ke(t){var i,a,s,o=t._i,f=t._f;return t._locale=t._locale||fe(t._l),null===o||void 0===f&&""===o?g({nullInput:!0}):("string"==typeof o&&(t._i=o=t._locale.preparse(o)),w(o)?new _(pe(o)):(u(o)?t._d=o:n(f)?function(t){var e,n,r,i,a,s,o=!1,l=t._f.length;if(0===l)return p(t).invalidFormat=!0,t._d=new Date(NaN);for(i=0;i<l;i++)a=0,s=!1,e=x({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Ae(e),m(e)&&(s=!0),a=(a+=p(e).charsLeftOver)+10*p(e).unusedTokens.length,p(e).score=a,o?a<r&&(r=a,n=e):(null==r||a<r||s)&&(r=a,n=e,s&&(o=!0));d(t,n||e)}(t):f?Ae(t):l(f=(o=t)._i)?o._d=new Date(e.now()):u(f)?o._d=new Date(f.valueOf()):"string"==typeof f?(a=o,null!==(i=xe.exec(a._i))?a._d=new Date(+i[1]):(Se(a),!1===a._isValid&&(delete a._isValid,Me(a),!1===a._isValid&&(delete a._isValid,a._strict?a._isValid=!1:e.createFromInputFallback(a))))):n(f)?(o._a=h(f.slice(0),(function(t){return parseInt(t,10)})),Te(o)):r(f)?(i=o)._d||(s=void 0===(a=H(i._i)).day?a.date:a.day,i._a=h([a.year,a.month,s,a.hour,a.minute,a.second,a.millisecond],(function(t){return t&&parseInt(t,10)})),Te(i)):c(f)?o._d=new Date(f):e.createFromInputFallback(o),m(t)||(t._d=null),t))}function Le(t,e,i,s,o){var l={};return!0!==e&&!1!==e||(s=e,e=void 0),!0!==i&&!1!==i||(s=i,i=void 0),(r(t)&&a(t)||n(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=o,l._l=i,l._i=t,l._f=e,l._strict=s,(o=new _(pe(ke(o=l))))._nextDay&&(o.add(1,"d"),o._nextDay=void 0),o}function Pe(t,e,n,r){return Le(t,e,n,r,!1)}function Re(t,e){var r,i;if(!(e=1===e.length&&n(e[0])?e[0]:e).length)return Pe();for(r=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](r)||(r=e[i]);return r}e.createFromInputFallback=E("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),e.ISO_8601=function(){},e.RFC_2822=function(){},rt=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Pe.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:g()})),it=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Pe.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:g()}));var Ie=["year","quarter","month","week","day","hour","minute","second","millisecond"];function De(t){var e=(t=H(t)).year||0,n=t.quarter||0,r=t.month||0,a=t.week||t.isoWeek||0,s=t.day||0,o=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._isValid=function(t){var e,n,r=!1,a=Ie.length;for(e in t)if(i(t,e)&&(-1===xt.call(Ie,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<a;++n)if(t[Ie[n]]){if(r)return!1;parseFloat(t[Ie[n]])!==Y(t[Ie[n]])&&(r=!0)}return!0}(t),this._milliseconds=+u+1e3*c+6e4*l+1e3*o*60*60,this._days=+s+7*a,this._months=+r+3*n+12*e,this._data={},this._locale=fe(),this._bubble()}function Be(t){return t instanceof De}function Oe(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Ne(t,e){O(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+P(~~(t/60),2)+e+P(~~t%60,2)}))}Ne("Z",":"),Ne("ZZ",""),ft("Z",ht),ft("ZZ",ht),vt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=ze(ht,t)}));var Fe=/([\+\-]|\d\d)/gi;function ze(t,e){return null===(e=(e||"").match(t))?null:0===(e=60*(t=((e[e.length-1]||[])+"").match(Fe)||["-",0,0])[1]+Y(t[2]))?0:"+"===t[0]?e:-e}function Ue(t,n){var r;return n._isUTC?(n=n.clone(),r=(w(t)||u(t)?t:Pe(t)).valueOf()-n.valueOf(),n._d.setTime(n._d.valueOf()+r),e.updateOffset(n,!1),n):Pe(t).local()}function Ge(t){return-Math.round(t._d.getTimezoneOffset())}function He(){return!!this.isValid()&&this._isUTC&&0===this._offset}e.updateOffset=function(){};var je=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ve=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function We(t,e){var n,r,a,s,o=t,l=null;return Be(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:c(t)||!isNaN(+t)?(o={},e?o[e]=+t:o.milliseconds=+t):(l=je.exec(t))?(n="-"===l[1]?-1:1,o={y:0,d:Y(l[St])*n,h:Y(l[Et])*n,m:Y(l[Mt])*n,s:Y(l[Ct])*n,ms:Y(Oe(1e3*l[Tt]))*n}):(l=Ve.exec(t))?(n="-"===l[1]?-1:1,o={y:$e(l[2],n),M:$e(l[3],n),w:$e(l[4],n),d:$e(l[5],n),h:$e(l[6],n),m:$e(l[7],n),s:$e(l[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=Pe(o.from),a=Pe(o.to),e=r.isValid()&&a.isValid()?(a=Ue(a,r),r.isBefore(a)?s=Ye(r,a):((s=Ye(a,r)).milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0},(o={}).ms=e.milliseconds,o.M=e.months),l=new De(o),Be(t)&&i(t,"_locale")&&(l._locale=t._locale),Be(t)&&i(t,"_isValid")&&(l._isValid=t._isValid),l}function $e(t,e){return t=t&&parseFloat(t.replace(",",".")),(isNaN(t)?0:t)*e}function Ye(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function qe(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Xe(this,We(n,r),t),this}}function Xe(t,n,r,i){var a=n._milliseconds,s=Oe(n._days);n=Oe(n._months),t.isValid()&&(i=null==i||i,n&&Ot(t,X(t,"Month")+n*r),s&&J(t,"Date",X(t,"Date")+s*r),a&&t._d.setTime(t._d.valueOf()+a*r),i&&e.updateOffset(t,s||n))}function Je(t){return"string"==typeof t||t instanceof String}function Ze(t){return w(t)||u(t)||Je(t)||c(t)||function(t){var e=n(t),r=!1;return e&&(r=0===t.filter((function(e){return!c(e)&&Je(t)})).length),e&&r}(t)||function(t){var e,n,s=r(t)&&!a(t),o=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=l.length;for(e=0;e<c;e+=1)n=l[e],o=o||i(t,n);return s&&o}(t)||null==t}function Ke(t,e){if(t.date()<e.date())return-Ke(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e=e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(1+n,"months")-r)))||0}function Qe(t){return void 0===t?this._locale._abbr:(null!=(t=fe(t))&&(this._locale=t),this)}function tn(){return this._locale}We.fn=De.prototype,We.invalid=function(){return We(NaN)},Pt=qe(1,"add"),qt=qe(-1,"subtract"),e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",Jt=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));var en,nn=126227808e5;function rn(t,e){return(t%e+e)%e}function an(t,e,n){return t<100&&0<=t?new Date(t+400,e,n)-nn:new Date(t,e,n).valueOf()}function sn(t,e,n){return t<100&&0<=t?Date.UTC(t+400,e,n)-nn:Date.UTC(t,e,n)}function on(t,e){return e.erasAbbrRegex(t)}function ln(){for(var t=[],e=[],n=[],r=[],i=this.eras(),a=0,s=i.length;a<s;++a)e.push(mt(i[a].name)),t.push(mt(i[a].abbr)),n.push(mt(i[a].narrow)),r.push(mt(i[a].name)),r.push(mt(i[a].abbr)),r.push(mt(i[a].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function cn(t,e){O(0,[t,t.length],0,e)}function un(t,e,n,r,i){var a;return null==t?Wt(this,r,i).year:(a=$t(t,r,i),function(t,e,n,r,i){return e=Ht((t=Vt(t,e,n,r,i)).year,0,t.dayOfYear),this.year(e.getUTCFullYear()),this.month(e.getUTCMonth()),this.date(e.getUTCDate()),this}.call(this,t,e=a<e?a:e,n,r,i))}for(O("N",0,0,"eraAbbr"),O("NN",0,0,"eraAbbr"),O("NNN",0,0,"eraAbbr"),O("NNNN",0,0,"eraName"),O("NNNNN",0,0,"eraNarrow"),O("y",["y",1],"yo","eraYear"),O("y",["yy",2],0,"eraYear"),O("y",["yyy",3],0,"eraYear"),O("y",["yyyy",4],0,"eraYear"),ft("N",on),ft("NN",on),ft("NNN",on),ft("NNNN",(function(t,e){return e.erasNameRegex(t)})),ft("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),vt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,r){(r=n._locale.erasParse(t,r,n._strict))?p(n).era=r:p(n).invalidEra=t})),ft("y",lt),ft("yy",lt),ft("yyy",lt),ft("yyyy",lt),ft("yo",(function(t,e){return e._eraYearOrdinalRegex||lt})),vt(["y","yy","yyy","yyyy"],_t),vt(["yo"],(function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[_t]=n._locale.eraYearOrdinalParse(t,i):e[_t]=parseInt(t,10)})),O(0,["gg",2],0,(function(){return this.weekYear()%100})),O(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),cn("gggg","weekYear"),cn("ggggg","weekYear"),cn("GGGG","isoWeekYear"),cn("GGGGG","isoWeekYear"),U("weekYear","gg"),U("isoWeekYear","GG"),V("weekYear",1),V("isoWeekYear",1),ft("G",ct),ft("g",ct),ft("GG",nt,K),ft("gg",nt,K),ft("GGGG",st,tt),ft("gggg",st,tt),ft("GGGGG",ot,et),ft("ggggg",ot,et),bt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=Y(t)})),bt(["gg","GG"],(function(t,n,r,i){n[i]=e.parseTwoDigitYear(t)})),O("Q",0,"Qo","quarter"),U("quarter","Q"),V("quarter",7),ft("Q",Z),vt("Q",(function(t,e){e[wt]=3*(Y(t)-1)})),O("D",["DD",2],"Do","date"),U("date","D"),V("date",9),ft("D",nt),ft("DD",nt,K),ft("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),vt(["D","DD"],St),vt("Do",(function(t,e){e[St]=Y(t.match(nt)[0])})),st=q("Date",!0),O("DDD",["DDDD",3],"DDDo","dayOfYear"),U("dayOfYear","DDD"),V("dayOfYear",4),ft("DDD",at),ft("DDDD",Q),vt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=Y(t)})),O("m",["mm",2],0,"minute"),U("minute","m"),V("minute",14),ft("m",nt),ft("mm",nt,K),vt(["m","mm"],Mt),tt=q("Minutes",!1),O("s",["ss",2],0,"second"),U("second","s"),V("second",15),ft("s",nt),ft("ss",nt,K),vt(["s","ss"],Ct),ot=q("Seconds",!1),O("S",0,0,(function(){return~~(this.millisecond()/100)})),O(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),O(0,["SSS",3],0,"millisecond"),O(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),O(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),O(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),O(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),O(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),O(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),U("millisecond","ms"),V("millisecond",16),ft("S",at,Z),ft("SS",at,K),ft("SSS",at,Q),en="SSSS";en.length<=9;en+="S")ft(en,lt);function hn(t,e){e[Tt]=Y(1e3*("0."+t))}for(en="S";en.length<=9;en+="S")vt(en,hn);function dn(t){return t}function fn(t,e,n,r){var i=fe();return r=f().set(r,e),i[n](r,t)}function pn(t,e,n){if(c(t)&&(e=t,t=void 0),t=t||"",null!=e)return fn(t,e,n,"month");for(var r=[],i=0;i<12;i++)r[i]=fn(t,i,n,"month");return r}function mn(t,e,n,r){"boolean"==typeof t?c(e)&&(n=e,e=void 0):(e=t,t=!1,c(n=e)&&(n=e,e=void 0)),e=e||"";var i,a=fe(),s=t?a._week.dow:0,o=[];if(null!=n)return fn(e,(n+s)%7,r,"day");for(i=0;i<7;i++)o[i]=fn(e,(i+s)%7,r,"day");return o}et=q("Milliseconds",!1),O("z",0,0,"zoneAbbr"),O("zz",0,0,"zoneName"),(Z=_.prototype).add=Pt,Z.calendar=function(t,n){1===arguments.length&&(arguments[0]?Ze(arguments[0])?(t=arguments[0],n=void 0):function(t){for(var e=r(t)&&!a(t),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],o=0;o<s.length;o+=1)n=n||i(t,s[o]);return e&&n}(arguments[0])&&(n=arguments[0],t=void 0):n=t=void 0);var s=Ue(t=t||Pe(),this).startOf("day");return s=e.calendarFormat(this,s)||"sameElse",n=n&&(T(n[s])?n[s].call(this,t):n[s]),this.format(n||this.localeData().calendar(s,this,Pe(t)))},Z.clone=function(){return new _(this)},Z.diff=function(t,e,n){var r,i,a;if(!this.isValid())return NaN;if(!(r=Ue(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=G(e)){case"year":a=Ke(this,r)/12;break;case"month":a=Ke(this,r);break;case"quarter":a=Ke(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-i)/864e5;break;case"week":a=(this-r-i)/6048e5;break;default:a=this-r}return n?a:$(a)},Z.endOf=function(t){var n,r;if(void 0===(t=G(t))||"millisecond"===t||!this.isValid())return this;switch(r=this._isUTC?sn:an,t){case"year":n=r(this.year()+1,0,1)-1;break;case"quarter":n=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":n=r(this.year(),this.month()+1,1)-1;break;case"week":n=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":n=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":n=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":n=this._d.valueOf(),n+=36e5-rn(n+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":n=this._d.valueOf(),n+=6e4-rn(n,6e4)-1;break;case"second":n=this._d.valueOf(),n+=1e3-rn(n,1e3)-1}return this._d.setTime(n),e.updateOffset(this,!0),this},Z.format=function(t){return t=N(this,t=t||(this.isUtc()?e.defaultFormatUtc:e.defaultFormat)),this.localeData().postformat(t)},Z.from=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Pe(t).isValid())?We({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Z.fromNow=function(t){return this.from(Pe(),t)},Z.to=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Pe(t).isValid())?We({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Z.toNow=function(t){return this.to(Pe(),t)},Z.get=function(t){return T(this[t=G(t)])?this[t]():this},Z.invalidAt=function(){return p(this).overflow},Z.isAfter=function(t,e){return t=w(t)?t:Pe(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=G(e)||"millisecond")?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf())},Z.isBefore=function(t,e){return t=w(t)?t:Pe(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=G(e)||"millisecond")?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf())},Z.isBetween=function(t,e,n,r){return t=w(t)?t:Pe(t),e=w(e)?e:Pe(e),!!(this.isValid()&&t.isValid()&&e.isValid())&&("("===(r=r||"()")[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===r[1]?this.isBefore(e,n):!this.isAfter(e,n))},Z.isSame=function(t,e){return t=w(t)?t:Pe(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=G(e)||"millisecond")?this.valueOf()===t.valueOf():(t=t.valueOf(),this.clone().startOf(e).valueOf()<=t&&t<=this.clone().endOf(e).valueOf()))},Z.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},Z.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},Z.isValid=function(){return m(this)},Z.lang=Jt,Z.locale=Qe,Z.localeData=tn,Z.max=it,Z.min=rt,Z.parsingFlags=function(){return d({},p(this))},Z.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e,n=[];for(e in t)i(t,e)&&n.push({unit:e,priority:j[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}(t=H(t)),r=n.length,a=0;a<r;a++)this[n[a].unit](t[n[a].unit]);else if(T(this[t=G(t)]))return this[t](e);return this},Z.startOf=function(t){var n,r;if(void 0===(t=G(t))||"millisecond"===t||!this.isValid())return this;switch(r=this._isUTC?sn:an,t){case"year":n=r(this.year(),0,1);break;case"quarter":n=r(this.year(),this.month()-this.month()%3,1);break;case"month":n=r(this.year(),this.month(),1);break;case"week":n=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":n=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":n=r(this.year(),this.month(),this.date());break;case"hour":n=this._d.valueOf(),n-=rn(n+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":n=this._d.valueOf(),n-=rn(n,6e4);break;case"second":n=this._d.valueOf(),n-=rn(n,1e3)}return this._d.setTime(n),e.updateOffset(this,!0),this},Z.subtract=qt,Z.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},Z.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},Z.toDate=function(){return new Date(this.valueOf())},Z.toISOString=function(t){if(!this.isValid())return null;var e=(t=!0!==t)?this.clone().utc():this;return e.year()<0||9999<e.year()?N(e,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):T(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",N(e,"Z")):N(e,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Z.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e="moment",n="";return this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",n="Z"),e="["+e+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n+'[")]')},typeof Symbol<"u"&&null!=Symbol.for&&(Z[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Z.toJSON=function(){return this.isValid()?this.toISOString():null},Z.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Z.unix=function(){return Math.floor(this.valueOf()/1e3)},Z.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Z.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Z.eraName=function(){for(var t,e=this.localeData().eras(),n=0,r=e.length;n<r;++n)if(t=this.clone().startOf("day").valueOf(),e[n].since<=t&&t<=e[n].until||e[n].until<=t&&t<=e[n].since)return e[n].name;return""},Z.eraNarrow=function(){for(var t,e=this.localeData().eras(),n=0,r=e.length;n<r;++n)if(t=this.clone().startOf("day").valueOf(),e[n].since<=t&&t<=e[n].until||e[n].until<=t&&t<=e[n].since)return e[n].narrow;return""},Z.eraAbbr=function(){for(var t,e=this.localeData().eras(),n=0,r=e.length;n<r;++n)if(t=this.clone().startOf("day").valueOf(),e[n].since<=t&&t<=e[n].until||e[n].until<=t&&t<=e[n].since)return e[n].abbr;return""},Z.eraYear=function(){for(var t,n,r=this.localeData().eras(),i=0,a=r.length;i<a;++i)if(t=r[i].since<=r[i].until?1:-1,n=this.clone().startOf("day").valueOf(),r[i].since<=n&&n<=r[i].until||r[i].until<=n&&n<=r[i].since)return(this.year()-e(r[i].since).year())*t+r[i].offset;return this.year()},Z.year=Ut,Z.isLeapYear=function(){return W(this.year())},Z.weekYear=function(t){return un.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Z.isoWeekYear=function(t){return un.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},Z.quarter=Z.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},Z.month=Nt,Z.daysInMonth=function(){return Lt(this.year(),this.month())},Z.week=Z.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},Z.isoWeek=Z.isoWeeks=function(t){var e=Wt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},Z.weeksInYear=function(){var t=this.localeData()._week;return $t(this.year(),t.dow,t.doy)},Z.weeksInWeekYear=function(){var t=this.localeData()._week;return $t(this.weekYear(),t.dow,t.doy)},Z.isoWeeksInYear=function(){return $t(this.year(),1,4)},Z.isoWeeksInISOWeekYear=function(){return $t(this.isoWeekYear(),1,4)},Z.date=st,Z.day=Z.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e,n,r=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(e=t,n=this.localeData(),t="string"!=typeof e?e:isNaN(e)?"number"==typeof(e=n.weekdaysParse(e))?e:null:parseInt(e,10),this.add(t-r,"d")):r},Z.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},Z.isoWeekday=function(t){return this.isValid()?null!=t?(e=t,n=this.localeData(),n="string"==typeof e?n.weekdaysParse(e)%7||7:isNaN(e)?null:e,this.day(this.day()%7?n:n-7)):this.day()||7:null!=t?this:NaN;var e,n},Z.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},Z.hour=Z.hours=dt,Z.minute=Z.minutes=tt,Z.second=Z.seconds=ot,Z.millisecond=Z.milliseconds=et,Z.utcOffset=function(t,n,r){var i,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?a:Ge(this);if("string"==typeof t){if(null===(t=ze(ht,t)))return this}else Math.abs(t)<16&&!r&&(t*=60);return!this._isUTC&&n&&(i=Ge(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==t&&(!n||this._changeInProgress?Xe(this,We(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this},Z.utc=function(t){return this.utcOffset(0,t)},Z.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ge(this),"m")),this},Z.parseZone=function(){var t;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(t=ze(ut,this._i))?this.utcOffset(t):this.utcOffset(0,!0)),this},Z.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Pe(t).utcOffset():0,(this.utcOffset()-t)%60==0)},Z.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Z.isLocal=function(){return!!this.isValid()&&!this._isUTC},Z.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Z.isUtc=He,Z.isUTC=He,Z.zoneAbbr=function(){return this._isUTC?"UTC":""},Z.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Z.dates=E("dates accessor is deprecated. Use date instead.",st),Z.months=E("months accessor is deprecated. Use month instead",Nt),Z.years=E("years accessor is deprecated. Use year instead",Ut),Z.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?(this.utcOffset(t="string"!=typeof t?-t:t,e),this):-this.utcOffset()})),Z.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var t,e={};return x(e,this),(e=ke(e))._a?(t=(e._isUTC?f:Pe)(e._a),this._isDSTShifted=this.isValid()&&0<function(t,e,n){for(var r=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),a=0,s=0;s<r;s++)(n&&t[s]!==e[s]||!n&&Y(t[s])!==Y(e[s]))&&a++;return a+i}(e._a,t.toArray())):this._isDSTShifted=!1,this._isDSTShifted})),(K=k.prototype).calendar=function(t,e,n){return T(t=this._calendar[t]||this._calendar.sameElse)?t.call(e,n):t},K.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(R).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},K.invalidDate=function(){return this._invalidDate},K.ordinal=function(t){return this._ordinal.replace("%d",t)},K.preparse=dn,K.postformat=dn,K.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return T(i)?i(t,e,n,r):i.replace(/%d/i,t)},K.pastFuture=function(t,e){return T(t=this._relativeTime[0<t?"future":"past"])?t(e):t.replace(/%s/i,e)},K.set=function(t){var e,n;for(n in t)i(t,n)&&(T(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},K.eras=function(t,n){for(var r,i=this._eras||fe("en")._eras,a=0,s=i.length;a<s;++a)switch("string"==typeof i[a].since&&(r=e(i[a].since).startOf("day"),i[a].since=r.valueOf()),typeof i[a].until){case"undefined":i[a].until=1/0;break;case"string":r=e(i[a].until).startOf("day").valueOf(),i[a].until=r.valueOf()}return i},K.erasParse=function(t,e,n){var r,i,a,s,o,l=this.eras();for(t=t.toUpperCase(),r=0,i=l.length;r<i;++r)if(a=l[r].name.toUpperCase(),s=l[r].abbr.toUpperCase(),o=l[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(s===t)return l[r];break;case"NNNN":if(a===t)return l[r];break;case"NNNNN":if(o===t)return l[r]}else if(0<=[a,s,o].indexOf(t))return l[r]},K.erasConvertYear=function(t,n){var r=t.since<=t.until?1:-1;return void 0===n?e(t.since).year():e(t.since).year()+(n-t.offset)*r},K.erasAbbrRegex=function(t){return i(this,"_erasAbbrRegex")||ln.call(this),t?this._erasAbbrRegex:this._erasRegex},K.erasNameRegex=function(t){return i(this,"_erasNameRegex")||ln.call(this),t?this._erasNameRegex:this._erasRegex},K.erasNarrowRegex=function(t){return i(this,"_erasNarrowRegex")||ln.call(this),t?this._erasNarrowRegex:this._erasRegex},K.months=function(t,e){return t?(n(this._months)?this._months:this._months[(this._months.isFormat||It).test(e)?"format":"standalone"])[t.month()]:n(this._months)?this._months:this._months.standalone},K.monthsShort=function(t,e){return t?(n(this._monthsShort)?this._monthsShort:this._monthsShort[It.test(e)?"format":"standalone"])[t.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},K.monthsParse=function(t,e,n){var r,i;if(this._monthsParseExact)return function(t,e,n){var r,i,a;if(t=t.toLocaleLowerCase(),!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=f([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=xt.call(this._shortMonthsParse,t))?i:null:-1!==(i=xt.call(this._longMonthsParse,t))?i:null:"MMM"===e?-1!==(i=xt.call(this._shortMonthsParse,t))||-1!==(i=xt.call(this._longMonthsParse,t))?i:null:-1!==(i=xt.call(this._longMonthsParse,t))||-1!==(i=xt.call(this._shortMonthsParse,t))?i:null}.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++)if(i=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t)||n&&"MMM"===e&&this._shortMonthsParse[r].test(t)||!n&&this._monthsParse[r].test(t))return r},K.monthsRegex=function(t){return this._monthsParseExact?(i(this,"_monthsRegex")||Ft.call(this),t?this._monthsStrictRegex:this._monthsRegex):(i(this,"_monthsRegex")||(this._monthsRegex=Bt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},K.monthsShortRegex=function(t){return this._monthsParseExact?(i(this,"_monthsRegex")||Ft.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(i(this,"_monthsShortRegex")||(this._monthsShortRegex=Dt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},K.week=function(t){return Wt(t,this._week.dow,this._week.doy).week},K.firstDayOfYear=function(){return this._week.doy},K.firstDayOfWeek=function(){return this._week.dow},K.weekdays=function(t,e){return e=n(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"],!0===t?Yt(e,this._week.dow):t?e[t.day()]:e},K.weekdaysMin=function(t){return!0===t?Yt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},K.weekdaysShort=function(t){return!0===t?Yt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},K.weekdaysParse=function(t,e,n){var r,i;if(this._weekdaysParseExact)return function(t,e,n){var r,i,a;if(t=t.toLocaleLowerCase(),!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=f([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=xt.call(this._weekdaysParse,t))?i:null:"ddd"===e?-1!==(i=xt.call(this._shortWeekdaysParse,t))?i:null:-1!==(i=xt.call(this._minWeekdaysParse,t))?i:null:"dddd"===e?-1!==(i=xt.call(this._weekdaysParse,t))||-1!==(i=xt.call(this._shortWeekdaysParse,t))||-1!==(i=xt.call(this._minWeekdaysParse,t))?i:null:"ddd"===e?-1!==(i=xt.call(this._shortWeekdaysParse,t))||-1!==(i=xt.call(this._weekdaysParse,t))||-1!==(i=xt.call(this._minWeekdaysParse,t))?i:null:-1!==(i=xt.call(this._minWeekdaysParse,t))||-1!==(i=xt.call(this._weekdaysParse,t))||-1!==(i=xt.call(this._shortWeekdaysParse,t))?i:null}.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++)if(i=f([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t)||n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t)||n&&"dd"===e&&this._minWeekdaysParse[r].test(t)||!n&&this._weekdaysParse[r].test(t))return r},K.weekdaysRegex=function(t){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||te.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(i(this,"_weekdaysRegex")||(this._weekdaysRegex=Zt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},K.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||te.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(i(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Kt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},K.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||te.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(i(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Qt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},K.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},K.meridiem=function(t,e,n){return 11<t?n?"pm":"PM":n?"am":"AM"},he("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===Y(t%100/10)?"th":1==e?"st":2==e?"nd":3==e?"rd":"th")}}),e.lang=E("moment.lang is deprecated. Use moment.locale instead.",he),e.langData=E("moment.langData is deprecated. Use moment.localeData instead.",fe);var gn=Math.abs;function yn(t,e,n,r){return e=We(e,n),t._milliseconds+=r*e._milliseconds,t._days+=r*e._days,t._months+=r*e._months,t._bubble()}function vn(t){return t<0?Math.floor(t):Math.ceil(t)}function bn(t){return 4800*t/146097}function xn(t){return 146097*t/4800}function _n(t){return function(){return this.as(t)}}function wn(t){return function(){return this.isValid()?this._data[t]:NaN}}at=_n("ms"),Q=_n("s"),Pt=_n("m"),it=_n("h"),rt=_n("d"),qt=_n("w"),dt=_n("M"),tt=_n("Q"),ot=_n("y"),et=wn("milliseconds"),st=wn("seconds"),Ut=wn("minutes"),K=wn("hours");var Sn=wn("days"),En=wn("months"),Mn=wn("years"),Cn=Math.round,Tn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function An(t,e,n,r){var i=We(t).abs(),a=Cn(i.as("s")),s=Cn(i.as("m")),o=Cn(i.as("h")),l=Cn(i.as("d")),c=Cn(i.as("M")),u=Cn(i.as("w"));return i=Cn(i.as("y")),a=(a<=n.ss?["s",a]:a<n.s&&["ss",a])||s<=1&&["m"]||s<n.m&&["mm",s]||o<=1&&["h"]||o<n.h&&["hh",o]||l<=1&&["d"]||l<n.d&&["dd",l],(a=(a=null!=n.w?a||u<=1&&["w"]||u<n.w&&["ww",u]:a)||c<=1&&["M"]||c<n.M&&["MM",c]||i<=1&&["y"]||["yy",i])[2]=e,a[3]=0<+t,a[4]=r,function(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}.apply(null,a)}var kn=Math.abs;function Ln(t){return(0<t)-(t<0)||+t}function Pn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,r,i,a,s,o=kn(this._milliseconds)/1e3,l=kn(this._days),c=kn(this._months),u=this.asSeconds();return u?(t=$(o/60),e=$(t/60),o%=60,t%=60,n=$(c/12),c%=12,r=o?o.toFixed(3).replace(/\.?0+$/,""):"",i=Ln(this._months)!==Ln(u)?"-":"",a=Ln(this._days)!==Ln(u)?"-":"",s=Ln(this._milliseconds)!==Ln(u)?"-":"",(u<0?"-":"")+"P"+(n?i+n+"Y":"")+(c?i+c+"M":"")+(l?a+l+"D":"")+(e||t||o?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(o?s+r+"S":"")):"P0D"}var Rn=De.prototype;return Rn.isValid=function(){return this._isValid},Rn.abs=function(){var t=this._data;return this._milliseconds=gn(this._milliseconds),this._days=gn(this._days),this._months=gn(this._months),t.milliseconds=gn(t.milliseconds),t.seconds=gn(t.seconds),t.minutes=gn(t.minutes),t.hours=gn(t.hours),t.months=gn(t.months),t.years=gn(t.years),this},Rn.add=function(t,e){return yn(this,t,e,1)},Rn.subtract=function(t,e){return yn(this,t,e,-1)},Rn.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=G(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+bn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(xn(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},Rn.asMilliseconds=at,Rn.asSeconds=Q,Rn.asMinutes=Pt,Rn.asHours=it,Rn.asDays=rt,Rn.asWeeks=qt,Rn.asMonths=dt,Rn.asQuarters=tt,Rn.asYears=ot,Rn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Y(this._months/12):NaN},Rn._bubble=function(){var t=this._milliseconds,e=this._days,n=this._months,r=this._data;return 0<=t&&0<=e&&0<=n||t<=0&&e<=0&&n<=0||(t+=864e5*vn(xn(n)+e),n=e=0),r.milliseconds=t%1e3,t=$(t/1e3),r.seconds=t%60,t=$(t/60),r.minutes=t%60,t=$(t/60),r.hours=t%24,e+=$(t/24),n+=t=$(bn(e)),e-=vn(xn(t)),t=$(n/12),n%=12,r.days=e,r.months=n,r.years=t,this},Rn.clone=function(){return We(this)},Rn.get=function(t){return t=G(t),this.isValid()?this[t+"s"]():NaN},Rn.milliseconds=et,Rn.seconds=st,Rn.minutes=Ut,Rn.hours=K,Rn.days=Sn,Rn.weeks=function(){return $(this.days()/7)},Rn.months=En,Rn.years=Mn,Rn.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=Tn;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(n=t),"object"==typeof e&&(r=Object.assign({},Tn,e),null!=e.s&&null==e.ss&&(r.ss=e.s-1)),e=An(this,!n,r,t=this.localeData()),n&&(e=t.pastFuture(+this,e)),t.postformat(e)},Rn.toISOString=Pn,Rn.toString=Pn,Rn.toJSON=Pn,Rn.locale=Qe,Rn.localeData=tn,Rn.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Pn),Rn.lang=Jt,O("X",0,0,"unix"),O("x",0,0,"valueOf"),ft("x",ct),ft("X",/[+-]?\d+(\.\d{1,3})?/),vt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),vt("x",(function(t,e,n){n._d=new Date(Y(t))})),e.version="2.29.4",t=Pe,e.fn=Z,e.min=function(){return Re("isBefore",[].slice.call(arguments,0))},e.max=function(){return Re("isAfter",[].slice.call(arguments,0))},e.now=function(){return Date.now?Date.now():+new Date},e.utc=f,e.unix=function(t){return Pe(1e3*t)},e.months=function(t,e){return pn(t,e,"months")},e.isDate=u,e.locale=he,e.invalid=g,e.duration=We,e.isMoment=w,e.weekdays=function(t,e,n){return mn(t,e,n,"weekdays")},e.parseZone=function(){return Pe.apply(null,arguments).parseZone()},e.localeData=fe,e.isDuration=Be,e.monthsShort=function(t,e){return pn(t,e,"monthsShort")},e.weekdaysMin=function(t,e,n){return mn(t,e,n,"weekdaysMin")},e.defineLocale=de,e.updateLocale=function(t,e){var n,r;return null!=e?(r=ae,null!=se[t]&&null!=se[t].parentLocale?se[t].set(A(se[t]._config,e)):(e=A(r=null!=(n=ue(t))?n._config:r,e),null==n&&(e.abbr=t),(r=new k(e)).parentLocale=se[t],se[t]=r),he(t)):null!=se[t]&&(null!=se[t].parentLocale?(se[t]=se[t].parentLocale,t===he()&&he(t)):null!=se[t]&&delete se[t]),se[t]},e.locales=function(){return L(se)},e.weekdaysShort=function(t,e,n){return mn(t,e,n,"weekdaysShort")},e.normalizeUnits=G,e.relativeTimeRounding=function(t){return void 0===t?Cn:"function"==typeof t&&(Cn=t,!0)},e.relativeTimeThreshold=function(t,e){return void 0!==Tn[t]&&(void 0===e?Tn[t]:(Tn[t]=e,"s"===t&&(Tn.ss=e-1),!0))},e.calendarFormat=function(t,e){return(t=t.diff(e,"days",!0))<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"},e.prototype=Z,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e},(o=u).exports=l();const h=u.exports,d={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},f={trace:(...t)=>{},debug:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{},fatal:(...t)=>{}},p=function(t="fatal"){let e=d.fatal;"string"==typeof t?(t=t.toLowerCase())in d&&(e=d[t]):"number"==typeof t&&(e=t),f.trace=()=>{},f.debug=()=>{},f.info=()=>{},f.warn=()=>{},f.error=()=>{},f.fatal=()=>{},e<=d.fatal&&(f.fatal=console.error?console.error.bind(console,m("FATAL"),"color: orange"):console.log.bind(console,"\x1b[35m",m("FATAL"))),e<=d.error&&(f.error=console.error?console.error.bind(console,m("ERROR"),"color: orange"):console.log.bind(console,"\x1b[31m",m("ERROR"))),e<=d.warn&&(f.warn=console.warn?console.warn.bind(console,m("WARN"),"color: orange"):console.log.bind(console,"\x1b[33m",m("WARN"))),e<=d.info&&(f.info=console.info?console.info.bind(console,m("INFO"),"color: lightblue"):console.log.bind(console,"\x1b[34m",m("INFO"))),e<=d.debug&&(f.debug=console.debug?console.debug.bind(console,m("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1b[32m",m("DEBUG"))),e<=d.trace&&(f.trace=console.debug?console.debug.bind(console,m("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1b[32m",m("TRACE")))},m=t=>`%c${h().format("ss.SSS")} : ${t} : `;var g={};Object.defineProperty(g,"__esModule",{value:!0});var y=g.sanitizeUrl=void 0,v=/^([^\w]*)(javascript|data|vbscript)/im,b=/&#(\w+)(^\w|;)?/g,x=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,_=/^([^:]+):/gm,w=[".","/"];function S(t){return w.indexOf(t[0])>-1}function E(t){return t.replace(b,(function(t,e){return String.fromCharCode(e)}))}function M(t){var e=E(t||"").replace(x,"").trim();if(!e)return"about:blank";if(S(e))return e;var n=e.match(_);if(!n)return e;var r=n[0];return v.test(r)?"about:blank":e}function C(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function T(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function A(t){let e,n,r;function i(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<0?i=e+1:a=e}while(i<a)}return i}function a(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<=0?i=e+1:a=e}while(i<a)}return i}function s(t,e,n=0,a=t.length){const s=i(t,e,n,a-1);return s>n&&r(t[s-1],e)>-r(t[s],e)?s-1:s}return 2!==t.length?(e=C,n=(e,n)=>C(t(e),n),r=(e,n)=>t(e)-n):(e=t===C||t===T?t:k,n=t,r=t),{left:i,center:s,right:a}}function k(){return 0}function L(t){return null===t?NaN:+t}y=g.sanitizeUrl=M;const P=A(C).right;A(L).center;const R=P;class I extends Map{constructor(t,e=N){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(D(this,t))}has(t){return super.has(D(this,t))}set(t,e){return super.set(B(this,t),e)}delete(t){return super.delete(O(this,t))}}function D({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function B({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function O({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function N(t){return null!==t&&"object"==typeof t?t.valueOf():t}var F=Math.sqrt(50),z=Math.sqrt(10),U=Math.sqrt(2);function G(t,e,n){var r,i,a,s,o=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(s=H(t,e,n))||!isFinite(s))return[];if(s>0){let n=Math.round(t/s),r=Math.round(e/s);for(n*s<t&&++n,r*s>e&&--r,a=new Array(i=r-n+1);++o<i;)a[o]=(n+o)*s}else{s=-s;let n=Math.round(t*s),r=Math.round(e*s);for(n/s<t&&++n,r/s>e&&--r,a=new Array(i=r-n+1);++o<i;)a[o]=(n+o)/s}return r&&a.reverse(),a}function H(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=F?10:a>=z?5:a>=U?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=F?10:a>=z?5:a>=U?2:1)}function j(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=F?i*=10:a>=z?i*=5:a>=U&&(i*=2),e<t?-i:i}function V(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function W(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function $(t){return t}var Y=1,q=2,X=3,J=4,Z=1e-6;function K(t){return"translate("+t+",0)"}function Q(t){return"translate(0,"+t+")"}function tt(t){return e=>+t(e)}function et(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function nt(){return!this.__axis}function rt(t,e){var n=[],r=null,i=null,a=6,s=6,o=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===Y||t===J?-1:1,u=t===J||t===q?"x":"y",h=t===Y||t===X?K:Q;function d(d){var f=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):$:i,m=Math.max(a,0)+o,g=e.range(),y=+g[0]+l,v=+g[g.length-1]+l,b=(e.bandwidth?et:tt)(e.copy(),l),x=d.selection?d.selection():d,_=x.selectAll(".domain").data([null]),w=x.selectAll(".tick").data(f,e).order(),S=w.exit(),E=w.enter().append("g").attr("class","tick"),M=w.select("line"),C=w.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(E),M=M.merge(E.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),C=C.merge(E.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",t===Y?"0em":t===X?"0.71em":"0.32em")),d!==x&&(_=_.transition(d),w=w.transition(d),M=M.transition(d),C=C.transition(d),S=S.transition(d).attr("opacity",Z).attr("transform",(function(t){return isFinite(t=b(t))?h(t+l):this.getAttribute("transform")})),E.attr("opacity",Z).attr("transform",(function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:b(t))+l)}))),S.remove(),_.attr("d",t===J||t===q?s?"M"+c*s+","+y+"H"+l+"V"+v+"H"+c*s:"M"+l+","+y+"V"+v:s?"M"+y+","+c*s+"V"+l+"H"+v+"V"+c*s:"M"+y+","+l+"H"+v),w.attr("opacity",1).attr("transform",(function(t){return h(b(t)+l)})),M.attr(u+"2",c*a),C.attr(u,c*m).text(p),x.filter(nt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===q?"start":t===J?"end":"middle"),x.each((function(){this.__axis=b}))}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),d):n.slice()},d.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),d):r&&r.slice()},d.tickFormat=function(t){return arguments.length?(i=t,d):i},d.tickSize=function(t){return arguments.length?(a=s=+t,d):a},d.tickSizeInner=function(t){return arguments.length?(a=+t,d):a},d.tickSizeOuter=function(t){return arguments.length?(s=+t,d):s},d.tickPadding=function(t){return arguments.length?(o=+t,d):o},d.offset=function(t){return arguments.length?(l=+t,d):l},d}function it(t){return rt(Y,t)}function at(t){return rt(X,t)}var st={value:()=>{}};function ot(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new lt(r)}function lt(t){this._=t}function ct(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ut(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function ht(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=st,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}lt.prototype=ot.prototype={constructor:lt,on:function(t,e){var n,r=this._,i=ct(t+"",r),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=i[a]).type)r[n]=ht(r[n],t.name,e);else if(null==e)for(n in r)r[n]=ht(r[n],t.name,null);return this}for(;++a<s;)if((n=(t=i[a]).type)&&(n=ut(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new lt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var dt="http://www.w3.org/1999/xhtml";const ft={svg:"http://www.w3.org/2000/svg",xhtml:dt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pt(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),ft.hasOwnProperty(e)?{space:ft[e],local:t}:t}function mt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===dt&&e.documentElement.namespaceURI===dt?e.createElement(t):e.createElementNS(n,t)}}function gt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function yt(t){var e=pt(t);return(e.local?gt:mt)(e)}function vt(){}function bt(t){return null==t?vt:function(){return this.querySelector(t)}}function xt(t){"function"!=typeof t&&(t=bt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,s,o=e[i],l=o.length,c=r[i]=new Array(l),u=0;u<l;++u)(a=o[u])&&(s=t.call(a,a.__data__,u,o))&&("__data__"in a&&(s.__data__=a.__data__),c[u]=s);return new cn(r,this._parents)}function _t(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function wt(){return[]}function St(t){return null==t?wt:function(){return this.querySelectorAll(t)}}function Et(t){return function(){return _t(t.apply(this,arguments))}}function Mt(t){t="function"==typeof t?Et(t):St(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s,o=e[a],l=o.length,c=0;c<l;++c)(s=o[c])&&(r.push(t.call(s,s.__data__,c,o)),i.push(s));return new cn(r,i)}function Ct(t){return function(){return this.matches(t)}}function Tt(t){return function(e){return e.matches(t)}}var At=Array.prototype.find;function kt(t){return function(){return At.call(this.children,t)}}function Lt(){return this.firstElementChild}function Pt(t){return this.select(null==t?Lt:kt("function"==typeof t?t:Tt(t)))}var Rt=Array.prototype.filter;function It(){return Array.from(this.children)}function Dt(t){return function(){return Rt.call(this.children,t)}}function Bt(t){return this.selectAll(null==t?It:Dt("function"==typeof t?t:Tt(t)))}function Ot(t){"function"!=typeof t&&(t=Ct(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,s=e[i],o=s.length,l=r[i]=[],c=0;c<o;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&l.push(a);return new cn(r,this._parents)}function Nt(t){return new Array(t.length)}function Ft(){return new cn(this._enter||this._groups.map(Nt),this._parents)}function zt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Ut(t){return function(){return t}}function Gt(t,e,n,r,i,a){for(var s,o=0,l=e.length,c=a.length;o<c;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new zt(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function Ht(t,e,n,r,i,a,s){var o,l,c,u=new Map,h=e.length,d=a.length,f=new Array(h);for(o=0;o<h;++o)(l=e[o])&&(f[o]=c=s.call(l,l.__data__,o,e)+"",u.has(c)?i[o]=l:u.set(c,l));for(o=0;o<d;++o)c=s.call(t,a[o],o,a)+"",(l=u.get(c))?(r[o]=l,l.__data__=a[o],u.delete(c)):n[o]=new zt(t,a[o]);for(o=0;o<h;++o)(l=e[o])&&u.get(f[o])===l&&(i[o]=l)}function jt(t){return t.__data__}function Vt(t,e){if(!arguments.length)return Array.from(this,jt);var n=e?Ht:Gt,r=this._parents,i=this._groups;"function"!=typeof t&&(t=Ut(t));for(var a=i.length,s=new Array(a),o=new Array(a),l=new Array(a),c=0;c<a;++c){var u=r[c],h=i[c],d=h.length,f=Wt(t.call(u,u&&u.__data__,c,r)),p=f.length,m=o[c]=new Array(p),g=s[c]=new Array(p);n(u,h,m,g,l[c]=new Array(d),f,e);for(var y,v,b=0,x=0;b<p;++b)if(y=m[b]){for(b>=x&&(x=b+1);!(v=g[x])&&++x<p;);y._next=v||null}}return(s=new cn(s,r))._enter=o,s._exit=l,s}function Wt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function $t(){return new cn(this._exit||this._groups.map(Nt),this._parents)}function Yt(t,e,n){var r=this.enter(),i=this,a=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i}function qt(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),l=0;l<s;++l)for(var c,u=n[l],h=r[l],d=u.length,f=o[l]=new Array(d),p=0;p<d;++p)(c=u[p]||h[p])&&(f[p]=c);for(;l<i;++l)o[l]=n[l];return new cn(o,this._parents)}function Xt(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,s=i[a];--a>=0;)(r=i[a])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this}function Jt(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Zt);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s,o=n[a],l=o.length,c=i[a]=new Array(l),u=0;u<l;++u)(s=o[u])&&(c[u]=s);c.sort(e)}return new cn(i,this._parents).order()}function Zt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Kt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Qt(){return Array.from(this)}function te(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function ee(){let t=0;for(const e of this)++t;return t}function ne(){return!this.node()}function re(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],s=0,o=a.length;s<o;++s)(i=a[s])&&t.call(i,i.__data__,s,a);return this}function ie(t){return function(){this.removeAttribute(t)}}function ae(t){return function(){this.removeAttributeNS(t.space,t.local)}}function se(t,e){return function(){this.setAttribute(t,e)}}function oe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function le(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function ce(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ue(t,e){var n=pt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?ae:ie:"function"==typeof e?n.local?ce:le:n.local?oe:se)(n,e))}function he(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function de(t){return function(){this.style.removeProperty(t)}}function fe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function pe(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function me(t,e,n){return arguments.length>1?this.each((null==e?de:"function"==typeof e?pe:fe)(t,e,null==n?"":n)):ge(this.node(),t)}function ge(t,e){return t.style.getPropertyValue(e)||he(t).getComputedStyle(t,null).getPropertyValue(e)}function ye(t){return function(){delete this[t]}}function ve(t,e){return function(){this[t]=e}}function be(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function xe(t,e){return arguments.length>1?this.each((null==e?ye:"function"==typeof e?be:ve)(t,e)):this.node()[t]}function _e(t){return t.trim().split(/^|\s+/)}function we(t){return t.classList||new Se(t)}function Se(t){this._node=t,this._names=_e(t.getAttribute("class")||"")}function Ee(t,e){for(var n=we(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Me(t,e){for(var n=we(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ce(t){return function(){Ee(this,t)}}function Te(t){return function(){Me(this,t)}}function Ae(t,e){return function(){(e.apply(this,arguments)?Ee:Me)(this,t)}}function ke(t,e){var n=_e(t+"");if(arguments.length<2){for(var r=we(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Ae:e?Ce:Te)(n,e))}function Le(){this.textContent=""}function Pe(t){return function(){this.textContent=t}}function Re(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Ie(t){return arguments.length?this.each(null==t?Le:("function"==typeof t?Re:Pe)(t)):this.node().textContent}function De(){this.innerHTML=""}function Be(t){return function(){this.innerHTML=t}}function Oe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Ne(t){return arguments.length?this.each(null==t?De:("function"==typeof t?Oe:Be)(t)):this.node().innerHTML}function Fe(){this.nextSibling&&this.parentNode.appendChild(this)}function ze(){return this.each(Fe)}function Ue(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ge(){return this.each(Ue)}function He(t){var e="function"==typeof t?t:yt(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function je(){return null}function Ve(t,e){var n="function"==typeof t?t:yt(t),r=null==e?je:"function"==typeof e?e:bt(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))}function We(){var t=this.parentNode;t&&t.removeChild(this)}function $e(){return this.each(We)}function Ye(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function qe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xe(t){return this.select(t?qe:Ye)}function Je(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ze(t){return function(e){t.call(this,e,this.__data__)}}function Ke(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Qe(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function tn(t,e,n){return function(){var r,i=this.__on,a=Ze(e);if(i)for(var s=0,o=i.length;s<o;++s)if((r=i[s]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=e);this.addEventListener(t.type,a,n),r={type:t.type,name:t.name,value:e,listener:a,options:n},i?i.push(r):this.__on=[r]}}function en(t,e,n){var r,i,a=Ke(t+""),s=a.length;if(!(arguments.length<2)){for(o=e?tn:Qe,r=0;r<s;++r)this.each(o(a[r],e,n));return this}var o=this.node().__on;if(o)for(var l,c=0,u=o.length;c<u;++c)for(r=0,l=o[c];r<s;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value}function nn(t,e,n){var r=he(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function rn(t,e){return function(){return nn(this,t,e)}}function an(t,e){return function(){return nn(this,t,e.apply(this,arguments))}}function sn(t,e){return this.each(("function"==typeof e?an:rn)(t,e))}function*on(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],a=0,s=i.length;a<s;++a)(r=i[a])&&(yield r)}zt.prototype={constructor:zt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Se.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ln=[null];function cn(t,e){this._groups=t,this._parents=e}function un(){return new cn([[document.documentElement]],ln)}function hn(){return this}function dn(t){return"string"==typeof t?new cn([[document.querySelector(t)]],[document.documentElement]):new cn([[t]],ln)}function fn(t){return"string"==typeof t?new cn([document.querySelectorAll(t)],[document.documentElement]):new cn([_t(t)],ln)}function pn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function mn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function gn(){}cn.prototype=un.prototype={constructor:cn,select:xt,selectAll:Mt,selectChild:Pt,selectChildren:Bt,filter:Ot,data:Vt,enter:Ft,exit:$t,join:Yt,merge:qt,selection:hn,order:Xt,sort:Jt,call:Kt,nodes:Qt,node:te,size:ee,empty:ne,each:re,attr:ue,style:me,property:xe,classed:ke,text:Ie,html:Ne,raise:ze,lower:Ge,append:He,insert:Ve,remove:$e,clone:Xe,datum:Je,on:en,dispatch:sn,[Symbol.iterator]:on};var yn=.7,vn=1/yn,bn="\\s*([+-]?\\d+)\\s*",xn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_n="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wn=/^#([0-9a-f]{3,8})$/,Sn=new RegExp(`^rgb\\(${bn},${bn},${bn}\\)$`),En=new RegExp(`^rgb\\(${_n},${_n},${_n}\\)$`),Mn=new RegExp(`^rgba\\(${bn},${bn},${bn},${xn}\\)$`),Cn=new RegExp(`^rgba\\(${_n},${_n},${_n},${xn}\\)$`),Tn=new RegExp(`^hsl\\(${xn},${_n},${_n}\\)$`),An=new RegExp(`^hsla\\(${xn},${_n},${_n},${xn}\\)$`),kn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ln(){return this.rgb().formatHex()}function Pn(){return this.rgb().formatHex8()}function Rn(){return Yn(this).formatHsl()}function In(){return this.rgb().formatRgb()}function Dn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=wn.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Bn(e):3===n?new zn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?On(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?On(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sn.exec(t))?new zn(e[1],e[2],e[3],1):(e=En.exec(t))?new zn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Mn.exec(t))?On(e[1],e[2],e[3],e[4]):(e=Cn.exec(t))?On(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Tn.exec(t))?$n(e[1],e[2]/100,e[3]/100,1):(e=An.exec(t))?$n(e[1],e[2]/100,e[3]/100,e[4]):kn.hasOwnProperty(t)?Bn(kn[t]):"transparent"===t?new zn(NaN,NaN,NaN,0):null}function Bn(t){return new zn(t>>16&255,t>>8&255,255&t,1)}function On(t,e,n,r){return r<=0&&(t=e=n=NaN),new zn(t,e,n,r)}function Nn(t){return t instanceof gn||(t=Dn(t)),t?new zn((t=t.rgb()).r,t.g,t.b,t.opacity):new zn}function Fn(t,e,n,r){return 1===arguments.length?Nn(t):new zn(t,e,n,null==r?1:r)}function zn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Un(){return`#${Wn(this.r)}${Wn(this.g)}${Wn(this.b)}`}function Gn(){return`#${Wn(this.r)}${Wn(this.g)}${Wn(this.b)}${Wn(255*(isNaN(this.opacity)?1:this.opacity))}`}function Hn(){const t=jn(this.opacity);return`${1===t?"rgb(":"rgba("}${Vn(this.r)}, ${Vn(this.g)}, ${Vn(this.b)}${1===t?")":`, ${t})`}`}function jn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Vn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Wn(t){return((t=Vn(t))<16?"0":"")+t.toString(16)}function $n(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Xn(t,e,n,r)}function Yn(t){if(t instanceof Xn)return new Xn(t.h,t.s,t.l,t.opacity);if(t instanceof gn||(t=Dn(t)),!t)return new Xn;if(t instanceof Xn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(s=e===a?(n-r)/o+6*(n<r):n===a?(r-e)/o+2:(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Xn(s,o,l,t.opacity)}function qn(t,e,n,r){return 1===arguments.length?Yn(t):new Xn(t,e,n,null==r?1:r)}function Xn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Jn(t){return(t=(t||0)%360)<0?t+360:t}function Zn(t){return Math.max(0,Math.min(1,t||0))}function Kn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}pn(gn,Dn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ln,formatHex:Ln,formatHex8:Pn,formatHsl:Rn,formatRgb:In,toString:In}),pn(zn,Fn,mn(gn,{brighter(t){return t=null==t?vn:Math.pow(vn,t),new zn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?yn:Math.pow(yn,t),new zn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new zn(Vn(this.r),Vn(this.g),Vn(this.b),jn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Un,formatHex:Un,formatHex8:Gn,formatRgb:Hn,toString:Hn})),pn(Xn,qn,mn(gn,{brighter(t){return t=null==t?vn:Math.pow(vn,t),new Xn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?yn:Math.pow(yn,t),new Xn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new zn(Kn(t>=240?t-240:t+120,i,r),Kn(t,i,r),Kn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Xn(Jn(this.h),Zn(this.s),Zn(this.l),jn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=jn(this.opacity);return`${1===t?"hsl(":"hsla("}${Jn(this.h)}, ${100*Zn(this.s)}%, ${100*Zn(this.l)}%${1===t?")":`, ${t})`}`}}));const Qn=Math.PI/180,tr=180/Math.PI,er=18,nr=.96422,rr=1,ir=.82521,ar=4/29,sr=6/29,or=3*sr*sr,lr=sr*sr*sr;function cr(t){if(t instanceof hr)return new hr(t.l,t.a,t.b,t.opacity);if(t instanceof vr)return br(t);t instanceof zn||(t=Nn(t));var e,n,r=mr(t.r),i=mr(t.g),a=mr(t.b),s=dr((.2225045*r+.7168786*i+.0606169*a)/rr);return r===i&&i===a?e=n=s:(e=dr((.4360747*r+.3850649*i+.1430804*a)/nr),n=dr((.0139322*r+.0971045*i+.7141733*a)/ir)),new hr(116*s-16,500*(e-s),200*(s-n),t.opacity)}function ur(t,e,n,r){return 1===arguments.length?cr(t):new hr(t,e,n,null==r?1:r)}function hr(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function dr(t){return t>lr?Math.pow(t,1/3):t/or+ar}function fr(t){return t>sr?t*t*t:or*(t-ar)}function pr(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function mr(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function gr(t){if(t instanceof vr)return new vr(t.h,t.c,t.l,t.opacity);if(t instanceof hr||(t=cr(t)),0===t.a&&0===t.b)return new vr(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*tr;return new vr(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function yr(t,e,n,r){return 1===arguments.length?gr(t):new vr(t,e,n,null==r?1:r)}function vr(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function br(t){if(isNaN(t.h))return new hr(t.l,0,0,t.opacity);var e=t.h*Qn;return new hr(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}pn(hr,ur,mn(gn,{brighter(t){return new hr(this.l+er*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new hr(this.l-er*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new zn(pr(3.1338561*(e=nr*fr(e))-1.6168667*(t=rr*fr(t))-.4906146*(n=ir*fr(n))),pr(-.9787684*e+1.9161415*t+.033454*n),pr(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),pn(vr,yr,mn(gn,{brighter(t){return new vr(this.h,this.c,this.l+er*(null==t?1:t),this.opacity)},darker(t){return new vr(this.h,this.c,this.l-er*(null==t?1:t),this.opacity)},rgb(){return br(this).rgb()}}));const xr=t=>()=>t;function _r(t,e){return function(n){return t+n*e}}function wr(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Sr(t,e){var n=e-t;return n?_r(t,n>180||n<-180?n-360*Math.round(n/360):n):xr(isNaN(t)?e:t)}function Er(t){return 1==(t=+t)?Mr:function(e,n){return n-e?wr(e,n,t):xr(isNaN(e)?n:e)}}function Mr(t,e){var n=e-t;return n?_r(t,n):xr(isNaN(t)?e:t)}const Cr=function t(e){var n=Er(e);function r(t,e){var r=n((t=Fn(t)).r,(e=Fn(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),s=Mr(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function Tr(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function Ar(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function kr(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),s=new Array(r);for(n=0;n<i;++n)a[n]=Fr(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=a[n](t);return s}}function Lr(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Pr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Rr(t,e){var n,r={},i={};for(n in(null===t||"object"!=typeof t)&&(t={}),(null===e||"object"!=typeof e)&&(e={}),e)n in t?r[n]=Fr(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var Ir=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dr=new RegExp(Ir.source,"g");function Br(t){return function(){return t}}function Or(t){return function(e){return t(e)+""}}function Nr(t,e){var n,r,i,a=Ir.lastIndex=Dr.lastIndex=0,s=-1,o=[],l=[];for(t+="",e+="";(n=Ir.exec(t))&&(r=Dr.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:Pr(n,r)})),a=Dr.lastIndex;return a<e.length&&(i=e.slice(a),o[s]?o[s]+=i:o[++s]=i),o.length<2?l[0]?Or(l[0].x):Br(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)o[(n=l[r]).i]=n.x(t);return o.join("")})}function Fr(t,e){var n,r=typeof e;return null==e||"boolean"===r?xr(e):("number"===r?Pr:"string"===r?(n=Dn(e))?(e=n,Cr):Nr:e instanceof Dn?Cr:e instanceof Date?Lr:Ar(e)?Tr:Array.isArray(e)?kr:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Rr:Pr)(t,e)}function zr(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ur,Gr=180/Math.PI,Hr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jr(t,e,n,r,i,a){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Gr,skewX:Math.atan(l)*Gr,scaleX:s,scaleY:o}}function Vr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Hr:jr(e.a,e.b,e.c,e.d,e.e,e.f)}function Wr(t){return null!=t&&(Ur||(Ur=document.createElementNS("http://www.w3.org/2000/svg","g")),Ur.setAttribute("transform",t),t=Ur.transform.baseVal.consolidate())?jr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Hr}function $r(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function a(t,r,i,a,s,o){if(t!==i||r!==a){var l=s.push("translate(",null,e,null,n);o.push({i:l-4,x:Pr(t,i)},{i:l-2,x:Pr(r,a)})}else(i||a)&&s.push("translate("+i+e+a+n)}function s(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Pr(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function o(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Pr(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function l(t,e,n,r,a,s){if(t!==n||e!==r){var o=a.push(i(a)+"scale(",null,",",null,")");s.push({i:o-4,x:Pr(t,n)},{i:o-2,x:Pr(e,r)})}else(1!==n||1!==r)&&a.push(i(a)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),a(e.translateX,e.translateY,n.translateX,n.translateY,r,i),s(e.rotate,n.rotate,r,i),o(e.skewX,n.skewX,r,i),l(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,a=i.length;++n<a;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}var Yr=$r(Vr,"px, ","px)","deg)"),qr=$r(Wr,", ",")",")");function Xr(t){return function(e,n){var r=t((e=yr(e)).h,(n=yr(n)).h),i=Mr(e.c,n.c),a=Mr(e.l,n.l),s=Mr(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=s(t),e+""}}}const Jr=Xr(Sr);var Zr,Kr,Qr=0,ti=0,ei=0,ni=1e3,ri=0,ii=0,ai=0,si="object"==typeof performance&&performance.now?performance:Date,oi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function li(){return ii||(oi(ci),ii=si.now()+ai)}function ci(){ii=0}function ui(){this._call=this._time=this._next=null}function hi(t,e,n){var r=new ui;return r.restart(t,e,n),r}function di(){li(),++Qr;for(var t,e=Zr;e;)(t=ii-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Qr}function fi(){ii=(ri=si.now())+ai,Qr=ti=0;try{di()}finally{Qr=0,mi(),ii=0}}function pi(){var t=si.now(),e=t-ri;e>ni&&(ai-=e,ri=t)}function mi(){for(var t,e,n=Zr,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Zr=e);Kr=t,gi(r)}function gi(t){Qr||(ti&&(ti=clearTimeout(ti)),t-ii>24?(t<1/0&&(ti=setTimeout(fi,t-si.now()-ai)),ei&&(ei=clearInterval(ei))):(ei||(ri=si.now(),ei=setInterval(pi,ni)),Qr=1,oi(fi)))}function yi(t,e,n){var r=new ui;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}ui.prototype=hi.prototype={constructor:ui,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?li():+n)+(null==e?0:+e),!this._next&&Kr!==this&&(Kr?Kr._next=this:Zr=this,Kr=this),this._call=t,this._time=n,gi()},stop:function(){this._call&&(this._call=null,this._time=1/0,gi())}};var vi=ot("start","end","cancel","interrupt"),bi=[],xi=0,_i=1,wi=2,Si=3,Ei=4,Mi=5,Ci=6;function Ti(t,e,n,r,i,a){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};Pi(t,n,{name:e,index:r,group:i,on:vi,tween:bi,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:xi})}function Ai(t,e){var n=Li(t,e);if(n.state>xi)throw new Error("too late; already scheduled");return n}function ki(t,e){var n=Li(t,e);if(n.state>Si)throw new Error("too late; already running");return n}function Li(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Pi(t,e,n){var r,i=t.__transition;function a(t){n.state=_i,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}function s(a){var c,u,h,d;if(n.state!==_i)return l();for(c in i)if((d=i[c]).name===n.name){if(d.state===Si)return yi(s);d.state===Ei?(d.state=Ci,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[c]):+c<e&&(d.state=Ci,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[c])}if(yi((function(){n.state===Si&&(n.state=Ei,n.timer.restart(o,n.delay,n.time),o(a))})),n.state=wi,n.on.call("start",t,t.__data__,n.index,n.group),n.state===wi){for(n.state=Si,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=Mi,1),a=-1,s=r.length;++a<s;)r[a].call(t,i);n.state===Mi&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=Ci,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=hi(a,0,n.time)}function Ri(t,e){var n,r,i,a=t.__transition,s=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>wi&&n.state<Mi,n.state=Ci,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):s=!1;s&&delete t.__transition}}function Ii(t){return this.each((function(){Ri(this,t)}))}function Di(t,e){var n,r;return function(){var i=ki(this,t),a=i.tween;if(a!==n)for(var s=0,o=(r=n=a).length;s<o;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function Bi(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=ki(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=o;break}l===c&&i.push(o)}a.tween=i}}function Oi(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Li(this.node(),n).tween,a=0,s=i.length;a<s;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?Di:Bi)(n,t,e))}function Ni(t,e,n){var r=t._id;return t.each((function(){var t=ki(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Li(t,r).value[e]}}function Fi(t,e){var n;return("number"==typeof e?Pr:e instanceof Dn?Cr:(n=Dn(e))?(e=n,Cr):Nr)(t,e)}function zi(t){return function(){this.removeAttribute(t)}}function Ui(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Gi(t,e,n){var r,i,a=n+"";return function(){var s=this.getAttribute(t);return s===a?null:s===r?i:i=e(r=s,n)}}function Hi(t,e,n){var r,i,a=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===a?null:s===r?i:i=e(r=s,n)}}function ji(t,e,n){var r,i,a;return function(){var s,o,l=n(this);return null==l?void this.removeAttribute(t):(s=this.getAttribute(t))===(o=l+"")?null:s===r&&o===i?a:(i=o,a=e(r=s,l))}}function Vi(t,e,n){var r,i,a;return function(){var s,o,l=n(this);return null==l?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local))===(o=l+"")?null:s===r&&o===i?a:(i=o,a=e(r=s,l))}}function Wi(t,e){var n=pt(t),r="transform"===n?qr:Fi;return this.attrTween(t,"function"==typeof e?(n.local?Vi:ji)(n,r,Ni(this,"attr."+t,e)):null==e?(n.local?Ui:zi)(n):(n.local?Hi:Gi)(n,r,e))}function $i(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Yi(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function qi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Yi(t,i)),n}return i._value=e,i}function Xi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&$i(t,i)),n}return i._value=e,i}function Ji(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=pt(t);return this.tween(n,(r.local?qi:Xi)(r,e))}function Zi(t,e){return function(){Ai(this,t).delay=+e.apply(this,arguments)}}function Ki(t,e){return e=+e,function(){Ai(this,t).delay=e}}function Qi(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Zi:Ki)(e,t)):Li(this.node(),e).delay}function ta(t,e){return function(){ki(this,t).duration=+e.apply(this,arguments)}}function ea(t,e){return e=+e,function(){ki(this,t).duration=e}}function na(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ta:ea)(e,t)):Li(this.node(),e).duration}function ra(t,e){if("function"!=typeof e)throw new Error;return function(){ki(this,t).ease=e}}function ia(t){var e=this._id;return arguments.length?this.each(ra(e,t)):Li(this.node(),e).ease}function aa(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;ki(this,t).ease=n}}function sa(t){if("function"!=typeof t)throw new Error;return this.each(aa(this._id,t))}function oa(t){"function"!=typeof t&&(t=Ct(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,s=e[i],o=s.length,l=r[i]=[],c=0;c<o;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&l.push(a);return new Oa(r,this._parents,this._name,this._id)}function la(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var l,c=e[o],u=n[o],h=c.length,d=s[o]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;o<r;++o)s[o]=e[o];return new Oa(s,this._parents,this._name,this._id)}function ca(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}function ua(t,e,n){var r,i,a=ca(e)?Ai:ki;return function(){var s=a(this,t),o=s.on;o!==r&&(i=(r=o).copy()).on(e,n),s.on=i}}function ha(t,e){var n=this._id;return arguments.length<2?Li(this.node(),n).on.on(t):this.each(ua(n,t,e))}function da(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function fa(){return this.on("end.remove",da(this._id))}function pa(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=bt(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o,l,c=r[s],u=c.length,h=a[s]=new Array(u),d=0;d<u;++d)(o=c[d])&&(l=t.call(o,o.__data__,d,c))&&("__data__"in o&&(l.__data__=o.__data__),h[d]=l,Ti(h[d],e,n,d,h,Li(o,n)));return new Oa(a,this._parents,e,n)}function ma(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=St(t));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var l,c=r[o],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,f=t.call(l,l.__data__,h,c),p=Li(l,n),m=0,g=f.length;m<g;++m)(d=f[m])&&Ti(d,e,n,m,f,p);a.push(f),s.push(l)}return new Oa(a,s,e,n)}var ga=un.prototype.constructor;function ya(){return new ga(this._groups,this._parents)}function va(t,e){var n,r,i;return function(){var a=ge(this,t),s=(this.style.removeProperty(t),ge(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function ba(t){return function(){this.style.removeProperty(t)}}function xa(t,e,n){var r,i,a=n+"";return function(){var s=ge(this,t);return s===a?null:s===r?i:i=e(r=s,n)}}function _a(t,e,n){var r,i,a;return function(){var s=ge(this,t),o=n(this),l=o+"";return null==o&&(this.style.removeProperty(t),l=o=ge(this,t)),s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o))}}function wa(t,e){var n,r,i,a,s="style."+e,o="end."+s;return function(){var l=ki(this,t),c=l.on,u=null==l.value[s]?a||(a=ba(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),l.on=r}}function Sa(t,e,n){var r="transform"==(t+="")?Yr:Fi;return null==e?this.styleTween(t,va(t,r)).on("end.style."+t,ba(t)):"function"==typeof e?this.styleTween(t,_a(t,r,Ni(this,"style."+t,e))).each(wa(this._id,t)):this.styleTween(t,xa(t,r,e),n).on("end.style."+t,null)}function Ea(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ma(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Ea(t,a,n)),r}return a._value=e,a}function Ca(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Ma(t,e,null==n?"":n))}function Ta(t){return function(){this.textContent=t}}function Aa(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function ka(t){return this.tween("text","function"==typeof t?Aa(Ni(this,"text",t)):Ta(null==t?"":t+""))}function La(t){return function(e){this.textContent=t.call(this,e)}}function Pa(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&La(r)),e}return r._value=t,r}function Ra(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Pa(t))}function Ia(){for(var t=this._name,e=this._id,n=Na(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s,o=r[a],l=o.length,c=0;c<l;++c)if(s=o[c]){var u=Li(s,e);Ti(s,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Oa(r,this._parents,t,n)}function Da(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,s){var o={value:s},l={value:function(){0==--i&&a()}};n.each((function(){var n=ki(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),n.on=e})),0===i&&a()}))}var Ba=0;function Oa(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Na(){return++Ba}var Fa=un.prototype;function za(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Oa.prototype={constructor:Oa,select:pa,selectAll:ma,selectChild:Fa.selectChild,selectChildren:Fa.selectChildren,filter:oa,merge:la,selection:ya,transition:Ia,call:Fa.call,nodes:Fa.nodes,node:Fa.node,size:Fa.size,empty:Fa.empty,each:Fa.each,on:ha,attr:Wi,attrTween:Ji,style:Sa,styleTween:Ca,text:ka,textTween:Ra,remove:fa,tween:Oi,delay:Qi,duration:na,ease:ia,easeVarying:sa,end:Da,[Symbol.iterator]:Fa[Symbol.iterator]};var Ua={time:null,delay:0,duration:250,ease:za};function Ga(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Ha(t){var e,n;t instanceof Oa?(e=t._id,t=t._name):(e=Na(),(n=Ua).time=li(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s,o=r[a],l=o.length,c=0;c<l;++c)(s=o[c])&&Ti(s,t,e,c,o,n||Ga(s,e));return new Oa(r,this._parents,t,e)}un.prototype.interrupt=Ii,un.prototype.transition=Ha;const ja=Math.PI,Va=2*ja,Wa=1e-6,$a=Va-Wa;function Ya(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function qa(){return new Ya}function Xa(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Ja(t,e){return fetch(t,e).then(Xa)}function Za(t){return(e,n)=>Ja(e,n).then((e=>(new DOMParser).parseFromString(e,t)))}Ya.prototype=qa.prototype={constructor:Ya,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,s=this._y1,o=n-t,l=r-e,c=a-t,u=s-e,h=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>Wa)if(Math.abs(u*o-l*c)>Wa&&i){var d=n-a,f=r-s,p=o*o+l*l,m=d*d+f*f,g=Math.sqrt(p),y=Math.sqrt(h),v=i*Math.tan((ja-Math.acos((p+h-m)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>Wa&&(this._+="L"+(t+b*c)+","+(e+b*u)),this._+="A"+i+","+i+",0,0,"+ +(u*d>c*f)+","+(this._x1=t+x*o)+","+(this._y1=e+x*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var s=(n=+n)*Math.cos(r),o=n*Math.sin(r),l=t+s,c=e+o,u=1^a,h=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Wa||Math.abs(this._y1-c)>Wa)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%Va+Va),h>$a?this._+="A"+n+","+n+",0,1,"+u+","+(t-s)+","+(e-o)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>Wa&&(this._+="A"+n+","+n+",0,"+ +(h>=ja)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Ka=Za("image/svg+xml");function Qa(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ts(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function es(t){return(t=ts(Math.abs(t)))?t[1]:NaN}function ns(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function rs(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var is,as=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ss(t){if(!(e=as.exec(t)))throw new Error("invalid format: "+t);var e;return new os({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function os(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function ls(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}function cs(t,e){var n=ts(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(is=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ts(t,Math.max(0,e+a-1))[0]}function us(t,e){var n=ts(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ss.prototype=os.prototype,os.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const hs={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Qa,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>us(100*t,e),r:us,s:cs,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ds(t){return t}var fs,ps,ms,gs=Array.prototype.map,ys=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function vs(t){var e=void 0===t.grouping||void 0===t.thousands?ds:ns(gs.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?ds:rs(gs.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",o=void 0===t.minus?"\u2212":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function c(t){var c=(t=ss(t)).fill,u=t.align,h=t.sign,d=t.symbol,f=t.zero,p=t.width,m=t.comma,g=t.precision,y=t.trim,v=t.type;"n"===v?(m=!0,v="g"):hs[v]||(void 0===g&&(g=12),y=!0,v="g"),(f||"0"===c&&"="===u)&&(f=!0,c="0",u="=");var b="$"===d?n:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===d?r:/[%p]/.test(v)?s:"",_=hs[v],w=/[defgprs%]/.test(v);function S(t){var n,r,s,d=b,S=x;if("c"===v)S=_(t)+S,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:_(Math.abs(t),g),y&&(t=ls(t)),E&&0==+t&&"+"!==h&&(E=!1),d=(E?"("===h?h:o:"-"===h||"("===h?"":h)+d,S=("s"===v?ys[8+is/3]:"")+S+(E&&"("===h?")":""),w)for(n=-1,r=t.length;++n<r;)if(48>(s=t.charCodeAt(n))||s>57){S=(46===s?i+t.slice(n+1):t.slice(n))+S,t=t.slice(0,n);break}}m&&!f&&(t=e(t,1/0));var M=d.length+t.length+S.length,C=M<p?new Array(p-M+1).join(c):"";switch(m&&f&&(t=e(C+t,C.length?p-S.length:1/0),C=""),u){case"<":t=d+t+S+C;break;case"=":t=d+C+t+S;break;case"^":t=C.slice(0,M=C.length>>1)+d+t+S+C.slice(M);break;default:t=C+d+t+S}return a(t)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return t+""},S}function u(t,e){var n=c(((t=ss(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(es(e)/3))),i=Math.pow(10,-r),a=ys[8+r/3];return function(t){return n(i*t)+a}}return{format:c,formatPrefix:u}}function bs(t){return fs=vs(t),ps=fs.format,ms=fs.formatPrefix,fs}function xs(t){return Math.max(0,-es(Math.abs(t)))}function _s(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(es(e)/3)))-es(Math.abs(t)))}function ws(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,es(e)-es(t))+1}function Ss(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}bs({thousands:",",grouping:[3],currency:["$",""]});const Es=Symbol("implicit");function Ms(){var t=new I,e=[],n=[],r=Es;function i(i){let a=t.get(i);if(void 0===a){if(r!==Es)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new I;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Ms(e,n).unknown(r)},Ss.apply(i,arguments),i}function Cs(t){return function(){return t}}function Ts(t){return+t}var As=[0,1];function ks(t){return t}function Ls(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Cs(isNaN(e)?NaN:.5)}function Ps(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}function Rs(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Ls(i,r),a=n(s,a)):(r=Ls(r,i),a=n(a,s)),function(t){return a(r(t))}}function Is(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Ls(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(e){var n=R(t,e,1,r)-1;return a[n](i[n](e))}}function Ds(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Bs(){var t,e,n,r,i,a,s=As,o=As,l=Fr,c=ks;function u(){var t=Math.min(s.length,o.length);return c!==ks&&(c=Ps(s[0],s[t-1])),r=t>2?Is:Rs,i=a=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(s.map(t),o,l)))(t(c(e)))}return h.invert=function(n){return c(e((a||(a=r(o,s.map(t),Pr)))(n)))},h.domain=function(t){return arguments.length?(s=Array.from(t,Ts),u()):s.slice()},h.range=function(t){return arguments.length?(o=Array.from(t),u()):o.slice()},h.rangeRound=function(t){return o=Array.from(t),l=zr,u()},h.clamp=function(t){return arguments.length?(c=!!t||ks,u()):c!==ks},h.interpolate=function(t){return arguments.length?(l=t,u()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,u()}}function Os(){return Bs()(ks,ks)}function Ns(t,e,n,r){var i,a=j(t,e,n);switch((r=ss(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null==r.precision&&!isNaN(i=_s(a,s))&&(r.precision=i),ms(r,s);case"":case"e":case"g":case"p":case"r":null==r.precision&&!isNaN(i=ws(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-("e"===r.type));break;case"f":case"%":null==r.precision&&!isNaN(i=xs(a))&&(r.precision=i-2*("%"===r.type))}return ps(r)}function Fs(t){var e=t.domain;return t.ticks=function(t){var n=e();return G(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Ns(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,a=e(),s=0,o=a.length-1,l=a[s],c=a[o],u=10;for(c<l&&(i=l,l=c,c=i,i=s,s=o,o=i);u-- >0;){if((i=H(l,c,n))===r)return a[s]=l,a[o]=c,e(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function zs(){var t=Os();return t.copy=function(){return Ds(t,zs())},Ss.apply(t,arguments),Fs(t)}function Us(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],s=t[i];return s<a&&(n=r,r=i,i=n,n=a,a=s,s=n),t[r]=e.floor(a),t[i]=e.ceil(s),t}var Gs=new Date,Hs=new Date;function js(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var s,o=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return o;do{o.push(s=new Date(+n)),e(n,a),t(n)}while(s<n&&n<r);return o},i.filter=function(n){return js((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Gs.setTime(+e),Hs.setTime(+r),t(Gs),t(Hs),Math.floor(n(Gs,Hs))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Vs=js((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Vs.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?js((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Vs:null};const Ws=Vs;Vs.range;const $s=1e3,Ys=60*$s,qs=60*Ys,Xs=24*qs,Js=7*Xs,Zs=30*Xs,Ks=365*Xs;var Qs=js((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*$s)}),(function(t,e){return(e-t)/$s}),(function(t){return t.getUTCSeconds()}));const to=Qs;Qs.range;var eo=js((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*$s)}),(function(t,e){t.setTime(+t+e*Ys)}),(function(t,e){return(e-t)/Ys}),(function(t){return t.getMinutes()}));const no=eo;eo.range;var ro=js((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*$s-t.getMinutes()*Ys)}),(function(t,e){t.setTime(+t+e*qs)}),(function(t,e){return(e-t)/qs}),(function(t){return t.getHours()}));const io=ro;ro.range;var ao=js((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ys)/Xs),(t=>t.getDate()-1));const so=ao;function oo(t){return js((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ys)/Js}))}ao.range;var lo=oo(0),co=oo(1),uo=oo(2),ho=oo(3),fo=oo(4),po=oo(5),mo=oo(6);lo.range,co.range,uo.range,ho.range,fo.range,po.range,mo.range;var go=js((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}));const yo=go;go.range;var vo=js((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));vo.every=function(t){return isFinite(t=Math.floor(t))&&t>0?js((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};const bo=vo;vo.range;var xo=js((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Ys)}),(function(t,e){return(e-t)/Ys}),(function(t){return t.getUTCMinutes()}));const _o=xo;xo.range;var wo=js((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*qs)}),(function(t,e){return(e-t)/qs}),(function(t){return t.getUTCHours()}));const So=wo;wo.range;var Eo=js((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Xs}),(function(t){return t.getUTCDate()-1}));const Mo=Eo;function Co(t){return js((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Js}))}Eo.range;var To=Co(0),Ao=Co(1),ko=Co(2),Lo=Co(3),Po=Co(4),Ro=Co(5),Io=Co(6);To.range,Ao.range,ko.range,Lo.range,Po.range,Ro.range,Io.range;var Do=js((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}));const Bo=Do;Do.range;var Oo=js((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Oo.every=function(t){return isFinite(t=Math.floor(t))&&t>0?js((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};const No=Oo;function Fo(t,e,n,r,i,a){const s=[[to,1,$s],[to,5,5*$s],[to,15,15*$s],[to,30,30*$s],[a,1,Ys],[a,5,5*Ys],[a,15,15*Ys],[a,30,30*Ys],[i,1,qs],[i,3,3*qs],[i,6,6*qs],[i,12,12*qs],[r,1,Xs],[r,2,2*Xs],[n,1,Js],[e,1,Zs],[e,3,3*Zs],[t,1,Ks]];function o(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:l(t,e,n),a=i?i.range(t,+e+1):[];return r?a.reverse():a}function l(e,n,r){const i=Math.abs(n-e)/r,a=A((([,,t])=>t)).right(s,i);if(a===s.length)return t.every(j(e/Ks,n/Ks,r));if(0===a)return Ws.every(Math.max(j(e,n,r),1));const[o,l]=s[i/s[a-1][2]<s[a][2]/i?a-1:a];return o.every(l)}return[o,l]}Oo.range,Fo(No,Bo,To,Mo,So,_o);const[zo,Uo]=Fo(bo,yo,lo,so,io,no);function Go(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ho(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function jo(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Vo(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,c=Qo(i),u=tl(i),h=Qo(a),d=tl(a),f=Qo(s),p=tl(s),m=Qo(o),g=tl(o),y=Qo(l),v=tl(l),b={a:I,A:D,b:B,B:O,c:null,d:_l,e:_l,f:Cl,g:Nl,G:zl,H:wl,I:Sl,j:El,L:Ml,m:Tl,M:Al,p:N,q:F,Q:lc,s:cc,S:kl,u:Ll,U:Pl,V:Il,w:Dl,W:Bl,x:null,X:null,y:Ol,Y:Fl,Z:Ul,"%":oc},x={a:z,A:U,b:G,B:H,c:null,d:Gl,e:Gl,f:$l,g:rc,G:ac,H:Hl,I:jl,j:Vl,L:Wl,m:Yl,M:ql,p:j,q:V,Q:lc,s:cc,S:Xl,u:Jl,U:Zl,V:Ql,w:tc,W:ec,x:null,X:null,y:nc,Y:ic,Z:sc,"%":oc},_={a:C,A:T,b:A,B:k,c:L,d:hl,e:hl,f:yl,g:ol,G:sl,H:fl,I:fl,j:dl,L:gl,m:ul,M:pl,p:M,q:cl,Q:bl,s:xl,S:ml,u:nl,U:rl,V:il,w:el,W:al,x:P,X:R,y:ol,Y:sl,Z:ll,"%":vl};function w(t,e){return function(n){var r,i,a,s=[],o=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===t.charCodeAt(o)&&(s.push(t.slice(l,o)),null!=(i=Yo[r=t.charAt(++o)])?r=t.charAt(++o):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),s.push(r),l=o+1);return s.push(t.slice(l,o)),s.join("")}}function S(t,e){return function(n){var r,i,a=jo(1900,void 0,1);if(E(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=Ho(jo(a.y,0,1))).getUTCDay(),r=i>4||0===i?Ao.ceil(r):Ao(r),r=Mo.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=Go(jo(a.y,0,1))).getDay(),r=i>4||0===i?co.ceil(r):co(r),r=so.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Ho(jo(a.y,0,1)).getUTCDay():Go(jo(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Ho(a)):Go(a)}}function E(t,e,n,r){for(var i,a,s=0,o=e.length,l=n.length;s<o;){if(r>=l)return-1;if(37===(i=e.charCodeAt(s++))){if(i=e.charAt(s++),!(a=_[i in Yo?e.charAt(s++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function M(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=u.get(r[0].toLowerCase()),n+r[0].length):-1}function C(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1}function T(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1}function A(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1}function k(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1}function L(t,n,r){return E(t,e,n,r)}function P(t,e,r){return E(t,n,e,r)}function R(t,e,n){return E(t,r,e,n)}function I(t){return s[t.getDay()]}function D(t){return a[t.getDay()]}function B(t){return l[t.getMonth()]}function O(t){return o[t.getMonth()]}function N(t){return i[+(t.getHours()>=12)]}function F(t){return 1+~~(t.getMonth()/3)}function z(t){return s[t.getUTCDay()]}function U(t){return a[t.getUTCDay()]}function G(t){return l[t.getUTCMonth()]}function H(t){return o[t.getUTCMonth()]}function j(t){return i[+(t.getUTCHours()>=12)]}function V(t){return 1+~~(t.getUTCMonth()/3)}return b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),x.x=w(n,x),x.X=w(r,x),x.c=w(e,x),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}}}var Wo,$o,Yo={"-":"",_:" ",0:"0"},qo=/^\s*\d+/,Xo=/^%/,Jo=/[\\^$*+?|[\]().{}]/g;function Zo(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Ko(t){return t.replace(Jo,"\\$&")}function Qo(t){return new RegExp("^(?:"+t.map(Ko).join("|")+")","i")}function tl(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function el(t,e,n){var r=qo.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function nl(t,e,n){var r=qo.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function rl(t,e,n){var r=qo.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function il(t,e,n){var r=qo.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function al(t,e,n){var r=qo.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function sl(t,e,n){var r=qo.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ol(t,e,n){var r=qo.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ll(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function cl(t,e,n){var r=qo.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function ul(t,e,n){var r=qo.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function hl(t,e,n){var r=qo.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function dl(t,e,n){var r=qo.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function fl(t,e,n){var r=qo.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function pl(t,e,n){var r=qo.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ml(t,e,n){var r=qo.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function gl(t,e,n){var r=qo.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function yl(t,e,n){var r=qo.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function vl(t,e,n){var r=Xo.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function bl(t,e,n){var r=qo.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function xl(t,e,n){var r=qo.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function _l(t,e){return Zo(t.getDate(),e,2)}function wl(t,e){return Zo(t.getHours(),e,2)}function Sl(t,e){return Zo(t.getHours()%12||12,e,2)}function El(t,e){return Zo(1+so.count(bo(t),t),e,3)}function Ml(t,e){return Zo(t.getMilliseconds(),e,3)}function Cl(t,e){return Ml(t,e)+"000"}function Tl(t,e){return Zo(t.getMonth()+1,e,2)}function Al(t,e){return Zo(t.getMinutes(),e,2)}function kl(t,e){return Zo(t.getSeconds(),e,2)}function Ll(t){var e=t.getDay();return 0===e?7:e}function Pl(t,e){return Zo(lo.count(bo(t)-1,t),e,2)}function Rl(t){var e=t.getDay();return e>=4||0===e?fo(t):fo.ceil(t)}function Il(t,e){return t=Rl(t),Zo(fo.count(bo(t),t)+(4===bo(t).getDay()),e,2)}function Dl(t){return t.getDay()}function Bl(t,e){return Zo(co.count(bo(t)-1,t),e,2)}function Ol(t,e){return Zo(t.getFullYear()%100,e,2)}function Nl(t,e){return Zo((t=Rl(t)).getFullYear()%100,e,2)}function Fl(t,e){return Zo(t.getFullYear()%1e4,e,4)}function zl(t,e){var n=t.getDay();return Zo((t=n>=4||0===n?fo(t):fo.ceil(t)).getFullYear()%1e4,e,4)}function Ul(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Zo(e/60|0,"0",2)+Zo(e%60,"0",2)}function Gl(t,e){return Zo(t.getUTCDate(),e,2)}function Hl(t,e){return Zo(t.getUTCHours(),e,2)}function jl(t,e){return Zo(t.getUTCHours()%12||12,e,2)}function Vl(t,e){return Zo(1+Mo.count(No(t),t),e,3)}function Wl(t,e){return Zo(t.getUTCMilliseconds(),e,3)}function $l(t,e){return Wl(t,e)+"000"}function Yl(t,e){return Zo(t.getUTCMonth()+1,e,2)}function ql(t,e){return Zo(t.getUTCMinutes(),e,2)}function Xl(t,e){return Zo(t.getUTCSeconds(),e,2)}function Jl(t){var e=t.getUTCDay();return 0===e?7:e}function Zl(t,e){return Zo(To.count(No(t)-1,t),e,2)}function Kl(t){var e=t.getUTCDay();return e>=4||0===e?Po(t):Po.ceil(t)}function Ql(t,e){return t=Kl(t),Zo(Po.count(No(t),t)+(4===No(t).getUTCDay()),e,2)}function tc(t){return t.getUTCDay()}function ec(t,e){return Zo(Ao.count(No(t)-1,t),e,2)}function nc(t,e){return Zo(t.getUTCFullYear()%100,e,2)}function rc(t,e){return Zo((t=Kl(t)).getUTCFullYear()%100,e,2)}function ic(t,e){return Zo(t.getUTCFullYear()%1e4,e,4)}function ac(t,e){var n=t.getUTCDay();return Zo((t=n>=4||0===n?Po(t):Po.ceil(t)).getUTCFullYear()%1e4,e,4)}function sc(){return"+0000"}function oc(){return"%"}function lc(t){return+t}function cc(t){return Math.floor(+t/1e3)}function uc(t){return Wo=Vo(t),$o=Wo.format,Wo.parse,Wo.utcFormat,Wo.utcParse,Wo}function hc(t){return new Date(t)}function dc(t){return t instanceof Date?+t:+new Date(+t)}function fc(t,e,n,r,i,a,s,o,l,c){var u=Os(),h=u.invert,d=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),v=c("%b %d"),b=c("%B"),x=c("%Y");function _(t){return(l(t)<t?f:o(t)<t?p:s(t)<t?m:a(t)<t?g:r(t)<t?i(t)<t?y:v:n(t)<t?b:x)(t)}return u.invert=function(t){return new Date(h(t))},u.domain=function(t){return arguments.length?d(Array.from(t,dc)):d().map(hc)},u.ticks=function(e){var n=d();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?_:c(e)},u.nice=function(t){var n=d();return(!t||"function"!=typeof t.range)&&(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(Us(n,t)):u},u.copy=function(){return Ds(u,fc(t,e,n,r,i,a,s,o,l,c))},u}function pc(){return Ss.apply(fc(zo,Uo,bo,yo,lo,so,io,no,to,$o).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function mc(t){return function(){return t}}uc({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const gc=Math.abs,yc=Math.atan2,vc=Math.cos,bc=Math.max,xc=Math.min,_c=Math.sin,wc=Math.sqrt,Sc=1e-12,Ec=Math.PI,Mc=Ec/2,Cc=2*Ec;function Tc(t){return t>1?0:t<-1?Ec:Math.acos(t)}function Ac(t){return t>=1?Mc:t<=-1?-Mc:Math.asin(t)}function kc(t){return t.innerRadius}function Lc(t){return t.outerRadius}function Pc(t){return t.startAngle}function Rc(t){return t.endAngle}function Ic(t){return t&&t.padAngle}function Dc(t,e,n,r,i,a,s,o){var l=n-t,c=r-e,u=s-i,h=o-a,d=h*l-u*c;if(!(d*d<Sc))return[t+(d=(u*(e-a)-h*(t-i))/d)*l,e+d*c]}function Bc(t,e,n,r,i,a,s){var o=t-n,l=e-r,c=(s?a:-a)/wc(o*o+l*l),u=c*l,h=-c*o,d=t+u,f=e+h,p=n+u,m=r+h,g=(d+p)/2,y=(f+m)/2,v=p-d,b=m-f,x=v*v+b*b,_=i-a,w=d*m-p*f,S=(b<0?-1:1)*wc(bc(0,_*_*x-w*w)),E=(w*b-v*S)/x,M=(-w*v-b*S)/x,C=(w*b+v*S)/x,T=(-w*v+b*S)/x,A=E-g,k=M-y,L=C-g,P=T-y;return A*A+k*k>L*L+P*P&&(E=C,M=T),{cx:E,cy:M,x01:-u,y01:-h,x11:E*(i/_-1),y11:M*(i/_-1)}}function Oc(){var t=kc,e=Lc,n=mc(0),r=null,i=Pc,a=Rc,s=Ic,o=null;function l(){var l,c,u=+t.apply(this,arguments),h=+e.apply(this,arguments),d=i.apply(this,arguments)-Mc,f=a.apply(this,arguments)-Mc,p=gc(f-d),m=f>d;if(o||(o=l=qa()),h<u&&(c=h,h=u,u=c),h>Sc)if(p>Cc-Sc)o.moveTo(h*vc(d),h*_c(d)),o.arc(0,0,h,d,f,!m),u>Sc&&(o.moveTo(u*vc(f),u*_c(f)),o.arc(0,0,u,f,d,m));else{var g,y,v=d,b=f,x=d,_=f,w=p,S=p,E=s.apply(this,arguments)/2,M=E>Sc&&(r?+r.apply(this,arguments):wc(u*u+h*h)),C=xc(gc(h-u)/2,+n.apply(this,arguments)),T=C,A=C;if(M>Sc){var k=Ac(M/u*_c(E)),L=Ac(M/h*_c(E));(w-=2*k)>Sc?(x+=k*=m?1:-1,_-=k):(w=0,x=_=(d+f)/2),(S-=2*L)>Sc?(v+=L*=m?1:-1,b-=L):(S=0,v=b=(d+f)/2)}var P=h*vc(v),R=h*_c(v),I=u*vc(_),D=u*_c(_);if(C>Sc){var B,O=h*vc(b),N=h*_c(b),F=u*vc(x),z=u*_c(x);if(p<Ec&&(B=Dc(P,R,F,z,O,N,I,D))){var U=P-B[0],G=R-B[1],H=O-B[0],j=N-B[1],V=1/_c(Tc((U*H+G*j)/(wc(U*U+G*G)*wc(H*H+j*j)))/2),W=wc(B[0]*B[0]+B[1]*B[1]);T=xc(C,(u-W)/(V-1)),A=xc(C,(h-W)/(V+1))}}S>Sc?A>Sc?(g=Bc(F,z,P,R,h,A,m),y=Bc(O,N,I,D,h,A,m),o.moveTo(g.cx+g.x01,g.cy+g.y01),A<C?o.arc(g.cx,g.cy,A,yc(g.y01,g.x01),yc(y.y01,y.x01),!m):(o.arc(g.cx,g.cy,A,yc(g.y01,g.x01),yc(g.y11,g.x11),!m),o.arc(0,0,h,yc(g.cy+g.y11,g.cx+g.x11),yc(y.cy+y.y11,y.cx+y.x11),!m),o.arc(y.cx,y.cy,A,yc(y.y11,y.x11),yc(y.y01,y.x01),!m))):(o.moveTo(P,R),o.arc(0,0,h,v,b,!m)):o.moveTo(P,R),u>Sc&&w>Sc?T>Sc?(g=Bc(I,D,O,N,u,-T,m),y=Bc(P,R,F,z,u,-T,m),o.lineTo(g.cx+g.x01,g.cy+g.y01),T<C?o.arc(g.cx,g.cy,T,yc(g.y01,g.x01),yc(y.y01,y.x01),!m):(o.arc(g.cx,g.cy,T,yc(g.y01,g.x01),yc(g.y11,g.x11),!m),o.arc(0,0,u,yc(g.cy+g.y11,g.cx+g.x11),yc(y.cy+y.y11,y.cx+y.x11),m),o.arc(y.cx,y.cy,T,yc(y.y11,y.x11),yc(y.y01,y.x01),!m))):o.arc(0,0,u,_,x,m):o.lineTo(I,D)}else o.moveTo(0,0);if(o.closePath(),l)return o=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Ec/2;return[vc(r)*n,_c(r)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:mc(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:mc(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:mc(+t),l):n},l.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:mc(+t),l):r},l.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:mc(+t),l):i},l.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:mc(+t),l):a},l.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:mc(+t),l):s},l.context=function(t){return arguments.length?(o=null==t?null:t,l):o},l}function Nc(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Fc(t){this._context=t}function zc(t){return new Fc(t)}function Uc(t){return t[0]}function Gc(t){return t[1]}function Hc(t,e){var n=mc(!0),r=null,i=zc,a=null;function s(s){var o,l,c,u=(s=Nc(s)).length,h=!1;for(null==r&&(a=i(c=qa())),o=0;o<=u;++o)!(o<u&&n(l=s[o],o,s))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(l,o,s),+e(l,o,s));if(c)return a=null,c+""||null}return t="function"==typeof t?t:void 0===t?Uc:mc(t),e="function"==typeof e?e:void 0===e?Gc:mc(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:mc(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:mc(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:mc(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),s):r},s}function jc(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Vc(t){return t}function Wc(){var t=Vc,e=jc,n=null,r=mc(0),i=mc(Cc),a=mc(0);function s(s){var o,l,c,u,h,d=(s=Nc(s)).length,f=0,p=new Array(d),m=new Array(d),g=+r.apply(this,arguments),y=Math.min(Cc,Math.max(-Cc,i.apply(this,arguments)-g)),v=Math.min(Math.abs(y)/d,a.apply(this,arguments)),b=v*(y<0?-1:1);for(o=0;o<d;++o)(h=m[p[o]=o]=+t(s[o],o,s))>0&&(f+=h);for(null!=e?p.sort((function(t,n){return e(m[t],m[n])})):null!=n&&p.sort((function(t,e){return n(s[t],s[e])})),o=0,c=f?(y-d*b)/f:0;o<d;++o,g=u)l=p[o],u=g+((h=m[l])>0?h*c:0)+b,m[l]={data:s[l],index:o,value:h,startAngle:g,endAngle:u,padAngle:v};return m}return s.value=function(e){return arguments.length?(t="function"==typeof e?e:mc(+e),s):t},s.sortValues=function(t){return arguments.length?(e=t,n=null,s):e},s.sort=function(t){return arguments.length?(n=t,e=null,s):n},s.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:mc(+t),s):r},s.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:mc(+t),s):i},s.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:mc(+t),s):a},s}function $c(){}function Yc(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function qc(t){this._context=t}function Xc(t){return new qc(t)}function Jc(t){this._context=t}function Zc(t){return new Jc(t)}function Kc(t){this._context=t}function Qc(t){return new Kc(t)}function tu(t){this._context=t}function eu(t){return new tu(t)}function nu(t){return t<0?-1:1}function ru(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(nu(a)+nu(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function iu(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function au(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function su(t){this._context=t}function ou(t){this._context=new lu(t)}function lu(t){this._context=t}function cu(t){return new su(t)}function uu(t){return new ou(t)}function hu(t){this._context=t}function du(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function fu(t){return new hu(t)}function pu(t,e){this._context=t,this._t=e}function mu(t){return new pu(t,.5)}function gu(t){return new pu(t,0)}function yu(t){return new pu(t,1)}function vu(t,e,n){this.k=t,this.x=e,this.y=n}function bu(t){return(bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xu(t,e){return xu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},xu(t,e)}function _u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}function wu(t,e,n){return(wu=_u()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&xu(i,n.prototype),i}).apply(null,arguments)}function Su(t){return Eu(t)||Mu(t)||Cu(t)||Au()}function Eu(t){if(Array.isArray(t))return Tu(t)}function Mu(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Cu(t,e){if(t){if("string"==typeof t)return Tu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tu(t,e)}}function Tu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Au(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Fc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},qc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yc(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Jc.prototype={areaStart:$c,areaEnd:$c,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Yc(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Kc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Yc(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},tu.prototype={areaStart:$c,areaEnd:$c,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},su.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:au(this,this._t0,iu(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,au(this,iu(this,n=ru(this,t,e)),n);break;default:au(this,this._t0,n=ru(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(ou.prototype=Object.create(su.prototype)).point=function(t,e){su.prototype.point.call(this,e,t)},lu.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},hu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=du(t),i=du(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},pu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},vu.prototype={constructor:vu,scale:function(t){return 1===t?this:new vu(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new vu(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new vu(1,0,0),vu.prototype;var ku=Object.hasOwnProperty,Lu=Object.setPrototypeOf,Pu=Object.isFrozen,Ru=Object.getPrototypeOf,Iu=Object.getOwnPropertyDescriptor,Du=Object.freeze,Bu=Object.seal,Ou=Object.create,Nu=typeof Reflect<"u"&&Reflect,Fu=Nu.apply,zu=Nu.construct;Fu||(Fu=function(t,e,n){return t.apply(e,n)}),Du||(Du=function(t){return t}),Bu||(Bu=function(t){return t}),zu||(zu=function(t,e){return wu(t,Su(e))});var Uu=Zu(Array.prototype.forEach),Gu=Zu(Array.prototype.pop),Hu=Zu(Array.prototype.push),ju=Zu(String.prototype.toLowerCase),Vu=Zu(String.prototype.toString),Wu=Zu(String.prototype.match),$u=Zu(String.prototype.replace),Yu=Zu(String.prototype.indexOf),qu=Zu(String.prototype.trim),Xu=Zu(RegExp.prototype.test),Ju=Ku(TypeError);function Zu(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Fu(t,e,r)}}function Ku(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return zu(t,n)}}function Qu(t,e,n){n=n||ju,Lu&&Lu(t,null);for(var r=e.length;r--;){var i=e[r];if("string"==typeof i){var a=n(i);a!==i&&(Pu(e)||(e[r]=a),i=a)}t[i]=!0}return t}function th(t){var e,n=Ou(null);for(e in t)Fu(ku,t,[e])&&(n[e]=t[e]);return n}function eh(t,e){for(;null!==t;){var n=Iu(t,e);if(n){if(n.get)return Zu(n.get);if("function"==typeof n.value)return Zu(n.value)}t=Ru(t)}function r(t){return console.warn("fallback value for",t),null}return r}var nh=Du(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rh=Du(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ih=Du(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ah=Du(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),sh=Du(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),oh=Du(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),lh=Du(["#text"]),ch=Du(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),uh=Du(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),hh=Du(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),dh=Du(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fh=Bu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ph=Bu(/<%[\w\W]*|[\w\W]*%>/gm),mh=Bu(/\${[\w\W]*}/gm),gh=Bu(/^data-[\-\w.\u00B7-\uFFFF]/),yh=Bu(/^aria-[\-\w]+$/),vh=Bu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),bh=Bu(/^(?:\w+script|data):/i),xh=Bu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_h=Bu(/^html$/i),wh=function(){return typeof window>"u"?null:window},Sh=function(t,e){if("object"!==bu(t)||"function"!=typeof t.createPolicy)return null;var n=null,r="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(r)&&(n=e.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function Eh(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wh(),e=function(t){return Eh(t)};if(e.version="2.4.1",e.removed=[],!t||!t.document||9!==t.document.nodeType)return e.isSupported=!1,e;var n=t.document,r=t.document,i=t.DocumentFragment,a=t.HTMLTemplateElement,s=t.Node,o=t.Element,l=t.NodeFilter,c=t.NamedNodeMap,u=void 0===c?t.NamedNodeMap||t.MozNamedAttrMap:c,h=t.HTMLFormElement,d=t.DOMParser,f=t.trustedTypes,p=o.prototype,m=eh(p,"cloneNode"),g=eh(p,"nextSibling"),y=eh(p,"childNodes"),v=eh(p,"parentNode");if("function"==typeof a){var b=r.createElement("template");b.content&&b.content.ownerDocument&&(r=b.content.ownerDocument)}var x=Sh(f,n),_=x?x.createHTML(""):"",w=r,S=w.implementation,E=w.createNodeIterator,M=w.createDocumentFragment,C=w.getElementsByTagName,T=n.importNode,A={};try{A=th(r).documentMode?r.documentMode:{}}catch{}var k={};e.isSupported="function"==typeof v&&S&&typeof S.createHTMLDocument<"u"&&9!==A;var L,P,R=fh,I=ph,D=mh,B=gh,O=yh,N=bh,F=xh,z=vh,U=null,G=Qu({},[].concat(Su(nh),Su(rh),Su(ih),Su(sh),Su(lh))),H=null,j=Qu({},[].concat(Su(ch),Su(uh),Su(hh),Su(dh))),V=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,$=null,Y=!0,q=!0,X=!1,J=!1,Z=!1,K=!1,Q=!1,tt=!1,et=!1,nt=!1,rt=!0,it=!1,at="user-content-",st=!0,ot=!1,lt={},ct=null,ut=Qu({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ht=null,dt=Qu({},["audio","video","img","source","image","track"]),ft=null,pt=Qu({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),mt="http://www.w3.org/1998/Math/MathML",gt="http://www.w3.org/2000/svg",yt="http://www.w3.org/1999/xhtml",vt=yt,bt=!1,xt=null,_t=Qu({},[mt,gt,yt],Vu),wt=["application/xhtml+xml","text/html"],St="text/html",Et=null,Mt=r.createElement("form"),Ct=function(t){return t instanceof RegExp||t instanceof Function},Tt=function(t){Et&&Et===t||((!t||"object"!==bu(t))&&(t={}),t=th(t),L=L=-1===wt.indexOf(t.PARSER_MEDIA_TYPE)?St:t.PARSER_MEDIA_TYPE,P="application/xhtml+xml"===L?Vu:ju,U="ALLOWED_TAGS"in t?Qu({},t.ALLOWED_TAGS,P):G,H="ALLOWED_ATTR"in t?Qu({},t.ALLOWED_ATTR,P):j,xt="ALLOWED_NAMESPACES"in t?Qu({},t.ALLOWED_NAMESPACES,Vu):_t,ft="ADD_URI_SAFE_ATTR"in t?Qu(th(pt),t.ADD_URI_SAFE_ATTR,P):pt,ht="ADD_DATA_URI_TAGS"in t?Qu(th(dt),t.ADD_DATA_URI_TAGS,P):dt,ct="FORBID_CONTENTS"in t?Qu({},t.FORBID_CONTENTS,P):ut,W="FORBID_TAGS"in t?Qu({},t.FORBID_TAGS,P):{},$="FORBID_ATTR"in t?Qu({},t.FORBID_ATTR,P):{},lt="USE_PROFILES"in t&&t.USE_PROFILES,Y=!1!==t.ALLOW_ARIA_ATTR,q=!1!==t.ALLOW_DATA_ATTR,X=t.ALLOW_UNKNOWN_PROTOCOLS||!1,J=t.SAFE_FOR_TEMPLATES||!1,Z=t.WHOLE_DOCUMENT||!1,tt=t.RETURN_DOM||!1,et=t.RETURN_DOM_FRAGMENT||!1,nt=t.RETURN_TRUSTED_TYPE||!1,Q=t.FORCE_BODY||!1,rt=!1!==t.SANITIZE_DOM,it=t.SANITIZE_NAMED_PROPS||!1,st=!1!==t.KEEP_CONTENT,ot=t.IN_PLACE||!1,z=t.ALLOWED_URI_REGEXP||z,vt=t.NAMESPACE||yt,t.CUSTOM_ELEMENT_HANDLING&&Ct(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&Ct(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(V.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),J&&(q=!1),et&&(tt=!0),lt&&(U=Qu({},Su(lh)),H=[],!0===lt.html&&(Qu(U,nh),Qu(H,ch)),!0===lt.svg&&(Qu(U,rh),Qu(H,uh),Qu(H,dh)),!0===lt.svgFilters&&(Qu(U,ih),Qu(H,uh),Qu(H,dh)),!0===lt.mathMl&&(Qu(U,sh),Qu(H,hh),Qu(H,dh))),t.ADD_TAGS&&(U===G&&(U=th(U)),Qu(U,t.ADD_TAGS,P)),t.ADD_ATTR&&(H===j&&(H=th(H)),Qu(H,t.ADD_ATTR,P)),t.ADD_URI_SAFE_ATTR&&Qu(ft,t.ADD_URI_SAFE_ATTR,P),t.FORBID_CONTENTS&&(ct===ut&&(ct=th(ct)),Qu(ct,t.FORBID_CONTENTS,P)),st&&(U["#text"]=!0),Z&&Qu(U,["html","head","body"]),U.table&&(Qu(U,["tbody"]),delete W.tbody),Du&&Du(t),Et=t)},At=Qu({},["mi","mo","mn","ms","mtext"]),kt=Qu({},["foreignobject","desc","title","annotation-xml"]),Lt=Qu({},["title","style","font","a","script"]),Pt=Qu({},rh);Qu(Pt,ih),Qu(Pt,ah);var Rt=Qu({},sh);Qu(Rt,oh);var It=function(t){var e=v(t);(!e||!e.tagName)&&(e={namespaceURI:vt,tagName:"template"});var n=ju(t.tagName),r=ju(e.tagName);return!!xt[t.namespaceURI]&&(t.namespaceURI===gt?e.namespaceURI===yt?"svg"===n:e.namespaceURI===mt?"svg"===n&&("annotation-xml"===r||At[r]):Boolean(Pt[n]):t.namespaceURI===mt?e.namespaceURI===yt?"math"===n:e.namespaceURI===gt?"math"===n&&kt[r]:Boolean(Rt[n]):t.namespaceURI===yt?!(e.namespaceURI===gt&&!kt[r]||e.namespaceURI===mt&&!At[r])&&!Rt[n]&&(Lt[n]||!Pt[n]):!("application/xhtml+xml"!==L||!xt[t.namespaceURI]))},Dt=function(t){Hu(e.removed,{element:t});try{t.parentNode.removeChild(t)}catch{try{t.outerHTML=_}catch{t.remove()}}},Bt=function(t,n){try{Hu(e.removed,{attribute:n.getAttributeNode(t),from:n})}catch{Hu(e.removed,{attribute:null,from:n})}if(n.removeAttribute(t),"is"===t&&!H[t])if(tt||et)try{Dt(n)}catch{}else try{n.setAttribute(t,"")}catch{}},Ot=function(t){var e,n;if(Q)t="<remove></remove>"+t;else{var i=Wu(t,/^[\r\n\t ]+/);n=i&&i[0]}"application/xhtml+xml"===L&&vt===yt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var a=x?x.createHTML(t):t;if(vt===yt)try{e=(new d).parseFromString(a,L)}catch{}if(!e||!e.documentElement){e=S.createDocument(vt,"template",null);try{e.documentElement.innerHTML=bt?"":a}catch{}}var s=e.body||e.documentElement;return t&&n&&s.insertBefore(r.createTextNode(n),s.childNodes[0]||null),vt===yt?C.call(e,Z?"html":"body")[0]:Z?e.documentElement:s},Nt=function(t){return E.call(t.ownerDocument||t,t,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},Ft=function(t){return t instanceof h&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof u)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},zt=function(t){return"object"===bu(s)?t instanceof s:t&&"object"===bu(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},Ut=function(t,n,r){!k[t]||Uu(k[t],(function(t){t.call(e,n,r,Et)}))},Gt=function(t){var n;if(Ut("beforeSanitizeElements",t,null),Ft(t)||Xu(/[\u0080-\uFFFF]/,t.nodeName))return Dt(t),!0;var r=P(t.nodeName);if(Ut("uponSanitizeElement",t,{tagName:r,allowedTags:U}),t.hasChildNodes()&&!zt(t.firstElementChild)&&(!zt(t.content)||!zt(t.content.firstElementChild))&&Xu(/<[/\w]/g,t.innerHTML)&&Xu(/<[/\w]/g,t.textContent)||"select"===r&&Xu(/<template/i,t.innerHTML))return Dt(t),!0;if(!U[r]||W[r]){if(!W[r]&&jt(r)&&(V.tagNameCheck instanceof RegExp&&Xu(V.tagNameCheck,r)||V.tagNameCheck instanceof Function&&V.tagNameCheck(r)))return!1;if(st&&!ct[r]){var i=v(t)||t.parentNode,a=y(t)||t.childNodes;if(a&&i)for(var s=a.length-1;s>=0;--s)i.insertBefore(m(a[s],!0),g(t))}return Dt(t),!0}return t instanceof o&&!It(t)||("noscript"===r||"noembed"===r)&&Xu(/<\/no(script|embed)/i,t.innerHTML)?(Dt(t),!0):(J&&3===t.nodeType&&(n=t.textContent,n=$u(n,R," "),n=$u(n,I," "),n=$u(n,D," "),t.textContent!==n&&(Hu(e.removed,{element:t.cloneNode()}),t.textContent=n)),Ut("afterSanitizeElements",t,null),!1)},Ht=function(t,e,n){if(rt&&("id"===e||"name"===e)&&(n in r||n in Mt))return!1;if((!q||$[e]||!Xu(B,e))&&(!Y||!Xu(O,e)))if(!H[e]||$[e]){if(!(jt(t)&&(V.tagNameCheck instanceof RegExp&&Xu(V.tagNameCheck,t)||V.tagNameCheck instanceof Function&&V.tagNameCheck(t))&&(V.attributeNameCheck instanceof RegExp&&Xu(V.attributeNameCheck,e)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(e))||"is"===e&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&Xu(V.tagNameCheck,n)||V.tagNameCheck instanceof Function&&V.tagNameCheck(n))))return!1}else if(!ft[e]&&!Xu(z,$u(n,F,""))&&("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==Yu(n,"data:")||!ht[t])&&(!X||Xu(N,$u(n,F,"")))&&n)return!1;return!0},jt=function(t){return t.indexOf("-")>0},Vt=function(t){var n,r,i,a;Ut("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H};for(a=s.length;a--;){var l=n=s[a],c=l.name,u=l.namespaceURI;if(r="value"===c?n.value:qu(n.value),i=P(c),o.attrName=i,o.attrValue=r,o.keepAttr=!0,o.forceKeepAttr=void 0,Ut("uponSanitizeAttribute",t,o),r=o.attrValue,!o.forceKeepAttr&&(Bt(c,t),o.keepAttr)){if(Xu(/\/>/i,r)){Bt(c,t);continue}J&&(r=$u(r,R," "),r=$u(r,I," "),r=$u(r,D," "));var h=P(t.nodeName);if(Ht(h,i,r)){if(it&&("id"===i||"name"===i)&&(Bt(c,t),r=at+r),x&&"object"===bu(f)&&"function"==typeof f.getAttributeType&&!u)switch(f.getAttributeType(h,i)){case"TrustedHTML":r=x.createHTML(r);break;case"TrustedScriptURL":r=x.createScriptURL(r)}try{u?t.setAttributeNS(u,c,r):t.setAttribute(c,r),Gu(e.removed)}catch{}}}}Ut("afterSanitizeAttributes",t,null)}},Wt=function t(e){var n,r=Nt(e);for(Ut("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)Ut("uponSanitizeShadowNode",n,null),!Gt(n)&&(n.content instanceof i&&t(n.content),Vt(n));Ut("afterSanitizeShadowDOM",e,null)};return e.sanitize=function(r){var a,o,l,c,u,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((bt=!r)&&(r="\x3c!--\x3e"),"string"!=typeof r&&!zt(r)){if("function"!=typeof r.toString)throw Ju("toString is not a function");if("string"!=typeof(r=r.toString()))throw Ju("dirty is not a string, aborting")}if(!e.isSupported){if("object"===bu(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof r)return t.toStaticHTML(r);if(zt(r))return t.toStaticHTML(r.outerHTML)}return r}if(K||Tt(h),e.removed=[],"string"==typeof r&&(ot=!1),ot){if(r.nodeName){var d=P(r.nodeName);if(!U[d]||W[d])throw Ju("root node is forbidden and cannot be sanitized in-place")}}else if(r instanceof s)1===(o=(a=Ot("\x3c!----\x3e")).ownerDocument.importNode(r,!0)).nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?a=o:a.appendChild(o);else{if(!tt&&!J&&!Z&&-1===r.indexOf("<"))return x&&nt?x.createHTML(r):r;if(!(a=Ot(r)))return tt?null:nt?_:""}a&&Q&&Dt(a.firstChild);for(var f=Nt(ot?r:a);l=f.nextNode();)3===l.nodeType&&l===c||Gt(l)||(l.content instanceof i&&Wt(l.content),Vt(l),c=l);if(c=null,ot)return r;if(tt){if(et)for(u=M.call(a.ownerDocument);a.firstChild;)u.appendChild(a.firstChild);else u=a;return H.shadowroot&&(u=T.call(n,u,!0)),u}var p=Z?a.outerHTML:a.innerHTML;return Z&&U["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&Xu(_h,a.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+a.ownerDocument.doctype.name+">\n"+p),J&&(p=$u(p,R," "),p=$u(p,I," "),p=$u(p,D," ")),x&&nt?x.createHTML(p):p},e.setConfig=function(t){Tt(t),K=!0},e.clearConfig=function(){Et=null,K=!1},e.isValidAttribute=function(t,e,n){Et||Tt({});var r=P(t),i=P(e);return Ht(r,i,n)},e.addHook=function(t,e){"function"==typeof e&&(k[t]=k[t]||[],Hu(k[t],e))},e.removeHook=function(t){if(k[t])return Gu(k[t])},e.removeHooks=function(t){k[t]&&(k[t]=[])},e.removeAllHooks=function(){k={}},e}var Mh=Eh();const Ch=t=>t?Ih(t).replace(/\\n/g,"#br#").split("#br#"):[""],Th=t=>Mh.sanitize(t),Ah=(t,e)=>{var n;if(!1!==(null==(n=e.flowchart)?void 0:n.htmlLabels)){const n=e.securityLevel;"antiscript"===n||"strict"===n?t=Th(t):"loose"!==n&&(t=(t=(t=Ih(t)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),t=Rh(t))}return t},kh=(t,e)=>t&&(t=e.dompurifyConfig?Mh.sanitize(Ah(t,e),e.dompurifyConfig).toString():Mh.sanitize(Ah(t,e),{FORBID_TAGS:["style"]}).toString()),Lh=(t,e)=>"string"==typeof t?kh(t,e):t.flat().map((t=>kh(t,e))),Ph=/<br\s*\/?>/gi,Rh=t=>t.replace(/#br#/g,"<br/>"),Ih=t=>t.replace(Ph,"#br#"),Dh=t=>!(!1===t||["false","null","0"].includes(String(t).trim().toLowerCase())),Bh=function(t){let e=t;return t.includes("~")?(e=e.replace(/~([^~].*)/,"<$1"),e=e.replace(/~([^~]*)$/,">$1"),Bh(e)):e},Oh={getRows:Ch,sanitizeText:kh,sanitizeTextOrArray:Lh,hasBreaks:t=>Ph.test(t),splitBreaks:t=>t.split(Ph),lineBreakRegex:Ph,removeScript:Th,getUrl:t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e},evaluate:Dh},Nh={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t),hsl2rgb:({h:t,s:e,l:n},r)=>{if(!e)return 2.55*n;t/=360,e/=100;const i=(n/=100)<.5?n*(1+e):n+e-n*e,a=2*n-i;switch(r){case"r":return 255*Nh.hue2rgb(a,i,t+1/3);case"g":return 255*Nh.hue2rgb(a,i,t);case"b":return 255*Nh.hue2rgb(a,i,t-1/3)}},rgb2hsl:({r:t,g:e,b:n},r)=>{t/=255,e/=255,n/=255;const i=Math.max(t,e,n),a=Math.min(t,e,n),s=(i+a)/2;if("l"===r)return 100*s;if(i===a)return 0;const o=i-a;if("s"===r)return 100*(s>.5?o/(2-i-a):o/(i+a));switch(i){case t:return 60*((e-n)/o+(e<n?6:0));case e:return 60*((n-t)/o+2);case n:return 60*((t-e)/o+4);default:return-1}}},Fh={channel:Nh,lang:{clamp:(t,e,n)=>e>n?Math.min(e,Math.max(n,t)):Math.min(n,Math.max(e,t)),round:t=>Math.round(1e10*t)/1e10},unit:{dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}}},zh={};for(let t=0;t<=255;t++)zh[t]=Fh.unit.dec2hex(t);const Uh={ALL:0,RGB:1,HSL:2};class Gh{constructor(){this.type=Uh.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=Uh.ALL}is(t){return this.type===t}}const Hh=Gh;class jh{constructor(t,e){this.color=e,this.changed=!1,this.data=t,this.type=new Hh}set(t,e){return this.color=e,this.changed=!1,this.data=t,this.type.type=Uh.ALL,this}_ensureHSL(){const t=this.data,{h:e,s:n,l:r}=t;void 0===e&&(t.h=Fh.channel.rgb2hsl(t,"h")),void 0===n&&(t.s=Fh.channel.rgb2hsl(t,"s")),void 0===r&&(t.l=Fh.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r:e,g:n,b:r}=t;void 0===e&&(t.r=Fh.channel.hsl2rgb(t,"r")),void 0===n&&(t.g=Fh.channel.hsl2rgb(t,"g")),void 0===r&&(t.b=Fh.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,e=t.r;return this.type.is(Uh.HSL)||void 0===e?(this._ensureHSL(),Fh.channel.hsl2rgb(t,"r")):e}get g(){const t=this.data,e=t.g;return this.type.is(Uh.HSL)||void 0===e?(this._ensureHSL(),Fh.channel.hsl2rgb(t,"g")):e}get b(){const t=this.data,e=t.b;return this.type.is(Uh.HSL)||void 0===e?(this._ensureHSL(),Fh.channel.hsl2rgb(t,"b")):e}get h(){const t=this.data,e=t.h;return this.type.is(Uh.RGB)||void 0===e?(this._ensureRGB(),Fh.channel.rgb2hsl(t,"h")):e}get s(){const t=this.data,e=t.s;return this.type.is(Uh.RGB)||void 0===e?(this._ensureRGB(),Fh.channel.rgb2hsl(t,"s")):e}get l(){const t=this.data,e=t.l;return this.type.is(Uh.RGB)||void 0===e?(this._ensureRGB(),Fh.channel.rgb2hsl(t,"l")):e}get a(){return this.data.a}set r(t){this.type.set(Uh.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(Uh.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(Uh.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(Uh.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(Uh.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(Uh.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const Vh=new jh({r:0,g:0,b:0,a:0},"transparent"),Wh={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(35!==t.charCodeAt(0))return;const e=t.match(Wh.re);if(!e)return;const n=e[1],r=parseInt(n,16),i=n.length,a=i%4==0,s=i>4,o=s?1:17,l=s?8:4,c=a?0:-1,u=s?255:15;return Vh.set({r:(r>>l*(c+3)&u)*o,g:(r>>l*(c+2)&u)*o,b:(r>>l*(c+1)&u)*o,a:a?(r&u)*o/255:1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`#${zh[Math.round(e)]}${zh[Math.round(n)]}${zh[Math.round(r)]}${zh[Math.round(255*i)]}`:`#${zh[Math.round(e)]}${zh[Math.round(n)]}${zh[Math.round(r)]}`}},$h=Wh,Yh={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(Yh.hueRe);if(e){const[,t,n]=e;switch(n){case"grad":return Fh.channel.clamp.h(.9*parseFloat(t));case"rad":return Fh.channel.clamp.h(180*parseFloat(t)/Math.PI);case"turn":return Fh.channel.clamp.h(360*parseFloat(t))}}return Fh.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(104!==e&&72!==e)return;const n=t.match(Yh.re);if(!n)return;const[,r,i,a,s,o]=n;return Vh.set({h:Yh._hue2deg(r),s:Fh.channel.clamp.s(parseFloat(i)),l:Fh.channel.clamp.l(parseFloat(a)),a:s?Fh.channel.clamp.a(o?parseFloat(s)/100:parseFloat(s)):1},t)},stringify:t=>{const{h:e,s:n,l:r,a:i}=t;return i<1?`hsla(${Fh.lang.round(e)}, ${Fh.lang.round(n)}%, ${Fh.lang.round(r)}%, ${i})`:`hsl(${Fh.lang.round(e)}, ${Fh.lang.round(n)}%, ${Fh.lang.round(r)}%)`}},qh=Yh,Xh={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=Xh.colors[t];if(e)return $h.parse(e)},stringify:t=>{const e=$h.stringify(t);for(const n in Xh.colors)if(Xh.colors[n]===e)return n}},Jh=Xh,Zh={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(114!==e&&82!==e)return;const n=t.match(Zh.re);if(!n)return;const[,r,i,a,s,o,l,c,u]=n;return Vh.set({r:Fh.channel.clamp.r(i?2.55*parseFloat(r):parseFloat(r)),g:Fh.channel.clamp.g(s?2.55*parseFloat(a):parseFloat(a)),b:Fh.channel.clamp.b(l?2.55*parseFloat(o):parseFloat(o)),a:c?Fh.channel.clamp.a(u?parseFloat(c)/100:parseFloat(c)):1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`rgba(${Fh.lang.round(e)}, ${Fh.lang.round(n)}, ${Fh.lang.round(r)}, ${Fh.lang.round(i)})`:`rgb(${Fh.lang.round(e)}, ${Fh.lang.round(n)}, ${Fh.lang.round(r)})`}},Kh=Zh,Qh={format:{keyword:Jh,hex:$h,rgb:Kh,rgba:Kh,hsl:qh,hsla:qh},parse:t=>{if("string"!=typeof t)return t;const e=$h.parse(t)||Kh.parse(t)||qh.parse(t)||Jh.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(Uh.HSL)||void 0===t.data.r?qh.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?Kh.stringify(t):$h.stringify(t)},td=(t,e)=>{const n=Qh.parse(t);for(const r in e)n[r]=Fh.channel.clamp[r](e[r]);return Qh.stringify(n)},ed=(t,e,n=0,r=1)=>{if("number"!=typeof t)return td(t,{a:e});const i=Vh.set({r:Fh.channel.clamp.r(t),g:Fh.channel.clamp.g(e),b:Fh.channel.clamp.b(n),a:Fh.channel.clamp.a(r)});return Qh.stringify(i)},nd=(t,e,n)=>{const r=Qh.parse(t),i=r[e],a=Fh.channel.clamp[e](i+n);return i!==a&&(r[e]=a),Qh.stringify(r)},rd=(t,e)=>nd(t,"l",e),id=(t,e)=>nd(t,"l",-e),ad=(t,e)=>{const n=Qh.parse(t),r={};for(const i in e)!e[i]||(r[i]=n[i]+e[i]);return td(t,r)},sd=(t,e,n=50)=>{const{r:r,g:i,b:a,a:s}=Qh.parse(t),{r:o,g:l,b:c,a:u}=Qh.parse(e),h=n/100,d=2*h-1,f=s-u,p=((d*f==-1?d:(d+f)/(1+d*f))+1)/2,m=1-p;return ed(r*p+o*m,i*p+l*m,a*p+c*m,s*h+u*(1-h))},od=(t,e=100)=>{const n=Qh.parse(t);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,sd(n,t,e)},ld=(t,e)=>ad(t,e?{s:-40,l:10}:{s:-40,l:-10}),cd="#ffffff",ud="#f2f2f2";class hd{constructor(){this.background="#f4f4f4",this.darkMode=!1,this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||ad(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||ad(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||ld(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||ld(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||ld(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||ld(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||od(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||od(this.tertiaryColor),this.lineColor=this.lineColor||od(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?id(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||id(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||od(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||rd(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ad(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ad(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ad(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ad(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ad(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ad(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||ad(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ad(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ad(this.primaryColor,{h:330}),this.darkMode)for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=id(this["cScale"+t],75);else for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=id(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||od(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||rd(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||id(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||ad(this.primaryColor,{h:64}),this.fillType3=this.fillType3||ad(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||ad(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||ad(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||ad(this.primaryColor,{h:128}),this.fillType7=this.fillType7||ad(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ad(this.primaryColor,{l:-10}),this.pie5=this.pie5||ad(this.secondaryColor,{l:-10}),this.pie6=this.pie6||ad(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||ad(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ad(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ad(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ad(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||ad(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||ad(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?id(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ad(this.primaryColor,{h:-30}),this.git4=this.git4||ad(this.primaryColor,{h:-60}),this.git5=this.git5||ad(this.primaryColor,{h:-90}),this.git6=this.git6||ad(this.primaryColor,{h:60}),this.git7=this.git7||ad(this.primaryColor,{h:120}),this.darkMode?(this.git0=rd(this.git0,25),this.git1=rd(this.git1,25),this.git2=rd(this.git2,25),this.git3=rd(this.git3,25),this.git4=rd(this.git4,25),this.git5=rd(this.git5,25),this.git6=rd(this.git6,25),this.git7=rd(this.git7,25)):(this.git0=id(this.git0,25),this.git1=id(this.git1,25),this.git2=id(this.git2,25),this.git3=id(this.git3,25),this.git4=id(this.git4,25),this.git5=id(this.git5,25),this.git6=id(this.git6,25),this.git7=id(this.git7,25)),this.gitInv0=this.gitInv0||od(this.git0),this.gitInv1=this.gitInv1||od(this.git1),this.gitInv2=this.gitInv2||od(this.git2),this.gitInv3=this.gitInv3||od(this.git3),this.gitInv4=this.gitInv4||od(this.git4),this.gitInv5=this.gitInv5||od(this.git5),this.gitInv6=this.gitInv6||od(this.git6),this.gitInv7=this.gitInv7||od(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||cd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ud}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}}const dd=t=>{const e=new hd;return e.calculate(t),e};class fd{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=rd(this.primaryColor,16),this.tertiaryColor=ad(this.primaryColor,{h:-160}),this.primaryBorderColor=od(this.background),this.secondaryBorderColor=ld(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ld(this.tertiaryColor,this.darkMode),this.primaryTextColor=od(this.primaryColor),this.secondaryTextColor=od(this.secondaryColor),this.tertiaryTextColor=od(this.tertiaryColor),this.lineColor=od(this.background),this.textColor=od(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=rd(od("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=ed(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=id("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=ed(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=ed(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=rd(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=rd(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=rd(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ad(this.primaryColor,{h:64}),this.fillType3=ad(this.secondaryColor,{h:64}),this.fillType4=ad(this.primaryColor,{h:-64}),this.fillType5=ad(this.secondaryColor,{h:-64}),this.fillType6=ad(this.primaryColor,{h:128}),this.fillType7=ad(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ad(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ad(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ad(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ad(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ad(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ad(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ad(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ad(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ad(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||od(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||rd(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?id(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=rd(this.secondaryColor,20),this.git1=rd(this.pie2||this.secondaryColor,20),this.git2=rd(this.pie3||this.tertiaryColor,20),this.git3=rd(this.pie4||ad(this.primaryColor,{h:-30}),20),this.git4=rd(this.pie5||ad(this.primaryColor,{h:-60}),20),this.git5=rd(this.pie6||ad(this.primaryColor,{h:-90}),10),this.git6=rd(this.pie7||ad(this.primaryColor,{h:60}),10),this.git7=rd(this.pie8||ad(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||od(this.git0),this.gitInv1=this.gitInv1||od(this.git1),this.gitInv2=this.gitInv2||od(this.git2),this.gitInv3=this.gitInv3||od(this.git3),this.gitInv4=this.gitInv4||od(this.git4),this.gitInv5=this.gitInv5||od(this.git5),this.gitInv6=this.gitInv6||od(this.git6),this.gitInv7=this.gitInv7||od(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||rd(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||rd(this.background,2)}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}}const pd=t=>{const e=new fd;return e.calculate(t),e};class md{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=ad(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=ad(this.primaryColor,{h:-160}),this.primaryBorderColor=ld(this.primaryColor,this.darkMode),this.secondaryBorderColor=ld(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ld(this.tertiaryColor,this.darkMode),this.primaryTextColor=od(this.primaryColor),this.secondaryTextColor=od(this.secondaryColor),this.tertiaryTextColor=od(this.tertiaryColor),this.lineColor=od(this.background),this.textColor=od(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=ed(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ad(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ad(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ad(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ad(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ad(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ad(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ad(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ad(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ad(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||id(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||id(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=id(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||id(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ad(this["cScale"+t],{h:180});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||od(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||od(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=rd(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ad(this.primaryColor,{h:64}),this.fillType3=ad(this.secondaryColor,{h:64}),this.fillType4=ad(this.primaryColor,{h:-64}),this.fillType5=ad(this.secondaryColor,{h:-64}),this.fillType6=ad(this.primaryColor,{h:128}),this.fillType7=ad(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||ad(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||ad(this.primaryColor,{l:-10}),this.pie5=this.pie5||ad(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ad(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||ad(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||ad(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||ad(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||ad(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||ad(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||ad(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ad(this.primaryColor,{h:-30}),this.git4=this.git4||ad(this.primaryColor,{h:-60}),this.git5=this.git5||ad(this.primaryColor,{h:-90}),this.git6=this.git6||ad(this.primaryColor,{h:60}),this.git7=this.git7||ad(this.primaryColor,{h:120}),this.darkMode?(this.git0=rd(this.git0,25),this.git1=rd(this.git1,25),this.git2=rd(this.git2,25),this.git3=rd(this.git3,25),this.git4=rd(this.git4,25),this.git5=rd(this.git5,25),this.git6=rd(this.git6,25),this.git7=rd(this.git7,25)):(this.git0=id(this.git0,25),this.git1=id(this.git1,25),this.git2=id(this.git2,25),this.git3=id(this.git3,25),this.git4=id(this.git4,25),this.git5=id(this.git5,25),this.git6=id(this.git6,25),this.git7=id(this.git7,25)),this.gitInv0=this.gitInv0||id(od(this.git0),25),this.gitInv1=this.gitInv1||od(this.git1),this.gitInv2=this.gitInv2||od(this.git2),this.gitInv3=this.gitInv3||od(this.git3),this.gitInv4=this.gitInv4||od(this.git4),this.gitInv5=this.gitInv5||od(this.git5),this.gitInv6=this.gitInv6||od(this.git6),this.gitInv7=this.gitInv7||od(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||od(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||od(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||cd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ud}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}}const gd=t=>{const e=new md;return e.calculate(t),e};class yd{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=rd("#cde498",10),this.primaryBorderColor=ld(this.primaryColor,this.darkMode),this.secondaryBorderColor=ld(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ld(this.tertiaryColor,this.darkMode),this.primaryTextColor=od(this.primaryColor),this.secondaryTextColor=od(this.secondaryColor),this.tertiaryTextColor=od(this.primaryColor),this.lineColor=od(this.background),this.textColor=od(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ad(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ad(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ad(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ad(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ad(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ad(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ad(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ad(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ad(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||id(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||id(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=id(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||id(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ad(this["cScale"+t],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=id(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ad(this.primaryColor,{h:64}),this.fillType3=ad(this.secondaryColor,{h:64}),this.fillType4=ad(this.primaryColor,{h:-64}),this.fillType5=ad(this.secondaryColor,{h:-64}),this.fillType6=ad(this.primaryColor,{h:128}),this.fillType7=ad(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ad(this.primaryColor,{l:-30}),this.pie5=this.pie5||ad(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ad(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||ad(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ad(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ad(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ad(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||ad(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||ad(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ad(this.primaryColor,{h:-30}),this.git4=this.git4||ad(this.primaryColor,{h:-60}),this.git5=this.git5||ad(this.primaryColor,{h:-90}),this.git6=this.git6||ad(this.primaryColor,{h:60}),this.git7=this.git7||ad(this.primaryColor,{h:120}),this.darkMode?(this.git0=rd(this.git0,25),this.git1=rd(this.git1,25),this.git2=rd(this.git2,25),this.git3=rd(this.git3,25),this.git4=rd(this.git4,25),this.git5=rd(this.git5,25),this.git6=rd(this.git6,25),this.git7=rd(this.git7,25)):(this.git0=id(this.git0,25),this.git1=id(this.git1,25),this.git2=id(this.git2,25),this.git3=id(this.git3,25),this.git4=id(this.git4,25),this.git5=id(this.git5,25),this.git6=id(this.git6,25),this.git7=id(this.git7,25)),this.gitInv0=this.gitInv0||od(this.git0),this.gitInv1=this.gitInv1||od(this.git1),this.gitInv2=this.gitInv2||od(this.git2),this.gitInv3=this.gitInv3||od(this.git3),this.gitInv4=this.gitInv4||od(this.git4),this.gitInv5=this.gitInv5||od(this.git5),this.gitInv6=this.gitInv6||od(this.git6),this.gitInv7=this.gitInv7||od(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||cd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ud}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}}const vd=t=>{const e=new yd;return e.calculate(t),e};class bd{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=rd(this.contrast,55),this.background="#ffffff",this.tertiaryColor=ad(this.primaryColor,{h:-160}),this.primaryBorderColor=ld(this.primaryColor,this.darkMode),this.secondaryBorderColor=ld(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ld(this.tertiaryColor,this.darkMode),this.primaryTextColor=od(this.primaryColor),this.secondaryTextColor=od(this.secondaryColor),this.tertiaryTextColor=od(this.tertiaryColor),this.lineColor=od(this.background),this.textColor=od(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=rd(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||od(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||rd(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||id(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=rd(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=rd(this.contrast,30),this.sectionBkgColor2=rd(this.contrast,30),this.taskBorderColor=id(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=rd(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=id(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ad(this.primaryColor,{h:64}),this.fillType3=ad(this.secondaryColor,{h:64}),this.fillType4=ad(this.primaryColor,{h:-64}),this.fillType5=ad(this.secondaryColor,{h:-64}),this.fillType6=ad(this.primaryColor,{h:128}),this.fillType7=ad(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=id(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||ad(this.primaryColor,{h:-30}),this.git4=this.pie5||ad(this.primaryColor,{h:-60}),this.git5=this.pie6||ad(this.primaryColor,{h:-90}),this.git6=this.pie7||ad(this.primaryColor,{h:60}),this.git7=this.pie8||ad(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||od(this.git0),this.gitInv1=this.gitInv1||od(this.git1),this.gitInv2=this.gitInv2||od(this.git2),this.gitInv3=this.gitInv3||od(this.git3),this.gitInv4=this.gitInv4||od(this.git4),this.gitInv5=this.gitInv5||od(this.git5),this.gitInv6=this.gitInv6||od(this.git6),this.gitInv7=this.gitInv7||od(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||cd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ud}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}}const xd={base:{getThemeVariables:dd},dark:{getThemeVariables:pd},default:{getThemeVariables:gd},forest:{getThemeVariables:vd},neutral:{getThemeVariables:t=>{const e=new bd;return e.calculate(t),e}}},_d={theme:"default",themeVariables:xd.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",tickInterval:void 0,useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16};_d.class&&(_d.class.arrowMarkerAbsolute=_d.arrowMarkerAbsolute),_d.gitGraph&&(_d.gitGraph.arrowMarkerAbsolute=_d.arrowMarkerAbsolute);const wd=(t,e="")=>Object.keys(t).reduce(((n,r)=>Array.isArray(t[r])?n:"object"==typeof t[r]&&null!==t[r]?[...n,e+r,...wd(t[r],"")]:[...n,e+r]),[]),Sd=wd(_d,""),Ed=_d;function Md(t){return typeof t>"u"||null===t}function Cd(t){return"object"==typeof t&&null!==t}function Td(t){return Array.isArray(t)?t:Md(t)?[]:[t]}function Ad(t,e){var n,r,i,a;if(e)for(n=0,r=(a=Object.keys(e)).length;n<r;n+=1)t[i=a[n]]=e[i];return t}function kd(t,e){var n,r="";for(n=0;n<e;n+=1)r+=t;return r}function Ld(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t}var Pd={isNothing:Md,isObject:Cd,toArray:Td,repeat:kd,isNegativeZero:Ld,extend:Ad};function Rd(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+="\n\n"+t.mark.snippet),r+" "+n):r}function Id(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Rd(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}Id.prototype=Object.create(Error.prototype),Id.prototype.constructor=Id,Id.prototype.toString=function(t){return this.name+": "+Rd(this,t)};var Dd=Id;function Bd(t,e,n,r,i){var a="",s="",o=Math.floor(i/2)-1;return r-e>o&&(e=r-o+(a=" ... ").length),n-r>o&&(n=r+o-(s=" ...").length),{str:a+t.slice(e,n).replace(/\t/g,"\u2192")+s,pos:r-e+a.length}}function Od(t,e){return Pd.repeat(" ",e-t.length)+t}function Nd(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),"number"!=typeof e.indent&&(e.indent=1),"number"!=typeof e.linesBefore&&(e.linesBefore=3),"number"!=typeof e.linesAfter&&(e.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,i=[0],a=[],s=-1;n=r.exec(t.buffer);)a.push(n.index),i.push(n.index+n[0].length),t.position<=n.index&&s<0&&(s=i.length-2);s<0&&(s=i.length-1);var o,l,c="",u=Math.min(t.line+e.linesAfter,a.length).toString().length,h=e.maxLength-(e.indent+u+3);for(o=1;o<=e.linesBefore&&!(s-o<0);o++)l=Bd(t.buffer,i[s-o],a[s-o],t.position-(i[s]-i[s-o]),h),c=Pd.repeat(" ",e.indent)+Od((t.line-o+1).toString(),u)+" | "+l.str+"\n"+c;for(l=Bd(t.buffer,i[s],a[s],t.position,h),c+=Pd.repeat(" ",e.indent)+Od((t.line+1).toString(),u)+" | "+l.str+"\n",c+=Pd.repeat("-",e.indent+u+3+l.pos)+"^\n",o=1;o<=e.linesAfter&&!(s+o>=a.length);o++)l=Bd(t.buffer,i[s+o],a[s+o],t.position-(i[s]-i[s+o]),h),c+=Pd.repeat(" ",e.indent)+Od((t.line+o+1).toString(),u)+" | "+l.str+"\n";return c.replace(/\n$/,"")}var Fd=Nd,zd=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Ud=["scalar","sequence","mapping"];function Gd(t){var e={};return null!==t&&Object.keys(t).forEach((function(n){t[n].forEach((function(t){e[String(t)]=n}))})),e}function Hd(t,e){if(e=e||{},Object.keys(e).forEach((function(e){if(-1===zd.indexOf(e))throw new Dd('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Gd(e.styleAliases||null),-1===Ud.indexOf(this.kind))throw new Dd('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var jd=Hd;function Vd(t,e){var n=[];return t[e].forEach((function(t){var e=n.length;n.forEach((function(n,r){n.tag===t.tag&&n.kind===t.kind&&n.multi===t.multi&&(e=r)})),n[e]=t})),n}function Wd(){var t,e,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(t){t.multi?(n.multi[t.kind].push(t),n.multi.fallback.push(t)):n[t.kind][t.tag]=n.fallback[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(r);return n}function $d(t){return this.extend(t)}$d.prototype.extend=function(t){var e=[],n=[];if(t instanceof jd)n.push(t);else if(Array.isArray(t))n=n.concat(t);else{if(!t||!Array.isArray(t.implicit)&&!Array.isArray(t.explicit))throw new Dd("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit))}e.forEach((function(t){if(!(t instanceof jd))throw new Dd("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(t.loadKind&&"scalar"!==t.loadKind)throw new Dd("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(t.multi)throw new Dd("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(t){if(!(t instanceof jd))throw new Dd("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var r=Object.create($d.prototype);return r.implicit=(this.implicit||[]).concat(e),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=Vd(r,"implicit"),r.compiledExplicit=Vd(r,"explicit"),r.compiledTypeMap=Wd(r.compiledImplicit,r.compiledExplicit),r};var Yd=$d,qd=new jd("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),Xd=new jd("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),Jd=new jd("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}}),Zd=new Yd({explicit:[qd,Xd,Jd]});function Kd(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)}function Qd(){return null}function tf(t){return null===t}var ef=new jd("tag:yaml.org,2002:null",{kind:"scalar",resolve:Kd,construct:Qd,predicate:tf,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function nf(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)}function rf(t){return"true"===t||"True"===t||"TRUE"===t}function af(t){return"[object Boolean]"===Object.prototype.toString.call(t)}var sf=new jd("tag:yaml.org,2002:bool",{kind:"scalar",resolve:nf,construct:rf,predicate:af,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function of(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function lf(t){return 48<=t&&t<=55}function cf(t){return 48<=t&&t<=57}function uf(t){if(null===t)return!1;var e,n=t.length,r=0,i=!1;if(!n)return!1;if(("-"===(e=t[r])||"+"===e)&&(e=t[++r]),"0"===e){if(r+1===n)return!0;if("b"===(e=t[++r])){for(r++;r<n;r++)if("_"!==(e=t[r])){if("0"!==e&&"1"!==e)return!1;i=!0}return i&&"_"!==e}if("x"===e){for(r++;r<n;r++)if("_"!==(e=t[r])){if(!of(t.charCodeAt(r)))return!1;i=!0}return i&&"_"!==e}if("o"===e){for(r++;r<n;r++)if("_"!==(e=t[r])){if(!lf(t.charCodeAt(r)))return!1;i=!0}return i&&"_"!==e}}if("_"===e)return!1;for(;r<n;r++)if("_"!==(e=t[r])){if(!cf(t.charCodeAt(r)))return!1;i=!0}return!(!i||"_"===e)}function hf(t){var e,n=t,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),("-"===(e=n[0])||"+"===e)&&("-"===e&&(r=-1),e=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===e){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)}function df(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!Pd.isNegativeZero(t)}var ff=new jd("tag:yaml.org,2002:int",{kind:"scalar",resolve:uf,construct:hf,predicate:df,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),pf=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function mf(t){return!(null===t||!pf.test(t)||"_"===t[t.length-1])}function gf(t){var e,n;return n="-"===(e=t.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),".inf"===e?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===e?NaN:n*parseFloat(e,10)}var yf=/^[-+]?[0-9]+e/;function vf(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Pd.isNegativeZero(t))return"-0.0";return n=t.toString(10),yf.test(n)?n.replace("e",".e"):n}function bf(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||Pd.isNegativeZero(t))}var xf=new jd("tag:yaml.org,2002:float",{kind:"scalar",resolve:mf,construct:gf,predicate:bf,represent:vf,defaultStyle:"lowercase"}),_f=Zd.extend({implicit:[ef,sf,ff,xf]}),wf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Sf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Ef(t){return null!==t&&(null!==wf.exec(t)||null!==Sf.exec(t))}function Mf(t){var e,n,r,i,a,s,o,l,c=0,u=null;if(null===(e=wf.exec(t))&&(e=Sf.exec(t)),null===e)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(a=+e[4],s=+e[5],o=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=6e4*(60*+e[10]+ +(e[11]||0)),"-"===e[9]&&(u=-u)),l=new Date(Date.UTC(n,r,i,a,s,o,c)),u&&l.setTime(l.getTime()-u),l}function Cf(t){return t.toISOString()}var Tf=new jd("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Ef,construct:Mf,instanceOf:Date,represent:Cf});function Af(t){return"<<"===t||null===t}var kf=new jd("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Af}),Lf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";function Pf(t){if(null===t)return!1;var e,n,r=0,i=t.length,a=Lf;for(n=0;n<i;n++)if(!((e=a.indexOf(t.charAt(n)))>64)){if(e<0)return!1;r+=6}return r%8==0}function Rf(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,a=Lf,s=0,o=[];for(e=0;e<i;e++)e%4==0&&e&&(o.push(s>>16&255),o.push(s>>8&255),o.push(255&s)),s=s<<6|a.indexOf(r.charAt(e));return 0==(n=i%4*6)?(o.push(s>>16&255),o.push(s>>8&255),o.push(255&s)):18===n?(o.push(s>>10&255),o.push(s>>2&255)):12===n&&o.push(s>>4&255),new Uint8Array(o)}function If(t){var e,n,r="",i=0,a=t.length,s=Lf;for(e=0;e<a;e++)e%3==0&&e&&(r+=s[i>>18&63],r+=s[i>>12&63],r+=s[i>>6&63],r+=s[63&i]),i=(i<<8)+t[e];return 0==(n=a%3)?(r+=s[i>>18&63],r+=s[i>>12&63],r+=s[i>>6&63],r+=s[63&i]):2===n?(r+=s[i>>10&63],r+=s[i>>4&63],r+=s[i<<2&63],r+=s[64]):1===n&&(r+=s[i>>2&63],r+=s[i<<4&63],r+=s[64],r+=s[64]),r}function Df(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)}var Bf=new jd("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Pf,construct:Rf,predicate:Df,represent:If}),Of=Object.prototype.hasOwnProperty,Nf=Object.prototype.toString;function Ff(t){if(null===t)return!0;var e,n,r,i,a,s=[],o=t;for(e=0,n=o.length;e<n;e+=1){if(r=o[e],a=!1,"[object Object]"!==Nf.call(r))return!1;for(i in r)if(Of.call(r,i)){if(a)return!1;a=!0}if(!a)return!1;if(-1!==s.indexOf(i))return!1;s.push(i)}return!0}function zf(t){return null!==t?t:[]}var Uf=new jd("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Ff,construct:zf}),Gf=Object.prototype.toString;function Hf(t){if(null===t)return!0;var e,n,r,i,a,s=t;for(a=new Array(s.length),e=0,n=s.length;e<n;e+=1){if(r=s[e],"[object Object]"!==Gf.call(r)||1!==(i=Object.keys(r)).length)return!1;a[e]=[i[0],r[i[0]]]}return!0}function jf(t){if(null===t)return[];var e,n,r,i,a,s=t;for(a=new Array(s.length),e=0,n=s.length;e<n;e+=1)r=s[e],i=Object.keys(r),a[e]=[i[0],r[i[0]]];return a}var Vf=new jd("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Hf,construct:jf}),Wf=Object.prototype.hasOwnProperty;function $f(t){if(null===t)return!0;var e,n=t;for(e in n)if(Wf.call(n,e)&&null!==n[e])return!1;return!0}function Yf(t){return null!==t?t:{}}var qf=new jd("tag:yaml.org,2002:set",{kind:"mapping",resolve:$f,construct:Yf}),Xf=_f.extend({implicit:[Tf,kf],explicit:[Bf,Uf,Vf,qf]}),Jf=Object.prototype.hasOwnProperty,Zf=1,Kf=2,Qf=3,tp=4,ep=1,np=2,rp=3,ip=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ap=/[\x85\u2028\u2029]/,sp=/[,\[\]\{\}]/,op=/^(?:!|!!|![a-z\-]+!)$/i,lp=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function cp(t){return Object.prototype.toString.call(t)}function up(t){return 10===t||13===t}function hp(t){return 9===t||32===t}function dp(t){return 9===t||32===t||10===t||13===t}function fp(t){return 44===t||91===t||93===t||123===t||125===t}function pp(t){var e;return 48<=t&&t<=57?t-48:97<=(e=32|t)&&e<=102?e-97+10:-1}function mp(t){return 120===t?2:117===t?4:85===t?8:0}function gp(t){return 48<=t&&t<=57?t-48:-1}function yp(t){return 48===t?"\0":97===t?"\x07":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"\x1b":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"\x85":95===t?"\xa0":76===t?"\u2028":80===t?"\u2029":""}function vp(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var bp=new Array(256),xp=new Array(256),_p=0;_p<256;_p++)bp[_p]=yp(_p)?1:0,xp[_p]=yp(_p);function wp(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Xf,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Sp(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=Fd(n),new Dd(e,n)}function Ep(t,e){throw Sp(t,e)}function Mp(t,e){t.onWarning&&t.onWarning.call(null,Sp(t,e))}var Cp={YAML:function(t,e,n){var r,i,a;null!==t.version&&Ep(t,"duplication of %YAML directive"),1!==n.length&&Ep(t,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Ep(t,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),a=parseInt(r[2],10),1!==i&&Ep(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=a<2,1!==a&&2!==a&&Mp(t,"unsupported YAML version of the document")},TAG:function(t,e,n){var r,i;2!==n.length&&Ep(t,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],op.test(r)||Ep(t,"ill-formed tag handle (first argument) of the TAG directive"),Jf.call(t.tagMap,r)&&Ep(t,'there is a previously declared suffix for "'+r+'" tag handle'),lp.test(i)||Ep(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Ep(t,"tag prefix is malformed: "+i)}t.tagMap[r]=i}};function Tp(t,e,n,r){var i,a,s,o;if(e<n){if(o=t.input.slice(e,n),r)for(i=0,a=o.length;i<a;i+=1)9===(s=o.charCodeAt(i))||32<=s&&s<=1114111||Ep(t,"expected valid JSON character");else ip.test(o)&&Ep(t,"the stream contains non-printable characters");t.result+=o}}function Ap(t,e,n,r){var i,a,s,o;for(Pd.isObject(n)||Ep(t,"cannot merge mappings; the provided source object is unacceptable"),s=0,o=(i=Object.keys(n)).length;s<o;s+=1)a=i[s],Jf.call(e,a)||(e[a]=n[a],r[a]=!0)}function kp(t,e,n,r,i,a,s,o,l){var c,u;if(Array.isArray(i))for(c=0,u=(i=Array.prototype.slice.call(i)).length;c<u;c+=1)Array.isArray(i[c])&&Ep(t,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===cp(i[c])&&(i[c]="[object Object]");if("object"==typeof i&&"[object Object]"===cp(i)&&(i="[object Object]"),i=String(i),null===e&&(e={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(a))for(c=0,u=a.length;c<u;c+=1)Ap(t,e,a[c],n);else Ap(t,e,a,n);else!t.json&&!Jf.call(n,i)&&Jf.call(e,i)&&(t.line=s||t.line,t.lineStart=o||t.lineStart,t.position=l||t.position,Ep(t,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:a}):e[i]=a,delete n[i];return e}function Lp(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):Ep(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Pp(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);0!==i;){for(;hp(i);)9===i&&-1===t.firstTabInLine&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&35===i)do{i=t.input.charCodeAt(++t.position)}while(10!==i&&13!==i&&0!==i);if(!up(i))break;for(Lp(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;32===i;)t.lineIndent++,i=t.input.charCodeAt(++t.position)}return-1!==n&&0!==r&&t.lineIndent<n&&Mp(t,"deficient indentation"),r}function Rp(t){var e,n=t.position;return!(45!==(e=t.input.charCodeAt(n))&&46!==e||e!==t.input.charCodeAt(n+1)||e!==t.input.charCodeAt(n+2)||(n+=3,e=t.input.charCodeAt(n),0!==e&&!dp(e)))}function Ip(t,e){1===e?t.result+=" ":e>1&&(t.result+=Pd.repeat("\n",e-1))}function Dp(t,e,n){var r,i,a,s,o,l,c,u,h=t.kind,d=t.result;if(dp(u=t.input.charCodeAt(t.position))||fp(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u||(63===u||45===u)&&(dp(r=t.input.charCodeAt(t.position+1))||n&&fp(r)))return!1;for(t.kind="scalar",t.result="",i=a=t.position,s=!1;0!==u;){if(58===u){if(dp(r=t.input.charCodeAt(t.position+1))||n&&fp(r))break}else if(35===u){if(dp(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&Rp(t)||n&&fp(u))break;if(up(u)){if(o=t.line,l=t.lineStart,c=t.lineIndent,Pp(t,!1,-1),t.lineIndent>=e){s=!0,u=t.input.charCodeAt(t.position);continue}t.position=a,t.line=o,t.lineStart=l,t.lineIndent=c;break}}s&&(Tp(t,i,a,!1),Ip(t,t.line-o),i=a=t.position,s=!1),hp(u)||(a=t.position+1),u=t.input.charCodeAt(++t.position)}return Tp(t,i,a,!1),!!t.result||(t.kind=h,t.result=d,!1)}function Bp(t,e){var n,r,i;if(39!==(n=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;0!==(n=t.input.charCodeAt(t.position));)if(39===n){if(Tp(t,r,t.position,!0),39!==(n=t.input.charCodeAt(++t.position)))return!0;r=t.position,t.position++,i=t.position}else up(n)?(Tp(t,r,i,!0),Ip(t,Pp(t,!1,e)),r=i=t.position):t.position===t.lineStart&&Rp(t)?Ep(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Ep(t,"unexpected end of the stream within a single quoted scalar")}function Op(t,e){var n,r,i,a,s,o;if(34!==(o=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;0!==(o=t.input.charCodeAt(t.position));){if(34===o)return Tp(t,n,t.position,!0),t.position++,!0;if(92===o){if(Tp(t,n,t.position,!0),up(o=t.input.charCodeAt(++t.position)))Pp(t,!1,e);else if(o<256&&bp[o])t.result+=xp[o],t.position++;else if((s=mp(o))>0){for(i=s,a=0;i>0;i--)(s=pp(o=t.input.charCodeAt(++t.position)))>=0?a=(a<<4)+s:Ep(t,"expected hexadecimal character");t.result+=vp(a),t.position++}else Ep(t,"unknown escape sequence");n=r=t.position}else up(o)?(Tp(t,n,r,!0),Ip(t,Pp(t,!1,e)),n=r=t.position):t.position===t.lineStart&&Rp(t)?Ep(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Ep(t,"unexpected end of the stream within a double quoted scalar")}function Np(t,e){var n,r,i,a,s,o,l,c,u,h,d,f,p=!0,m=t.tag,g=t.anchor,y=Object.create(null);if(91===(f=t.input.charCodeAt(t.position)))s=93,c=!1,a=[];else{if(123!==f)return!1;s=125,c=!0,a={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),f=t.input.charCodeAt(++t.position);0!==f;){if(Pp(t,!0,e),(f=t.input.charCodeAt(t.position))===s)return t.position++,t.tag=m,t.anchor=g,t.kind=c?"mapping":"sequence",t.result=a,!0;p?44===f&&Ep(t,"expected the node content, but found ','"):Ep(t,"missed comma between flow collection entries"),h=u=d=null,o=l=!1,63===f&&dp(t.input.charCodeAt(t.position+1))&&(o=l=!0,t.position++,Pp(t,!0,e)),n=t.line,r=t.lineStart,i=t.position,Vp(t,e,Zf,!1,!0),h=t.tag,u=t.result,Pp(t,!0,e),f=t.input.charCodeAt(t.position),(l||t.line===n)&&58===f&&(o=!0,f=t.input.charCodeAt(++t.position),Pp(t,!0,e),Vp(t,e,Zf,!1,!0),d=t.result),c?kp(t,a,y,h,u,d,n,r,i):o?a.push(kp(t,null,y,h,u,d,n,r,i)):a.push(u),Pp(t,!0,e),44===(f=t.input.charCodeAt(t.position))?(p=!0,f=t.input.charCodeAt(++t.position)):p=!1}Ep(t,"unexpected end of the stream within a flow collection")}function Fp(t,e){var n,r,i,a,s=ep,o=!1,l=!1,c=e,u=0,h=!1;if(124===(a=t.input.charCodeAt(t.position)))r=!1;else{if(62!==a)return!1;r=!0}for(t.kind="scalar",t.result="";0!==a;)if(43===(a=t.input.charCodeAt(++t.position))||45===a)ep===s?s=43===a?rp:np:Ep(t,"repeat of a chomping mode identifier");else{if(!((i=gp(a))>=0))break;0===i?Ep(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?Ep(t,"repeat of an indentation width identifier"):(c=e+i-1,l=!0)}if(hp(a)){do{a=t.input.charCodeAt(++t.position)}while(hp(a));if(35===a)do{a=t.input.charCodeAt(++t.position)}while(!up(a)&&0!==a)}for(;0!==a;){for(Lp(t),t.lineIndent=0,a=t.input.charCodeAt(t.position);(!l||t.lineIndent<c)&&32===a;)t.lineIndent++,a=t.input.charCodeAt(++t.position);if(!l&&t.lineIndent>c&&(c=t.lineIndent),up(a))u++;else{if(t.lineIndent<c){s===rp?t.result+=Pd.repeat("\n",o?1+u:u):s===ep&&o&&(t.result+="\n");break}for(r?hp(a)?(h=!0,t.result+=Pd.repeat("\n",o?1+u:u)):h?(h=!1,t.result+=Pd.repeat("\n",u+1)):0===u?o&&(t.result+=" "):t.result+=Pd.repeat("\n",u):t.result+=Pd.repeat("\n",o?1+u:u),o=!0,l=!0,u=0,n=t.position;!up(a)&&0!==a;)a=t.input.charCodeAt(++t.position);Tp(t,n,t.position,!1)}}return!0}function zp(t,e){var n,r,i=t.tag,a=t.anchor,s=[],o=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=s),r=t.input.charCodeAt(t.position);0!==r&&(-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,Ep(t,"tab characters must not be used in indentation")),45===r&&dp(t.input.charCodeAt(t.position+1)));)if(o=!0,t.position++,Pp(t,!0,-1)&&t.lineIndent<=e)s.push(null),r=t.input.charCodeAt(t.position);else if(n=t.line,Vp(t,e,Qf,!1,!0),s.push(t.result),Pp(t,!0,-1),r=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&0!==r)Ep(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!o&&(t.tag=i,t.anchor=a,t.kind="sequence",t.result=s,!0)}function Up(t,e,n){var r,i,a,s,o,l,c,u=t.tag,h=t.anchor,d={},f=Object.create(null),p=null,m=null,g=null,y=!1,v=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=d),c=t.input.charCodeAt(t.position);0!==c;){if(!y&&-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,Ep(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),a=t.line,63!==c&&58!==c||!dp(r)){if(s=t.line,o=t.lineStart,l=t.position,!Vp(t,n,Kf,!1,!0))break;if(t.line===a){for(c=t.input.charCodeAt(t.position);hp(c);)c=t.input.charCodeAt(++t.position);if(58===c)dp(c=t.input.charCodeAt(++t.position))||Ep(t,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(kp(t,d,f,p,m,null,s,o,l),p=m=g=null),v=!0,y=!1,i=!1,p=t.tag,m=t.result;else{if(!v)return t.tag=u,t.anchor=h,!0;Ep(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!v)return t.tag=u,t.anchor=h,!0;Ep(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(y&&(kp(t,d,f,p,m,null,s,o,l),p=m=g=null),v=!0,y=!0,i=!0):y?(y=!1,i=!0):Ep(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,c=r;if((t.line===a||t.lineIndent>e)&&(y&&(s=t.line,o=t.lineStart,l=t.position),Vp(t,e,tp,!0,i)&&(y?m=t.result:g=t.result),y||(kp(t,d,f,p,m,g,s,o,l),p=m=g=null),Pp(t,!0,-1),c=t.input.charCodeAt(t.position)),(t.line===a||t.lineIndent>e)&&0!==c)Ep(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return y&&kp(t,d,f,p,m,null,s,o,l),v&&(t.tag=u,t.anchor=h,t.kind="mapping",t.result=d),v}function Gp(t){var e,n,r,i,a=!1,s=!1;if(33!==(i=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&Ep(t,"duplication of a tag property"),60===(i=t.input.charCodeAt(++t.position))?(a=!0,i=t.input.charCodeAt(++t.position)):33===i?(s=!0,n="!!",i=t.input.charCodeAt(++t.position)):n="!",e=t.position,a){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&62!==i);t.position<t.length?(r=t.input.slice(e,t.position),i=t.input.charCodeAt(++t.position)):Ep(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!dp(i);)33===i&&(s?Ep(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),op.test(n)||Ep(t,"named tag handle cannot contain such characters"),s=!0,e=t.position+1)),i=t.input.charCodeAt(++t.position);r=t.input.slice(e,t.position),sp.test(r)&&Ep(t,"tag suffix cannot contain flow indicator characters")}r&&!lp.test(r)&&Ep(t,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch{Ep(t,"tag name is malformed: "+r)}return a?t.tag=r:Jf.call(t.tagMap,n)?t.tag=t.tagMap[n]+r:"!"===n?t.tag="!"+r:"!!"===n?t.tag="tag:yaml.org,2002:"+r:Ep(t,'undeclared tag handle "'+n+'"'),!0}function Hp(t){var e,n;if(38!==(n=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&Ep(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!dp(n)&&!fp(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Ep(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function jp(t){var e,n,r;if(42!==(r=t.input.charCodeAt(t.position)))return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!dp(r)&&!fp(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Ep(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Jf.call(t.anchorMap,n)||Ep(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Pp(t,!0,-1),!0}function Vp(t,e,n,r,i){var a,s,o,l,c,u,h,d,f,p=1,m=!1,g=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,a=s=o=tp===n||Qf===n,r&&Pp(t,!0,-1)&&(m=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),1===p)for(;Gp(t)||Hp(t);)Pp(t,!0,-1)?(m=!0,o=a,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):o=!1;if(o&&(o=m||i),(1===p||tp===n)&&(d=Zf===n||Kf===n?e:e+1,f=t.position-t.lineStart,1===p?o&&(zp(t,f)||Up(t,f,d))||Np(t,d)?g=!0:(s&&Fp(t,d)||Bp(t,d)||Op(t,d)?g=!0:jp(t)?(g=!0,(null!==t.tag||null!==t.anchor)&&Ep(t,"alias node should not have any properties")):Dp(t,d,Zf===n)&&(g=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===p&&(g=o&&zp(t,f))),null===t.tag)null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);else if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&Ep(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),l=0,c=t.implicitTypes.length;l<c;l+=1)if((h=t.implicitTypes[l]).resolve(t.result)){t.result=h.construct(t.result),t.tag=h.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else if("!"!==t.tag){if(Jf.call(t.typeMap[t.kind||"fallback"],t.tag))h=t.typeMap[t.kind||"fallback"][t.tag];else for(h=null,l=0,c=(u=t.typeMap.multi[t.kind||"fallback"]).length;l<c;l+=1)if(t.tag.slice(0,u[l].tag.length)===u[l].tag){h=u[l];break}h||Ep(t,"unknown tag !<"+t.tag+">"),null!==t.result&&h.kind!==t.kind&&Ep(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+h.kind+'", not "'+t.kind+'"'),h.resolve(t.result,t.tag)?(t.result=h.construct(t.result,t.tag),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):Ep(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||g}function Wp(t){var e,n,r,i,a=t.position,s=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);0!==(i=t.input.charCodeAt(t.position))&&(Pp(t,!0,-1),i=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==i));){for(s=!0,i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!dp(i);)i=t.input.charCodeAt(++t.position);for(r=[],(n=t.input.slice(e,t.position)).length<1&&Ep(t,"directive name must not be less than one character in length");0!==i;){for(;hp(i);)i=t.input.charCodeAt(++t.position);if(35===i){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&!up(i));break}if(up(i))break;for(e=t.position;0!==i&&!dp(i);)i=t.input.charCodeAt(++t.position);r.push(t.input.slice(e,t.position))}0!==i&&Lp(t),Jf.call(Cp,n)?Cp[n](t,n,r):Mp(t,'unknown document directive "'+n+'"')}Pp(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,Pp(t,!0,-1)):s&&Ep(t,"directives end mark is expected"),Vp(t,t.lineIndent-1,tp,!1,!0),Pp(t,!0,-1),t.checkLineBreaks&&ap.test(t.input.slice(a,t.position))&&Mp(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Rp(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,Pp(t,!0,-1)):t.position<t.length-1&&Ep(t,"end of the stream or a document separator is expected")}function $p(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var n=new wp(t,e),r=t.indexOf("\0");for(-1!==r&&(n.position=r,Ep(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Wp(n);return n.documents}function Yp(t,e,n){null!==e&&"object"==typeof e&&typeof n>"u"&&(n=e,e=null);var r=$p(t,n);if("function"!=typeof e)return r;for(var i=0,a=r.length;i<a;i+=1)e(r[i])}function qp(t,e){var n=$p(t,e);if(0!==n.length){if(1===n.length)return n[0];throw new Dd("expected a single document in the stream, but found more")}}var Xp=Zd,Jp={loadAll:Yp,load:qp}.load;const Zp=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s;function Kp(t,e){var n;const r=t.match(Zp);if(r){const i=Jp(r[1],{schema:Xp});return null!=i&&i.title&&(null==(n=e.setDiagramTitle)||n.call(e,i.title)),t.slice(r[0].length)}return t}const Qp=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,tm=/\s*%%.*\n/gm,em={},nm=function(t,e){t=t.replace(Zp,"").replace(Qp,"").replace(tm,"\n");for(const[n,{detector:r}]of Object.entries(em))if(r(t,e))return n;throw new Error(`No diagram type detected for text: ${t}`)},rm=(t,e,n)=>{if(em[t])throw new Error(`Detector with key ${t} already exists`);em[t]={detector:e,loader:n},f.debug(`Detector with key ${t} added${n?" with loader":""}`)},im=t=>em[t].loader,am=function(t,e,n){const{depth:r,clobber:i}=Object.assign({depth:2,clobber:!1},n);return Array.isArray(e)&&!Array.isArray(t)?(e.forEach((e=>am(t,e,n))),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach((e=>{t.includes(e)||t.push(e)})),t):void 0===t||r<=0?null!=t&&"object"==typeof t&&"object"==typeof e?Object.assign(t,e):e:(void 0!==e&&"object"==typeof t&&"object"==typeof e&&Object.keys(e).forEach((n=>{"object"!=typeof e[n]||void 0!==t[n]&&"object"!=typeof t[n]?(i||"object"!=typeof t[n]&&"object"!=typeof e[n])&&(t[n]=e[n]):(void 0===t[n]&&(t[n]=Array.isArray(e[n])?[]:{}),t[n]=am(t[n],e[n],{depth:r-1,clobber:i}))})),t)},sm=am,om="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;var lm="object"==typeof self&&self&&self.Object===Object&&self;const cm=om||lm||Function("return this")(),um=cm.Symbol;var hm=Object.prototype,dm=hm.hasOwnProperty,fm=hm.toString,pm=um?um.toStringTag:void 0;function mm(t){var e=dm.call(t,pm),n=t[pm];try{t[pm]=void 0;var r=!0}catch{}var i=fm.call(t);return r&&(e?t[pm]=n:delete t[pm]),i}var gm=Object.prototype.toString;function ym(t){return gm.call(t)}var vm="[object Null]",bm="[object Undefined]",xm=um?um.toStringTag:void 0;function _m(t){return null==t?void 0===t?bm:vm:xm&&xm in Object(t)?mm(t):ym(t)}function wm(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var Sm="[object AsyncFunction]",Em="[object Function]",Mm="[object GeneratorFunction]",Cm="[object Proxy]";function Tm(t){if(!wm(t))return!1;var e=_m(t);return e==Em||e==Mm||e==Sm||e==Cm}const Am=cm["__core-js_shared__"];var km=function(){var t=/[^.]+$/.exec(Am&&Am.keys&&Am.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Lm(t){return!!km&&km in t}var Pm=Function.prototype.toString;function Rm(t){if(null!=t){try{return Pm.call(t)}catch{}try{return t+""}catch{}}return""}var Im=/[\\^$.*+?()[\]{}|]/g,Dm=/^\[object .+?Constructor\]$/,Bm=Function.prototype,Om=Object.prototype,Nm=Bm.toString,Fm=Om.hasOwnProperty,zm=RegExp("^"+Nm.call(Fm).replace(Im,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Um(t){return!(!wm(t)||Lm(t))&&(Tm(t)?zm:Dm).test(Rm(t))}function Gm(t,e){return null==t?void 0:t[e]}function Hm(t,e){var n=Gm(t,e);return Um(n)?n:void 0}const jm=Hm(Object,"create");function Vm(){this.__data__=jm?jm(null):{},this.size=0}function Wm(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var $m="__lodash_hash_undefined__",Ym=Object.prototype.hasOwnProperty;function qm(t){var e=this.__data__;if(jm){var n=e[t];return n===$m?void 0:n}return Ym.call(e,t)?e[t]:void 0}var Xm=Object.prototype.hasOwnProperty;function Jm(t){var e=this.__data__;return jm?void 0!==e[t]:Xm.call(e,t)}var Zm="__lodash_hash_undefined__";function Km(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=jm&&void 0===e?Zm:e,this}function Qm(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function tg(){this.__data__=[],this.size=0}function eg(t,e){return t===e||t!=t&&e!=e}function ng(t,e){for(var n=t.length;n--;)if(eg(t[n][0],e))return n;return-1}Qm.prototype.clear=Vm,Qm.prototype.delete=Wm,Qm.prototype.get=qm,Qm.prototype.has=Jm,Qm.prototype.set=Km;var rg=Array.prototype.splice;function ig(t){var e=this.__data__,n=ng(e,t);return!(n<0||(n==e.length-1?e.pop():rg.call(e,n,1),--this.size,0))}function ag(t){var e=this.__data__,n=ng(e,t);return n<0?void 0:e[n][1]}function sg(t){return ng(this.__data__,t)>-1}function og(t,e){var n=this.__data__,r=ng(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function lg(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}lg.prototype.clear=tg,lg.prototype.delete=ig,lg.prototype.get=ag,lg.prototype.has=sg,lg.prototype.set=og;const cg=Hm(cm,"Map");function ug(){this.size=0,this.__data__={hash:new Qm,map:new(cg||lg),string:new Qm}}function hg(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function dg(t,e){var n=t.__data__;return hg(e)?n["string"==typeof e?"string":"hash"]:n.map}function fg(t){var e=dg(this,t).delete(t);return this.size-=e?1:0,e}function pg(t){return dg(this,t).get(t)}function mg(t){return dg(this,t).has(t)}function gg(t,e){var n=dg(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function yg(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}yg.prototype.clear=ug,yg.prototype.delete=fg,yg.prototype.get=pg,yg.prototype.has=mg,yg.prototype.set=gg;var vg="Expected a function";function bg(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(vg);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(bg.Cache||yg),n}bg.Cache=yg;const xg={curveBasis:Xc,curveBasisClosed:Zc,curveBasisOpen:Qc,curveLinear:zc,curveLinearClosed:eu,curveMonotoneX:cu,curveMonotoneY:uu,curveNatural:fu,curveStep:mu,curveStepAfter:yu,curveStepBefore:gu},_g=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,wg=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Sg=function(t,e){const n=Eg(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(n)){const t=n.map((t=>t.args));Yg(t),r=sm(r,[...t])}else r=n.args;if(r){let n=nm(t,e);["config"].forEach((t=>{void 0!==r[t]&&("flowchart-v2"===n&&(n="flowchart"),r[n]=r[t],delete r[t])}))}return r},Eg=function(t,e=null){try{const n=new RegExp(`[%]{2}(?![{]${wg.source})(?=[}][%]{2}).*\n`,"ig");let r;t=t.trim().replace(n,"").replace(/'/gm,'"'),f.debug(`Detecting diagram directive${null!==e?" type:"+e:""} based on the text:${t}`);const i=[];for(;null!==(r=_g.exec(t));)if(r.index===_g.lastIndex&&_g.lastIndex++,r&&!e||e&&r[1]&&r[1].match(e)||e&&r[2]&&r[2].match(e)){const t=r[1]?r[1]:r[2],e=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;i.push({type:t,args:e})}return 0===i.length&&i.push({type:t,args:null}),1===i.length?i[0]:i}catch(n){return f.error(`ERROR: ${n.message} - Unable to parse directive\n      ${null!==e?" type:"+e:""} based on the text:${t}`),{type:null,args:null}}},Mg=function(t,e){for(const[n,r]of e.entries())if(r.match(t))return n;return-1};function Cg(t,e){if(!t)return e;const n=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return xg[n]||e}function Tg(t,e){const n=t.trim();if(n)return"loose"!==e.securityLevel?y(n):n}const Ag=(t,...e)=>{const n=t.split("."),r=n.length-1,i=n[r];let a=window;for(let s=0;s<r;s++)if(a=a[n[s]],!a)return;a[i](...e)};function kg(t,e){return t&&e?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0}function Lg(t){let e,n=0;t.forEach((t=>{n+=kg(t,e),e=t}));let r,i=n/2;return e=void 0,t.forEach((t=>{if(e&&!r){const n=kg(t,e);if(n<i)i-=n;else{const a=i/n;a<=0&&(r=e),a>=1&&(r={x:t.x,y:t.y}),a>0&&a<1&&(r={x:(1-a)*e.x+a*t.x,y:(1-a)*e.y+a*t.y})}}e=t})),r}function Pg(t){return 1===t.length?t[0]:Lg(t)}const Rg=(t,e,n)=>{let r;f.info(`our points ${JSON.stringify(e)}`),e[0]!==n&&(e=e.reverse());let i,a=25;r=void 0,e.forEach((t=>{if(r&&!i){const e=kg(t,r);if(e<a)a-=e;else{const n=a/e;n<=0&&(i=r),n>=1&&(i={x:t.x,y:t.y}),n>0&&n<1&&(i={x:(1-n)*r.x+n*t.x,y:(1-n)*r.y+n*t.y})}}r=t}));const s=t?10:5,o=Math.atan2(e[0].y-i.y,e[0].x-i.x),l={x:0,y:0};return l.x=Math.sin(o)*s+(e[0].x+i.x)/2,l.y=-Math.cos(o)*s+(e[0].y+i.y)/2,l};function Ig(t,e,n){let r,i=JSON.parse(JSON.stringify(n));f.info("our points",i),"start_left"!==e&&"start_right"!==e&&(i=i.reverse()),i.forEach((t=>{r=t}));let a,s=25+t;r=void 0,i.forEach((t=>{if(r&&!a){const e=kg(t,r);if(e<s)s-=e;else{const n=s/e;n<=0&&(a=r),n>=1&&(a={x:t.x,y:t.y}),n>0&&n<1&&(a={x:(1-n)*r.x+n*t.x,y:(1-n)*r.y+n*t.y})}}r=t}));const o=10+.5*t,l=Math.atan2(i[0].y-a.y,i[0].x-a.x),c={x:0,y:0};return c.x=Math.sin(l)*o+(i[0].x+a.x)/2,c.y=-Math.cos(l)*o+(i[0].y+a.y)/2,"start_left"===e&&(c.x=Math.sin(l+Math.PI)*o+(i[0].x+a.x)/2,c.y=-Math.cos(l+Math.PI)*o+(i[0].y+a.y)/2),"end_right"===e&&(c.x=Math.sin(l-Math.PI)*o+(i[0].x+a.x)/2-5,c.y=-Math.cos(l-Math.PI)*o+(i[0].y+a.y)/2-5),"end_left"===e&&(c.x=Math.sin(l)*o+(i[0].x+a.x)/2-5,c.y=-Math.cos(l)*o+(i[0].y+a.y)/2-5),c}function Dg(t){let e="",n="";for(const r of t)void 0!==r&&(r.startsWith("color:")||r.startsWith("text-align:")?n=n+r+";":e=e+r+";");return{style:e,labelStyle:n}}let Bg=0;const Og=()=>(Bg++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Bg);function Ng(t){let e="";const n="0123456789abcdef",r=n.length;for(let i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*r));return e}const Fg=t=>Ng(t.length),zg=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0}},Ug=function(t,e){const n=e.text.replace(Oh.lineBreakRegex," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.style("text-anchor",e.anchor),r.style("font-family",e.fontFamily),r.style("font-size",e.fontSize),r.style("font-weight",e.fontWeight),r.attr("fill",e.fill),void 0!==e.class&&r.attr("class",e.class);const i=r.append("tspan");return i.attr("x",e.x+2*e.textMargin),i.attr("fill",e.fill),i.text(n),r},Gg=bg(((t,e,n)=>{if(!t||(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),Oh.lineBreakRegex.test(t)))return t;const r=t.split(" "),i=[];let a="";return r.forEach(((t,s)=>{const o=Vg(`${t} `,n),l=Vg(a,n);if(o>e){const{hyphenatedStrings:r,remainingWord:s}=Hg(t,e,"-",n);i.push(a,...r),a=s}else l+o>=e?(i.push(a),a=t):a=[a,t].filter(Boolean).join(" ");s+1===r.length&&i.push(a)})),i.filter((t=>""!==t)).join(n.joinWith)}),((t,e,n)=>`${t}${e}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`)),Hg=bg(((t,e,n="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const i=[...t],a=[];let s="";return i.forEach(((t,o)=>{const l=`${s}${t}`;if(Vg(l,r)>=e){const t=o+1,e=i.length===t,r=`${l}${n}`;a.push(e?l:r),s=""}else s=l})),{hyphenatedStrings:a,remainingWord:s}}),((t,e,n="-",r)=>`${t}${e}${n}${r.fontSize}${r.fontWeight}${r.fontFamily}`));function jg(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},e),Wg(t,e).height}function Vg(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e),Wg(t,e).width}const Wg=bg(((t,e)=>{e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e);const{fontSize:n,fontFamily:r,fontWeight:i}=e;if(!t)return{width:0,height:0};const a=["sans-serif",r],s=t.split(Oh.lineBreakRegex),o=[],l=dn("body");if(!l.remove)return{width:0,height:0,lineHeight:0};const c=l.append("svg");for(const u of a){let t=0;const e={width:0,height:0,lineHeight:0};for(const r of s){const a=zg();a.text=r;const s=Ug(c,a).style("font-size",n).style("font-weight",i).style("font-family",u),o=(s._groups||s)[0][0].getBBox();e.width=Math.round(Math.max(e.width,o.width)),t=Math.round(o.height),e.height+=t,e.lineHeight=Math.round(Math.max(e.lineHeight,t))}o.push(e)}return c.remove(),o[isNaN(o[1].height)||isNaN(o[1].width)||isNaN(o[1].lineHeight)||o[0].height>o[1].height&&o[0].width>o[1].width&&o[0].lineHeight>o[1].lineHeight?0:1]}),((t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`));let $g;const Yg=t=>{if(f.debug("directiveSanitizer called with",t),"object"==typeof t&&(t.length?t.forEach((t=>Yg(t))):Object.keys(t).forEach((e=>{f.debug("Checking key",e),e.startsWith("__")&&(f.debug("sanitize deleting __ option",e),delete t[e]),e.includes("proto")&&(f.debug("sanitize deleting proto option",e),delete t[e]),e.includes("constr")&&(f.debug("sanitize deleting constr option",e),delete t[e]),e.includes("themeCSS")&&(f.debug("sanitizing themeCss option"),t[e]=qg(t[e])),e.includes("fontFamily")&&(f.debug("sanitizing fontFamily option"),t[e]=qg(t[e])),e.includes("altFontFamily")&&(f.debug("sanitizing altFontFamily option"),t[e]=qg(t[e])),Sd.includes(e)?"object"==typeof t[e]&&(f.debug("sanitize deleting object",e),Yg(t[e])):(f.debug("sanitize deleting option",e),delete t[e])}))),t.themeVariables){const e=Object.keys(t.themeVariables);for(const n of e){const e=t.themeVariables[n];e&&e.match&&!e.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[n]="")}}f.debug("After sanitization",t)},qg=t=>{let e=0,n=0;for(const r of t){if(e<n)return"{ /* ERROR: Unbalanced CSS */ }";"{"===r?e++:"}"===r&&n++}return e!==n?"{ /* ERROR: Unbalanced CSS */ }":t};function Xg(t){return"str"in t}function Jg(t){return t instanceof Error?t.message:String(t)}const Zg={assignWithDepth:sm,wrapLabel:Gg,calculateTextHeight:jg,calculateTextWidth:Vg,calculateTextDimensions:Wg,detectInit:Sg,detectDirective:Eg,isSubstringInArray:Mg,interpolateToCurve:Cg,calcLabelPosition:Pg,calcCardinalityPosition:Rg,calcTerminalLabelPosition:Ig,formatUrl:Tg,getStylesFromArray:Dg,generateId:Og,random:Fg,runFunc:Ag,entityDecode:function(t){return $g=$g||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),$g.innerHTML=t,unescape($g.textContent)},initIdGenerator:class{constructor(t,e){this.deterministic=t,this.seed=e,this.count=e?e.length:0}next(){return this.deterministic?this.count++:Date.now()}},directiveSanitizer:Yg,sanitizeCss:qg,insertTitle:(t,e,n,r)=>{if(!r)return;const i=t.node().getBBox();t.append("text").text(r).attr("x",i.x+i.width/2).attr("y",-n).attr("class",e)}};var Kg="comm",Qg="rule",ty="decl",ey="@import",ny="@keyframes",ry=Math.abs,iy=String.fromCharCode;function ay(t){return t.trim()}function sy(t,e,n){return t.replace(e,n)}function oy(t,e){return t.indexOf(e)}function ly(t,e){return 0|t.charCodeAt(e)}function cy(t,e,n){return t.slice(e,n)}function uy(t){return t.length}function hy(t){return t.length}function dy(t,e){return e.push(t),t}var fy=1,py=1,my=0,gy=0,yy=0,vy="";function by(t,e,n,r,i,a,s){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:fy,column:py,length:s,return:""}}function xy(){return yy}function _y(){return yy=gy>0?ly(vy,--gy):0,py--,10===yy&&(py=1,fy--),yy}function wy(){return yy=gy<my?ly(vy,gy++):0,py++,10===yy&&(py=1,fy++),yy}function Sy(){return ly(vy,gy)}function Ey(){return gy}function My(t,e){return cy(vy,t,e)}function Cy(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ty(t){return fy=py=1,my=uy(vy=t),gy=0,[]}function Ay(t){return vy="",t}function ky(t){return ay(My(gy-1,Ry(91===t?t+2:40===t?t+1:t)))}function Ly(t){for(;(yy=Sy())&&yy<33;)wy();return Cy(t)>2||Cy(yy)>3?"":" "}function Py(t,e){for(;--e&&wy()&&!(yy<48||yy>102||yy>57&&yy<65||yy>70&&yy<97););return My(t,Ey()+(e<6&&32==Sy()&&32==wy()))}function Ry(t){for(;wy();)switch(yy){case t:return gy;case 34:case 39:34!==t&&39!==t&&Ry(yy);break;case 40:41===t&&Ry(t);break;case 92:wy()}return gy}function Iy(t,e){for(;wy()&&t+yy!==57&&(t+yy!==84||47!==Sy()););return"/*"+My(e,gy-1)+"*"+iy(47===t?t:wy())}function Dy(t){for(;!Cy(Sy());)wy();return My(t,gy)}function By(t){return Ay(Oy("",null,null,null,[""],t=Ty(t),0,[0],t))}function Oy(t,e,n,r,i,a,s,o,l){for(var c=0,u=0,h=s,d=0,f=0,p=0,m=1,g=1,y=1,v=0,b="",x=i,_=a,w=r,S=b;g;)switch(p=v,v=wy()){case 40:if(108!=p&&58==ly(S,h-1)){-1!=oy(S+=sy(ky(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:S+=ky(v);break;case 9:case 10:case 13:case 32:S+=Ly(p);break;case 92:S+=Py(Ey()-1,7);continue;case 47:switch(Sy()){case 42:case 47:dy(Fy(Iy(wy(),Ey()),e,n),l);break;default:S+="/"}break;case 123*m:o[c++]=uy(S)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:f>0&&uy(S)-h&&dy(f>32?zy(S+";",r,n,h-1):zy(sy(S," ","")+";",r,n,h-2),l);break;case 59:S+=";";default:if(dy(w=Ny(S,e,n,c,u,i,o,b,x=[],_=[],h),a),123===v)if(0===u)Oy(S,e,w,w,x,a,h,o,_);else switch(d){case 100:case 109:case 115:Oy(t,w,w,r&&dy(Ny(t,w,w,0,0,i,o,b,i,x=[],h),_),i,_,h,o,r?x:_);break;default:Oy(S,w,w,w,[""],_,0,o,_)}}c=u=f=0,m=y=1,b=S="",h=s;break;case 58:h=1+uy(S),f=p;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==_y())continue;switch(S+=iy(v),v*m){case 38:y=u>0?1:(S+="\f",-1);break;case 44:o[c++]=(uy(S)-1)*y,y=1;break;case 64:45===Sy()&&(S+=ky(wy())),d=Sy(),u=h=uy(b=S+=Dy(Ey())),v++;break;case 45:45===p&&2==uy(S)&&(m=0)}}return a}function Ny(t,e,n,r,i,a,s,o,l,c,u){for(var h=i-1,d=0===i?a:[""],f=hy(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=cy(t,h+1,h=ry(m=s[p])),b=t;y<f;++y)(b=ay(m>0?d[y]+" "+v:sy(v,/&\f/g,d[y])))&&(l[g++]=b);return by(t,e,n,0===i?Qg:o,l,c,u)}function Fy(t,e,n){return by(t,e,n,Kg,iy(xy()),cy(t,2,-2),0)}function zy(t,e,n,r){return by(t,e,n,ty,cy(t,0,r),cy(t,r+1,-1),r)}function Uy(t,e){for(var n="",r=hy(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function Gy(t,e,n,r){switch(t.type){case ey:case ty:return t.return=t.return||t.value;case Kg:return"";case ny:return t.return=t.value+"{"+Uy(t.children,r)+"}";case Qg:t.value=t.props.join(",")}return uy(n=Uy(t.children,r))?t.return=t.value+"{"+n+"}":""}const Hy={name:"mermaid",version:"9.3.0",description:"Markdown-ish syntax for generating flowcharts, sequence diagrams, class diagrams, gantt charts and git graphs.",main:"./dist/mermaid.min.js",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{require:"./dist/mermaid.min.js",import:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph"],scripts:{clean:"rimraf dist","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaidAPI.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts","docs:verify":"pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts --verify","docs:pre:vitepress":"rimraf src/vitepress && pnpm docs:code && ts-node-esm src/docs.mts --vitepress","docs:build:vitepress":"pnpm docs:pre:vitepress && vitepress build src/vitepress","docs:dev":'pnpm docs:pre:vitepress && concurrently "vitepress dev src/vitepress" "ts-node-esm src/docs.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell --config ../../cSpell.json "src/docs/**/*.md"',release:"pnpm build",prepublishOnly:"pnpm -w run build"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^6.0.0",d3:"^7.0.0","dagre-d3-es":"7.0.6",dompurify:"2.4.1",khroma:"^2.0.0","lodash-es":"^4.17.21","moment-mini":"^2.24.0","non-layered-tidy-tree-layout":"^2.0.2",stylis:"^4.1.2",uuid:"^9.0.0"},devDependencies:{"@types/d3":"^7.4.0","@types/dompurify":"^2.4.0","@types/jsdom":"^20.0.1","@types/lodash-es":"^4.17.6","@types/micromatch":"^4.0.2","@types/prettier":"^2.7.1","@types/stylis":"^4.0.2","@types/uuid":"^8.3.4","@typescript-eslint/eslint-plugin":"^5.42.1","@typescript-eslint/parser":"^5.42.1",chokidar:"^3.5.3",concurrently:"^7.5.0",coveralls:"^3.1.1",cspell:"^6.14.3",globby:"^13.1.2",jison:"^0.4.18","js-base64":"^3.7.2",jsdom:"^20.0.2",micromatch:"^4.0.5",moment:"^2.29.4","path-browserify":"^1.0.1",prettier:"^2.7.1",remark:"^14.0.2",rimraf:"^3.0.2","start-server-and-test":"^1.14.0",typedoc:"^0.23.18","typedoc-plugin-markdown":"^3.13.6",typescript:"^4.8.4","unist-util-flatmap":"^1.0.0",vitepress:"^1.0.0-alpha.28","vitepress-plugin-search":"^1.0.4-alpha.15"},files:["dist","README.md"],sideEffects:["**/*.css","**/*.scss"]},jy=Object.freeze(Ed);let Vy,Wy=sm({},jy),$y=[],Yy=sm({},jy);const qy=(t,e)=>{let n=sm({},t),r={};for(const i of e)ev(i),r=sm(r,i);if(n=sm(n,r),r.theme&&r.theme in xd){const t=sm({},Vy),e=sm(t.themeVariables||{},r.themeVariables);n.theme&&n.theme in xd&&(n.themeVariables=xd[n.theme].getThemeVariables(e))}return Yy=n,ov(Yy),Yy},Xy=t=>(Wy=sm({},jy),Wy=sm(Wy,t),t.theme&&xd[t.theme]&&(Wy.themeVariables=xd[t.theme].getThemeVariables(t.themeVariables)),qy(Wy,$y),Wy),Jy=t=>{Vy=sm({},t)},Zy=t=>(Wy=sm(Wy,t),qy(Wy,$y),Wy),Ky=()=>sm({},Wy),Qy=t=>(ov(t),sm(Yy,t),tv()),tv=()=>sm({},Yy),ev=t=>{var e;["secure",...null!=(e=Wy.secure)?e:[]].forEach((e=>{void 0!==t[e]&&(f.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])})),Object.keys(t).forEach((e=>{0===e.indexOf("__")&&delete t[e]})),Object.keys(t).forEach((e=>{"string"==typeof t[e]&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],"object"==typeof t[e]&&ev(t[e])}))},nv=t=>{t.fontFamily&&(t.themeVariables&&t.themeVariables.fontFamily||(t.themeVariables={fontFamily:t.fontFamily})),$y.push(t),qy(Wy,$y)},rv=(t=Wy)=>{$y=[],qy(t,$y)};var iv=(t=>(t.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",t))(iv||{});const av={},sv=t=>{av[t]||(f.warn(iv[t]),av[t]=!0)},ov=t=>{!t||(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&sv("LAZY_LOAD_DEPRECATED")},lv=function(t,e){for(let n of e)t.attr(n[0],n[1])},cv=function(t,e,n){let r=new Map;return n?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):(r.set("height",t),r.set("width",e)),r},uv=function(t,e,n,r){const i=cv(e,n,r);lv(t,i)},hv=function(t,e,n,r){const i=e.node().getBBox(),a=i.width,s=i.height;f.info(`SVG bounds: ${a}x${s}`,i);let o=0,l=0;f.info(`Graph bounds: ${o}x${l}`,t),o=a+2*n,l=s+2*n,f.info(`Calculated bounds: ${o}x${l}`),uv(e,l,o,r);const c=`${i.x-n} ${i.y-n} ${i.width+2*n} ${i.height+2*n}`;e.attr("viewBox",c)},dv=t=>`g.classGroup text {\n  fill: ${t.nodeBorder};\n  fill: ${t.classText};\n  stroke: none;\n  font-family: ${t.fontFamily};\n  font-size: 10px;\n\n  .title {\n    font-weight: bolder;\n  }\n\n}\n\n.nodeLabel, .edgeLabel {\n  color: ${t.classText};\n}\n.edgeLabel .label rect {\n  fill: ${t.mainBkg};\n}\n.label text {\n  fill: ${t.classText};\n}\n.edgeLabel .label span {\n  background: ${t.mainBkg};\n}\n\n.classTitle {\n  font-weight: bolder;\n}\n.node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n    stroke-width: 1px;\n  }\n\n\n.divider {\n  stroke: ${t.nodeBorder};\n  stroke: 1;\n}\n\ng.clickable {\n  cursor: pointer;\n}\n\ng.classGroup rect {\n  fill: ${t.mainBkg};\n  stroke: ${t.nodeBorder};\n}\n\ng.classGroup line {\n  stroke: ${t.nodeBorder};\n  stroke-width: 1;\n}\n\n.classLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${t.mainBkg};\n  opacity: 0.5;\n}\n\n.classLabel .label {\n  fill: ${t.nodeBorder};\n  font-size: 10px;\n}\n\n.relation {\n  stroke: ${t.lineColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.dashed-line{\n  stroke-dasharray: 3;\n}\n\n.dotted-line{\n  stroke-dasharray: 1 2;\n}\n\n#compositionStart, .composition {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#compositionEnd, .composition {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionStart, .extension {\n  fill: ${t.mainBkg} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionEnd, .extension {\n  fill: ${t.mainBkg} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationStart, .aggregation {\n  fill: ${t.mainBkg} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationEnd, .aggregation {\n  fill: ${t.mainBkg} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopStart, .lollipop {\n  fill: ${t.mainBkg} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopEnd, .lollipop {\n  fill: ${t.mainBkg} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n.edgeTerminals {\n  font-size: 11px;\n}\n\n.classTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${t.textColor};\n}\n`,fv=t=>`\n  .entityBox {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n  }\n\n  .attributeBoxOdd {\n    fill: ${t.attributeBackgroundColorOdd};\n    stroke: ${t.nodeBorder};\n  }\n\n  .attributeBoxEven {\n    fill:  ${t.attributeBackgroundColorEven};\n    stroke: ${t.nodeBorder};\n  }\n\n  .relationshipLabelBox {\n    fill: ${t.tertiaryColor};\n    opacity: 0.7;\n    background-color: ${t.tertiaryColor};\n      rect {\n        opacity: 0.5;\n      }\n  }\n\n    .relationshipLine {\n      stroke: ${t.lineColor};\n    }\n\n  .entityTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${t.textColor};\n  }    \n`,pv=()=>"",mv=t=>`.label {\n    font-family: ${t.fontFamily};\n    color: ${t.nodeTextColor||t.textColor};\n  }\n  .cluster-label text {\n    fill: ${t.titleColor};\n  }\n  .cluster-label span {\n    color: ${t.titleColor};\n  }\n\n  .label text,span {\n    fill: ${t.nodeTextColor||t.textColor};\n    color: ${t.nodeTextColor||t.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${t.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${t.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${t.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${t.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n      background-color: ${t.edgeLabelBackground};\n      fill: ${t.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n    fill: ${t.clusterBkg};\n    stroke: ${t.clusterBorder};\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${t.titleColor};\n  }\n\n  .cluster span {\n    color: ${t.titleColor};\n  }\n  /* .cluster div {\n    color: ${t.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${t.fontFamily};\n    font-size: 12px;\n    background: ${t.tertiaryColor};\n    border: 1px solid ${t.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${t.textColor};\n  }\n`,gv=t=>`\n  .mermaid-main-font {\n    font-family: "trebuchet ms", verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  .exclude-range {\n    fill: ${t.excludeBkgColor};\n  }\n\n  .section {\n    stroke: none;\n    opacity: 0.2;\n  }\n\n  .section0 {\n    fill: ${t.sectionBkgColor};\n  }\n\n  .section2 {\n    fill: ${t.sectionBkgColor2};\n  }\n\n  .section1,\n  .section3 {\n    fill: ${t.altSectionBkgColor};\n    opacity: 0.2;\n  }\n\n  .sectionTitle0 {\n    fill: ${t.titleColor};\n  }\n\n  .sectionTitle1 {\n    fill: ${t.titleColor};\n  }\n\n  .sectionTitle2 {\n    fill: ${t.titleColor};\n  }\n\n  .sectionTitle3 {\n    fill: ${t.titleColor};\n  }\n\n  .sectionTitle {\n    text-anchor: start;\n    // font-size: ${t.ganttFontSize};\n    // text-height: 14px;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n\n  }\n\n\n  /* Grid and axis */\n\n  .grid .tick {\n    stroke: ${t.gridColor};\n    opacity: 0.8;\n    shape-rendering: crispEdges;\n    text {\n      font-family: ${t.fontFamily};\n      fill: ${t.textColor};\n    }\n  }\n\n  .grid path {\n    stroke-width: 0;\n  }\n\n\n  /* Today line */\n\n  .today {\n    fill: none;\n    stroke: ${t.todayLineColor};\n    stroke-width: 2px;\n  }\n\n\n  /* Task styling */\n\n  /* Default task */\n\n  .task {\n    stroke-width: 2;\n  }\n\n  .taskText {\n    text-anchor: middle;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n\n  // .taskText:not([font-size]) {\n  //   font-size: ${t.ganttFontSize};\n  // }\n\n  .taskTextOutsideRight {\n    fill: ${t.taskTextDarkColor};\n    text-anchor: start;\n    // font-size: ${t.ganttFontSize};\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n\n  }\n\n  .taskTextOutsideLeft {\n    fill: ${t.taskTextDarkColor};\n    text-anchor: end;\n    // font-size: ${t.ganttFontSize};\n  }\n\n  /* Special case clickable */\n  .task.clickable {\n    cursor: pointer;\n  }\n  .taskText.clickable {\n    cursor: pointer;\n    fill: ${t.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideLeft.clickable {\n    cursor: pointer;\n    fill: ${t.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideRight.clickable {\n    cursor: pointer;\n    fill: ${t.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  /* Specific task settings for the sections*/\n\n  .taskText0,\n  .taskText1,\n  .taskText2,\n  .taskText3 {\n    fill: ${t.taskTextColor};\n  }\n\n  .task0,\n  .task1,\n  .task2,\n  .task3 {\n    fill: ${t.taskBkgColor};\n    stroke: ${t.taskBorderColor};\n  }\n\n  .taskTextOutside0,\n  .taskTextOutside2\n  {\n    fill: ${t.taskTextOutsideColor};\n  }\n\n  .taskTextOutside1,\n  .taskTextOutside3 {\n    fill: ${t.taskTextOutsideColor};\n  }\n\n\n  /* Active task */\n\n  .active0,\n  .active1,\n  .active2,\n  .active3 {\n    fill: ${t.activeTaskBkgColor};\n    stroke: ${t.activeTaskBorderColor};\n  }\n\n  .activeText0,\n  .activeText1,\n  .activeText2,\n  .activeText3 {\n    fill: ${t.taskTextDarkColor} !important;\n  }\n\n\n  /* Completed task */\n\n  .done0,\n  .done1,\n  .done2,\n  .done3 {\n    stroke: ${t.doneTaskBorderColor};\n    fill: ${t.doneTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneText0,\n  .doneText1,\n  .doneText2,\n  .doneText3 {\n    fill: ${t.taskTextDarkColor} !important;\n  }\n\n\n  /* Tasks on the critical line */\n\n  .crit0,\n  .crit1,\n  .crit2,\n  .crit3 {\n    stroke: ${t.critBorderColor};\n    fill: ${t.critBkgColor};\n    stroke-width: 2;\n  }\n\n  .activeCrit0,\n  .activeCrit1,\n  .activeCrit2,\n  .activeCrit3 {\n    stroke: ${t.critBorderColor};\n    fill: ${t.activeTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneCrit0,\n  .doneCrit1,\n  .doneCrit2,\n  .doneCrit3 {\n    stroke: ${t.critBorderColor};\n    fill: ${t.doneTaskBkgColor};\n    stroke-width: 2;\n    cursor: pointer;\n    shape-rendering: crispEdges;\n  }\n\n  .milestone {\n    transform: rotate(45deg) scale(0.8,0.8);\n  }\n\n  .milestoneText {\n    font-style: italic;\n  }\n  .doneCritText0,\n  .doneCritText1,\n  .doneCritText2,\n  .doneCritText3 {\n    fill: ${t.taskTextDarkColor} !important;\n  }\n\n  .activeCritText0,\n  .activeCritText1,\n  .activeCritText2,\n  .activeCritText3 {\n    fill: ${t.taskTextDarkColor} !important;\n  }\n\n  .titleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${t.textColor}    ;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n`,yv=()=>"",vv=t=>`\n  .pieCircle{\n    stroke: ${t.pieStrokeColor};\n    stroke-width : ${t.pieStrokeWidth};\n    opacity : ${t.pieOpacity};\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${t.pieTitleTextSize};\n    fill: ${t.pieTitleTextColor};\n    font-family: ${t.fontFamily};\n  }\n  .slice {\n    font-family: ${t.fontFamily};\n    fill: ${t.pieSectionTextColor};\n    font-size:${t.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${t.pieLegendTextColor};\n    font-family: ${t.fontFamily};\n    font-size: ${t.pieLegendTextSize};\n  }\n`,bv=t=>`\n\n  marker {\n    fill: ${t.relationColor};\n    stroke: ${t.relationColor};\n  }\n\n  marker.cross {\n    stroke: ${t.lineColor};\n  }\n\n  svg {\n    font-family: ${t.fontFamily};\n    font-size: ${t.fontSize};\n  }\n\n  .reqBox {\n    fill: ${t.requirementBackground};\n    fill-opacity: 100%;\n    stroke: ${t.requirementBorderColor};\n    stroke-width: ${t.requirementBorderSize};\n  }\n  \n  .reqTitle, .reqLabel{\n    fill:  ${t.requirementTextColor};\n  }\n  .reqLabelBox {\n    fill: ${t.relationLabelBackground};\n    fill-opacity: 100%;\n  }\n\n  .req-title-line {\n    stroke: ${t.requirementBorderColor};\n    stroke-width: ${t.requirementBorderSize};\n  }\n  .relationshipLine {\n    stroke: ${t.relationColor};\n    stroke-width: 1;\n  }\n  .relationshipLabel {\n    fill: ${t.relationLabelColor};\n  }\n\n`,xv=t=>`.actor {\n    stroke: ${t.actorBorder};\n    fill: ${t.actorBkg};\n  }\n\n  text.actor > tspan {\n    fill: ${t.actorTextColor};\n    stroke: none;\n  }\n\n  .actor-line {\n    stroke: ${t.actorLineColor};\n  }\n\n  .messageLine0 {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n    stroke: ${t.signalColor};\n  }\n\n  .messageLine1 {\n    stroke-width: 1.5;\n    stroke-dasharray: 2, 2;\n    stroke: ${t.signalColor};\n  }\n\n  #arrowhead path {\n    fill: ${t.signalColor};\n    stroke: ${t.signalColor};\n  }\n\n  .sequenceNumber {\n    fill: ${t.sequenceNumberColor};\n  }\n\n  #sequencenumber {\n    fill: ${t.signalColor};\n  }\n\n  #crosshead path {\n    fill: ${t.signalColor};\n    stroke: ${t.signalColor};\n  }\n\n  .messageText {\n    fill: ${t.signalTextColor};\n    stroke: none;\n  }\n\n  .labelBox {\n    stroke: ${t.labelBoxBorderColor};\n    fill: ${t.labelBoxBkgColor};\n  }\n\n  .labelText, .labelText > tspan {\n    fill: ${t.labelTextColor};\n    stroke: none;\n  }\n\n  .loopText, .loopText > tspan {\n    fill: ${t.loopTextColor};\n    stroke: none;\n  }\n\n  .loopLine {\n    stroke-width: 2px;\n    stroke-dasharray: 2, 2;\n    stroke: ${t.labelBoxBorderColor};\n    fill: ${t.labelBoxBorderColor};\n  }\n\n  .note {\n    //stroke: #decc93;\n    stroke: ${t.noteBorderColor};\n    fill: ${t.noteBkgColor};\n  }\n\n  .noteText, .noteText > tspan {\n    fill: ${t.noteTextColor};\n    stroke: none;\n  }\n\n  .activation0 {\n    fill: ${t.activationBkgColor};\n    stroke: ${t.activationBorderColor};\n  }\n\n  .activation1 {\n    fill: ${t.activationBkgColor};\n    stroke: ${t.activationBorderColor};\n  }\n\n  .activation2 {\n    fill: ${t.activationBkgColor};\n    stroke: ${t.activationBorderColor};\n  }\n\n  .actorPopupMenu {\n    position: absolute;\n  }\n\n  .actorPopupMenuPanel {\n    position: absolute;\n    fill: ${t.actorBkg};\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));\n}\n  .actor-man line {\n    stroke: ${t.actorBorder};\n    fill: ${t.actorBkg};\n  }\n  .actor-man circle, line {\n    stroke: ${t.actorBorder};\n    fill: ${t.actorBkg};\n    stroke-width: 2px;\n  }\n`,_v=t=>`\ndefs #statediagram-barbEnd {\n    fill: ${t.transitionColor};\n    stroke: ${t.transitionColor};\n  }\ng.stateGroup text {\n  fill: ${t.nodeBorder};\n  stroke: none;\n  font-size: 10px;\n}\ng.stateGroup text {\n  fill: ${t.textColor};\n  stroke: none;\n  font-size: 10px;\n\n}\ng.stateGroup .state-title {\n  font-weight: bolder;\n  fill: ${t.stateLabelColor};\n}\n\ng.stateGroup rect {\n  fill: ${t.mainBkg};\n  stroke: ${t.nodeBorder};\n}\n\ng.stateGroup line {\n  stroke: ${t.lineColor};\n  stroke-width: 1;\n}\n\n.transition {\n  stroke: ${t.transitionColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.stateGroup .composit {\n  fill: ${t.background};\n  border-bottom: 1px\n}\n\n.stateGroup .alt-composit {\n  fill: #e0e0e0;\n  border-bottom: 1px\n}\n\n.state-note {\n  stroke: ${t.noteBorderColor};\n  fill: ${t.noteBkgColor};\n\n  text {\n    fill: ${t.noteTextColor};\n    stroke: none;\n    font-size: 10px;\n  }\n}\n\n.stateLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${t.mainBkg};\n  opacity: 0.5;\n}\n\n.edgeLabel .label rect {\n  fill: ${t.labelBackgroundColor};\n  opacity: 0.5;\n}\n.edgeLabel .label text {\n  fill: ${t.transitionLabelColor||t.tertiaryTextColor};\n}\n.label div .edgeLabel {\n  color: ${t.transitionLabelColor||t.tertiaryTextColor};\n}\n\n.stateLabel text {\n  fill: ${t.stateLabelColor};\n  font-size: 10px;\n  font-weight: bold;\n}\n\n.node circle.state-start {\n  fill: ${t.specialStateColor};\n  stroke: ${t.specialStateColor};\n}\n\n.node .fork-join {\n  fill: ${t.specialStateColor};\n  stroke: ${t.specialStateColor};\n}\n\n.node circle.state-end {\n  fill: ${t.innerEndBackground};\n  stroke: ${t.background};\n  stroke-width: 1.5\n}\n.end-state-inner {\n  fill: ${t.compositeBackground||t.background};\n  // stroke: ${t.background};\n  stroke-width: 1.5\n}\n\n.node rect {\n  fill: ${t.stateBkg||t.mainBkg};\n  stroke: ${t.stateBorder||t.nodeBorder};\n  stroke-width: 1px;\n}\n.node polygon {\n  fill: ${t.mainBkg};\n  stroke: ${t.stateBorder||t.nodeBorder};;\n  stroke-width: 1px;\n}\n#statediagram-barbEnd {\n  fill: ${t.lineColor};\n}\n\n.statediagram-cluster rect {\n  fill: ${t.compositeTitleBackground};\n  stroke: ${t.stateBorder||t.nodeBorder};\n  stroke-width: 1px;\n}\n\n.cluster-label, .nodeLabel {\n  color: ${t.stateLabelColor};\n}\n\n.statediagram-cluster rect.outer {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state .divider {\n  stroke: ${t.stateBorder||t.nodeBorder};\n}\n\n.statediagram-state .title-state {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-cluster.statediagram-cluster .inner {\n  fill: ${t.compositeBackground||t.background};\n}\n.statediagram-cluster.statediagram-cluster-alt .inner {\n  fill: ${t.altBackground?t.altBackground:"#efefef"};\n}\n\n.statediagram-cluster .inner {\n  rx:0;\n  ry:0;\n}\n\n.statediagram-state rect.basic {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state rect.divider {\n  stroke-dasharray: 10,10;\n  fill: ${t.altBackground?t.altBackground:"#efefef"};\n}\n\n.note-edge {\n  stroke-dasharray: 5;\n}\n\n.statediagram-note rect {\n  fill: ${t.noteBkgColor};\n  stroke: ${t.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n.statediagram-note rect {\n  fill: ${t.noteBkgColor};\n  stroke: ${t.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n\n.statediagram-note text {\n  fill: ${t.noteTextColor};\n}\n\n.statediagram-note .nodeLabel {\n  color: ${t.noteTextColor};\n}\n.statediagram .edgeLabel {\n  color: red; // ${t.noteTextColor};\n}\n\n#dependencyStart, #dependencyEnd {\n  fill: ${t.lineColor};\n  stroke: ${t.lineColor};\n  stroke-width: 1;\n}\n\n.statediagramTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${t.textColor};\n}\n`,wv=t=>`.label {\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n    color: ${t.textColor};\n  }\n  .mouth {\n    stroke: #666;\n  }\n\n  line {\n    stroke: ${t.textColor}\n  }\n\n  .legend {\n    fill: ${t.textColor};\n  }\n\n  .label text {\n    fill: #333;\n  }\n  .label {\n    color: ${t.textColor}\n  }\n\n  .face {\n    ${t.faceColor?`fill: ${t.faceColor}`:"fill: #FFF8DC"};\n    stroke: #999;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${t.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${t.lineColor};\n    stroke-width: 1.5px;\n  }\n\n  .flowchart-link {\n    stroke: ${t.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${t.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n  }\n\n  .cluster text {\n    fill: ${t.titleColor};\n  }\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n    font-size: 12px;\n    background: ${t.tertiaryColor};\n    border: 1px solid ${t.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .task-type-0, .section-type-0  {\n    ${t.fillType0?`fill: ${t.fillType0}`:""};\n  }\n  .task-type-1, .section-type-1  {\n    ${t.fillType0?`fill: ${t.fillType1}`:""};\n  }\n  .task-type-2, .section-type-2  {\n    ${t.fillType0?`fill: ${t.fillType2}`:""};\n  }\n  .task-type-3, .section-type-3  {\n    ${t.fillType0?`fill: ${t.fillType3}`:""};\n  }\n  .task-type-4, .section-type-4  {\n    ${t.fillType0?`fill: ${t.fillType4}`:""};\n  }\n  .task-type-5, .section-type-5  {\n    ${t.fillType0?`fill: ${t.fillType5}`:""};\n  }\n  .task-type-6, .section-type-6  {\n    ${t.fillType0?`fill: ${t.fillType6}`:""};\n  }\n  .task-type-7, .section-type-7  {\n    ${t.fillType0?`fill: ${t.fillType7}`:""};\n  }\n\n  .actor-0 {\n    ${t.actor0?`fill: ${t.actor0}`:""};\n  }\n  .actor-1 {\n    ${t.actor1?`fill: ${t.actor1}`:""};\n  }\n  .actor-2 {\n    ${t.actor2?`fill: ${t.actor2}`:""};\n  }\n  .actor-3 {\n    ${t.actor3?`fill: ${t.actor3}`:""};\n  }\n  .actor-4 {\n    ${t.actor4?`fill: ${t.actor4}`:""};\n  }\n  .actor-5 {\n    ${t.actor5?`fill: ${t.actor5}`:""};\n  }\n`,Sv=t=>`.person {\n    stroke: ${t.personBorder};\n    fill: ${t.personBkg};\n  }\n`,Ev={flowchart:mv,"flowchart-v2":mv,sequence:xv,gantt:gv,classDiagram:dv,"classDiagram-v2":dv,class:dv,stateDiagram:_v,state:_v,info:yv,pie:vv,er:fv,error:pv,journey:wv,requirement:bv,c4:Sv},Mv=(t,e)=>{Ev[t]=e},Cv=(t,e,n)=>{let r="";return t in Ev&&Ev[t]?r=Ev[t](n):f.warn(`No theme found for ${t}`),` & {\n    font-family: ${n.fontFamily};\n    font-size: ${n.fontSize};\n    fill: ${n.textColor}\n  }\n\n  /* Classes common for multiple diagrams */\n\n  & .error-icon {\n    fill: ${n.errorBkgColor};\n  }\n  & .error-text {\n    fill: ${n.errorTextColor};\n    stroke: ${n.errorTextColor};\n  }\n\n  & .edge-thickness-normal {\n    stroke-width: 2px;\n  }\n  & .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  & .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n\n  & .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  & .marker {\n    fill: ${n.lineColor};\n    stroke: ${n.lineColor};\n  }\n  & .marker.cross {\n    stroke: ${n.lineColor};\n  }\n\n  & svg {\n    font-family: ${n.fontFamily};\n    font-size: ${n.fontSize};\n  }\n\n  ${r}\n\n  ${e}\n`},Tv=f,Av=p,kv=tv,Lv=t=>kh(t,kv()),Pv=hv,Rv={},Iv=(t,e,n)=>{if(Rv[t])throw new Error(`Diagram ${t} already registered.`);Rv[t]=e,n&&rm(t,n),Mv(t,e.styles),e.injectUtils&&e.injectUtils(Tv,Av,kv,Lv,Pv)},Dv=t=>{if(t in Rv)return Rv[t];throw new Error(`Diagram ${t} not found.`)};var Bv=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,4],n=[1,7],r=[1,5],i=[1,9],a=[1,6],s=[2,6],o=[1,16],l=[6,8,14,20,22,24,25,27,29,32,37,40,50,55],c=[8,14,20,22,24,25,27,29,32,37,40],u=[8,13,14,20,22,24,25,27,29,32,37,40],h=[1,26],d=[6,8,14,50,55],f=[8,14,55],p=[1,53],m=[1,52],g=[8,14,30,33,35,38,55],y=[1,67],v=[1,68],b=[1,69],x=[8,14,33,35,42,55],_={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ref:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,ID:54,";":55,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:"ID",55:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[28,1],[28,1],[4,1],[4,1],[4,1]],performAction:function(t,e,n,r,i,a,s){var o=a.length-1;switch(i){case 3:return a[o];case 4:return a[o-1];case 5:return r.setDirection(a[o-3]),a[o-1];case 7:r.setOptions(a[o-1]),this.$=a[o];break;case 8:a[o-1]+=a[o],this.$=a[o-1];break;case 10:this.$=[];break;case 11:a[o-1].push(a[o]),this.$=a[o-1];break;case 12:this.$=a[o-1];break;case 17:this.$=a[o].trim(),r.setAccTitle(this.$);break;case 18:case 19:this.$=a[o].trim(),r.setAccDescription(this.$);break;case 20:r.addSection(a[o].substr(8)),this.$=a[o].substr(8);break;case 22:r.checkout(a[o]);break;case 23:r.branch(a[o]);break;case 24:r.branch(a[o-2],a[o]);break;case 25:r.cherryPick(a[o],"",void 0);break;case 26:r.cherryPick(a[o-2],"",a[o]);break;case 27:case 29:r.cherryPick(a[o-2],"","");break;case 28:r.cherryPick(a[o],"",a[o-2]);break;case 30:r.merge(a[o],"","","");break;case 31:r.merge(a[o-2],a[o],"","");break;case 32:r.merge(a[o-2],"",a[o],"");break;case 33:r.merge(a[o-2],"","",a[o]);break;case 34:r.merge(a[o-4],a[o],"",a[o-2]);break;case 35:r.merge(a[o-4],"",a[o],a[o-2]);break;case 36:r.merge(a[o-4],"",a[o-2],a[o]);break;case 37:r.merge(a[o-4],a[o-2],a[o],"");break;case 38:r.merge(a[o-4],a[o-2],"",a[o]);break;case 39:r.merge(a[o-4],a[o],a[o-2],"");break;case 40:r.merge(a[o-6],a[o-4],a[o-2],a[o]);break;case 41:r.merge(a[o-6],a[o],a[o-4],a[o-2]);break;case 42:r.merge(a[o-6],a[o-4],a[o],a[o-2]);break;case 43:r.merge(a[o-6],a[o-2],a[o-4],a[o]);break;case 44:r.merge(a[o-6],a[o],a[o-2],a[o-4]);break;case 45:r.merge(a[o-6],a[o-2],a[o],a[o-4]);break;case 46:r.commit(a[o]);break;case 47:r.commit("","",r.commitType.NORMAL,a[o]);break;case 48:r.commit("","",a[o],"");break;case 49:r.commit("","",a[o],a[o-2]);break;case 50:r.commit("","",a[o-2],a[o]);break;case 51:r.commit("",a[o],r.commitType.NORMAL,"");break;case 52:r.commit("",a[o-2],r.commitType.NORMAL,a[o]);break;case 53:r.commit("",a[o],r.commitType.NORMAL,a[o-2]);break;case 54:r.commit("",a[o-2],a[o],"");break;case 55:r.commit("",a[o],a[o-2],"");break;case 56:r.commit("",a[o-4],a[o-2],a[o]);break;case 57:r.commit("",a[o-4],a[o],a[o-2]);break;case 58:r.commit("",a[o-2],a[o-4],a[o]);break;case 59:r.commit("",a[o],a[o-4],a[o-2]);break;case 60:r.commit("",a[o],a[o-2],a[o-4]);break;case 61:r.commit("",a[o-2],a[o],a[o-4]);break;case 62:r.commit(a[o],"",r.commitType.NORMAL,"");break;case 63:r.commit(a[o],"",r.commitType.NORMAL,a[o-2]);break;case 64:r.commit(a[o-2],"",r.commitType.NORMAL,a[o]);break;case 65:r.commit(a[o-2],"",a[o],"");break;case 66:r.commit(a[o],"",a[o-2],"");break;case 67:r.commit(a[o],a[o-2],r.commitType.NORMAL,"");break;case 68:r.commit(a[o-2],a[o],r.commitType.NORMAL,"");break;case 69:r.commit(a[o-4],"",a[o-2],a[o]);break;case 70:r.commit(a[o-4],"",a[o],a[o-2]);break;case 71:r.commit(a[o-2],"",a[o-4],a[o]);break;case 72:r.commit(a[o],"",a[o-4],a[o-2]);break;case 73:r.commit(a[o],"",a[o-2],a[o-4]);break;case 74:r.commit(a[o-2],"",a[o],a[o-4]);break;case 75:r.commit(a[o-4],a[o],a[o-2],"");break;case 76:r.commit(a[o-4],a[o-2],a[o],"");break;case 77:r.commit(a[o-2],a[o],a[o-4],"");break;case 78:r.commit(a[o],a[o-2],a[o-4],"");break;case 79:r.commit(a[o],a[o-4],a[o-2],"");break;case 80:r.commit(a[o-2],a[o-4],a[o],"");break;case 81:r.commit(a[o-4],a[o],r.commitType.NORMAL,a[o-2]);break;case 82:r.commit(a[o-4],a[o-2],r.commitType.NORMAL,a[o]);break;case 83:r.commit(a[o-2],a[o],r.commitType.NORMAL,a[o-4]);break;case 84:r.commit(a[o],a[o-2],r.commitType.NORMAL,a[o-4]);break;case 85:r.commit(a[o],a[o-4],r.commitType.NORMAL,a[o-2]);break;case 86:r.commit(a[o-2],a[o-4],r.commitType.NORMAL,a[o]);break;case 87:r.commit(a[o-6],a[o-4],a[o-2],a[o]);break;case 88:r.commit(a[o-6],a[o-4],a[o],a[o-2]);break;case 89:r.commit(a[o-6],a[o-2],a[o-4],a[o]);break;case 90:r.commit(a[o-6],a[o],a[o-4],a[o-2]);break;case 91:r.commit(a[o-6],a[o-2],a[o],a[o-4]);break;case 92:r.commit(a[o-6],a[o],a[o-2],a[o-4]);break;case 93:r.commit(a[o-4],a[o-6],a[o-2],a[o]);break;case 94:r.commit(a[o-4],a[o-6],a[o],a[o-2]);break;case 95:r.commit(a[o-2],a[o-6],a[o-4],a[o]);break;case 96:r.commit(a[o],a[o-6],a[o-4],a[o-2]);break;case 97:r.commit(a[o-2],a[o-6],a[o],a[o-4]);break;case 98:r.commit(a[o],a[o-6],a[o-2],a[o-4]);break;case 99:r.commit(a[o],a[o-4],a[o-2],a[o-6]);break;case 100:r.commit(a[o-2],a[o-4],a[o],a[o-6]);break;case 101:r.commit(a[o],a[o-2],a[o-4],a[o-6]);break;case 102:r.commit(a[o-2],a[o],a[o-4],a[o-6]);break;case 103:r.commit(a[o-4],a[o-2],a[o],a[o-6]);break;case 104:r.commit(a[o-4],a[o],a[o-2],a[o-6]);break;case 105:r.commit(a[o-2],a[o-4],a[o-6],a[o]);break;case 106:r.commit(a[o],a[o-4],a[o-6],a[o-2]);break;case 107:r.commit(a[o-2],a[o],a[o-6],a[o-4]);break;case 108:r.commit(a[o],a[o-2],a[o-6],a[o-4]);break;case 109:r.commit(a[o-4],a[o-2],a[o-6],a[o]);break;case 110:r.commit(a[o-4],a[o],a[o-6],a[o-2]);break;case 111:this.$="";break;case 112:this.$=a[o];break;case 113:this.$=r.commitType.NORMAL;break;case 114:this.$=r.commitType.REVERSE;break;case 115:this.$=r.commitType.HIGHLIGHT;break;case 118:r.parseDirective("%%{","open_directive");break;case 119:r.parseDirective(a[o],"type_directive");break;case 120:a[o]=a[o].trim().replace(/'/g,'"'),r.parseDirective(a[o],"arg_directive");break;case 121:r.parseDirective("}%%","close_directive","gitGraph")}},table:[{3:1,4:2,5:3,6:e,8:n,14:r,46:8,50:i,55:a},{1:[3]},{3:10,4:2,5:3,6:e,8:n,14:r,46:8,50:i,55:a},{3:11,4:2,5:3,6:e,8:n,14:r,46:8,50:i,55:a},{7:12,8:s,9:[1,13],10:[1,14],11:15,14:o},t(l,[2,124]),t(l,[2,125]),t(l,[2,126]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:s,11:15,14:o},{9:[1,21]},t(c,[2,10],{12:22,13:[1,23]}),t(u,[2,9]),{9:[1,25],48:24,53:h},t([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:s,11:15,14:o},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},t(u,[2,8]),t(d,[2,116]),{49:45,52:[1,46]},t(d,[2,121]),{1:[2,4]},{8:[1,47]},t(c,[2,11]),{4:48,8:n,14:r,55:a},t(c,[2,13]),t(f,[2,14]),t(f,[2,15]),t(f,[2,16]),{21:[1,49]},{23:[1,50]},t(f,[2,19]),t(f,[2,20]),t(f,[2,21]),{28:51,34:p,54:m},t(f,[2,111],{41:54,33:[1,57],34:[1,59],35:[1,55],38:[1,56],42:[1,58]}),{28:60,34:p,54:m},{33:[1,61],35:[1,62]},{28:63,34:p,54:m},{48:64,53:h},{53:[2,120]},{1:[2,5]},t(c,[2,12]),t(f,[2,17]),t(f,[2,18]),t(f,[2,22]),t(g,[2,122]),t(g,[2,123]),t(f,[2,46]),{34:[1,65]},{39:66,43:y,44:v,45:b},{34:[1,70]},{34:[1,71]},t(f,[2,112]),t(f,[2,30],{33:[1,72],35:[1,74],38:[1,73]}),{34:[1,75]},{34:[1,76],36:[1,77]},t(f,[2,23],{30:[1,78]}),t(d,[2,117]),t(f,[2,47],{33:[1,80],38:[1,79],42:[1,81]}),t(f,[2,48],{33:[1,83],35:[1,82],42:[1,84]}),t(x,[2,113]),t(x,[2,114]),t(x,[2,115]),t(f,[2,51],{35:[1,85],38:[1,86],42:[1,87]}),t(f,[2,62],{33:[1,90],35:[1,88],38:[1,89]}),{34:[1,91]},{39:92,43:y,44:v,45:b},{34:[1,93]},t(f,[2,25],{35:[1,94]}),{33:[1,95]},{33:[1,96]},{31:[1,97]},{39:98,43:y,44:v,45:b},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{34:[1,103]},{34:[1,104]},{39:105,43:y,44:v,45:b},{34:[1,106]},{34:[1,107]},{39:108,43:y,44:v,45:b},{34:[1,109]},t(f,[2,31],{35:[1,111],38:[1,110]}),t(f,[2,32],{33:[1,113],35:[1,112]}),t(f,[2,33],{33:[1,114],38:[1,115]}),{34:[1,116],36:[1,117]},{34:[1,118]},{34:[1,119]},t(f,[2,24]),t(f,[2,49],{33:[1,120],42:[1,121]}),t(f,[2,53],{38:[1,122],42:[1,123]}),t(f,[2,63],{33:[1,125],38:[1,124]}),t(f,[2,50],{33:[1,126],42:[1,127]}),t(f,[2,55],{35:[1,128],42:[1,129]}),t(f,[2,66],{33:[1,131],35:[1,130]}),t(f,[2,52],{38:[1,132],42:[1,133]}),t(f,[2,54],{35:[1,134],42:[1,135]}),t(f,[2,67],{35:[1,137],38:[1,136]}),t(f,[2,64],{33:[1,139],38:[1,138]}),t(f,[2,65],{33:[1,141],35:[1,140]}),t(f,[2,68],{35:[1,143],38:[1,142]}),{39:144,43:y,44:v,45:b},{34:[1,145]},{34:[1,146]},{34:[1,147]},{34:[1,148]},{39:149,43:y,44:v,45:b},t(f,[2,26]),t(f,[2,27]),t(f,[2,28]),t(f,[2,29]),{34:[1,150]},{34:[1,151]},{39:152,43:y,44:v,45:b},{34:[1,153]},{39:154,43:y,44:v,45:b},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{34:[1,160]},{34:[1,161]},{39:162,43:y,44:v,45:b},{34:[1,163]},{34:[1,164]},{34:[1,165]},{39:166,43:y,44:v,45:b},{34:[1,167]},{39:168,43:y,44:v,45:b},{34:[1,169]},{34:[1,170]},{34:[1,171]},{39:172,43:y,44:v,45:b},{34:[1,173]},t(f,[2,37],{35:[1,174]}),t(f,[2,38],{38:[1,175]}),t(f,[2,36],{33:[1,176]}),t(f,[2,39],{35:[1,177]}),t(f,[2,34],{38:[1,178]}),t(f,[2,35],{33:[1,179]}),t(f,[2,60],{42:[1,180]}),t(f,[2,73],{33:[1,181]}),t(f,[2,61],{42:[1,182]}),t(f,[2,84],{38:[1,183]}),t(f,[2,74],{33:[1,184]}),t(f,[2,83],{38:[1,185]}),t(f,[2,59],{42:[1,186]}),t(f,[2,72],{33:[1,187]}),t(f,[2,58],{42:[1,188]}),t(f,[2,78],{35:[1,189]}),t(f,[2,71],{33:[1,190]}),t(f,[2,77],{35:[1,191]}),t(f,[2,57],{42:[1,192]}),t(f,[2,85],{38:[1,193]}),t(f,[2,56],{42:[1,194]}),t(f,[2,79],{35:[1,195]}),t(f,[2,80],{35:[1,196]}),t(f,[2,86],{38:[1,197]}),t(f,[2,70],{33:[1,198]}),t(f,[2,81],{38:[1,199]}),t(f,[2,69],{33:[1,200]}),t(f,[2,75],{35:[1,201]}),t(f,[2,76],{35:[1,202]}),t(f,[2,82],{38:[1,203]}),{34:[1,204]},{39:205,43:y,44:v,45:b},{34:[1,206]},{34:[1,207]},{39:208,43:y,44:v,45:b},{34:[1,209]},{34:[1,210]},{34:[1,211]},{34:[1,212]},{39:213,43:y,44:v,45:b},{34:[1,214]},{39:215,43:y,44:v,45:b},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{34:[1,221]},{34:[1,222]},{39:223,43:y,44:v,45:b},{34:[1,224]},{34:[1,225]},{34:[1,226]},{39:227,43:y,44:v,45:b},{34:[1,228]},{39:229,43:y,44:v,45:b},{34:[1,230]},{34:[1,231]},{34:[1,232]},{39:233,43:y,44:v,45:b},t(f,[2,40]),t(f,[2,42]),t(f,[2,41]),t(f,[2,43]),t(f,[2,45]),t(f,[2,44]),t(f,[2,101]),t(f,[2,102]),t(f,[2,99]),t(f,[2,100]),t(f,[2,104]),t(f,[2,103]),t(f,[2,108]),t(f,[2,107]),t(f,[2,106]),t(f,[2,105]),t(f,[2,110]),t(f,[2,109]),t(f,[2,98]),t(f,[2,97]),t(f,[2,96]),t(f,[2,95]),t(f,[2,93]),t(f,[2,94]),t(f,[2,92]),t(f,[2,91]),t(f,[2,90]),t(f,[2,89]),t(f,[2,87]),t(f,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],a=[],s=this.table,o="",l=0,c=0,u=2,h=1,d=a.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,typeof f.yylloc>"u"&&(f.yylloc={});var g=f.yylloc;a.push(g);var y=f.options&&f.options.ranges;function v(){var t;return"number"!=typeof(t=r.pop()||f.lex()||h)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,M,C,T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:((null===b||typeof b>"u")&&(b=v()),_=s[x]&&s[x][b]),typeof _>"u"||!_.length||!_[0]){var A="";for(S in C=[],s[x])this.terminals_[S]&&S>u&&C.push("'"+this.terminals_[S]+"'");A=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(b==h?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(A,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(f.yytext),a.push(f.yylloc),n.push(_[1]),b=null,c=f.yyleng,o=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(E=this.productions_[_[1]][1],T.$=i[i.length-E],T._$={first_line:a[a.length-(E||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(E||1)].first_column,last_column:a[a.length-1].last_column},y&&(T._$.range=[a[a.length-(E||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(T,[o,c,l,p.yy,_[1],i,a].concat(d)))<"u")return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),a=a.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(T.$),a.push(T._$),M=s[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},w={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:case 34:case 38:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 39:return 34;case 40:return 31;case 41:return 54;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};function S(){this.yy={}}return _.lexer=w,S.prototype=_,_.Parser=S,new S}();Bv.parser=Bv;const Ov=Bv,Nv=t=>null!==t.match(/^\s*gitGraph/);let Fv="",zv="",Uv="";const Gv=t=>kh(t,tv()),Hv=function(){Fv="",Uv="",zv=""},jv=function(t){Fv=Gv(t).replace(/^\s+/g,"")},Vv=function(){return Fv||zv},Wv=function(t){Uv=Gv(t).replace(/\n\s+/g,"\n")},$v=function(){return Uv},Yv=function(t){zv=Gv(t)},qv=function(){return zv};let Xv=tv().gitGraph.mainBranchName,Jv=tv().gitGraph.mainBranchOrder,Zv={},Kv=null,Qv={};Qv[Xv]={name:Xv,order:Jv};let tb={};tb[Xv]=Kv;let eb=Xv,nb="LR",rb=0;function ib(){return Fg({length:7})}function ab(t,e){const n=Object.create(null);return t.reduce(((t,r)=>{const i=e(r);return n[i]||(n[i]=!0,t.push(r)),t}),[])}let sb={};const ob=function(t,e,n,r){f.debug("Entering commit:",t,e,n,r),e=Oh.sanitizeText(e,tv()),t=Oh.sanitizeText(t,tv()),r=Oh.sanitizeText(r,tv());const i={id:e||rb+"-"+ib(),message:t,seq:rb++,type:n||gb.NORMAL,tag:r||"",parents:null==Kv?[]:[Kv.id],branch:eb};Kv=i,Zv[i.id]=i,tb[eb]=i.id,f.debug("in pushCommit "+i.id)},lb=function(t,e){if(t=Oh.sanitizeText(t,tv()),void 0!==tb[t]){let e=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+t+'")');throw e.hash={text:"branch "+t,token:"branch "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+t+'"']},e}tb[t]=null!=Kv?Kv.id:null,Qv[t]={name:t,order:e?parseInt(e,10):null},hb(t),f.debug("in createBranch")},cb=function(t,e,n,r){t=Oh.sanitizeText(t,tv()),e=Oh.sanitizeText(e,tv());const i=Zv[tb[eb]],a=Zv[tb[t]];if(eb===t){let e=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw e.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},e}if(void 0===i||!i){let e=new Error('Incorrect usage of "merge". Current branch ('+eb+")has no commits");throw e.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},e}if(void 0===tb[t]){let e=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw e.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+t]},e}if(void 0===a||!a){let e=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw e.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},e}if(i===a){let e=new Error('Incorrect usage of "merge". Both branches have same head');throw e.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},e}if(e&&void 0!==Zv[e]){let i=new Error('Incorrect usage of "merge". Commit with id:'+e+" already exists, use different custom Id");throw i.hash={text:"merge "+t+e+n+r,token:"merge "+t+e+n+r,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+t+" "+e+"_UNIQUE "+n+" "+r]},i}const s={id:e||rb+"-"+ib(),message:"merged branch "+t+" into "+eb,seq:rb++,parents:[null==Kv?null:Kv.id,tb[t]],branch:eb,type:gb.MERGE,customType:n,customId:!!e,tag:r||""};Kv=s,Zv[s.id]=s,tb[eb]=s.id,f.debug(tb),f.debug("in mergeBranch")},ub=function(t,e,n){if(f.debug("Entering cherryPick:",t,e,n),t=Oh.sanitizeText(t,tv()),e=Oh.sanitizeText(e,tv()),n=Oh.sanitizeText(n,tv()),!t||void 0===Zv[t]){let n=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw n.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},n}let r=Zv[t],i=r.branch;if(r.type===gb.MERGE){let n=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw n.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},n}if(!e||void 0===Zv[e]){if(i===eb){let n=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw n.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},n}const a=Zv[tb[eb]];if(void 0===a||!a){let n=new Error('Incorrect usage of "cherry-pick". Current branch ('+eb+")has no commits");throw n.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},n}const s={id:rb+"-"+ib(),message:"cherry-picked "+r+" into "+eb,seq:rb++,parents:[null==Kv?null:Kv.id,r.id],branch:eb,type:gb.CHERRY_PICK,tag:null!=n?n:"cherry-pick:"+r.id};Kv=s,Zv[s.id]=s,tb[eb]=s.id,f.debug(tb),f.debug("in cherryPick")}},hb=function(t){if(t=Oh.sanitizeText(t,tv()),void 0===tb[t]){let e=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+t+'")');throw e.hash={text:"checkout "+t,token:"checkout "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+t+'"']},e}{eb=t;const e=tb[eb];Kv=Zv[e]}};function db(t,e,n){const r=t.indexOf(e);-1===r?t.push(n):t.splice(r,1,n)}function fb(t){const e=t.reduce(((t,e)=>t.seq>e.seq?t:e),t[0]);let n="";t.forEach((function(t){n+=t===e?"\t*":"\t|"}));const r=[n,e.id,e.seq];for(let i in tb)tb[i]===e.id&&r.push(i);if(f.debug(r.join(" ")),e.parents&&2==e.parents.length){const n=Zv[e.parents[0]];db(t,e,n),t.push(Zv[e.parents[1]])}else{if(0==e.parents.length)return;{const n=Zv[e.parents];db(t,e,n)}}fb(t=ab(t,(t=>t.id)))}const pb=function(){f.debug(Zv),fb([mb()[0]])},mb=function(){const t=Object.keys(Zv).map((function(t){return Zv[t]}));return t.forEach((function(t){f.debug(t.id)})),t.sort(((t,e)=>t.seq-e.seq)),t},gb={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},yb={parseDirective:function(t,e,n){iH.parseDirective(this,t,e,n)},getConfig:()=>tv().gitGraph,setDirection:function(t){nb=t},setOptions:function(t){f.debug("options str",t),t=(t=t&&t.trim())||"{}";try{sb=JSON.parse(t)}catch(e){f.error("error while parsing gitGraph options",e.message)}},getOptions:function(){return sb},commit:ob,branch:lb,merge:cb,cherryPick:ub,checkout:hb,prettyPrint:pb,clear:function(){Zv={},Kv=null;let t=tv().gitGraph.mainBranchName,e=tv().gitGraph.mainBranchOrder;tb={},tb[t]=null,Qv={},Qv[t]={name:t,order:e},eb=t,rb=0,Hv()},getBranchesAsObjArray:function(){return Object.values(Qv).map(((t,e)=>null!==t.order?t:{...t,order:parseFloat(`0.${e}`,10)})).sort(((t,e)=>t.order-e.order)).map((({name:t})=>({name:t})))},getBranches:function(){return tb},getCommits:function(){return Zv},getCommitsArray:mb,getCurrentBranch:function(){return eb},getDirection:function(){return nb},getHead:function(){return Kv},setAccTitle:jv,getAccTitle:Vv,getAccDescription:$v,setAccDescription:Wv,setDiagramTitle:Yv,getDiagramTitle:qv,commitType:gb};let vb={};const bb={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},xb=8;let _b={},wb={},Sb=[],Eb=0;const Mb=()=>{_b={},wb={},vb={},Eb=0,Sb=[]},Cb=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","text");let n=[];n="string"==typeof t?t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?t:[];for(const r of n){const t=document.createElementNS("http://www.w3.org/2000/svg","tspan");t.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t.setAttribute("dy","1em"),t.setAttribute("x","0"),t.setAttribute("class","row"),t.textContent=r.trim(),e.appendChild(t)}return e},Tb=(t,e,n)=>{const r=kv().gitGraph,i=t.append("g").attr("class","commit-bullets"),a=t.append("g").attr("class","commit-labels");let s=0;Object.keys(e).sort(((t,n)=>e[t].seq-e[n].seq)).forEach((t=>{const o=e[t],l=_b[o.branch].pos,c=s+10;if(n){let t,e=void 0!==o.customType&&""!==o.customType?o.customType:o.type;switch(e){case bb.NORMAL:t="commit-normal";break;case bb.REVERSE:t="commit-reverse";break;case bb.HIGHLIGHT:t="commit-highlight";break;case bb.MERGE:t="commit-merge";break;case bb.CHERRY_PICK:t="commit-cherry-pick";break;default:t="commit-normal"}if(e===bb.HIGHLIGHT){const e=i.append("rect");e.attr("x",c-10),e.attr("y",l-10),e.attr("height",20),e.attr("width",20),e.attr("class",`commit ${o.id} commit-highlight${_b[o.branch].index%xb} ${t}-outer`),i.append("rect").attr("x",c-6).attr("y",l-6).attr("height",12).attr("width",12).attr("class",`commit ${o.id} commit${_b[o.branch].index%xb} ${t}-inner`)}else if(e===bb.CHERRY_PICK)i.append("circle").attr("cx",c).attr("cy",l).attr("r",10).attr("class",`commit ${o.id} ${t}`),i.append("circle").attr("cx",c-3).attr("cy",l+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${o.id} ${t}`),i.append("circle").attr("cx",c+3).attr("cy",l+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${o.id} ${t}`),i.append("line").attr("x1",c+3).attr("y1",l+1).attr("x2",c).attr("y2",l-5).attr("stroke","#fff").attr("class",`commit ${o.id} ${t}`),i.append("line").attr("x1",c-3).attr("y1",l+1).attr("x2",c).attr("y2",l-5).attr("stroke","#fff").attr("class",`commit ${o.id} ${t}`);else{const n=i.append("circle");if(n.attr("cx",c),n.attr("cy",l),n.attr("r",o.type===bb.MERGE?9:10),n.attr("class",`commit ${o.id} commit${_b[o.branch].index%xb}`),e===bb.MERGE){const e=i.append("circle");e.attr("cx",c),e.attr("cy",l),e.attr("r",6),e.attr("class",`commit ${t} ${o.id} commit${_b[o.branch].index%xb}`)}e===bb.REVERSE&&i.append("path").attr("d",`M ${c-5},${l-5}L${c+5},${l+5}M${c-5},${l+5}L${c+5},${l-5}`).attr("class",`commit ${t} ${o.id} commit${_b[o.branch].index%xb}`)}}if(wb[o.id]={x:s+10,y:l},n){if(o.type!==bb.CHERRY_PICK&&(o.customId&&o.type===bb.MERGE||o.type!==bb.MERGE)&&r.showCommitLabel){const t=a.append("g"),e=t.insert("rect").attr("class","commit-label-bkg"),n=t.append("text").attr("x",s).attr("y",l+25).attr("class","commit-label").text(o.id);let i=n.node().getBBox();if(e.attr("x",s+10-i.width/2-2).attr("y",l+13.5).attr("width",i.width+4).attr("height",i.height+4),n.attr("x",s+10-i.width/2),r.rotateCommitLabel){let e=-7.5-(i.width+10)/25*9.5,n=10+i.width/25*8.5;t.attr("transform","translate("+e+", "+n+") rotate(-45, "+s+", "+l+")")}}if(o.tag){const t=a.insert("polygon"),e=a.append("circle"),n=a.append("text").attr("y",l-16).attr("class","tag-label").text(o.tag);let r=n.node().getBBox();n.attr("x",s+10-r.width/2);const i=r.height/2,c=l-19.2;t.attr("class","tag-label-bkg").attr("points",`\n          ${s-r.width/2-2},${c+2}\n          ${s-r.width/2-2},${c-2}\n          ${s+10-r.width/2-4},${c-i-2}\n          ${s+10+r.width/2+4},${c-i-2}\n          ${s+10+r.width/2+4},${c+i+2}\n          ${s+10-r.width/2-4},${c+i+2}`),e.attr("cx",s-r.width/2+2).attr("cy",c).attr("r",1.5).attr("class","tag-hole")}}s+=50,s>Eb&&(Eb=s)}))},Ab=(t,e,n)=>Object.keys(n).filter((r=>n[r].branch===e.branch&&n[r].seq>t.seq&&n[r].seq<e.seq)).length>0,kb=(t,e,n=0)=>{const r=t+Math.abs(t-e)/2;if(n>5)return r;if(Sb.every((t=>Math.abs(t-r)>=10)))return Sb.push(r),r;const i=Math.abs(t-e);return kb(t,e-i/5,n+1)},Lb=(t,e,n,r)=>{const i=wb[e.id],a=wb[n.id],s=Ab(e,n,r);let o,l="",c="",u=0,h=0,d=_b[n.branch].index;if(s){l="A 10 10, 0, 0, 0,",c="A 10 10, 0, 0, 1,",u=10,h=10,d=_b[n.branch].index;const t=i.y<a.y?kb(i.y,a.y):kb(a.y,i.y);o=i.y<a.y?`M ${i.x} ${i.y} L ${i.x} ${t-u} ${l} ${i.x+h} ${t} L ${a.x-u} ${t} ${c} ${a.x} ${t+h} L ${a.x} ${a.y}`:`M ${i.x} ${i.y} L ${i.x} ${t+u} ${c} ${i.x+h} ${t} L ${a.x-u} ${t} ${l} ${a.x} ${t-h} L ${a.x} ${a.y}`}else i.y<a.y&&(l="A 20 20, 0, 0, 0,",u=20,h=20,d=_b[n.branch].index,o=`M ${i.x} ${i.y} L ${i.x} ${a.y-u} ${l} ${i.x+h} ${a.y} L ${a.x} ${a.y}`),i.y>a.y&&(l="A 20 20, 0, 0, 0,",u=20,h=20,d=_b[e.branch].index,o=`M ${i.x} ${i.y} L ${a.x-u} ${i.y} ${l} ${a.x} ${i.y-h} L ${a.x} ${a.y}`),i.y===a.y&&(d=_b[e.branch].index,o=`M ${i.x} ${i.y} L ${i.x} ${a.y-u} ${l} ${i.x+h} ${a.y} L ${a.x} ${a.y}`);t.append("path").attr("d",o).attr("class","arrow arrow"+d%xb)},Pb=(t,e)=>{const n=t.append("g").attr("class","commit-arrows");Object.keys(e).forEach((t=>{const r=e[t];r.parents&&r.parents.length>0&&r.parents.forEach((t=>{Lb(n,e[t],r,e)}))}))},Rb=(t,e)=>{const n=kv().gitGraph,r=t.append("g");e.forEach(((t,e)=>{const i=e%xb,a=_b[t.name].pos,s=r.append("line");s.attr("x1",0),s.attr("y1",a),s.attr("x2",Eb),s.attr("y2",a),s.attr("class","branch branch"+i),Sb.push(a);let o=t.name;const l=Cb(o),c=r.insert("rect"),u=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+i);u.node().appendChild(l);let h=l.getBBox();c.attr("class","branchLabelBkg label"+i).attr("rx",4).attr("ry",4).attr("x",-h.width-4-(!0===n.rotateCommitLabel?30:0)).attr("y",-h.height/2+8).attr("width",h.width+18).attr("height",h.height+4),u.attr("transform","translate("+(-h.width-14-(!0===n.rotateCommitLabel?30:0))+", "+(a-h.height/2-1)+")"),c.attr("transform","translate(-19, "+(a-h.height/2)+")")}))},Ib={draw:function(t,e,n,r){var i;Mb();const a=kv(),s=a.gitGraph;f.debug("in gitgraph renderer",t+"\n","id:",e,n),vb=r.db.getCommits();const o=r.db.getBranchesAsObjArray();let l=0;o.forEach(((t,e)=>{_b[t.name]={pos:l,index:e},l+=50+(s.rotateCommitLabel?40:0)}));const c=dn(`[id="${e}"]`);Tb(c,vb,!1),s.showBranches&&Rb(c,o),Pb(c,vb),Tb(c,vb,!0),Zg.insertTitle(c,"gitTitleText",s.titleTopMargin,r.db.getDiagramTitle()),Pv(void 0,c,s.diagramPadding,null!=(i=s.useMaxWidth)?i:a.useMaxWidth)}},Db=t=>`\n  .commit-id,\n  .commit-msg,\n  .branch-label {\n    fill: lightgrey;\n    color: lightgrey;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  ${[0,1,2,3,4,5,6,7].map((e=>`\n        .branch-label${e} { fill: ${t["gitBranchLabel"+e]}; }\n        .commit${e} { stroke: ${t["git"+e]}; fill: ${t["git"+e]}; }\n        .commit-highlight${e} { stroke: ${t["gitInv"+e]}; fill: ${t["gitInv"+e]}; }\n        .label${e}  { fill: ${t["git"+e]}; }\n        .arrow${e} { stroke: ${t["git"+e]}; }\n        `)).join("\n")}\n\n  .branch {\n    stroke-width: 1;\n    stroke: ${t.lineColor};\n    stroke-dasharray: 2;\n  }\n  .commit-label { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelColor};}\n  .commit-label-bkg { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelBackground}; opacity: 0.5; }\n  .tag-label { font-size: ${t.tagLabelFontSize}; fill: ${t.tagLabelColor};}\n  .tag-label-bkg { fill: ${t.tagLabelBackground}; stroke: ${t.tagLabelBorder}; }\n  .tag-hole { fill: ${t.textColor}; }\n\n  .commit-merge {\n    stroke: ${t.primaryColor};\n    fill: ${t.primaryColor};\n  }\n  .commit-reverse {\n    stroke: ${t.primaryColor};\n    fill: ${t.primaryColor};\n    stroke-width: 3;\n  }\n  .commit-highlight-outer {\n  }\n  .commit-highlight-inner {\n    stroke: ${t.primaryColor};\n    fill: ${t.primaryColor};\n  }\n\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\n  .gitTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${t.textColor};\n  }\n  }\n`;var Bb=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,6],n=[1,7],r=[1,8],i=[1,9],a=[1,16],s=[1,11],o=[1,12],l=[1,13],u=[1,14],h=[1,15],d=[1,27],f=[1,33],p=[1,34],m=[1,35],g=[1,36],y=[1,37],v=[1,72],b=[1,73],x=[1,74],_=[1,75],w=[1,76],S=[1,77],E=[1,78],M=[1,38],C=[1,39],T=[1,40],A=[1,41],k=[1,42],L=[1,43],P=[1,44],R=[1,45],I=[1,46],D=[1,47],B=[1,48],O=[1,49],N=[1,50],F=[1,51],z=[1,52],U=[1,53],G=[1,54],H=[1,55],j=[1,56],V=[1,57],W=[1,59],$=[1,60],Y=[1,61],q=[1,62],X=[1,63],J=[1,64],Z=[1,65],K=[1,66],Q=[1,67],tt=[1,68],et=[1,69],nt=[24,52],rt=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],it=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],at=[1,94],st=[1,95],ot=[1,96],lt=[1,97],ct=[15,24,52],ut=[7,8,9,10,18,22,25,26,27,28],ht=[15,24,43,52],dt=[15,24,43,52,86,87,89,90],ft=[15,43],pt=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],mt={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(t,e,n,r,i,a,s){var o=a.length-1;switch(i){case 4:r.setDirection("TB");break;case 5:r.setDirection("BT");break;case 6:r.setDirection("RL");break;case 7:r.setDirection("LR");break;case 11:r.parseDirective("%%{","open_directive");break;case 12:break;case 13:a[o]=a[o].trim().replace(/'/g,'"'),r.parseDirective(a[o],"arg_directive");break;case 14:r.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:r.setC4Type(a[o-3]);break;case 26:r.setTitle(a[o].substring(6)),this.$=a[o].substring(6);break;case 27:r.setAccDescription(a[o].substring(15)),this.$=a[o].substring(15);break;case 28:this.$=a[o].trim(),r.setTitle(this.$);break;case 29:case 30:this.$=a[o].trim(),r.setAccDescription(this.$);break;case 35:case 36:a[o].splice(2,0,"ENTERPRISE"),r.addPersonOrSystemBoundary(...a[o]),this.$=a[o];break;case 37:r.addPersonOrSystemBoundary(...a[o]),this.$=a[o];break;case 38:a[o].splice(2,0,"CONTAINER"),r.addContainerBoundary(...a[o]),this.$=a[o];break;case 39:r.addDeploymentNode("node",...a[o]),this.$=a[o];break;case 40:r.addDeploymentNode("nodeL",...a[o]),this.$=a[o];break;case 41:r.addDeploymentNode("nodeR",...a[o]),this.$=a[o];break;case 42:r.popBoundaryParseStack();break;case 46:r.addPersonOrSystem("person",...a[o]),this.$=a[o];break;case 47:r.addPersonOrSystem("external_person",...a[o]),this.$=a[o];break;case 48:r.addPersonOrSystem("system",...a[o]),this.$=a[o];break;case 49:r.addPersonOrSystem("system_db",...a[o]),this.$=a[o];break;case 50:r.addPersonOrSystem("system_queue",...a[o]),this.$=a[o];break;case 51:r.addPersonOrSystem("external_system",...a[o]),this.$=a[o];break;case 52:r.addPersonOrSystem("external_system_db",...a[o]),this.$=a[o];break;case 53:r.addPersonOrSystem("external_system_queue",...a[o]),this.$=a[o];break;case 54:r.addContainer("container",...a[o]),this.$=a[o];break;case 55:r.addContainer("container_db",...a[o]),this.$=a[o];break;case 56:r.addContainer("container_queue",...a[o]),this.$=a[o];break;case 57:r.addContainer("external_container",...a[o]),this.$=a[o];break;case 58:r.addContainer("external_container_db",...a[o]),this.$=a[o];break;case 59:r.addContainer("external_container_queue",...a[o]),this.$=a[o];break;case 60:r.addComponent("component",...a[o]),this.$=a[o];break;case 61:r.addComponent("component_db",...a[o]),this.$=a[o];break;case 62:r.addComponent("component_queue",...a[o]),this.$=a[o];break;case 63:r.addComponent("external_component",...a[o]),this.$=a[o];break;case 64:r.addComponent("external_component_db",...a[o]),this.$=a[o];break;case 65:r.addComponent("external_component_queue",...a[o]),this.$=a[o];break;case 67:r.addRel("rel",...a[o]),this.$=a[o];break;case 68:r.addRel("birel",...a[o]),this.$=a[o];break;case 69:r.addRel("rel_u",...a[o]),this.$=a[o];break;case 70:r.addRel("rel_d",...a[o]),this.$=a[o];break;case 71:r.addRel("rel_l",...a[o]),this.$=a[o];break;case 72:r.addRel("rel_r",...a[o]),this.$=a[o];break;case 73:r.addRel("rel_b",...a[o]),this.$=a[o];break;case 74:a[o].splice(0,1),r.addRel("rel",...a[o]),this.$=a[o];break;case 75:r.updateElStyle("update_el_style",...a[o]),this.$=a[o];break;case 76:r.updateRelStyle("update_rel_style",...a[o]),this.$=a[o];break;case 77:r.updateLayoutConfig("update_layout_config",...a[o]),this.$=a[o];break;case 78:this.$=[a[o]];break;case 79:a[o].unshift(a[o-1]),this.$=a[o];break;case 80:case 82:this.$=a[o].trim();break;case 81:let t={};t[a[o-1].trim()]=a[o].trim(),this.$=t;break;case 83:this.$=""}},table:[{3:1,4:2,5:3,6:4,7:e,8:n,9:r,10:i,11:5,12:10,18:a,22:s,25:o,26:l,27:u,28:h},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:e,8:n,9:r,10:i,11:5,12:10,18:a,22:s,25:o,26:l,27:u,28:h},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:d},t([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:f,33:p,34:m,36:g,38:y,39:58,40:70,42:71,44:v,46:b,47:x,48:_,49:w,50:S,51:E,53:32,54:M,55:C,56:T,57:A,58:k,59:L,60:P,61:R,62:I,63:D,64:B,65:O,66:N,67:F,68:z,69:U,70:G,71:H,72:j,73:V,74:W,75:$,76:Y,77:q,78:X,79:J,80:Z,81:K,82:Q,83:tt,84:et},{23:79,29:29,30:30,31:31,32:f,33:p,34:m,36:g,38:y,39:58,40:70,42:71,44:v,46:b,47:x,48:_,49:w,50:S,51:E,53:32,54:M,55:C,56:T,57:A,58:k,59:L,60:P,61:R,62:I,63:D,64:B,65:O,66:N,67:F,68:z,69:U,70:G,71:H,72:j,73:V,74:W,75:$,76:Y,77:q,78:X,79:J,80:Z,81:K,82:Q,83:tt,84:et},{23:80,29:29,30:30,31:31,32:f,33:p,34:m,36:g,38:y,39:58,40:70,42:71,44:v,46:b,47:x,48:_,49:w,50:S,51:E,53:32,54:M,55:C,56:T,57:A,58:k,59:L,60:P,61:R,62:I,63:D,64:B,65:O,66:N,67:F,68:z,69:U,70:G,71:H,72:j,73:V,74:W,75:$,76:Y,77:q,78:X,79:J,80:Z,81:K,82:Q,83:tt,84:et},{23:81,29:29,30:30,31:31,32:f,33:p,34:m,36:g,38:y,39:58,40:70,42:71,44:v,46:b,47:x,48:_,49:w,50:S,51:E,53:32,54:M,55:C,56:T,57:A,58:k,59:L,60:P,61:R,62:I,63:D,64:B,65:O,66:N,67:F,68:z,69:U,70:G,71:H,72:j,73:V,74:W,75:$,76:Y,77:q,78:X,79:J,80:Z,81:K,82:Q,83:tt,84:et},{23:82,29:29,30:30,31:31,32:f,33:p,34:m,36:g,38:y,39:58,40:70,42:71,44:v,46:b,47:x,48:_,49:w,50:S,51:E,53:32,54:M,55:C,56:T,57:A,58:k,59:L,60:P,61:R,62:I,63:D,64:B,65:O,66:N,67:F,68:z,69:U,70:G,71:H,72:j,73:V,74:W,75:$,76:Y,77:q,78:X,79:J,80:Z,81:K,82:Q,83:tt,84:et},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},t(nt,[2,20],{53:32,39:58,40:70,42:71,30:87,44:v,46:b,47:x,48:_,49:w,50:S,51:E,54:M,55:C,56:T,57:A,58:k,59:L,60:P,61:R,62:I,63:D,64:B,65:O,66:N,67:F,68:z,69:U,70:G,71:H,72:j,73:V,74:W,75:$,76:Y,77:q,78:X,79:J,80:Z,81:K,82:Q,83:tt,84:et}),t(nt,[2,21]),t(rt,[2,23],{15:[1,88]}),t(nt,[2,43],{15:[1,89]}),t(it,[2,26]),t(it,[2,27]),{35:[1,90]},{37:[1,91]},t(it,[2,30]),{45:92,85:93,86:at,87:st,89:ot,90:lt},{45:98,85:93,86:at,87:st,89:ot,90:lt},{45:99,85:93,86:at,87:st,89:ot,90:lt},{45:100,85:93,86:at,87:st,89:ot,90:lt},{45:101,85:93,86:at,87:st,89:ot,90:lt},{45:102,85:93,86:at,87:st,89:ot,90:lt},{45:103,85:93,86:at,87:st,89:ot,90:lt},{45:104,85:93,86:at,87:st,89:ot,90:lt},{45:105,85:93,86:at,87:st,89:ot,90:lt},{45:106,85:93,86:at,87:st,89:ot,90:lt},{45:107,85:93,86:at,87:st,89:ot,90:lt},{45:108,85:93,86:at,87:st,89:ot,90:lt},{45:109,85:93,86:at,87:st,89:ot,90:lt},{45:110,85:93,86:at,87:st,89:ot,90:lt},{45:111,85:93,86:at,87:st,89:ot,90:lt},{45:112,85:93,86:at,87:st,89:ot,90:lt},{45:113,85:93,86:at,87:st,89:ot,90:lt},{45:114,85:93,86:at,87:st,89:ot,90:lt},{45:115,85:93,86:at,87:st,89:ot,90:lt},{45:116,85:93,86:at,87:st,89:ot,90:lt},t(ct,[2,66]),{45:117,85:93,86:at,87:st,89:ot,90:lt},{45:118,85:93,86:at,87:st,89:ot,90:lt},{45:119,85:93,86:at,87:st,89:ot,90:lt},{45:120,85:93,86:at,87:st,89:ot,90:lt},{45:121,85:93,86:at,87:st,89:ot,90:lt},{45:122,85:93,86:at,87:st,89:ot,90:lt},{45:123,85:93,86:at,87:st,89:ot,90:lt},{45:124,85:93,86:at,87:st,89:ot,90:lt},{45:125,85:93,86:at,87:st,89:ot,90:lt},{45:126,85:93,86:at,87:st,89:ot,90:lt},{45:127,85:93,86:at,87:st,89:ot,90:lt},{30:128,39:58,40:70,42:71,44:v,46:b,47:x,48:_,49:w,50:S,51:E,53:32,54:M,55:C,56:T,57:A,58:k,59:L,60:P,61:R,62:I,63:D,64:B,65:O,66:N,67:F,68:z,69:U,70:G,71:H,72:j,73:V,74:W,75:$,76:Y,77:q,78:X,79:J,80:Z,81:K,82:Q,83:tt,84:et},{15:[1,130],43:[1,129]},{45:131,85:93,86:at,87:st,89:ot,90:lt},{45:132,85:93,86:at,87:st,89:ot,90:lt},{45:133,85:93,86:at,87:st,89:ot,90:lt},{45:134,85:93,86:at,87:st,89:ot,90:lt},{45:135,85:93,86:at,87:st,89:ot,90:lt},{45:136,85:93,86:at,87:st,89:ot,90:lt},{45:137,85:93,86:at,87:st,89:ot,90:lt},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},t(ut,[2,9]),{14:142,21:d},{21:[2,13]},{1:[2,15]},t(nt,[2,22]),t(rt,[2,24],{31:31,29:143,32:f,33:p,34:m,36:g,38:y}),t(nt,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:f,33:p,34:m,36:g,38:y,44:v,46:b,47:x,48:_,49:w,50:S,51:E,54:M,55:C,56:T,57:A,58:k,59:L,60:P,61:R,62:I,63:D,64:B,65:O,66:N,67:F,68:z,69:U,70:G,71:H,72:j,73:V,74:W,75:$,76:Y,77:q,78:X,79:J,80:Z,81:K,82:Q,83:tt,84:et}),t(it,[2,28]),t(it,[2,29]),t(ct,[2,46]),t(ht,[2,78],{85:93,45:145,86:at,87:st,89:ot,90:lt}),t(dt,[2,80]),{88:[1,146]},t(dt,[2,82]),t(dt,[2,83]),t(ct,[2,47]),t(ct,[2,48]),t(ct,[2,49]),t(ct,[2,50]),t(ct,[2,51]),t(ct,[2,52]),t(ct,[2,53]),t(ct,[2,54]),t(ct,[2,55]),t(ct,[2,56]),t(ct,[2,57]),t(ct,[2,58]),t(ct,[2,59]),t(ct,[2,60]),t(ct,[2,61]),t(ct,[2,62]),t(ct,[2,63]),t(ct,[2,64]),t(ct,[2,65]),t(ct,[2,67]),t(ct,[2,68]),t(ct,[2,69]),t(ct,[2,70]),t(ct,[2,71]),t(ct,[2,72]),t(ct,[2,73]),t(ct,[2,74]),t(ct,[2,75]),t(ct,[2,76]),t(ct,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},t(ft,[2,35]),t(ft,[2,36]),t(ft,[2,37]),t(ft,[2,38]),t(ft,[2,39]),t(ft,[2,40]),t(ft,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},t(rt,[2,25]),t(nt,[2,45]),t(ht,[2,79]),t(dt,[2,81]),t(ct,[2,31]),t(ct,[2,42]),t(pt,[2,32]),t(pt,[2,33],{15:[1,152]}),t(ut,[2,10]),t(pt,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],a=[],s=this.table,o="",l=0,c=0,u=2,h=1,d=a.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,typeof f.yylloc>"u"&&(f.yylloc={});var g=f.yylloc;a.push(g);var y=f.options&&f.options.ranges;function v(){var t;return"number"!=typeof(t=r.pop()||f.lex()||h)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,M,C,T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:((null===b||typeof b>"u")&&(b=v()),_=s[x]&&s[x][b]),typeof _>"u"||!_.length||!_[0]){var A="";for(S in C=[],s[x])this.terminals_[S]&&S>u&&C.push("'"+this.terminals_[S]+"'");A=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(b==h?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(A,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(f.yytext),a.push(f.yylloc),n.push(_[1]),b=null,c=f.yyleng,o=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(E=this.productions_[_[1]][1],T.$=i[i.length-E],T._$={first_line:a[a.length-(E||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(E||1)].first_column,last_column:a[a.length-1].last_column},y&&(T._$.range=[a[a.length-(E||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(T,[o,c,l,p.yy,_[1],i,a].concat(d)))<"u")return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),a=a.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(T.$),a.push(T._$),M=s[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},gt={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:case 78:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:case 21:case 75:break;case 19:c;break;case 20:return 15;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:case 58:return this.begin("rel_u"),76;case 59:case 60:return this.begin("rel_d"),77;case 61:case 62:return this.begin("rel_l"),78;case 63:case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:case 84:this.popState(),this.popState();break;case 74:case 76:return 90;case 77:this.begin("string");break;case 79:case 85:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};function yt(){this.yy={}}return mt.lexer=gt,yt.prototype=mt,mt.Parser=yt,new yt}();Bb.parser=Bb;const Ob=Bb,Nb=t=>null!==t.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/);let Fb=[],zb=[""],Ub="global",Gb="",Hb=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],jb=[],Vb="",Wb=!1,$b=4,Yb=2;var qb;const Xb=function(t,e,n,r,i,a,s,o,l){if(null==t||null==e||null==n||null==r)return;let c={};const u=jb.find((t=>t.from===e&&t.to===n));if(u?c=u:jb.push(c),c.type=t,c.from=e,c.to=n,c.label={text:r},null==i)c.techn={text:""};else if("object"==typeof i){let[t,e]=Object.entries(i)[0];c[t]={text:e}}else c.techn={text:i};if(null==a)c.descr={text:""};else if("object"==typeof a){let[t,e]=Object.entries(a)[0];c[t]={text:e}}else c.descr={text:a};if("object"==typeof s){let[t,e]=Object.entries(s)[0];c[t]=e}else c.sprite=s;if("object"==typeof o){let[t,e]=Object.entries(o)[0];c[t]=e}else c.tags=o;if("object"==typeof l){let[t,e]=Object.entries(l)[0];c[t]=e}else c.link=l;c.wrap=ix()},Jb=function(t,e,n,r,i,a,s){if(null===e||null===n)return;let o={};const l=Fb.find((t=>t.alias===e));if(l&&e===l.alias?o=l:(o.alias=e,Fb.push(o)),o.label=null==n?{text:""}:{text:n},null==r)o.descr={text:""};else if("object"==typeof r){let[t,e]=Object.entries(r)[0];o[t]={text:e}}else o.descr={text:r};if("object"==typeof i){let[t,e]=Object.entries(i)[0];o[t]=e}else o.sprite=i;if("object"==typeof a){let[t,e]=Object.entries(a)[0];o[t]=e}else o.tags=a;if("object"==typeof s){let[t,e]=Object.entries(s)[0];o[t]=e}else o.link=s;o.typeC4Shape={text:t},o.parentBoundary=Ub,o.wrap=ix()},Zb=function(t,e,n,r,i,a,s,o){if(null===e||null===n)return;let l={};const c=Fb.find((t=>t.alias===e));if(c&&e===c.alias?l=c:(l.alias=e,Fb.push(l)),l.label=null==n?{text:""}:{text:n},null==r)l.techn={text:""};else if("object"==typeof r){let[t,e]=Object.entries(r)[0];l[t]={text:e}}else l.techn={text:r};if(null==i)l.descr={text:""};else if("object"==typeof i){let[t,e]=Object.entries(i)[0];l[t]={text:e}}else l.descr={text:i};if("object"==typeof a){let[t,e]=Object.entries(a)[0];l[t]=e}else l.sprite=a;if("object"==typeof s){let[t,e]=Object.entries(s)[0];l[t]=e}else l.tags=s;if("object"==typeof o){let[t,e]=Object.entries(o)[0];l[t]=e}else l.link=o;l.wrap=ix(),l.typeC4Shape={text:t},l.parentBoundary=Ub},Kb=function(t,e,n,r,i,a,s,o){if(null===e||null===n)return;let l={};const c=Fb.find((t=>t.alias===e));if(c&&e===c.alias?l=c:(l.alias=e,Fb.push(l)),l.label=null==n?{text:""}:{text:n},null==r)l.techn={text:""};else if("object"==typeof r){let[t,e]=Object.entries(r)[0];l[t]={text:e}}else l.techn={text:r};if(null==i)l.descr={text:""};else if("object"==typeof i){let[t,e]=Object.entries(i)[0];l[t]={text:e}}else l.descr={text:i};if("object"==typeof a){let[t,e]=Object.entries(a)[0];l[t]=e}else l.sprite=a;if("object"==typeof s){let[t,e]=Object.entries(s)[0];l[t]=e}else l.tags=s;if("object"==typeof o){let[t,e]=Object.entries(o)[0];l[t]=e}else l.link=o;l.wrap=ix(),l.typeC4Shape={text:t},l.parentBoundary=Ub},Qb=function(t,e,n,r,i){if(null===t||null===e)return;let a={};const s=Hb.find((e=>e.alias===t));if(s&&t===s.alias?a=s:(a.alias=t,Hb.push(a)),a.label=null==e?{text:""}:{text:e},null==n)a.type={text:"system"};else if("object"==typeof n){let[t,e]=Object.entries(n)[0];a[t]={text:e}}else a.type={text:n};if("object"==typeof r){let[t,e]=Object.entries(r)[0];a[t]=e}else a.tags=r;if("object"==typeof i){let[t,e]=Object.entries(i)[0];a[t]=e}else a.link=i;a.parentBoundary=Ub,a.wrap=ix(),Gb=Ub,Ub=t,zb.push(Gb)},tx=function(t,e,n,r,i){if(null===t||null===e)return;let a={};const s=Hb.find((e=>e.alias===t));if(s&&t===s.alias?a=s:(a.alias=t,Hb.push(a)),a.label=null==e?{text:""}:{text:e},null==n)a.type={text:"container"};else if("object"==typeof n){let[t,e]=Object.entries(n)[0];a[t]={text:e}}else a.type={text:n};if("object"==typeof r){let[t,e]=Object.entries(r)[0];a[t]=e}else a.tags=r;if("object"==typeof i){let[t,e]=Object.entries(i)[0];a[t]=e}else a.link=i;a.parentBoundary=Ub,a.wrap=ix(),Gb=Ub,Ub=t,zb.push(Gb)},ex=function(t,e,n,r,i,a,s,o){if(null===e||null===n)return;let l={};const c=Hb.find((t=>t.alias===e));if(c&&e===c.alias?l=c:(l.alias=e,Hb.push(l)),l.label=null==n?{text:""}:{text:n},null==r)l.type={text:"node"};else if("object"==typeof r){let[t,e]=Object.entries(r)[0];l[t]={text:e}}else l.type={text:r};if(null==i)l.descr={text:""};else if("object"==typeof i){let[t,e]=Object.entries(i)[0];l[t]={text:e}}else l.descr={text:i};if("object"==typeof s){let[t,e]=Object.entries(s)[0];l[t]=e}else l.tags=s;if("object"==typeof o){let[t,e]=Object.entries(o)[0];l[t]=e}else l.link=o;l.nodeType=t,l.parentBoundary=Ub,l.wrap=ix(),Gb=Ub,Ub=e,zb.push(Gb)},nx=function(t){return null==t?Fb:Fb.filter((e=>e.parentBoundary===t))},rx=function(t){return Object.keys(nx(t))},ix=function(){return Wb},ax={addPersonOrSystem:Jb,addPersonOrSystemBoundary:Qb,addContainer:Zb,addContainerBoundary:tx,addComponent:Kb,addDeploymentNode:ex,popBoundaryParseStack:function(){Ub=Gb,zb.pop(),Gb=zb.pop(),zb.push(Gb)},addRel:Xb,updateElStyle:function(t,e,n,r,i,a,s,o,l,c,u){let h=Fb.find((t=>t.alias===e));if(void 0!==h||(h=Hb.find((t=>t.alias===e)),void 0!==h)){if(null!=n)if("object"==typeof n){let[t,e]=Object.entries(n)[0];h[t]=e}else h.bgColor=n;if(null!=r)if("object"==typeof r){let[t,e]=Object.entries(r)[0];h[t]=e}else h.fontColor=r;if(null!=i)if("object"==typeof i){let[t,e]=Object.entries(i)[0];h[t]=e}else h.borderColor=i;if(null!=a)if("object"==typeof a){let[t,e]=Object.entries(a)[0];h[t]=e}else h.shadowing=a;if(null!=s)if("object"==typeof s){let[t,e]=Object.entries(s)[0];h[t]=e}else h.shape=s;if(null!=o)if("object"==typeof o){let[t,e]=Object.entries(o)[0];h[t]=e}else h.sprite=o;if(null!=l)if("object"==typeof l){let[t,e]=Object.entries(l)[0];h[t]=e}else h.techn=l;if(null!=c)if("object"==typeof c){let[t,e]=Object.entries(c)[0];h[t]=e}else h.legendText=c;if(null!=u)if("object"==typeof u){let[t,e]=Object.entries(u)[0];h[t]=e}else h.legendSprite=u}},updateRelStyle:function(t,e,n,r,i,a,s){const o=jb.find((t=>t.from===e&&t.to===n));if(void 0!==o){if(null!=r)if("object"==typeof r){let[t,e]=Object.entries(r)[0];o[t]=e}else o.textColor=r;if(null!=i)if("object"==typeof i){let[t,e]=Object.entries(i)[0];o[t]=e}else o.lineColor=i;if(null!=a)if("object"==typeof a){let[t,e]=Object.entries(a)[0];o[t]=parseInt(e)}else o.offsetX=parseInt(a);if(null!=s)if("object"==typeof s){let[t,e]=Object.entries(s)[0];o[t]=parseInt(e)}else o.offsetY=parseInt(s)}},updateLayoutConfig:function(t,e,n){let r=$b,i=Yb;if("object"==typeof e){const t=Object.values(e)[0];r=parseInt(t)}else r=parseInt(e);if("object"==typeof n){const t=Object.values(n)[0];i=parseInt(t)}else i=parseInt(n);r>=1&&($b=r),i>=1&&(Yb=i)},autoWrap:ix,setWrap:function(t){Wb=t},getC4ShapeArray:nx,getC4Shape:function(t){return Fb.find((e=>e.alias===t))},getC4ShapeKeys:rx,getBoundarys:function(t){return null==t?Hb:Hb.filter((e=>e.parentBoundary===t))},getCurrentBoundaryParse:function(){return Ub},getParentBoundaryParse:function(){return Gb},getRels:function(){return jb},getTitle:function(){return Vb},getC4Type:function(){return qb},getC4ShapeInRow:function(){return $b},getC4BoundaryInRow:function(){return Yb},setAccTitle:jv,getAccTitle:Vv,getAccDescription:$v,setAccDescription:Wv,parseDirective:function(t,e,n){iH.parseDirective(this,t,e,n)},getConfig:()=>tv().c4,clear:function(){Fb=[],Hb=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Gb="",Ub="global",zb=[""],jb=[],zb=[""],Vb="",Wb=!1,$b=4,Yb=2},LINETYPE:{SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},setTitle:function(t){Vb=kh(t,tv())},setC4Type:function(t){qb=kh(t,tv())}},sx=function(t,e){const n=t.append("rect");if(n.attr("x",e.x),n.attr("y",e.y),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("width",e.width),n.attr("height",e.height),n.attr("rx",e.rx),n.attr("ry",e.ry),"undefined"!==e.attrs&&null!==e.attrs)for(let r in e.attrs)n.attr(r,e.attrs[r]);return"undefined"!==e.class&&n.attr("class",e.class),n},ox=function(t,e,n,r,i,a){const s=t.append("image");s.attr("width",e),s.attr("height",n),s.attr("x",r),s.attr("y",i);let o=a.startsWith("data:image/png;base64")?a:y(a);s.attr("xlink:href",o)},lx=(t,e,n)=>{const r=t.append("g");let i=0;for(let a of e){let t=a.textColor?a.textColor:"#444444",e=a.lineColor?a.lineColor:"#444444",s=a.offsetX?parseInt(a.offsetX):0,o=a.offsetY?parseInt(a.offsetY):0,l="";if(0===i){let t=r.append("line");t.attr("x1",a.startPoint.x),t.attr("y1",a.startPoint.y),t.attr("x2",a.endPoint.x),t.attr("y2",a.endPoint.y),t.attr("stroke-width","1"),t.attr("stroke",e),t.style("fill","none"),"rel_b"!==a.type&&t.attr("marker-end","url("+l+"#arrowhead)"),("birel"===a.type||"rel_b"===a.type)&&t.attr("marker-start","url("+l+"#arrowend)"),i=-1}else{let t=r.append("path");t.attr("fill","none").attr("stroke-width","1").attr("stroke",e).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",a.startPoint.x).replaceAll("starty",a.startPoint.y).replaceAll("controlx",a.startPoint.x+(a.endPoint.x-a.startPoint.x)/2-(a.endPoint.x-a.startPoint.x)/4).replaceAll("controly",a.startPoint.y+(a.endPoint.y-a.startPoint.y)/2).replaceAll("stopx",a.endPoint.x).replaceAll("stopy",a.endPoint.y)),"rel_b"!==a.type&&t.attr("marker-end","url("+l+"#arrowhead)"),("birel"===a.type||"rel_b"===a.type)&&t.attr("marker-start","url("+l+"#arrowend)")}let c=n.messageFont();_x(n)(a.label.text,r,Math.min(a.startPoint.x,a.endPoint.x)+Math.abs(a.endPoint.x-a.startPoint.x)/2+s,Math.min(a.startPoint.y,a.endPoint.y)+Math.abs(a.endPoint.y-a.startPoint.y)/2+o,a.label.width,a.label.height,{fill:t},c),a.techn&&""!==a.techn.text&&(c=n.messageFont(),_x(n)("["+a.techn.text+"]",r,Math.min(a.startPoint.x,a.endPoint.x)+Math.abs(a.endPoint.x-a.startPoint.x)/2+s,Math.min(a.startPoint.y,a.endPoint.y)+Math.abs(a.endPoint.y-a.startPoint.y)/2+n.messageFontSize+5+o,Math.max(a.label.width,a.techn.width),a.techn.height,{fill:t,"font-style":"italic"},c))}},cx=function(t,e,n){const r=t.append("g");let i=e.bgColor?e.bgColor:"none",a=e.borderColor?e.borderColor:"#444444",s=e.fontColor?e.fontColor:"black",o={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(o={"stroke-width":1});let l={x:e.x,y:e.y,fill:i,stroke:a,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:o};sx(r,l);let c=n.boundaryFont();c.fontWeight="bold",c.fontSize=c.fontSize+2,c.fontColor=s,_x(n)(e.label.text,r,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},c),e.type&&""!==e.type.text&&(c=n.boundaryFont(),c.fontColor=s,_x(n)(e.type.text,r,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},c)),e.descr&&""!==e.descr.text&&(c=n.boundaryFont(),c.fontSize=c.fontSize-2,c.fontColor=s,_x(n)(e.descr.text,r,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},c))},ux=function(t,e,n){let r=e.bgColor?e.bgColor:n[e.typeC4Shape.text+"_bg_color"],i=e.borderColor?e.borderColor:n[e.typeC4Shape.text+"_border_color"],a=e.fontColor?e.fontColor:"#FFFFFF",s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII="}const o=t.append("g");o.attr("class","person-man");const l=bx();switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":l.x=e.x,l.y=e.y,l.fill=r,l.width=e.width,l.height=e.height,l.style="stroke:"+i+";stroke-width:0.5;",l.rx=2.5,l.ry=2.5,sx(o,l);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":o.append("path").attr("fill",r).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":o.append("path").attr("fill",r).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2))}let c=xx(n,e.typeC4Shape.text);switch(o.append("text").attr("fill",a).attr("font-family",c.fontFamily).attr("font-size",c.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":ox(o,48,48,e.x+e.width/2-24,e.y+e.image.Y,s)}let u=n[e.typeC4Shape.text+"Font"]();return u.fontWeight="bold",u.fontSize=u.fontSize+2,u.fontColor=a,_x(n)(e.label.text,o,e.x,e.y+e.label.Y,e.width,e.height,{fill:a},u),u=n[e.typeC4Shape.text+"Font"](),u.fontColor=a,e.thchn&&""!==e.thchn.text?_x(n)(e.thchn.text,o,e.x,e.y+e.thchn.Y,e.width,e.height,{fill:a,"font-style":"italic"},u):e.type&&""!==e.type.text&&_x(n)(e.type.text,o,e.x,e.y+e.type.Y,e.width,e.height,{fill:a,"font-style":"italic"},u),e.descr&&""!==e.descr.text&&(u=n.personFont(),u.fontColor=a,_x(n)(e.descr.text,o,e.x,e.y+e.descr.Y,e.width,e.height,{fill:a},u)),e.height},hx=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},dx=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},fx=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},px=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},mx=function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},gx=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},yx=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},vx=function(t){const e=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);e.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),e.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},bx=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},xx=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),_x=function(){function t(t,e,n,i,a,s,o){r(e.append("text").attr("x",n+a/2).attr("y",i+s/2+5).style("text-anchor","middle").text(t),o)}function e(t,e,n,i,a,s,o,l){const{fontSize:c,fontFamily:u,fontWeight:h}=l,d=t.split(Oh.lineBreakRegex);for(let f=0;f<d.length;f++){const t=f*c-c*(d.length-1)/2,s=e.append("text").attr("x",n+a/2).attr("y",i).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",c).style("font-weight",h).style("font-family",u);s.append("tspan").attr("dy",t).text(d[f]).attr("alignment-baseline","mathematical"),r(s,o)}}function n(t,n,i,a,s,o,l,c){const u=n.append("switch"),h=u.append("foreignObject").attr("x",i).attr("y",a).attr("width",s).attr("height",o).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");h.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),e(t,u,i,a,s,o,l,c),r(h,l)}function r(t,e){for(const n in e)e.hasOwnProperty(n)&&t.attr(n,e[n])}return function(r){return"fo"===r.textPlacement?n:"old"===r.textPlacement?t:e}}(),wx={drawRect:sx,drawBoundary:cx,drawC4Shape:ux,drawRels:lx,drawImage:ox,insertArrowHead:px,insertArrowEnd:mx,insertArrowFilledHead:gx,insertDynamicNumber:yx,insertArrowCrossHead:vx,insertDatabaseIcon:hx,insertComputerIcon:dx,insertClockIcon:fx,getNoteRect:bx,sanitizeUrl:y};let Sx=0,Ex=0,Mx=4,Cx=2;Bb.yy=ax;let Tx={};class Ax{constructor(t){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,kx(t.db.getConfig())}setData(t,e,n,r){this.nextData.startx=this.data.startx=t,this.nextData.stopx=this.data.stopx=e,this.nextData.starty=this.data.starty=n,this.nextData.stopy=this.data.stopy=r}updateVal(t,e,n,r){void 0===t[e]?t[e]=n:t[e]=r(n,t[e])}insert(t){this.nextData.cnt=this.nextData.cnt+1;let e=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+t.margin:this.nextData.stopx+2*t.margin,n=e+t.width,r=this.nextData.starty+2*t.margin,i=r+t.height;(e>=this.data.widthLimit||n>=this.data.widthLimit||this.nextData.cnt>Mx)&&(e=this.nextData.startx+t.margin+Tx.nextLinePaddingX,r=this.nextData.stopy+2*t.margin,this.nextData.stopx=n=e+t.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=i=r+t.height,this.nextData.cnt=1),t.x=e,t.y=r,this.updateVal(this.data,"startx",e,Math.min),this.updateVal(this.data,"starty",r,Math.min),this.updateVal(this.data,"stopx",n,Math.max),this.updateVal(this.data,"stopy",i,Math.max),this.updateVal(this.nextData,"startx",e,Math.min),this.updateVal(this.nextData,"starty",r,Math.min),this.updateVal(this.nextData,"stopx",n,Math.max),this.updateVal(this.nextData,"stopy",i,Math.max)}init(t){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},kx(t.db.getConfig())}bumpLastMargin(t){this.data.stopx+=t,this.data.stopy+=t}}const kx=function(t){sm(Tx,t),t.fontFamily&&(Tx.personFontFamily=Tx.systemFontFamily=Tx.messageFontFamily=t.fontFamily),t.fontSize&&(Tx.personFontSize=Tx.systemFontSize=Tx.messageFontSize=t.fontSize),t.fontWeight&&(Tx.personFontWeight=Tx.systemFontWeight=Tx.messageFontWeight=t.fontWeight)},Lx=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),Px=t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight}),Rx=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight});function Ix(t,e,n,r,i){if(!e[t].width)if(n)e[t].text=Gg(e[t].text,i,r),e[t].textLines=e[t].text.split(Oh.lineBreakRegex).length,e[t].width=i,e[t].height=jg(e[t].text,r);else{let n=e[t].text.split(Oh.lineBreakRegex);e[t].textLines=n.length;let i=0;e[t].height=0,e[t].width=0;for(const a of n)e[t].width=Math.max(Vg(a,r),e[t].width),i=jg(a,r),e[t].height=e[t].height+i}}const Dx=function(t,e,n){e.x=n.data.startx,e.y=n.data.starty,e.width=n.data.stopx-n.data.startx,e.height=n.data.stopy-n.data.starty,e.label.y=Tx.c4ShapeMargin-35;let r=e.wrap&&Tx.wrap,i=Px(Tx);i.fontSize=i.fontSize+2,i.fontWeight="bold",Ix("label",e,r,i,Vg(e.label.text,i)),wx.drawBoundary(t,e,Tx)},Bx=function(t,e,n,r){let i=0;for(const a of r){i=0;const r=n[a];let s=Lx(Tx,r.typeC4Shape.text);switch(s.fontSize=s.fontSize-2,r.typeC4Shape.width=Vg("<<"+r.typeC4Shape.text+">>",s),r.typeC4Shape.height=s.fontSize+2,r.typeC4Shape.Y=Tx.c4ShapePadding,i=r.typeC4Shape.Y+r.typeC4Shape.height-4,r.image={width:0,height:0,Y:0},r.typeC4Shape.text){case"person":case"external_person":r.image.width=48,r.image.height=48,r.image.Y=i,i=r.image.Y+r.image.height}r.sprite&&(r.image.width=48,r.image.height=48,r.image.Y=i,i=r.image.Y+r.image.height);let o=r.wrap&&Tx.wrap,l=Tx.width-2*Tx.c4ShapePadding,c=Lx(Tx,r.typeC4Shape.text);c.fontSize=c.fontSize+2,c.fontWeight="bold",Ix("label",r,o,c,l),r.label.Y=i+8,i=r.label.Y+r.label.height,r.type&&""!==r.type.text?(r.type.text="["+r.type.text+"]",Ix("type",r,o,Lx(Tx,r.typeC4Shape.text),l),r.type.Y=i+5,i=r.type.Y+r.type.height):r.techn&&""!==r.techn.text&&(r.techn.text="["+r.techn.text+"]",Ix("techn",r,o,Lx(Tx,r.techn.text),l),r.techn.Y=i+5,i=r.techn.Y+r.techn.height);let u=i,h=r.label.width;r.descr&&""!==r.descr.text&&(Ix("descr",r,o,Lx(Tx,r.typeC4Shape.text),l),r.descr.Y=i+20,i=r.descr.Y+r.descr.height,h=Math.max(r.label.width,r.descr.width),u=i-5*r.descr.textLines),h+=Tx.c4ShapePadding,r.width=Math.max(r.width||Tx.width,h,Tx.width),r.height=Math.max(r.height||Tx.height,u,Tx.height),r.margin=r.margin||Tx.c4ShapeMargin,t.insert(r),wx.drawC4Shape(e,r,Tx)}t.bumpLastMargin(Tx.c4ShapeMargin)};class Ox{constructor(t,e){this.x=t,this.y=e}}let Nx=function(t,e){let n=t.x,r=t.y,i=e.x,a=e.y,s=n+t.width/2,o=r+t.height/2,l=Math.abs(n-i),c=Math.abs(r-a),u=c/l,h=t.height/t.width,d=null;return r==a&&n<i?d=new Ox(n+t.width,o):r==a&&n>i?d=new Ox(n,o):n==i&&r<a?d=new Ox(s,r+t.height):n==i&&r>a&&(d=new Ox(s,r)),n>i&&r<a?d=h>=u?new Ox(n,o+u*t.width/2):new Ox(s-l/c*t.height/2,r+t.height):n<i&&r<a?d=h>=u?new Ox(n+t.width,o+u*t.width/2):new Ox(s+l/c*t.height/2,r+t.height):n<i&&r>a?d=h>=u?new Ox(n+t.width,o-u*t.width/2):new Ox(s+t.height/2*l/c,r):n>i&&r>a&&(d=h>=u?new Ox(n,o-t.width/2*u):new Ox(s-t.height/2*l/c,r)),d},Fx=function(t,e){let n={x:0,y:0};n.x=e.x+e.width/2,n.y=e.y+e.height/2;let r=Nx(t,n);return n.x=t.x+t.width/2,n.y=t.y+t.height/2,{startPoint:r,endPoint:Nx(e,n)}};const zx=function(t,e,n,r){let i=0;for(let a of e){i+=1;let t=a.wrap&&Tx.wrap,e=Rx(Tx);"C4Dynamic"===r.db.getC4Type()&&(a.label.text=i+": "+a.label.text);let s=Vg(a.label.text,e);Ix("label",a,t,e,s),a.techn&&""!==a.techn.text&&(s=Vg(a.techn.text,e),Ix("techn",a,t,e,s)),a.descr&&""!==a.descr.text&&(s=Vg(a.descr.text,e),Ix("descr",a,t,e,s));let o=n(a.from),l=n(a.to),c=Fx(o,l);a.startPoint=c.startPoint,a.endPoint=c.endPoint}wx.drawRels(t,e,Tx)};function Ux(t,e,n,r,i){let a=new Ax(i);a.data.widthLimit=n.data.widthLimit/Math.min(Cx,r.length);for(let[s,o]of r.entries()){let r=0;o.image={width:0,height:0,Y:0},o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=r,r=o.image.Y+o.image.height);let l=o.wrap&&Tx.wrap,c=Px(Tx);if(c.fontSize=c.fontSize+2,c.fontWeight="bold",Ix("label",o,l,c,a.data.widthLimit),o.label.Y=r+8,r=o.label.Y+o.label.height,o.type&&""!==o.type.text&&(o.type.text="["+o.type.text+"]",Ix("type",o,l,Px(Tx),a.data.widthLimit),o.type.Y=r+5,r=o.type.Y+o.type.height),o.descr&&""!==o.descr.text){let t=Px(Tx);t.fontSize=t.fontSize-2,Ix("descr",o,l,t,a.data.widthLimit),o.descr.Y=r+20,r=o.descr.Y+o.descr.height}if(0==s||s%Cx==0){let t=n.data.startx+Tx.diagramMarginX,e=n.data.stopy+Tx.diagramMarginY+r;a.setData(t,t,e,e)}else{let t=a.data.stopx!==a.data.startx?a.data.stopx+Tx.diagramMarginX:a.data.startx,e=a.data.starty;a.setData(t,t,e,e)}a.name=o.alias;let u=i.db.getC4ShapeArray(o.alias),h=i.db.getC4ShapeKeys(o.alias);h.length>0&&Bx(a,t,u,h),e=o.alias;let d=i.db.getBoundarys(e);d.length>0&&Ux(t,e,a,d,i),"global"!==o.alias&&Dx(t,o,a),n.data.stopy=Math.max(a.data.stopy+Tx.c4ShapeMargin,n.data.stopy),n.data.stopx=Math.max(a.data.stopx+Tx.c4ShapeMargin,n.data.stopx),Sx=Math.max(Sx,n.data.stopx),Ex=Math.max(Ex,n.data.stopy)}}const Gx={drawPersonOrSystemArray:Bx,drawBoundary:Dx,setConf:kx,draw:function(t,e,n,r){Tx=tv().c4;const i=tv().securityLevel;let a;"sandbox"===i&&(a=dn("#i"+e));const s=dn("sandbox"===i?a.nodes()[0].contentDocument.body:"body");let o=r.db;r.db.setWrap(Tx.wrap),Mx=o.getC4ShapeInRow(),Cx=o.getC4BoundaryInRow(),f.debug(`C:${JSON.stringify(Tx,null,2)}`);const l="sandbox"===i?s.select(`[id="${e}"]`):dn(`[id="${e}"]`);wx.insertComputerIcon(l),wx.insertDatabaseIcon(l),wx.insertClockIcon(l);let c=new Ax(r);c.setData(Tx.diagramMarginX,Tx.diagramMarginX,Tx.diagramMarginY,Tx.diagramMarginY),c.data.widthLimit=screen.availWidth,Sx=Tx.diagramMarginX,Ex=Tx.diagramMarginY;const u=r.db.getTitle();Ux(l,"",c,r.db.getBoundarys(""),r),wx.insertArrowHead(l),wx.insertArrowEnd(l),wx.insertArrowCrossHead(l),wx.insertArrowFilledHead(l),zx(l,r.db.getRels(),r.db.getC4Shape,r),c.data.stopx=Sx,c.data.stopy=Ex;const h=c.data;let d=h.stopy-h.starty+2*Tx.diagramMarginY;const p=h.stopx-h.startx+2*Tx.diagramMarginX;u&&l.append("text").text(u).attr("x",(h.stopx-h.startx)/2-4*Tx.diagramMarginX).attr("y",h.starty+Tx.diagramMarginY),uv(l,d,p,Tx.useMaxWidth);const m=u?60:0;l.attr("viewBox",h.startx-Tx.diagramMarginX+" -"+(Tx.diagramMarginY+m)+" "+p+" "+(d+m)),f.debug("models:",h)}};var Hx=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,3],n=[1,7],r=[1,8],i=[1,9],a=[1,10],s=[1,13],o=[1,12],l=[1,16,25],c=[1,20],u=[1,32],h=[1,33],d=[1,34],f=[1,36],p=[1,39],m=[1,37],g=[1,38],y=[1,44],v=[1,45],b=[1,40],x=[1,41],_=[1,42],w=[1,43],S=[1,48],E=[1,49],M=[1,50],C=[1,51],T=[16,25],A=[1,65],k=[1,66],L=[1,67],P=[1,68],R=[1,69],I=[1,70],D=[1,71],B=[1,80],O=[16,25,32,45,46,54,60,61,62,63,64,65,66,71,73],N=[16,25,30,32,45,46,50,54,60,61,62,63,64,65,66,71,73,88,89,90,91],F=[5,8,9,10,11,16,19,23,25],z=[54,88,89,90,91],U=[54,65,66,88,89,90,91],G=[54,60,61,62,63,64,88,89,90,91],H=[16,25,32],j=[1,107],V={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,noteStatement:38,acc_title:39,acc_title_value:40,acc_descr:41,acc_descr_value:42,acc_descr_multiline_value:43,CLASS:44,STYLE_SEPARATOR:45,STRUCT_START:46,members:47,STRUCT_STOP:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,STR:54,NOTE_FOR:55,noteText:56,NOTE:57,relationType:58,lineType:59,AGGREGATION:60,EXTENSION:61,COMPOSITION:62,DEPENDENCY:63,LOLLIPOP:64,LINE:65,DOTTED_LINE:66,CALLBACK:67,LINK:68,LINK_TARGET:69,CLICK:70,CALLBACK_NAME:71,CALLBACK_ARGS:72,HREF:73,CSSCLASS:74,commentToken:75,textToken:76,graphCodeTokens:77,textNoTagsToken:78,TAGSTART:79,TAGEND:80,"==":81,"--":82,PCT:83,DEFAULT:84,SPACE:85,MINUS:86,keywords:87,UNICODE_TEXT:88,NUM:89,ALPHA:90,BQUOTE_STR:91,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",39:"acc_title",40:"acc_title_value",41:"acc_descr",42:"acc_descr_value",43:"acc_descr_multiline_value",44:"CLASS",45:"STYLE_SEPARATOR",46:"STRUCT_START",48:"STRUCT_STOP",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"STR",55:"NOTE_FOR",57:"NOTE",60:"AGGREGATION",61:"EXTENSION",62:"COMPOSITION",63:"DEPENDENCY",64:"LOLLIPOP",65:"LINE",66:"DOTTED_LINE",67:"CALLBACK",68:"LINK",69:"LINK_TARGET",70:"CLICK",71:"CALLBACK_NAME",72:"CALLBACK_ARGS",73:"HREF",74:"CSSCLASS",77:"graphCodeTokens",79:"TAGSTART",80:"TAGEND",81:"==",82:"--",83:"PCT",84:"DEFAULT",85:"SPACE",86:"MINUS",87:"keywords",88:"UNICODE_TEXT",89:"NUM",90:"ALPHA",91:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[47,1],[47,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[38,3],[38,2],[53,3],[53,2],[53,2],[53,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[75,1],[75,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[78,1],[78,1],[78,1],[78,1],[28,1],[28,1],[28,1],[29,1],[56,1]],performAction:function(t,e,n,r,i,a,s){var o=a.length-1;switch(i){case 5:r.setDirection("TB");break;case 6:r.setDirection("BT");break;case 7:r.setDirection("RL");break;case 8:r.setDirection("LR");break;case 12:r.parseDirective("%%{","open_directive");break;case 13:r.parseDirective(a[o],"type_directive");break;case 14:a[o]=a[o].trim().replace(/'/g,'"'),r.parseDirective(a[o],"arg_directive");break;case 15:r.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=a[o];break;case 22:this.$=a[o-1]+a[o];break;case 23:case 24:this.$=a[o-1]+"~"+a[o];break;case 25:r.addRelation(a[o]);break;case 26:a[o-1].title=r.cleanupLabel(a[o]),r.addRelation(a[o-1]);break;case 35:this.$=a[o].trim(),r.setAccTitle(this.$);break;case 36:case 37:this.$=a[o].trim(),r.setAccDescription(this.$);break;case 38:r.addClass(a[o]);break;case 39:r.addClass(a[o-2]),r.setCssClass(a[o-2],a[o]);break;case 40:r.addClass(a[o-3]),r.addMembers(a[o-3],a[o-1]);break;case 41:r.addClass(a[o-5]),r.setCssClass(a[o-5],a[o-3]),r.addMembers(a[o-5],a[o-1]);break;case 42:r.addAnnotation(a[o],a[o-2]);break;case 43:this.$=[a[o]];break;case 44:a[o].push(a[o-1]),this.$=a[o];break;case 45:case 47:case 48:break;case 46:r.addMember(a[o-1],r.cleanupLabel(a[o]));break;case 49:this.$={id1:a[o-2],id2:a[o],relation:a[o-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:a[o-3],id2:a[o],relation:a[o-1],relationTitle1:a[o-2],relationTitle2:"none"};break;case 51:this.$={id1:a[o-3],id2:a[o],relation:a[o-2],relationTitle1:"none",relationTitle2:a[o-1]};break;case 52:this.$={id1:a[o-4],id2:a[o],relation:a[o-2],relationTitle1:a[o-3],relationTitle2:a[o-1]};break;case 53:r.addNote(a[o],a[o-1]);break;case 54:r.addNote(a[o]);break;case 55:this.$={type1:a[o-2],type2:a[o],lineType:a[o-1]};break;case 56:this.$={type1:"none",type2:a[o],lineType:a[o-1]};break;case 57:this.$={type1:a[o-1],type2:"none",lineType:a[o]};break;case 58:this.$={type1:"none",type2:"none",lineType:a[o]};break;case 59:this.$=r.relationType.AGGREGATION;break;case 60:this.$=r.relationType.EXTENSION;break;case 61:this.$=r.relationType.COMPOSITION;break;case 62:this.$=r.relationType.DEPENDENCY;break;case 63:this.$=r.relationType.LOLLIPOP;break;case 64:this.$=r.lineType.LINE;break;case 65:this.$=r.lineType.DOTTED_LINE;break;case 66:case 72:this.$=a[o-2],r.setClickEvent(a[o-1],a[o]);break;case 67:case 73:this.$=a[o-3],r.setClickEvent(a[o-2],a[o-1]),r.setTooltip(a[o-2],a[o]);break;case 68:case 76:this.$=a[o-2],r.setLink(a[o-1],a[o]);break;case 69:case 77:this.$=a[o-3],r.setLink(a[o-2],a[o-1],a[o]);break;case 70:case 78:this.$=a[o-3],r.setLink(a[o-2],a[o-1]),r.setTooltip(a[o-2],a[o]);break;case 71:case 79:this.$=a[o-4],r.setLink(a[o-3],a[o-2],a[o]),r.setTooltip(a[o-3],a[o-1]);break;case 74:this.$=a[o-3],r.setClickEvent(a[o-2],a[o-1],a[o]);break;case 75:this.$=a[o-4],r.setClickEvent(a[o-3],a[o-2],a[o-1]),r.setTooltip(a[o-3],a[o]);break;case 80:r.setCssClass(a[o-1],a[o])}},table:[{3:1,4:2,5:e,6:4,7:5,8:n,9:r,10:i,11:a,12:6,13:11,19:s,23:o},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:e,6:4,7:5,8:n,9:r,10:i,11:a,12:6,13:11,19:s,23:o},{1:[2,9]},t(l,[2,5]),t(l,[2,6]),t(l,[2,7]),t(l,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:c},t([17,22],[2,13]),{6:31,7:30,8:n,9:r,10:i,11:a,13:11,19:s,24:21,26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:u,41:h,43:d,44:f,49:p,51:m,52:g,55:y,57:v,67:b,68:x,70:_,74:w,88:S,89:E,90:M,91:C},{16:[1,52]},{18:53,21:[1,54]},{16:[2,15]},{25:[1,55]},{16:[1,56],25:[2,17]},t(T,[2,25],{32:[1,57]}),t(T,[2,27]),t(T,[2,28]),t(T,[2,29]),t(T,[2,30]),t(T,[2,31]),t(T,[2,32]),t(T,[2,33]),t(T,[2,34]),{40:[1,58]},{42:[1,59]},t(T,[2,37]),t(T,[2,45],{53:60,58:63,59:64,32:[1,62],54:[1,61],60:A,61:k,62:L,63:P,64:R,65:I,66:D}),{27:72,28:46,29:47,88:S,89:E,90:M,91:C},t(T,[2,47]),t(T,[2,48]),{28:73,88:S,89:E,90:M},{27:74,28:46,29:47,88:S,89:E,90:M,91:C},{27:75,28:46,29:47,88:S,89:E,90:M,91:C},{27:76,28:46,29:47,88:S,89:E,90:M,91:C},{54:[1,77]},{27:78,28:46,29:47,88:S,89:E,90:M,91:C},{54:B,56:79},t(O,[2,20],{28:46,29:47,27:81,30:[1,82],88:S,89:E,90:M,91:C}),t(O,[2,21],{30:[1,83]}),t(N,[2,94]),t(N,[2,95]),t(N,[2,96]),t([16,25,30,32,45,46,54,60,61,62,63,64,65,66,71,73],[2,97]),t(F,[2,10]),{15:84,22:c},{22:[2,14]},{1:[2,16]},{6:31,7:30,8:n,9:r,10:i,11:a,13:11,19:s,24:85,25:[2,18],26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:u,41:h,43:d,44:f,49:p,51:m,52:g,55:y,57:v,67:b,68:x,70:_,74:w,88:S,89:E,90:M,91:C},t(T,[2,26]),t(T,[2,35]),t(T,[2,36]),{27:86,28:46,29:47,54:[1,87],88:S,89:E,90:M,91:C},{53:88,58:63,59:64,60:A,61:k,62:L,63:P,64:R,65:I,66:D},t(T,[2,46]),{59:89,65:I,66:D},t(z,[2,58],{58:90,60:A,61:k,62:L,63:P,64:R}),t(U,[2,59]),t(U,[2,60]),t(U,[2,61]),t(U,[2,62]),t(U,[2,63]),t(G,[2,64]),t(G,[2,65]),t(T,[2,38],{45:[1,91],46:[1,92]}),{50:[1,93]},{54:[1,94]},{54:[1,95]},{71:[1,96],73:[1,97]},{28:98,88:S,89:E,90:M},{54:B,56:99},t(T,[2,54]),t(T,[2,98]),t(O,[2,22]),t(O,[2,23]),t(O,[2,24]),{16:[1,100]},{25:[2,19]},t(H,[2,49]),{27:101,28:46,29:47,88:S,89:E,90:M,91:C},{27:102,28:46,29:47,54:[1,103],88:S,89:E,90:M,91:C},t(z,[2,57],{58:104,60:A,61:k,62:L,63:P,64:R}),t(z,[2,56]),{28:105,88:S,89:E,90:M},{47:106,51:j},{27:108,28:46,29:47,88:S,89:E,90:M,91:C},t(T,[2,66],{54:[1,109]}),t(T,[2,68],{54:[1,111],69:[1,110]}),t(T,[2,72],{54:[1,112],72:[1,113]}),t(T,[2,76],{54:[1,115],69:[1,114]}),t(T,[2,80]),t(T,[2,53]),t(F,[2,11]),t(H,[2,51]),t(H,[2,50]),{27:116,28:46,29:47,88:S,89:E,90:M,91:C},t(z,[2,55]),t(T,[2,39],{46:[1,117]}),{48:[1,118]},{47:119,48:[2,43],51:j},t(T,[2,42]),t(T,[2,67]),t(T,[2,69]),t(T,[2,70],{69:[1,120]}),t(T,[2,73]),t(T,[2,74],{54:[1,121]}),t(T,[2,77]),t(T,[2,78],{69:[1,122]}),t(H,[2,52]),{47:123,51:j},t(T,[2,40]),{48:[2,44]},t(T,[2,71]),t(T,[2,75]),t(T,[2,79]),{48:[1,124]},t(T,[2,41])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],54:[2,14],55:[2,16],85:[2,19],119:[2,44]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],a=[],s=this.table,o="",l=0,c=0,u=2,h=1,d=a.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,typeof f.yylloc>"u"&&(f.yylloc={});var g=f.yylloc;a.push(g);var y=f.options&&f.options.ranges;function v(){var t;return"number"!=typeof(t=r.pop()||f.lex()||h)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,M,C,T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:((null===b||typeof b>"u")&&(b=v()),_=s[x]&&s[x][b]),typeof _>"u"||!_.length||!_[0]){var A="";for(S in C=[],s[x])this.terminals_[S]&&S>u&&C.push("'"+this.terminals_[S]+"'");A=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(b==h?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(A,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(f.yytext),a.push(f.yylloc),n.push(_[1]),b=null,c=f.yyleng,o=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(E=this.productions_[_[1]][1],T.$=i[i.length-E],T._$={first_line:a[a.length-(E||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(E||1)].first_column,last_column:a[a.length-1].last_column},y&&(T._$.range=[a[a.length-(E||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(T,[o,c,l,p.yy,_[1],i,a].concat(d)))<"u")return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),a=a.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(T.$),a.push(T._$),M=s[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},W={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:case 10:case 19:case 27:break;case 11:return this.begin("acc_title"),39;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),41;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:case 39:case 42:case 45:case 48:case 51:case 54:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 20:case 21:return 23;case 22:return this.begin("struct"),46;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),48;case 28:return"MEMBER";case 29:return 44;case 30:return 74;case 31:return 67;case 32:return 68;case 33:return 70;case 34:return 55;case 35:return 57;case 36:return 49;case 37:return 50;case 38:this.begin("generic");break;case 40:return"GENERICTYPE";case 41:this.begin("string");break;case 43:return"STR";case 44:this.begin("bqstring");break;case 46:return"BQUOTE_STR";case 47:this.begin("href");break;case 49:return 73;case 50:this.begin("callback_name");break;case 52:this.popState(),this.begin("callback_args");break;case 53:return 71;case 55:return 72;case 56:case 57:case 58:case 59:return 69;case 60:case 61:return 61;case 62:case 63:return 63;case 64:return 62;case 65:return 60;case 66:return 64;case 67:return 65;case 68:return 66;case 69:return 32;case 70:return 45;case 71:return 86;case 72:return"DOT";case 73:return"PLUS";case 74:return 83;case 75:case 76:return"EQUALS";case 77:return 90;case 78:return"PUNCTUATION";case 79:return 89;case 80:return 88;case 81:return 85;case 82:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[54,55],inclusive:!1},callback_name:{rules:[51,52,53],inclusive:!1},href:{rules:[48,49],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[39,40],inclusive:!1},bqstring:{rules:[45,46],inclusive:!1},string:{rules:[42,43],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,37,38,41,44,47,50,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],inclusive:!0}}};function $(){this.yy={}}return V.lexer=W,$.prototype=V,V.Parser=$,new $}();Hx.parser=Hx;const jx=Hx,Vx=(t,e)=>{var n;return"dagre-wrapper"!==(null==(n=null==e?void 0:e.class)?void 0:n.defaultRenderer)&&null!==t.match(/^\s*classDiagram/)},Wx=(t,e)=>{var n;return null!==t.match(/^\s*classDiagram/)&&"dagre-wrapper"===(null==(n=null==e?void 0:e.class)?void 0:n.defaultRenderer)||null!==t.match(/^\s*classDiagram-v2/)},$x="classid-";let Yx=[],qx={},Xx=[],Jx=0,Zx=[];const Kx=t=>Oh.sanitizeText(t,tv()),Qx=function(t,e,n){iH.parseDirective(this,t,e,n)},t_=function(t){let e="",n=t;if(t.indexOf("~")>0){let r=t.split("~");n=r[0],e=Oh.sanitizeText(r[1],tv())}return{className:n,type:e}},e_=function(t){let e=t_(t);void 0===qx[e.className]&&(qx[e.className]={id:e.className,type:e.type,cssClasses:[],methods:[],members:[],annotations:[],domId:$x+e.className+"-"+Jx},Jx++)},n_=function(t){const e=Object.keys(qx);for(const n of e)if(qx[n].id===t)return qx[n].domId},r_=function(){Yx=[],qx={},Xx=[],Zx=[],Zx.push(S_),Hv()},i_=function(t){return qx[t]},a_=function(){return qx},s_=function(){return Yx},o_=function(){return Xx},l_=function(t){f.debug("Adding relation: "+JSON.stringify(t)),e_(t.id1),e_(t.id2),t.id1=t_(t.id1).className,t.id2=t_(t.id2).className,t.relationTitle1=Oh.sanitizeText(t.relationTitle1.trim(),tv()),t.relationTitle2=Oh.sanitizeText(t.relationTitle2.trim(),tv()),Yx.push(t)},c_=function(t,e){const n=t_(t).className;qx[n].annotations.push(e)},u_=function(t,e){const n=t_(t).className,r=qx[n];if("string"==typeof e){const t=e.trim();t.startsWith("<<")&&t.endsWith(">>")?r.annotations.push(Kx(t.substring(2,t.length-2))):t.indexOf(")")>0?r.methods.push(Kx(t)):t&&r.members.push(Kx(t))}},h_=function(t,e){Array.isArray(e)&&(e.reverse(),e.forEach((e=>u_(t,e))))},d_=function(t,e){const n={id:`note${Xx.length}`,class:e,text:t};Xx.push(n)},f_=function(t){return":"===t.substring(0,1)?Oh.sanitizeText(t.substr(1).trim(),tv()):Kx(t.trim())},p_=function(t,e){t.split(",").forEach((function(t){let n=t;t[0].match(/\d/)&&(n=$x+n),void 0!==qx[n]&&qx[n].cssClasses.push(e)}))},m_=function(t,e){const n=tv();t.split(",").forEach((function(t){void 0!==e&&(qx[t].tooltip=Oh.sanitizeText(e,n))}))},g_=function(t){return qx[t].tooltip},y_=function(t,e,n){const r=tv();t.split(",").forEach((function(t){let i=t;t[0].match(/\d/)&&(i=$x+i),void 0!==qx[i]&&(qx[i].link=Zg.formatUrl(e,r),"sandbox"===r.securityLevel?qx[i].linkTarget="_top":qx[i].linkTarget="string"==typeof n?Kx(n):"_blank")})),p_(t,"clickable")},v_=function(t,e,n){t.split(",").forEach((function(t){b_(t,e,n),qx[t].haveCallback=!0})),p_(t,"clickable")},b_=function(t,e,n){const r=tv();let i=t,a=n_(i);if("loose"===r.securityLevel&&void 0!==e&&void 0!==qx[i]){let t=[];if("string"==typeof n){t=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let e=0;e<t.length;e++){let n=t[e].trim();'"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substr(1,n.length-2)),t[e]=n}}0===t.length&&t.push(a),Zx.push((function(){const n=document.querySelector(`[id="${a}"]`);null!==n&&n.addEventListener("click",(function(){Zg.runFunc(e,...t)}),!1)}))}},x_=function(t){Zx.forEach((function(e){e(t)}))},__={LINE:0,DOTTED_LINE:1},w_={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},S_=function(t){let e=dn(".mermaidTooltip");null===(e._groups||e)[0][0]&&(e=dn("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),dn(t).select("svg").selectAll("g.node").on("mouseover",(function(){const t=dn(this);if(null===t.attr("title"))return;const n=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(t.attr("title")).style("left",window.scrollX+n.left+(n.right-n.left)/2+"px").style("top",window.scrollY+n.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),t.classed("hover",!0)})).on("mouseout",(function(){e.transition().duration(500).style("opacity",0),dn(this).classed("hover",!1)}))};Zx.push(S_);let E_="TB";const M_={parseDirective:Qx,setAccTitle:jv,getAccTitle:Vv,getAccDescription:$v,setAccDescription:Wv,getConfig:()=>tv().class,addClass:e_,bindFunctions:x_,clear:r_,getClass:i_,getClasses:a_,getNotes:o_,addAnnotation:c_,addNote:d_,getRelations:s_,addRelation:l_,getDirection:()=>E_,setDirection:t=>{E_=t},addMember:u_,addMembers:h_,cleanupLabel:f_,lineType:__,relationType:w_,setClickEvent:v_,setCssClass:p_,setLink:y_,getTooltip:g_,setTooltip:m_,lookUpDomId:n_,setDiagramTitle:Yv,getDiagramTitle:qv};function C_(t){return null!=t&&"object"==typeof t}var T_="[object Symbol]";function A_(t){return"symbol"==typeof t||C_(t)&&_m(t)==T_}function k_(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}const L_=Array.isArray;var P_=1/0,R_=um?um.prototype:void 0,I_=R_?R_.toString:void 0;function D_(t){if("string"==typeof t)return t;if(L_(t))return k_(t,D_)+"";if(A_(t))return I_?I_.call(t):"";var e=t+"";return"0"==e&&1/t==-P_?"-0":e}var B_=/\s/;function O_(t){for(var e=t.length;e--&&B_.test(t.charAt(e)););return e}var N_=/^\s+/;function F_(t){return t&&t.slice(0,O_(t)+1).replace(N_,"")}var z_=NaN,U_=/^[-+]0x[0-9a-f]+$/i,G_=/^0b[01]+$/i,H_=/^0o[0-7]+$/i,j_=parseInt;function V_(t){if("number"==typeof t)return t;if(A_(t))return z_;if(wm(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=wm(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=F_(t);var n=G_.test(t);return n||H_.test(t)?j_(t.slice(2),n?2:8):U_.test(t)?z_:+t}var W_=1/0,$_=17976931348623157e292;function Y_(t){return t?(t=V_(t))===W_||t===-W_?(t<0?-1:1)*$_:t==t?t:0:0===t?t:0}function q_(t){var e=Y_(t),n=e%1;return e==e?n?e-n:e:0}function X_(t){return t}const J_=Hm(cm,"WeakMap");var Z_=Object.create;const K_=function(){function t(){}return function(e){if(!wm(e))return{};if(Z_)return Z_(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Q_(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function tw(){}function ew(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var nw=800,rw=16,iw=Date.now;function aw(t){var e=0,n=0;return function(){var r=iw(),i=rw-(r-n);if(n=r,i>0){if(++e>=nw)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function sw(t){return function(){return t}}const ow=function(){try{var t=Hm(Object,"defineProperty");return t({},"",{}),t}catch{}}(),lw=aw(ow?function(t,e){return ow(t,"toString",{configurable:!0,enumerable:!1,value:sw(e),writable:!0})}:X_);function cw(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function uw(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function hw(t){return t!=t}function dw(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function fw(t,e,n){return e==e?dw(t,e,n):uw(t,hw,n)}function pw(t,e){return!(null==t||!t.length)&&fw(t,e,0)>-1}var mw=9007199254740991,gw=/^(?:0|[1-9]\d*)$/;function yw(t,e){var n=typeof t;return!!(e=null==e?mw:e)&&("number"==n||"symbol"!=n&&gw.test(t))&&t>-1&&t%1==0&&t<e}function vw(t,e,n){"__proto__"==e&&ow?ow(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var bw=Object.prototype.hasOwnProperty;function xw(t,e,n){var r=t[e];(!bw.call(t,e)||!eg(r,n)||void 0===n&&!(e in t))&&vw(t,e,n)}function _w(t,e,n,r){var i=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var o=e[a],l=r?r(n[o],t[o],o,n,t):void 0;void 0===l&&(l=t[o]),i?vw(n,o,l):xw(n,o,l)}return n}var ww=Math.max;function Sw(t,e,n){return e=ww(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=ww(r.length-e,0),s=Array(a);++i<a;)s[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(s),Q_(t,this,o)}}function Ew(t,e){return lw(Sw(t,e,X_),t+"")}var Mw=9007199254740991;function Cw(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Mw}function Tw(t){return null!=t&&Cw(t.length)&&!Tm(t)}function Aw(t,e,n){if(!wm(n))return!1;var r=typeof e;return!!("number"==r?Tw(n)&&yw(e,n.length):"string"==r&&e in n)&&eg(n[e],t)}function kw(t){return Ew((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,s&&Aw(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var o=n[r];o&&t(e,o,r,a)}return e}))}var Lw=Object.prototype;function Pw(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lw)}function Rw(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Iw="[object Arguments]";function Dw(t){return C_(t)&&_m(t)==Iw}var Bw=Object.prototype,Ow=Bw.hasOwnProperty,Nw=Bw.propertyIsEnumerable,Fw=Dw(function(){return arguments}())?Dw:function(t){return C_(t)&&Ow.call(t,"callee")&&!Nw.call(t,"callee")};const zw=Fw;function Uw(){return!1}var Gw=e&&!e.nodeType&&e,Hw=Gw&&t&&!t.nodeType&&t,jw=Hw&&Hw.exports===Gw?cm.Buffer:void 0;const Vw=(jw?jw.isBuffer:void 0)||Uw;var Ww="[object Arguments]",$w="[object Array]",Yw="[object Boolean]",qw="[object Date]",Xw="[object Error]",Jw="[object Function]",Zw="[object Map]",Kw="[object Number]",Qw="[object Object]",tS="[object RegExp]",eS="[object Set]",nS="[object String]",rS="[object WeakMap]",iS="[object ArrayBuffer]",aS="[object DataView]",sS="[object Float64Array]",oS="[object Int8Array]",lS="[object Int16Array]",cS="[object Int32Array]",uS="[object Uint8Array]",hS="[object Uint8ClampedArray]",dS="[object Uint16Array]",fS="[object Uint32Array]",pS={};function mS(t){return C_(t)&&Cw(t.length)&&!!pS[_m(t)]}function gS(t){return function(e){return t(e)}}pS["[object Float32Array]"]=pS[sS]=pS[oS]=pS[lS]=pS[cS]=pS[uS]=pS[hS]=pS[dS]=pS[fS]=!0,pS[Ww]=pS[$w]=pS[iS]=pS[Yw]=pS[aS]=pS[qw]=pS[Xw]=pS[Jw]=pS[Zw]=pS[Kw]=pS[Qw]=pS[tS]=pS[eS]=pS[nS]=pS[rS]=!1;var yS=e&&!e.nodeType&&e,vS=yS&&t&&!t.nodeType&&t,bS=vS&&vS.exports===yS&&om.process;const xS=function(){try{return vS&&vS.require&&vS.require("util").types||bS&&bS.binding&&bS.binding("util")}catch{}}();var _S=xS&&xS.isTypedArray;const wS=_S?gS(_S):mS;var SS=Object.prototype.hasOwnProperty;function ES(t,e){var n=L_(t),r=!n&&zw(t),i=!n&&!r&&Vw(t),a=!n&&!r&&!i&&wS(t),s=n||r||i||a,o=s?Rw(t.length,String):[],l=o.length;for(var c in t)(e||SS.call(t,c))&&(!s||!("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||yw(c,l)))&&o.push(c);return o}function MS(t,e){return function(n){return t(e(n))}}const CS=MS(Object.keys,Object);var TS=Object.prototype.hasOwnProperty;function AS(t){if(!Pw(t))return CS(t);var e=[];for(var n in Object(t))TS.call(t,n)&&"constructor"!=n&&e.push(n);return e}function kS(t){return Tw(t)?ES(t):AS(t)}function LS(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}var PS=Object.prototype.hasOwnProperty;function RS(t){if(!wm(t))return LS(t);var e=Pw(t),n=[];for(var r in t)"constructor"==r&&(e||!PS.call(t,r))||n.push(r);return n}function IS(t){return Tw(t)?ES(t,!0):RS(t)}var DS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,BS=/^\w*$/;function OS(t,e){if(L_(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!A_(t))||BS.test(t)||!DS.test(t)||null!=e&&t in Object(e)}var NS=500;function FS(t){var e=bg(t,(function(t){return n.size===NS&&n.clear(),t})),n=e.cache;return e}var zS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,US=/\\(\\)?/g;const GS=FS((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(zS,(function(t,n,r,i){e.push(r?i.replace(US,"$1"):n||t)})),e}));function HS(t){return null==t?"":D_(t)}function jS(t,e){return L_(t)?t:OS(t,e)?[t]:GS(HS(t))}var VS=1/0;function WS(t){if("string"==typeof t||A_(t))return t;var e=t+"";return"0"==e&&1/t==-VS?"-0":e}function $S(t,e){for(var n=0,r=(e=jS(e,t)).length;null!=t&&n<r;)t=t[WS(e[n++])];return n&&n==r?t:void 0}function YS(t,e,n){var r=null==t?void 0:$S(t,e);return void 0===r?n:r}function qS(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var XS=um?um.isConcatSpreadable:void 0;function JS(t){return L_(t)||zw(t)||!!(XS&&t&&t[XS])}function ZS(t,e,n,r,i){var a=-1,s=t.length;for(n||(n=JS),i||(i=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?ZS(o,e-1,n,r,i):qS(i,o):r||(i[i.length]=o)}return i}function KS(t){return null!=t&&t.length?ZS(t,1):[]}function QS(t){return lw(Sw(t,void 0,KS),t+"")}const tE=MS(Object.getPrototypeOf,Object);var eE="[object Object]",nE=Function.prototype,rE=Object.prototype,iE=nE.toString,aE=rE.hasOwnProperty,sE=iE.call(Object);function oE(t){if(!C_(t)||_m(t)!=eE)return!1;var e=tE(t);if(null===e)return!0;var n=aE.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&iE.call(n)==sE}function lE(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function cE(){this.__data__=new lg,this.size=0}function uE(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function hE(t){return this.__data__.get(t)}function dE(t){return this.__data__.has(t)}var fE=200;function pE(t,e){var n=this.__data__;if(n instanceof lg){var r=n.__data__;if(!cg||r.length<fE-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new yg(r)}return n.set(t,e),this.size=n.size,this}function mE(t){var e=this.__data__=new lg(t);this.size=e.size}function gE(t,e){return t&&_w(e,kS(e),t)}function yE(t,e){return t&&_w(e,IS(e),t)}mE.prototype.clear=cE,mE.prototype.delete=uE,mE.prototype.get=hE,mE.prototype.has=dE,mE.prototype.set=pE;var vE=e&&!e.nodeType&&e,bE=vE&&t&&!t.nodeType&&t,xE=bE&&bE.exports===vE?cm.Buffer:void 0,_E=xE?xE.allocUnsafe:void 0;function wE(t,e){if(e)return t.slice();var n=t.length,r=_E?_E(n):new t.constructor(n);return t.copy(r),r}function SE(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}function EE(){return[]}var ME=Object.prototype.propertyIsEnumerable,CE=Object.getOwnPropertySymbols;const TE=CE?function(t){return null==t?[]:(t=Object(t),SE(CE(t),(function(e){return ME.call(t,e)})))}:EE;function AE(t,e){return _w(t,TE(t),e)}const kE=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)qS(e,TE(t)),t=tE(t);return e}:EE;function LE(t,e){return _w(t,kE(t),e)}function PE(t,e,n){var r=e(t);return L_(t)?r:qS(r,n(t))}function RE(t){return PE(t,kS,TE)}function IE(t){return PE(t,IS,kE)}const DE=Hm(cm,"DataView"),BE=Hm(cm,"Promise"),OE=Hm(cm,"Set");var NE="[object Map]",FE="[object Object]",zE="[object Promise]",UE="[object Set]",GE="[object WeakMap]",HE="[object DataView]",jE=Rm(DE),VE=Rm(cg),WE=Rm(BE),$E=Rm(OE),YE=Rm(J_),qE=_m;(DE&&qE(new DE(new ArrayBuffer(1)))!=HE||cg&&qE(new cg)!=NE||BE&&qE(BE.resolve())!=zE||OE&&qE(new OE)!=UE||J_&&qE(new J_)!=GE)&&(qE=function(t){var e=_m(t),n=e==FE?t.constructor:void 0,r=n?Rm(n):"";if(r)switch(r){case jE:return HE;case VE:return NE;case WE:return zE;case $E:return UE;case YE:return GE}return e});const XE=qE;var JE=Object.prototype.hasOwnProperty;function ZE(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&JE.call(t,"index")&&(n.index=t.index,n.input=t.input),n}const KE=cm.Uint8Array;function QE(t){var e=new t.constructor(t.byteLength);return new KE(e).set(new KE(t)),e}function tM(t,e){var n=e?QE(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var eM=/\w*$/;function nM(t){var e=new t.constructor(t.source,eM.exec(t));return e.lastIndex=t.lastIndex,e}var rM=um?um.prototype:void 0,iM=rM?rM.valueOf:void 0;function aM(t){return iM?Object(iM.call(t)):{}}function sM(t,e){var n=e?QE(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var oM="[object Boolean]",lM="[object Date]",cM="[object Map]",uM="[object Number]",hM="[object RegExp]",dM="[object Set]",fM="[object String]",pM="[object Symbol]",mM="[object ArrayBuffer]",gM="[object DataView]",yM="[object Float32Array]",vM="[object Float64Array]",bM="[object Int8Array]",xM="[object Int16Array]",_M="[object Int32Array]",wM="[object Uint8Array]",SM="[object Uint8ClampedArray]",EM="[object Uint16Array]",MM="[object Uint32Array]";function CM(t,e,n){var r=t.constructor;switch(e){case mM:return QE(t);case oM:case lM:return new r(+t);case gM:return tM(t,n);case yM:case vM:case bM:case xM:case _M:case wM:case SM:case EM:case MM:return sM(t,n);case cM:return new r;case uM:case fM:return new r(t);case hM:return nM(t);case dM:return new r;case pM:return aM(t)}}function TM(t){return"function"!=typeof t.constructor||Pw(t)?{}:K_(tE(t))}var AM="[object Map]";function kM(t){return C_(t)&&XE(t)==AM}var LM=xS&&xS.isMap;const PM=LM?gS(LM):kM;var RM="[object Set]";function IM(t){return C_(t)&&XE(t)==RM}var DM=xS&&xS.isSet;const BM=DM?gS(DM):IM;var OM=1,NM=2,FM=4,zM="[object Arguments]",UM="[object Array]",GM="[object Boolean]",HM="[object Date]",jM="[object Error]",VM="[object Function]",WM="[object GeneratorFunction]",$M="[object Map]",YM="[object Number]",qM="[object Object]",XM="[object RegExp]",JM="[object Set]",ZM="[object String]",KM="[object Symbol]",QM="[object WeakMap]",tC="[object ArrayBuffer]",eC="[object DataView]",nC="[object Float32Array]",rC="[object Float64Array]",iC="[object Int8Array]",aC="[object Int16Array]",sC="[object Int32Array]",oC="[object Uint8Array]",lC="[object Uint8ClampedArray]",cC="[object Uint16Array]",uC="[object Uint32Array]",hC={};function dC(t,e,n,r,i,a){var s,o=e&OM,l=e&NM,c=e&FM;if(n&&(s=i?n(t,r,i,a):n(t)),void 0!==s)return s;if(!wm(t))return t;var u=L_(t);if(u){if(s=ZE(t),!o)return ew(t,s)}else{var h=XE(t),d=h==VM||h==WM;if(Vw(t))return wE(t,o);if(h==qM||h==zM||d&&!i){if(s=l||d?{}:TM(t),!o)return l?LE(t,yE(s,t)):AE(t,gE(s,t))}else{if(!hC[h])return i?t:{};s=CM(t,h,o)}}a||(a=new mE);var f=a.get(t);if(f)return f;a.set(t,s),BM(t)?t.forEach((function(r){s.add(dC(r,e,n,r,t,a))})):PM(t)&&t.forEach((function(r,i){s.set(i,dC(r,e,n,i,t,a))}));var p=u?void 0:(c?l?IE:RE:l?IS:kS)(t);return cw(p||t,(function(r,i){p&&(r=t[i=r]),xw(s,i,dC(r,e,n,i,t,a))})),s}hC[zM]=hC[UM]=hC[tC]=hC[eC]=hC[GM]=hC[HM]=hC[nC]=hC[rC]=hC[iC]=hC[aC]=hC[sC]=hC[$M]=hC[YM]=hC[qM]=hC[XM]=hC[JM]=hC[ZM]=hC[KM]=hC[oC]=hC[lC]=hC[cC]=hC[uC]=!0,hC[jM]=hC[VM]=hC[QM]=!1;var fC=4;function pC(t){return dC(t,fC)}var mC=1,gC=4;function yC(t){return dC(t,mC|gC)}var vC="__lodash_hash_undefined__";function bC(t){return this.__data__.set(t,vC),this}function xC(t){return this.__data__.has(t)}function _C(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new yg;++e<n;)this.add(t[e])}function wC(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function SC(t,e){return t.has(e)}_C.prototype.add=_C.prototype.push=bC,_C.prototype.has=xC;var EC=1,MC=2;function CC(t,e,n,r,i,a){var s=n&EC,o=t.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var c=a.get(t),u=a.get(e);if(c&&u)return c==e&&u==t;var h=-1,d=!0,f=n&MC?new _C:void 0;for(a.set(t,e),a.set(e,t);++h<o;){var p=t[h],m=e[h];if(r)var g=s?r(m,p,h,e,t,a):r(p,m,h,t,e,a);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!wC(e,(function(t,e){if(!SC(f,e)&&(p===t||i(p,t,n,r,a)))return f.push(e)}))){d=!1;break}}else if(p!==m&&!i(p,m,n,r,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function TC(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function AC(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var kC=1,LC=2,PC="[object Boolean]",RC="[object Date]",IC="[object Error]",DC="[object Map]",BC="[object Number]",OC="[object RegExp]",NC="[object Set]",FC="[object String]",zC="[object Symbol]",UC="[object ArrayBuffer]",GC="[object DataView]",HC=um?um.prototype:void 0,jC=HC?HC.valueOf:void 0;function VC(t,e,n,r,i,a,s){switch(n){case GC:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case UC:return!(t.byteLength!=e.byteLength||!a(new KE(t),new KE(e)));case PC:case RC:case BC:return eg(+t,+e);case IC:return t.name==e.name&&t.message==e.message;case OC:case FC:return t==e+"";case DC:var o=TC;case NC:var l=r&kC;if(o||(o=AC),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=LC,s.set(t,e);var u=CC(o(t),o(e),r,i,a,s);return s.delete(t),u;case zC:if(jC)return jC.call(t)==jC.call(e)}return!1}var WC=1,$C=Object.prototype.hasOwnProperty;function YC(t,e,n,r,i,a){var s=n&WC,o=RE(t),l=o.length;if(l!=RE(e).length&&!s)return!1;for(var c=l;c--;){var u=o[c];if(!(s?u in e:$C.call(e,u)))return!1}var h=a.get(t),d=a.get(e);if(h&&d)return h==e&&d==t;var f=!0;a.set(t,e),a.set(e,t);for(var p=s;++c<l;){var m=t[u=o[c]],g=e[u];if(r)var y=s?r(g,m,u,e,t,a):r(m,g,u,t,e,a);if(!(void 0===y?m===g||i(m,g,n,r,a):y)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var v=t.constructor,b=e.constructor;v!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(f=!1)}return a.delete(t),a.delete(e),f}var qC=1,XC="[object Arguments]",JC="[object Array]",ZC="[object Object]",KC=Object.prototype.hasOwnProperty;function QC(t,e,n,r,i,a){var s=L_(t),o=L_(e),l=s?JC:XE(t),c=o?JC:XE(e),u=(l=l==XC?ZC:l)==ZC,h=(c=c==XC?ZC:c)==ZC,d=l==c;if(d&&Vw(t)){if(!Vw(e))return!1;s=!0,u=!1}if(d&&!u)return a||(a=new mE),s||wS(t)?CC(t,e,n,r,i,a):VC(t,e,l,n,r,i,a);if(!(n&qC)){var f=u&&KC.call(t,"__wrapped__"),p=h&&KC.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return a||(a=new mE),i(m,g,n,r,a)}}return!!d&&(a||(a=new mE),YC(t,e,n,r,i,a))}function tT(t,e,n,r,i){return t===e||(null==t||null==e||!C_(t)&&!C_(e)?t!=t&&e!=e:QC(t,e,n,r,tT,i))}var eT=1,nT=2;function rT(t,e,n,r){var i=n.length,a=i,s=!r;if(null==t)return!a;for(t=Object(t);i--;){var o=n[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){var l=(o=n[i])[0],c=t[l],u=o[1];if(s&&o[2]){if(void 0===c&&!(l in t))return!1}else{var h=new mE;if(r)var d=r(c,u,l,t,e,h);if(!(void 0===d?tT(u,c,eT|nT,r,h):d))return!1}}return!0}function iT(t){return t==t&&!wm(t)}function aT(t){for(var e=kS(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,iT(i)]}return e}function sT(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}function oT(t){var e=aT(t);return 1==e.length&&e[0][2]?sT(e[0][0],e[0][1]):function(n){return n===t||rT(n,t,e)}}function lT(t,e){return null!=t&&e in Object(t)}function cT(t,e,n){for(var r=-1,i=(e=jS(e,t)).length,a=!1;++r<i;){var s=WS(e[r]);if(!(a=null!=t&&n(t,s)))break;t=t[s]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&Cw(i)&&yw(s,i)&&(L_(t)||zw(t))}function uT(t,e){return null!=t&&cT(t,e,lT)}var hT=1,dT=2;function fT(t,e){return OS(t)&&iT(e)?sT(WS(t),e):function(n){var r=YS(n,t);return void 0===r&&r===e?uT(n,t):tT(e,r,hT|dT)}}function pT(t){return function(e){return null==e?void 0:e[t]}}function mT(t){return function(e){return $S(e,t)}}function gT(t){return OS(t)?pT(WS(t)):mT(t)}function yT(t){return"function"==typeof t?t:null==t?X_:"object"==typeof t?L_(t)?fT(t[0],t[1]):oT(t):gT(t)}function vT(t){return function(e,n,r){for(var i=-1,a=Object(e),s=r(e),o=s.length;o--;){var l=s[t?o:++i];if(!1===n(a[l],l,a))break}return e}}const bT=vT();function xT(t,e){return t&&bT(t,e,kS)}function _T(t,e){return function(n,r){if(null==n)return n;if(!Tw(n))return t(n,r);for(var i=n.length,a=e?i:-1,s=Object(n);(e?a--:++a<i)&&!1!==r(s[a],a,s););return n}}const wT=_T(xT),ST=function(){return cm.Date.now()};var ET=Object.prototype,MT=ET.hasOwnProperty;const CT=Ew((function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&Aw(e[0],e[1],i)&&(r=1);++n<r;)for(var a=e[n],s=IS(a),o=-1,l=s.length;++o<l;){var c=s[o],u=t[c];(void 0===u||eg(u,ET[c])&&!MT.call(t,c))&&(t[c]=a[c])}return t}));function TT(t,e,n){(void 0!==n&&!eg(t[e],n)||void 0===n&&!(e in t))&&vw(t,e,n)}function AT(t){return C_(t)&&Tw(t)}function kT(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function LT(t){return _w(t,IS(t))}function PT(t,e,n,r,i,a,s){var o=kT(t,n),l=kT(e,n),c=s.get(l);if(c)TT(t,n,c);else{var u=a?a(o,l,n+"",t,e,s):void 0,h=void 0===u;if(h){var d=L_(l),f=!d&&Vw(l),p=!d&&!f&&wS(l);u=l,d||f||p?L_(o)?u=o:AT(o)?u=ew(o):f?(h=!1,u=wE(l,!0)):p?(h=!1,u=sM(l,!0)):u=[]:oE(l)||zw(l)?(u=o,zw(o)?u=LT(o):(!wm(o)||Tm(o))&&(u=TM(l))):h=!1}h&&(s.set(l,u),i(u,l,r,a,s),s.delete(l)),TT(t,n,u)}}function RT(t,e,n,r,i){t!==e&&bT(e,(function(a,s){if(i||(i=new mE),wm(a))PT(t,e,s,n,RT,r,i);else{var o=r?r(kT(t,s),a,s+"",t,e,i):void 0;void 0===o&&(o=a),TT(t,s,o)}}),IS)}function IT(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function DT(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}function BT(t){return"function"==typeof t?t:X_}function OT(t,e){return(L_(t)?cw:wT)(t,BT(e))}function NT(t,e){var n=[];return wT(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function FT(t,e){return(L_(t)?SE:NT)(t,yT(e))}function zT(t){return function(e,n,r){var i=Object(e);if(!Tw(e)){var a=yT(n);e=kS(e),n=function(t){return a(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:void 0}}var UT=Math.max;function GT(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:q_(n);return i<0&&(i=UT(r+i,0)),uw(t,yT(e),i)}const HT=zT(GT);function jT(t,e){var n=-1,r=Tw(t)?Array(t.length):[];return wT(t,(function(t,i,a){r[++n]=e(t,i,a)})),r}function VT(t,e){return(L_(t)?k_:jT)(t,yT(e))}function WT(t,e){return null==t?t:bT(t,BT(e),IS)}function $T(t,e){return t>e}var YT=Object.prototype.hasOwnProperty;function qT(t,e){return null!=t&&YT.call(t,e)}function XT(t,e){return null!=t&&cT(t,e,qT)}function JT(t,e){return k_(e,(function(e){return t[e]}))}function ZT(t){return null==t?[]:JT(t,kS(t))}var KT="[object Map]",QT="[object Set]",tA=Object.prototype.hasOwnProperty;function eA(t){if(null==t)return!0;if(Tw(t)&&(L_(t)||"string"==typeof t||"function"==typeof t.splice||Vw(t)||wS(t)||zw(t)))return!t.length;var e=XE(t);if(e==KT||e==QT)return!t.size;if(Pw(t))return!AS(t).length;for(var n in t)if(tA.call(t,n))return!1;return!0}function nA(t){return void 0===t}function rA(t,e){return t<e}function iA(t,e){var n={};return e=yT(e),xT(t,(function(t,r,i){vw(n,r,e(t,r,i))})),n}function aA(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(null!=s&&(void 0===o?s==s&&!A_(s):n(s,o)))var o=s,l=a}return l}function sA(t){return t&&t.length?aA(t,X_,$T):void 0}const oA=kw((function(t,e,n){RT(t,e,n)}));function lA(t){return t&&t.length?aA(t,X_,rA):void 0}function cA(t,e){return t&&t.length?aA(t,yT(e),rA):void 0}function uA(t,e,n,r){if(!wm(t))return t;for(var i=-1,a=(e=jS(e,t)).length,s=a-1,o=t;null!=o&&++i<a;){var l=WS(e[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=s){var u=o[l];void 0===(c=r?r(u,l,o):void 0)&&(c=wm(u)?u:yw(e[i+1])?[]:{})}xw(o,l,c),o=o[l]}return t}function hA(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var s=e[r],o=$S(t,s);n(o,s)&&uA(a,jS(s,t),o)}return a}function dA(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function fA(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,a=A_(t),s=void 0!==e,o=null===e,l=e==e,c=A_(e);if(!o&&!c&&!a&&t>e||a&&s&&l&&!o&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!c&&t<e||c&&n&&i&&!r&&!a||o&&n&&i||!s&&i||!l)return-1}return 0}function pA(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,s=i.length,o=n.length;++r<s;){var l=fA(i[r],a[r]);if(l)return r>=o?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}function mA(t,e,n){e=e.length?k_(e,(function(t){return L_(t)?function(e){return $S(e,1===t.length?t[0]:t)}:t})):[X_];var r=-1;return e=k_(e,gS(yT)),dA(jT(t,(function(t,n,i){return{criteria:k_(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return pA(t,e,n)}))}function gA(t,e){return hA(t,e,(function(e,n){return uT(t,n)}))}const yA=QS((function(t,e){return null==t?{}:gA(t,e)}));var vA=Math.ceil,bA=Math.max;function xA(t,e,n,r){for(var i=-1,a=bA(vA((e-t)/(n||1)),0),s=Array(a);a--;)s[r?a:++i]=t,t+=n;return s}function _A(t){return function(e,n,r){return r&&"number"!=typeof r&&Aw(e,n,r)&&(n=r=void 0),e=Y_(e),void 0===n?(n=e,e=0):n=Y_(n),xA(e,n,r=void 0===r?e<n?1:-1:Y_(r),t)}}const wA=_A();function SA(t,e,n,r,i){return i(t,(function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)})),n}function EA(t,e,n){var r=L_(t)?lE:SA,i=arguments.length<3;return r(t,yT(e),n,i,wT)}const MA=Ew((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Aw(t,e[0],e[1])?e=[]:n>2&&Aw(e[0],e[1],e[2])&&(e=[e[0]]),mA(t,ZS(e,1),[])}));var CA=1/0;const TA=OE&&1/AC(new OE([,-0]))[1]==CA?function(t){return new OE(t)}:tw;var AA=200;function kA(t,e,n){var r=-1,i=pw,a=t.length,s=!0,o=[],l=o;if(n)s=!1,i=IT;else if(a>=AA){var c=e?null:TA(t);if(c)return AC(c);s=!1,i=SC,l=new _C}else l=e?[]:o;t:for(;++r<a;){var u=t[r],h=e?e(u):u;if(u=n||0!==u?u:0,s&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),o.push(u)}else i(l,h,n)||(l!==o&&l.push(h),o.push(u))}return o}const LA=Ew((function(t){return kA(ZS(t,1,AT,!0))}));var PA=0;function RA(t){var e=++PA;return HS(t)+e}function IA(t,e,n){for(var r=-1,i=t.length,a=e.length,s={};++r<i;){var o=r<a?e[r]:void 0;n(s,t[r],o)}return s}function DA(t,e){return IA(t||[],e||[],xw)}var BA="\0",OA="\0",NA="\x01";class FA{constructor(t={}){this._isDirected=!XT(t,"directed")||t.directed,this._isMultigraph=!!XT(t,"multigraph")&&t.multigraph,this._isCompound=!!XT(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=sw(void 0),this._defaultEdgeLabelFn=sw(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[OA]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return Tm(t)||(t=sw(t)),this._defaultNodeLabelFn=t,this}nodeCount(){return this._nodeCount}nodes(){return kS(this._nodes)}sources(){var t=this;return FT(this.nodes(),(function(e){return eA(t._in[e])}))}sinks(){var t=this;return FT(this.nodes(),(function(e){return eA(t._out[e])}))}setNodes(t,e){var n=arguments,r=this;return OT(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this}setNode(t,e){return XT(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=OA,this._children[t]={},this._children[OA][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return XT(this._nodes,t)}removeNode(t){var e=this;if(XT(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],OT(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),OT(kS(this._in[t]),n),delete this._in[t],delete this._preds[t],OT(kS(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(nA(e))e=OA;else{for(var n=e+="";!nA(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var e=this._parent[t];if(e!==OA)return e}}children(t){if(nA(t)&&(t=OA),this._isCompound){var e=this._children[t];if(e)return kS(e)}else{if(t===OA)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var e=this._preds[t];if(e)return kS(e)}successors(t){var e=this._sucs[t];if(e)return kS(e)}neighbors(t){var e=this.predecessors(t);if(e)return LA(e,this.successors(t))}isLeaf(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length}filterNodes(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;OT(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),OT(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};function i(t){var a=n.parent(t);return void 0===a||e.hasNode(a)?(r[t]=a,a):a in r?r[a]:i(a)}return this._isCompound&&OT(e.nodes(),(function(t){e.setParent(t,i(t))})),e}setDefaultEdgeLabel(t){return Tm(t)||(t=sw(t)),this._defaultEdgeLabelFn=t,this}edgeCount(){return this._edgeCount}edges(){return ZT(this._edgeObjs)}setPath(t,e){var n=this,r=arguments;return EA(t,(function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i})),this}setEdge(){var t,e,n,r,i=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,n=a.name,2===arguments.length&&(r=arguments[1],i=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,e=""+e,nA(n)||(n=""+n);var s=GA(this._isDirected,t,e,n);if(XT(this._edgeLabels,s))return i&&(this._edgeLabels[s]=r),this;if(!nA(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[s]=i?r:this._defaultEdgeLabelFn(t,e,n);var o=HA(this._isDirected,t,e,n);return t=o.v,e=o.w,Object.freeze(o),this._edgeObjs[s]=o,zA(this._preds[e],t),zA(this._sucs[t],e),this._in[e][s]=o,this._out[t][s]=o,this._edgeCount++,this}edge(t,e,n){var r=1===arguments.length?jA(this._isDirected,arguments[0]):GA(this._isDirected,t,e,n);return this._edgeLabels[r]}hasEdge(t,e,n){var r=1===arguments.length?jA(this._isDirected,arguments[0]):GA(this._isDirected,t,e,n);return XT(this._edgeLabels,r)}removeEdge(t,e,n){var r=1===arguments.length?jA(this._isDirected,arguments[0]):GA(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],UA(this._preds[e],t),UA(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this}inEdges(t,e){var n=this._in[t];if(n){var r=ZT(n);return e?FT(r,(function(t){return t.v===e})):r}}outEdges(t,e){var n=this._out[t];if(n){var r=ZT(n);return e?FT(r,(function(t){return t.w===e})):r}}nodeEdges(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}}function zA(t,e){t[e]?t[e]++:t[e]=1}function UA(t,e){--t[e]||delete t[e]}function GA(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var s=i;i=a,a=s}return i+NA+a+NA+(nA(r)?BA:r)}function HA(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var s=i;i=a,a=s}var o={v:i,w:a};return r&&(o.name=r),o}function jA(t,e){return GA(t,e.v,e.w,e.name)}FA.prototype._nodeCount=0,FA.prototype._edgeCount=0;class VA{constructor(){var t={};t._next=t._prev=t,this._sentinel=t}dequeue(){var t=this._sentinel,e=t._prev;if(e!==t)return WA(e),e}enqueue(t){var e=this._sentinel;t._prev&&t._next&&WA(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e}toString(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,$A)),n=n._prev;return"["+t.join(", ")+"]"}}function WA(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function $A(t,e){if("_next"!==t&&"_prev"!==t)return e}var YA=sw(1);function qA(t,e){if(t.nodeCount()<=1)return[];var n=ZA(t,e||YA);return KS(VT(XA(n.graph,n.buckets,n.zeroIdx),(function(e){return t.outEdges(e.v,e.w)})))}function XA(t,e,n){for(var r,i=[],a=e[e.length-1],s=e[0];t.nodeCount();){for(;r=s.dequeue();)JA(t,e,n,r);for(;r=a.dequeue();)JA(t,e,n,r);if(t.nodeCount())for(var o=e.length-2;o>0;--o)if(r=e[o].dequeue()){i=i.concat(JA(t,e,n,r,!0));break}}return i}function JA(t,e,n,r,i){var a=i?[]:void 0;return OT(t.inEdges(r.v),(function(r){var s=t.edge(r),o=t.node(r.v);i&&a.push({v:r.v,w:r.w}),o.out-=s,KA(e,n,o)})),OT(t.outEdges(r.v),(function(r){var i=t.edge(r),a=r.w,s=t.node(a);s.in-=i,KA(e,n,s)})),t.removeNode(r.v),a}function ZA(t,e){var n=new FA,r=0,i=0;OT(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),OT(t.edges(),(function(t){var a=n.edge(t.v,t.w)||0,s=e(t),o=a+s;n.setEdge(t.v,t.w,o),i=Math.max(i,n.node(t.v).out+=s),r=Math.max(r,n.node(t.w).in+=s)}));var a=wA(i+r+3).map((function(){return new VA})),s=r+1;return OT(n.nodes(),(function(t){KA(a,s,n.node(t))})),{graph:n,buckets:a,zeroIdx:s}}function KA(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}function QA(t){function e(t){return function(e){return t.edge(e).weight}}OT("greedy"===t.graph().acyclicer?qA(t,e(t)):tk(t),(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,RA("rev"))}))}function tk(t){var e=[],n={},r={};function i(a){XT(r,a)||(r[a]=!0,n[a]=!0,OT(t.outEdges(a),(function(t){XT(n,t.w)?e.push(t):i(t.w)})),delete n[a])}return OT(t.nodes(),i),e}function ek(t){OT(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}function nk(t,e,n,r){var i;do{i=RA(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function rk(t){var e=(new FA).setGraph(t.graph());return OT(t.nodes(),(function(n){e.setNode(n,t.node(n))})),OT(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e}function ik(t){var e=new FA({multigraph:t.isMultigraph()}).setGraph(t.graph());return OT(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),OT(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e}function ak(t,e){var n,r,i=t.x,a=t.y,s=e.x-i,o=e.y-a,l=t.width/2,c=t.height/2;if(!s&&!o)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(o)*l>Math.abs(s)*c?(o<0&&(c=-c),n=c*s/o,r=c):(s<0&&(l=-l),n=l,r=l*o/s),{x:i+n,y:a+r}}function sk(t){var e=VT(wA(uk(t)+1),(function(){return[]}));return OT(t.nodes(),(function(n){var r=t.node(n),i=r.rank;nA(i)||(e[i][r.order]=n)})),e}function ok(t){var e=lA(VT(t.nodes(),(function(e){return t.node(e).rank})));OT(t.nodes(),(function(n){var r=t.node(n);XT(r,"rank")&&(r.rank-=e)}))}function lk(t){var e=lA(VT(t.nodes(),(function(e){return t.node(e).rank}))),n=[];OT(t.nodes(),(function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)}));var r=0,i=t.graph().nodeRankFactor;OT(n,(function(e,n){nA(e)&&n%i!=0?--r:r&&OT(e,(function(e){t.node(e).rank+=r}))}))}function ck(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),nk(t,"border",i,e)}function uk(t){return sA(VT(t.nodes(),(function(e){var n=t.node(e).rank;if(!nA(n))return n})))}function hk(t,e){var n={lhs:[],rhs:[]};return OT(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n}function dk(t,e){var n=ST();try{return e()}finally{console.log(t+" time: "+(ST()-n)+"ms")}}function fk(t,e){return e()}function pk(t){function e(n){var r=t.children(n),i=t.node(n);if(r.length&&OT(r,e),XT(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)mk(t,"borderLeft","_bl",n,i,a),mk(t,"borderRight","_br",n,i,a)}}OT(t.children(),e)}function mk(t,e,n,r,i,a){var s={width:0,height:0,rank:a,borderType:e},o=i[e][a-1],l=nk(t,"border",s,n);i[e][a]=l,t.setParent(l,r),o&&t.setEdge(o,l,{weight:1})}function gk(t){var e=t.graph().rankdir.toLowerCase();("lr"===e||"rl"===e)&&vk(t)}function yk(t){var e=t.graph().rankdir.toLowerCase();("bt"===e||"rl"===e)&&xk(t),("lr"===e||"rl"===e)&&(wk(t),vk(t))}function vk(t){OT(t.nodes(),(function(e){bk(t.node(e))})),OT(t.edges(),(function(e){bk(t.edge(e))}))}function bk(t){var e=t.width;t.width=t.height,t.height=e}function xk(t){OT(t.nodes(),(function(e){_k(t.node(e))})),OT(t.edges(),(function(e){var n=t.edge(e);OT(n.points,_k),XT(n,"y")&&_k(n)}))}function _k(t){t.y=-t.y}function wk(t){OT(t.nodes(),(function(e){Sk(t.node(e))})),OT(t.edges(),(function(e){var n=t.edge(e);OT(n.points,Sk),XT(n,"x")&&Sk(n)}))}function Sk(t){var e=t.x;t.x=t.y,t.y=e}function Ek(t){var e=nk(t,"root",{},"_root"),n=Ck(t),r=sA(ZT(n))-1,i=2*r+1;t.graph().nestingRoot=e,OT(t.edges(),(function(e){t.edge(e).minlen*=i}));var a=Tk(t)+1;OT(t.children(),(function(s){Mk(t,e,i,a,r,n,s)})),t.graph().nodeRankFactor=i}function Mk(t,e,n,r,i,a,s){var o=t.children(s);if(o.length){var l=ck(t,"_bt"),c=ck(t,"_bb"),u=t.node(s);t.setParent(l,s),u.borderTop=l,t.setParent(c,s),u.borderBottom=c,OT(o,(function(o){Mk(t,e,n,r,i,a,o);var u=t.node(o),h=u.borderTop?u.borderTop:o,d=u.borderBottom?u.borderBottom:o,f=u.borderTop?r:2*r,p=h!==d?1:i-a[s]+1;t.setEdge(l,h,{weight:f,minlen:p,nestingEdge:!0}),t.setEdge(d,c,{weight:f,minlen:p,nestingEdge:!0})})),t.parent(s)||t.setEdge(e,l,{weight:0,minlen:i+a[s]})}else s!==e&&t.setEdge(e,s,{weight:0,minlen:n})}function Ck(t){var e={};function n(r,i){var a=t.children(r);a&&a.length&&OT(a,(function(t){n(t,i+1)})),e[r]=i}return OT(t.children(),(function(t){n(t,1)})),e}function Tk(t){return EA(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}function Ak(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,OT(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}function kk(t,e,n){var r,i={};OT(n,(function(n){for(var a,s,o=t.parent(n);o;){if((a=t.parent(o))?(s=i[a],i[a]=o):(s=r,r=o),s&&s!==o)return void e.setEdge(s,o);o=a}}))}function Lk(t,e,n){var r=Pk(t),i=new FA({compound:!0}).setGraph({root:r}).setDefaultNodeLabel((function(e){return t.node(e)}));return OT(t.nodes(),(function(a){var s=t.node(a),o=t.parent(a);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(i.setNode(a),i.setParent(a,o||r),OT(t[n](a),(function(e){var n=e.v===a?e.w:e.v,r=i.edge(n,a),s=nA(r)?0:r.weight;i.setEdge(n,a,{weight:t.edge(e).weight+s})})),XT(s,"minRank")&&i.setNode(a,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))})),i}function Pk(t){for(var e;t.hasNode(e=RA("_root")););return e}function Rk(t,e){for(var n=0,r=1;r<e.length;++r)n+=Ik(t,e[r-1],e[r]);return n}function Ik(t,e,n){for(var r=DA(n,VT(n,(function(t,e){return e}))),i=KS(VT(e,(function(e){return MA(VT(t.outEdges(e),(function(e){return{pos:r[e.w],weight:t.edge(e).weight}})),"pos")}))),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var o=VT(new Array(s),(function(){return 0})),l=0;return OT(i.forEach((function(t){var e=t.pos+a;o[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=o[e+1]),o[e=e-1>>1]+=t.weight;l+=t.weight*n}))),l}function Dk(t){var e={},n=FT(t.nodes(),(function(e){return!t.children(e).length})),r=sA(VT(n,(function(e){return t.node(e).rank}))),i=VT(wA(r+1),(function(){return[]}));function a(n){if(!XT(e,n)){e[n]=!0;var r=t.node(n);i[r.rank].push(n),OT(t.successors(n),a)}}return OT(MA(n,(function(e){return t.node(e).rank})),a),i}function Bk(t,e){return VT(e,(function(e){var n=t.inEdges(e);if(n.length){var r=EA(n,(function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}}))}function Ok(t,e){var n={};return OT(t,(function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};nA(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)})),OT(e.edges(),(function(t){var e=n[t.v],r=n[t.w];!nA(e)&&!nA(r)&&(r.indegree++,e.out.push(n[t.w]))})),Nk(FT(n,(function(t){return!t.indegree})))}function Nk(t){var e=[];function n(t){return function(e){e.merged||(nA(e.barycenter)||nA(t.barycenter)||e.barycenter>=t.barycenter)&&Fk(t,e)}}function r(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),OT(i.in.reverse(),n(i)),OT(i.out,r(i))}return VT(FT(e,(function(t){return!t.merged})),(function(t){return yA(t,["vs","i","barycenter","weight"])}))}function Fk(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}function zk(t,e){var n=hk(t,(function(t){return XT(t,"barycenter")})),r=n.lhs,i=MA(n.rhs,(function(t){return-t.i})),a=[],s=0,o=0,l=0;r.sort(Gk(!!e)),l=Uk(a,i,l),OT(r,(function(t){l+=t.vs.length,a.push(t.vs),s+=t.barycenter*t.weight,o+=t.weight,l=Uk(a,i,l)}));var c={vs:KS(a)};return o&&(c.barycenter=s/o,c.weight=o),c}function Uk(t,e,n){for(var r;e.length&&(r=DT(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}function Gk(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}function Hk(t,e,n,r){var i=t.children(e),a=t.node(e),s=a?a.borderLeft:void 0,o=a?a.borderRight:void 0,l={};s&&(i=FT(i,(function(t){return t!==s&&t!==o})));var c=Bk(t,i);OT(c,(function(e){if(t.children(e.v).length){var i=Hk(t,e.v,n,r);l[e.v]=i,XT(i,"barycenter")&&Vk(e,i)}}));var u=Ok(c,n);jk(u,l);var h=zk(u,r);if(s&&(h.vs=KS([s,h.vs,o]),t.predecessors(s).length)){var d=t.node(t.predecessors(s)[0]),f=t.node(t.predecessors(o)[0]);XT(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+d.order+f.order)/(h.weight+2),h.weight+=2}return h}function jk(t,e){OT(t,(function(t){t.vs=KS(t.vs.map((function(t){return e[t]?e[t].vs:t})))}))}function Vk(t,e){nA(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}function Wk(t){var e=uk(t),n=$k(t,wA(1,e+1),"inEdges"),r=$k(t,wA(e-1,-1,-1),"outEdges"),i=Dk(t);qk(t,i);for(var a,s=Number.POSITIVE_INFINITY,o=0,l=0;l<4;++o,++l){Yk(o%2?n:r,o%4>=2);var c=Rk(t,i=sk(t));c<s&&(l=0,a=yC(i),s=c)}qk(t,a)}function $k(t,e,n){return VT(e,(function(e){return Lk(t,e,n)}))}function Yk(t,e){var n=new FA;OT(t,(function(t){var r=t.graph().root,i=Hk(t,r,n,e);OT(i.vs,(function(e,n){t.node(e).order=n})),kk(t,n,i.vs)}))}function qk(t,e){OT(e,(function(e){OT(e,(function(e,n){t.node(e).order=n}))}))}function Xk(t){var e=Zk(t);OT(t.graph().dummyChains,(function(n){for(var r=t.node(n),i=r.edgeObj,a=Jk(t,e,i.v,i.w),s=a.path,o=a.lca,l=0,c=s[l],u=!0;n!==i.w;){if(r=t.node(n),u){for(;(c=s[l])!==o&&t.node(c).maxRank<r.rank;)l++;c===o&&(u=!1)}if(!u){for(;l<s.length-1&&t.node(c=s[l+1]).minRank<=r.rank;)l++;c=s[l]}t.setParent(n,c),n=t.successors(n)[0]}}))}function Jk(t,e,n,r){var i,a,s=[],o=[],l=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),s.push(i)}while(i&&(e[i].low>l||c>e[i].lim));for(a=i,i=r;(i=t.parent(i))!==a;)o.push(i);return{path:s.concat(o.reverse()),lca:a}}function Zk(t){var e={},n=0;function r(i){var a=n;OT(t.children(i),r),e[i]={low:a,lim:n++}}return OT(t.children(),r),e}function Kk(t,e){var n={};function r(e,r){var i=0,a=0,s=e.length,o=DT(r);return OT(r,(function(e,l){var c=tL(t,e),u=c?t.node(c).order:s;(c||e===o)&&(OT(r.slice(a,l+1),(function(e){OT(t.predecessors(e),(function(r){var a=t.node(r),s=a.order;(s<i||u<s)&&(!a.dummy||!t.node(e).dummy)&&eL(n,r,e)}))})),a=l+1,i=u)})),r}return EA(e,r),n}function Qk(t,e){var n={};function r(e,r,i,a,s){var o;OT(wA(r,i),(function(r){o=e[r],t.node(o).dummy&&OT(t.predecessors(o),(function(e){var r=t.node(e);r.dummy&&(r.order<a||r.order>s)&&eL(n,e,o)}))}))}function i(e,n){var i,a=-1,s=0;return OT(n,(function(o,l){if("border"===t.node(o).dummy){var c=t.predecessors(o);c.length&&(i=t.node(c[0]).order,r(n,s,l,a,i),s=l,a=i)}r(n,s,n.length,i,e.length)})),n}return EA(e,i),n}function tL(t,e){if(t.node(e).dummy)return HT(t.predecessors(e),(function(e){return t.node(e).dummy}))}function eL(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function nL(t,e,n){if(e>n){var r=e;e=n,n=r}return XT(t[e],n)}function rL(t,e,n,r){var i={},a={},s={};return OT(e,(function(t){OT(t,(function(t,e){i[t]=t,a[t]=t,s[t]=e}))})),OT(e,(function(t){var e=-1;OT(t,(function(t){var o=r(t);if(o.length)for(var l=((o=MA(o,(function(t){return s[t]}))).length-1)/2,c=Math.floor(l),u=Math.ceil(l);c<=u;++c){var h=o[c];a[t]===t&&e<s[h]&&!nL(n,t,h)&&(a[h]=t,a[t]=i[t]=i[h],e=s[h])}}))})),{root:i,align:a}}function iL(t,e,n,r,i){var a={},s=aL(t,e,n,i),o=i?"borderLeft":"borderRight";function l(t,e){for(var n=s.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}function c(t){a[t]=s.inEdges(t).reduce((function(t,e){return Math.max(t,a[e.v]+s.edge(e))}),0)}function u(e){var n=s.outEdges(e).reduce((function(t,e){return Math.min(t,a[e.w]-s.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==o&&(a[e]=Math.max(a[e],n))}return l(c,s.predecessors.bind(s)),l(u,s.successors.bind(s)),OT(r,(function(t){a[t]=a[n[t]]})),a}function aL(t,e,n,r){var i=new FA,a=t.graph(),s=uL(a.nodesep,a.edgesep,r);return OT(e,(function(e){var r;OT(e,(function(e){var a=n[e];if(i.setNode(a),r){var o=n[r],l=i.edge(o,a);i.setEdge(o,a,Math.max(s(t,e,r),l||0))}r=e}))})),i}function sL(t,e){return cA(ZT(e),(function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return WT(e,(function(e,i){var a=hL(t,i)/2;n=Math.max(e+a,n),r=Math.min(e-a,r)})),n-r}))}function oL(t,e){var n=ZT(e),r=lA(n),i=sA(n);OT(["u","d"],(function(n){OT(["l","r"],(function(a){var s,o=n+a,l=t[o];if(l!==e){var c=ZT(l);(s="l"===a?r-lA(c):i-sA(c))&&(t[o]=iA(l,(function(t){return t+s})))}}))}))}function lL(t,e){return iA(t.ul,(function(n,r){if(e)return t[e.toLowerCase()][r];var i=MA(VT(t,r));return(i[1]+i[2])/2}))}function cL(t){var e,n=sk(t),r=oA(Kk(t,n),Qk(t,n)),i={};OT(["u","d"],(function(a){e="u"===a?n:ZT(n).reverse(),OT(["l","r"],(function(n){"r"===n&&(e=VT(e,(function(t){return ZT(t).reverse()})));var s=("u"===a?t.predecessors:t.successors).bind(t),o=rL(t,e,r,s),l=iL(t,e,o.root,o.align,"r"===n);"r"===n&&(l=iA(l,(function(t){return-t}))),i[a+n]=l}))}));var a=sL(t,i);return oL(i,a),lL(i,t.graph().align)}function uL(t,e,n){return function(r,i,a){var s,o=r.node(i),l=r.node(a),c=0;if(c+=o.width/2,XT(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":s=-o.width/2;break;case"r":s=o.width/2}if(s&&(c+=n?s:-s),s=0,c+=(o.dummy?e:t)/2,c+=(l.dummy?e:t)/2,c+=l.width/2,XT(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=l.width/2;break;case"r":s=-l.width/2}return s&&(c+=n?s:-s),s=0,c}}function hL(t,e){return t.node(e).width}function dL(t){fL(t=ik(t)),OT(cL(t),(function(e,n){t.node(n).x=e}))}function fL(t){var e=sk(t),n=t.graph().ranksep,r=0;OT(e,(function(e){var i=sA(VT(e,(function(e){return t.node(e).height})));OT(e,(function(e){t.node(e).y=r+i/2})),r+=i+n}))}function pL(t,e){var n=e&&e.debugTiming?dk:fk;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return ML(t)}));n("  runLayout",(function(){mL(e,n)})),n("  updateInputGraph",(function(){gL(t,e)}))}))}function mL(t,e){e("    makeSpaceForEdgeLabels",(function(){CL(t)})),e("    removeSelfEdges",(function(){BL(t)})),e("    acyclic",(function(){QA(t)})),e("    nestingGraph.run",(function(){Ek(t)})),e("    rank",(function(){dP(ik(t))})),e("    injectEdgeLabelProxies",(function(){TL(t)})),e("    removeEmptyRanks",(function(){lk(t)})),e("    nestingGraph.cleanup",(function(){Ak(t)})),e("    normalizeRanks",(function(){ok(t)})),e("    assignRankMinMax",(function(){AL(t)})),e("    removeEdgeLabelProxies",(function(){kL(t)})),e("    normalize.run",(function(){UL(t)})),e("    parentDummyChains",(function(){Xk(t)})),e("    addBorderSegments",(function(){pk(t)})),e("    order",(function(){Wk(t)})),e("    insertSelfEdges",(function(){OL(t)})),e("    adjustCoordinateSystem",(function(){gk(t)})),e("    position",(function(){dL(t)})),e("    positionSelfEdges",(function(){NL(t)})),e("    removeBorderNodes",(function(){DL(t)})),e("    normalize.undo",(function(){HL(t)})),e("    fixupEdgeLabelCoords",(function(){RL(t)})),e("    undoCoordinateSystem",(function(){yk(t)})),e("    translateGraph",(function(){LL(t)})),e("    assignNodeIntersects",(function(){PL(t)})),e("    reversePoints",(function(){IL(t)})),e("    acyclic.undo",(function(){ek(t)}))}function gL(t,e){OT(t.nodes(),(function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))})),OT(t.edges(),(function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,XT(i,"x")&&(r.x=i.x,r.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}var yL=["nodesep","edgesep","ranksep","marginx","marginy"],vL={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},bL=["acyclicer","ranker","rankdir","align"],xL=["width","height"],_L={width:0,height:0},wL=["minlen","weight","width","height","labeloffset"],SL={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},EL=["labelpos"];function ML(t){var e=new FA({multigraph:!0,compound:!0}),n=zL(t.graph());return e.setGraph(oA({},vL,FL(n,yL),yA(n,bL))),OT(t.nodes(),(function(n){var r=zL(t.node(n));e.setNode(n,CT(FL(r,xL),_L)),e.setParent(n,t.parent(n))})),OT(t.edges(),(function(n){var r=zL(t.edge(n));e.setEdge(n,oA({},SL,FL(r,wL),yA(r,EL)))})),e}function CL(t){var e=t.graph();e.ranksep/=2,OT(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}function TL(t){OT(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};nk(t,"edge-proxy",i,"_ep")}}))}function AL(t){var e=0;OT(t.nodes(),(function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=sA(e,r.maxRank))})),t.graph().maxRank=e}function kL(t){OT(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}function LL(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,a=t.graph(),s=a.marginx||0,o=a.marginy||0;function l(t){var a=t.x,s=t.y,o=t.width,l=t.height;e=Math.min(e,a-o/2),n=Math.max(n,a+o/2),r=Math.min(r,s-l/2),i=Math.max(i,s+l/2)}OT(t.nodes(),(function(e){l(t.node(e))})),OT(t.edges(),(function(e){var n=t.edge(e);XT(n,"x")&&l(n)})),e-=s,r-=o,OT(t.nodes(),(function(n){var i=t.node(n);i.x-=e,i.y-=r})),OT(t.edges(),(function(n){var i=t.edge(n);OT(i.points,(function(t){t.x-=e,t.y-=r})),XT(i,"x")&&(i.x-=e),XT(i,"y")&&(i.y-=r)})),a.width=n-e+s,a.height=i-r+o}function PL(t){OT(t.edges(),(function(e){var n,r,i=t.edge(e),a=t.node(e.v),s=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=s,r=a),i.points.unshift(ak(a,n)),i.points.push(ak(s,r))}))}function RL(t){OT(t.edges(),(function(e){var n=t.edge(e);if(XT(n,"x"))switch(("l"===n.labelpos||"r"===n.labelpos)&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}function IL(t){OT(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}function DL(t){OT(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),a=t.node(DT(n.borderLeft)),s=t.node(DT(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(i.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}})),OT(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}function BL(t){OT(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}function OL(t){OT(sk(t),(function(e){var n=0;OT(e,(function(e,r){var i=t.node(e);i.order=r+n,OT(i.selfEdges,(function(e){nk(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}function NL(t){OT(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,a=r.y,s=n.x-i,o=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{x:i+s,y:a},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],n.label.x=n.x,n.label.y=n.y}}))}function FL(t,e){return iA(yA(t,e),Number)}function zL(t){var e={};return OT(t,(function(t,n){e[n.toLowerCase()]=t})),e}function UL(t){t.graph().dummyChains=[],OT(t.edges(),(function(e){GL(t,e)}))}function GL(t,e){var n=e.v,r=t.node(n).rank,i=e.w,a=t.node(i).rank,s=e.name,o=t.edge(e),l=o.labelRank;if(a!==r+1){var c,u,h;for(t.removeEdge(e),h=0,++r;r<a;++h,++r)o.points=[],c=nk(t,"edge",u={width:0,height:0,edgeLabel:o,edgeObj:e,rank:r},"_d"),r===l&&(u.width=o.width,u.height=o.height,u.dummy="edge-label",u.labelpos=o.labelpos),t.setEdge(n,c,{weight:o.weight},s),0===h&&t.graph().dummyChains.push(c),n=c;t.setEdge(n,i,{weight:o.weight},s)}}function HL(t){OT(t.graph().dummyChains,(function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)}))}function jL(t){var e={};function n(r){var i=t.node(r);if(XT(e,r))return i.rank;e[r]=!0;var a=lA(VT(t.outEdges(r),(function(e){return n(e.w)-t.edge(e).minlen})));return(a===Number.POSITIVE_INFINITY||null==a)&&(a=0),i.rank=a}OT(t.sources(),n)}function VL(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}function WL(t){var e,n,r=new FA({directed:!1}),i=t.nodes()[0],a=t.nodeCount();for(r.setNode(i,{});$L(r,t)<a;)e=YL(r,t),n=r.hasNode(e.v)?VL(t,e):-VL(t,e),qL(r,t,n);return r}function $L(t,e){function n(r){OT(e.nodeEdges(r),(function(i){var a=i.v,s=r===a?i.w:a;!t.hasNode(s)&&!VL(e,i)&&(t.setNode(s,{}),t.setEdge(r,s,{}),n(s))}))}return OT(t.nodes(),n),t.nodeCount()}function YL(t,e){return cA(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return VL(e,n)}))}function qL(t,e,n){OT(t.nodes(),(function(t){e.node(t).rank+=n}))}function XL(){}function JL(t,e,n){L_(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return OT(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);ZL(t,e,"post"===n,a,r,i)})),i}function ZL(t,e,n,r,i,a){XT(r,e)||(r[e]=!0,n||a.push(e),OT(i(e),(function(e){ZL(t,e,n,r,i,a)})),n&&a.push(e))}function KL(t,e){return JL(t,e,"post")}function QL(t,e){return JL(t,e,"pre")}function tP(t){jL(t=rk(t));var e,n=WL(t);for(iP(n),eP(n,t);e=sP(n);)lP(n,t,e,oP(n,t,e))}function eP(t,e){var n=KL(t,t.nodes());OT(n=n.slice(0,n.length-1),(function(n){nP(t,e,n)}))}function nP(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=rP(t,e,n)}function rP(t,e,n){var r=t.node(n).parent,i=!0,a=e.edge(n,r),s=0;return a||(i=!1,a=e.edge(r,n)),s=a.weight,OT(e.nodeEdges(n),(function(a){var o=a.v===n,l=o?a.w:a.v;if(l!==r){var c=o===i,u=e.edge(a).weight;if(s+=c?u:-u,uP(t,n,l)){var h=t.edge(n,l).cutvalue;s+=c?-h:h}}})),s}function iP(t,e){arguments.length<2&&(e=t.nodes()[0]),aP(t,{},1,e)}function aP(t,e,n,r,i){var a=n,s=t.node(r);return e[r]=!0,OT(t.neighbors(r),(function(i){XT(e,i)||(n=aP(t,e,n,i,r))})),s.low=a,s.lim=n++,i?s.parent=i:delete s.parent,n}function sP(t){return HT(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function oP(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var a=t.node(r),s=t.node(i),o=a,l=!1;return a.lim>s.lim&&(o=s,l=!0),cA(FT(e.edges(),(function(e){return l===hP(t,t.node(e.v),o)&&l!==hP(t,t.node(e.w),o)})),(function(t){return VL(e,t)}))}function lP(t,e,n,r){var i=n.v,a=n.w;t.removeEdge(i,a),t.setEdge(r.v,r.w,{}),iP(t),eP(t,e),cP(t,e)}function cP(t,e){var n=HT(t.nodes(),(function(t){return!e.node(t).parent})),r=QL(t,n);OT(r=r.slice(1),(function(n){var r=t.node(n).parent,i=e.edge(n,r),a=!1;i||(i=e.edge(r,n),a=!0),e.node(n).rank=e.node(r).rank+(a?i.minlen:-i.minlen)}))}function uP(t,e,n){return t.hasEdge(e,n)}function hP(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}function dP(t){switch(t.graph().ranker){case"network-simplex":default:mP(t);break;case"tight-tree":pP(t);break;case"longest-path":fP(t)}}XL.prototype=new Error,tP.initLowLimValues=iP,tP.initCutValues=eP,tP.calcCutValue=rP,tP.leaveEdge=sP,tP.enterEdge=oP,tP.exchangeEdges=lP;var fP=jL;function pP(t){jL(t),WL(t)}function mP(t){tP(t)}let gP=0;const yP=function(t,e,n,r){f.debug("Rendering class ",e,n);const i=e.id,a={id:i,label:e.id,width:0,height:0},s=t.append("g").attr("id",r.db.lookUpDomId(i)).attr("class","classGroup");let o;o=e.link?s.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",n.textHeight+n.padding).attr("x",0):s.append("text").attr("y",n.textHeight+n.padding).attr("x",0);let l=!0;e.annotations.forEach((function(t){const e=o.append("tspan").text("\xab"+t+"\xbb");l||e.attr("dy",n.textHeight),l=!1}));let c=e.id;void 0!==e.type&&""!==e.type&&(c+="<"+e.type+">");const u=o.append("tspan").text(c).attr("class","title");l||u.attr("dy",n.textHeight);const h=o.node().getBBox().height,d=s.append("line").attr("x1",0).attr("y1",n.padding+h+n.dividerMargin/2).attr("y2",n.padding+h+n.dividerMargin/2),p=s.append("text").attr("x",n.padding).attr("y",h+n.dividerMargin+n.textHeight).attr("fill","white").attr("class","classText");l=!0,e.members.forEach((function(t){wP(p,t,l,n),l=!1}));const m=p.node().getBBox(),g=s.append("line").attr("x1",0).attr("y1",n.padding+h+n.dividerMargin+m.height).attr("y2",n.padding+h+n.dividerMargin+m.height),y=s.append("text").attr("x",n.padding).attr("y",h+2*n.dividerMargin+m.height+n.textHeight).attr("fill","white").attr("class","classText");l=!0,e.methods.forEach((function(t){wP(y,t,l,n),l=!1}));const v=s.node().getBBox();var b=" ";e.cssClasses.length>0&&(b+=e.cssClasses.join(" "));const x=s.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",v.width+2*n.padding).attr("height",v.height+n.padding+.5*n.dividerMargin).attr("class",b).node().getBBox().width;return o.node().childNodes.forEach((function(t){t.setAttribute("x",(x-t.getBBox().width)/2)})),e.tooltip&&o.insert("title").text(e.tooltip),d.attr("x2",x),g.attr("x2",x),a.width=x,a.height=v.height+n.padding+.5*n.dividerMargin,a},vP=function(t){const e=/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/,n=/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/;let r=t.match(e),i=t.match(n);return r&&!i?bP(r):i?xP(i):_P(t)},bP=function(t){let e="",n="";try{let r=t[1]?t[1].trim():"",i=t[2]?t[2].trim():"",a=t[3]?Bh(t[3].trim()):"",s=t[4]?t[4].trim():"",o=t[5]?t[5].trim():"";n=r+i+a+" "+s,e=SP(o)}catch{n=t}return{displayText:n,cssStyle:e}},xP=function(t){let e="",n="";try{let r=t[1]?t[1].trim():"",i=t[2]?t[2].trim():"",a=t[3]?Bh(t[3].trim()):"",s=t[4]?t[4].trim():"";n=r+i+"("+a+")"+(t[5]?" : "+Bh(t[5]).trim():""),e=SP(s)}catch{n=t}return{displayText:n,cssStyle:e}},_P=function(t){let e="",n="",r="",i=t.indexOf("("),a=t.indexOf(")");if(i>1&&a>i&&a<=t.length){let s="",o="",l=t.substring(0,1);l.match(/\w/)?o=t.substring(0,i).trim():(l.match(/[#+~-]/)&&(s=l),o=t.substring(1,i).trim());const c=t.substring(i+1,a);t.substring(a+1,1),n=SP(t.substring(a+1,a+2)),e=s+o+"("+Bh(c.trim())+")",a<t.length&&(r=t.substring(a+2).trim(),""!==r&&(r=" : "+Bh(r),e+=r))}else e=Bh(t);return{displayText:e,cssStyle:n}},wP=function(t,e,n,r){let i=vP(e);const a=t.append("tspan").attr("x",r.padding).text(i.displayText);""!==i.cssStyle&&a.attr("style",i.cssStyle),n||a.attr("dy",r.textHeight)},SP=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},EP={drawClass:yP,drawEdge:function(t,e,n,r,i){const a=function(t){switch(t){case i.db.relationType.AGGREGATION:return"aggregation";case i.db.relationType.EXTENSION:return"extension";case i.db.relationType.COMPOSITION:return"composition";case i.db.relationType.DEPENDENCY:return"dependency";case i.db.relationType.LOLLIPOP:return"lollipop"}};e.points=e.points.filter((t=>!Number.isNaN(t.y)));const s=e.points,o=Hc().x((function(t){return t.x})).y((function(t){return t.y})).curve(Xc),l=t.append("path").attr("d",o(s)).attr("id","edge"+gP).attr("class","relation");let c,u,h="";r.arrowMarkerAbsolute&&(h=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,h=h.replace(/\(/g,"\\("),h=h.replace(/\)/g,"\\)")),1==n.relation.lineType&&l.attr("class","relation dashed-line"),10==n.relation.lineType&&l.attr("class","relation dotted-line"),"none"!==n.relation.type1&&l.attr("marker-start","url("+h+"#"+a(n.relation.type1)+"Start)"),"none"!==n.relation.type2&&l.attr("marker-end","url("+h+"#"+a(n.relation.type2)+"End)");const d=e.points.length;let p,m,g,y,v=Zg.calcLabelPosition(e.points);if(c=v.x,u=v.y,d%2!=0&&d>1){let t=Zg.calcCardinalityPosition("none"!==n.relation.type1,e.points,e.points[0]),r=Zg.calcCardinalityPosition("none"!==n.relation.type2,e.points,e.points[d-1]);f.debug("cardinality_1_point "+JSON.stringify(t)),f.debug("cardinality_2_point "+JSON.stringify(r)),p=t.x,m=t.y,g=r.x,y=r.y}if(void 0!==n.title){const e=t.append("g").attr("class","classLabel"),i=e.append("text").attr("class","label").attr("x",c).attr("y",u).attr("fill","red").attr("text-anchor","middle").text(n.title);window.label=i;const a=i.node().getBBox();e.insert("rect",":first-child").attr("class","box").attr("x",a.x-r.padding/2).attr("y",a.y-r.padding/2).attr("width",a.width+r.padding).attr("height",a.height+r.padding)}f.info("Rendering relation "+JSON.stringify(n)),void 0!==n.relationTitle1&&"none"!==n.relationTitle1&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",p).attr("y",m).attr("fill","black").attr("font-size","6").text(n.relationTitle1),void 0!==n.relationTitle2&&"none"!==n.relationTitle2&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",g).attr("y",y).attr("fill","black").attr("font-size","6").text(n.relationTitle2),gP++},drawNote:function(t,e,n,r){f.debug("Rendering note ",e,n);const i=e.id,a={id:i,text:e.text,width:0,height:0},s=t.append("g").attr("id",i).attr("class","classGroup");let o=s.append("text").attr("y",n.textHeight+n.padding).attr("x",0);const l=JSON.parse(`"${e.text}"`).split("\n");l.forEach((function(t){f.debug(`Adding line: ${t}`),o.append("tspan").text(t).attr("class","title").attr("dy",n.textHeight)}));const c=s.node().getBBox(),u=s.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",c.width+2*n.padding).attr("height",c.height+l.length*n.textHeight+n.padding+.5*n.dividerMargin).node().getBBox().width;return o.node().childNodes.forEach((function(t){t.setAttribute("x",(u-t.getBBox().width)/2)})),a.width=u,a.height=c.height+l.length*n.textHeight+n.padding+.5*n.dividerMargin,a},parseMember:vP};let MP={};const CP=20,TP=function(t){const e=Object.entries(MP).find((e=>e[1].label===t));if(e)return e[0]},AP=function(t){t.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},kP={draw:function(t,e,n,r){const i=tv().class;MP={},f.info("Rendering diagram "+t);const a=tv().securityLevel;let s;"sandbox"===a&&(s=dn("#i"+e));const o=dn("sandbox"===a?s.nodes()[0].contentDocument.body:"body"),l=o.select(`[id='${e}']`);AP(l);const c=new FA({multigraph:!0});c.setGraph({isMultiGraph:!0}),c.setDefaultEdgeLabel((function(){return{}}));const u=r.db.getClasses(),h=Object.keys(u);for(const y of h){const t=u[y],e=EP.drawClass(l,t,i,r);MP[e.id]=e,c.setNode(e.id,e),f.info("Org height: "+e.height)}r.db.getRelations().forEach((function(t){f.info("tjoho"+TP(t.id1)+TP(t.id2)+JSON.stringify(t)),c.setEdge(TP(t.id1),TP(t.id2),{relation:t},t.title||"DEFAULT")})),r.db.getNotes().forEach((function(t){f.debug(`Adding note: ${JSON.stringify(t)}`);const e=EP.drawNote(l,t,i,r);MP[e.id]=e,c.setNode(e.id,e),t.class&&t.class in u&&c.setEdge(t.id,TP(t.class),{relation:{id1:t.id,id2:t.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")})),pL(c),c.nodes().forEach((function(t){void 0!==t&&void 0!==c.node(t)&&(f.debug("Node "+t+": "+JSON.stringify(c.node(t))),o.select("#"+(r.db.lookUpDomId(t)||t)).attr("transform","translate("+(c.node(t).x-c.node(t).width/2)+","+(c.node(t).y-c.node(t).height/2)+" )"))})),c.edges().forEach((function(t){void 0!==t&&void 0!==c.edge(t)&&(f.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(c.edge(t))),EP.drawEdge(l,c.edge(t),c.edge(t).relation,i,r))}));const d=l.node().getBBox(),p=d.width+2*CP,m=d.height+2*CP;uv(l,m,p,i.useMaxWidth);const g=`${d.x-CP} ${d.y-CP} ${p} ${m}`;f.debug(`viewBox ${g}`),l.attr("viewBox",g)}};function LP(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:PP(t),edges:RP(t)};return nA(t.graph())||(e.value=pC(t.graph())),e}function PP(t){return VT(t.nodes(),(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return nA(n)||(i.value=n),nA(r)||(i.parent=r),i}))}function RP(t){return VT(t.edges(),(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return nA(e.name)||(r.name=e.name),nA(n)||(r.value=n),r}))}const IP=(t,e,n,r)=>{e.forEach((e=>{DP[e](t,n,r)}))},DP={extension:(t,e,n)=>{f.trace("Making markers for ",n),t.append("defs").append("marker").attr("id",e+"-extensionStart").attr("class","marker extension "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-compositionStart").attr("class","marker composition "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point:(t,e)=>{t.append("marker").attr("id",e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(t,e)=>{t.append("marker").attr("id",e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(t,e)=>{t.append("marker").attr("id",e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}},BP=IP;function OP(t,e){e&&t.attr("style",e)}function NP(t){const e=dn(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=e.append("xhtml:div"),r=t.label,i=t.isNode?"nodeLabel":"edgeLabel";return n.html('<span class="'+i+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+r+"</span>"),OP(n,t.labelStyle),n.style("display","inline-block"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}const FP=(t,e,n,r)=>{let i=t||"";if("object"==typeof i&&(i=i[0]),Dh(tv().flowchart.htmlLabels))return i=i.replace(/\\n|\n/g,"<br />"),f.info("vertexText"+i),NP({isNode:r,label:HG(i).replace(/fa[blrs]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`)),labelStyle:e.replace("fill:","color:")});{const t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));let r=[];r="string"==typeof i?i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?i:[];for(const e of r){const r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","0"),n?r.setAttribute("class","title-row"):r.setAttribute("class","row"),r.textContent=e.trim(),t.appendChild(r)}return t}},zP=(t,e,n,r)=>{let i;i=n||"node default";const a=t.insert("g").attr("class",i).attr("id",e.domId||e.id),s=a.insert("g").attr("class","label").attr("style",e.labelStyle);let o;o=void 0===e.labelText?"":"string"==typeof e.labelText?e.labelText:e.labelText[0];const l=s.node().appendChild(FP(kh(HG(o),tv()),e.labelStyle,!1,r));let c=l.getBBox();if(Dh(tv().flowchart.htmlLabels)){const t=l.children[0],e=dn(l);c=t.getBoundingClientRect(),e.attr("width",c.width),e.attr("height",c.height)}const u=e.padding/2;return s.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),{shapeSvg:a,bbox:c,halfPadding:u,label:s}},UP=(t,e)=>{const n=e.node().getBBox();t.width=n.width,t.height=n.height};function GP(t,e,n,r){return t.insert("polygon",":first-child").attr("points",r.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+n/2+")")}let HP={},jP={},VP={};const WP=()=>{jP={},VP={},HP={}},$P=(t,e)=>(f.trace("In isDecendant",e," ",t," = ",jP[e].includes(t)),!!jP[e].includes(t)),YP=(t,e)=>(f.info("Decendants of ",e," is ",jP[e]),f.info("Edge is ",t),t.v!==e&&t.w!==e&&(jP[e]?jP[e].includes(t.v)||$P(t.v,e)||$P(t.w,e)||jP[e].includes(t.w):(f.debug("Tilt, ",e,",not in decendants"),!1))),qP=(t,e,n,r)=>{f.warn("Copying children of ",t,"root",r,"data",e.node(t),r);const i=e.children(t)||[];t!==r&&i.push(t),f.warn("Copying (nodes) clusterId",t,"nodes",i),i.forEach((i=>{if(e.children(i).length>0)qP(i,e,n,r);else{const a=e.node(i);f.info("cp ",i," to ",r," with parent ",t),n.setNode(i,a),r!==e.parent(i)&&(f.warn("Setting parent",i,e.parent(i)),n.setParent(i,e.parent(i))),t!==r&&i!==t?(f.debug("Setting parent",i,t),n.setParent(i,t)):(f.info("In copy ",t,"root",r,"data",e.node(t),r),f.debug("Not Setting parent for node=",i,"cluster!==rootId",t!==r,"node!==clusterId",i!==t));const s=e.edges(i);f.debug("Copying Edges",s),s.forEach((i=>{f.info("Edge",i);const a=e.edge(i.v,i.w,i.name);f.info("Edge data",a,r);try{YP(i,r)?(f.info("Copying as ",i.v,i.w,a,i.name),n.setEdge(i.v,i.w,a,i.name),f.info("newGraph edges ",n.edges(),n.edge(n.edges()[0]))):f.info("Skipping copy of edge ",i.v,"--\x3e",i.w," rootId: ",r," clusterId:",t)}catch(s){f.error(s)}}))}f.debug("Removing node",i),e.removeNode(i)}))},XP=(t,e)=>{const n=e.children(t);let r=[...n];for(const i of n)VP[i]=t,r=[...r,...XP(i,e)];return r},JP=(t,e)=>{f.trace("Searching",t);const n=e.children(t);if(f.trace("Searching children of id ",t,n),n.length<1)return f.trace("This is a valid node",t),t;for(const r of n){const n=JP(r,e);if(n)return f.trace("Found replacement for",t," => ",n),n}},ZP=t=>HP[t]&&HP[t].externalConnections&&HP[t]?HP[t].id:t,KP=(t,e)=>{!t||e>10?f.debug("Opting out, no graph "):(f.debug("Opting in, graph "),t.nodes().forEach((function(e){t.children(e).length>0&&(f.warn("Cluster identified",e," Replacement id in edges: ",JP(e,t)),jP[e]=XP(e,t),HP[e]={id:JP(e,t),clusterData:t.node(e)})})),t.nodes().forEach((function(e){const n=t.children(e),r=t.edges();n.length>0?(f.debug("Cluster identified",e,jP),r.forEach((t=>{t.v!==e&&t.w!==e&&$P(t.v,e)^$P(t.w,e)&&(f.warn("Edge: ",t," leaves cluster ",e),f.warn("Decendants of XXX ",e,": ",jP[e]),HP[e].externalConnections=!0)}))):f.debug("Not a cluster ",e,jP)})),t.edges().forEach((function(e){const n=t.edge(e);f.warn("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(e)),f.warn("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(t.edge(e)));let r=e.v,i=e.w;if(f.warn("Fix XXX",HP,"ids:",e.v,e.w,"Translating: ",HP[e.v]," --- ",HP[e.w]),HP[e.v]&&HP[e.w]&&HP[e.v]===HP[e.w]){f.warn("Fixing and trixing link to self - removing XXX",e.v,e.w,e.name),f.warn("Fixing and trixing - removing XXX",e.v,e.w,e.name),r=ZP(e.v),i=ZP(e.w),t.removeEdge(e.v,e.w,e.name);const a=e.w+"---"+e.v;t.setNode(a,{domId:a,id:a,labelStyle:"",labelText:n.label,padding:0,shape:"labelRect",style:""});const s=JSON.parse(JSON.stringify(n)),o=JSON.parse(JSON.stringify(n));s.label="",s.arrowTypeEnd="none",o.label="",s.fromCluster=e.v,o.toCluster=e.v,t.setEdge(r,a,s,e.name+"-cyclic-special"),t.setEdge(a,i,o,e.name+"-cyclic-special")}else(HP[e.v]||HP[e.w])&&(f.warn("Fixing and trixing - removing XXX",e.v,e.w,e.name),r=ZP(e.v),i=ZP(e.w),t.removeEdge(e.v,e.w,e.name),r!==e.v&&(n.fromCluster=e.v),i!==e.w&&(n.toCluster=e.w),f.warn("Fix Replacing with XXX",r,i,e.name),t.setEdge(r,i,n,e.name))})),f.warn("Adjusted Graph",LP(t)),QP(t,0),f.trace(HP))},QP=(t,e)=>{if(f.warn("extractor - ",e,LP(t),t.children("D")),e>10)return void f.error("Bailing out");let n=t.nodes(),r=!1;for(const i of n){const e=t.children(i);r=r||e.length>0}if(r){f.debug("Nodes = ",n,e);for(const r of n)if(f.debug("Extracting node",r,HP,HP[r]&&!HP[r].externalConnections,!t.parent(r),t.node(r),t.children("D")," Depth ",e),HP[r])if(!HP[r].externalConnections&&t.children(r)&&t.children(r).length>0){f.warn("Cluster without external connections, without a parent and with children",r,e);let n="TB"===t.graph().rankdir?"LR":"TB";HP[r]&&HP[r].clusterData&&HP[r].clusterData.dir&&(n=HP[r].clusterData.dir,f.warn("Fixing dir",HP[r].clusterData.dir,n));const i=new FA({multigraph:!0,compound:!0}).setGraph({rankdir:n,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));f.warn("Old graph before copy",LP(t)),qP(r,t,i,r),t.setNode(r,{clusterNode:!0,id:r,clusterData:HP[r].clusterData,labelText:HP[r].labelText,graph:i}),f.warn("New graph after copy node: (",r,")",LP(i)),f.debug("Old graph after copy",LP(t))}else f.warn("Cluster ** ",r," **not meeting the criteria !externalConnections:",!HP[r].externalConnections," no parent: ",!t.parent(r)," children ",t.children(r)&&t.children(r).length>0,t.children("D"),e),f.debug(HP);else f.debug("Not a cluster",r,e);n=t.nodes(),f.warn("New list of nodes",n);for(const r of n){const n=t.node(r);f.warn(" Now next level",r,n),n.clusterNode&&QP(n.graph,e+1)}}else f.debug("Done, no node has children",t.nodes())},tR=(t,e)=>{if(0===e.length)return[];let n=Object.assign(e);return e.forEach((e=>{const r=t.children(e),i=tR(t,r);n=[...n,...i]})),n},eR=t=>tR(t,t.children());function nR(t,e){return t.intersect(e)}function rR(t,e,n,r){var i=t.x,a=t.y,s=i-r.x,o=a-r.y,l=Math.sqrt(e*e*o*o+n*n*s*s),c=Math.abs(e*n*s/l);r.x<i&&(c=-c);var u=Math.abs(e*n*o/l);return r.y<a&&(u=-u),{x:i+c,y:a+u}}function iR(t,e,n){return rR(t,e,e,n)}function aR(t,e,n,r){var i,a,s,o,l,c,u,h,d,f,p,m,g;if(i=e.y-t.y,s=t.x-e.x,l=e.x*t.y-t.x*e.y,d=i*n.x+s*n.y+l,f=i*r.x+s*r.y+l,!(0!==d&&0!==f&&sR(d,f)||(a=r.y-n.y,o=n.x-r.x,c=r.x*n.y-n.x*r.y,u=a*t.x+o*t.y+c,h=a*e.x+o*e.y+c,0!==u&&0!==h&&sR(u,h)||(p=i*o-a*s,0===p))))return m=Math.abs(p/2),{x:(g=s*c-o*l)<0?(g-m)/p:(g+m)/p,y:(g=a*l-i*c)<0?(g-m)/p:(g+m)/p}}function sR(t,e){return t*e>0}function oR(t,e,n){var r=t.x,i=t.y,a=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;"function"==typeof e.forEach?e.forEach((function(t){s=Math.min(s,t.x),o=Math.min(o,t.y)})):(s=Math.min(s,e.x),o=Math.min(o,e.y));for(var l=r-t.width/2-s,c=i-t.height/2-o,u=0;u<e.length;u++){var h=e[u],d=e[u<e.length-1?u+1:0],f=aR(t,n,{x:l+h.x,y:c+h.y},{x:l+d.x,y:c+d.y});f&&a.push(f)}return a.length?(a.length>1&&a.sort((function(t,e){var r=t.x-n.x,i=t.y-n.y,a=Math.sqrt(r*r+i*i),s=e.x-n.x,o=e.y-n.y,l=Math.sqrt(s*s+o*o);return a<l?-1:a===l?0:1})),a[0]):t}const lR=(t,e)=>{var n,r,i=t.x,a=t.y,s=e.x-i,o=e.y-a,l=t.width/2,c=t.height/2;return Math.abs(o)*l>Math.abs(s)*c?(o<0&&(c=-c),n=0===o?0:c*s/o,r=c):(s<0&&(l=-l),n=l,r=0===s?0:l*o/s),{x:i+n,y:a+r}},cR={node:nR,circle:iR,ellipse:rR,polygon:oR,rect:lR};function uR(t,e,n,r){const i=[],a=t=>{i.push(t,0)},s=t=>{i.push(0,t)};e.includes("t")?(f.debug("add top border"),a(n)):s(n),e.includes("r")?(f.debug("add right border"),a(r)):s(r),e.includes("b")?(f.debug("add bottom border"),a(n)):s(n),e.includes("l")?(f.debug("add left border"),a(r)):s(r),t.attr("stroke-dasharray",i.join(" "))}const hR=(t,e,n)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let i=70,a=10;"LR"===n&&(i=10,a=70);const s=r.append("rect").attr("x",-1*i/2).attr("y",-1*a/2).attr("width",i).attr("height",a).attr("class","fork-join");return UP(e,s),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(t){return cR.rect(e,t)},r},dR={question:(t,e)=>{const{shapeSvg:n,bbox:r}=zP(t,e,void 0,!0),i=r.width+e.padding+(r.height+e.padding),a=[{x:i/2,y:0},{x:i,y:-i/2},{x:i/2,y:-i},{x:0,y:-i/2}];f.info("Question main (Circle)");const s=GP(n,i,i,a);return s.attr("style",e.style),UP(e,s),e.intersect=function(t){return f.warn("Intersect called"),cR.polygon(e,a,t)},n},rect:(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=zP(t,e,"node "+e.classes,!0);f.trace("Classes = ",e.classes);const a=n.insert("rect",":first-child"),s=r.width+e.padding,o=r.height+e.padding;if(a.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-i).attr("y",-r.height/2-i).attr("width",s).attr("height",o),e.props){const t=new Set(Object.keys(e.props));e.props.borders&&(uR(a,e.props.borders,s,o),t.delete("borders")),t.forEach((t=>{f.warn(`Unknown node property ${t}`)}))}return UP(e,a),e.intersect=function(t){return cR.rect(e,t)},n},labelRect:(t,e)=>{const{shapeSvg:n}=zP(t,e,"label",!0);f.trace("Classes = ",e.classes);const r=n.insert("rect",":first-child"),i=0,a=0;if(r.attr("width",i).attr("height",a),n.attr("class","label edgeLabel"),e.props){const t=new Set(Object.keys(e.props));e.props.borders&&(uR(r,e.props.borders,i,a),t.delete("borders")),t.forEach((t=>{f.warn(`Unknown node property ${t}`)}))}return UP(e,r),e.intersect=function(t){return cR.rect(e,t)},n},rectWithTitle:(t,e)=>{let n;n=e.classes?"node "+e.classes:"node default";const r=t.insert("g").attr("class",n).attr("id",e.domId||e.id),i=r.insert("rect",":first-child"),a=r.insert("line"),s=r.insert("g").attr("class","label"),o=e.labelText.flat?e.labelText.flat():e.labelText;let l="";l="object"==typeof o?o[0]:o,f.info("Label text abc79",l,o,"object"==typeof o);const c=s.node().appendChild(FP(l,e.labelStyle,!0,!0));let u={width:0,height:0};if(Dh(tv().flowchart.htmlLabels)){const t=c.children[0],e=dn(c);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}f.info("Text 2",o);const h=o.slice(1,o.length);let d=c.getBBox();const p=s.node().appendChild(FP(h.join?h.join("<br/>"):h,e.labelStyle,!0,!0));if(Dh(tv().flowchart.htmlLabels)){const t=p.children[0],e=dn(p);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}const m=e.padding/2;return dn(p).attr("transform","translate( "+(u.width>d.width?0:(d.width-u.width)/2)+", "+(d.height+m+5)+")"),dn(c).attr("transform","translate( "+(u.width<d.width?0:-(d.width-u.width)/2)+", 0)"),u=s.node().getBBox(),s.attr("transform","translate("+-u.width/2+", "+(-u.height/2-m+3)+")"),i.attr("class","outer title-state").attr("x",-u.width/2-m).attr("y",-u.height/2-m).attr("width",u.width+e.padding).attr("height",u.height+e.padding),a.attr("class","divider").attr("x1",-u.width/2-m).attr("x2",u.width/2+m).attr("y1",-u.height/2-m+d.height+m).attr("y2",-u.height/2-m+d.height+m),UP(e,i),e.intersect=function(t){return cR.rect(e,t)},r},choice:(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=28,i=[{x:0,y:r/2},{x:r/2,y:0},{x:0,y:-r/2},{x:-r/2,y:0}];return n.insert("polygon",":first-child").attr("points",i.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(t){return cR.circle(e,14,t)},n},circle:(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=zP(t,e,void 0,!0),a=n.insert("circle",":first-child");return a.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+i).attr("width",r.width+e.padding).attr("height",r.height+e.padding),f.info("Circle main"),UP(e,a),e.intersect=function(t){return f.info("Circle intersect",e,r.width/2+i,t),cR.circle(e,r.width/2+i,t)},n},doublecircle:(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=zP(t,e,void 0,!0),a=5,s=n.insert("g",":first-child"),o=s.insert("circle"),l=s.insert("circle");return o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+i+a).attr("width",r.width+e.padding+2*a).attr("height",r.height+e.padding+2*a),l.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+i).attr("width",r.width+e.padding).attr("height",r.height+e.padding),f.info("DoubleCircle main"),UP(e,o),e.intersect=function(t){return f.info("DoubleCircle intersect",e,r.width/2+i+a,t),cR.circle(e,r.width/2+i+a,t)},n},stadium:(t,e)=>{const{shapeSvg:n,bbox:r}=zP(t,e,void 0,!0),i=r.height+e.padding,a=r.width+i/4+e.padding,s=n.insert("rect",":first-child").attr("style",e.style).attr("rx",i/2).attr("ry",i/2).attr("x",-a/2).attr("y",-i/2).attr("width",a).attr("height",i);return UP(e,s),e.intersect=function(t){return cR.rect(e,t)},n},hexagon:(t,e)=>{const{shapeSvg:n,bbox:r}=zP(t,e,void 0,!0),i=4,a=r.height+e.padding,s=a/i,o=r.width+2*s+e.padding,l=[{x:s,y:0},{x:o-s,y:0},{x:o,y:-a/2},{x:o-s,y:-a},{x:s,y:-a},{x:0,y:-a/2}],c=GP(n,o,a,l);return c.attr("style",e.style),UP(e,c),e.intersect=function(t){return cR.polygon(e,l,t)},n},rect_left_inv_arrow:(t,e)=>{const{shapeSvg:n,bbox:r}=zP(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,s=[{x:-a/2,y:0},{x:i,y:0},{x:i,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}];return GP(n,i,a,s).attr("style",e.style),e.width=i+a,e.height=a,e.intersect=function(t){return cR.polygon(e,s,t)},n},lean_right:(t,e)=>{const{shapeSvg:n,bbox:r}=zP(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,s=[{x:-2*a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:a/6,y:-a}],o=GP(n,i,a,s);return o.attr("style",e.style),UP(e,o),e.intersect=function(t){return cR.polygon(e,s,t)},n},lean_left:(t,e)=>{const{shapeSvg:n,bbox:r}=zP(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,s=[{x:2*a/6,y:0},{x:i+a/6,y:0},{x:i-2*a/6,y:-a},{x:-a/6,y:-a}],o=GP(n,i,a,s);return o.attr("style",e.style),UP(e,o),e.intersect=function(t){return cR.polygon(e,s,t)},n},trapezoid:(t,e)=>{const{shapeSvg:n,bbox:r}=zP(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,s=[{x:-2*a/6,y:0},{x:i+2*a/6,y:0},{x:i-a/6,y:-a},{x:a/6,y:-a}],o=GP(n,i,a,s);return o.attr("style",e.style),UP(e,o),e.intersect=function(t){return cR.polygon(e,s,t)},n},inv_trapezoid:(t,e)=>{const{shapeSvg:n,bbox:r}=zP(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,s=[{x:a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:-2*a/6,y:-a}],o=GP(n,i,a,s);return o.attr("style",e.style),UP(e,o),e.intersect=function(t){return cR.polygon(e,s,t)},n},rect_right_inv_arrow:(t,e)=>{const{shapeSvg:n,bbox:r}=zP(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,s=[{x:0,y:0},{x:i+a/2,y:0},{x:i,y:-a/2},{x:i+a/2,y:-a},{x:0,y:-a}],o=GP(n,i,a,s);return o.attr("style",e.style),UP(e,o),e.intersect=function(t){return cR.polygon(e,s,t)},n},cylinder:(t,e)=>{const{shapeSvg:n,bbox:r}=zP(t,e,void 0,!0),i=r.width+e.padding,a=i/2,s=a/(2.5+i/50),o=r.height+s+e.padding,l="M 0,"+s+" a "+a+","+s+" 0,0,0 "+i+" 0 a "+a+","+s+" 0,0,0 "+-i+" 0 l 0,"+o+" a "+a+","+s+" 0,0,0 "+i+" 0 l 0,"+-o,c=n.attr("label-offset-y",s).insert("path",":first-child").attr("style",e.style).attr("d",l).attr("transform","translate("+-i/2+","+-(o/2+s)+")");return UP(e,c),e.intersect=function(t){const n=cR.rect(e,t),r=n.x-e.x;if(0!=a&&(Math.abs(r)<e.width/2||Math.abs(r)==e.width/2&&Math.abs(n.y-e.y)>e.height/2-s)){let i=s*s*(1-r*r/(a*a));0!=i&&(i=Math.sqrt(i)),i=s-i,t.y-e.y>0&&(i=-i),n.y+=i}return n},n},start:(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=n.insert("circle",":first-child");return r.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),UP(e,r),e.intersect=function(t){return cR.circle(e,7,t)},n},end:(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=n.insert("circle",":first-child"),i=n.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),r.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),UP(e,i),e.intersect=function(t){return cR.circle(e,7,t)},n},note:(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=zP(t,e,"node "+e.classes,!0);f.info("Classes = ",e.classes);const a=n.insert("rect",":first-child");return a.attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-i).attr("y",-r.height/2-i).attr("width",r.width+e.padding).attr("height",r.height+e.padding),UP(e,a),e.intersect=function(t){return cR.rect(e,t)},n},subroutine:(t,e)=>{const{shapeSvg:n,bbox:r}=zP(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,s=[{x:0,y:0},{x:i,y:0},{x:i,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],o=GP(n,i,a,s);return o.attr("style",e.style),UP(e,o),e.intersect=function(t){return cR.polygon(e,s,t)},n},fork:hR,join:hR,class_box:(t,e)=>{const n=e.padding/2,r=4,i=8;let a;a=e.classes?"node "+e.classes:"node default";const s=t.insert("g").attr("class",a).attr("id",e.domId||e.id),o=s.insert("rect",":first-child"),l=s.insert("line"),c=s.insert("line");let u=0,h=r;const d=s.insert("g").attr("class","label");let f=0;const p=e.classData.annotations&&e.classData.annotations[0],m=e.classData.annotations[0]?"\xab"+e.classData.annotations[0]+"\xbb":"",g=d.node().appendChild(FP(m,e.labelStyle,!0,!0));let y=g.getBBox();if(Dh(tv().flowchart.htmlLabels)){const t=g.children[0],e=dn(g);y=t.getBoundingClientRect(),e.attr("width",y.width),e.attr("height",y.height)}e.classData.annotations[0]&&(h+=y.height+r,u+=y.width);let v=e.classData.id;void 0!==e.classData.type&&""!==e.classData.type&&(tv().flowchart.htmlLabels?v+="&lt;"+e.classData.type+"&gt;":v+="<"+e.classData.type+">");const b=d.node().appendChild(FP(v,e.labelStyle,!0,!0));dn(b).attr("class","classTitle");let x=b.getBBox();if(Dh(tv().flowchart.htmlLabels)){const t=b.children[0],e=dn(b);x=t.getBoundingClientRect(),e.attr("width",x.width),e.attr("height",x.height)}h+=x.height+r,x.width>u&&(u=x.width);const _=[];e.classData.members.forEach((t=>{const n=vP(t);let i=n.displayText;tv().flowchart.htmlLabels&&(i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const a=d.node().appendChild(FP(i,n.cssStyle?n.cssStyle:e.labelStyle,!0,!0));let s=a.getBBox();if(Dh(tv().flowchart.htmlLabels)){const t=a.children[0],e=dn(a);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}s.width>u&&(u=s.width),h+=s.height+r,_.push(a)})),h+=i;const w=[];if(e.classData.methods.forEach((t=>{const n=vP(t);let i=n.displayText;tv().flowchart.htmlLabels&&(i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const a=d.node().appendChild(FP(i,n.cssStyle?n.cssStyle:e.labelStyle,!0,!0));let s=a.getBBox();if(Dh(tv().flowchart.htmlLabels)){const t=a.children[0],e=dn(a);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}s.width>u&&(u=s.width),h+=s.height+r,w.push(a)})),h+=i,p){let t=(u-y.width)/2;dn(g).attr("transform","translate( "+(-1*u/2+t)+", "+-1*h/2+")"),f=y.height+r}let S=(u-x.width)/2;return dn(b).attr("transform","translate( "+(-1*u/2+S)+", "+(-1*h/2+f)+")"),f+=x.height+r,l.attr("class","divider").attr("x1",-u/2-n).attr("x2",u/2+n).attr("y1",-h/2-n+i+f).attr("y2",-h/2-n+i+f),f+=i,_.forEach((t=>{dn(t).attr("transform","translate( "+-u/2+", "+(-1*h/2+f+i/2)+")"),f+=x.height+r})),f+=i,c.attr("class","divider").attr("x1",-u/2-n).attr("x2",u/2+n).attr("y1",-h/2-n+i+f).attr("y2",-h/2-n+i+f),f+=i,w.forEach((t=>{dn(t).attr("transform","translate( "+-u/2+", "+(-1*h/2+f)+")"),f+=x.height+r})),o.attr("class","outer title-state").attr("x",-u/2-n).attr("y",-h/2-n).attr("width",u+e.padding).attr("height",h+e.padding),UP(e,o),e.intersect=function(t){return cR.rect(e,t)},s}};let fR={};const pR=(t,e,n)=>{let r,i;if(e.link){let a;"sandbox"===tv().securityLevel?a="_top":e.linkTarget&&(a=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",a),i=dR[e.shape](r,e,n)}else i=dR[e.shape](t,e,n),r=i;e.tooltip&&i.attr("title",e.tooltip),e.class&&i.attr("class","node default "+e.class),fR[e.id]=r,e.haveCallback&&fR[e.id].attr("class",fR[e.id].attr("class")+" clickable")},mR=(t,e)=>{fR[e.id]=t},gR=()=>{fR={}},yR=t=>{const e=fR[t.id];f.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const n=8,r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-n)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},vR={rect:(t,e)=>{f.trace("Creating subgraph rect for ",e.id,e);const n=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),r=n.insert("rect",":first-child"),i=n.insert("g").attr("class","cluster-label"),a=i.node().appendChild(FP(e.labelText,e.labelStyle,void 0,!0));let s=a.getBBox();if(Dh(tv().flowchart.htmlLabels)){const t=a.children[0],e=dn(a);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}const o=0*e.padding,l=o/2,c=e.width<=s.width+o?s.width+o:e.width;e.width<=s.width+o?e.diff=(s.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,f.trace("Data ",e,JSON.stringify(e)),r.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-c/2).attr("y",e.y-e.height/2-l).attr("width",c).attr("height",e.height+o),i.attr("transform","translate("+(e.x-s.width/2)+", "+(e.y-e.height/2)+")");const u=r.node().getBBox();return e.width=u.width,e.height=u.height,e.intersect=function(t){return lR(e,t)},n},roundedWithTitle:(t,e)=>{const n=t.insert("g").attr("class",e.classes).attr("id",e.id),r=n.insert("rect",":first-child"),i=n.insert("g").attr("class","cluster-label"),a=n.append("rect"),s=i.node().appendChild(FP(e.labelText,e.labelStyle,void 0,!0));let o=s.getBBox();if(Dh(tv().flowchart.htmlLabels)){const t=s.children[0],e=dn(s);o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}o=s.getBBox();const l=0*e.padding,c=l/2,u=e.width<=o.width+e.padding?o.width+e.padding:e.width;e.width<=o.width+e.padding?e.diff=(o.width+0*e.padding-e.width)/2:e.diff=-e.padding/2,r.attr("class","outer").attr("x",e.x-u/2-c).attr("y",e.y-e.height/2-c).attr("width",u+l).attr("height",e.height+l),a.attr("class","inner").attr("x",e.x-u/2-c).attr("y",e.y-e.height/2-c+o.height-1).attr("width",u+l).attr("height",e.height+l-o.height-3),i.attr("transform","translate("+(e.x-o.width/2)+", "+(e.y-e.height/2-e.padding/3+(Dh(tv().flowchart.htmlLabels)?5:3))+")");const h=r.node().getBBox();return e.height=h.height,e.intersect=function(t){return lR(e,t)},n},noteGroup:(t,e)=>{const n=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=n.insert("rect",":first-child"),i=0*e.padding,a=i/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-a).attr("y",e.y-e.height/2-a).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");const s=r.node().getBBox();return e.width=s.width,e.height=s.height,e.intersect=function(t){return lR(e,t)},n},divider:(t,e)=>{const n=t.insert("g").attr("class",e.classes).attr("id",e.id),r=n.insert("rect",":first-child"),i=0*e.padding,a=i/2;r.attr("class","divider").attr("x",e.x-e.width/2-a).attr("y",e.y-e.height/2).attr("width",e.width+i).attr("height",e.height+i);const s=r.node().getBBox();return e.width=s.width,e.height=s.height,e.diff=-e.padding/2,e.intersect=function(t){return lR(e,t)},n}};let bR={};const xR=(t,e)=>{f.trace("Inserting cluster");const n=e.shape||"rect";bR[e.id]=vR[n](t,e)},_R=()=>{bR={}};let wR={},SR={};const ER=()=>{wR={},SR={}},MR=(t,e)=>{const n=FP(e.label,e.labelStyle),r=t.insert("g").attr("class","edgeLabel"),i=r.insert("g").attr("class","label");i.node().appendChild(n);let a,s=n.getBBox();if(Dh(tv().flowchart.htmlLabels)){const t=n.children[0],e=dn(n);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}if(i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),wR[e.id]=r,e.width=s.width,e.height=s.height,e.startLabelLeft){const n=FP(e.startLabelLeft,e.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),i=r.insert("g").attr("class","inner");a=i.node().appendChild(n);const s=n.getBBox();i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),SR[e.id]||(SR[e.id]={}),SR[e.id].startLeft=r,CR(a,e.startLabelLeft)}if(e.startLabelRight){const n=FP(e.startLabelRight,e.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),i=r.insert("g").attr("class","inner");a=r.node().appendChild(n),i.node().appendChild(n);const s=n.getBBox();i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),SR[e.id]||(SR[e.id]={}),SR[e.id].startRight=r,CR(a,e.startLabelRight)}if(e.endLabelLeft){const n=FP(e.endLabelLeft,e.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),i=r.insert("g").attr("class","inner");a=i.node().appendChild(n);const s=n.getBBox();i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),r.node().appendChild(n),SR[e.id]||(SR[e.id]={}),SR[e.id].endLeft=r,CR(a,e.endLabelLeft)}if(e.endLabelRight){const n=FP(e.endLabelRight,e.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),i=r.insert("g").attr("class","inner");a=i.node().appendChild(n);const s=n.getBBox();i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),r.node().appendChild(n),SR[e.id]||(SR[e.id]={}),SR[e.id].endRight=r,CR(a,e.endLabelRight)}};function CR(t,e){tv().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}const TR=(t,e)=>{f.info("Moving label abc78 ",t.id,t.label,wR[t.id]);let n=e.updatedPath?e.updatedPath:e.originalPath;if(t.label){const r=wR[t.id];let i=t.x,a=t.y;if(n){const r=Zg.calcLabelPosition(n);f.info("Moving label "+t.label+" from (",i,",",a,") to (",r.x,",",r.y,") abc78"),e.updatedPath&&(i=r.x,a=r.y)}r.attr("transform","translate("+i+", "+a+")")}if(t.startLabelLeft){const e=SR[t.id].startLeft;let r=t.x,i=t.y;if(n){const e=Zg.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",n);r=e.x,i=e.y}e.attr("transform","translate("+r+", "+i+")")}if(t.startLabelRight){const e=SR[t.id].startRight;let r=t.x,i=t.y;if(n){const e=Zg.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",n);r=e.x,i=e.y}e.attr("transform","translate("+r+", "+i+")")}if(t.endLabelLeft){const e=SR[t.id].endLeft;let r=t.x,i=t.y;if(n){const e=Zg.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",n);r=e.x,i=e.y}e.attr("transform","translate("+r+", "+i+")")}if(t.endLabelRight){const e=SR[t.id].endRight;let r=t.x,i=t.y;if(n){const e=Zg.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",n);r=e.x,i=e.y}e.attr("transform","translate("+r+", "+i+")")}},AR=(t,e)=>{const n=t.x,r=t.y,i=Math.abs(e.x-n),a=Math.abs(e.y-r),s=t.width/2,o=t.height/2;return i>=s||a>=o},kR=(t,e,n)=>{f.warn(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(e)}\n  insidePoint : ${JSON.stringify(n)}\n  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const r=t.x,i=t.y,a=Math.abs(r-n.x),s=t.width/2;let o=n.x<e.x?s-a:s+a;const l=t.height/2,c=Math.abs(e.y-n.y),u=Math.abs(e.x-n.x);if(Math.abs(i-e.y)*s>Math.abs(r-e.x)*l){let t=n.y<e.y?e.y-l-i:i-l-e.y;o=u*t/c;const r={x:n.x<e.x?n.x+o:n.x-u+o,y:n.y<e.y?n.y+c-t:n.y-c+t};return 0===o&&(r.x=e.x,r.y=e.y),0===u&&(r.x=e.x),0===c&&(r.y=e.y),f.warn(`abc89 topp/bott calc, Q ${c}, q ${t}, R ${u}, r ${o}`,r),r}{o=n.x<e.x?e.x-s-r:r-s-e.x;let t=c*o/u,i=n.x<e.x?n.x+u-o:n.x-u+o,a=n.y<e.y?n.y+t:n.y-t;return f.warn(`sides calc abc89, Q ${c}, q ${t}, R ${u}, r ${o}`,{_x:i,_y:a}),0===o&&(i=e.x,a=e.y),0===u&&(i=e.x),0===c&&(a=e.y),{x:i,y:a}}},LR=(t,e)=>{f.warn("abc88 cutPathAtIntersect",t,e);let n=[],r=t[0],i=!1;return t.forEach((t=>{if(f.info("abc88 checking point",t,e),AR(e,t)||i)f.warn("abc88 outside",t,r),r=t,i||n.push(t);else{const a=kR(e,r,t);f.warn("abc88 inside",t,r,a),f.warn("abc88 intersection",a);let s=!1;n.forEach((t=>{s=s||t.x===a.x&&t.y===a.y})),n.some((t=>t.x===a.x&&t.y===a.y))?f.warn("abc88 no intersect",a,n):n.push(a),i=!0}})),f.warn("abc88 returning points",n),n},PR=function(t,e,n,r,i,a){let s=n.points,o=!1;const l=a.node(e.v);var c=a.node(e.w);f.info("abc88 InsertEdge: ",n),c.intersect&&l.intersect&&(s=s.slice(1,n.points.length-1),s.unshift(l.intersect(s[0])),f.info("Last point",s[s.length-1],c,c.intersect(s[s.length-1])),s.push(c.intersect(s[s.length-1]))),n.toCluster&&(f.info("to cluster abc88",r[n.toCluster]),s=LR(n.points,r[n.toCluster].node),o=!0),n.fromCluster&&(f.info("from cluster abc88",r[n.fromCluster]),s=LR(s.reverse(),r[n.fromCluster].node).reverse(),o=!0);const u=s.filter((t=>!Number.isNaN(t.y)));let h;h=("graph"===i||"flowchart"===i)&&n.curve||Xc;const d=Hc().x((function(t){return t.x})).y((function(t){return t.y})).curve(h);let p;switch(n.thickness){case"normal":p="edge-thickness-normal";break;case"thick":p="edge-thickness-thick";break;default:p=""}switch(n.pattern){case"solid":p+=" edge-pattern-solid";break;case"dotted":p+=" edge-pattern-dotted";break;case"dashed":p+=" edge-pattern-dashed"}const m=t.append("path").attr("d",d(u)).attr("id",n.id).attr("class"," "+p+(n.classes?" "+n.classes:"")).attr("style",n.style);let g="";switch((tv().flowchart.arrowMarkerAbsolute||tv().state.arrowMarkerAbsolute)&&(g=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,g=g.replace(/\(/g,"\\("),g=g.replace(/\)/g,"\\)")),f.info("arrowTypeStart",n.arrowTypeStart),f.info("arrowTypeEnd",n.arrowTypeEnd),n.arrowTypeStart){case"arrow_cross":m.attr("marker-start","url("+g+"#"+i+"-crossStart)");break;case"arrow_point":m.attr("marker-start","url("+g+"#"+i+"-pointStart)");break;case"arrow_barb":m.attr("marker-start","url("+g+"#"+i+"-barbStart)");break;case"arrow_circle":m.attr("marker-start","url("+g+"#"+i+"-circleStart)");break;case"aggregation":m.attr("marker-start","url("+g+"#"+i+"-aggregationStart)");break;case"extension":m.attr("marker-start","url("+g+"#"+i+"-extensionStart)");break;case"composition":m.attr("marker-start","url("+g+"#"+i+"-compositionStart)");break;case"dependency":m.attr("marker-start","url("+g+"#"+i+"-dependencyStart)");break;case"lollipop":m.attr("marker-start","url("+g+"#"+i+"-lollipopStart)")}switch(n.arrowTypeEnd){case"arrow_cross":m.attr("marker-end","url("+g+"#"+i+"-crossEnd)");break;case"arrow_point":m.attr("marker-end","url("+g+"#"+i+"-pointEnd)");break;case"arrow_barb":m.attr("marker-end","url("+g+"#"+i+"-barbEnd)");break;case"arrow_circle":m.attr("marker-end","url("+g+"#"+i+"-circleEnd)");break;case"aggregation":m.attr("marker-end","url("+g+"#"+i+"-aggregationEnd)");break;case"extension":m.attr("marker-end","url("+g+"#"+i+"-extensionEnd)");break;case"composition":m.attr("marker-end","url("+g+"#"+i+"-compositionEnd)");break;case"dependency":m.attr("marker-end","url("+g+"#"+i+"-dependencyEnd)");break;case"lollipop":m.attr("marker-end","url("+g+"#"+i+"-lollipopEnd)")}let y={};return o&&(y.updatedPath=s),y.originalPath=n.points,y},RR=(t,e,n,r)=>{f.info("Graph in recursive render: XXX",LP(e),r);const i=e.graph().rankdir;f.trace("Dir in recursive render - dir:",i);const a=t.insert("g").attr("class","root");e.nodes()?f.info("Recursive render XXX",e.nodes()):f.info("No nodes found for",e),e.edges().length>0&&f.trace("Recursive edges",e.edge(e.edges()[0]));const s=a.insert("g").attr("class","clusters"),o=a.insert("g").attr("class","edgePaths"),l=a.insert("g").attr("class","edgeLabels"),c=a.insert("g").attr("class","nodes");e.nodes().forEach((function(t){const a=e.node(t);if(void 0!==r){const n=JSON.parse(JSON.stringify(r.clusterData));f.info("Setting data for cluster XXX (",t,") ",n,r),e.setNode(r.id,n),e.parent(t)||(f.trace("Setting parent",t,r.id),e.setParent(t,r.id,n))}if(f.info("(Insert) Node XXX"+t+": "+JSON.stringify(e.node(t))),a&&a.clusterNode){f.info("Cluster identified",t,a.width,e.node(t));const r=RR(c,a.graph,n,e.node(t)),i=r.elem;UP(a,i),a.diff=r.diff||0,f.info("Node bounds (abc123)",t,a,a.width,a.x,a.y),mR(i,a),f.warn("Recursive render complete ",i,a)}else e.children(t).length>0?(f.info("Cluster - the non recursive path XXX",t,a.id,a,e),f.info(JP(a.id,e)),HP[a.id]={id:JP(a.id,e),node:a}):(f.info("Node - the non recursive path",t,a.id,a),pR(c,e.node(t),i))})),e.edges().forEach((function(t){const n=e.edge(t.v,t.w,t.name);f.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),f.info("Edge "+t.v+" -> "+t.w+": ",t," ",JSON.stringify(e.edge(t))),f.info("Fix",HP,"ids:",t.v,t.w,"Translateing: ",HP[t.v],HP[t.w]),MR(l,n)})),e.edges().forEach((function(t){f.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t))})),f.info("#############################################"),f.info("###                Layout                 ###"),f.info("#############################################"),f.info(e),pL(e),f.info("Graph after layout:",LP(e));let u=0;return eR(e).forEach((function(t){const n=e.node(t);f.info("Position "+t+": "+JSON.stringify(e.node(t))),f.info("Position "+t+": ("+n.x,","+n.y,") width: ",n.width," height: ",n.height),n&&n.clusterNode?yR(n):e.children(t).length>0?(xR(s,n),HP[n.id].node=n):yR(n)})),e.edges().forEach((function(t){const r=e.edge(t);f.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(r),r);const i=PR(o,t,r,HP,n,e);TR(r,i)})),e.nodes().forEach((function(t){const n=e.node(t);f.info(t,n.type,n.diff),"group"===n.type&&(u=n.diff)})),{elem:a,diff:u}},IR=(t,e,n,r,i)=>{BP(t,n,r,i),gR(),ER(),_R(),WP(),f.warn("Graph at first:",LP(e)),KP(e),f.warn("Graph after:",LP(e)),RR(t,e,r)},DR=t=>Oh.sanitizeText(t,tv());let BR={dividerMargin:10,padding:5,textHeight:10};const OR=function(t,e,n,r){const i=Object.keys(t);f.info("keys:",i),f.info(t),i.forEach((function(n){const i=t[n];let a="";i.cssClasses.length>0&&(a=a+" "+i.cssClasses.join(" "));const s={labelStyle:""};let o=void 0!==i.text?i.text:i.id,l=0,c="";i.type,c="class_box",e.setNode(i.id,{labelStyle:s.labelStyle,shape:c,labelText:DR(o),classData:i,rx:l,ry:l,class:a,style:s.style,id:i.id,domId:i.domId,tooltip:r.db.getTooltip(i.id)||"",haveCallback:i.haveCallback,link:i.link,width:"group"===i.type?500:void 0,type:i.type,padding:tv().flowchart.padding}),f.info("setNode",{labelStyle:s.labelStyle,shape:c,labelText:o,rx:l,ry:l,class:a,style:s.style,id:i.id,width:"group"===i.type?500:void 0,type:i.type,padding:tv().flowchart.padding})}))},NR=function(t,e,n,r){f.info(t),t.forEach((function(t,i){const a=t;let s="";const o={labelStyle:"",style:""};let l=a.text,c=0,u="note";if(e.setNode(a.id,{labelStyle:o.labelStyle,shape:u,labelText:DR(l),noteData:a,rx:c,ry:c,class:s,style:o.style,id:a.id,domId:a.id,tooltip:"",type:"note",padding:tv().flowchart.padding}),f.info("setNode",{labelStyle:o.labelStyle,shape:u,labelText:l,rx:c,ry:c,style:o.style,id:a.id,type:"note",padding:tv().flowchart.padding}),!a.class||!(a.class in r))return;const h=n+i,d={classes:"relation",pattern:"dotted"};d.id=`edgeNote${h}`,d.arrowhead="none",f.info(`Note edge: ${JSON.stringify(d)}, ${JSON.stringify(a)}`),d.startLabelRight="",d.endLabelLeft="",d.arrowTypeStart="none",d.arrowTypeEnd="none";let p="fill:none",m="";d.style=p,d.labelStyle=m,d.curve=Cg(BR.curve,zc),e.setEdge(a.id,a.class,d,h)}))},FR=function(t,e){const n=tv().flowchart;let r=0;t.forEach((function(i){r++;const a={classes:"relation"};a.pattern=1==i.relation.lineType?"dashed":"solid",a.id="id"+r,"arrow_open"===i.type?a.arrowhead="none":a.arrowhead="normal",f.info(a,i),a.startLabelRight="none"===i.relationTitle1?"":i.relationTitle1,a.endLabelLeft="none"===i.relationTitle2?"":i.relationTitle2,a.arrowTypeStart=zR(i.relation.type1),a.arrowTypeEnd=zR(i.relation.type2);let s="",o="";if(void 0!==i.style){const t=Dg(i.style);s=t.style,o=t.labelStyle}else s="fill:none";a.style=s,a.labelStyle=o,void 0!==i.interpolate?a.curve=Cg(i.interpolate,zc):void 0!==t.defaultInterpolate?a.curve=Cg(t.defaultInterpolate,zc):a.curve=Cg(n.curve,zc),i.text=i.title,void 0===i.text?void 0!==i.style&&(a.arrowheadStyle="fill: #333"):(a.arrowheadStyle="fill: #333",a.labelpos="c",tv().flowchart.htmlLabels?(a.labelType="html",a.label='<span class="edgeLabel">'+i.text+"</span>"):(a.labelType="text",a.label=i.text.replace(Oh.lineBreakRegex,"\n"),void 0===i.style&&(a.style=a.style||"stroke: #333; stroke-width: 1.5px;fill:none"),a.labelStyle=a.labelStyle.replace("color:","fill:"))),e.setEdge(i.id1,i.id2,a,r)}))};function zR(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const UR={setConf:function(t){Object.keys(t).forEach((function(e){BR[e]=t[e]}))},draw:function(t,e,n,r){f.info("Drawing class - ",e);const i=tv().flowchart,a=tv().securityLevel;f.info("config:",i);const s=i.nodeSpacing||50,o=i.rankSpacing||50,l=new FA({multigraph:!0,compound:!0}).setGraph({rankdir:r.db.getDirection(),nodesep:s,ranksep:o,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}})),c=r.db.getClasses(),u=r.db.getRelations(),h=r.db.getNotes();let d;f.info(u),OR(c,l,e,r),FR(u,l),NR(h,l,u.length+1,c),"sandbox"===a&&(d=dn("#i"+e));const p=dn("sandbox"===a?d.nodes()[0].contentDocument.body:"body"),m=p.select(`[id="${e}"]`),g=p.select("#"+e+" g");if(IR(g,l,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),Zg.insertTitle(m,"classTitleText",i.titleTopMargin,r.db.getDiagramTitle()),hv(l,m,i.diagramPadding,i.useMaxWidth),!i.htmlLabels){const t="sandbox"===a?d.nodes()[0].contentDocument:document,n=t.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const e of n){const n=e.getBBox(),r=t.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("rx",0),r.setAttribute("ry",0),r.setAttribute("width",n.width),r.setAttribute("height",n.height),e.insertBefore(r,e.firstChild)}}}};var GR=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,2],n=[1,5],r=[6,9,11,23,25,27,29,30,31,49],i=[1,17],a=[1,18],s=[1,19],o=[1,20],l=[1,21],c=[1,22],u=[1,25],h=[1,30],d=[1,31],f=[1,32],p=[1,33],m=[6,9,11,15,20,23,25,27,29,30,31,42,43,44,45,49],g=[1,45],y=[30,31,46,47],v=[4,6,9,11,23,25,27,29,30,31,49],b=[42,43,44,45],x=[22,37],_=[1,64],w={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyType:35,attributeComment:36,ATTRIBUTE_WORD:37,ATTRIBUTE_KEY:38,COMMENT:39,cardinality:40,relType:41,ZERO_OR_ONE:42,ZERO_OR_MORE:43,ONE_OR_MORE:44,ONLY_ONE:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,open_directive:49,type_directive:50,arg_directive:51,close_directive:52,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",38:"ATTRIBUTE_KEY",39:"COMMENT",42:"ZERO_OR_ONE",43:"ZERO_OR_MORE",44:"ONE_OR_MORE",45:"ONLY_ONE",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD",49:"open_directive",50:"type_directive",51:"arg_directive",52:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[36,1],[18,3],[40,1],[40,1],[40,1],[40,1],[41,1],[41,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,e,n,r,i,a,s){var o=a.length-1;switch(i){case 1:break;case 3:case 7:case 8:this.$=[];break;case 4:a[o-1].push(a[o]),this.$=a[o-1];break;case 5:case 6:case 20:case 41:case 28:case 29:case 30:this.$=a[o];break;case 12:r.addEntity(a[o-4]),r.addEntity(a[o-2]),r.addRelationship(a[o-4],a[o],a[o-2],a[o-3]);break;case 13:r.addEntity(a[o-3]),r.addAttributes(a[o-3],a[o-1]);break;case 14:r.addEntity(a[o-2]);break;case 15:r.addEntity(a[o]);break;case 16:case 17:this.$=a[o].trim(),r.setAccTitle(this.$);break;case 18:case 19:this.$=a[o].trim(),r.setAccDescription(this.$);break;case 21:case 39:case 40:case 31:this.$=a[o].replace(/"/g,"");break;case 22:this.$=[a[o]];break;case 23:a[o].push(a[o-1]),this.$=a[o];break;case 24:this.$={attributeType:a[o-1],attributeName:a[o]};break;case 25:this.$={attributeType:a[o-2],attributeName:a[o-1],attributeKeyType:a[o]};break;case 26:this.$={attributeType:a[o-2],attributeName:a[o-1],attributeComment:a[o]};break;case 27:this.$={attributeType:a[o-3],attributeName:a[o-2],attributeKeyType:a[o-1],attributeComment:a[o]};break;case 32:this.$={cardA:a[o],relType:a[o-1],cardB:a[o-2]};break;case 33:this.$=r.Cardinality.ZERO_OR_ONE;break;case 34:this.$=r.Cardinality.ZERO_OR_MORE;break;case 35:this.$=r.Cardinality.ONE_OR_MORE;break;case 36:this.$=r.Cardinality.ONLY_ONE;break;case 37:this.$=r.Identification.NON_IDENTIFYING;break;case 38:this.$=r.Identification.IDENTIFYING;break;case 42:r.parseDirective("%%{","open_directive");break;case 43:r.parseDirective(a[o],"type_directive");break;case 44:a[o]=a[o].trim().replace(/'/g,'"'),r.parseDirective(a[o],"arg_directive");break;case 45:r.parseDirective("}%%","close_directive","er")}},table:[{3:1,4:e,7:3,12:4,49:n},{1:[3]},t(r,[2,3],{5:6}),{3:7,4:e,7:3,12:4,49:n},{13:8,50:[1,9]},{50:[2,42]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:i,25:a,27:s,29:o,30:l,31:c,49:n},{1:[2,2]},{14:23,15:[1,24],52:u},t([15,52],[2,43]),t(r,[2,8],{1:[2,1]}),t(r,[2,4]),{7:15,10:26,12:4,17:16,23:i,25:a,27:s,29:o,30:l,31:c,49:n},t(r,[2,6]),t(r,[2,7]),t(r,[2,11]),t(r,[2,15],{18:27,40:29,20:[1,28],42:h,43:d,44:f,45:p}),{24:[1,34]},{26:[1,35]},{28:[1,36]},t(r,[2,19]),t(m,[2,20]),t(m,[2,21]),{11:[1,37]},{16:38,51:[1,39]},{11:[2,45]},t(r,[2,5]),{17:40,30:l,31:c},{21:41,22:[1,42],32:43,33:44,37:g},{41:46,46:[1,47],47:[1,48]},t(y,[2,33]),t(y,[2,34]),t(y,[2,35]),t(y,[2,36]),t(r,[2,16]),t(r,[2,17]),t(r,[2,18]),t(v,[2,9]),{14:49,52:u},{52:[2,44]},{15:[1,50]},{22:[1,51]},t(r,[2,14]),{21:52,22:[2,22],32:43,33:44,37:g},{34:53,37:[1,54]},{37:[2,28]},{40:55,42:h,43:d,44:f,45:p},t(b,[2,37]),t(b,[2,38]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],48:[1,58]},t(r,[2,13]),{22:[2,23]},t(x,[2,24],{35:61,36:62,38:[1,63],39:_}),t([22,37,38,39],[2,29]),t([30,31],[2,32]),t(v,[2,10]),t(r,[2,12]),t(r,[2,39]),t(r,[2,40]),t(r,[2,41]),t(x,[2,25],{36:65,39:_}),t(x,[2,26]),t([22,37,39],[2,30]),t(x,[2,31]),t(x,[2,27])],defaultActions:{5:[2,42],7:[2,2],25:[2,45],39:[2,44],45:[2,28],52:[2,23]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],a=[],s=this.table,o="",l=0,c=0,u=2,h=1,d=a.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,typeof f.yylloc>"u"&&(f.yylloc={});var g=f.yylloc;a.push(g);var y=f.options&&f.options.ranges;function v(){var t;return"number"!=typeof(t=r.pop()||f.lex()||h)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,M,C,T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:((null===b||typeof b>"u")&&(b=v()),_=s[x]&&s[x][b]),typeof _>"u"||!_.length||!_[0]){var A="";for(S in C=[],s[x])this.terminals_[S]&&S>u&&C.push("'"+this.terminals_[S]+"'");A=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(b==h?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(A,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(f.yytext),a.push(f.yylloc),n.push(_[1]),b=null,c=f.yyleng,o=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(E=this.productions_[_[1]][1],T.$=i[i.length-E],T._$={first_line:a[a.length-(E||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(E||1)].first_column,last_column:a[a.length-1].last_column},y&&(T._$.range=[a[a.length-(E||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(T,[o,c,l,p.yy,_[1],i,a].concat(d)))<"u")return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),a=a.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(T.$),a.push(T._$),M=s[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},S={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),49;case 8:return this.begin("type_directive"),50;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),52;case 11:return 51;case 12:case 13:case 15:case 21:case 26:break;case 14:return 11;case 16:return 9;case 17:return 31;case 18:return 48;case 19:return 4;case 20:return this.begin("block"),20;case 22:return 38;case 23:case 24:return 37;case 25:return 39;case 27:return this.popState(),22;case 28:case 57:return e.yytext[0];case 29:case 33:case 34:case 47:return 42;case 30:case 31:case 32:case 40:case 42:case 49:return 44;case 35:case 36:case 37:case 38:case 39:case 41:case 48:return 43;case 43:case 44:case 45:case 46:return 45;case 50:case 53:case 54:case 55:return 46;case 51:case 52:return 47;case 56:return 30;case 58:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z][A-Za-z0-9\-_\[\]]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58],inclusive:!0}}};function E(){this.yy={}}return w.lexer=S,E.prototype=w,w.Parser=E,new E}();GR.parser=GR;const HR=GR,jR=t=>null!==t.match(/^\s*erDiagram/);let VR={},WR=[];const $R=function(t){return void 0===VR[t]&&(VR[t]={attributes:[]},f.info("Added new entity :",t)),VR[t]},YR={Cardinality:{ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},Identification:{NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},parseDirective:function(t,e,n){iH.parseDirective(this,t,e,n)},getConfig:()=>tv().er,addEntity:$R,addAttributes:function(t,e){let n,r=$R(t);for(n=e.length-1;n>=0;n--)r.attributes.push(e[n]),f.debug("Added attribute ",e[n].attributeName)},getEntities:()=>VR,addRelationship:function(t,e,n,r){let i={entityA:t,roleA:e,entityB:n,relSpec:r};WR.push(i),f.debug("Added new relationship :",i)},getRelationships:()=>WR,clear:function(){VR={},WR=[],Hv()},setAccTitle:jv,getAccTitle:Vv,setAccDescription:Wv,getAccDescription:$v,setDiagramTitle:Yv,getDiagramTitle:qv},qR={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},XR={ERMarkers:qR,insertMarkers:function(t,e){let n;t.append("defs").append("marker").attr("id",qR.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",qR.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),n=t.append("defs").append("marker").attr("id",qR.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),n=t.append("defs").append("marker").attr("id",qR.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",qR.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",qR.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),n=t.append("defs").append("marker").attr("id",qR.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),n=t.append("defs").append("marker").attr("id",qR.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")}};let JR;const ZR=new Uint8Array(16);function KR(){if(!JR&&(JR=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!JR))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return JR(ZR)}const QR=[];for(let t=0;t<256;++t)QR.push((t+256).toString(16).slice(1));function tI(t,e=0){return(QR[t[e+0]]+QR[t[e+1]]+QR[t[e+2]]+QR[t[e+3]]+"-"+QR[t[e+4]]+QR[t[e+5]]+"-"+QR[t[e+6]]+QR[t[e+7]]+"-"+QR[t[e+8]]+QR[t[e+9]]+"-"+QR[t[e+10]]+QR[t[e+11]]+QR[t[e+12]]+QR[t[e+13]]+QR[t[e+14]]+QR[t[e+15]]).toLowerCase()}const eI={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function nI(t,e,n){if(eI.randomUUID&&!e&&!t)return eI.randomUUID();const r=(t=t||{}).random||(t.rng||KR)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=r[t];return e}return tI(r)}const rI=/[^\dA-Za-z](\W)*/g;let iI={},aI=new Map;const sI=(t,e,n)=>{const r=iI.entityPadding/3,i=iI.entityPadding/3,a=.85*iI.fontSize,s=e.node().getBBox(),o=[];let l=!1,c=!1,u=0,h=0,d=0,f=0,p=s.height+2*r,m=1;n.forEach((t=>{void 0!==t.attributeKeyType&&(l=!0),void 0!==t.attributeComment&&(c=!0)})),n.forEach((n=>{const i=`${e.node().id}-attr-${m}`;let s=0;const g=Bh(n.attributeType),y=t.append("text").classed("er entityLabel",!0).attr("id",`${i}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",tv().fontFamily).style("font-size",a+"px").text(g),v=t.append("text").classed("er entityLabel",!0).attr("id",`${i}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",tv().fontFamily).style("font-size",a+"px").text(n.attributeName),b={};b.tn=y,b.nn=v;const x=y.node().getBBox(),_=v.node().getBBox();if(u=Math.max(u,x.width),h=Math.max(h,_.width),s=Math.max(x.height,_.height),l){const e=t.append("text").classed("er entityLabel",!0).attr("id",`${i}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",tv().fontFamily).style("font-size",a+"px").text(n.attributeKeyType||"");b.kn=e;const r=e.node().getBBox();d=Math.max(d,r.width),s=Math.max(s,r.height)}if(c){const e=t.append("text").classed("er entityLabel",!0).attr("id",`${i}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",tv().fontFamily).style("font-size",a+"px").text(n.attributeComment||"");b.cn=e;const r=e.node().getBBox();f=Math.max(f,r.width),s=Math.max(s,r.height)}b.height=s,o.push(b),p+=s+2*r,m+=1}));let g=4;l&&(g+=2),c&&(g+=2);const y=u+h+d+f,v={width:Math.max(iI.minEntityWidth,Math.max(s.width+2*iI.entityPadding,y+i*g)),height:n.length>0?p:Math.max(iI.minEntityHeight,s.height+2*iI.entityPadding)};if(n.length>0){const n=Math.max(0,(v.width-y-i*g)/(g/2));e.attr("transform","translate("+v.width/2+","+(r+s.height/2)+")");let a=s.height+2*r,p="attributeBoxOdd";o.forEach((e=>{const s=a+r+e.height/2;e.tn.attr("transform","translate("+i+","+s+")");const o=t.insert("rect","#"+e.tn.node().id).classed(`er ${p}`,!0).attr("x",0).attr("y",a).attr("width",u+2*i+n).attr("height",e.height+2*r),m=parseFloat(o.attr("x"))+parseFloat(o.attr("width"));e.nn.attr("transform","translate("+(m+i)+","+s+")");const g=t.insert("rect","#"+e.nn.node().id).classed(`er ${p}`,!0).attr("x",m).attr("y",a).attr("width",h+2*i+n).attr("height",e.height+2*r);let y=parseFloat(g.attr("x"))+parseFloat(g.attr("width"));if(l){e.kn.attr("transform","translate("+(y+i)+","+s+")");const o=t.insert("rect","#"+e.kn.node().id).classed(`er ${p}`,!0).attr("x",y).attr("y",a).attr("width",d+2*i+n).attr("height",e.height+2*r);y=parseFloat(o.attr("x"))+parseFloat(o.attr("width"))}c&&(e.cn.attr("transform","translate("+(y+i)+","+s+")"),t.insert("rect","#"+e.cn.node().id).classed(`er ${p}`,"true").attr("x",y).attr("y",a).attr("width",f+2*i+n).attr("height",e.height+2*r)),a+=e.height+2*r,p="attributeBoxOdd"===p?"attributeBoxEven":"attributeBoxOdd"}))}else v.height=Math.max(iI.minEntityHeight,p),e.attr("transform","translate("+v.width/2+","+v.height/2+")");return v},oI=function(t,e,n){let r;return Object.keys(e).forEach((function(i){const a=fI(i,"entity");aI.set(i,a);const s=t.append("g").attr("id",a);r=void 0===r?a:r;const o="text-"+a,l=s.append("text").classed("er entityLabel",!0).attr("id",o).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",tv().fontFamily).style("font-size",iI.fontSize+"px").text(i),{width:c,height:u}=sI(s,l,e[i].attributes),h=s.insert("rect","#"+o).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",c).attr("height",u).node().getBBox();n.setNode(a,{width:h.width,height:h.height,shape:"rect",id:a})})),r},lI=function(t,e){e.nodes().forEach((function(n){void 0!==n&&void 0!==e.node(n)&&t.select("#"+n).attr("transform","translate("+(e.node(n).x-e.node(n).width/2)+","+(e.node(n).y-e.node(n).height/2)+" )")}))},cI=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")},uI=function(t,e){return t.forEach((function(t){e.setEdge(aI.get(t.entityA),aI.get(t.entityB),{relationship:t},cI(t))})),t};let hI=0;const dI=function(t,e,n,r,i){hI++;const a=n.edge(aI.get(e.entityA),aI.get(e.entityB),cI(e)),s=Hc().x((function(t){return t.x})).y((function(t){return t.y})).curve(Xc),o=t.insert("path","#"+r).classed("er relationshipLine",!0).attr("d",s(a.points)).style("stroke",iI.stroke).style("fill","none");e.relSpec.relType===i.db.Identification.NON_IDENTIFYING&&o.attr("stroke-dasharray","8,8");let l="";switch(iI.arrowMarkerAbsolute&&(l=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,l=l.replace(/\(/g,"\\("),l=l.replace(/\)/g,"\\)")),e.relSpec.cardA){case i.db.Cardinality.ZERO_OR_ONE:o.attr("marker-end","url("+l+"#"+XR.ERMarkers.ZERO_OR_ONE_END+")");break;case i.db.Cardinality.ZERO_OR_MORE:o.attr("marker-end","url("+l+"#"+XR.ERMarkers.ZERO_OR_MORE_END+")");break;case i.db.Cardinality.ONE_OR_MORE:o.attr("marker-end","url("+l+"#"+XR.ERMarkers.ONE_OR_MORE_END+")");break;case i.db.Cardinality.ONLY_ONE:o.attr("marker-end","url("+l+"#"+XR.ERMarkers.ONLY_ONE_END+")")}switch(e.relSpec.cardB){case i.db.Cardinality.ZERO_OR_ONE:o.attr("marker-start","url("+l+"#"+XR.ERMarkers.ZERO_OR_ONE_START+")");break;case i.db.Cardinality.ZERO_OR_MORE:o.attr("marker-start","url("+l+"#"+XR.ERMarkers.ZERO_OR_MORE_START+")");break;case i.db.Cardinality.ONE_OR_MORE:o.attr("marker-start","url("+l+"#"+XR.ERMarkers.ONE_OR_MORE_START+")");break;case i.db.Cardinality.ONLY_ONE:o.attr("marker-start","url("+l+"#"+XR.ERMarkers.ONLY_ONE_START+")")}const c=o.node().getTotalLength(),u=o.node().getPointAtLength(.5*c),h="rel"+hI,d=t.append("text").classed("er relationshipLabel",!0).attr("id",h).attr("x",u.x).attr("y",u.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",tv().fontFamily).style("font-size",iI.fontSize+"px").text(e.roleA).node().getBBox();t.insert("rect","#"+h).classed("er relationshipLabelBox",!0).attr("x",u.x-d.width/2).attr("y",u.y-d.height/2).attr("width",d.width).attr("height",d.height)};function fI(t="",e=""){const n=t.replace(rI,"");return`${pI(e)}${pI(n)}${nI()}`}function pI(t=""){return t.length>0?`${t}-`:""}const mI={setConf:function(t){const e=Object.keys(t);for(const n of e)iI[n]=t[n]},draw:function(t,e,n,r){iI=tv().er,f.info("Drawing ER diagram");const i=tv().securityLevel;let a;"sandbox"===i&&(a=dn("#i"+e));const s=dn("sandbox"===i?a.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`);let o;XR.insertMarkers(s,iI),o=new FA({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:iI.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel((function(){return{}}));const l=oI(s,r.db.getEntities(),o),c=uI(r.db.getRelationships(),o);pL(o),lI(s,o),c.forEach((function(t){dI(s,t,o,l,r)}));const u=iI.diagramPadding;Zg.insertTitle(s,"entityTitleText",iI.titleTopMargin,r.db.getDiagramTitle());const h=s.node().getBBox(),d=h.width+2*u,p=h.height+2*u;uv(s,p,d,iI.useMaxWidth),s.attr("viewBox",`${h.x-u} ${h.y-u} ${d} ${p}`)}};var gI=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,9],n=[1,7],r=[1,6],i=[1,8],a=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],s=[2,10],o=[1,20],l=[1,21],c=[1,22],u=[1,23],h=[1,30],d=[1,32],f=[1,33],p=[1,34],m=[1,62],g=[1,48],y=[1,52],v=[1,36],b=[1,37],x=[1,38],_=[1,39],w=[1,40],S=[1,56],E=[1,63],M=[1,51],C=[1,53],T=[1,55],A=[1,59],k=[1,60],L=[1,41],P=[1,42],R=[1,43],I=[1,44],D=[1,61],B=[1,50],O=[1,54],N=[1,57],F=[1,58],z=[1,49],U=[1,66],G=[1,71],H=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],j=[1,75],V=[1,74],W=[1,76],$=[20,21,23,81,82],Y=[1,99],q=[1,104],X=[1,107],J=[1,108],Z=[1,101],K=[1,106],Q=[1,109],tt=[1,102],et=[1,114],nt=[1,113],rt=[1,103],it=[1,105],at=[1,110],st=[1,111],ot=[1,112],lt=[1,115],ct=[20,21,22,23,81,82],ut=[20,21,22,23,53,81,82],ht=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],dt=[20,21,23],ft=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],pt=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],mt=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],gt=[1,149],yt=[1,157],vt=[1,158],bt=[1,159],xt=[1,160],_t=[1,144],wt=[1,145],St=[1,141],Et=[1,152],Mt=[1,153],Ct=[1,154],Tt=[1,155],At=[1,156],kt=[1,161],Lt=[1,162],Pt=[1,147],Rt=[1,150],It=[1,146],Dt=[1,143],Bt=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Ot=[1,165],Nt=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],Ft=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],zt=[12,21,22,24],Ut=[22,106],Gt=[1,250],Ht=[1,245],jt=[1,246],Vt=[1,254],Wt=[1,251],$t=[1,248],Yt=[1,247],qt=[1,249],Xt=[1,252],Jt=[1,253],Zt=[1,255],Kt=[1,273],Qt=[20,21,23,106],te=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],ee={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(t,e,n,r,i,a,s){var o=a.length-1;switch(i){case 5:r.parseDirective("%%{","open_directive");break;case 6:r.parseDirective(a[o],"type_directive");break;case 7:a[o]=a[o].trim().replace(/'/g,'"'),r.parseDirective(a[o],"arg_directive");break;case 8:r.parseDirective("}%%","close_directive","flowchart");break;case 10:case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 11:(!Array.isArray(a[o])||a[o].length>0)&&a[o-1].push(a[o]),this.$=a[o-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:case 78:case 150:this.$=a[o];break;case 19:r.setDirection("TB"),this.$="TB";break;case 20:r.setDirection(a[o-1]),this.$=a[o-1];break;case 35:this.$=a[o-1].nodes;break;case 41:this.$=r.addSubGraph(a[o-6],a[o-1],a[o-4]);break;case 42:this.$=r.addSubGraph(a[o-3],a[o-1],a[o-3]);break;case 43:this.$=r.addSubGraph(void 0,a[o-1],void 0);break;case 45:this.$=a[o].trim(),r.setAccTitle(this.$);break;case 46:case 47:this.$=a[o].trim(),r.setAccDescription(this.$);break;case 51:r.addLink(a[o-2].stmt,a[o],a[o-1]),this.$={stmt:a[o],nodes:a[o].concat(a[o-2].nodes)};break;case 52:r.addLink(a[o-3].stmt,a[o-1],a[o-2]),this.$={stmt:a[o-1],nodes:a[o-1].concat(a[o-3].nodes)};break;case 53:this.$={stmt:a[o-1],nodes:a[o-1]};break;case 54:this.$={stmt:a[o],nodes:a[o]};break;case 55:case 123:case 125:this.$=[a[o]];break;case 56:this.$=a[o-4].concat(a[o]);break;case 57:this.$=[a[o-2]],r.setClass(a[o-2],a[o]);break;case 58:this.$=a[o-3],r.addVertex(a[o-3],a[o-1],"square");break;case 59:this.$=a[o-3],r.addVertex(a[o-3],a[o-1],"doublecircle");break;case 60:this.$=a[o-5],r.addVertex(a[o-5],a[o-2],"circle");break;case 61:this.$=a[o-3],r.addVertex(a[o-3],a[o-1],"ellipse");break;case 62:this.$=a[o-3],r.addVertex(a[o-3],a[o-1],"stadium");break;case 63:this.$=a[o-3],r.addVertex(a[o-3],a[o-1],"subroutine");break;case 64:this.$=a[o-7],r.addVertex(a[o-7],a[o-1],"rect",void 0,void 0,void 0,Object.fromEntries([[a[o-5],a[o-3]]]));break;case 65:this.$=a[o-3],r.addVertex(a[o-3],a[o-1],"cylinder");break;case 66:this.$=a[o-3],r.addVertex(a[o-3],a[o-1],"round");break;case 67:this.$=a[o-3],r.addVertex(a[o-3],a[o-1],"diamond");break;case 68:this.$=a[o-5],r.addVertex(a[o-5],a[o-2],"hexagon");break;case 69:this.$=a[o-3],r.addVertex(a[o-3],a[o-1],"odd");break;case 70:this.$=a[o-3],r.addVertex(a[o-3],a[o-1],"trapezoid");break;case 71:this.$=a[o-3],r.addVertex(a[o-3],a[o-1],"inv_trapezoid");break;case 72:this.$=a[o-3],r.addVertex(a[o-3],a[o-1],"lean_right");break;case 73:this.$=a[o-3],r.addVertex(a[o-3],a[o-1],"lean_left");break;case 74:this.$=a[o],r.addVertex(a[o]);break;case 75:a[o-1].text=a[o],this.$=a[o-1];break;case 76:case 77:a[o-2].text=a[o-1],this.$=a[o-2];break;case 79:var l=r.destructLink(a[o],a[o-2]);this.$={type:l.type,stroke:l.stroke,length:l.length,text:a[o-1]};break;case 80:l=r.destructLink(a[o]),this.$={type:l.type,stroke:l.stroke,length:l.length};break;case 81:this.$=a[o-1];break;case 83:case 97:case 153:case 151:this.$=a[o-1]+""+a[o];break;case 98:case 99:this.$=a[o-4],r.addClass(a[o-2],a[o]);break;case 100:this.$=a[o-4],r.setClass(a[o-2],a[o]);break;case 101:case 109:this.$=a[o-1],r.setClickEvent(a[o-1],a[o]);break;case 102:case 110:this.$=a[o-3],r.setClickEvent(a[o-3],a[o-2]),r.setTooltip(a[o-3],a[o]);break;case 103:this.$=a[o-2],r.setClickEvent(a[o-2],a[o-1],a[o]);break;case 104:this.$=a[o-4],r.setClickEvent(a[o-4],a[o-3],a[o-2]),r.setTooltip(a[o-4],a[o]);break;case 105:case 111:this.$=a[o-1],r.setLink(a[o-1],a[o]);break;case 106:case 112:this.$=a[o-3],r.setLink(a[o-3],a[o-2]),r.setTooltip(a[o-3],a[o]);break;case 107:case 113:this.$=a[o-3],r.setLink(a[o-3],a[o-2],a[o]);break;case 108:case 114:this.$=a[o-5],r.setLink(a[o-5],a[o-4],a[o]),r.setTooltip(a[o-5],a[o-2]);break;case 115:this.$=a[o-4],r.addVertex(a[o-2],void 0,void 0,a[o]);break;case 116:case 118:this.$=a[o-4],r.updateLink(a[o-2],a[o]);break;case 117:this.$=a[o-4],r.updateLink([a[o-2]],a[o]);break;case 119:this.$=a[o-8],r.updateLinkInterpolate([a[o-6]],a[o-2]),r.updateLink([a[o-6]],a[o]);break;case 120:this.$=a[o-8],r.updateLinkInterpolate(a[o-6],a[o-2]),r.updateLink(a[o-6],a[o]);break;case 121:this.$=a[o-6],r.updateLinkInterpolate([a[o-4]],a[o]);break;case 122:this.$=a[o-6],r.updateLinkInterpolate(a[o-4],a[o]);break;case 124:case 126:a[o-2].push(a[o]),this.$=a[o-2];break;case 128:this.$=a[o-1]+a[o];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"}}},table:[{3:1,4:2,5:3,6:5,12:e,16:4,21:n,22:r,24:i},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:e,16:4,21:n,22:r,24:i},t(a,s,{17:11}),{7:12,13:[1,13]},{16:14,21:n,22:r,24:i},{16:15,21:n,22:r,24:i},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:o,21:l,22:c,23:u,32:24,33:25,34:26,35:27,36:28,37:29,38:h,43:31,44:d,46:f,48:p,50:35,51:45,52:m,54:46,66:g,67:y,86:v,87:b,88:x,89:_,90:w,91:S,95:E,105:M,106:C,109:T,111:A,112:k,116:47,118:L,119:P,120:R,121:I,122:D,123:B,124:O,125:N,126:F,127:z},{8:64,10:[1,65],15:U},t([10,15],[2,6]),t(a,[2,17]),t(a,[2,18]),t(a,[2,19]),{20:[1,68],21:[1,69],22:G,27:67,30:70},t(H,[2,11]),t(H,[2,12]),t(H,[2,13]),t(H,[2,14]),t(H,[2,15]),t(H,[2,16]),{9:72,20:j,21:V,23:W,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:j,21:V,23:W},{9:81,20:j,21:V,23:W},{9:82,20:j,21:V,23:W},{9:83,20:j,21:V,23:W},{9:84,20:j,21:V,23:W},{9:86,20:j,21:V,22:[1,85],23:W},t(H,[2,44]),{45:[1,87]},{47:[1,88]},t(H,[2,47]),t($,[2,54],{30:89,22:G}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:Y,52:q,66:X,67:J,84:[1,97],91:Z,97:96,98:[1,94],100:[1,95],105:K,106:Q,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:at,125:st,126:ot,127:lt},t(H,[2,158]),t(H,[2,159]),t(H,[2,160]),t(H,[2,161]),t(ct,[2,55],{53:[1,116]}),t(ut,[2,74],{116:129,40:[1,117],52:m,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:g,67:y,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:S,95:E,105:M,106:C,109:T,111:A,112:k,122:D,123:B,124:O,125:N,126:F,127:z}),t(ht,[2,150]),t(ht,[2,175]),t(ht,[2,176]),t(ht,[2,177]),t(ht,[2,178]),t(ht,[2,179]),t(ht,[2,180]),t(ht,[2,181]),t(ht,[2,182]),t(ht,[2,183]),t(ht,[2,184]),t(ht,[2,185]),t(ht,[2,186]),t(ht,[2,187]),t(ht,[2,188]),t(ht,[2,189]),t(ht,[2,190]),{9:130,20:j,21:V,23:W},{11:131,14:[1,132]},t(dt,[2,8]),t(a,[2,20]),t(a,[2,26]),t(a,[2,27]),{21:[1,133]},t(ft,[2,34],{30:134,22:G}),t(H,[2,35]),{50:135,51:45,52:m,54:46,66:g,67:y,91:S,95:E,105:M,106:C,109:T,111:A,112:k,116:47,122:D,123:B,124:O,125:N,126:F,127:z},t(pt,[2,48]),t(pt,[2,49]),t(pt,[2,50]),t(mt,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:gt,24:yt,26:vt,38:bt,39:139,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},t([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),t(H,[2,36]),t(H,[2,37]),t(H,[2,38]),t(H,[2,39]),t(H,[2,40]),{22:gt,24:yt,26:vt,38:bt,39:163,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},t(Bt,s,{17:164}),t(H,[2,45]),t(H,[2,46]),t($,[2,53],{52:Ot}),{26:Y,52:q,66:X,67:J,91:Z,97:166,102:[1,167],105:K,106:Q,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:at,125:st,126:ot,127:lt},{95:[1,168],103:169,105:[1,170]},{26:Y,52:q,66:X,67:J,91:Z,95:[1,171],97:172,105:K,106:Q,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:at,125:st,126:ot,127:lt},{26:Y,52:q,66:X,67:J,91:Z,97:173,105:K,106:Q,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:at,125:st,126:ot,127:lt},t(dt,[2,101],{22:[1,174],99:[1,175]}),t(dt,[2,105],{22:[1,176]}),t(dt,[2,109],{115:100,117:178,22:[1,177],26:Y,52:q,66:X,67:J,91:Z,105:K,106:Q,109:tt,111:et,112:nt,122:rt,123:it,124:at,125:st,126:ot,127:lt}),t(dt,[2,111],{22:[1,179]}),t(Nt,[2,152]),t(Nt,[2,154]),t(Nt,[2,155]),t(Nt,[2,156]),t(Nt,[2,157]),t(Ft,[2,162]),t(Ft,[2,163]),t(Ft,[2,164]),t(Ft,[2,165]),t(Ft,[2,166]),t(Ft,[2,167]),t(Ft,[2,168]),t(Ft,[2,169]),t(Ft,[2,170]),t(Ft,[2,171]),t(Ft,[2,172]),t(Ft,[2,173]),t(Ft,[2,174]),{52:m,54:180,66:g,67:y,91:S,95:E,105:M,106:C,109:T,111:A,112:k,116:47,122:D,123:B,124:O,125:N,126:F,127:z},{22:gt,24:yt,26:vt,38:bt,39:181,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,39:182,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,39:184,42:xt,52:q,57:[1,183],66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,39:185,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,39:186,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,39:187,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{66:[1,188]},{22:gt,24:yt,26:vt,38:bt,39:189,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,39:190,42:xt,52:q,66:X,67:J,71:[1,191],73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,39:192,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,39:193,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,39:194,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},t(ht,[2,151]),t(zt,[2,3]),{8:195,15:U},{15:[2,7]},t(a,[2,28]),t(ft,[2,33]),t($,[2,51],{30:196,22:G}),t(mt,[2,75],{22:[1,197]}),{22:[1,198]},{22:gt,24:yt,26:vt,38:bt,39:199,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,42:xt,52:q,66:X,67:J,73:_t,81:wt,82:[1,200],83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},t(Ft,[2,82]),t(Ft,[2,84]),t(Ft,[2,140]),t(Ft,[2,141]),t(Ft,[2,142]),t(Ft,[2,143]),t(Ft,[2,144]),t(Ft,[2,145]),t(Ft,[2,146]),t(Ft,[2,147]),t(Ft,[2,148]),t(Ft,[2,149]),t(Ft,[2,85]),t(Ft,[2,86]),t(Ft,[2,87]),t(Ft,[2,88]),t(Ft,[2,89]),t(Ft,[2,90]),t(Ft,[2,91]),t(Ft,[2,92]),t(Ft,[2,93]),t(Ft,[2,94]),t(Ft,[2,95]),{9:203,20:j,21:V,22:gt,23:W,24:yt,26:vt,38:bt,40:[1,202],42:xt,52:q,66:X,67:J,73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{18:18,19:19,20:o,21:l,22:c,23:u,32:24,33:25,34:26,35:27,36:28,37:29,38:h,42:[1,204],43:31,44:d,46:f,48:p,50:35,51:45,52:m,54:46,66:g,67:y,86:v,87:b,88:x,89:_,90:w,91:S,95:E,105:M,106:C,109:T,111:A,112:k,116:47,118:L,119:P,120:R,121:I,122:D,123:B,124:O,125:N,126:F,127:z},{22:G,30:205},{22:[1,206],26:Y,52:q,66:X,67:J,91:Z,105:K,106:Q,109:tt,111:et,112:nt,115:100,117:178,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},t(Ut,[2,123]),{22:[1,211]},{22:[1,212],26:Y,52:q,66:X,67:J,91:Z,105:K,106:Q,109:tt,111:et,112:nt,115:100,117:178,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:[1,213],26:Y,52:q,66:X,67:J,91:Z,105:K,106:Q,109:tt,111:et,112:nt,115:100,117:178,122:rt,123:it,124:at,125:st,126:ot,127:lt},{84:[1,214]},t(dt,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},t(Nt,[2,153]),{84:[1,219],101:[1,220]},t(ct,[2,57],{116:129,52:m,66:g,67:y,91:S,95:E,105:M,106:C,109:T,111:A,112:k,122:D,123:B,124:O,125:N,126:F,127:z}),{22:gt,24:yt,26:vt,38:bt,41:[1,221],42:xt,52:q,66:X,67:J,73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,42:xt,52:q,56:[1,222],66:X,67:J,73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,39:223,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,42:xt,52:q,58:[1,224],66:X,67:J,73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,42:xt,52:q,60:[1,225],66:X,67:J,73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,42:xt,52:q,62:[1,226],66:X,67:J,73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,42:xt,52:q,64:[1,227],66:X,67:J,73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{67:[1,228]},{22:gt,24:yt,26:vt,38:bt,42:xt,52:q,66:X,67:J,70:[1,229],73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,42:xt,52:q,66:X,67:J,72:[1,230],73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,39:231,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,41:[1,232],42:xt,52:q,66:X,67:J,73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,42:xt,52:q,66:X,67:J,73:_t,75:[1,233],77:[1,234],81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{22:gt,24:yt,26:vt,38:bt,42:xt,52:q,66:X,67:J,73:_t,75:[1,236],77:[1,235],81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{9:237,20:j,21:V,23:W},t($,[2,52],{52:Ot}),t(mt,[2,77]),t(mt,[2,76]),{22:gt,24:yt,26:vt,38:bt,42:xt,52:q,66:X,67:J,68:[1,238],73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},t(mt,[2,79]),t(Ft,[2,83]),{22:gt,24:yt,26:vt,38:bt,39:239,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},t(Bt,s,{17:240}),t(H,[2,43]),{51:241,52:m,54:46,66:g,67:y,91:S,95:E,105:M,106:C,109:T,111:A,112:k,116:47,122:D,123:B,124:O,125:N,126:F,127:z},{22:Gt,66:Ht,67:jt,86:Vt,96:242,102:Wt,105:$t,107:243,108:244,109:Yt,110:qt,111:Xt,112:Jt,113:Zt},{22:Gt,66:Ht,67:jt,86:Vt,96:256,102:Wt,105:$t,107:243,108:244,109:Yt,110:qt,111:Xt,112:Jt,113:Zt},{22:Gt,66:Ht,67:jt,86:Vt,96:257,102:Wt,104:[1,258],105:$t,107:243,108:244,109:Yt,110:qt,111:Xt,112:Jt,113:Zt},{22:Gt,66:Ht,67:jt,86:Vt,96:259,102:Wt,104:[1,260],105:$t,107:243,108:244,109:Yt,110:qt,111:Xt,112:Jt,113:Zt},{105:[1,261]},{22:Gt,66:Ht,67:jt,86:Vt,96:262,102:Wt,105:$t,107:243,108:244,109:Yt,110:qt,111:Xt,112:Jt,113:Zt},{22:Gt,66:Ht,67:jt,86:Vt,96:263,102:Wt,105:$t,107:243,108:244,109:Yt,110:qt,111:Xt,112:Jt,113:Zt},{26:Y,52:q,66:X,67:J,91:Z,97:264,105:K,106:Q,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:at,125:st,126:ot,127:lt},t(dt,[2,102]),{84:[1,265]},t(dt,[2,106],{22:[1,266]}),t(dt,[2,107]),t(dt,[2,110]),t(dt,[2,112],{22:[1,267]}),t(dt,[2,113]),t(ut,[2,58]),t(ut,[2,59]),{22:gt,24:yt,26:vt,38:bt,42:xt,52:q,58:[1,268],66:X,67:J,73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},t(ut,[2,66]),t(ut,[2,61]),t(ut,[2,62]),t(ut,[2,63]),{66:[1,269]},t(ut,[2,65]),t(ut,[2,67]),{22:gt,24:yt,26:vt,38:bt,42:xt,52:q,66:X,67:J,72:[1,270],73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},t(ut,[2,69]),t(ut,[2,70]),t(ut,[2,72]),t(ut,[2,71]),t(ut,[2,73]),t(zt,[2,4]),t([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:gt,24:yt,26:vt,38:bt,41:[1,271],42:xt,52:q,66:X,67:J,73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{18:18,19:19,20:o,21:l,22:c,23:u,32:24,33:25,34:26,35:27,36:28,37:29,38:h,42:[1,272],43:31,44:d,46:f,48:p,50:35,51:45,52:m,54:46,66:g,67:y,86:v,87:b,88:x,89:_,90:w,91:S,95:E,105:M,106:C,109:T,111:A,112:k,116:47,118:L,119:P,120:R,121:I,122:D,123:B,124:O,125:N,126:F,127:z},t(ct,[2,56]),t(dt,[2,115],{106:Kt}),t(Qt,[2,125],{108:274,22:Gt,66:Ht,67:jt,86:Vt,102:Wt,105:$t,109:Yt,110:qt,111:Xt,112:Jt,113:Zt}),t(te,[2,127]),t(te,[2,129]),t(te,[2,130]),t(te,[2,131]),t(te,[2,132]),t(te,[2,133]),t(te,[2,134]),t(te,[2,135]),t(te,[2,136]),t(te,[2,137]),t(te,[2,138]),t(te,[2,139]),t(dt,[2,116],{106:Kt}),t(dt,[2,117],{106:Kt}),{22:[1,275]},t(dt,[2,118],{106:Kt}),{22:[1,276]},t(Ut,[2,124]),t(dt,[2,98],{106:Kt}),t(dt,[2,99],{106:Kt}),t(dt,[2,100],{115:100,117:178,26:Y,52:q,66:X,67:J,91:Z,105:K,106:Q,109:tt,111:et,112:nt,122:rt,123:it,124:at,125:st,126:ot,127:lt}),t(dt,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:j,21:V,23:W},t(H,[2,42]),{22:Gt,66:Ht,67:jt,86:Vt,102:Wt,105:$t,107:283,108:244,109:Yt,110:qt,111:Xt,112:Jt,113:Zt},t(te,[2,128]),{26:Y,52:q,66:X,67:J,91:Z,97:284,105:K,106:Q,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:at,125:st,126:ot,127:lt},{26:Y,52:q,66:X,67:J,91:Z,97:285,105:K,106:Q,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:at,125:st,126:ot,127:lt},t(dt,[2,108]),t(dt,[2,114]),t(ut,[2,60]),{22:gt,24:yt,26:vt,38:bt,39:286,42:xt,52:q,66:X,67:J,73:_t,81:wt,83:140,84:St,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},t(ut,[2,68]),t(Bt,s,{17:287}),t(Qt,[2,126],{108:274,22:Gt,66:Ht,67:jt,86:Vt,102:Wt,105:$t,109:Yt,110:qt,111:Xt,112:Jt,113:Zt}),t(dt,[2,121],{115:100,117:178,22:[1,288],26:Y,52:q,66:X,67:J,91:Z,105:K,106:Q,109:tt,111:et,112:nt,122:rt,123:it,124:at,125:st,126:ot,127:lt}),t(dt,[2,122],{115:100,117:178,22:[1,289],26:Y,52:q,66:X,67:J,91:Z,105:K,106:Q,109:tt,111:et,112:nt,122:rt,123:it,124:at,125:st,126:ot,127:lt}),{22:gt,24:yt,26:vt,38:bt,41:[1,290],42:xt,52:q,66:X,67:J,73:_t,81:wt,83:201,85:151,86:Et,87:Mt,88:Ct,89:Tt,90:At,91:kt,92:Lt,94:142,95:Pt,105:K,106:Q,109:Rt,111:et,112:nt,113:It,114:Dt,115:148,122:rt,123:it,124:at,125:st,126:ot,127:lt},{18:18,19:19,20:o,21:l,22:c,23:u,32:24,33:25,34:26,35:27,36:28,37:29,38:h,42:[1,291],43:31,44:d,46:f,48:p,50:35,51:45,52:m,54:46,66:g,67:y,86:v,87:b,88:x,89:_,90:w,91:S,95:E,105:M,106:C,109:T,111:A,112:k,116:47,118:L,119:P,120:R,121:I,122:D,123:B,124:O,125:N,126:F,127:z},{22:Gt,66:Ht,67:jt,86:Vt,96:292,102:Wt,105:$t,107:243,108:244,109:Yt,110:qt,111:Xt,112:Jt,113:Zt},{22:Gt,66:Ht,67:jt,86:Vt,96:293,102:Wt,105:$t,107:243,108:244,109:Yt,110:qt,111:Xt,112:Jt,113:Zt},t(ut,[2,64]),t(H,[2,41]),t(dt,[2,119],{106:Kt}),t(dt,[2,120],{106:Kt})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],a=[],s=this.table,o="",l=0,c=0,u=2,h=1,d=a.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,typeof f.yylloc>"u"&&(f.yylloc={});var g=f.yylloc;a.push(g);var y=f.options&&f.options.ranges;function v(){var t;return"number"!=typeof(t=r.pop()||f.lex()||h)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,M,C,T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:((null===b||typeof b>"u")&&(b=v()),_=s[x]&&s[x][b]),typeof _>"u"||!_.length||!_[0]){var A="";for(S in C=[],s[x])this.terminals_[S]&&S>u&&C.push("'"+this.terminals_[S]+"'");A=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(b==h?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(A,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(f.yytext),a.push(f.yylloc),n.push(_[1]),b=null,c=f.yyleng,o=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(E=this.productions_[_[1]][1],T.$=i[i.length-E],T._$={first_line:a[a.length-(E||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(E||1)].first_column,last_column:a[a.length-1].last_column},y&&(T._$.range=[a[a.length-(E||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(T,[o,c,l,p.yy,_[1],i,a].concat(d)))<"u")return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),a=a.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(T.$),a.push(T._$),M=s[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},ne={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:case 15:case 24:case 27:case 30:case 33:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 25:return 100;case 26:this.begin("callbackname");break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 31:return 99;case 32:this.begin("click");break;case 34:return 90;case 35:case 36:return t.lex.firstGraph()&&this.begin("dir"),24;case 37:return 38;case 38:return 42;case 39:case 40:case 41:case 42:return 101;case 43:return this.popState(),25;case 44:case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:return this.popState(),26;case 54:return 118;case 55:return 119;case 56:return 120;case 57:return 121;case 58:return 105;case 59:return 111;case 60:return 53;case 61:return 67;case 62:return 52;case 63:return 20;case 64:return 106;case 65:return 126;case 66:case 67:case 68:return 82;case 69:case 70:case 71:return 81;case 72:return 59;case 73:return 60;case 74:return 61;case 75:return 62;case 76:return 63;case 77:return 64;case 78:return 65;case 79:return 69;case 80:return 70;case 81:return 55;case 82:return 56;case 83:return 109;case 84:return 112;case 85:return 127;case 86:return 124;case 87:return 113;case 88:case 89:return 125;case 90:return 114;case 91:return 73;case 92:return 92;case 93:return"SEP";case 94:return 91;case 95:return 66;case 96:return 75;case 97:return 74;case 98:return 77;case 99:return 76;case 100:return 122;case 101:return 123;case 102:return 68;case 103:return 57;case 104:return 58;case 105:return 40;case 106:return 41;case 107:return 71;case 108:return 72;case 109:return 133;case 110:return 21;case 111:return 22;case 112:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^\}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[\_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[43,44,45,46,47,48,49,50,51,52,53],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112],inclusive:!0}}};function re(){this.yy={}}return ee.lexer=ne,re.prototype=ee,ee.Parser=re,new re}();gI.parser=gI;const yI=gI,vI=(t,e)=>{var n;return"dagre-wrapper"!==(null==(n=null==e?void 0:e.flowchart)?void 0:n.defaultRenderer)&&null!==t.match(/^\s*graph/)},bI=(t,e)=>{var n;return"dagre-wrapper"===(null==(n=null==e?void 0:e.flowchart)?void 0:n.defaultRenderer)&&null!==t.match(/^\s*graph/)||null!==t.match(/^\s*flowchart/)},xI="flowchart-";let _I,wI,SI=0,EI=tv(),MI={},CI=[],TI={},AI=[],kI={},LI={},PI=0,RI=!0,II=[];const DI=t=>Oh.sanitizeText(t,EI),BI=function(t,e,n){iH.parseDirective(this,t,e,n)},OI=function(t){const e=Object.keys(MI);for(const n of e)if(MI[n].id===t)return MI[n].domId;return t},NI=function(t,e,n,r,i,a,s={}){let o,l=t;void 0!==l&&0!==l.trim().length&&(void 0===MI[l]&&(MI[l]={id:l,domId:xI+l+"-"+SI,styles:[],classes:[]}),SI++,void 0!==e?(EI=tv(),o=DI(e.trim()),'"'===o[0]&&'"'===o[o.length-1]&&(o=o.substring(1,o.length-1)),MI[l].text=o):void 0===MI[l].text&&(MI[l].text=t),void 0!==n&&(MI[l].type=n),null!=r&&r.forEach((function(t){MI[l].styles.push(t)})),null!=i&&i.forEach((function(t){MI[l].classes.push(t)})),void 0!==a&&(MI[l].dir=a),void 0===MI[l].props?MI[l].props=s:void 0!==s&&Object.assign(MI[l].props,s))},FI=function(t,e,n,r){const i={start:t,end:e,type:void 0,text:""};void 0!==(r=n.text)&&(i.text=DI(r.trim()),'"'===i.text[0]&&'"'===i.text[i.text.length-1]&&(i.text=i.text.substring(1,i.text.length-1))),void 0!==n&&(i.type=n.type,i.stroke=n.stroke,i.length=n.length),CI.push(i)},zI=function(t,e,n,r){let i,a;for(i=0;i<t.length;i++)for(a=0;a<e.length;a++)FI(t[i],e[a],n,r)},UI=function(t,e){t.forEach((function(t){"default"===t?CI.defaultInterpolate=e:CI[t].interpolate=e}))},GI=function(t,e){t.forEach((function(t){"default"===t?CI.defaultStyle=e:(-1===Zg.isSubstringInArray("fill",e)&&e.push("fill:none"),CI[t].style=e)}))},HI=function(t,e){void 0===TI[t]&&(TI[t]={id:t,styles:[],textStyles:[]}),null!=e&&e.forEach((function(e){if(e.match("color")){const n=e.replace("fill","bgFill").replace("color","fill");TI[t].textStyles.push(n)}TI[t].styles.push(e)}))},jI=function(t){_I=t,_I.match(/.*</)&&(_I="RL"),_I.match(/.*\^/)&&(_I="BT"),_I.match(/.*>/)&&(_I="LR"),_I.match(/.*v/)&&(_I="TB")},VI=function(t,e){t.split(",").forEach((function(t){let n=t;void 0!==MI[n]&&MI[n].classes.push(e),void 0!==kI[n]&&kI[n].classes.push(e)}))},WI=function(t,e){t.split(",").forEach((function(t){void 0!==e&&(LI["gen-1"===wI?OI(t):t]=DI(e))}))},$I=function(t,e,n){let r=OI(t);if("loose"!==tv().securityLevel||void 0===e)return;let i=[];if("string"==typeof n){i=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let t=0;t<i.length;t++){let e=i[t].trim();'"'===e.charAt(0)&&'"'===e.charAt(e.length-1)&&(e=e.substr(1,e.length-2)),i[t]=e}}0===i.length&&i.push(t),void 0!==MI[t]&&(MI[t].haveCallback=!0,II.push((function(){const t=document.querySelector(`[id="${r}"]`);null!==t&&t.addEventListener("click",(function(){Zg.runFunc(e,...i)}),!1)})))},YI=function(t,e,n){t.split(",").forEach((function(t){void 0!==MI[t]&&(MI[t].link=Zg.formatUrl(e,EI),MI[t].linkTarget=n)})),VI(t,"clickable")},qI=function(t){return LI[t]},XI=function(t,e,n){t.split(",").forEach((function(t){$I(t,e,n)})),VI(t,"clickable")},JI=function(t){II.forEach((function(e){e(t)}))},ZI=function(){return _I.trim()},KI=function(){return MI},QI=function(){return CI},tD=function(){return TI},eD=function(t){let e=dn(".mermaidTooltip");null===(e._groups||e)[0][0]&&(e=dn("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),dn(t).select("svg").selectAll("g.node").on("mouseover",(function(){const t=dn(this);if(null===t.attr("title"))return;const n=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(t.attr("title")).style("left",window.scrollX+n.left+(n.right-n.left)/2+"px").style("top",window.scrollY+n.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),t.classed("hover",!0)})).on("mouseout",(function(){e.transition().duration(500).style("opacity",0),dn(this).classed("hover",!1)}))};II.push(eD);const nD=function(t,e,n){let r=t.trim(),i=n;function a(t){const e={boolean:{},number:{},string:{}},n=[];let r;return{nodeList:t.filter((function(t){const i=typeof t;return t.stmt&&"dir"===t.stmt?(r=t.value,!1):""!==t.trim()&&(i in e?!e[i].hasOwnProperty(t)&&(e[i][t]=!0):!n.includes(t)&&n.push(t))})),dir:r}}t===n&&n.match(/\s/)&&(r=void 0);let s=[];const{nodeList:o,dir:l}=a(s.concat.apply(s,e));if(s=o,"gen-1"===wI)for(let u=0;u<s.length;u++)s[u]=OI(s[u]);r=r||"subGraph"+PI,i=i||"",i=DI(i),PI+=1;const c={id:r,nodes:s,title:i.trim(),classes:[],dir:l};return f.info("Adding",c.id,c.nodes,c.dir),c.nodes=hD(c,AI).nodes,AI.push(c),kI[r]=c,r},rD=function(t){for(const[e,n]of AI.entries())if(n.id===t)return e;return-1};let iD=-1;const aD=[],sD=function(t,e){const n=AI[e].nodes;if(iD+=1,iD>2e3)return;if(aD[iD]=e,AI[e].id===t)return{result:!0,count:0};let r=0,i=1;for(;r<n.length;){const e=rD(n[r]);if(e>=0){const n=sD(t,e);if(n.result)return{result:!0,count:i+n.count};i+=n.count}r+=1}return{result:!1,count:i}},oD=t=>{let e=t.trim(),n="arrow_open";switch(e[0]){case"<":n="arrow_point",e=e.slice(1);break;case"x":n="arrow_cross",e=e.slice(1);break;case"o":n="arrow_circle",e=e.slice(1)}let r="normal";return e.includes("=")&&(r="thick"),e.includes(".")&&(r="dotted"),{type:n,stroke:r}},lD=(t,e)=>{const n=e.length;let r=0;for(let i=0;i<n;++i)e[i]===t&&++r;return r},cD=t=>{const e=t.trim();let n=e.slice(0,-1),r="arrow_open";switch(e.slice(-1)){case"x":r="arrow_cross","x"===e[0]&&(r="double_"+r,n=n.slice(1));break;case">":r="arrow_point","<"===e[0]&&(r="double_"+r,n=n.slice(1));break;case"o":r="arrow_circle","o"===e[0]&&(r="double_"+r,n=n.slice(1))}let i="normal",a=n.length-1;"="===n[0]&&(i="thick");let s=lD(".",n);return s&&(i="dotted",a=s),{type:r,stroke:i,length:a}},uD=(t,e)=>{let n=!1;return t.forEach((t=>{t.nodes.indexOf(e)>=0&&(n=!0)})),n},hD=(t,e)=>{const n=[];return t.nodes.forEach(((r,i)=>{uD(e,r)||n.push(t.nodes[i])})),{nodes:n}},dD={parseDirective:BI,defaultConfig:()=>jy.flowchart,setAccTitle:jv,getAccTitle:Vv,getAccDescription:$v,setAccDescription:Wv,addVertex:NI,lookUpDomId:OI,addLink:zI,updateLinkInterpolate:UI,updateLink:GI,addClass:HI,setDirection:jI,setClass:VI,setTooltip:WI,getTooltip:qI,setClickEvent:XI,setLink:YI,bindFunctions:JI,getDirection:ZI,getVertices:KI,getEdges:QI,getClasses:tD,clear:function(t="gen-1"){MI={},TI={},CI=[],II=[eD],AI=[],kI={},PI=0,LI=[],RI=!0,wI=t,Hv()},setGen:t=>{wI=t||"gen-1"},defaultStyle:function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},addSubGraph:nD,getDepthFirstPos:function(t){return aD[t]},indexNodes:function(){iD=-1,AI.length>0&&sD("none",AI.length-1)},getSubGraphs:function(){return AI},destructLink:(t,e)=>{const n=cD(t);let r;if(e){if(r=oD(e),r.stroke!==n.stroke)return{type:"INVALID",stroke:"INVALID"};if("arrow_open"===r.type)r.type=n.type;else{if(r.type!==n.type)return{type:"INVALID",stroke:"INVALID"};r.type="double_"+r.type}return"double_arrow"===r.type&&(r.type="double_arrow_point"),r.length=n.length,r}return n},lex:{firstGraph:()=>!!RI&&(RI=!1,!0)},exists:uD,makeUniq:hD,setDiagramTitle:Yv,getDiagramTitle:qv};function fD(t,e){return!!t.children(e).length}function pD(t){return gD(t.v)+":"+gD(t.w)+":"+gD(t.name)}var mD=/:/g;function gD(t){return t?String(t).replace(mD,"\\:"):""}function yD(t,e){e&&t.attr("style",e)}function vD(t,e,n){e&&t.attr("class",e).attr("class",n+" "+t.attr("class"))}function bD(t,e){var n=e.graph();if(oE(n)){var r=n.transition;if(Tm(r))return r(t)}return t}var xD={normal:wD,vee:SD,undirected:ED};function _D(t){xD=t}function wD(t,e,n,r){var i=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");yD(i,n[r+"Style"]),n[r+"Class"]&&i.attr("class",n[r+"Class"])}function SD(t,e,n,r){var i=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");yD(i,n[r+"Style"]),n[r+"Class"]&&i.attr("class",n[r+"Class"])}function ED(t,e,n,r){var i=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");yD(i,n[r+"Style"]),n[r+"Class"]&&i.attr("class",n[r+"Class"])}function MD(t,e){var n=t.append("foreignObject").attr("width","100000"),r=n.append("xhtml:div");r.attr("xmlns","http://www.w3.org/1999/xhtml");var i=e.label;switch(typeof i){case"function":r.insert(i);break;case"object":r.insert((function(){return i}));break;default:r.html(i)}yD(r,e.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap");var a=r.node().getBoundingClientRect();return n.attr("width",a.width).attr("height",a.height),n}function CD(t,e){var n=t;return n.node().appendChild(e.label),yD(n,e.labelStyle),n}function TD(t,e){for(var n=t.append("text"),r=AD(e.label).split("\n"),i=0;i<r.length;i++)n.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(r[i]);return yD(n,e.labelStyle),n}function AD(t){for(var e,n="",r=!1,i=0;i<t.length;++i)e=t[i],r?(n+="n"===e?"\n":e,r=!1):"\\"===e?r=!0:n+=e;return n}function kD(t,e,n){var r=e.label,i=t.append("g");"svg"===e.labelType?CD(i,e):"string"!=typeof r||"html"===e.labelType?MD(i,e):TD(i,e);var a,s=i.node().getBBox();switch(n){case"top":a=-e.height/2;break;case"bottom":a=e.height/2-s.height;break;default:a=-s.height/2}return i.attr("transform","translate("+-s.width/2+","+a+")"),i}var LD=function(t,e){var n=e.nodes().filter((function(t){return fD(e,t)})),r=t.selectAll("g.cluster").data(n,(function(t){return t}));bD(r.exit(),e).style("opacity",0).remove();var i=r.enter().append("g").attr("class","cluster").attr("id",(function(t){return e.node(t).id})).style("opacity",0).each((function(t){var n=e.node(t),r=dn(this);dn(this).append("rect"),kD(r.append("g").attr("class","label"),n,n.clusterLabelPos)}));return(r=bD(r=r.merge(i),e).style("opacity",1)).selectAll("rect").each((function(t){var n=e.node(t);yD(dn(this),n.style)})),r};function PD(t){LD=t}let RD=function(t,e){var n=t.selectAll("g.edgeLabel").data(e.edges(),(function(t){return pD(t)})).classed("update",!0);return n.exit().remove(),n.enter().append("g").classed("edgeLabel",!0).style("opacity",0),(n=t.selectAll("g.edgeLabel")).each((function(t){var n=dn(this);n.select(".label").remove();var r=e.edge(t),i=kD(n,e.edge(t),0).classed("label",!0),a=i.node().getBBox();r.labelId&&i.attr("id",r.labelId),XT(r,"width")||(r.width=a.width),XT(r,"height")||(r.height=a.height)})),bD(n.exit?n.exit():n.selectAll(null),e).style("opacity",0).remove(),n};function ID(t){RD=t}function DD(t,e){return t.intersect(e)}var BD=function(t,e,n){var r=t.selectAll("g.edgePath").data(e.edges(),(function(t){return pD(t)})).classed("update",!0),i=GD(r,e);HD(r,e);var a=void 0!==r.merge?r.merge(i):r;return bD(a,e).style("opacity",1),a.each((function(t){var n=dn(this),r=e.edge(t);r.elem=this,r.id&&n.attr("id",r.id),vD(n,r.class,(n.classed("update")?"update ":"")+"edgePath")})),a.selectAll("path.path").each((function(t){var n=e.edge(t);n.arrowheadId=RA("arrowhead");var r=dn(this).attr("marker-end",(function(){return"url("+ND(location.href,n.arrowheadId)+")"})).style("fill","none");bD(r,e).attr("d",(function(t){return FD(e,t)})),yD(r,n.style)})),a.selectAll("defs *").remove(),a.selectAll("defs").each((function(t){var r=e.edge(t);(0,n[r.arrowhead])(dn(this),r.arrowheadId,r,"arrowhead")})),a};function OD(t){BD=t}function ND(t,e){return t.split("#")[0]+"#"+e}function FD(t,e){var n=t.edge(e),r=t.node(e.v),i=t.node(e.w),a=n.points.slice(1,n.points.length-1);return a.unshift(DD(r,a[0])),a.push(DD(i,a[a.length-1])),zD(n,a)}function zD(t,e){var n=(Hc||Ka.line)().x((function(t){return t.x})).y((function(t){return t.y}));return(n.curve||n.interpolate)(t.curve),n(e)}function UD(t){var e=t.getBBox(),n=t.ownerSVGElement.getScreenCTM().inverse().multiply(t.getScreenCTM()).translate(e.width/2,e.height/2);return{x:n.e,y:n.f}}function GD(t,e){var n=t.enter().append("g").attr("class","edgePath").style("opacity",0);return n.append("path").attr("class","path").attr("d",(function(t){var n=e.edge(t),r=e.node(t.v).elem;return zD(n,wA(n.points.length).map((function(){return UD(r)})))})),n.append("defs"),n}function HD(t,e){bD(t.exit(),e).style("opacity",0).remove()}var jD=function(t,e,n){var r=e.nodes().filter((function(t){return!fD(e,t)})),i=t.selectAll("g.node").data(r,(function(t){return t})).classed("update",!0);return i.exit().remove(),i.enter().append("g").attr("class","node").style("opacity",0),(i=t.selectAll("g.node")).each((function(t){var r=e.node(t),i=dn(this);vD(i,r.class,(i.classed("update")?"update ":"")+"node"),i.select("g.label").remove();var a=i.append("g").attr("class","label"),s=kD(a,r),o=n[r.shape],l=yA(s.node().getBBox(),"width","height");r.elem=this,r.id&&i.attr("id",r.id),r.labelId&&a.attr("id",r.labelId),XT(r,"width")&&(l.width=r.width),XT(r,"height")&&(l.height=r.height),l.width+=r.paddingLeft+r.paddingRight,l.height+=r.paddingTop+r.paddingBottom,a.attr("transform","translate("+(r.paddingLeft-r.paddingRight)/2+","+(r.paddingTop-r.paddingBottom)/2+")");var c=dn(this);c.select(".label-container").remove();var u=o(c,l,r).classed("label-container",!0);yD(u,r.style);var h=u.node().getBBox();r.width=h.width,r.height=h.height})),bD(i.exit?i.exit():i.selectAll(null),e).style("opacity",0).remove(),i};function VD(t){jD=t}function WD(t,e){var n=t.filter((function(){return!dn(this).classed("update")}));function r(t){var n=e.node(t);return"translate("+n.x+","+n.y+")"}n.attr("transform",r),bD(t,e).style("opacity",1).attr("transform",r),bD(n.selectAll("rect"),e).attr("width",(function(t){return e.node(t).width})).attr("height",(function(t){return e.node(t).height})).attr("x",(function(t){return-e.node(t).width/2})).attr("y",(function(t){return-e.node(t).height/2}))}function $D(t,e){function n(t){var n=e.edge(t);return XT(n,"x")?"translate("+n.x+","+n.y+")":""}t.filter((function(){return!dn(this).classed("update")})).attr("transform",n),bD(t,e).style("opacity",1).attr("transform",n)}function YD(t,e){function n(t){var n=e.node(t);return"translate("+n.x+","+n.y+")"}t.filter((function(){return!dn(this).classed("update")})).attr("transform",n),bD(t,e).style("opacity",1).attr("transform",n)}function qD(t,e,n,r){var i=t.x,a=t.y,s=i-r.x,o=a-r.y,l=Math.sqrt(e*e*o*o+n*n*s*s),c=Math.abs(e*n*s/l);r.x<i&&(c=-c);var u=Math.abs(e*n*o/l);return r.y<a&&(u=-u),{x:i+c,y:a+u}}function XD(t,e,n){return qD(t,e,e,n)}function JD(t,e,n,r){var i,a,s,o,l,c,u,h,d,f,p,m,g;if(i=e.y-t.y,s=t.x-e.x,l=e.x*t.y-t.x*e.y,d=i*n.x+s*n.y+l,f=i*r.x+s*r.y+l,!(0!==d&&0!==f&&ZD(d,f)||(a=r.y-n.y,o=n.x-r.x,c=r.x*n.y-n.x*r.y,u=a*t.x+o*t.y+c,h=a*e.x+o*e.y+c,0!==u&&0!==h&&ZD(u,h)||(p=i*o-a*s,0===p))))return m=Math.abs(p/2),{x:(g=s*c-o*l)<0?(g-m)/p:(g+m)/p,y:(g=a*l-i*c)<0?(g-m)/p:(g+m)/p}}function ZD(t,e){return t*e>0}function KD(t,e,n){var r=t.x,i=t.y,a=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;e.forEach((function(t){s=Math.min(s,t.x),o=Math.min(o,t.y)}));for(var l=r-t.width/2-s,c=i-t.height/2-o,u=0;u<e.length;u++){var h=e[u],d=e[u<e.length-1?u+1:0],f=JD(t,n,{x:l+h.x,y:c+h.y},{x:l+d.x,y:c+d.y});f&&a.push(f)}return a.length?(a.length>1&&a.sort((function(t,e){var r=t.x-n.x,i=t.y-n.y,a=Math.sqrt(r*r+i*i),s=e.x-n.x,o=e.y-n.y,l=Math.sqrt(s*s+o*o);return a<l?-1:a===l?0:1})),a[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",t),t)}function QD(t,e){var n,r,i=t.x,a=t.y,s=e.x-i,o=e.y-a,l=t.width/2,c=t.height/2;return Math.abs(o)*l>Math.abs(s)*c?(o<0&&(c=-c),n=0===o?0:c*s/o,r=c):(s<0&&(l=-l),n=l,r=0===s?0:l*o/s),{x:i+n,y:a+r}}var tB={rect:nB,ellipse:rB,circle:iB,diamond:aB};function eB(t){tB=t}function nB(t,e,n){var r=t.insert("rect",":first-child").attr("rx",n.rx).attr("ry",n.ry).attr("x",-e.width/2).attr("y",-e.height/2).attr("width",e.width).attr("height",e.height);return n.intersect=function(t){return QD(n,t)},r}function rB(t,e,n){var r=e.width/2,i=e.height/2,a=t.insert("ellipse",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("rx",r).attr("ry",i);return n.intersect=function(t){return qD(n,r,i,t)},a}function iB(t,e,n){var r=Math.max(e.width,e.height)/2,i=t.insert("circle",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("r",r);return n.intersect=function(t){return XD(n,r,t)},i}function aB(t,e,n){var r=e.width*Math.SQRT2/2,i=e.height*Math.SQRT2/2,a=[{x:0,y:-i},{x:-r,y:0},{x:0,y:i},{x:r,y:0}],s=t.insert("polygon",":first-child").attr("points",a.map((function(t){return t.x+","+t.y})).join(" "));return n.intersect=function(t){return KD(n,a,t)},s}function sB(){var t=function(t,e){cB(e);var n=hB(t,"output"),r=hB(n,"clusters"),i=hB(n,"edgePaths"),a=RD(hB(n,"edgeLabels"),e),s=jD(hB(n,"nodes"),e,tB);pL(e),YD(s,e),$D(a,e),BD(i,e,xD),WD(LD(r,e),e),uB(e)};return t.createNodes=function(e){return arguments.length?(VD(e),t):jD},t.createClusters=function(e){return arguments.length?(PD(e),t):LD},t.createEdgeLabels=function(e){return arguments.length?(ID(e),t):RD},t.createEdgePaths=function(e){return arguments.length?(OD(e),t):BD},t.shapes=function(e){return arguments.length?(eB(e),t):tB},t.arrows=function(e){return arguments.length?(_D(e),t):xD},t}var oB={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},lB={arrowhead:"normal",curve:zc};function cB(t){t.nodes().forEach((function(e){var n=t.node(e);!XT(n,"label")&&!t.children(e).length&&(n.label=e),XT(n,"paddingX")&&CT(n,{paddingLeft:n.paddingX,paddingRight:n.paddingX}),XT(n,"paddingY")&&CT(n,{paddingTop:n.paddingY,paddingBottom:n.paddingY}),XT(n,"padding")&&CT(n,{paddingLeft:n.padding,paddingRight:n.padding,paddingTop:n.padding,paddingBottom:n.padding}),CT(n,oB),OT(["paddingLeft","paddingRight","paddingTop","paddingBottom"],(function(t){n[t]=Number(n[t])})),XT(n,"width")&&(n._prevWidth=n.width),XT(n,"height")&&(n._prevHeight=n.height)})),t.edges().forEach((function(e){var n=t.edge(e);XT(n,"label")||(n.label=""),CT(n,lB)}))}function uB(t){OT(t.nodes(),(function(e){var n=t.node(e);XT(n,"_prevWidth")?n.width=n._prevWidth:delete n.width,XT(n,"_prevHeight")?n.height=n._prevHeight:delete n.height,delete n._prevWidth,delete n._prevHeight}))}function hB(t,e){var n=t.select("g."+e);return n.empty()&&(n=t.append("g").attr("class",e)),n}function dB(t,e,n){const r=.9*(e.width+e.height),i=[{x:r/2,y:0},{x:r,y:-r/2},{x:r/2,y:-r},{x:0,y:-r/2}],a=MB(t,r,r,i);return n.intersect=function(t){return KD(n,i,t)},a}function fB(t,e,n){const r=e.height,i=r/4,a=e.width+2*i,s=[{x:i,y:0},{x:a-i,y:0},{x:a,y:-r/2},{x:a-i,y:-r},{x:i,y:-r},{x:0,y:-r/2}],o=MB(t,a,r,s);return n.intersect=function(t){return KD(n,s,t)},o}function pB(t,e,n){const r=e.width,i=e.height,a=[{x:-i/2,y:0},{x:r,y:0},{x:r,y:-i},{x:-i/2,y:-i},{x:0,y:-i/2}],s=MB(t,r,i,a);return n.intersect=function(t){return KD(n,a,t)},s}function mB(t,e,n){const r=e.width,i=e.height,a=[{x:-2*i/6,y:0},{x:r-i/6,y:0},{x:r+2*i/6,y:-i},{x:i/6,y:-i}],s=MB(t,r,i,a);return n.intersect=function(t){return KD(n,a,t)},s}function gB(t,e,n){const r=e.width,i=e.height,a=[{x:2*i/6,y:0},{x:r+i/6,y:0},{x:r-2*i/6,y:-i},{x:-i/6,y:-i}],s=MB(t,r,i,a);return n.intersect=function(t){return KD(n,a,t)},s}function yB(t,e,n){const r=e.width,i=e.height,a=[{x:-2*i/6,y:0},{x:r+2*i/6,y:0},{x:r-i/6,y:-i},{x:i/6,y:-i}],s=MB(t,r,i,a);return n.intersect=function(t){return KD(n,a,t)},s}function vB(t,e,n){const r=e.width,i=e.height,a=[{x:i/6,y:0},{x:r-i/6,y:0},{x:r+2*i/6,y:-i},{x:-2*i/6,y:-i}],s=MB(t,r,i,a);return n.intersect=function(t){return KD(n,a,t)},s}function bB(t,e,n){const r=e.width,i=e.height,a=[{x:0,y:0},{x:r+i/2,y:0},{x:r,y:-i/2},{x:r+i/2,y:-i},{x:0,y:-i}],s=MB(t,r,i,a);return n.intersect=function(t){return KD(n,a,t)},s}function xB(t,e,n){const r=e.height,i=e.width+r/4,a=t.insert("rect",":first-child").attr("rx",r/2).attr("ry",r/2).attr("x",-i/2).attr("y",-r/2).attr("width",i).attr("height",r);return n.intersect=function(t){return QD(n,t)},a}function _B(t,e,n){const r=e.width,i=e.height,a=[{x:0,y:0},{x:r,y:0},{x:r,y:-i},{x:0,y:-i},{x:0,y:0},{x:-8,y:0},{x:r+8,y:0},{x:r+8,y:-i},{x:-8,y:-i},{x:-8,y:0}],s=MB(t,r,i,a);return n.intersect=function(t){return KD(n,a,t)},s}function wB(t,e,n){const r=e.width,i=r/2,a=i/(2.5+r/50),s=e.height+a,o="M 0,"+a+" a "+i+","+a+" 0,0,0 "+r+" 0 a "+i+","+a+" 0,0,0 "+-r+" 0 l 0,"+s+" a "+i+","+a+" 0,0,0 "+r+" 0 l 0,"+-s,l=t.attr("label-offset-y",a).insert("path",":first-child").attr("d",o).attr("transform","translate("+-r/2+","+-(s/2+a)+")");return n.intersect=function(t){const e=QD(n,t),r=e.x-n.x;if(0!=i&&(Math.abs(r)<n.width/2||Math.abs(r)==n.width/2&&Math.abs(e.y-n.y)>n.height/2-a)){let s=a*a*(1-r*r/(i*i));0!=s&&(s=Math.sqrt(s)),s=a-s,t.y-n.y>0&&(s=-s),e.y+=s}return e},l}function SB(t){t.shapes().question=dB,t.shapes().hexagon=fB,t.shapes().stadium=xB,t.shapes().subroutine=_B,t.shapes().cylinder=wB,t.shapes().rect_left_inv_arrow=pB,t.shapes().lean_right=mB,t.shapes().lean_left=gB,t.shapes().trapezoid=yB,t.shapes().inv_trapezoid=vB,t.shapes().rect_right_inv_arrow=bB}function EB(t){t({question:dB}),t({hexagon:fB}),t({stadium:xB}),t({subroutine:_B}),t({cylinder:wB}),t({rect_left_inv_arrow:pB}),t({lean_right:mB}),t({lean_left:gB}),t({trapezoid:yB}),t({inv_trapezoid:vB}),t({rect_right_inv_arrow:bB})}function MB(t,e,n,r){return t.insert("polygon",":first-child").attr("points",r.map((function(t){return t.x+","+t.y})).join(" ")).attr("transform","translate("+-e/2+","+n/2+")")}const CB={addToRender:SB,addToRenderV2:EB},TB={},AB=function(t,e,n,r,i,a){const s=r?r.select(`[id="${n}"]`):dn(`[id="${n}"]`),o=i||document;Object.keys(t).forEach((function(n){const r=t[n];let i="default";r.classes.length>0&&(i=r.classes.join(" "));const l=Dg(r.styles);let c,u=void 0!==r.text?r.text:r.id;if(Dh(tv().flowchart.htmlLabels)){const t={label:u.replace(/fa[blrs]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`))};c=MD(s,t).node(),c.parentNode.removeChild(c)}else{const t=o.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",l.labelStyle.replace("color:","fill:"));const e=u.split(Oh.lineBreakRegex);for(const n of e){const e=o.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.setAttribute("dy","1em"),e.setAttribute("x","1"),e.textContent=n,t.appendChild(e)}c=t}let h=0,d="";switch(r.type){case"round":h=5,d="rect";break;case"square":case"group":default:d="rect";break;case"diamond":d="question";break;case"hexagon":d="hexagon";break;case"odd":case"odd_right":d="rect_left_inv_arrow";break;case"lean_right":d="lean_right";break;case"lean_left":d="lean_left";break;case"trapezoid":d="trapezoid";break;case"inv_trapezoid":d="inv_trapezoid";break;case"circle":d="circle";break;case"ellipse":d="ellipse";break;case"stadium":d="stadium";break;case"subroutine":d="subroutine";break;case"cylinder":d="cylinder"}f.warn("Adding node",r.id,r.domId),e.setNode(a.db.lookUpDomId(r.id),{labelType:"svg",labelStyle:l.labelStyle,shape:d,label:c,rx:h,ry:h,class:i,style:l.style,id:a.db.lookUpDomId(r.id)})}))},kB=function(t,e,n){let r,i,a=0;if(void 0!==t.defaultStyle){const e=Dg(t.defaultStyle);r=e.style,i=e.labelStyle}t.forEach((function(s){a++;var o="L-"+s.start+"-"+s.end,l="LS-"+s.start,c="LE-"+s.end;const u={};"arrow_open"===s.type?u.arrowhead="none":u.arrowhead="normal";let h="",d="";if(void 0!==s.style){const t=Dg(s.style);h=t.style,d=t.labelStyle}else switch(s.stroke){case"normal":h="fill:none",void 0!==r&&(h=r),void 0!==i&&(d=i);break;case"dotted":h="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":h=" stroke-width: 3.5px;fill:none"}u.style=h,u.labelStyle=d,void 0!==s.interpolate?u.curve=Cg(s.interpolate,zc):void 0!==t.defaultInterpolate?u.curve=Cg(t.defaultInterpolate,zc):u.curve=Cg(TB.curve,zc),void 0===s.text?void 0!==s.style&&(u.arrowheadStyle="fill: #333"):(u.arrowheadStyle="fill: #333",u.labelpos="c",Dh(tv().flowchart.htmlLabels)?(u.labelType="html",u.label=`<span id="L-${o}" class="edgeLabel L-${l}' L-${c}" style="${u.labelStyle}">${s.text.replace(/fa[blrs]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`))}</span>`):(u.labelType="text",u.label=s.text.replace(Oh.lineBreakRegex,"\n"),void 0===s.style&&(u.style=u.style||"stroke: #333; stroke-width: 1.5px;fill:none"),u.labelStyle=u.labelStyle.replace("color:","fill:"))),u.id=o,u.class=l+" "+c,u.minlen=s.length||1,e.setEdge(n.db.lookUpDomId(s.start),n.db.lookUpDomId(s.end),u,a)}))},LB={setConf:function(t){const e=Object.keys(t);for(const n of e)TB[n]=t[n]},addVertices:AB,addEdges:kB,getClasses:function(t,e){f.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch(n){return f.error(n),{}}},draw:function(t,e,n,r){f.info("Drawing flowchart"),r.db.clear();const{securityLevel:i,flowchart:a}=tv();let s;"sandbox"===i&&(s=dn("#i"+e));const o=dn("sandbox"===i?s.nodes()[0].contentDocument.body:"body"),l="sandbox"===i?s.nodes()[0].contentDocument:document;try{r.parser.parse(t)}catch{f.debug("Parsing failed")}let c=r.db.getDirection();void 0===c&&(c="TD");const u=a.nodeSpacing||50,h=a.rankSpacing||50,d=new FA({multigraph:!0,compound:!0}).setGraph({rankdir:c,nodesep:u,ranksep:h,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));let p;const m=r.db.getSubGraphs();for(let f=m.length-1;f>=0;f--)p=m[f],r.db.addVertex(p.id,p.title,"group",void 0,p.classes);const g=r.db.getVertices();f.warn("Get vertices",g);const y=r.db.getEdges();let v=0;for(v=m.length-1;v>=0;v--){p=m[v],fn("cluster").append("text");for(let t=0;t<p.nodes.length;t++)f.warn("Setting subgraph",p.nodes[t],r.db.lookUpDomId(p.nodes[t]),r.db.lookUpDomId(p.id)),d.setParent(r.db.lookUpDomId(p.nodes[t]),r.db.lookUpDomId(p.id))}AB(g,d,e,o,l,r),kB(y,d,r);const b=new sB;CB.addToRender(b),b.arrows().none=function(t,e,n,r){yD(t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z"),n[r+"Style"])},b.arrows().normal=function(t,e){t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const x=o.select(`[id="${e}"]`),_=o.select("#"+e+" g");for(b(_,d),_.selectAll("g.node").attr("title",(function(){return r.db.getTooltip(this.id)})),r.db.indexNodes("subGraph"+v),v=0;v<m.length;v++)if(p=m[v],"undefined"!==p.title){const t=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(p.id)+'"] rect'),n=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(p.id)+'"]'),i=t[0].x.baseVal.value,a=t[0].y.baseVal.value,s=t[0].width.baseVal.value,o=dn(n[0]).select(".label");o.attr("transform",`translate(${i+s/2}, ${a+14})`),o.attr("id",e+"Text");for(let e=0;e<p.classes.length;e++)n[0].classList.add(p.classes[e])}if(!a.htmlLabels){const t=l.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const e of t){const t=e.getBBox(),n=l.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("rx",0),n.setAttribute("ry",0),n.setAttribute("width",t.width),n.setAttribute("height",t.height),e.insertBefore(n,e.firstChild)}}hv(d,x,a.diagramPadding,a.useMaxWidth),Object.keys(g).forEach((function(t){const n=g[t];if(n.link){const a=o.select("#"+e+' [id="'+r.db.lookUpDomId(t)+'"]');if(a){const t=l.createElementNS("http://www.w3.org/2000/svg","a");t.setAttributeNS("http://www.w3.org/2000/svg","class",n.classes.join(" ")),t.setAttributeNS("http://www.w3.org/2000/svg","href",n.link),t.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===i?t.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):n.linkTarget&&t.setAttributeNS("http://www.w3.org/2000/svg","target",n.linkTarget);const e=a.insert((function(){return t}),":first-child"),r=a.select(".label-container");r&&e.append((function(){return r.node()}));const s=a.select(".label");s&&e.append((function(){return s.node()}))}}}))}},PB={},RB=function(t,e,n,r,i,a){const s=r.select(`[id="${n}"]`);Object.keys(t).forEach((function(n){const r=t[n];let o="default";r.classes.length>0&&(o=r.classes.join(" "));const l=Dg(r.styles);let c,u=void 0!==r.text?r.text:r.id;if(Dh(tv().flowchart.htmlLabels)){const t={label:u.replace(/fa[blrs]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`))};c=MD(s,t).node(),c.parentNode.removeChild(c)}else{const t=i.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",l.labelStyle.replace("color:","fill:"));const e=u.split(Oh.lineBreakRegex);for(const n of e){const e=i.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.setAttribute("dy","1em"),e.setAttribute("x","1"),e.textContent=n,t.appendChild(e)}c=t}let h=0,d="";switch(r.type){case"round":h=5,d="rect";break;case"square":case"group":default:d="rect";break;case"diamond":d="question";break;case"hexagon":d="hexagon";break;case"odd":case"odd_right":d="rect_left_inv_arrow";break;case"lean_right":d="lean_right";break;case"lean_left":d="lean_left";break;case"trapezoid":d="trapezoid";break;case"inv_trapezoid":d="inv_trapezoid";break;case"circle":d="circle";break;case"ellipse":d="ellipse";break;case"stadium":d="stadium";break;case"subroutine":d="subroutine";break;case"cylinder":d="cylinder";break;case"doublecircle":d="doublecircle"}e.setNode(r.id,{labelStyle:l.labelStyle,shape:d,labelText:u,rx:h,ry:h,class:o,style:l.style,id:r.id,link:r.link,linkTarget:r.linkTarget,tooltip:a.db.getTooltip(r.id)||"",domId:a.db.lookUpDomId(r.id),haveCallback:r.haveCallback,width:"group"===r.type?500:void 0,dir:r.dir,type:r.type,props:r.props,padding:tv().flowchart.padding}),f.info("setNode",{labelStyle:l.labelStyle,shape:d,labelText:u,rx:h,ry:h,class:o,style:l.style,id:r.id,domId:a.db.lookUpDomId(r.id),width:"group"===r.type?500:void 0,type:r.type,dir:r.dir,props:r.props,padding:tv().flowchart.padding})}))},IB=function(t,e,n){f.info("abc78 edges = ",t);let r,i,a=0,s={};if(void 0!==t.defaultStyle){const e=Dg(t.defaultStyle);r=e.style,i=e.labelStyle}t.forEach((function(n){a++;var o="L-"+n.start+"-"+n.end;void 0===s[o]?(s[o]=0,f.info("abc78 new entry",o,s[o])):(s[o]++,f.info("abc78 new entry",o,s[o]));let l=o+"-"+s[o];f.info("abc78 new link id to be used is",o,l,s[o]);var c="LS-"+n.start,u="LE-"+n.end;const h={style:"",labelStyle:""};switch(h.minlen=n.length||1,"arrow_open"===n.type?h.arrowhead="none":h.arrowhead="normal",h.arrowTypeStart="arrow_open",h.arrowTypeEnd="arrow_open",n.type){case"double_arrow_cross":h.arrowTypeStart="arrow_cross";case"arrow_cross":h.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":h.arrowTypeStart="arrow_point";case"arrow_point":h.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":h.arrowTypeStart="arrow_circle";case"arrow_circle":h.arrowTypeEnd="arrow_circle"}let d="",p="";switch(n.stroke){case"normal":d="fill:none;",void 0!==r&&(d=r),void 0!==i&&(p=i),h.thickness="normal",h.pattern="solid";break;case"dotted":h.thickness="normal",h.pattern="dotted",h.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":h.thickness="thick",h.pattern="solid",h.style="stroke-width: 3.5px;fill:none;"}if(void 0!==n.style){const t=Dg(n.style);d=t.style,p=t.labelStyle}h.style=h.style+=d,h.labelStyle=h.labelStyle+=p,void 0!==n.interpolate?h.curve=Cg(n.interpolate,zc):void 0!==t.defaultInterpolate?h.curve=Cg(t.defaultInterpolate,zc):h.curve=Cg(PB.curve,zc),void 0===n.text?void 0!==n.style&&(h.arrowheadStyle="fill: #333"):(h.arrowheadStyle="fill: #333",h.labelpos="c"),h.labelType="text",h.label=n.text.replace(Oh.lineBreakRegex,"\n"),void 0===n.style&&(h.style=h.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),h.labelStyle=h.labelStyle.replace("color:","fill:"),h.id=l,h.classes="flowchart-link "+c+" "+u,e.setEdge(n.start,n.end,h,a)}))},DB={setConf:function(t){const e=Object.keys(t);for(const n of e)PB[n]=t[n]},addVertices:RB,addEdges:IB,getClasses:function(t,e){f.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch{return}},draw:function(t,e,n,r){f.info("Drawing flowchart"),r.db.clear(),dD.setGen("gen-2"),r.parser.parse(t);let i=r.db.getDirection();void 0===i&&(i="TD");const{securityLevel:a,flowchart:s}=tv(),o=s.nodeSpacing||50,l=s.rankSpacing||50;let c;"sandbox"===a&&(c=dn("#i"+e));const u=dn("sandbox"===a?c.nodes()[0].contentDocument.body:"body"),h="sandbox"===a?c.nodes()[0].contentDocument:document,d=new FA({multigraph:!0,compound:!0}).setGraph({rankdir:i,nodesep:o,ranksep:l,marginx:0,marginy:0}).setDefaultEdgeLabel((function(){return{}}));let p;const m=r.db.getSubGraphs();f.info("Subgraphs - ",m);for(let _=m.length-1;_>=0;_--)p=m[_],f.info("Subgraph - ",p),r.db.addVertex(p.id,p.title,"group",void 0,p.classes,p.dir);const g=r.db.getVertices(),y=r.db.getEdges();f.info(y);let v=0;for(v=m.length-1;v>=0;v--){p=m[v],fn("cluster").append("text");for(let t=0;t<p.nodes.length;t++)f.info("Setting up subgraphs",p.nodes[t],p.id),d.setParent(p.nodes[t],p.id)}RB(g,d,e,u,h,r),IB(y,d);const b=u.select(`[id="${e}"]`),x=u.select("#"+e+" g");if(IR(x,d,["point","circle","cross"],"flowchart",e),Zg.insertTitle(b,"flowchartTitleText",s.titleTopMargin,r.db.getDiagramTitle()),hv(d,b,s.diagramPadding,s.useMaxWidth),r.db.indexNodes("subGraph"+v),!s.htmlLabels){const t=h.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const e of t){const t=e.getBBox(),n=h.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("rx",0),n.setAttribute("ry",0),n.setAttribute("width",t.width),n.setAttribute("height",t.height),e.insertBefore(n,e.firstChild)}}Object.keys(g).forEach((function(t){const n=g[t];if(n.link){const r=dn("#"+e+' [id="'+t+'"]');if(r){const t=h.createElementNS("http://www.w3.org/2000/svg","a");t.setAttributeNS("http://www.w3.org/2000/svg","class",n.classes.join(" ")),t.setAttributeNS("http://www.w3.org/2000/svg","href",n.link),t.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===a?t.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):n.linkTarget&&t.setAttributeNS("http://www.w3.org/2000/svg","target",n.linkTarget);const e=r.insert((function(){return t}),":first-child"),i=r.select(".label-container");i&&e.append((function(){return i.node()}));const s=r.select(".label");s&&e.append((function(){return s.node()}))}}}))}};var BB=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,3],n=[1,5],r=[7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],i=[1,15],a=[1,16],s=[1,17],o=[1,18],l=[1,19],c=[1,20],u=[1,21],h=[1,22],d=[1,23],f=[1,24],p=[1,25],m=[1,26],g=[1,27],y=[1,29],v=[1,31],b=[1,34],x=[5,7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],_={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,tickInterval:16,excludes:17,includes:18,todayMarker:19,title:20,acc_title:21,acc_title_value:22,acc_descr:23,acc_descr_value:24,acc_descr_multiline_value:25,section:26,clickStatement:27,taskTxt:28,taskData:29,openDirective:30,typeDirective:31,closeDirective:32,":":33,argDirective:34,click:35,callbackname:36,callbackargs:37,href:38,clickStatementDebug:39,open_directive:40,type_directive:41,arg_directive:42,close_directive:43,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"tickInterval",17:"excludes",18:"includes",19:"todayMarker",20:"title",21:"acc_title",22:"acc_title_value",23:"acc_descr",24:"acc_descr_value",25:"acc_descr_multiline_value",26:"section",28:"taskTxt",29:"taskData",33:":",35:"click",36:"callbackname",37:"callbackargs",38:"href",40:"open_directive",41:"type_directive",42:"arg_directive",43:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[27,2],[27,3],[27,3],[27,4],[27,3],[27,4],[27,2],[39,2],[39,3],[39,3],[39,4],[39,3],[39,4],[39,2],[30,1],[31,1],[34,1],[32,1]],performAction:function(t,e,n,r,i,a,s){var o=a.length-1;switch(i){case 2:return a[o-1];case 3:case 7:case 8:this.$=[];break;case 4:a[o-1].push(a[o]),this.$=a[o-1];break;case 5:case 6:this.$=a[o];break;case 9:r.setDateFormat(a[o].substr(11)),this.$=a[o].substr(11);break;case 10:r.enableInclusiveEndDates(),this.$=a[o].substr(18);break;case 11:r.TopAxis(),this.$=a[o].substr(8);break;case 12:r.setAxisFormat(a[o].substr(11)),this.$=a[o].substr(11);break;case 13:r.setTickInterval(a[o].substr(13)),this.$=a[o].substr(13);break;case 14:r.setExcludes(a[o].substr(9)),this.$=a[o].substr(9);break;case 15:r.setIncludes(a[o].substr(9)),this.$=a[o].substr(9);break;case 16:r.setTodayMarker(a[o].substr(12)),this.$=a[o].substr(12);break;case 17:r.setDiagramTitle(a[o].substr(6)),this.$=a[o].substr(6);break;case 18:this.$=a[o].trim(),r.setAccTitle(this.$);break;case 19:case 20:this.$=a[o].trim(),r.setAccDescription(this.$);break;case 21:r.addSection(a[o].substr(8)),this.$=a[o].substr(8);break;case 23:r.addTask(a[o-1],a[o]),this.$="task";break;case 27:this.$=a[o-1],r.setClickEvent(a[o-1],a[o],null);break;case 28:this.$=a[o-2],r.setClickEvent(a[o-2],a[o-1],a[o]);break;case 29:this.$=a[o-2],r.setClickEvent(a[o-2],a[o-1],null),r.setLink(a[o-2],a[o]);break;case 30:this.$=a[o-3],r.setClickEvent(a[o-3],a[o-2],a[o-1]),r.setLink(a[o-3],a[o]);break;case 31:this.$=a[o-2],r.setClickEvent(a[o-2],a[o],null),r.setLink(a[o-2],a[o-1]);break;case 32:this.$=a[o-3],r.setClickEvent(a[o-3],a[o-1],a[o]),r.setLink(a[o-3],a[o-2]);break;case 33:this.$=a[o-1],r.setLink(a[o-1],a[o]);break;case 34:case 40:this.$=a[o-1]+" "+a[o];break;case 35:case 36:case 38:this.$=a[o-2]+" "+a[o-1]+" "+a[o];break;case 37:case 39:this.$=a[o-3]+" "+a[o-2]+" "+a[o-1]+" "+a[o];break;case 41:r.parseDirective("%%{","open_directive");break;case 42:r.parseDirective(a[o],"type_directive");break;case 43:a[o]=a[o].trim().replace(/'/g,'"'),r.parseDirective(a[o],"arg_directive");break;case 44:r.parseDirective("}%%","close_directive","gantt")}},table:[{3:1,4:2,5:e,30:4,40:n},{1:[3]},{3:6,4:2,5:e,30:4,40:n},t(r,[2,3],{6:7}),{31:8,41:[1,9]},{41:[2,41]},{1:[2,1]},{4:30,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:i,13:a,14:s,15:o,16:l,17:c,18:u,19:h,20:d,21:f,23:p,25:m,26:g,27:28,28:y,30:4,35:v,40:n},{32:32,33:[1,33],43:b},t([33,43],[2,42]),t(r,[2,8],{1:[2,2]}),t(r,[2,4]),{4:30,10:35,12:i,13:a,14:s,15:o,16:l,17:c,18:u,19:h,20:d,21:f,23:p,25:m,26:g,27:28,28:y,30:4,35:v,40:n},t(r,[2,6]),t(r,[2,7]),t(r,[2,9]),t(r,[2,10]),t(r,[2,11]),t(r,[2,12]),t(r,[2,13]),t(r,[2,14]),t(r,[2,15]),t(r,[2,16]),t(r,[2,17]),{22:[1,36]},{24:[1,37]},t(r,[2,20]),t(r,[2,21]),t(r,[2,22]),{29:[1,38]},t(r,[2,24]),{36:[1,39],38:[1,40]},{11:[1,41]},{34:42,42:[1,43]},{11:[2,44]},t(r,[2,5]),t(r,[2,18]),t(r,[2,19]),t(r,[2,23]),t(r,[2,27],{37:[1,44],38:[1,45]}),t(r,[2,33],{36:[1,46]}),t(x,[2,25]),{32:47,43:b},{43:[2,43]},t(r,[2,28],{38:[1,48]}),t(r,[2,29]),t(r,[2,31],{37:[1,49]}),{11:[1,50]},t(r,[2,30]),t(r,[2,32]),t(x,[2,26])],defaultActions:{5:[2,41],6:[2,1],34:[2,44],43:[2,43]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],a=[],s=this.table,o="",l=0,c=0,u=2,h=1,d=a.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,typeof f.yylloc>"u"&&(f.yylloc={});var g=f.yylloc;a.push(g);var y=f.options&&f.options.ranges;function v(){var t;return"number"!=typeof(t=r.pop()||f.lex()||h)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,M,C,T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:((null===b||typeof b>"u")&&(b=v()),_=s[x]&&s[x][b]),typeof _>"u"||!_.length||!_[0]){var A="";for(S in C=[],s[x])this.terminals_[S]&&S>u&&C.push("'"+this.terminals_[S]+"'");A=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(b==h?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(A,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(f.yytext),a.push(f.yylloc),n.push(_[1]),b=null,c=f.yyleng,o=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(E=this.productions_[_[1]][1],T.$=i[i.length-E],T._$={first_line:a[a.length-(E||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(E||1)].first_column,last_column:a[a.length-1].last_column},y&&(T._$.range=[a[a.length-(E||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(T,[o,c,l,p.yy,_[1],i,a].concat(d)))<"u")return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),a=a.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(T.$),a.push(T._$),M=s[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},w={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),40;case 1:return this.begin("type_directive"),41;case 2:return this.popState(),this.begin("arg_directive"),33;case 3:return this.popState(),this.popState(),43;case 4:return 42;case 5:return this.begin("acc_title"),21;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),23;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:case 20:case 23:case 26:case 29:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:case 13:case 14:case 16:case 17:case 18:break;case 15:return 11;case 19:this.begin("href");break;case 21:return 38;case 22:this.begin("callbackname");break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 36;case 27:return 37;case 28:this.begin("click");break;case 30:return 35;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 16;case 37:return 18;case 38:return 17;case 39:return 19;case 40:return"date";case 41:return 20;case 42:return"accDescription";case 43:return 26;case 44:return 28;case 45:return 29;case 46:return 33;case 47:return 7;case 48:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};function S(){this.yy={}}return _.lexer=w,S.prototype=_,_.Parser=S,new S}();BB.parser=BB;const OB=BB,NB=t=>null!==t.match(/^\s*gantt/);let FB,zB="",UB="",GB="",HB=[],jB=[],VB={},WB=[],$B=[],YB="";const qB=["active","done","crit","milestone"];let XB=[],JB=!1,ZB=!1,KB=0;const QB=function(){WB=[],$B=[],YB="",XB=[],oO=0,hO=void 0,dO=void 0,fO=[],zB="",UB="",FB=void 0,GB="",HB=[],jB=[],JB=!1,ZB=!1,KB=0,VB={},Hv()},tO=function(){let t=gO();const e=10;let n=0;for(;!t&&n<e;)t=gO(),n++;return $B=fO,$B},eO=function(t,e,n,r){return!r.includes(t.format(e.trim()))&&(!!(t.isoWeekday()>=6&&n.includes("weekends")||n.includes(t.format("dddd").toLowerCase()))||n.includes(t.format(e.trim())))},nO=function(t,e,n,r){if(!n.length||t.manualEndTime)return;let i=h(t.startTime,e,!0);i.add(1,"d");let a=h(t.endTime,e,!0),s=rO(i,a,e,n,r);t.endTime=a.toDate(),t.renderEndTime=s},rO=function(t,e,n,r,i){let a=!1,s=null;for(;t<=e;)a||(s=e.toDate()),a=eO(t,n,r,i),a&&e.add(1,"d"),t.add(1,"d");return s},iO=function(t,e,n){n=n.trim();const r=/^after\s+([\d\w- ]+)/.exec(n.trim());if(null!==r){let t=null;if(r[1].split(" ").forEach((function(e){let n=mO(e);void 0!==n&&(t?n.endTime>t.endTime&&(t=n):t=n)})),t)return t.endTime;{const t=new Date;return t.setHours(0,0,0,0),t}}let i=h(n,e.trim(),!0);if(i.isValid())return i.toDate();{f.debug("Invalid date:"+n),f.debug("With date format:"+e.trim());const t=new Date(n);if(void 0===t||isNaN(t.getTime()))throw new Error("Invalid date:"+n);return t}},aO=function(t){const e=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(t.trim());return null!==e?h.duration(Number.parseFloat(e[1]),e[2]):h.duration.invalid()},sO=function(t,e,n,r=!1){n=n.trim();let i=h(n,e.trim(),!0);if(i.isValid())return r&&i.add(1,"d"),i.toDate();const a=h(t),s=aO(n);return s.isValid()&&a.add(s),a.toDate()};let oO=0;const lO=function(t){return void 0===t?(oO+=1,"task"+oO):t},cO=function(t,e){let n;n=":"===e.substr(0,1)?e.substr(1,e.length):e;const r=n.split(","),i={};wO(r,i,qB);for(let s=0;s<r.length;s++)r[s]=r[s].trim();let a="";switch(r.length){case 1:i.id=lO(),i.startTime=t.endTime,a=r[0];break;case 2:i.id=lO(),i.startTime=iO(void 0,zB,r[0]),a=r[1];break;case 3:i.id=lO(r[0]),i.startTime=iO(void 0,zB,r[1]),a=r[2]}return a&&(i.endTime=sO(i.startTime,zB,a,JB),i.manualEndTime=h(a,"YYYY-MM-DD",!0).isValid(),nO(i,zB,jB,HB)),i},uO=function(t,e){let n;n=":"===e.substr(0,1)?e.substr(1,e.length):e;const r=n.split(","),i={};wO(r,i,qB);for(let a=0;a<r.length;a++)r[a]=r[a].trim();switch(r.length){case 1:i.id=lO(),i.startTime={type:"prevTaskEnd",id:t},i.endTime={data:r[0]};break;case 2:i.id=lO(),i.startTime={type:"getStartDate",startData:r[0]},i.endTime={data:r[1]};break;case 3:i.id=lO(r[0]),i.startTime={type:"getStartDate",startData:r[1]},i.endTime={data:r[2]}}return i};let hO,dO,fO=[];const pO={},mO=function(t){const e=pO[t];return fO[e]},gO=function(){const t=function(t){const e=fO[t];let n="";switch(fO[t].raw.startTime.type){case"prevTaskEnd":{const t=mO(e.prevTaskId);e.startTime=t.endTime;break}case"getStartDate":n=iO(void 0,zB,fO[t].raw.startTime.startData),n&&(fO[t].startTime=n)}return fO[t].startTime&&(fO[t].endTime=sO(fO[t].startTime,zB,fO[t].raw.endTime.data,JB),fO[t].endTime&&(fO[t].processed=!0,fO[t].manualEndTime=h(fO[t].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),nO(fO[t],zB,jB,HB))),fO[t].processed};let e=!0;for(const[n,r]of fO.entries())t(n),e=e&&r.processed;return e},yO=function(t,e){let n=e;"loose"!==tv().securityLevel&&(n=y(e)),t.split(",").forEach((function(t){void 0!==mO(t)&&(xO(t,(()=>{window.open(n,"_self")})),VB[t]=n)})),vO(t,"clickable")},vO=function(t,e){t.split(",").forEach((function(t){let n=mO(t);void 0!==n&&n.classes.push(e)}))},bO=function(t,e,n){if("loose"!==tv().securityLevel||void 0===e)return;let r=[];if("string"==typeof n){r=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let t=0;t<r.length;t++){let e=r[t].trim();'"'===e.charAt(0)&&'"'===e.charAt(e.length-1)&&(e=e.substr(1,e.length-2)),r[t]=e}}0===r.length&&r.push(t),void 0!==mO(t)&&xO(t,(()=>{Zg.runFunc(e,...r)}))},xO=function(t,e){XB.push((function(){const n=document.querySelector(`[id="${t}"]`);null!==n&&n.addEventListener("click",(function(){e()}))}),(function(){const n=document.querySelector(`[id="${t}-text"]`);null!==n&&n.addEventListener("click",(function(){e()}))}))},_O={parseDirective:function(t,e,n){iH.parseDirective(this,t,e,n)},getConfig:()=>tv().gantt,clear:QB,setDateFormat:function(t){zB=t},getDateFormat:function(){return zB},enableInclusiveEndDates:function(){JB=!0},endDatesAreInclusive:function(){return JB},enableTopAxis:function(){ZB=!0},topAxisEnabled:function(){return ZB},setAxisFormat:function(t){UB=t},getAxisFormat:function(){return UB},setTickInterval:function(t){FB=t},getTickInterval:function(){return FB},setTodayMarker:function(t){GB=t},getTodayMarker:function(){return GB},setAccTitle:jv,getAccTitle:Vv,setDiagramTitle:Yv,getDiagramTitle:qv,setAccDescription:Wv,getAccDescription:$v,addSection:function(t){YB=t,WB.push(t)},getSections:function(){return WB},getTasks:tO,addTask:function(t,e){const n={section:YB,type:YB,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},r=uO(dO,e);n.raw.startTime=r.startTime,n.raw.endTime=r.endTime,n.id=r.id,n.prevTaskId=dO,n.active=r.active,n.done=r.done,n.crit=r.crit,n.milestone=r.milestone,n.order=KB,KB++;const i=fO.push(n);dO=n.id,pO[n.id]=i-1},findTaskById:mO,addTaskOrg:function(t,e){const n={section:YB,type:YB,description:t,task:t,classes:[]},r=cO(hO,e);n.startTime=r.startTime,n.endTime=r.endTime,n.id=r.id,n.active=r.active,n.done=r.done,n.crit=r.crit,n.milestone=r.milestone,hO=n,$B.push(n)},setIncludes:function(t){HB=t.toLowerCase().split(/[\s,]+/)},getIncludes:function(){return HB},setExcludes:function(t){jB=t.toLowerCase().split(/[\s,]+/)},getExcludes:function(){return jB},setClickEvent:function(t,e,n){t.split(",").forEach((function(t){bO(t,e,n)})),vO(t,"clickable")},setLink:yO,getLinks:function(){return VB},bindFunctions:function(t){XB.forEach((function(e){e(t)}))},parseDuration:aO,isInvalidDate:eO};function wO(t,e,n){let r=!0;for(;r;)r=!1,n.forEach((function(n){const i=new RegExp("^\\s*"+n+"\\s*$");t[0].match(i)&&(e[n]=!0,t.shift(1),r=!0)}))}let SO;const EO={setConf:function(){f.debug("Something is calling, setConf, remove the call")},draw:function(t,e,n,r){const i=tv().gantt,a=tv().securityLevel;let s;"sandbox"===a&&(s=dn("#i"+e));const o=dn("sandbox"===a?s.nodes()[0].contentDocument.body:"body"),l="sandbox"===a?s.nodes()[0].contentDocument:document,c=l.getElementById(e);SO=c.parentElement.offsetWidth,void 0===SO&&(SO=1200),void 0!==i.useWidth&&(SO=i.useWidth);const u=r.db.getTasks(),d=u.length*(i.barHeight+i.barGap)+2*i.topPadding;c.setAttribute("viewBox","0 0 "+SO+" "+d);const f=o.select(`[id="${e}"]`),p=pc().domain([W(u,(function(t){return t.startTime})),V(u,(function(t){return t.endTime}))]).rangeRound([0,SO-i.leftPadding-i.rightPadding]);let m=[];for(const h of u)m.push(h.type);const g=m;function y(t,e){const n=t.startTime,r=e.startTime;let i=0;return n>r?i=1:n<r&&(i=-1),i}function v(t,e,n){const a=i.barHeight,s=a+i.barGap,o=i.topPadding,l=i.leftPadding,c=zs().domain([0,m.length]).range(["#00B9FA","#F95002"]).interpolate(Jr);x(s,o,l,e,n,t,r.db.getExcludes(),r.db.getIncludes()),_(l,o,e,n),b(t,s,o,l,a,c,e),w(s,o),S(l,o,e,n)}function b(t,n,a,s,o,l,c){f.append("g").selectAll("rect").data(t).enter().append("rect").attr("x",0).attr("y",(function(t,e){return t.order*n+a-2})).attr("width",(function(){return c-i.rightPadding/2})).attr("height",n).attr("class",(function(t){for(const[e,n]of m.entries())if(t.type===n)return"section section"+e%i.numberSectionStyles;return"section section0"}));const u=f.append("g").selectAll("rect").data(t).enter(),h=r.db.getLinks();if(u.append("rect").attr("id",(function(t){return t.id})).attr("rx",3).attr("ry",3).attr("x",(function(t){return t.milestone?p(t.startTime)+s+.5*(p(t.endTime)-p(t.startTime))-.5*o:p(t.startTime)+s})).attr("y",(function(t,e){return t.order*n+a})).attr("width",(function(t){return t.milestone?o:p(t.renderEndTime||t.endTime)-p(t.startTime)})).attr("height",o).attr("transform-origin",(function(t,e){return e=t.order,(p(t.startTime)+s+.5*(p(t.endTime)-p(t.startTime))).toString()+"px "+(e*n+a+.5*o).toString()+"px"})).attr("class",(function(t){const e="task";let n="";t.classes.length>0&&(n=t.classes.join(" "));let r=0;for(const[s,o]of m.entries())t.type===o&&(r=s%i.numberSectionStyles);let a="";return t.active?t.crit?a+=" activeCrit":a=" active":t.done?a=t.crit?" doneCrit":" done":t.crit&&(a+=" crit"),0===a.length&&(a=" task"),t.milestone&&(a=" milestone "+a),a+=r,a+=" "+n,e+a})),u.append("text").attr("id",(function(t){return t.id+"-text"})).text((function(t){return t.task})).attr("font-size",i.fontSize).attr("x",(function(t){let e=p(t.startTime),n=p(t.renderEndTime||t.endTime);t.milestone&&(e+=.5*(p(t.endTime)-p(t.startTime))-.5*o),t.milestone&&(n=e+o);const r=this.getBBox().width;return r>n-e?n+r+1.5*i.leftPadding>c?e+s-5:n+s+5:(n-e)/2+e+s})).attr("y",(function(t,e){return t.order*n+i.barHeight/2+(i.fontSize/2-2)+a})).attr("text-height",o).attr("class",(function(t){const e=p(t.startTime);let n=p(t.endTime);t.milestone&&(n=e+o);const r=this.getBBox().width;let a="";t.classes.length>0&&(a=t.classes.join(" "));let s=0;for(const[o,c]of m.entries())t.type===c&&(s=o%i.numberSectionStyles);let l="";return t.active&&(l=t.crit?"activeCritText"+s:"activeText"+s),t.done?l=t.crit?l+" doneCritText"+s:l+" doneText"+s:t.crit&&(l=l+" critText"+s),t.milestone&&(l+=" milestoneText"),r>n-e?n+r+1.5*i.leftPadding>c?a+" taskTextOutsideLeft taskTextOutside"+s+" "+l:a+" taskTextOutsideRight taskTextOutside"+s+" "+l+" width-"+r:a+" taskText taskText"+s+" "+l+" width-"+r})),"sandbox"===tv().securityLevel){let t;t=dn("#i"+e);const n=t.nodes()[0].contentDocument;u.filter((function(t){return void 0!==h[t.id]})).each((function(t){var e=n.querySelector("#"+t.id),r=n.querySelector("#"+t.id+"-text");const i=e.parentNode;var a=n.createElement("a");a.setAttribute("xlink:href",h[t.id]),a.setAttribute("target","_top"),i.appendChild(a),a.appendChild(e),a.appendChild(r)}))}}function x(t,e,n,a,s,o,l,c){const u=o.reduce(((t,{startTime:e})=>t?Math.min(t,e):e),0),d=o.reduce(((t,{endTime:e})=>t?Math.max(t,e):e),0),m=r.db.getDateFormat();if(!u||!d)return;const g=[];let y=null,v=h(u);for(;v.valueOf()<=d;)r.db.isInvalidDate(v,m,l,c)?y?y.end=v.clone():y={start:v.clone(),end:v.clone()}:y&&(g.push(y),y=null),v.add(1,"d");f.append("g").selectAll("rect").data(g).enter().append("rect").attr("id",(function(t){return"exclude-"+t.start.format("YYYY-MM-DD")})).attr("x",(function(t){return p(t.start)+n})).attr("y",i.gridLineStartPadding).attr("width",(function(t){const e=t.end.clone().add(1,"day");return p(e)-p(t.start)})).attr("height",s-e-i.gridLineStartPadding).attr("transform-origin",(function(e,r){return(p(e.start)+n+.5*(p(e.end)-p(e.start))).toString()+"px "+(r*t+.5*s).toString()+"px"})).attr("class","exclude-range")}function _(t,e,n,a){let s=at(p).tickSize(-a+e+i.gridLineStartPadding).tickFormat($o(r.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));const o=/^([1-9]\d*)(minute|hour|day|week|month)$/.exec(r.db.getTickInterval()||i.tickInterval);if(null!==o){const t=o[1];switch(o[2]){case"minute":s.ticks(no.every(t));break;case"hour":s.ticks(io.every(t));break;case"day":s.ticks(so.every(t));break;case"week":s.ticks(lo.every(t));break;case"month":s.ticks(yo.every(t))}}if(f.append("g").attr("class","grid").attr("transform","translate("+t+", "+(a-50)+")").call(s).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),r.db.topAxisEnabled()||i.topAxis){let n=it(p).tickSize(-a+e+i.gridLineStartPadding).tickFormat($o(r.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));if(null!==o){const t=o[1];switch(o[2]){case"minute":n.ticks(no.every(t));break;case"hour":n.ticks(io.every(t));break;case"day":n.ticks(so.every(t));break;case"week":n.ticks(lo.every(t));break;case"month":n.ticks(yo.every(t))}}f.append("g").attr("class","grid").attr("transform","translate("+t+", "+e+")").call(n).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function w(t,e){const n=[];let r=0;for(const[i,a]of m.entries())n[i]=[a,C(a,g)];f.append("g").selectAll("text").data(n).enter().append((function(t){const e=t[0].split(Oh.lineBreakRegex),n=-(e.length-1)/2,r=l.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("dy",n+"em");for(const[i,a]of e.entries()){const t=l.createElementNS("http://www.w3.org/2000/svg","tspan");t.setAttribute("alignment-baseline","central"),t.setAttribute("x","10"),i>0&&t.setAttribute("dy","1em"),t.textContent=a,r.appendChild(t)}return r})).attr("x",10).attr("y",(function(i,a){if(!(a>0))return i[1]*t/2+e;for(let s=0;s<a;s++)return r+=n[a-1][1],i[1]*t/2+r*t+e})).attr("font-size",i.sectionFontSize).attr("font-size",i.sectionFontSize).attr("class",(function(t){for(const[e,n]of m.entries())if(t[0]===n)return"sectionTitle sectionTitle"+e%i.numberSectionStyles;return"sectionTitle"}))}function S(t,e,n,a){const s=r.db.getTodayMarker();if("off"===s)return;const o=f.append("g").attr("class","today"),l=new Date,c=o.append("line");c.attr("x1",p(l)+t).attr("x2",p(l)+t).attr("y1",i.titleTopMargin).attr("y2",a-i.titleTopMargin).attr("class","today"),""!==s&&c.attr("style",s.replace(/,/g,";"))}function E(t){const e={},n=[];for(let r=0,i=t.length;r<i;++r)Object.prototype.hasOwnProperty.call(e,t[r])||(e[t[r]]=!0,n.push(t[r]));return n}function M(t){let e=t.length;const n={};for(;e;)n[t[--e]]=(n[t[e]]||0)+1;return n}function C(t,e){return M(e)[t]||0}m=E(m),u.sort(y),v(u,SO,d),uv(f,d,SO,i.useMaxWidth),f.append("text").text(r.db.getDiagramTitle()).attr("x",SO/2).attr("y",i.titleTopMargin).attr("class","titleText")}};var MO=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[6,9,10],n={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(t,e,n,r,i,a,s){switch(a.length,i){case 1:return r;case 4:break;case 6:r.setInfo(!0)}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},t(e,[2,3]),t(e,[2,4]),t(e,[2,5]),t(e,[2,6])],defaultActions:{4:[2,1]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],a=[],s=this.table,o="",l=0,c=0,u=2,h=1,d=a.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,typeof f.yylloc>"u"&&(f.yylloc={});var g=f.yylloc;a.push(g);var y=f.options&&f.options.ranges;function v(){var t;return"number"!=typeof(t=r.pop()||f.lex()||h)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,M,C,T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:((null===b||typeof b>"u")&&(b=v()),_=s[x]&&s[x][b]),typeof _>"u"||!_.length||!_[0]){var A="";for(S in C=[],s[x])this.terminals_[S]&&S>u&&C.push("'"+this.terminals_[S]+"'");A=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(b==h?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(A,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(f.yytext),a.push(f.yylloc),n.push(_[1]),b=null,c=f.yyleng,o=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(E=this.productions_[_[1]][1],T.$=i[i.length-E],T._$={first_line:a[a.length-(E||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(E||1)].first_column,last_column:a[a.length-1].last_column},y&&(T._$.range=[a[a.length-(E||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(T,[o,c,l,p.yy,_[1],i,a].concat(d)))<"u")return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),a=a.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(T.$),a.push(T._$),M=s[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},r={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};function i(){this.yy={}}return n.lexer=r,i.prototype=n,n.Parser=i,new i}();MO.parser=MO;const CO=MO;var TO="",AO=!1;const kO={setMessage:t=>{f.debug("Setting message to: "+t),TO=t},getMessage:()=>TO,setInfo:t=>{AO=t},getInfo:()=>AO,clear:Hv},LO={draw:(t,e,n)=>{try{f.debug("Rendering info diagram\n"+t);const r=tv().securityLevel;let i;"sandbox"===r&&(i=dn("#i"+e));const a=dn("sandbox"===r?i.nodes()[0].contentDocument.body:"body").select("#"+e);a.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+n),a.attr("height",100),a.attr("width",400)}catch(l){f.error("Error while rendering info diagram"),f.error(l.message)}}},PO=t=>null!==t.match(/^\s*info/);var RO=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,4],n=[1,5],r=[1,6],i=[1,7],a=[1,9],s=[1,11,13,15,17,19,20,26,27,28,29],o=[2,5],l=[1,6,11,13,15,17,19,20,26,27,28,29],c=[26,27,28],u=[2,8],h=[1,18],d=[1,19],f=[1,20],p=[1,21],m=[1,22],g=[1,23],y=[1,28],v=[6,26,27,28,29],b={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(t,e,n,r,i,a,s){var o=a.length-1;switch(i){case 4:r.setShowData(!0);break;case 7:this.$=a[o-1];break;case 9:r.addSection(a[o-1],r.cleanupValue(a[o]));break;case 10:this.$=a[o].trim(),r.setDiagramTitle(this.$);break;case 11:this.$=a[o].trim(),r.setAccTitle(this.$);break;case 12:case 13:this.$=a[o].trim(),r.setAccDescription(this.$);break;case 14:r.addSection(a[o].substr(8)),this.$=a[o].substr(8);break;case 21:r.parseDirective("%%{","open_directive");break;case 22:r.parseDirective(a[o],"type_directive");break;case 23:a[o]=a[o].trim().replace(/'/g,'"'),r.parseDirective(a[o],"arg_directive");break;case 24:r.parseDirective("}%%","close_directive","pie")}},table:[{3:1,4:2,5:3,6:e,21:8,26:n,27:r,28:i,29:a},{1:[3]},{3:10,4:2,5:3,6:e,21:8,26:n,27:r,28:i,29:a},{3:11,4:2,5:3,6:e,21:8,26:n,27:r,28:i,29:a},t(s,o,{7:12,8:[1,13]}),t(l,[2,18]),t(l,[2,19]),t(l,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},t(c,u,{21:8,9:16,10:17,5:24,1:[2,3],11:h,13:d,15:f,17:p,19:m,20:g,29:a}),t(s,o,{7:25}),{23:26,24:[1,27],32:y},t([24,32],[2,22]),t(s,[2,6]),{4:29,26:n,27:r,28:i},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},t(c,[2,13]),t(c,[2,14]),t(c,[2,15]),t(c,u,{21:8,9:16,10:17,5:24,1:[2,4],11:h,13:d,15:f,17:p,19:m,20:g,29:a}),t(v,[2,16]),{25:34,31:[1,35]},t(v,[2,24]),t(s,[2,7]),t(c,[2,9]),t(c,[2,10]),t(c,[2,11]),t(c,[2,12]),{23:36,32:y},{32:[2,23]},t(v,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],a=[],s=this.table,o="",l=0,c=0,u=2,h=1,d=a.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,typeof f.yylloc>"u"&&(f.yylloc={});var g=f.yylloc;a.push(g);var y=f.options&&f.options.ranges;function v(){var t;return"number"!=typeof(t=r.pop()||f.lex()||h)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,M,C,T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:((null===b||typeof b>"u")&&(b=v()),_=s[x]&&s[x][b]),typeof _>"u"||!_.length||!_[0]){var A="";for(S in C=[],s[x])this.terminals_[S]&&S>u&&C.push("'"+this.terminals_[S]+"'");A=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(b==h?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(A,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(f.yytext),a.push(f.yylloc),n.push(_[1]),b=null,c=f.yyleng,o=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(E=this.productions_[_[1]][1],T.$=i[i.length-E],T._$={first_line:a[a.length-(E||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(E||1)].first_column,last_column:a[a.length-1].last_column},y&&(T._$.range=[a[a.length-(E||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(T,[o,c,l,p.yy,_[1],i,a].concat(d)))<"u")return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),a=a.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(T.$),a.push(T._$),M=s[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},x={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:case 6:case 8:case 9:break;case 7:return 26;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:case 20:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};function _(){this.yy={}}return b.lexer=x,_.prototype=b,b.Parser=_,new _}();RO.parser=RO;const IO=RO,DO=t=>null!==t.match(/^\s*pie/)||null!==t.match(/^\s*bar/);let BO={},OO=!1;const NO={parseDirective:function(t,e,n){iH.parseDirective(this,t,e,n)},getConfig:()=>tv().pie,addSection:function(t,e){t=Oh.sanitizeText(t,tv()),void 0===BO[t]&&(BO[t]=e,f.debug("Added new section :",t))},getSections:()=>BO,cleanupValue:function(t){return":"===t.substring(0,1)&&(t=t.substring(1).trim()),Number(t.trim())},clear:function(){BO={},OO=!1,Hv()},setAccTitle:jv,getAccTitle:Vv,setDiagramTitle:Yv,getDiagramTitle:qv,setShowData:function(t){OO=t},getShowData:function(){return OO},getAccDescription:$v,setAccDescription:Wv};let FO,zO=tv();const UO=450,GO={draw:(t,e,n,r)=>{try{zO=tv(),f.debug("Rendering info diagram\n"+t);const n=tv().securityLevel;let v;"sandbox"===n&&(v=dn("#i"+e));const b=dn("sandbox"===n?v.nodes()[0].contentDocument.body:"body"),x="sandbox"===n?v.nodes()[0].contentDocument:document;r.db.clear(),r.parser.parse(t),f.debug("Parsed info diagram");const _=x.getElementById(e);FO=_.parentElement.offsetWidth,void 0===FO&&(FO=1200),void 0!==zO.useWidth&&(FO=zO.useWidth),void 0!==zO.pie.useWidth&&(FO=zO.pie.useWidth);const w=b.select("#"+e);uv(w,UO,FO,zO.pie.useMaxWidth),_.setAttribute("viewBox","0 0 "+FO+" "+UO);var i=40,a=18,s=4,o=Math.min(FO,UO)/2-i,l=w.append("g").attr("transform","translate("+FO/2+","+UO/2+")"),c=r.db.getSections(),u=0;Object.keys(c).forEach((function(t){u+=c[t]}));const S=zO.themeVariables;var h=[S.pie1,S.pie2,S.pie3,S.pie4,S.pie5,S.pie6,S.pie7,S.pie8,S.pie9,S.pie10,S.pie11,S.pie12],d=Ms().range(h),p=Object.entries(c).map((function(t,e){return{order:e,name:t[0],value:t[1]}})),m=Wc().value((function(t){return t.value})).sort((function(t,e){return t.order-e.order}))(p),g=Oc().innerRadius(0).outerRadius(o);l.selectAll("mySlices").data(m).enter().append("path").attr("d",g).attr("fill",(function(t){return d(t.data.name)})).attr("class","pieCircle"),l.selectAll("mySlices").data(m).enter().append("text").text((function(t){return(t.data.value/u*100).toFixed(0)+"%"})).attr("transform",(function(t){return"translate("+g.centroid(t)+")"})).style("text-anchor","middle").attr("class","slice"),l.append("text").text(r.db.getDiagramTitle()).attr("x",0).attr("y",-(UO-50)/2).attr("class","pieTitleText");var y=l.selectAll(".legend").data(d.domain()).enter().append("g").attr("class","legend").attr("transform",(function(t,e){const n=a+s,r=n*d.domain().length/2;return"translate("+12*a+","+(e*n-r)+")"}));y.append("rect").attr("width",a).attr("height",a).style("fill",d).style("stroke",d),y.data(m).append("text").attr("x",a+s).attr("y",a-s).text((function(t){return r.db.getShowData()||zO.showData||zO.pie.showData?t.data.name+" ["+t.data.value+"]":t.data.name}))}catch(v){f.error("Error while rendering info diagram"),f.error(v)}}};var HO=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,3],n=[1,5],r=[1,6],i=[1,7],a=[1,8],s=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],o=[1,22],l=[2,13],c=[1,26],u=[1,27],h=[1,28],d=[1,29],f=[1,30],p=[1,31],m=[1,24],g=[1,32],y=[1,33],v=[1,36],b=[71,72],x=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],_=[1,56],w=[1,57],S=[1,58],E=[1,59],M=[1,60],C=[1,61],T=[1,62],A=[62,63],k=[1,74],L=[1,70],P=[1,71],R=[1,72],I=[1,73],D=[1,75],B=[1,79],O=[1,80],N=[1,77],F=[1,78],z=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],U={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(t,e,n,r,i,a,s){var o=a.length-1;switch(i){case 6:this.$=a[o].trim(),r.setAccTitle(this.$);break;case 7:case 8:this.$=a[o].trim(),r.setAccDescription(this.$);break;case 9:r.parseDirective("%%{","open_directive");break;case 10:r.parseDirective(a[o],"type_directive");break;case 11:a[o]=a[o].trim().replace(/'/g,'"'),r.parseDirective(a[o],"arg_directive");break;case 12:r.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:r.addRequirement(a[o-3],a[o-4]);break;case 20:r.setNewReqId(a[o-2]);break;case 21:r.setNewReqText(a[o-2]);break;case 22:r.setNewReqRisk(a[o-2]);break;case 23:r.setNewReqVerifyMethod(a[o-2]);break;case 26:this.$=r.RequirementType.REQUIREMENT;break;case 27:this.$=r.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=r.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=r.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=r.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=r.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=r.RiskLevel.LOW_RISK;break;case 33:this.$=r.RiskLevel.MED_RISK;break;case 34:this.$=r.RiskLevel.HIGH_RISK;break;case 35:this.$=r.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=r.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=r.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=r.VerifyType.VERIFY_TEST;break;case 39:r.addElement(a[o-3]);break;case 40:r.setNewElementType(a[o-2]);break;case 41:r.setNewElementDocRef(a[o-2]);break;case 44:r.addRelationship(a[o-2],a[o],a[o-4]);break;case 45:r.addRelationship(a[o-2],a[o-4],a[o]);break;case 46:this.$=r.Relationships.CONTAINS;break;case 47:this.$=r.Relationships.COPIES;break;case 48:this.$=r.Relationships.DERIVES;break;case 49:this.$=r.Relationships.SATISFIES;break;case 50:this.$=r.Relationships.VERIFIES;break;case 51:this.$=r.Relationships.REFINES;break;case 52:this.$=r.Relationships.TRACES}},table:[{3:1,4:2,6:e,9:4,14:n,16:r,18:i,19:a},{1:[3]},{3:10,4:2,5:[1,9],6:e,9:4,14:n,16:r,18:i,19:a},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},t(s,[2,8]),{20:[2,9]},{3:16,4:2,6:e,9:4,14:n,16:r,18:i,19:a},{1:[2,2]},{4:21,5:o,7:17,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:c,41:u,42:h,43:d,44:f,45:p,53:m,71:g,72:y},{11:34,12:[1,35],22:v},t([12,22],[2,10]),t(s,[2,6]),t(s,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:o,7:38,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:c,41:u,42:h,43:d,44:f,45:p,53:m,71:g,72:y},{4:21,5:o,7:39,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:c,41:u,42:h,43:d,44:f,45:p,53:m,71:g,72:y},{4:21,5:o,7:40,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:c,41:u,42:h,43:d,44:f,45:p,53:m,71:g,72:y},{4:21,5:o,7:41,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:c,41:u,42:h,43:d,44:f,45:p,53:m,71:g,72:y},{4:21,5:o,7:42,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:c,41:u,42:h,43:d,44:f,45:p,53:m,71:g,72:y},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},t(b,[2,26]),t(b,[2,27]),t(b,[2,28]),t(b,[2,29]),t(b,[2,30]),t(b,[2,31]),t(x,[2,55]),t(x,[2,56]),t(s,[2,4]),{13:51,21:[1,52]},t(s,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:_,65:w,66:S,67:E,68:M,69:C,70:T},{61:63,64:_,65:w,66:S,67:E,68:M,69:C,70:T},{11:64,22:v},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},t(A,[2,46]),t(A,[2,47]),t(A,[2,48]),t(A,[2,49]),t(A,[2,50]),t(A,[2,51]),t(A,[2,52]),{63:[1,68]},t(s,[2,5]),{5:k,29:69,30:L,33:P,35:R,37:I,39:D},{5:B,39:O,55:76,56:N,58:F},{32:81,71:g,72:y},{32:82,71:g,72:y},t(z,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:k,29:87,30:L,33:P,35:R,37:I,39:D},t(z,[2,25]),t(z,[2,39]),{31:[1,88]},{31:[1,89]},{5:B,39:O,55:90,56:N,58:F},t(z,[2,43]),t(z,[2,44]),t(z,[2,45]),{32:91,71:g,72:y},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},t(z,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},t(z,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:k,29:116,30:L,33:P,35:R,37:I,39:D},{5:k,29:117,30:L,33:P,35:R,37:I,39:D},{5:k,29:118,30:L,33:P,35:R,37:I,39:D},{5:k,29:119,30:L,33:P,35:R,37:I,39:D},{5:B,39:O,55:120,56:N,58:F},{5:B,39:O,55:121,56:N,58:F},t(z,[2,20]),t(z,[2,21]),t(z,[2,22]),t(z,[2,23]),t(z,[2,40]),t(z,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],a=[],s=this.table,o="",l=0,c=0,u=2,h=1,d=a.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,typeof f.yylloc>"u"&&(f.yylloc={});var g=f.yylloc;a.push(g);var y=f.options&&f.options.ranges;function v(){var t;return"number"!=typeof(t=r.pop()||f.lex()||h)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,M,C,T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:((null===b||typeof b>"u")&&(b=v()),_=s[x]&&s[x][b]),typeof _>"u"||!_.length||!_[0]){var A="";for(S in C=[],s[x])this.terminals_[S]&&S>u&&C.push("'"+this.terminals_[S]+"'");A=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(b==h?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(A,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(f.yytext),a.push(f.yylloc),n.push(_[1]),b=null,c=f.yyleng,o=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(E=this.productions_[_[1]][1],T.$=i[i.length-E],T._$={first_line:a[a.length-(E||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(E||1)].first_column,last_column:a[a.length-1].last_column},y&&(T._$.range=[a[a.length-(E||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(T,[o,c,l,p.yy,_[1],i,a].concat(d)))<"u")return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),a=a.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(T.$),a.push(T._$),M=s[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},G={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 53:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:case 15:case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 54:return"qString";case 55:return e.yytext=e.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};function H(){this.yy={}}return U.lexer=G,H.prototype=U,U.Parser=H,new H}();HO.parser=HO;const jO=HO,VO=t=>null!==t.match(/^\s*requirement(Diagram)?/);let WO=[],$O={},YO={},qO={},XO={};const JO={RequirementType:{REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},RiskLevel:{LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},VerifyType:{VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},Relationships:{CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},parseDirective:function(t,e,n){iH.parseDirective(this,t,e,n)},getConfig:()=>tv().req,addRequirement:(t,e)=>(void 0===YO[t]&&(YO[t]={name:t,type:e,id:$O.id,text:$O.text,risk:$O.risk,verifyMethod:$O.verifyMethod}),$O={},YO[t]),getRequirements:()=>YO,setNewReqId:t=>{void 0!==$O&&($O.id=t)},setNewReqText:t=>{void 0!==$O&&($O.text=t)},setNewReqRisk:t=>{void 0!==$O&&($O.risk=t)},setNewReqVerifyMethod:t=>{void 0!==$O&&($O.verifyMethod=t)},setAccTitle:jv,getAccTitle:Vv,setAccDescription:Wv,getAccDescription:$v,addElement:t=>(void 0===XO[t]&&(XO[t]={name:t,type:qO.type,docRef:qO.docRef},f.info("Added new requirement: ",t)),qO={},XO[t]),getElements:()=>XO,setNewElementType:t=>{void 0!==qO&&(qO.type=t)},setNewElementDocRef:t=>{void 0!==qO&&(qO.docRef=t)},addRelationship:(t,e,n)=>{WO.push({type:t,src:e,dst:n})},getRelationships:()=>WO,clear:()=>{WO=[],$O={},YO={},qO={},XO={},Hv()}},ZO={CONTAINS:"contains",ARROW:"arrow"},KO={ReqMarkers:ZO,insertLineEndings:(t,e)=>{let n=t.append("defs").append("marker").attr("id",ZO.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");n.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),n.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),n.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",ZO.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0\n      L${e.line_height},${e.line_height/2}\n      M${e.line_height},${e.line_height/2}\n      L0,${e.line_height}`).attr("stroke-width",1)}};let QO={},tN=0;const eN=(t,e)=>t.insert("rect","#"+e).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",QO.rect_min_width+"px").attr("height",QO.rect_min_height+"px"),nN=(t,e,n)=>{let r=QO.rect_min_width/2,i=t.append("text").attr("class","req reqLabel reqTitle").attr("id",e).attr("x",r).attr("y",QO.rect_padding).attr("dominant-baseline","hanging"),a=0;n.forEach((t=>{0==a?i.append("tspan").attr("text-anchor","middle").attr("x",QO.rect_min_width/2).attr("dy",0).text(t):i.append("tspan").attr("text-anchor","middle").attr("x",QO.rect_min_width/2).attr("dy",.75*QO.line_height).text(t),a++}));let s=1.5*QO.rect_padding+a*QO.line_height*.75;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",QO.rect_min_width).attr("y1",s).attr("y2",s),{titleNode:i,y:s}},rN=(t,e,n,r)=>{let i=t.append("text").attr("class","req reqLabel").attr("id",e).attr("x",QO.rect_padding).attr("y",r).attr("dominant-baseline","hanging"),a=0;const s=30;let o=[];return n.forEach((t=>{let e=t.length;for(;e>s&&a<3;){let n=t.substring(0,s);e=(t=t.substring(s,t.length)).length,o[o.length]=n,a++}if(3==a){let t=o[o.length-1];o[o.length-1]=t.substring(0,t.length-4)+"..."}else o[o.length]=t;a=0})),o.forEach((t=>{i.append("tspan").attr("x",QO.rect_padding).attr("dy",QO.line_height).text(t)})),i},iN=(t,e,n,r)=>{const i=e.node().getTotalLength(),a=e.node().getPointAtLength(.5*i),s="rel"+tN;tN++;const o=t.append("text").attr("class","req relationshipLabel").attr("id",s).attr("x",a.x).attr("y",a.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(r).node().getBBox();t.insert("rect","#"+s).attr("class","req reqLabelBox").attr("x",a.x-o.width/2).attr("y",a.y-o.height/2).attr("width",o.width).attr("height",o.height).attr("fill","white").attr("fill-opacity","85%")},aN=function(t,e,n,r,i){const a=n.edge(uN(e.src),uN(e.dst)),s=Hc().x((function(t){return t.x})).y((function(t){return t.y})),o=t.insert("path","#"+r).attr("class","er relationshipLine").attr("d",s(a.points)).attr("fill","none");e.type==i.db.Relationships.CONTAINS?o.attr("marker-start","url("+Oh.getUrl(QO.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(o.attr("stroke-dasharray","10,7"),o.attr("marker-end","url("+Oh.getUrl(QO.arrowMarkerAbsolute)+"#"+KO.ReqMarkers.ARROW+"_line_ending)")),iN(t,o,QO,`<<${e.type}>>`)},sN=(t,e,n)=>{Object.keys(t).forEach((r=>{let i=t[r];r=uN(r),f.info("Added new requirement: ",r);const a=n.append("g").attr("id",r),s=eN(a,"req-"+r);let o=nN(a,r+"_title",[`<<${i.type}>>`,`${i.name}`]);rN(a,r+"_body",[`Id: ${i.id}`,`Text: ${i.text}`,`Risk: ${i.risk}`,`Verification: ${i.verifyMethod}`],o.y);const l=s.node().getBBox();e.setNode(r,{width:l.width,height:l.height,shape:"rect",id:r})}))},oN=(t,e,n)=>{Object.keys(t).forEach((r=>{let i=t[r];const a=uN(r),s=n.append("g").attr("id",a),o="element-"+a,l=eN(s,o);let c=nN(s,o+"_title",["<<Element>>",`${r}`]);rN(s,o+"_body",[`Type: ${i.type||"Not Specified"}`,`Doc Ref: ${i.docRef||"None"}`],c.y);const u=l.node().getBBox();e.setNode(a,{width:u.width,height:u.height,shape:"rect",id:a})}))},lN=(t,e)=>(t.forEach((function(t){let n=uN(t.src),r=uN(t.dst);e.setEdge(n,r,{relationship:t})})),t),cN=function(t,e){e.nodes().forEach((function(n){void 0!==n&&void 0!==e.node(n)&&(t.select("#"+n),t.select("#"+n).attr("transform","translate("+(e.node(n).x-e.node(n).width/2)+","+(e.node(n).y-e.node(n).height/2)+" )"))}))},uN=t=>t.replace(/\s/g,"").replace(/\./g,"_"),hN={draw:(t,e,n,r)=>{QO=tv().requirement,r.db.clear(),r.parser.parse(t);const i=QO.securityLevel;let a;"sandbox"===i&&(a=dn("#i"+e));const s=dn("sandbox"===i?a.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`);KO.insertLineEndings(s,QO);const o=new FA({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:QO.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel((function(){return{}}));let l=r.db.getRequirements(),c=r.db.getElements(),u=r.db.getRelationships();sN(l,o,s),oN(c,o,s),lN(u,o),pL(o),cN(s,o),u.forEach((function(t){aN(s,t,o,e,r)}));const h=QO.rect_padding,d=s.node().getBBox(),f=d.width+2*h,p=d.height+2*h;uv(s,p,f,QO.useMaxWidth),s.attr("viewBox",`${d.x-h} ${d.y-h} ${f} ${p}`)}};var dN=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,2],n=[1,3],r=[1,5],i=[1,7],a=[2,5],s=[1,15],o=[1,17],l=[1,18],c=[1,19],u=[1,21],h=[1,22],d=[1,23],f=[1,29],p=[1,30],m=[1,31],g=[1,32],y=[1,33],v=[1,34],b=[1,35],x=[1,36],_=[1,37],w=[1,38],S=[1,39],E=[1,40],M=[1,43],C=[1,44],T=[1,45],A=[1,46],k=[1,47],L=[1,48],P=[1,51],R=[1,4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],I=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,53,58,59,60,61,69,79],D=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,52,53,58,59,60,61,69,79],B=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,51,53,58,59,60,61,69,79],O=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,53,58,59,60,61,69,79],N=[67,68,69],F=[1,121],z=[1,4,5,7,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],U={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,openDirective:11,typeDirective:12,closeDirective:13,":":14,argDirective:15,participant:16,actor:17,AS:18,restOfLine:19,participant_actor:20,signal:21,autonumber:22,NUM:23,off:24,activate:25,deactivate:26,note_statement:27,links_statement:28,link_statement:29,properties_statement:30,details_statement:31,title:32,legacy_title:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,loop:39,end:40,rect:41,opt:42,alt:43,else_sections:44,par:45,par_sections:46,critical:47,option_sections:48,break:49,option:50,and:51,else:52,note:53,placement:54,text2:55,over:56,actor_pair:57,links:58,link:59,properties:60,details:61,spaceList:62,",":63,left_of:64,right_of:65,signaltype:66,"+":67,"-":68,ACTOR:69,SOLID_OPEN_ARROW:70,DOTTED_OPEN_ARROW:71,SOLID_ARROW:72,DOTTED_ARROW:73,SOLID_CROSS:74,DOTTED_CROSS:75,SOLID_POINT:76,DOTTED_POINT:77,TXT:78,open_directive:79,type_directive:80,arg_directive:81,close_directive:82,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",14:":",16:"participant",18:"AS",19:"restOfLine",20:"participant_actor",22:"autonumber",23:"NUM",24:"off",25:"activate",26:"deactivate",32:"title",33:"legacy_title",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",39:"loop",40:"end",41:"rect",42:"opt",43:"alt",45:"par",47:"critical",49:"break",50:"option",51:"and",52:"else",53:"note",56:"over",58:"links",59:"link",60:"properties",61:"details",63:",",64:"left_of",65:"right_of",67:"+",68:"-",69:"ACTOR",70:"SOLID_OPEN_ARROW",71:"DOTTED_OPEN_ARROW",72:"SOLID_ARROW",73:"DOTTED_ARROW",74:"SOLID_CROSS",75:"DOTTED_CROSS",76:"SOLID_POINT",77:"DOTTED_POINT",78:"TXT",79:"open_directive",80:"type_directive",81:"arg_directive",82:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[6,4],[6,6],[10,5],[10,3],[10,5],[10,3],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[48,1],[48,4],[46,1],[46,4],[44,1],[44,4],[27,4],[27,4],[28,3],[29,3],[30,3],[31,3],[62,2],[62,1],[57,3],[57,1],[54,1],[54,1],[21,5],[21,5],[21,4],[17,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[55,1],[11,1],[12,1],[15,1],[13,1]],performAction:function(t,e,n,r,i,a,s){var o=a.length-1;switch(i){case 4:return r.apply(a[o]),a[o];case 5:case 9:this.$=[];break;case 6:a[o-1].push(a[o]),this.$=a[o-1];break;case 7:case 8:case 56:this.$=a[o];break;case 12:a[o-3].type="addParticipant",a[o-3].description=r.parseMessage(a[o-1]),this.$=a[o-3];break;case 13:a[o-1].type="addParticipant",this.$=a[o-1];break;case 14:a[o-3].type="addActor",a[o-3].description=r.parseMessage(a[o-1]),this.$=a[o-3];break;case 15:a[o-1].type="addActor",this.$=a[o-1];break;case 17:this.$={type:"sequenceIndex",sequenceIndex:Number(a[o-2]),sequenceIndexStep:Number(a[o-1]),sequenceVisible:!0,signalType:r.LINETYPE.AUTONUMBER};break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(a[o-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:r.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:r.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:r.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"activeStart",signalType:r.LINETYPE.ACTIVE_START,actor:a[o-1]};break;case 22:this.$={type:"activeEnd",signalType:r.LINETYPE.ACTIVE_END,actor:a[o-1]};break;case 28:r.setDiagramTitle(a[o].substring(6)),this.$=a[o].substring(6);break;case 29:r.setDiagramTitle(a[o].substring(7)),this.$=a[o].substring(7);break;case 30:this.$=a[o].trim(),r.setAccTitle(this.$);break;case 31:case 32:this.$=a[o].trim(),r.setAccDescription(this.$);break;case 33:a[o-1].unshift({type:"loopStart",loopText:r.parseMessage(a[o-2]),signalType:r.LINETYPE.LOOP_START}),a[o-1].push({type:"loopEnd",loopText:a[o-2],signalType:r.LINETYPE.LOOP_END}),this.$=a[o-1];break;case 34:a[o-1].unshift({type:"rectStart",color:r.parseMessage(a[o-2]),signalType:r.LINETYPE.RECT_START}),a[o-1].push({type:"rectEnd",color:r.parseMessage(a[o-2]),signalType:r.LINETYPE.RECT_END}),this.$=a[o-1];break;case 35:a[o-1].unshift({type:"optStart",optText:r.parseMessage(a[o-2]),signalType:r.LINETYPE.OPT_START}),a[o-1].push({type:"optEnd",optText:r.parseMessage(a[o-2]),signalType:r.LINETYPE.OPT_END}),this.$=a[o-1];break;case 36:a[o-1].unshift({type:"altStart",altText:r.parseMessage(a[o-2]),signalType:r.LINETYPE.ALT_START}),a[o-1].push({type:"altEnd",signalType:r.LINETYPE.ALT_END}),this.$=a[o-1];break;case 37:a[o-1].unshift({type:"parStart",parText:r.parseMessage(a[o-2]),signalType:r.LINETYPE.PAR_START}),a[o-1].push({type:"parEnd",signalType:r.LINETYPE.PAR_END}),this.$=a[o-1];break;case 38:a[o-1].unshift({type:"criticalStart",criticalText:r.parseMessage(a[o-2]),signalType:r.LINETYPE.CRITICAL_START}),a[o-1].push({type:"criticalEnd",signalType:r.LINETYPE.CRITICAL_END}),this.$=a[o-1];break;case 39:a[o-1].unshift({type:"breakStart",breakText:r.parseMessage(a[o-2]),signalType:r.LINETYPE.BREAK_START}),a[o-1].push({type:"breakEnd",optText:r.parseMessage(a[o-2]),signalType:r.LINETYPE.BREAK_END}),this.$=a[o-1];break;case 42:this.$=a[o-3].concat([{type:"option",optionText:r.parseMessage(a[o-1]),signalType:r.LINETYPE.CRITICAL_OPTION},a[o]]);break;case 44:this.$=a[o-3].concat([{type:"and",parText:r.parseMessage(a[o-1]),signalType:r.LINETYPE.PAR_AND},a[o]]);break;case 46:this.$=a[o-3].concat([{type:"else",altText:r.parseMessage(a[o-1]),signalType:r.LINETYPE.ALT_ELSE},a[o]]);break;case 47:this.$=[a[o-1],{type:"addNote",placement:a[o-2],actor:a[o-1].actor,text:a[o]}];break;case 48:a[o-2]=[].concat(a[o-1],a[o-1]).slice(0,2),a[o-2][0]=a[o-2][0].actor,a[o-2][1]=a[o-2][1].actor,this.$=[a[o-1],{type:"addNote",placement:r.PLACEMENT.OVER,actor:a[o-2].slice(0,2),text:a[o]}];break;case 49:this.$=[a[o-1],{type:"addLinks",actor:a[o-1].actor,text:a[o]}];break;case 50:this.$=[a[o-1],{type:"addALink",actor:a[o-1].actor,text:a[o]}];break;case 51:this.$=[a[o-1],{type:"addProperties",actor:a[o-1].actor,text:a[o]}];break;case 52:this.$=[a[o-1],{type:"addDetails",actor:a[o-1].actor,text:a[o]}];break;case 55:this.$=[a[o-2],a[o]];break;case 57:this.$=r.PLACEMENT.LEFTOF;break;case 58:this.$=r.PLACEMENT.RIGHTOF;break;case 59:this.$=[a[o-4],a[o-1],{type:"addMessage",from:a[o-4].actor,to:a[o-1].actor,signalType:a[o-3],msg:a[o]},{type:"activeStart",signalType:r.LINETYPE.ACTIVE_START,actor:a[o-1]}];break;case 60:this.$=[a[o-4],a[o-1],{type:"addMessage",from:a[o-4].actor,to:a[o-1].actor,signalType:a[o-3],msg:a[o]},{type:"activeEnd",signalType:r.LINETYPE.ACTIVE_END,actor:a[o-4]}];break;case 61:this.$=[a[o-3],a[o-1],{type:"addMessage",from:a[o-3].actor,to:a[o-1].actor,signalType:a[o-2],msg:a[o]}];break;case 62:this.$={type:"addParticipant",actor:a[o]};break;case 63:this.$=r.LINETYPE.SOLID_OPEN;break;case 64:this.$=r.LINETYPE.DOTTED_OPEN;break;case 65:this.$=r.LINETYPE.SOLID;break;case 66:this.$=r.LINETYPE.DOTTED;break;case 67:this.$=r.LINETYPE.SOLID_CROSS;break;case 68:this.$=r.LINETYPE.DOTTED_CROSS;break;case 69:this.$=r.LINETYPE.SOLID_POINT;break;case 70:this.$=r.LINETYPE.DOTTED_POINT;break;case 71:this.$=r.parseMessage(a[o].trim().substring(1));break;case 72:r.parseDirective("%%{","open_directive");break;case 73:r.parseDirective(a[o],"type_directive");break;case 74:a[o]=a[o].trim().replace(/'/g,'"'),r.parseDirective(a[o],"arg_directive");break;case 75:r.parseDirective("}%%","close_directive","sequence")}},table:[{3:1,4:e,5:n,6:4,7:r,11:6,79:i},{1:[3]},{3:8,4:e,5:n,6:4,7:r,11:6,79:i},{3:9,4:e,5:n,6:4,7:r,11:6,79:i},{3:10,4:e,5:n,6:4,7:r,11:6,79:i},t([1,4,5,16,20,22,25,26,32,33,34,36,38,39,41,42,43,45,47,49,53,58,59,60,61,69,79],a,{8:11}),{12:12,80:[1,13]},{80:[2,72]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:s,5:o,6:41,9:14,10:16,11:6,16:l,17:42,20:c,21:20,22:u,25:h,26:d,27:24,28:25,29:26,30:27,31:28,32:f,33:p,34:m,36:g,38:y,39:v,41:b,42:x,43:_,45:w,47:S,49:E,53:M,58:C,59:T,60:A,61:k,69:L,79:i},{13:49,14:[1,50],82:P},t([14,82],[2,73]),t(R,[2,6]),{6:41,10:52,11:6,16:l,17:42,20:c,21:20,22:u,25:h,26:d,27:24,28:25,29:26,30:27,31:28,32:f,33:p,34:m,36:g,38:y,39:v,41:b,42:x,43:_,45:w,47:S,49:E,53:M,58:C,59:T,60:A,61:k,69:L,79:i},t(R,[2,8]),t(R,[2,9]),{17:53,69:L},{17:54,69:L},{5:[1,55]},{5:[1,58],23:[1,56],24:[1,57]},{17:59,69:L},{17:60,69:L},{5:[1,61]},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},t(R,[2,28]),t(R,[2,29]),{35:[1,66]},{37:[1,67]},t(R,[2,32]),{19:[1,68]},{19:[1,69]},{19:[1,70]},{19:[1,71]},{19:[1,72]},{19:[1,73]},{19:[1,74]},t(R,[2,40]),{66:75,70:[1,76],71:[1,77],72:[1,78],73:[1,79],74:[1,80],75:[1,81],76:[1,82],77:[1,83]},{54:84,56:[1,85],64:[1,86],65:[1,87]},{17:88,69:L},{17:89,69:L},{17:90,69:L},{17:91,69:L},t([5,18,63,70,71,72,73,74,75,76,77,78],[2,62]),{5:[1,92]},{15:93,81:[1,94]},{5:[2,75]},t(R,[2,7]),{5:[1,96],18:[1,95]},{5:[1,98],18:[1,97]},t(R,[2,16]),{5:[1,100],23:[1,99]},{5:[1,101]},t(R,[2,20]),{5:[1,102]},{5:[1,103]},t(R,[2,23]),t(R,[2,24]),t(R,[2,25]),t(R,[2,26]),t(R,[2,27]),t(R,[2,30]),t(R,[2,31]),t(I,a,{8:104}),t(I,a,{8:105}),t(I,a,{8:106}),t(D,a,{44:107,8:108}),t(B,a,{46:109,8:110}),t(O,a,{48:111,8:112}),t(I,a,{8:113}),{17:116,67:[1,114],68:[1,115],69:L},t(N,[2,63]),t(N,[2,64]),t(N,[2,65]),t(N,[2,66]),t(N,[2,67]),t(N,[2,68]),t(N,[2,69]),t(N,[2,70]),{17:117,69:L},{17:119,57:118,69:L},{69:[2,57]},{69:[2,58]},{55:120,78:F},{55:122,78:F},{55:123,78:F},{55:124,78:F},t(z,[2,10]),{13:125,82:P},{82:[2,74]},{19:[1,126]},t(R,[2,13]),{19:[1,127]},t(R,[2,15]),{5:[1,128]},t(R,[2,18]),t(R,[2,19]),t(R,[2,21]),t(R,[2,22]),{4:s,5:o,6:41,9:14,10:16,11:6,16:l,17:42,20:c,21:20,22:u,25:h,26:d,27:24,28:25,29:26,30:27,31:28,32:f,33:p,34:m,36:g,38:y,39:v,40:[1,129],41:b,42:x,43:_,45:w,47:S,49:E,53:M,58:C,59:T,60:A,61:k,69:L,79:i},{4:s,5:o,6:41,9:14,10:16,11:6,16:l,17:42,20:c,21:20,22:u,25:h,26:d,27:24,28:25,29:26,30:27,31:28,32:f,33:p,34:m,36:g,38:y,39:v,40:[1,130],41:b,42:x,43:_,45:w,47:S,49:E,53:M,58:C,59:T,60:A,61:k,69:L,79:i},{4:s,5:o,6:41,9:14,10:16,11:6,16:l,17:42,20:c,21:20,22:u,25:h,26:d,27:24,28:25,29:26,30:27,31:28,32:f,33:p,34:m,36:g,38:y,39:v,40:[1,131],41:b,42:x,43:_,45:w,47:S,49:E,53:M,58:C,59:T,60:A,61:k,69:L,79:i},{40:[1,132]},{4:s,5:o,6:41,9:14,10:16,11:6,16:l,17:42,20:c,21:20,22:u,25:h,26:d,27:24,28:25,29:26,30:27,31:28,32:f,33:p,34:m,36:g,38:y,39:v,40:[2,45],41:b,42:x,43:_,45:w,47:S,49:E,52:[1,133],53:M,58:C,59:T,60:A,61:k,69:L,79:i},{40:[1,134]},{4:s,5:o,6:41,9:14,10:16,11:6,16:l,17:42,20:c,21:20,22:u,25:h,26:d,27:24,28:25,29:26,30:27,31:28,32:f,33:p,34:m,36:g,38:y,39:v,40:[2,43],41:b,42:x,43:_,45:w,47:S,49:E,51:[1,135],53:M,58:C,59:T,60:A,61:k,69:L,79:i},{40:[1,136]},{4:s,5:o,6:41,9:14,10:16,11:6,16:l,17:42,20:c,21:20,22:u,25:h,26:d,27:24,28:25,29:26,30:27,31:28,32:f,33:p,34:m,36:g,38:y,39:v,40:[2,41],41:b,42:x,43:_,45:w,47:S,49:E,50:[1,137],53:M,58:C,59:T,60:A,61:k,69:L,79:i},{4:s,5:o,6:41,9:14,10:16,11:6,16:l,17:42,20:c,21:20,22:u,25:h,26:d,27:24,28:25,29:26,30:27,31:28,32:f,33:p,34:m,36:g,38:y,39:v,40:[1,138],41:b,42:x,43:_,45:w,47:S,49:E,53:M,58:C,59:T,60:A,61:k,69:L,79:i},{17:139,69:L},{17:140,69:L},{55:141,78:F},{55:142,78:F},{55:143,78:F},{63:[1,144],78:[2,56]},{5:[2,49]},{5:[2,71]},{5:[2,50]},{5:[2,51]},{5:[2,52]},{5:[1,145]},{5:[1,146]},{5:[1,147]},t(R,[2,17]),t(R,[2,33]),t(R,[2,34]),t(R,[2,35]),t(R,[2,36]),{19:[1,148]},t(R,[2,37]),{19:[1,149]},t(R,[2,38]),{19:[1,150]},t(R,[2,39]),{55:151,78:F},{55:152,78:F},{5:[2,61]},{5:[2,47]},{5:[2,48]},{17:153,69:L},t(z,[2,11]),t(R,[2,12]),t(R,[2,14]),t(D,a,{8:108,44:154}),t(B,a,{8:110,46:155}),t(O,a,{8:112,48:156}),{5:[2,59]},{5:[2,60]},{78:[2,55]},{40:[2,46]},{40:[2,44]},{40:[2,42]}],defaultActions:{7:[2,72],8:[2,1],9:[2,2],10:[2,3],51:[2,75],86:[2,57],87:[2,58],94:[2,74],120:[2,49],121:[2,71],122:[2,50],123:[2,51],124:[2,52],141:[2,61],142:[2,47],143:[2,48],151:[2,59],152:[2,60],153:[2,55],154:[2,46],155:[2,44],156:[2,42]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],a=[],s=this.table,o="",l=0,c=0,u=2,h=1,d=a.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,typeof f.yylloc>"u"&&(f.yylloc={});var g=f.yylloc;a.push(g);var y=f.options&&f.options.ranges;function v(){var t;return"number"!=typeof(t=r.pop()||f.lex()||h)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,M,C,T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:((null===b||typeof b>"u")&&(b=v()),_=s[x]&&s[x][b]),typeof _>"u"||!_.length||!_[0]){var A="";for(S in C=[],s[x])this.terminals_[S]&&S>u&&C.push("'"+this.terminals_[S]+"'");A=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(b==h?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(A,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(f.yytext),a.push(f.yylloc),n.push(_[1]),b=null,c=f.yyleng,o=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(E=this.productions_[_[1]][1],T.$=i[i.length-E],T._$={first_line:a[a.length-(E||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(E||1)].first_column,last_column:a[a.length-1].last_column},y&&(T._$.range=[a[a.length-(E||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(T,[o,c,l,p.yy,_[1],i,a].concat(d)))<"u")return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),a=a.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(T.$),a.push(T._$),M=s[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},G={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),79;case 1:return this.begin("type_directive"),80;case 2:return this.popState(),this.begin("arg_directive"),14;case 3:return this.popState(),this.popState(),82;case 4:return 81;case 5:case 52:case 65:return 5;case 6:case 7:case 8:case 9:case 10:break;case 11:return 23;case 12:return this.begin("ID"),16;case 13:return this.begin("ID"),20;case 14:return e.yytext=e.yytext.trim(),this.begin("ALIAS"),69;case 15:return this.popState(),this.popState(),this.begin("LINE"),18;case 16:return this.popState(),this.popState(),5;case 17:return this.begin("LINE"),39;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),52;case 22:return this.begin("LINE"),45;case 23:return this.begin("LINE"),51;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),50;case 26:return this.begin("LINE"),49;case 27:return this.popState(),19;case 28:return 40;case 29:return 64;case 30:return 65;case 31:return 58;case 32:return 59;case 33:return 60;case 34:return 61;case 35:return 56;case 36:return 53;case 37:return this.begin("ID"),25;case 38:return this.begin("ID"),26;case 39:return 32;case 40:return 33;case 41:return this.begin("acc_title"),34;case 42:return this.popState(),"acc_title_value";case 43:return this.begin("acc_descr"),36;case 44:return this.popState(),"acc_descr_value";case 45:this.begin("acc_descr_multiline");break;case 46:this.popState();break;case 47:return"acc_descr_multiline_value";case 48:return 7;case 49:return 22;case 50:return 24;case 51:return 63;case 53:return e.yytext=e.yytext.trim(),69;case 54:return 72;case 55:return 73;case 56:return 70;case 57:return 71;case 58:return 74;case 59:return 75;case 60:return 76;case 61:return 77;case 62:return 78;case 63:return 67;case 64:return 68;case 66:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[46,47],inclusive:!1},acc_descr:{rules:[44],inclusive:!1},acc_title:{rules:[42],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,14],inclusive:!1},ALIAS:{rules:[7,8,15,16],inclusive:!1},LINE:{rules:[7,8,27],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,45,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0}}};function H(){this.yy={}}return U.lexer=G,H.prototype=U,U.Parser=H,new H}();dN.parser=dN;const fN=dN,pN=t=>null!==t.match(/^\s*sequenceDiagram/);let mN,gN,yN={},vN=[],bN=!1;const xN=function(t,e,n,r){const i=yN[t];i&&e===i.name&&null==n||((null==n||null==n.text)&&(n={text:e,wrap:null,type:r}),(null==r||null==n.text)&&(n={text:e,wrap:null,type:r}),yN[t]={name:e,description:n.text,wrap:void 0===n.wrap&&MN()||!!n.wrap,prevActor:mN,links:{},properties:{},actorCnt:null,rectData:null,type:r||"participant"},mN&&yN[mN]&&(yN[mN].nextActor=t),mN=t)},_N=t=>{let e,n=0;for(e=0;e<vN.length;e++)vN[e].type===CN.ACTIVE_START&&vN[e].from.actor===t&&n++,vN[e].type===CN.ACTIVE_END&&vN[e].from.actor===t&&n--;return n},wN=function(t,e,n,r){vN.push({from:t,to:e,message:n.text,wrap:void 0===n.wrap&&MN()||!!n.wrap,answer:r})},SN=function(t,e,n={text:void 0,wrap:void 0},r){if(r===CN.ACTIVE_END&&_N(t.actor)<1){let e=new Error("Trying to inactivate an inactive participant ("+t.actor+")");throw e.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},e}return vN.push({from:t,to:e,message:n.text,wrap:void 0===n.wrap&&MN()||!!n.wrap,type:r}),!0},EN=function(t){return yN[t]},MN=()=>void 0!==gN?gN:tv().sequence.wrap,CN={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},TN=function(t,e,n){n.text,void 0===n.wrap&&MN()||n.wrap;const r=[].concat(t,t);vN.push({from:r[0],to:r[1],message:n.text,wrap:void 0===n.wrap&&MN()||!!n.wrap,type:CN.NOTE,placement:e})},AN=function(t,e){const n=EN(t);try{let t=kh(e.text,tv());t=t.replace(/&amp;/g,"&"),t=t.replace(/&equals;/g,"="),LN(n,JSON.parse(t))}catch(l){f.error("error while parsing actor link text",l)}},kN=function(t,e){const n=EN(t);try{const t={};let s=kh(e.text,tv());var r=s.indexOf("@");s=s.replace(/&amp;/g,"&"),s=s.replace(/&equals;/g,"=");var i=s.slice(0,r-1).trim(),a=s.slice(r+1).trim();t[i]=a,LN(n,t)}catch(s){f.error("error while parsing actor link text",s)}};function LN(t,e){if(null==t.links)t.links=e;else for(let n in e)t.links[n]=e[n]}const PN=function(t,e){const n=EN(t);try{let t=kh(e.text,tv());RN(n,JSON.parse(t))}catch(l){f.error("error while parsing actor properties text",l)}};function RN(t,e){if(null==t.properties)t.properties=e;else for(let n in e)t.properties[n]=e[n]}const IN=function(t,e){const n=EN(t),r=document.getElementById(e.text);try{const t=r.innerHTML,e=JSON.parse(t);e.properties&&RN(n,e.properties),e.links&&LN(n,e.links)}catch(i){f.error("error while parsing actor details text",i)}},DN=function(t){if(Array.isArray(t))t.forEach((function(t){DN(t)}));else switch(t.type){case"sequenceIndex":vN.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":xN(t.actor,t.actor,t.description,"participant");break;case"addActor":xN(t.actor,t.actor,t.description,"actor");break;case"activeStart":case"activeEnd":SN(t.actor,void 0,void 0,t.signalType);break;case"addNote":TN(t.actor,t.placement,t.text);break;case"addLinks":AN(t.actor,t.text);break;case"addALink":kN(t.actor,t.text);break;case"addProperties":PN(t.actor,t.text);break;case"addDetails":IN(t.actor,t.text);break;case"addMessage":SN(t.from,t.to,t.msg,t.signalType);break;case"loopStart":SN(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":case"rectEnd":case"optEnd":case"altEnd":case"parEnd":case"criticalEnd":case"breakEnd":SN(void 0,void 0,void 0,t.signalType);break;case"rectStart":SN(void 0,void 0,t.color,t.signalType);break;case"optStart":SN(void 0,void 0,t.optText,t.signalType);break;case"altStart":case"else":SN(void 0,void 0,t.altText,t.signalType);break;case"setAccTitle":jv(t.text);break;case"parStart":case"and":SN(void 0,void 0,t.parText,t.signalType);break;case"criticalStart":SN(void 0,void 0,t.criticalText,t.signalType);break;case"option":SN(void 0,void 0,t.optionText,t.signalType);break;case"breakStart":SN(void 0,void 0,t.breakText,t.signalType)}},BN={addActor:xN,addMessage:wN,addSignal:SN,addLinks:AN,addDetails:IN,addProperties:PN,autoWrap:MN,setWrap:function(t){gN=t},enableSequenceNumbers:function(){bN=!0},disableSequenceNumbers:function(){bN=!1},showSequenceNumbers:()=>bN,getMessages:function(){return vN},getActors:function(){return yN},getActor:EN,getActorKeys:function(){return Object.keys(yN)},getActorProperty:function(t,e){if(void 0!==t&&void 0!==t.properties)return t.properties[e]},getAccTitle:Vv,getDiagramTitle:qv,setDiagramTitle:Yv,parseDirective:function(t,e,n){iH.parseDirective(this,t,e,n)},getConfig:()=>tv().sequence,clear:function(){yN={},vN=[],bN=!1,Hv()},parseMessage:function(t){const e=t.trim(),n={text:e.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:null!==e.match(/^:?wrap:/)||null===e.match(/^:?nowrap:/)&&void 0};return f.debug("parseMessage:",n),n},LINETYPE:CN,ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},addNote:TN,setAccTitle:jv,apply:DN,setAccDescription:Wv,getAccDescription:$v};let ON=[];const NN=t=>{ON.push(t)},FN=()=>{ON.forEach((t=>{t()})),ON=[]},zN=function(t,e){const n=t.append("rect");return n.attr("x",e.x),n.attr("y",e.y),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("width",e.width),n.attr("height",e.height),n.attr("rx",e.rx),n.attr("ry",e.ry),void 0!==e.class&&n.attr("class",e.class),n},UN=(t,e)=>{NN((()=>{const n=document.querySelectorAll(t);0!==n.length&&(n[0].addEventListener("mouseover",(function(){$N("actor"+e+"_popup")})),n[0].addEventListener("mouseout",(function(){YN("actor"+e+"_popup")})))}))},GN=function(t,e,n,r,i){if(void 0===e.links||null===e.links||0===Object.keys(e.links).length)return{height:0,width:0};const a=e.links,s=e.actorCnt,o=e.rectData;var l="none";i&&(l="block !important");const c=t.append("g");c.attr("id","actor"+s+"_popup"),c.attr("class","actorPopupMenu"),c.attr("display",l),UN("#actor"+s+"_popup",s);var u="";void 0!==o.class&&(u=" "+o.class);let h=o.width>n?o.width:n;const d=c.append("rect");if(d.attr("class","actorPopupMenuPanel"+u),d.attr("x",o.x),d.attr("y",o.height),d.attr("fill",o.fill),d.attr("stroke",o.stroke),d.attr("width",h),d.attr("height",o.height),d.attr("rx",o.rx),d.attr("ry",o.ry),null!=a){var f=20;for(let t in a){var p=c.append("a"),m=y(a[t]);p.attr("xlink:href",m),p.attr("target","_blank"),mF(r)(t,p,o.x+10,o.height+f,h,20,{class:"actor"},r),f+=30}}return d.attr("height",f),{height:o.height+f,width:h}},HN=function(t,e,n,r){const i=t.append("image");i.attr("x",e),i.attr("y",n);var a=y(r);i.attr("xlink:href",a)},jN=function(t,e,n,r){const i=t.append("use");i.attr("x",e),i.attr("y",n);var a=y(r);i.attr("xlink:href","#"+a)},VN=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'block'; }"},WN=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'none'; }"},$N=function(t){var e=document.getElementById(t);null!=e&&(e.style.display="block")},YN=function(t){var e=document.getElementById(t);null!=e&&(e.style.display="none")},qN=function(t,e){let n=0,r=0;const i=e.text.split(Oh.lineBreakRegex);let a=[],s=0,o=()=>e.y;if(void 0!==e.valign&&void 0!==e.textMargin&&e.textMargin>0)switch(e.valign){case"top":case"start":o=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":o=()=>Math.round(e.y+(n+r+e.textMargin)/2);break;case"bottom":case"end":o=()=>Math.round(e.y+(n+r+2*e.textMargin)-e.textMargin)}if(void 0!==e.anchor&&void 0!==e.textMargin&&void 0!==e.width)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle"}for(let[l,c]of i.entries()){void 0!==e.textMargin&&0===e.textMargin&&void 0!==e.fontSize&&(s=l*e.fontSize);const i=t.append("text");if(i.attr("x",e.x),i.attr("y",o()),void 0!==e.anchor&&i.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),void 0!==e.fontFamily&&i.style("font-family",e.fontFamily),void 0!==e.fontSize&&i.style("font-size",e.fontSize),void 0!==e.fontWeight&&i.style("font-weight",e.fontWeight),void 0!==e.fill&&i.attr("fill",e.fill),void 0!==e.class&&i.attr("class",e.class),void 0!==e.dy?i.attr("dy",e.dy):0!==s&&i.attr("dy",s),e.tspan){const t=i.append("tspan");t.attr("x",e.x),void 0!==e.fill&&t.attr("fill",e.fill),t.text(c)}else i.text(c);void 0!==e.valign&&void 0!==e.textMargin&&e.textMargin>0&&(r+=(i._groups||i)[0][0].getBBox().height,n=r),a.push(i)}return a},XN=function(t,e){function n(t,e,n,r,i){return t+","+e+" "+(t+n)+","+e+" "+(t+n)+","+(e+r-i)+" "+(t+n-1.2*i)+","+(e+r)+" "+t+","+(e+r)}const r=t.append("polygon");return r.attr("points",n(e.x,e.y,e.width,e.height,7)),r.attr("class","labelBox"),e.y=e.y+e.height/2,qN(t,e),r};let JN=-1;const ZN=(t,e)=>{!t.selectAll||t.selectAll(".actor-line").attr("class","200").attr("y2",e-55)},KN=function(t,e,n){const r=e.x+e.width/2,i=t.append("g");var a=i;0===e.y&&(JN++,a.append("line").attr("id","actor"+JN).attr("x1",r).attr("y1",5).attr("x2",r).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),a=i.append("g"),e.actorCnt=JN,null!=e.links&&(a.attr("id","root-"+JN),UN("#root-"+JN,JN)));const s=fF();var o="actor";null!=e.properties&&e.properties.class?o=e.properties.class:s.fill="#eaeaea",s.x=e.x,s.y=e.y,s.width=e.width,s.height=e.height,s.class=o,s.rx=3,s.ry=3;const l=zN(a,s);if(e.rectData=s,null!=e.properties&&e.properties.icon){const t=e.properties.icon.trim();"@"===t.charAt(0)?jN(a,s.x+s.width-20,s.y+10,t.substr(1)):HN(a,s.x+s.width-20,s.y+10,t)}pF(n)(e.description,a,s.x,s.y,s.width,s.height,{class:"actor"},n);let c=e.height;if(l.node){const t=l.node().getBBox();e.height=t.height,c=t.height}return c},QN=function(t,e,n){const r=e.x+e.width/2;0===e.y&&(JN++,t.append("line").attr("id","actor"+JN).attr("x1",r).attr("y1",80).attr("x2",r).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"));const i=t.append("g");i.attr("class","actor-man");const a=fF();a.x=e.x,a.y=e.y,a.fill="#eaeaea",a.width=e.width,a.height=e.height,a.class="actor",a.rx=3,a.ry=3,i.append("line").attr("id","actor-man-torso"+JN).attr("x1",r).attr("y1",e.y+25).attr("x2",r).attr("y2",e.y+45),i.append("line").attr("id","actor-man-arms"+JN).attr("x1",r-18).attr("y1",e.y+33).attr("x2",r+18).attr("y2",e.y+33),i.append("line").attr("x1",r-18).attr("y1",e.y+60).attr("x2",r).attr("y2",e.y+45),i.append("line").attr("x1",r).attr("y1",e.y+45).attr("x2",r+16).attr("y2",e.y+60);const s=i.append("circle");s.attr("cx",e.x+e.width/2),s.attr("cy",e.y+10),s.attr("r",15),s.attr("width",e.width),s.attr("height",e.height);const o=i.node().getBBox();return e.height=o.height,pF(n)(e.description,i,a.x,a.y+35,a.width,a.height,{class:"actor"},n),e.height},tF=function(t,e,n){switch(e.type){case"actor":return QN(t,e,n);case"participant":return KN(t,e,n)}},eF=function(t){return t.append("g")},nF=function(t,e,n,r,i){const a=fF(),s=e.anchored;a.x=e.startx,a.y=e.starty,a.class="activation"+i%3,a.width=e.stopx-e.startx,a.height=n-e.starty,zN(s,a)},rF=function(t,e,n,r){const{boxMargin:i,boxTextMargin:a,labelBoxHeight:s,labelBoxWidth:o,messageFontFamily:l,messageFontSize:c,messageFontWeight:u}=r,h=t.append("g"),d=function(t,e,n,r){return h.append("line").attr("x1",t).attr("y1",e).attr("x2",n).attr("y2",r).attr("class","loopLine")};d(e.startx,e.starty,e.stopx,e.starty),d(e.stopx,e.starty,e.stopx,e.stopy),d(e.startx,e.stopy,e.stopx,e.stopy),d(e.startx,e.starty,e.startx,e.stopy),void 0!==e.sections&&e.sections.forEach((function(t){d(e.startx,t.y,e.stopx,t.y).style("stroke-dasharray","3, 3")}));let f=dF();f.text=n,f.x=e.startx,f.y=e.starty,f.fontFamily=l,f.fontSize=c,f.fontWeight=u,f.anchor="middle",f.valign="middle",f.tspan=!1,f.width=o||50,f.height=s||20,f.textMargin=a,f.class="labelText",XN(h,f),f=dF(),f.text=e.title,f.x=e.startx+o/2+(e.stopx-e.startx)/2,f.y=e.starty+i+a,f.anchor="middle",f.valign="middle",f.textMargin=a,f.class="loopText",f.fontFamily=l,f.fontSize=c,f.fontWeight=u,f.wrap=!0;let p=qN(h,f);return void 0!==e.sectionTitles&&e.sectionTitles.forEach((function(t,n){if(t.message){f.text=t.message,f.x=e.startx+(e.stopx-e.startx)/2,f.y=e.sections[n].y+i+a,f.class="loopText",f.anchor="middle",f.valign="middle",f.tspan=!1,f.fontFamily=l,f.fontSize=c,f.fontWeight=u,f.wrap=e.wrap,p=qN(h,f);let r=Math.round(p.map((t=>(t._groups||t)[0][0].getBBox().height)).reduce(((t,e)=>t+e)));e.sections[n].height+=r-(i+a)}})),e.height=Math.round(e.stopy-e.starty),h},iF=function(t,e){zN(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},aF=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},sF=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},oF=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},lF=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},cF=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},uF=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},hF=function(t){t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},dF=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},fF=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},pF=function(){function t(t,e,n,i,a,s,o){r(e.append("text").attr("x",n+a/2).attr("y",i+s/2+5).style("text-anchor","middle").text(t),o)}function e(t,e,n,i,a,s,o,l){const{actorFontSize:c,actorFontFamily:u,actorFontWeight:h}=l;let d=c&&c.replace?c.replace("px",""):c;const f=t.split(Oh.lineBreakRegex);for(let p=0;p<f.length;p++){const t=p*d-d*(f.length-1)/2,l=e.append("text").attr("x",n+a/2).attr("y",i).style("text-anchor","middle").style("font-size",c).style("font-weight",h).style("font-family",u);l.append("tspan").attr("x",n+a/2).attr("dy",t).text(f[p]),l.attr("y",i+s/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(l,o)}}function n(t,n,i,a,s,o,l,c){const u=n.append("switch"),h=u.append("foreignObject").attr("x",i).attr("y",a).attr("width",s).attr("height",o).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");h.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),e(t,u,i,a,s,o,l,c),r(h,l)}function r(t,e){for(const n in e)e.hasOwnProperty(n)&&t.attr(n,e[n])}return function(r){return"fo"===r.textPlacement?n:"old"===r.textPlacement?t:e}}(),mF=function(){function t(t,e,n,i,a,s,o){r(e.append("text").attr("x",n).attr("y",i).style("text-anchor","start").text(t),o)}function e(t,e,n,i,a,s,o,l){const{actorFontSize:c,actorFontFamily:u,actorFontWeight:h}=l,d=t.split(Oh.lineBreakRegex);for(let f=0;f<d.length;f++){const t=f*c-c*(d.length-1)/2,a=e.append("text").attr("x",n).attr("y",i).style("text-anchor","start").style("font-size",c).style("font-weight",h).style("font-family",u);a.append("tspan").attr("x",n).attr("dy",t).text(d[f]),a.attr("y",i+s/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(a,o)}}function n(t,n,i,a,s,o,l,c){const u=n.append("switch"),h=u.append("foreignObject").attr("x",i).attr("y",a).attr("width",s).attr("height",o).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");h.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),e(t,u,i,a,s,o,l,c),r(h,l)}function r(t,e){for(const n in e)e.hasOwnProperty(n)&&t.attr(n,e[n])}return function(r){return"fo"===r.textPlacement?n:"old"===r.textPlacement?t:e}}(),gF={drawRect:zN,drawText:qN,drawLabel:XN,drawActor:tF,drawPopup:GN,drawImage:HN,drawEmbeddedImage:jN,anchorElement:eF,drawActivation:nF,drawLoop:rF,drawBackgroundRect:iF,insertArrowHead:lF,insertArrowFilledHead:cF,insertSequenceNumber:uF,insertArrowCrossHead:hF,insertDatabaseIcon:aF,insertComputerIcon:sF,insertClockIcon:oF,getTextObj:dF,getNoteRect:fF,popupMenu:VN,popdownMenu:WN,fixLifeLineHeights:ZN,sanitizeUrl:y};let yF={};const vF={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,0===this.actors.length?[0]:this.actors.map((t=>t.height||0)))+(0===this.loops.length?0:this.loops.map((t=>t.height||0)).reduce(((t,e)=>t+e)))+(0===this.messages.length?0:this.messages.map((t=>t.height||0)).reduce(((t,e)=>t+e)))+(0===this.notes.length?0:this.notes.map((t=>t.height||0)).reduce(((t,e)=>t+e)))},clear:function(){this.actors=[],this.loops=[],this.messages=[],this.notes=[]},addActor:function(t){this.actors.push(t)},addLoop:function(t){this.loops.push(t)},addMessage:function(t){this.messages.push(t)},addNote:function(t){this.notes.push(t)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,TF(tv())},updateVal:function(t,e,n,r){void 0===t[e]?t[e]=n:t[e]=r(n,t[e])},updateBounds:function(t,e,n,r){const i=this;let a=0;function s(s){return function(o){a++;const l=i.sequenceItems.length-a+1;i.updateVal(o,"starty",e-l*yF.boxMargin,Math.min),i.updateVal(o,"stopy",r+l*yF.boxMargin,Math.max),i.updateVal(vF.data,"startx",t-l*yF.boxMargin,Math.min),i.updateVal(vF.data,"stopx",n+l*yF.boxMargin,Math.max),"activation"!==s&&(i.updateVal(o,"startx",t-l*yF.boxMargin,Math.min),i.updateVal(o,"stopx",n+l*yF.boxMargin,Math.max),i.updateVal(vF.data,"starty",e-l*yF.boxMargin,Math.min),i.updateVal(vF.data,"stopy",r+l*yF.boxMargin,Math.max))}}this.sequenceItems.forEach(s()),this.activations.forEach(s("activation"))},insert:function(t,e,n,r){const i=Math.min(t,n),a=Math.max(t,n),s=Math.min(e,r),o=Math.max(e,r);this.updateVal(vF.data,"startx",i,Math.min),this.updateVal(vF.data,"starty",s,Math.min),this.updateVal(vF.data,"stopx",a,Math.max),this.updateVal(vF.data,"stopy",o,Math.max),this.updateBounds(i,s,a,o)},newActivation:function(t,e,n){const r=n[t.from.actor],i=AF(t.from.actor).length||0,a=r.x+r.width/2+(i-1)*yF.activationWidth/2;this.activations.push({startx:a,starty:this.verticalPos+2,stopx:a+yF.activationWidth,stopy:void 0,actor:t.from.actor,anchored:gF.anchorElement(e)})},endActivation:function(t){const e=this.activations.map((function(t){return t.actor})).lastIndexOf(t.from.actor);return this.activations.splice(e,1)[0]},createLoop:function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}},newLoop:function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(t){const e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:vF.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},bF=function(t,e){vF.bumpVerticalPos(yF.boxMargin),e.height=yF.boxMargin,e.starty=vF.getVerticalPos();const n=gF.getNoteRect();n.x=e.startx,n.y=e.starty,n.width=e.width||yF.width,n.class="note";const r=t.append("g"),i=gF.drawRect(r,n),a=gF.getTextObj();a.x=e.startx,a.y=e.starty,a.width=n.width,a.dy="1em",a.text=e.message,a.class="noteText",a.fontFamily=yF.noteFontFamily,a.fontSize=yF.noteFontSize,a.fontWeight=yF.noteFontWeight,a.anchor=yF.noteAlign,a.textMargin=yF.noteMargin,a.valign="center";const s=qN(r,a),o=Math.round(s.map((t=>(t._groups||t)[0][0].getBBox().height)).reduce(((t,e)=>t+e)));i.attr("height",o+2*yF.noteMargin),e.height+=o+2*yF.noteMargin,vF.bumpVerticalPos(o+2*yF.noteMargin),e.stopy=e.starty+o+2*yF.noteMargin,e.stopx=e.startx+n.width,vF.insert(e.startx,e.starty,e.stopx,e.stopy),vF.models.addNote(e)},xF=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),_F=t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),wF=t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight});function SF(t,e){vF.bumpVerticalPos(10);const{startx:n,stopx:r,message:i}=e,a=Oh.splitBreaks(i).length,s=Zg.calculateTextDimensions(i,xF(yF)),o=s.height/a;e.height+=o,vF.bumpVerticalPos(o);let l,c=s.height-10;const u=s.width;if(n===r){l=vF.getVerticalPos()+c,yF.rightAngles||(c+=yF.boxMargin,l=vF.getVerticalPos()+c),c+=30;const t=Math.max(u/2,yF.width/2);vF.insert(n-t,vF.getVerticalPos()-10+c,r+t,vF.getVerticalPos()+30+c)}else c+=yF.boxMargin,l=vF.getVerticalPos()+c,vF.insert(n,l-10,r,l);return vF.bumpVerticalPos(c),e.height+=c,e.stopy=e.starty+e.height,vF.insert(e.fromBounds,e.starty,e.toBounds,e.stopy),l}const EF=function(t,e,n,r){const{startx:i,stopx:a,starty:s,message:o,type:l,sequenceIndex:c,sequenceVisible:u}=e,h=Zg.calculateTextDimensions(o,xF(yF)),d=gF.getTextObj();d.x=i,d.y=s+10,d.width=a-i,d.class="messageText",d.dy="1em",d.text=o,d.fontFamily=yF.messageFontFamily,d.fontSize=yF.messageFontSize,d.fontWeight=yF.messageFontWeight,d.anchor=yF.messageAlign,d.valign="center",d.textMargin=yF.wrapPadding,d.tspan=!1,qN(t,d);const f=h.width;let p;i===a?p=yF.rightAngles?t.append("path").attr("d",`M  ${i},${n} H ${i+Math.max(yF.width/2,f/2)} V ${n+25} H ${i}`):t.append("path").attr("d","M "+i+","+n+" C "+(i+60)+","+(n-10)+" "+(i+60)+","+(n+30)+" "+i+","+(n+20)):(p=t.append("line"),p.attr("x1",i),p.attr("y1",n),p.attr("x2",a),p.attr("y2",n)),l===r.db.LINETYPE.DOTTED||l===r.db.LINETYPE.DOTTED_CROSS||l===r.db.LINETYPE.DOTTED_POINT||l===r.db.LINETYPE.DOTTED_OPEN?(p.style("stroke-dasharray","3, 3"),p.attr("class","messageLine1")):p.attr("class","messageLine0");let m="";yF.arrowMarkerAbsolute&&(m=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,m=m.replace(/\(/g,"\\("),m=m.replace(/\)/g,"\\)")),p.attr("stroke-width",2),p.attr("stroke","none"),p.style("fill","none"),(l===r.db.LINETYPE.SOLID||l===r.db.LINETYPE.DOTTED)&&p.attr("marker-end","url("+m+"#arrowhead)"),(l===r.db.LINETYPE.SOLID_POINT||l===r.db.LINETYPE.DOTTED_POINT)&&p.attr("marker-end","url("+m+"#filled-head)"),(l===r.db.LINETYPE.SOLID_CROSS||l===r.db.LINETYPE.DOTTED_CROSS)&&p.attr("marker-end","url("+m+"#crosshead)"),(u||yF.showSequenceNumbers)&&(p.attr("marker-start","url("+m+"#sequencenumber)"),t.append("text").attr("x",i).attr("y",n+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(c))},MF=function(t,e,n,r,i,a){if(!0===i.hideUnusedParticipants){const t=new Set;a.forEach((e=>{t.add(e.from),t.add(e.to)})),n=n.filter((e=>t.has(e)))}let s=0,o=0,l=0;for(const c of n){const n=e[c];n.width=n.width||yF.width,n.height=Math.max(n.height||yF.height,yF.height),n.margin=n.margin||yF.actorMargin,n.x=s+o,n.y=r;const i=gF.drawActor(t,n,yF);l=Math.max(l,i),vF.insert(n.x,r,n.x+n.width,n.height),s+=n.width,o+=n.margin,vF.models.addActor(n)}vF.bumpVerticalPos(l)},CF=function(t,e,n,r){let i=0,a=0;for(const s of n){const n=e[s],o=IF(n),l=gF.drawPopup(t,n,o,yF,yF.forceMenus,r);l.height>i&&(i=l.height),l.width+n.x>a&&(a=l.width+n.x)}return{maxHeight:i,maxWidth:a}},TF=function(t){sm(yF,t),t.fontFamily&&(yF.actorFontFamily=yF.noteFontFamily=yF.messageFontFamily=t.fontFamily),t.fontSize&&(yF.actorFontSize=yF.noteFontSize=yF.messageFontSize=t.fontSize),t.fontWeight&&(yF.actorFontWeight=yF.noteFontWeight=yF.messageFontWeight=t.fontWeight)},AF=function(t){return vF.activations.filter((function(e){return e.actor===t}))},kF=function(t,e){const n=e[t],r=AF(t);return[r.reduce((function(t,e){return Math.min(t,e.startx)}),n.x+n.width/2),r.reduce((function(t,e){return Math.max(t,e.stopx)}),n.x+n.width/2)]};function LF(t,e,n,r,i){vF.bumpVerticalPos(n);let a=r;if(e.id&&e.message&&t[e.id]){const n=t[e.id].width,i=xF(yF);e.message=Zg.wrapLabel(`[${e.message}]`,n-2*yF.wrapPadding,i),e.width=n,e.wrap=!0;const s=Zg.calculateTextDimensions(e.message,i),o=Math.max(s.height,yF.labelBoxHeight);a=r+o,f.debug(`${o} - ${e.message}`)}i(e),vF.bumpVerticalPos(a)}const PF=function(t,e,n,r){const{securityLevel:i,sequence:a}=tv();let s;yF=a,"sandbox"===i&&(s=dn("#i"+e));const o=dn("sandbox"===i?s.nodes()[0].contentDocument.body:"body"),l="sandbox"===i?s.nodes()[0].contentDocument:document;vF.init(),f.debug(r.db);const c="sandbox"===i?o.select(`[id="${e}"]`):dn(`[id="${e}"]`),u=r.db.getActors(),h=r.db.getActorKeys(),d=r.db.getMessages(),p=r.db.getDiagramTitle(),m=RF(u,d,r);yF.height=DF(u,m),gF.insertComputerIcon(c),gF.insertDatabaseIcon(c),gF.insertClockIcon(c),MF(c,u,h,0,yF,d);const g=NF(d,u,m,r);function y(t,e){const n=vF.endActivation(t);n.starty+18>e&&(n.starty=e-6,e+=12),gF.drawActivation(c,n,e,yF,AF(t.from.actor).length),vF.insert(n.startx,e-10,n.stopx,e)}gF.insertArrowHead(c),gF.insertArrowCrossHead(c),gF.insertArrowFilledHead(c),gF.insertSequenceNumber(c);let v=1,b=1;const x=[];d.forEach((function(t){let e,n,i;switch(t.type){case r.db.LINETYPE.NOTE:n=t.noteModel,bF(c,n);break;case r.db.LINETYPE.ACTIVE_START:vF.newActivation(t,c,u);break;case r.db.LINETYPE.ACTIVE_END:y(t,vF.getVerticalPos());break;case r.db.LINETYPE.LOOP_START:LF(g,t,yF.boxMargin,yF.boxMargin+yF.boxTextMargin,(t=>vF.newLoop(t)));break;case r.db.LINETYPE.LOOP_END:e=vF.endLoop(),gF.drawLoop(c,e,"loop",yF),vF.bumpVerticalPos(e.stopy-vF.getVerticalPos()),vF.models.addLoop(e);break;case r.db.LINETYPE.RECT_START:LF(g,t,yF.boxMargin,yF.boxMargin,(t=>vF.newLoop(void 0,t.message)));break;case r.db.LINETYPE.RECT_END:e=vF.endLoop(),gF.drawBackgroundRect(c,e),vF.models.addLoop(e),vF.bumpVerticalPos(e.stopy-vF.getVerticalPos());break;case r.db.LINETYPE.OPT_START:LF(g,t,yF.boxMargin,yF.boxMargin+yF.boxTextMargin,(t=>vF.newLoop(t)));break;case r.db.LINETYPE.OPT_END:e=vF.endLoop(),gF.drawLoop(c,e,"opt",yF),vF.bumpVerticalPos(e.stopy-vF.getVerticalPos()),vF.models.addLoop(e);break;case r.db.LINETYPE.ALT_START:LF(g,t,yF.boxMargin,yF.boxMargin+yF.boxTextMargin,(t=>vF.newLoop(t)));break;case r.db.LINETYPE.ALT_ELSE:LF(g,t,yF.boxMargin+yF.boxTextMargin,yF.boxMargin,(t=>vF.addSectionToLoop(t)));break;case r.db.LINETYPE.ALT_END:e=vF.endLoop(),gF.drawLoop(c,e,"alt",yF),vF.bumpVerticalPos(e.stopy-vF.getVerticalPos()),vF.models.addLoop(e);break;case r.db.LINETYPE.PAR_START:LF(g,t,yF.boxMargin,yF.boxMargin+yF.boxTextMargin,(t=>vF.newLoop(t)));break;case r.db.LINETYPE.PAR_AND:LF(g,t,yF.boxMargin+yF.boxTextMargin,yF.boxMargin,(t=>vF.addSectionToLoop(t)));break;case r.db.LINETYPE.PAR_END:e=vF.endLoop(),gF.drawLoop(c,e,"par",yF),vF.bumpVerticalPos(e.stopy-vF.getVerticalPos()),vF.models.addLoop(e);break;case r.db.LINETYPE.AUTONUMBER:v=t.message.start||v,b=t.message.step||b,t.message.visible?r.db.enableSequenceNumbers():r.db.disableSequenceNumbers();break;case r.db.LINETYPE.CRITICAL_START:LF(g,t,yF.boxMargin,yF.boxMargin+yF.boxTextMargin,(t=>vF.newLoop(t)));break;case r.db.LINETYPE.CRITICAL_OPTION:LF(g,t,yF.boxMargin+yF.boxTextMargin,yF.boxMargin,(t=>vF.addSectionToLoop(t)));break;case r.db.LINETYPE.CRITICAL_END:e=vF.endLoop(),gF.drawLoop(c,e,"critical",yF),vF.bumpVerticalPos(e.stopy-vF.getVerticalPos()),vF.models.addLoop(e);break;case r.db.LINETYPE.BREAK_START:LF(g,t,yF.boxMargin,yF.boxMargin+yF.boxTextMargin,(t=>vF.newLoop(t)));break;case r.db.LINETYPE.BREAK_END:e=vF.endLoop(),gF.drawLoop(c,e,"break",yF),vF.bumpVerticalPos(e.stopy-vF.getVerticalPos()),vF.models.addLoop(e);break;default:try{i=t.msgModel,i.starty=vF.getVerticalPos(),i.sequenceIndex=v,i.sequenceVisible=r.db.showSequenceNumbers();const e=SF(c,i);x.push({messageModel:i,lineStartY:e}),vF.models.addMessage(i)}catch(a){f.error("error while drawing message",a)}}[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT].includes(t.type)&&(v+=b)})),x.forEach((t=>EF(c,t.messageModel,t.lineStartY,r))),yF.mirrorActors&&(vF.bumpVerticalPos(2*yF.boxMargin),MF(c,u,h,vF.getVerticalPos(),yF,d),vF.bumpVerticalPos(yF.boxMargin),ZN(c,vF.getVerticalPos()));const _=CF(c,u,h,l),{bounds:w}=vF.getBounds();f.debug("For line height fix Querying: #"+e+" .actor-line"),fn("#"+e+" .actor-line").attr("y2",w.stopy);let S=w.stopy-w.starty;S<_.maxHeight&&(S=_.maxHeight);let E=S+2*yF.diagramMarginY;yF.mirrorActors&&(E=E-yF.boxMargin+yF.bottomMarginAdj);let M=w.stopx-w.startx;M<_.maxWidth&&(M=_.maxWidth);const C=M+2*yF.diagramMarginX;p&&c.append("text").text(p).attr("x",(w.stopx-w.startx)/2-2*yF.diagramMarginX).attr("y",-25),uv(c,E,C,yF.useMaxWidth);const T=p?40:0;c.attr("viewBox",w.startx-yF.diagramMarginX+" -"+(yF.diagramMarginY+T)+" "+C+" "+(E+T)),f.debug("models:",vF.models)};function RF(t,e,n){const r={};return e.forEach((function(e){if(t[e.to]&&t[e.from]){const i=t[e.to];if(e.placement===n.db.PLACEMENT.LEFTOF&&!i.prevActor||e.placement===n.db.PLACEMENT.RIGHTOF&&!i.nextActor)return;const a=void 0!==e.placement,s=!a,o=a?_F(yF):xF(yF),l=e.wrap?Zg.wrapLabel(e.message,yF.width-2*yF.wrapPadding,o):e.message,c=Zg.calculateTextDimensions(l,o).width+2*yF.wrapPadding;s&&e.from===i.nextActor?r[e.to]=Math.max(r[e.to]||0,c):s&&e.from===i.prevActor?r[e.from]=Math.max(r[e.from]||0,c):s&&e.from===e.to?(r[e.from]=Math.max(r[e.from]||0,c/2),r[e.to]=Math.max(r[e.to]||0,c/2)):e.placement===n.db.PLACEMENT.RIGHTOF?r[e.from]=Math.max(r[e.from]||0,c):e.placement===n.db.PLACEMENT.LEFTOF?r[i.prevActor]=Math.max(r[i.prevActor]||0,c):e.placement===n.db.PLACEMENT.OVER&&(i.prevActor&&(r[i.prevActor]=Math.max(r[i.prevActor]||0,c/2)),i.nextActor&&(r[e.from]=Math.max(r[e.from]||0,c/2)))}})),f.debug("maxMessageWidthPerActor:",r),r}const IF=function(t){let e=0;const n=wF(yF);for(const r in t.links){const t=Zg.calculateTextDimensions(r,n).width+2*yF.wrapPadding+2*yF.boxMargin;e<t&&(e=t)}return e};function DF(t,e){let n=0;Object.keys(t).forEach((e=>{const r=t[e];r.wrap&&(r.description=Zg.wrapLabel(r.description,yF.width-2*yF.wrapPadding,wF(yF)));const i=Zg.calculateTextDimensions(r.description,wF(yF));r.width=r.wrap?yF.width:Math.max(yF.width,i.width+2*yF.wrapPadding),r.height=r.wrap?Math.max(i.height,yF.height):yF.height,n=Math.max(n,r.height)}));for(const r in e){const n=t[r];if(!n)continue;const i=t[n.nextActor];if(!i)continue;const a=e[r]+yF.actorMargin-n.width/2-i.width/2;n.margin=Math.max(a,yF.actorMargin)}return Math.max(n,yF.height)}const BF=function(t,e,n){const r=e[t.from].x,i=e[t.to].x,a=t.wrap&&t.message;let s=Zg.calculateTextDimensions(a?Zg.wrapLabel(t.message,yF.width,_F(yF)):t.message,_F(yF));const o={width:a?yF.width:Math.max(yF.width,s.width+2*yF.noteMargin),height:0,startx:e[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===n.db.PLACEMENT.RIGHTOF?(o.width=a?Math.max(yF.width,s.width):Math.max(e[t.from].width/2+e[t.to].width/2,s.width+2*yF.noteMargin),o.startx=r+(e[t.from].width+yF.actorMargin)/2):t.placement===n.db.PLACEMENT.LEFTOF?(o.width=Math.max(a?yF.width:e[t.from].width/2+e[t.to].width/2,s.width+2*yF.noteMargin),o.startx=r-o.width+(e[t.from].width-yF.actorMargin)/2):t.to===t.from?(s=Zg.calculateTextDimensions(a?Zg.wrapLabel(t.message,Math.max(yF.width,e[t.from].width),_F(yF)):t.message,_F(yF)),o.width=a?Math.max(yF.width,e[t.from].width):Math.max(e[t.from].width,yF.width,s.width+2*yF.noteMargin),o.startx=r+(e[t.from].width-o.width)/2):(o.width=Math.abs(r+e[t.from].width/2-(i+e[t.to].width/2))+yF.actorMargin,o.startx=r<i?r+e[t.from].width/2-yF.actorMargin/2:i+e[t.to].width/2-yF.actorMargin/2),a&&(o.message=Zg.wrapLabel(t.message,o.width-2*yF.wrapPadding,_F(yF))),f.debug(`NM:[${o.startx},${o.stopx},${o.starty},${o.stopy}:${o.width},${o.height}=${t.message}]`),o},OF=function(t,e,n){let r=!1;if([n.db.LINETYPE.SOLID_OPEN,n.db.LINETYPE.DOTTED_OPEN,n.db.LINETYPE.SOLID,n.db.LINETYPE.DOTTED,n.db.LINETYPE.SOLID_CROSS,n.db.LINETYPE.DOTTED_CROSS,n.db.LINETYPE.SOLID_POINT,n.db.LINETYPE.DOTTED_POINT].includes(t.type)&&(r=!0),!r)return{};const i=kF(t.from,e),a=kF(t.to,e),s=i[0]<=a[0]?1:0,o=i[0]<a[0]?0:1,l=[...i,...a],c=Math.abs(a[o]-i[s]);t.wrap&&t.message&&(t.message=Zg.wrapLabel(t.message,Math.max(c+2*yF.wrapPadding,yF.width),xF(yF)));const u=Zg.calculateTextDimensions(t.message,xF(yF));return{width:Math.max(t.wrap?0:u.width+2*yF.wrapPadding,c+2*yF.wrapPadding,yF.width),height:0,startx:i[s],stopx:a[o],starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,l),toBounds:Math.max.apply(null,l)}},NF=function(t,e,n,r){const i={},a=[];let s,o,l;return t.forEach((function(t){switch(t.id=Zg.random({length:10}),t.type){case r.db.LINETYPE.LOOP_START:case r.db.LINETYPE.ALT_START:case r.db.LINETYPE.OPT_START:case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.CRITICAL_START:case r.db.LINETYPE.BREAK_START:a.push({id:t.id,msg:t.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case r.db.LINETYPE.ALT_ELSE:case r.db.LINETYPE.PAR_AND:case r.db.LINETYPE.CRITICAL_OPTION:t.message&&(s=a.pop(),i[s.id]=s,i[t.id]=s,a.push(s));break;case r.db.LINETYPE.LOOP_END:case r.db.LINETYPE.ALT_END:case r.db.LINETYPE.OPT_END:case r.db.LINETYPE.PAR_END:case r.db.LINETYPE.CRITICAL_END:case r.db.LINETYPE.BREAK_END:s=a.pop(),i[s.id]=s;break;case r.db.LINETYPE.ACTIVE_START:{const n=e[t.from?t.from.actor:t.to.actor],r=AF(t.from?t.from.actor:t.to.actor).length,i=n.x+n.width/2+(r-1)*yF.activationWidth/2,a={startx:i,stopx:i+yF.activationWidth,actor:t.from.actor,enabled:!0};vF.activations.push(a)}break;case r.db.LINETYPE.ACTIVE_END:{const e=vF.activations.map((t=>t.actor)).lastIndexOf(t.from.actor);delete vF.activations.splice(e,1)[0]}}void 0!==t.placement?(o=BF(t,e,r),t.noteModel=o,a.forEach((t=>{s=t,s.from=Math.min(s.from,o.startx),s.to=Math.max(s.to,o.startx+o.width),s.width=Math.max(s.width,Math.abs(s.from-s.to))-yF.labelBoxWidth}))):(l=OF(t,e,r),t.msgModel=l,l.startx&&l.stopx&&a.length>0&&a.forEach((n=>{if(s=n,l.startx===l.stopx){const n=e[t.from],r=e[t.to];s.from=Math.min(n.x-l.width/2,n.x-n.width/2,s.from),s.to=Math.max(r.x+l.width/2,r.x+n.width/2,s.to),s.width=Math.max(s.width,Math.abs(s.to-s.from))-yF.labelBoxWidth}else s.from=Math.min(l.startx,s.from),s.to=Math.max(l.stopx,s.to),s.width=Math.max(s.width,l.width)-yF.labelBoxWidth})))})),vF.activations=[],f.debug("Loop type widths:",i),i},FF={bounds:vF,drawActors:MF,drawActorsPopup:CF,setConf:TF,draw:PF};var zF=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,2],n=[1,3],r=[1,5],i=[1,7],a=[2,5],s=[1,15],o=[1,17],l=[1,21],c=[1,22],u=[1,23],h=[1,24],d=[1,37],f=[1,25],p=[1,26],m=[1,27],g=[1,28],y=[1,29],v=[1,32],b=[1,33],x=[1,34],_=[1,35],w=[1,36],S=[1,39],E=[1,40],M=[1,41],C=[1,42],T=[1,38],A=[1,45],k=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],L=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],P=[1,4,5,7,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],R=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],I={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,classDefStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"--\x3e":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,class:42,CLASSENTITY_IDS:43,STYLECLASS:44,openDirective:45,typeDirective:46,closeDirective:47,":":48,argDirective:49,direction_tb:50,direction_bt:51,direction_rl:52,direction_lr:53,eol:54,";":55,EDGE_STATE:56,STYLE_SEPARATOR:57,left_of:58,right_of:59,open_directive:60,type_directive:61,arg_directive:62,close_directive:63,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",14:"DESCR",15:"--\x3e",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"class",43:"CLASSENTITY_IDS",44:"STYLECLASS",48:":",50:"direction_tb",51:"direction_bt",52:"direction_rl",53:"direction_lr",55:";",56:"EDGE_STATE",57:"STYLE_SEPARATOR",58:"left_of",59:"right_of",60:"open_directive",61:"type_directive",62:"arg_directive",63:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[11,3],[11,3],[12,3],[6,3],[6,5],[32,1],[32,1],[32,1],[32,1],[54,1],[54,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1],[45,1],[46,1],[49,1],[47,1]],performAction:function(t,e,n,r,i,a,s){var o=a.length-1;switch(i){case 4:return r.setRootDoc(a[o]),a[o];case 5:this.$=[];break;case 6:"nl"!=a[o]&&(a[o-1].push(a[o]),this.$=a[o-1]);break;case 7:case 8:case 12:this.$=a[o];break;case 9:this.$="nl";break;case 13:const t=a[o-1];t.description=r.trimColon(a[o]),this.$=t;break;case 14:this.$={stmt:"relation",state1:a[o-2],state2:a[o]};break;case 15:const e=r.trimColon(a[o]);this.$={stmt:"relation",state1:a[o-3],state2:a[o-1],description:e};break;case 19:this.$={stmt:"state",id:a[o-3],type:"default",description:"",doc:a[o-1]};break;case 20:var l=a[o],c=a[o-2].trim();if(a[o].match(":")){var u=a[o].split(":");l=u[0],c=[c,u[1]]}this.$={stmt:"state",id:l,type:"default",description:c};break;case 21:this.$={stmt:"state",id:a[o-3],type:"default",description:a[o-5],doc:a[o-1]};break;case 22:this.$={stmt:"state",id:a[o],type:"fork"};break;case 23:this.$={stmt:"state",id:a[o],type:"join"};break;case 24:this.$={stmt:"state",id:a[o],type:"choice"};break;case 25:this.$={stmt:"state",id:r.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:a[o-1].trim(),note:{position:a[o-2].trim(),text:a[o].trim()}};break;case 30:this.$=a[o].trim(),r.setAccTitle(this.$);break;case 31:case 32:this.$=a[o].trim(),r.setAccDescription(this.$);break;case 33:case 34:this.$={stmt:"classDef",id:a[o-1].trim(),classes:a[o].trim()};break;case 35:this.$={stmt:"applyClass",id:a[o-1].trim(),styleClass:a[o].trim()};break;case 38:r.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:r.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:r.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:r.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:a[o].trim(),type:"default",description:""};break;case 46:case 47:this.$={stmt:"state",id:a[o-2].trim(),classes:[a[o].trim()],type:"default",description:""};break;case 50:r.parseDirective("%%{","open_directive");break;case 51:r.parseDirective(a[o],"type_directive");break;case 52:a[o]=a[o].trim().replace(/'/g,'"'),r.parseDirective(a[o],"arg_directive");break;case 53:r.parseDirective("}%%","close_directive","state")}},table:[{3:1,4:e,5:n,6:4,7:r,45:6,60:i},{1:[3]},{3:8,4:e,5:n,6:4,7:r,45:6,60:i},{3:9,4:e,5:n,6:4,7:r,45:6,60:i},{3:10,4:e,5:n,6:4,7:r,45:6,60:i},t([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],a,{8:11}),{46:12,61:[1,13]},{61:[2,50]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:s,5:o,6:30,9:14,10:16,11:18,12:19,13:20,16:l,17:c,19:u,22:h,24:d,25:f,26:p,27:m,28:g,29:y,32:31,33:v,35:b,37:x,38:_,42:w,45:6,50:S,51:E,52:M,53:C,56:T,60:i},{47:43,48:[1,44],63:A},t([48,63],[2,51]),t(k,[2,6]),{6:30,10:46,11:18,12:19,13:20,16:l,17:c,19:u,22:h,24:d,25:f,26:p,27:m,28:g,29:y,32:31,33:v,35:b,37:x,38:_,42:w,45:6,50:S,51:E,52:M,53:C,56:T,60:i},t(k,[2,8]),t(k,[2,9]),t(k,[2,10]),t(k,[2,11]),t(k,[2,12],{14:[1,47],15:[1,48]}),t(k,[2,16]),{18:[1,49]},t(k,[2,18],{20:[1,50]}),{23:[1,51]},t(k,[2,22]),t(k,[2,23]),t(k,[2,24]),t(k,[2,25]),{30:52,31:[1,53],58:[1,54],59:[1,55]},t(k,[2,28]),t(k,[2,29]),{34:[1,56]},{36:[1,57]},t(k,[2,32]),{39:[1,58],41:[1,59]},{43:[1,60]},t(L,[2,44],{57:[1,61]}),t(L,[2,45],{57:[1,62]}),t(k,[2,38]),t(k,[2,39]),t(k,[2,40]),t(k,[2,41]),t(P,[2,36]),{49:63,62:[1,64]},t(P,[2,53]),t(k,[2,7]),t(k,[2,13]),{13:65,24:d,56:T},t(k,[2,17]),t(R,a,{8:66}),{24:[1,67]},{24:[1,68]},{23:[1,69]},{24:[2,48]},{24:[2,49]},t(k,[2,30]),t(k,[2,31]),{40:[1,70]},{40:[1,71]},{44:[1,72]},{24:[1,73]},{24:[1,74]},{47:75,63:A},{63:[2,52]},t(k,[2,14],{14:[1,76]}),{4:s,5:o,6:30,9:14,10:16,11:18,12:19,13:20,16:l,17:c,19:u,21:[1,77],22:h,24:d,25:f,26:p,27:m,28:g,29:y,32:31,33:v,35:b,37:x,38:_,42:w,45:6,50:S,51:E,52:M,53:C,56:T,60:i},t(k,[2,20],{20:[1,78]}),{31:[1,79]},{24:[1,80]},t(k,[2,33]),t(k,[2,34]),t(k,[2,35]),t(L,[2,46]),t(L,[2,47]),t(P,[2,37]),t(k,[2,15]),t(k,[2,19]),t(R,a,{8:81}),t(k,[2,26]),t(k,[2,27]),{4:s,5:o,6:30,9:14,10:16,11:18,12:19,13:20,16:l,17:c,19:u,21:[1,82],22:h,24:d,25:f,26:p,27:m,28:g,29:y,32:31,33:v,35:b,37:x,38:_,42:w,45:6,50:S,51:E,52:M,53:C,56:T,60:i},t(k,[2,21])],defaultActions:{7:[2,50],8:[2,1],9:[2,2],10:[2,3],54:[2,48],55:[2,49],64:[2,52]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],a=[],s=this.table,o="",l=0,c=0,u=2,h=1,d=a.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,typeof f.yylloc>"u"&&(f.yylloc={});var g=f.yylloc;a.push(g);var y=f.options&&f.options.ranges;function v(){var t;return"number"!=typeof(t=r.pop()||f.lex()||h)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,M,C,T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:((null===b||typeof b>"u")&&(b=v()),_=s[x]&&s[x][b]),typeof _>"u"||!_.length||!_[0]){var A="";for(S in C=[],s[x])this.terminals_[S]&&S>u&&C.push("'"+this.terminals_[S]+"'");A=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(b==h?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(A,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(f.yytext),a.push(f.yylloc),n.push(_[1]),b=null,c=f.yyleng,o=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(E=this.productions_[_[1]][1],T.$=i[i.length-E],T._$={first_line:a[a.length-(E||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(E||1)].first_column,last_column:a[a.length-1].last_column},y&&(T._$.range=[a[a.length-(E||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(T,[o,c,l,p.yy,_[1],i,a].concat(d)))<"u")return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),a=a.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(T.$),a.push(T._$),M=s[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},D={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return 41;case 1:case 44:return 50;case 2:case 45:return 51;case 3:case 46:return 52;case 4:case 47:return 53;case 5:return this.begin("open_directive"),60;case 6:return this.begin("type_directive"),61;case 7:return this.popState(),this.begin("arg_directive"),48;case 8:return this.popState(),this.popState(),63;case 9:return 62;case 10:case 11:case 13:case 14:case 15:case 16:case 56:case 58:case 64:break;case 12:case 79:return 5;case 17:case 34:return this.pushState("SCALE"),17;case 18:case 35:return 18;case 19:case 25:case 36:case 51:case 54:this.popState();break;case 20:return this.begin("acc_title"),33;case 21:return this.popState(),"acc_title_value";case 22:return this.begin("acc_descr"),35;case 23:return this.popState(),"acc_descr_value";case 24:this.begin("acc_descr_multiline");break;case 26:return"acc_descr_multiline_value";case 27:return this.pushState("CLASSDEF"),38;case 28:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 29:return this.popState(),this.pushState("CLASSDEFID"),39;case 30:return this.popState(),40;case 31:return this.pushState("CLASS"),42;case 32:return this.popState(),this.pushState("CLASS_STYLE"),43;case 33:return this.popState(),44;case 37:this.pushState("STATE");break;case 38:case 41:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),25;case 39:case 42:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),26;case 40:case 43:return this.popState(),e.yytext=e.yytext.slice(0,-10).trim(),27;case 48:this.begin("STATE_STRING");break;case 49:return this.popState(),this.pushState("STATE_ID"),"AS";case 50:case 66:return this.popState(),"ID";case 52:return"STATE_DESCR";case 53:return 19;case 55:return this.popState(),this.pushState("struct"),20;case 57:return this.popState(),21;case 59:return this.begin("NOTE"),29;case 60:return this.popState(),this.pushState("NOTE_ID"),58;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:this.popState(),this.pushState("FLOATING_NOTE");break;case 63:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 65:return"NOTE_TEXT";case 67:return this.popState(),this.pushState("NOTE_TEXT"),24;case 68:return this.popState(),e.yytext=e.yytext.substr(2).trim(),31;case 69:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),31;case 70:case 71:return 7;case 72:return 16;case 73:return 56;case 74:return 24;case 75:return e.yytext=e.yytext.trim(),14;case 76:return 15;case 77:return 28;case 78:return 57;case 80:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[14,15],inclusive:!1},close_directive:{rules:[14,15],inclusive:!1},arg_directive:{rules:[8,9,14,15],inclusive:!1},type_directive:{rules:[7,8,14,15],inclusive:!1},open_directive:{rules:[6,14,15],inclusive:!1},struct:{rules:[14,15,27,31,37,44,45,46,47,56,57,58,59,73,74,75,76,77],inclusive:!1},FLOATING_NOTE_ID:{rules:[66],inclusive:!1},FLOATING_NOTE:{rules:[63,64,65],inclusive:!1},NOTE_TEXT:{rules:[68,69],inclusive:!1},NOTE_ID:{rules:[67],inclusive:!1},NOTE:{rules:[60,61,62],inclusive:!1},CLASS_STYLE:{rules:[33],inclusive:!1},CLASS:{rules:[32],inclusive:!1},CLASSDEFID:{rules:[30],inclusive:!1},CLASSDEF:{rules:[28,29],inclusive:!1},acc_descr_multiline:{rules:[25,26],inclusive:!1},acc_descr:{rules:[23],inclusive:!1},acc_title:{rules:[21],inclusive:!1},SCALE:{rules:[18,19,35,36],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[50],inclusive:!1},STATE_STRING:{rules:[51,52],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[14,15,38,39,40,41,42,43,48,49,53,54,55],inclusive:!1},ID:{rules:[14,15],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,10,11,12,13,15,16,17,20,22,24,27,31,34,37,55,59,70,71,72,73,74,75,76,78,79,80],inclusive:!0}}};function B(){this.yy={}}return I.lexer=D,B.prototype=I,I.Parser=B,new B}();zF.parser=zF;const UF=zF,GF=(t,e)=>{var n;return"dagre-wrapper"!==(null==(n=null==e?void 0:e.state)?void 0:n.defaultRenderer)&&null!==t.match(/^\s*stateDiagram/)},HF=(t,e)=>{var n;return!!(null!==t.match(/^\s*stateDiagram-v2/)||t.match(/^\s*stateDiagram/)&&"dagre-wrapper"===(null==(n=null==e?void 0:e.state)?void 0:n.defaultRenderer))},jF="LR",VF="TB",WF="state",$F="relation",YF="classDef",qF="applyClass",XF="default",JF="divider",ZF="[*]",KF="start",QF=ZF,tz="end",ez="color",nz="fill",rz="bgFill",iz=",";function az(){return{}}let sz=jF,oz=[],lz=az();const cz=()=>({relations:[],states:{},documents:{}});let uz={root:cz()},hz=uz.root,dz=0,fz=0;const pz=t=>JSON.parse(JSON.stringify(t)),mz=(t,e,n)=>{if(e.stmt===$F)mz(t,e.state1,!0),mz(t,e.state2,!1);else if(e.stmt===WF&&"[*]"===e.id&&(e.id=n?t.id+"_start":t.id+"_end",e.start=n),e.doc){const t=[];let n,r=[];for(n=0;n<e.doc.length;n++)if(e.doc[n].type===JF){const i=pz(e.doc[n]);i.doc=pz(r),t.push(i),r=[]}else r.push(e.doc[n]);if(t.length>0&&r.length>0){const n={stmt:WF,id:Og(),type:"divider",doc:pz(r)};t.push(pz(n)),e.doc=t}e.doc.forEach((t=>mz(e,t,!0)))}},gz=t=>{let e;e=t.doc?t.doc:t,f.info(e),vz(!0),f.info("Extract",e),e.forEach((t=>{switch(t.stmt){case WF:yz(t.id,t.type,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles);break;case $F:Mz(t.state1,t.state2,t.description);break;case YF:Tz(t.id,t.classes);break;case qF:Az(t.id,t.styleClass)}}))},yz=function(t,e=XF,n=null,r=null,i=null,a=null,s=null,o=null){void 0===hz.states[t]?(f.info("Adding state ",t,r),hz.states[t]={id:t,descriptions:[],type:e,doc:n,note:i,classes:[],styles:[],textStyles:[]}):(hz.states[t].doc||(hz.states[t].doc=n),hz.states[t].type||(hz.states[t].type=e)),r&&(f.info("Setting state description",t,r),"string"==typeof r&&Cz(t,r.trim()),"object"==typeof r&&r.forEach((e=>Cz(t,e.trim())))),i&&(hz.states[t].note=i,hz.states[t].note.text=Oh.sanitizeText(hz.states[t].note.text,tv())),a&&(f.info("Setting state classes",t,a),("string"==typeof a?[a]:a).forEach((e=>Az(t,e.trim())))),s&&(f.info("Setting state styles",t,s),("string"==typeof s?[s]:s).forEach((e=>kz(t,e.trim())))),o&&(f.info("Setting state styles",t,s),("string"==typeof o?[o]:o).forEach((e=>Lz(t,e.trim()))))},vz=function(t){uz={root:cz()},hz=uz.root,dz=0,lz=az(),t||Hv()},bz=function(t){return hz.states[t]};function xz(t=""){let e=t;return t===ZF&&(dz++,e=`${KF}${dz}`),e}function _z(t="",e=XF){return t===ZF?KF:e}function wz(t=""){let e=t;return t===QF&&(dz++,e=`${tz}${dz}`),e}function Sz(t="",e=XF){return t===QF?tz:e}function Ez(t,e,n){let r=xz(t.id),i=_z(t.id,t.type),a=xz(e.id),s=_z(e.id,e.type);yz(r,i,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),yz(a,s,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles),hz.relations.push({id1:r,id2:a,relationTitle:Oh.sanitizeText(n,tv())})}const Mz=function(t,e,n){if("object"==typeof t)Ez(t,e,n);else{const r=xz(t),i=_z(t),a=wz(e),s=Sz(e);yz(r,i),yz(a,s),hz.relations.push({id1:r,id2:a,title:Oh.sanitizeText(n,tv())})}},Cz=function(t,e){const n=hz.states[t],r=e.startsWith(":")?e.replace(":","").trim():e;n.descriptions.push(Oh.sanitizeText(r,tv()))},Tz=function(t,e=""){void 0===lz[t]&&(lz[t]={id:t,styles:[],textStyles:[]});const n=lz[t];null!=e&&e.split(iz).forEach((t=>{const e=t.replace(/([^;]*);/,"$1").trim();if(t.match(ez)){const t=e.replace(nz,rz).replace(ez,nz);n.textStyles.push(t)}n.styles.push(e)}))},Az=function(t,e){t.split(",").forEach((function(t){let n=bz(t);if(void 0===n){const e=t.trim();yz(e),n=bz(e)}n.classes.push(e)}))},kz=function(t,e){const n=bz(t);void 0!==n&&n.textStyles.push(e)},Lz=function(t,e){const n=bz(t);void 0!==n&&n.textStyles.push(e)},Pz={parseDirective:function(t,e,n){iH.parseDirective(this,t,e,n)},getConfig:()=>tv().state,addState:yz,clear:vz,getState:bz,getStates:function(){return hz.states},getRelations:function(){return hz.relations},getClasses:function(){return lz},getDirection:()=>sz,addRelation:Mz,getDividerId:()=>(fz++,"divider-id-"+fz),setDirection:t=>{sz=t},cleanupLabel:function(t){return":"===t.substring(0,1)?t.substr(2).trim():t.trim()},lineType:{LINE:0,DOTTED_LINE:1},relationType:{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},logDocuments:function(){f.info("Documents = ",uz)},getRootDoc:()=>oz,setRootDoc:t=>{f.info("Setting root doc",t),oz=t},getRootDocV2:()=>(mz({id:"root"},{id:"root",doc:oz},!0),{id:"root",doc:oz}),extract:gz,trimColon:t=>t&&":"===t[0]?t.substr(1).trim():t.trim(),getAccTitle:Vv,setAccTitle:jv,getAccDescription:$v,setAccDescription:Wv,addStyleClass:Tz,setCssClass:Az,addDescription:Cz,setDiagramTitle:Yv,getDiagramTitle:qv},Rz={},Iz=()=>Object.keys(Rz),Dz={get:t=>Rz[t],set:(t,e)=>{Rz[t]=e},keys:Iz,size:()=>Iz().length},Bz=t=>t.append("circle").attr("class","start-state").attr("r",tv().state.sizeUnit).attr("cx",tv().state.padding+tv().state.sizeUnit).attr("cy",tv().state.padding+tv().state.sizeUnit),Oz=t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",tv().state.textHeight).attr("class","divider").attr("x2",2*tv().state.textHeight).attr("y1",0).attr("y2",0),Nz=(t,e)=>{const n=t.append("text").attr("x",2*tv().state.padding).attr("y",tv().state.textHeight+2*tv().state.padding).attr("font-size",tv().state.fontSize).attr("class","state-title").text(e.id),r=n.node().getBBox();return t.insert("rect",":first-child").attr("x",tv().state.padding).attr("y",tv().state.padding).attr("width",r.width+2*tv().state.padding).attr("height",r.height+2*tv().state.padding).attr("rx",tv().state.radius),n},Fz=(t,e)=>{const n=function(t,e,n){const r=t.append("tspan").attr("x",2*tv().state.padding).text(e);n||r.attr("dy",tv().state.textHeight)},r=t.append("text").attr("x",2*tv().state.padding).attr("y",tv().state.textHeight+1.3*tv().state.padding).attr("font-size",tv().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),i=r.height,a=t.append("text").attr("x",tv().state.padding).attr("y",i+.4*tv().state.padding+tv().state.dividerMargin+tv().state.textHeight).attr("class","state-description");let s=!0,o=!0;e.descriptions.forEach((function(t){s||(n(a,t,o),o=!1),s=!1}));const l=t.append("line").attr("x1",tv().state.padding).attr("y1",tv().state.padding+i+tv().state.dividerMargin/2).attr("y2",tv().state.padding+i+tv().state.dividerMargin/2).attr("class","descr-divider"),c=a.node().getBBox(),u=Math.max(c.width,r.width);return l.attr("x2",u+3*tv().state.padding),t.insert("rect",":first-child").attr("x",tv().state.padding).attr("y",tv().state.padding).attr("width",u+2*tv().state.padding).attr("height",c.height+i+2*tv().state.padding).attr("rx",tv().state.radius),t},zz=(t,e,n)=>{const r=tv().state.padding,i=2*tv().state.padding,a=t.node().getBBox(),s=a.width,o=a.x,l=t.append("text").attr("x",0).attr("y",tv().state.titleShift).attr("font-size",tv().state.fontSize).attr("class","state-title").text(e.id),c=l.node().getBBox().width+i;let u,h=Math.max(c,s);h===s&&(h+=i);const d=t.node().getBBox();e.doc,u=o-r,c>s&&(u=(s-h)/2+r),Math.abs(o-d.x)<r&&c>s&&(u=o-(c-s)/2);const f=1-tv().state.textHeight;return t.insert("rect",":first-child").attr("x",u).attr("y",f).attr("class",n?"alt-composit":"composit").attr("width",h).attr("height",d.height+tv().state.textHeight+tv().state.titleShift+1).attr("rx","0"),l.attr("x",u+r),c<=s&&l.attr("x",o+(h-i)/2-c/2+r),t.insert("rect",":first-child").attr("x",u).attr("y",tv().state.titleShift-tv().state.textHeight-tv().state.padding).attr("width",h).attr("height",3*tv().state.textHeight).attr("rx",tv().state.radius),t.insert("rect",":first-child").attr("x",u).attr("y",tv().state.titleShift-tv().state.textHeight-tv().state.padding).attr("width",h).attr("height",d.height+3+2*tv().state.textHeight).attr("rx",tv().state.radius),t},Uz=t=>(t.append("circle").attr("class","end-state-outer").attr("r",tv().state.sizeUnit+tv().state.miniPadding).attr("cx",tv().state.padding+tv().state.sizeUnit+tv().state.miniPadding).attr("cy",tv().state.padding+tv().state.sizeUnit+tv().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",tv().state.sizeUnit).attr("cx",tv().state.padding+tv().state.sizeUnit+2).attr("cy",tv().state.padding+tv().state.sizeUnit+2)),Gz=(t,e)=>{let n=tv().state.forkWidth,r=tv().state.forkHeight;if(e.parentId){let t=n;n=r,r=t}return t.append("rect").style("stroke","black").style("fill","black").attr("width",n).attr("height",r).attr("x",tv().state.padding).attr("y",tv().state.padding)},Hz=(t,e,n,r)=>{let i=0;const a=r.append("text");a.style("text-anchor","start"),a.attr("class","noteText");let s=t.replace(/\r\n/g,"<br/>");s=s.replace(/\n/g,"<br/>");const o=s.split(Oh.lineBreakRegex);let l=1.25*tv().state.noteMargin;for(const c of o){const t=c.trim();if(t.length>0){const r=a.append("tspan");r.text(t),0===l&&(l+=r.node().getBBox().height),i+=l,r.attr("x",e+tv().state.noteMargin),r.attr("y",n+i+1.25*tv().state.noteMargin)}}return{textWidth:a.node().getBBox().width,textHeight:i}},jz=(t,e)=>{e.attr("class","state-note");const n=e.append("rect").attr("x",0).attr("y",tv().state.padding),r=e.append("g"),{textWidth:i,textHeight:a}=Hz(t,0,0,r);return n.attr("height",a+2*tv().state.noteMargin),n.attr("width",i+2*tv().state.noteMargin),n},Vz=function(t,e){const n=e.id,r={id:n,label:e.id,width:0,height:0},i=t.append("g").attr("id",n).attr("class","stateGroup");"start"===e.type&&Bz(i),"end"===e.type&&Uz(i),("fork"===e.type||"join"===e.type)&&Gz(i,e),"note"===e.type&&jz(e.note.text,i),"divider"===e.type&&Oz(i),"default"===e.type&&0===e.descriptions.length&&Nz(i,e),"default"===e.type&&e.descriptions.length>0&&Fz(i,e);const a=i.node().getBBox();return r.width=a.width+2*tv().state.padding,r.height=a.height+2*tv().state.padding,Dz.set(n,r),r};let Wz=0;const $z=function(t,e,n){const r=function(t){switch(t){case Pz.relationType.AGGREGATION:return"aggregation";case Pz.relationType.EXTENSION:return"extension";case Pz.relationType.COMPOSITION:return"composition";case Pz.relationType.DEPENDENCY:return"dependency"}};e.points=e.points.filter((t=>!Number.isNaN(t.y)));const i=e.points,a=Hc().x((function(t){return t.x})).y((function(t){return t.y})).curve(Xc),s=t.append("path").attr("d",a(i)).attr("id","edge"+Wz).attr("class","transition");let o="";if(tv().state.arrowMarkerAbsolute&&(o=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,o=o.replace(/\(/g,"\\("),o=o.replace(/\)/g,"\\)")),s.attr("marker-end","url("+o+"#"+r(Pz.relationType.DEPENDENCY)+"End)"),void 0!==n.title){const r=t.append("g").attr("class","stateLabel"),{x:i,y:a}=Zg.calcLabelPosition(e.points),s=Oh.getRows(n.title);let o=0;const l=[];let c=0,u=0;for(let t=0;t<=s.length;t++){const e=r.append("text").attr("text-anchor","middle").text(s[t]).attr("x",i).attr("y",a+o),n=e.node().getBBox();c=Math.max(c,n.width),u=Math.min(u,n.x),f.info(n.x,i,a+o),0===o&&(o=e.node().getBBox().height,f.info("Title height",o,a)),l.push(e)}let h=o*s.length;if(s.length>1){const t=(s.length-1)*o*.5;l.forEach(((e,n)=>e.attr("y",a+n*o-t))),h=o*s.length}const d=r.node().getBBox();r.insert("rect",":first-child").attr("class","box").attr("x",i-c/2-tv().state.padding/2).attr("y",a-h/2-tv().state.padding/2-3.5).attr("width",c+tv().state.padding).attr("height",h+tv().state.padding),f.info(d)}Wz++};let Yz;const qz={},Xz=function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},Jz=function(t,e,n,r){Yz=tv().state;const i=tv().securityLevel;let a;"sandbox"===i&&(a=dn("#i"+e));const s=dn("sandbox"===i?a.nodes()[0].contentDocument.body:"body"),o="sandbox"===i?a.nodes()[0].contentDocument:document;f.debug("Rendering diagram "+t);const l=s.select(`[id='${e}']`);Xz(l),new FA({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel((function(){return{}}));const c=r.db.getRootDoc();Kz(c,l,void 0,!1,s,o,r);const u=Yz.padding,h=l.node().getBBox(),d=h.width+2*u,p=h.height+2*u;uv(l,p,1.75*d,Yz.useMaxWidth),l.attr("viewBox",`${h.x-Yz.padding}  ${h.y-Yz.padding} `+d+" "+p)},Zz=t=>t?t.length*Yz.fontSizeFactor:1,Kz=(t,e,n,r,i,a,s)=>{const o=new FA({compound:!0,multigraph:!0});let l,c=!0;for(l=0;l<t.length;l++)if("relation"===t[l].stmt){c=!1;break}n?o.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:c?1:Yz.edgeLengthFactor,nodeSep:c?1:50,isMultiGraph:!0}):o.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:c?1:Yz.edgeLengthFactor,nodeSep:c?1:50,ranker:"tight-tree",isMultiGraph:!0}),o.setDefaultEdgeLabel((function(){return{}})),s.db.extract(t);const u=s.db.getStates(),h=s.db.getRelations(),d=Object.keys(u);for(const f of d){const t=u[f];let l;if(n&&(t.parentId=n),t.doc){let n=e.append("g").attr("id",t.id).attr("class","stateGroup");l=Kz(t.doc,n,t.id,!r,i,a,s);{n=zz(n,t,r);let e=n.node().getBBox();l.width=e.width,l.height=e.height+Yz.padding/2,qz[t.id]={y:Yz.compositTitleSize}}}else l=Vz(e,t);if(t.note){const n={descriptions:[],id:t.id+"-note",note:t.note,type:"note"},r=Vz(e,n);"left of"===t.note.position?(o.setNode(l.id+"-note",r),o.setNode(l.id,l)):(o.setNode(l.id,l),o.setNode(l.id+"-note",r)),o.setParent(l.id,l.id+"-group"),o.setParent(l.id+"-note",l.id+"-group")}else o.setNode(l.id,l)}f.debug("Count=",o.nodeCount(),o);let p=0;h.forEach((function(t){p++,f.debug("Setting edge",t),o.setEdge(t.id1,t.id2,{relation:t,width:Zz(t.title),height:Yz.labelHeight*Oh.getRows(t.title).length,labelpos:"c"},"id"+p)})),pL(o),f.debug("Graph after layout",o.nodes());const m=e.node();o.nodes().forEach((function(t){void 0!==t&&void 0!==o.node(t)?(f.warn("Node "+t+": "+JSON.stringify(o.node(t))),i.select("#"+m.id+" #"+t).attr("transform","translate("+(o.node(t).x-o.node(t).width/2)+","+(o.node(t).y+(qz[t]?qz[t].y:0)-o.node(t).height/2)+" )"),i.select("#"+m.id+" #"+t).attr("data-x-shift",o.node(t).x-o.node(t).width/2),a.querySelectorAll("#"+m.id+" #"+t+" .divider").forEach((t=>{const e=t.parentElement;let n=0,r=0;e&&(e.parentElement&&(n=e.parentElement.getBBox().width),r=parseInt(e.getAttribute("data-x-shift"),10),Number.isNaN(r)&&(r=0)),t.setAttribute("x1",0-r+8),t.setAttribute("x2",n-r-8)}))):f.debug("No Node "+t+": "+JSON.stringify(o.node(t)))}));let g=m.getBBox();o.edges().forEach((function(t){void 0!==t&&void 0!==o.edge(t)&&(f.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(o.edge(t))),$z(e,o.edge(t),o.edge(t).relation))})),g=m.getBBox();const y={id:n||"root",label:n||"root",width:0,height:0};return y.width=g.width+2*Yz.padding,y.height=g.height+2*Yz.padding,f.debug("Doc rendered",y,o),y},Qz={setConf:function(){},draw:Jz},tU="rect",eU="rectWithTitle",nU="start",rU="end",iU="divider",aU="roundedWithTitle",sU="note",oU="noteGroup",lU="statediagram",cU=`${lU}-state`,uU="transition",hU=`${uU} note-edge`,dU=`${lU}-note`,fU=`${lU}-cluster`,pU=`${lU}-cluster-alt`,mU="parent",gU="note",yU="state",vU="----",bU=`${vU}${gU}`,xU=`${vU}${mU}`,_U="fill:none",wU="fill: #333",SU="c",EU="text",MU="normal";let CU={},TU=0;function AU(t){return null==t?"":t.classes?t.classes.join(" "):""}function kU(t="",e=0,n="",r=vU){const i=null!==n&&n.length>0?`${r}${n}`:"";return`${yU}-${t}${i}-${e}`}const LU=(t,e,n,r,i,a)=>{const s=n.id,o=AU(r[s]);if("root"!==s){let e=tU;!0===n.start&&(e=nU),!1===n.start&&(e=rU),n.type!==XF&&(e=n.type),CU[s]||(CU[s]={id:s,shape:e,description:Oh.sanitizeText(s,tv()),classes:`${o} ${cU}`});const r=CU[s];n.description&&(Array.isArray(r.description)?(r.shape=eU,r.description.push(n.description)):r.description.length>0?(r.shape=eU,r.description===s?r.description=[n.description]:r.description=[r.description,n.description]):(r.shape=tU,r.description=n.description),r.description=Oh.sanitizeTextOrArray(r.description,tv())),1===r.description.length&&r.shape===eU&&(r.shape=tU),!r.type&&n.doc&&(f.info("Setting cluster for ",s,RU(n)),r.type="group",r.dir=RU(n),r.shape=n.type===JF?iU:aU,r.classes=r.classes+" "+fU+" "+(a?pU:""));const i={labelStyle:"",shape:r.shape,labelText:r.description,classes:r.classes,style:"",id:s,dir:r.dir,domId:kU(s,TU),type:r.type,padding:15};if(n.note){const e={labelStyle:"",shape:sU,labelText:n.note.text,classes:dU,style:"",id:s+bU+"-"+TU,domId:kU(s,TU,gU),type:r.type,padding:15},a={labelStyle:"",shape:oU,labelText:n.note.text,classes:r.classes,style:"",id:s+xU,domId:kU(s,TU,mU),type:"group",padding:0};TU++;const o=s+xU;t.setNode(o,a),t.setNode(e.id,e),t.setNode(s,i),t.setParent(s,o),t.setParent(e.id,o);let l=s,c=e.id;"left of"===n.note.position&&(l=e.id,c=s),t.setEdge(l,c,{arrowhead:"none",arrowType:"",style:_U,labelStyle:"",classes:hU,arrowheadStyle:wU,labelpos:SU,labelType:EU,thickness:MU})}else t.setNode(s,i)}e&&"root"!==e.id&&(f.trace("Setting node ",s," to be child of its parent ",e.id),t.setParent(s,e.id)),n.doc&&(f.trace("Adding nodes children "),PU(t,n,n.doc,r,i,!a))},PU=(t,e,n,r,i,a)=>{f.trace("items",n),n.forEach((n=>{switch(n.stmt){case WF:case XF:LU(t,e,n,r,i,a);break;case $F:{LU(t,e,n.state1,r,i,a),LU(t,e,n.state2,r,i,a);const s={id:"edge"+TU,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:_U,labelStyle:"",label:Oh.sanitizeText(n.description,tv()),arrowheadStyle:wU,labelpos:SU,labelType:EU,thickness:MU,classes:uU};t.setEdge(n.state1.id,n.state2.id,s,TU),TU++}}}))},RU=(t,e=VF)=>{let n=e;if(t.doc)for(let r=0;r<t.doc.length;r++){const e=t.doc[r];"dir"===e.stmt&&(n=e.value)}return n},IU={setConf:function(t){const e=Object.keys(t);for(const n of e)t[n]},getClasses:function(t,e){f.trace("Extracting classes"),e.db.clear();try{return e.parser.parse(t),e.db.extract(e.db.getRootDocV2()),e.db.getClasses()}catch(n){return n}},draw:function(t,e,n,r){f.info("Drawing state diagram (v2)",e),CU={};let i=r.db.getDirection();void 0===i&&(i=jF);const{securityLevel:a,state:s}=tv(),o=s.nodeSpacing||50,l=s.rankSpacing||50;f.info(r.db.getRootDocV2()),r.db.extract(r.db.getRootDocV2()),f.info(r.db.getRootDocV2());const c=r.db.getStates(),u=new FA({multigraph:!0,compound:!0}).setGraph({rankdir:RU(r.db.getRootDocV2()),nodesep:o,ranksep:l,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));let h;LU(u,void 0,r.db.getRootDocV2(),c,r.db,!0),"sandbox"===a&&(h=dn("#i"+e));const d=dn("sandbox"===a?h.nodes()[0].contentDocument.body:"body"),p=d.select(`[id="${e}"]`),m=d.select("#"+e+" g");IR(m,u,["barb"],lU,e);const g=8;Zg.insertTitle(p,"statediagramTitleText",s.titleTopMargin,r.db.getDiagramTitle());const y=p.node().getBBox(),v=y.width+2*g,b=y.height+2*g;p.attr("class",lU);const x=p.node().getBBox();uv(p,b,v,s.useMaxWidth);const _=`${x.x-g} ${x.y-g} ${v} ${b}`;f.debug(`viewBox ${_}`),p.attr("viewBox",_);const w=document.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const f of w){const t=f.getBBox(),e=document.createElementNS("http://www.w3.org/2000/svg",tU);e.setAttribute("rx",0),e.setAttribute("ry",0),e.setAttribute("width",t.width),e.setAttribute("height",t.height),f.insertBefore(e,f.firstChild)}}};var DU=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,2],n=[1,5],r=[6,9,11,17,18,20,22,23,24,26],i=[1,15],a=[1,16],s=[1,17],o=[1,18],l=[1,19],c=[1,20],u=[1,24],h=[4,6,9,11,17,18,20,22,23,24,26],d={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,e,n,r,i,a,s){var o=a.length-1;switch(i){case 1:return a[o-1];case 3:case 7:case 8:this.$=[];break;case 4:a[o-1].push(a[o]),this.$=a[o-1];break;case 5:case 6:this.$=a[o];break;case 11:r.setDiagramTitle(a[o].substr(6)),this.$=a[o].substr(6);break;case 12:this.$=a[o].trim(),r.setAccTitle(this.$);break;case 13:case 14:this.$=a[o].trim(),r.setAccDescription(this.$);break;case 15:r.addSection(a[o].substr(8)),this.$=a[o].substr(8);break;case 16:r.addTask(a[o-1],a[o]),this.$="task";break;case 18:r.parseDirective("%%{","open_directive");break;case 19:r.parseDirective(a[o],"type_directive");break;case 20:a[o]=a[o].trim().replace(/'/g,'"'),r.parseDirective(a[o],"arg_directive");break;case 21:r.parseDirective("}%%","close_directive","journey")}},table:[{3:1,4:e,7:3,12:4,26:n},{1:[3]},t(r,[2,3],{5:6}),{3:7,4:e,7:3,12:4,26:n},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:i,18:a,20:s,22:o,23:l,24:c,26:n},{1:[2,2]},{14:22,15:[1,23],29:u},t([15,29],[2,19]),t(r,[2,8],{1:[2,1]}),t(r,[2,4]),{7:21,10:25,12:4,17:i,18:a,20:s,22:o,23:l,24:c,26:n},t(r,[2,6]),t(r,[2,7]),t(r,[2,11]),{19:[1,26]},{21:[1,27]},t(r,[2,14]),t(r,[2,15]),{25:[1,28]},t(r,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},t(r,[2,5]),t(r,[2,12]),t(r,[2,13]),t(r,[2,16]),t(h,[2,9]),{14:32,29:u},{29:[2,20]},{11:[1,33]},t(h,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],a=[],s=this.table,o="",l=0,c=0,u=2,h=1,d=a.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,typeof f.yylloc>"u"&&(f.yylloc={});var g=f.yylloc;a.push(g);var y=f.options&&f.options.ranges;function v(){var t;return"number"!=typeof(t=r.pop()||f.lex()||h)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,M,C,T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:((null===b||typeof b>"u")&&(b=v()),_=s[x]&&s[x][b]),typeof _>"u"||!_.length||!_[0]){var A="";for(S in C=[],s[x])this.terminals_[S]&&S>u&&C.push("'"+this.terminals_[S]+"'");A=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(b==h?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(A,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(f.yytext),a.push(f.yylloc),n.push(_[1]),b=null,c=f.yyleng,o=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(E=this.productions_[_[1]][1],T.$=i[i.length-E],T._$={first_line:a[a.length-(E||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(E||1)].first_column,last_column:a[a.length-1].last_column},y&&(T._$.range=[a[a.length-(E||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(T,[o,c,l,p.yy,_[1],i,a].concat(d)))<"u")return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),a=a.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(T.$),a.push(T._$),M=s[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},f={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:case 6:case 8:case 9:break;case 7:return 11;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};function p(){this.yy={}}return d.lexer=f,p.prototype=d,d.Parser=p,new p}();DU.parser=DU;const BU=DU,OU=t=>null!==t.match(/^\s*journey/);let NU="";const FU=[],zU=[],UU=[],GU=function(){let t=jU();const e=100;let n=0;for(;!t&&n<e;)t=jU(),n++;return zU.push(...UU),zU},HU=function(){const t=[];return zU.forEach((e=>{e.people&&t.push(...e.people)})),[...new Set(t)].sort()},jU=function(){const t=function(t){return UU[t].processed};let e=!0;for(const[n,r]of UU.entries())t(n),e=e&&r.processed;return e},VU={parseDirective:function(t,e,n){iH.parseDirective(this,t,e,n)},getConfig:()=>tv().journey,clear:function(){FU.length=0,zU.length=0,NU="",UU.length=0,Hv()},setDiagramTitle:Yv,getDiagramTitle:qv,setAccTitle:jv,getAccTitle:Vv,setAccDescription:Wv,getAccDescription:$v,addSection:function(t){NU=t,FU.push(t)},getSections:function(){return FU},getTasks:GU,addTask:function(t,e){const n=e.substr(1).split(":");let r=0,i=[];1===n.length?(r=Number(n[0]),i=[]):(r=Number(n[0]),i=n[1].split(","));const a=i.map((t=>t.trim())),s={section:NU,type:NU,people:a,task:t,score:r};UU.push(s)},addTaskOrg:function(t){const e={section:NU,type:NU,description:t,task:t,classes:[]};zU.push(e)},getActors:function(){return HU()}},WU=function(t,e){const n=t.append("rect");return n.attr("x",e.x),n.attr("y",e.y),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("width",e.width),n.attr("height",e.height),n.attr("rx",e.rx),n.attr("ry",e.ry),void 0!==e.class&&n.attr("class",e.class),n},$U=function(t,e){const n=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),r=t.append("g");function i(t){const n=Oc().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175);t.append("path").attr("class","mouth").attr("d",n).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(t){const n=Oc().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175);t.append("path").attr("class","mouth").attr("d",n).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function s(t){t.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return r.append("circle").attr("cx",e.cx-5).attr("cy",e.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),r.append("circle").attr("cx",e.cx+5).attr("cy",e.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),e.score>3?i(r):e.score<3?a(r):s(r),n},YU=function(t,e){const n=t.append("circle");return n.attr("cx",e.cx),n.attr("cy",e.cy),n.attr("class","actor-"+e.pos),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("r",e.r),void 0!==n.class&&n.attr("class",n.class),void 0!==e.title&&n.append("title").text(e.title),n},qU=function(t,e){const n=e.text.replace(/<br\s*\/?>/gi," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),void 0!==e.class&&r.attr("class",e.class);const i=r.append("tspan");return i.attr("x",e.x+2*e.textMargin),i.text(n),r},XU=function(t,e){function n(t,e,n,r,i){return t+","+e+" "+(t+n)+","+e+" "+(t+n)+","+(e+r-i)+" "+(t+n-1.2*i)+","+(e+r)+" "+t+","+(e+r)}const r=t.append("polygon");r.attr("points",n(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,qU(t,e)},JU=function(t,e,n){const r=t.append("g"),i=eG();i.x=e.x,i.y=e.y,i.fill=e.fill,i.width=n.width,i.height=n.height,i.class="journey-section section-type-"+e.num,i.rx=3,i.ry=3,WU(r,i),nG(n)(e.text,r,i.x,i.y,i.width,i.height,{class:"journey-section section-type-"+e.num},n,e.colour)};let ZU=-1;const KU=function(t,e,n){const r=e.x+n.width/2,i=t.append("g");ZU++;const a=450;i.append("line").attr("id","task"+ZU).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",a).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),$U(i,{cx:r,cy:300+30*(5-e.score),score:e.score});const s=eG();s.x=e.x,s.y=e.y,s.fill=e.fill,s.width=n.width,s.height=n.height,s.class="task task-type-"+e.num,s.rx=3,s.ry=3,WU(i,s);let o=e.x+14;e.people.forEach((t=>{const n=e.actors[t].color,r={cx:o,cy:e.y,r:7,fill:n,stroke:"#000",title:t,pos:e.actors[t].position};YU(i,r),o+=10})),nG(n)(e.task,i,s.x,s.y,s.width,s.height,{class:"task"},n,e.colour)},QU=function(t,e){WU(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},tG=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},eG=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},nG=function(){function t(t,e,n,i,a,s,o,l){r(e.append("text").attr("x",n+a/2).attr("y",i+s/2+5).style("font-color",l).style("text-anchor","middle").text(t),o)}function e(t,e,n,i,a,s,o,l,c){const{taskFontSize:u,taskFontFamily:h}=l,d=t.split(/<br\s*\/?>/gi);for(let f=0;f<d.length;f++){const t=f*u-u*(d.length-1)/2,l=e.append("text").attr("x",n+a/2).attr("y",i).attr("fill",c).style("text-anchor","middle").style("font-size",u).style("font-family",h);l.append("tspan").attr("x",n+a/2).attr("dy",t).text(d[f]),l.attr("y",i+s/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(l,o)}}function n(t,n,i,a,s,o,l,c){const u=n.append("switch"),h=u.append("foreignObject").attr("x",i).attr("y",a).attr("width",s).attr("height",o).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");h.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),e(t,u,i,a,s,o,l,c),r(h,l)}function r(t,e){for(const n in e)n in e&&t.attr(n,e[n])}return function(r){return"fo"===r.textPlacement?n:"old"===r.textPlacement?t:e}}(),rG={drawRect:WU,drawCircle:YU,drawSection:JU,drawText:qU,drawLabel:XU,drawTask:KU,drawBackgroundRect:QU,getTextObj:tG,getNoteRect:eG,initGraphics:function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")}},iG=function(t){Object.keys(t).forEach((function(e){oG[e]=t[e]}))},aG={};function sG(t){const e=tv().journey;let n=60;Object.keys(aG).forEach((r=>{const i=aG[r].color,a={cx:20,cy:n,r:7,fill:i,stroke:"#000",pos:aG[r].position};rG.drawCircle(t,a);const s={x:40,y:n+7,fill:"#666",text:r,textMargin:5|e.boxTextMargin};rG.drawText(t,s),n+=20}))}const oG=tv().journey,lG=oG.leftMargin,cG=function(t,e,n,r){const i=tv().journey;r.db.clear(),r.parser.parse(t+"\n");const a=tv().securityLevel;let s;"sandbox"===a&&(s=dn("#i"+e));const o=dn("sandbox"===a?s.nodes()[0].contentDocument.body:"body");uG.init();const l=o.select("#"+e);rG.initGraphics(l);const c=r.db.getTasks(),u=r.db.getDiagramTitle(),h=r.db.getActors();for(const y in aG)delete aG[y];let d=0;h.forEach((t=>{aG[t]={color:i.actorColours[d%i.actorColours.length],position:d},d++})),sG(l),uG.insert(0,0,lG,50*Object.keys(aG).length),fG(l,c,0);const f=uG.getBounds();u&&l.append("text").text(u).attr("x",lG).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const p=f.stopy-f.starty+2*i.diagramMarginY,m=lG+f.stopx+2*i.diagramMarginX;uv(l,p,m,i.useMaxWidth),l.append("line").attr("x1",lG).attr("y1",4*i.height).attr("x2",m-lG-4).attr("y2",4*i.height).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const g=u?70:0;l.attr("viewBox",`${f.startx} -25 ${m} ${p+g}`),l.attr("preserveAspectRatio","xMinYMin meet"),l.attr("height",p+g+25)},uG={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(t,e,n,r){void 0===t[e]?t[e]=n:t[e]=r(n,t[e])},updateBounds:function(t,e,n,r){const i=tv().journey,a=this;let s=0;function o(o){return function(l){s++;const c=a.sequenceItems.length-s+1;a.updateVal(l,"starty",e-c*i.boxMargin,Math.min),a.updateVal(l,"stopy",r+c*i.boxMargin,Math.max),a.updateVal(uG.data,"startx",t-c*i.boxMargin,Math.min),a.updateVal(uG.data,"stopx",n+c*i.boxMargin,Math.max),"activation"!==o&&(a.updateVal(l,"startx",t-c*i.boxMargin,Math.min),a.updateVal(l,"stopx",n+c*i.boxMargin,Math.max),a.updateVal(uG.data,"starty",e-c*i.boxMargin,Math.min),a.updateVal(uG.data,"stopy",r+c*i.boxMargin,Math.max))}}this.sequenceItems.forEach(o())},insert:function(t,e,n,r){const i=Math.min(t,n),a=Math.max(t,n),s=Math.min(e,r),o=Math.max(e,r);this.updateVal(uG.data,"startx",i,Math.min),this.updateVal(uG.data,"starty",s,Math.min),this.updateVal(uG.data,"stopx",a,Math.max),this.updateVal(uG.data,"stopy",o,Math.max),this.updateBounds(i,s,a,o)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},hG=oG.sectionFills,dG=oG.sectionColours,fG=function(t,e,n){const r=tv().journey;let i="";const a=n+(2*r.height+r.diagramMarginY);let s=0,o="#CCC",l="black",c=0;for(const[u,h]of e.entries()){if(i!==h.section){o=hG[s%hG.length],c=s%hG.length,l=dG[s%dG.length];const e={x:u*r.taskMargin+u*r.width+lG,y:50,text:h.section,fill:o,num:c,colour:l};rG.drawSection(t,e,r),i=h.section,s++}const e=h.people.reduce(((t,e)=>(aG[e]&&(t[e]=aG[e]),t)),{});h.x=u*r.taskMargin+u*r.width+lG,h.y=a,h.width=r.diagramMarginX,h.height=r.diagramMarginY,h.colour=l,h.fill=o,h.num=c,h.actors=e,rG.drawTask(t,h,r),uG.insert(h.x,h.y,h.x+h.width+r.taskMargin,450)}},pG={setConf:iG,draw:cG};let mG={};const gG={setConf:function(t){mG={...mG,...t}},draw:(t,e,n)=>{try{f.debug("Renering svg for syntax error\n");const t=dn("#"+e),r=t.append("g");r.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),r.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),r.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),r.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),r.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),r.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),r.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),r.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+n),t.attr("height",100),t.attr("width",500),t.attr("viewBox","768 0 912 512")}catch(l){f.error("Error while rendering info diagram"),f.error(Jg(l))}}};let yG=!1;const vG=()=>{yG||(yG=!0,Iv("error",{db:{clear:()=>{}},styles:pv,renderer:gG,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},(t=>"error"===t.toLowerCase().trim())),Iv("c4",{parser:Ob,db:ax,renderer:Gx,styles:Sv,init:t=>{Gx.setConf(t.c4)}},Nb),Iv("class",{parser:jx,db:M_,renderer:kP,styles:dv,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,M_.clear()}},Vx),Iv("classDiagram",{parser:jx,db:M_,renderer:UR,styles:dv,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,M_.clear()}},Wx),Iv("er",{parser:HR,db:YR,renderer:mI,styles:fv},jR),Iv("gantt",{parser:OB,db:_O,renderer:EO,styles:gv},NB),Iv("info",{parser:CO,db:kO,renderer:LO,styles:yv},PO),Iv("pie",{parser:IO,db:NO,renderer:GO,styles:vv},DO),Iv("requirement",{parser:jO,db:JO,renderer:hN,styles:bv},VO),Iv("sequence",{parser:fN,db:BN,renderer:FF,styles:xv,init:t=>{if(t.sequence||(t.sequence={}),t.sequence.arrowMarkerAbsolute=t.arrowMarkerAbsolute,"sequenceDiagram"in t)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");BN.setWrap(t.wrap),FF.setConf(t.sequence)}},pN),Iv("state",{parser:UF,db:Pz,renderer:Qz,styles:_v,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Pz.clear()}},GF),Iv("stateDiagram",{parser:UF,db:Pz,renderer:IU,styles:_v,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Pz.clear()}},HF),Iv("journey",{parser:BU,db:VU,renderer:pG,styles:wv,init:t=>{pG.setConf(t.journey),VU.clear()}},OU),Iv("flowchart",{parser:yI,db:dD,renderer:DB,styles:mv,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,LB.setConf(t.flowchart),dD.clear(),dD.setGen("gen-1")}},vI),Iv("flowchart-v2",{parser:yI,db:dD,renderer:DB,styles:mv,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Qy({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),DB.setConf(t.flowchart),dD.clear(),dD.setGen("gen-2")}},bI),Iv("gitGraph",{parser:Ov,db:yb,renderer:Ib,styles:Db},Nv))};class bG{constructor(t,e){var n,r;a(this,"type","graph"),a(this,"parser"),a(this,"renderer"),a(this,"db"),a(this,"detectTypeFailed",!1),this.txt=t;const i=tv();this.txt=t;try{this.type=nm(t,i)}catch(l){this.handleError(l,e),this.type="error",this.detectTypeFailed=!0}const s=Dv(this.type);f.debug("Type "+this.type),this.db=s.db,null==(r=(n=this.db).clear)||r.call(n),this.renderer=s.renderer,this.parser=s.parser;const o=this.parser.parse.bind(this.parser);this.parser.parse=t=>o(Kp(t,this.db)),this.parser.parser.yy=this.db,s.init&&(s.init(i),f.debug("Initialized diagram "+this.type,i)),this.txt+="\n",this.parse(this.txt,e)}parse(t,e){var n,r;if(this.detectTypeFailed)return!1;try{return t+="\n",null==(r=(n=this.db).clear)||r.call(n),this.parser.parse(t),!0}catch(i){this.handleError(i,e)}return!1}handleError(t,e){if(void 0===e)throw t;Xg(t)?e(t.str,t.hash):e(t)}getParser(){return this.parser}getType(){return this.type}}const xG=(t,e)=>{const n=nm(t,tv());try{Dv(n)}catch{const r=im(n);if(!r)throw new Error(`Diagram ${n} not found.`);return r().then((({diagram:r})=>(Iv(n,r,void 0),new bG(t,e))))}return new bG(t,e)},_G=bG;function wG(t,e){eA(e)||t.attr("aria-roledescription",e)}function SG(t,e,n,r){if(void 0!==t.insert){if(!e&&!n)return;if(n){const e="chart-desc-"+r;t.attr("aria-describedby",e),t.insert("desc",":first-child").attr("id",e).text(n)}if(e){const n="chart-title-"+r;t.attr("aria-labelledby",n),t.insert("title",":first-child").attr("id",n).text(e)}}}const EG=["graph","flowchart","flowchart-v2","stateDiagram","stateDiagram-v2"],MG="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",CG="sandbox",TG="loose",AG="http://www.w3.org/2000/svg",kG="http://www.w3.org/1999/xlink",LG="http://www.w3.org/1999/xhtml",PG="100%",RG="100%",IG="border:0;margin:0;",DG="margin:0",BG="allow-top-navigation-by-user-activation allow-popups",OG='The "iframe" tag is not supported by your browser.',NG=["foreignobject"],FG=["dominant-baseline"];function zG(t,e){return vG(),new _G(t,e).parse(t,e)}async function UG(t,e){return vG(),(await xG(t,e)).parse(t,e)}const GG=function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,(function(t){return t.substring(0,t.length-1)})),e=e.replace(/classDef.*:\S*#.*;/g,(function(t){return t.substring(0,t.length-1)})),e=e.replace(/#\w+;/g,(function(t){const e=t.substring(1,t.length-1);return/^\+?\d+$/.test(e)?"\ufb02\xb0\xb0"+e+"\xb6\xdf":"\ufb02\xb0"+e+"\xb6\xdf"})),e},HG=function(t){let e=t;return e=e.replace(/\ufb02\xb0\xb0/g,"&#"),e=e.replace(/\ufb02\xb0/g,"&"),e=e.replace(/\xb6\xdf/g,";"),e},jG=(t,e,n=[])=>`\n.${t} ${e} { ${n.join(" !important; ")} !important; }`,VG=(t,e,n={})=>{var r;let i="";if(void 0!==t.themeCSS&&(i+=`\n${t.themeCSS}`),void 0!==t.fontFamily&&(i+=`\n:root { --mermaid-font-family: ${t.fontFamily}}`),void 0!==t.altFontFamily&&(i+=`\n:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),!eA(n)&&EG.includes(e)){const e=t.htmlLabels||(null==(r=t.flowchart)?void 0:r.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const t in n){const r=n[t];eA(r.styles)||e.forEach((t=>{i+=jG(r.id,t,r.styles)})),eA(r.textStyles)||(i+=jG(r.id,"tspan",r.textStyles))}}return i},WG=(t,e,n,r)=>{const i=VG(t,e,n);return Uy(By(`${r}{${Cv(e,i,t.themeVariables)}}`),Gy)},$G=(t="",e,n)=>{let r=t;return!n&&!e&&(r=r.replace(/marker-end="url\(.*?#/g,'marker-end="url(#')),r=HG(r),r=r.replace(/<br>/g,"<br/>"),r},YG=(t="",e)=>{const n=e?e.viewBox.baseVal.height+"px":RG,r=btoa('<body style="'+DG+'">'+t+"</body>");return`<iframe style="width:${PG};height:${n};${IG}" src="data:text/html;base64,${r}" sandbox="${BG}">\n  ${OG}\n</iframe>`},qG=(t,e,n,r,i)=>{const a=t.append("div");a.attr("id",n),r&&a.attr("style",r);const s=a.append("svg").attr("id",e).attr("width","100%").attr("xmlns",AG);return i&&s.attr("xmlns:xlink",i),s.append("g"),t};function XG(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const JG=(t,e,n,r)=>{var i,a,s;null==(i=t.getElementById(e))||i.remove(),null==(a=t.getElementById(n))||a.remove(),null==(s=t.getElementById(r))||s.remove()},ZG=function(t,e,n,r){var i,a,s,o,l;vG(),rv();const c=Zg.detectInit(e);c&&(Yg(c),nv(c));const u=tv();f.debug(u),e.length>(null!=(i=null==u?void 0:u.maxTextSize)?i:5e4)&&(e=MG),e=e.replace(/\r\n?/g,"\n");const h="#"+t,d="i"+t,p="#"+d,m="d"+t,g="#"+m;let y=dn("body");const v=u.securityLevel===CG,b=u.securityLevel===TG,x=u.fontFamily;if(void 0!==r){if(r&&(r.innerHTML=""),v){const t=XG(dn(r),d);y=dn(t.nodes()[0].contentDocument.body),y.node().style.margin=0}else y=dn(r);qG(y,t,m,`font-family: ${x}`,kG)}else{if(JG(document,t,m,d),v){const t=XG(dn("body"),d);y=dn(t.nodes()[0].contentDocument.body),y.node().style.margin=0}else y=dn("body");qG(y,t,m)}let _,w;e=GG(e);try{if(_=xG(e),"then"in _)throw new Error("Diagram is a promise. Use renderAsync.")}catch(R){_=new _G("error"),w=R}const S=y.select(g).node(),E=_.type,M=S.firstChild,C=M.firstChild,T=EG.includes(E)?_.renderer.getClasses(e,_):{},A=WG(u,E,T,h),k=document.createElement("style");k.innerHTML=A,M.insertBefore(k,C);try{_.renderer.draw(e,t,Hy.version,_)}catch(R){throw gG.draw(e,t,Hy.version),R}rH(E,y.select(`${g} svg`),null==(s=(a=_.db).getAccTitle)?void 0:s.call(a),null==(l=(o=_.db).getAccDescription)?void 0:l.call(o)),y.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",LG);let L=y.select(g).node().innerHTML;if(f.debug("config.arrowMarkerAbsolute",u.arrowMarkerAbsolute),L=$G(L,v,Dh(u.arrowMarkerAbsolute)),v){const t=y.select(g+" svg").node();L=YG(L,t)}else b||(L=Mh.sanitize(L,{ADD_TAGS:NG,ADD_ATTR:FG}));if(void 0!==n)switch(E){case"flowchart":case"flowchart-v2":n(L,dD.bindFunctions);break;case"gantt":n(L,_O.bindFunctions);break;case"class":case"classDiagram":n(L,M_.bindFunctions);break;default:n(L)}else f.debug("CB = undefined!");FN();const P=dn(v?p:g).node();if(P&&"remove"in P&&P.remove(),w)throw w;return L},KG=async function(t,e,n,r){var i,a,s,o,l;vG(),rv();const c=Zg.detectInit(e);c&&(Yg(c),nv(c));const u=tv();f.debug(u),e.length>(null!=(i=null==u?void 0:u.maxTextSize)?i:5e4)&&(e=MG),e=e.replace(/\r\n?/g,"\n");const h="#"+t,d="i"+t,p="#"+d,m="d"+t,g="#"+m;let y=dn("body");const v=u.securityLevel===CG,b=u.securityLevel===TG,x=u.fontFamily;if(void 0!==r){if(r&&(r.innerHTML=""),v){const t=XG(dn(r),d);y=dn(t.nodes()[0].contentDocument.body),y.node().style.margin=0}else y=dn(r);qG(y,t,m,`font-family: ${x}`,kG)}else{if(JG(document,t,m,d),v){const t=XG(dn("body"),d);y=dn(t.nodes()[0].contentDocument.body),y.node().style.margin=0}else y=dn("body");qG(y,t,m)}let _,w;e=GG(e);try{_=await xG(e)}catch(R){_=new _G("error"),w=R}const S=y.select(g).node(),E=_.type,M=S.firstChild,C=M.firstChild,T=EG.includes(E)?_.renderer.getClasses(e,_):{},A=WG(u,E,T,h),k=document.createElement("style");k.innerHTML=A,M.insertBefore(k,C);try{await _.renderer.draw(e,t,Hy.version,_)}catch(R){throw gG.draw(e,t,Hy.version),R}rH(E,y.select(`${g} svg`),null==(s=(a=_.db).getAccTitle)?void 0:s.call(a),null==(l=(o=_.db).getAccDescription)?void 0:l.call(o)),y.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",LG);let L=y.select(g).node().innerHTML;if(f.debug("config.arrowMarkerAbsolute",u.arrowMarkerAbsolute),L=$G(L,v,Dh(u.arrowMarkerAbsolute)),v){const t=y.select(g+" svg").node();L=YG(L,t)}else b||(L=Mh.sanitize(L,{ADD_TAGS:NG,ADD_ATTR:FG}));if(void 0!==n)switch(E){case"flowchart":case"flowchart-v2":n(L,dD.bindFunctions);break;case"gantt":n(L,_O.bindFunctions);break;case"class":case"classDiagram":n(L,M_.bindFunctions);break;default:n(L)}else f.debug("CB = undefined!");FN();const P=dn(v?p:g).node();if(P&&"remove"in P&&P.remove(),w)throw w;return L};let QG={};const tH=function(t,e,n,r){try{if(void 0!==e)switch(e=e.trim(),n){case"open_directive":QG={};break;case"type_directive":if(!QG)throw new Error("currentDirective is undefined");QG.type=e.toLowerCase();break;case"arg_directive":if(!QG)throw new Error("currentDirective is undefined");QG.args=JSON.parse(e);break;case"close_directive":eH(t,QG,r),QG=void 0}}catch(i){f.error(`Error while rendering sequenceDiagram directive: ${e} jison context: ${n}`),f.error(i.message)}},eH=function(t,e,n){switch(f.debug(`Directive type=${e.type} with args:`,e.args),e.type){case"init":case"initialize":["config"].forEach((t=>{void 0!==e.args[t]&&("flowchart-v2"===n&&(n="flowchart"),e.args[n]=e.args[t],delete e.args[t])})),f.debug("sanitize in handleDirective",e.args),Yg(e.args),f.debug("sanitize in handleDirective (done)",e.args),nv(e.args);break;case"wrap":case"nowrap":t&&t.setWrap&&t.setWrap("wrap"===e.type);break;case"themeCss":f.warn("themeCss encountered");break;default:f.warn(`Unhandled directive: source: '%%{${e.type}: ${JSON.stringify(e.args?e.args:{})}}%%`,e)}};function nH(t={}){var e;(null==t?void 0:t.fontFamily)&&!(null!=(e=t.themeVariables)&&e.fontFamily)&&(t.themeVariables={fontFamily:t.fontFamily}),Jy(t),(null==t?void 0:t.theme)&&t.theme in xd?t.themeVariables=xd[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=xd.default.getThemeVariables(t.themeVariables));const n="object"==typeof t?Xy(t):Ky();p(n.logLevel),vG()}function rH(t,e,n,r){wG(e,t),SG(e,n,r,e.attr("id"))}const iH=Object.freeze({render:ZG,renderAsync:KG,parse:zG,parseAsync:UG,parseDirective:tH,initialize:nH,getConfig:tv,setConfig:Qy,getSiteConfig:Ky,updateSiteConfig:Zy,reset:()=>{rv()},globalReset:()=>{rv(jy)},defaultConfig:jy});p(tv().logLevel),rv(tv());let aH=!1;const sH=async function(t,e,n){try{aH?await hH(t,e,n):lH(t,e,n)}catch(l){f.warn("Syntax Error rendering"),Xg(l)&&f.warn(l.str),wH.parseError&&wH.parseError(l)}},oH=(t,e,n)=>{f.warn(t),Xg(t)?(n&&n(t.str,t.hash),e.push({...t,message:t.str,error:t})):(n&&n(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},lH=function(t,e,n){const r=iH.getConfig();let i;if(t&&(wH.sequenceConfig=t),f.debug((n?"":"No ")+"Callback function found"),void 0===e)i=document.querySelectorAll(".mermaid");else if("string"==typeof e)i=document.querySelectorAll(e);else if(e instanceof HTMLElement)i=[e];else{if(!(e instanceof NodeList))throw new Error("Invalid argument nodes for mermaid.init");i=e}f.debug(`Found ${i.length} diagrams`),void 0!==(null==t?void 0:t.startOnLoad)&&(f.debug("Start On Load: "+(null==t?void 0:t.startOnLoad)),iH.updateSiteConfig({startOnLoad:null==t?void 0:t.startOnLoad}));const a=new Zg.initIdGenerator(r.deterministicIds,r.deterministicIDSeed);let s;const o=[];for(const c of Array.from(i)){if(f.info("Rendering diagram: "+c.id),c.getAttribute("data-processed"))continue;c.setAttribute("data-processed","true");const t=`mermaid-${a.next()}`;s=c.innerHTML,s=Zg.entityDecode(s).trim().replace(/<br\s*\/?>/gi,"<br/>");const e=Zg.detectInit(s);e&&f.debug("Detected early reinit: ",e);try{iH.render(t,s,((e,r)=>{c.innerHTML=e,void 0!==n&&n(t),r&&r(c)}),c)}catch(l){oH(l,o,wH.parseError)}}if(o.length>0)throw o[0]},cH=t=>{for(const{id:e,detector:n,loader:r}of t)rm(e,n,r)},uH=async t=>{f.debug(`Loading ${t.length} external diagrams`);const e=(await Promise.allSettled(t.map((async({id:t,detector:e,loader:n})=>{const{diagram:r}=await n();Iv(t,r,e)})))).filter((t=>"rejected"===t.status));if(e.length>0){f.error(`Failed to load ${e.length} external diagrams`);for(const t of e)f.error(t);throw new Error(`Failed to load ${e.length} external diagrams`)}},hH=async function(t,e,n){const r=iH.getConfig();let i;if(t&&(wH.sequenceConfig=t),f.debug((n?"":"No ")+"Callback function found"),void 0===e)i=document.querySelectorAll(".mermaid");else if("string"==typeof e)i=document.querySelectorAll(e);else if(e instanceof HTMLElement)i=[e];else{if(!(e instanceof NodeList))throw new Error("Invalid argument nodes for mermaid.init");i=e}f.debug(`Found ${i.length} diagrams`),void 0!==(null==t?void 0:t.startOnLoad)&&(f.debug("Start On Load: "+(null==t?void 0:t.startOnLoad)),iH.updateSiteConfig({startOnLoad:null==t?void 0:t.startOnLoad}));const a=new Zg.initIdGenerator(r.deterministicIds,r.deterministicIDSeed);let s;const o=[];for(const c of Array.from(i)){if(f.info("Rendering diagram: "+c.id),c.getAttribute("data-processed"))continue;c.setAttribute("data-processed","true");const t=`mermaid-${a.next()}`;s=c.innerHTML,s=Zg.entityDecode(s).trim().replace(/<br\s*\/?>/gi,"<br/>");const e=Zg.detectInit(s);e&&f.debug("Detected early reinit: ",e);try{await iH.renderAsync(t,s,((e,r)=>{c.innerHTML=e,void 0!==n&&n(t),r&&r(c)}),c)}catch(l){oH(l,o,wH.parseError)}}if(o.length>0)throw o[0]},dH=function(t){iH.initialize(t)},fH=async(t,{lazyLoad:e=!0}={})=>{e?cH(t):await uH(t),aH=!0},pH=function(){if(wH.startOnLoad){const{startOnLoad:t}=iH.getConfig();t&&wH.init()}};typeof document<"u"&&window.addEventListener("load",pH,!1);const mH=function(t){wH.parseError=t},gH=t=>iH.parse(t,wH.parseError),yH=[];let vH=!1;const bH=async()=>{if(!vH){for(vH=!0;yH.length>0;){const e=yH.shift();if(e)try{await e()}catch(t){f.error("Error executing queue",t)}}vH=!1}},xH=t=>new Promise(((e,n)=>{const r=()=>new Promise(((r,i)=>{iH.parseAsync(t,wH.parseError).then((t=>{r(t),e(t)}),(t=>{f.error("Error parsing",t),i(t),n(t)}))}));yH.push(r),bH()})),_H=(t,e,n,r)=>new Promise(((i,a)=>{const s=()=>new Promise(((s,o)=>{iH.renderAsync(t,e,n,r).then((t=>{s(t),i(t)}),(t=>{f.error("Error parsing",t),o(t),a(t)}))}));yH.push(s),bH()})),wH={startOnLoad:!0,diagrams:{},mermaidAPI:iH,parse:gH,parseAsync:xH,render:iH.render,renderAsync:_H,init:sH,initThrowsErrors:lH,initThrowsErrorsAsync:hH,registerExternalDiagrams:fH,initialize:dH,parseError:void 0,contentLoaded:pH,setParseErrorHandler:mH};return wH}()},7594:(t,e)=>{function n(t){let e,n=[];for(let r of t.split(",").map((t=>t.trim())))if(/^-?\d+$/.test(r))n.push(parseInt(r,10));else if(e=r.match(/^(-?\d+)(-|\.\.\.?|\u2025|\u2026|\u22EF)(-?\d+)$/)){let[t,r,i,a]=e;if(r&&a){r=parseInt(r),a=parseInt(a);const t=r<a?1:-1;"-"!==i&&".."!==i&&"\u2025"!==i||(a+=t);for(let e=r;e!==a;e+=t)n.push(e)}}return n}e.default=n,t.exports=n},2817:(t,e,n)=>{n(9119),t.exports=n(8040).Object.assign},6773:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},5920:(t,e,n)=>{var r=n(3436);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},8652:(t,e,n)=>{var r=n(5721),i=n(1846),a=n(7584);t.exports=function(t){return function(e,n,s){var o,l=r(e),c=i(l.length),u=a(s,c);if(t&&n!=n){for(;c>u;)if((o=l[u++])!=o)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}}},1813:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},8040:t=>{var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},2117:(t,e,n)=>{var r=n(6773);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},8299:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},7871:(t,e,n)=>{t.exports=!n(5287)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},6039:(t,e,n)=>{var r=n(3436),i=n(221).document,a=r(i)&&r(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},7305:t=>{t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},3930:(t,e,n)=>{var r=n(221),i=n(8040),a=n(5235),s=n(4093),o=n(2117),l="prototype",c=function(t,e,n){var u,h,d,f,p=t&c.F,m=t&c.G,g=t&c.S,y=t&c.P,v=t&c.B,b=m?r:g?r[e]||(r[e]={}):(r[e]||{})[l],x=m?i:i[e]||(i[e]={}),_=x[l]||(x[l]={});for(u in m&&(n=e),n)d=((h=!p&&b&&void 0!==b[u])?b:n)[u],f=v&&h?o(d,r):y&&"function"==typeof d?o(Function.call,d):d,b&&s(b,u,d,t&c.U),x[u]!=d&&a(x,u,f),y&&_[u]!=d&&(_[u]=d)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},5287:t=>{t.exports=function(t){try{return!!t()}catch(e){return!0}}},5118:(t,e,n)=>{t.exports=n(6695)("native-function-to-string",Function.toString)},221:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},1014:t=>{var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},5235:(t,e,n)=>{var r=n(2823),i=n(8613);t.exports=n(7871)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},6804:(t,e,n)=>{t.exports=!n(7871)&&!n(5287)((function(){return 7!=Object.defineProperty(n(6039)("div"),"a",{get:function(){return 7}}).a}))},8618:(t,e,n)=>{var r=n(1813);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},3436:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},173:t=>{t.exports=!1},4254:(t,e,n)=>{"use strict";var r=n(7871),i=n(4453),a=n(5862),s=n(6466),o=n(572),l=n(8618),c=Object.assign;t.exports=!c||n(5287)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r}))?function(t,e){for(var n=o(t),c=arguments.length,u=1,h=a.f,d=s.f;c>u;)for(var f,p=l(arguments[u++]),m=h?i(p).concat(h(p)):i(p),g=m.length,y=0;g>y;)f=m[y++],r&&!d.call(p,f)||(n[f]=p[f]);return n}:c},2823:(t,e,n)=>{var r=n(5920),i=n(6804),a=n(8980),s=Object.defineProperty;e.f=n(7871)?Object.defineProperty:function(t,e,n){if(r(t),e=a(e,!0),r(n),i)try{return s(t,e,n)}catch(o){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},5862:(t,e)=>{e.f=Object.getOwnPropertySymbols},6528:(t,e,n)=>{var r=n(1014),i=n(5721),a=n(8652)(!1),s=n(7148)("IE_PROTO");t.exports=function(t,e){var n,o=i(t),l=0,c=[];for(n in o)n!=s&&r(o,n)&&c.push(n);for(;e.length>l;)r(o,n=e[l++])&&(~a(c,n)||c.push(n));return c}},4453:(t,e,n)=>{var r=n(6528),i=n(7305);t.exports=Object.keys||function(t){return r(t,i)}},6466:(t,e)=>{e.f={}.propertyIsEnumerable},8613:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},4093:(t,e,n)=>{var r=n(221),i=n(5235),a=n(1014),s=n(607)("src"),o=n(5118),l="toString",c=(""+o).split(l);n(8040).inspectSource=function(t){return o.call(t)},(t.exports=function(t,e,n,o){var l="function"==typeof n;l&&(a(n,"name")||i(n,"name",e)),t[e]!==n&&(l&&(a(n,s)||i(n,s,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:o?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,l,(function(){return"function"==typeof this&&this[s]||o.call(this)}))},7148:(t,e,n)=>{var r=n(6695)("keys"),i=n(607);t.exports=function(t){return r[t]||(r[t]=i(t))}},6695:(t,e,n)=>{var r=n(8040),i=n(221),a="__core-js_shared__",s=i[a]||(i[a]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(173)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},7584:(t,e,n)=>{var r=n(7276),i=Math.max,a=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):a(t,e)}},7276:t=>{var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},5721:(t,e,n)=>{var r=n(8618),i=n(8299);t.exports=function(t){return r(i(t))}},1846:(t,e,n)=>{var r=n(7276),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},572:(t,e,n)=>{var r=n(8299);t.exports=function(t){return Object(r(t))}},8980:(t,e,n)=>{var r=n(3436);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},607:t=>{var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},9119:(t,e,n)=>{var r=n(3930);r(r.S+r.F,"Object",{assign:n(4254)})},6511:(t,e)=>{"use strict";e.ContinuousEventPriority=4,e.DefaultEventPriority=16,e.DiscreteEventPriority=1},7287:(t,e,n)=>{t.exports=function(t){var e={},r=n(7294),i=n(3840),a=Object.assign;function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var _=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var w=Symbol.iterator;function S(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=w&&t[w]||t["@@iterator"])?t:null}function E(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case h:return"Fragment";case u:return"Portal";case f:return"Profiler";case d:return"StrictMode";case y:return"Suspense";case v:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case m:return(t.displayName||"Context")+".Consumer";case p:return(t._context.displayName||"Context")+".Provider";case g:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case b:return null!==(e=t.displayName||null)?e:E(t.type)||"Memo";case x:e=t._payload,t=t._init;try{return E(t(e))}catch(c){}}return null}function M(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(e);case 8:return e===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e}return null}function C(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function T(t){if(C(t)!==t)throw Error(s(188))}function A(t){var e=t.alternate;if(!e){if(null===(e=C(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return T(i),t;if(a===r)return T(i),e;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}function k(t){return null!==(t=A(t))?L(t):null}function L(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=L(t);if(null!==e)return e;t=t.sibling}return null}function P(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){if(4!==t.tag){var e=P(t);if(null!==e)return e}t=t.sibling}return null}var R,I=Array.isArray,D=t.getPublicInstance,B=t.getRootHostContext,O=t.getChildHostContext,N=t.prepareForCommit,F=t.resetAfterCommit,z=t.createInstance,U=t.appendInitialChild,G=t.finalizeInitialChildren,H=t.prepareUpdate,j=t.shouldSetTextContent,V=t.createTextInstance,W=t.scheduleTimeout,$=t.cancelTimeout,Y=t.noTimeout,q=t.isPrimaryRenderer,X=t.supportsMutation,J=t.supportsPersistence,Z=t.supportsHydration,K=t.getInstanceFromNode,Q=t.preparePortalMount,tt=t.getCurrentEventPriority,et=t.detachDeletedInstance,nt=t.supportsMicrotasks,rt=t.scheduleMicrotask,it=t.supportsTestSelectors,at=t.findFiberRoot,st=t.getBoundingRect,ot=t.getTextContent,lt=t.isHiddenSubtree,ct=t.matchAccessibilityRole,ut=t.setFocusIfFocusable,ht=t.setupIntersectionObserver,dt=t.appendChild,ft=t.appendChildToContainer,pt=t.commitTextUpdate,mt=t.commitMount,gt=t.commitUpdate,yt=t.insertBefore,vt=t.insertInContainerBefore,bt=t.removeChild,xt=t.removeChildFromContainer,_t=t.resetTextContent,wt=t.hideInstance,St=t.hideTextInstance,Et=t.unhideInstance,Mt=t.unhideTextInstance,Ct=t.clearContainer,Tt=t.cloneInstance,At=t.createContainerChildSet,kt=t.appendChildToContainerChildSet,Lt=t.finalizeContainerChildren,Pt=t.replaceContainerChildren,Rt=t.cloneHiddenInstance,It=t.cloneHiddenTextInstance,Dt=t.canHydrateInstance,Bt=t.canHydrateTextInstance,Ot=t.canHydrateSuspenseInstance,Nt=t.isSuspenseInstancePending,Ft=t.isSuspenseInstanceFallback,zt=t.registerSuspenseInstanceRetry,Ut=t.getNextHydratableSibling,Gt=t.getFirstHydratableChild,Ht=t.getFirstHydratableChildWithinContainer,jt=t.getFirstHydratableChildWithinSuspenseInstance,Vt=t.hydrateInstance,Wt=t.hydrateTextInstance,$t=t.hydrateSuspenseInstance,Yt=t.getNextHydratableInstanceAfterSuspenseInstance,qt=t.commitHydratedContainer,Xt=t.commitHydratedSuspenseInstance,Jt=t.clearSuspenseBoundary,Zt=t.clearSuspenseBoundaryFromContainer,Kt=t.shouldDeleteUnhydratedTailInstances,Qt=t.didNotMatchHydratedContainerTextInstance,te=t.didNotMatchHydratedTextInstance;function ee(t){if(void 0===R)try{throw Error()}catch(c){var e=c.stack.trim().match(/\n( *(at )?)/);R=e&&e[1]||""}return"\n"+R+t}var ne=!1;function re(t,e){if(!t||ne)return"";ne=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=o);break}}}finally{ne=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ee(t):""}var ie=Object.prototype.hasOwnProperty,ae=[],se=-1;function oe(t){return{current:t}}function le(t){0>se||(t.current=ae[se],ae[se]=null,se--)}function ce(t,e){se++,ae[se]=t.current,t.current=e}var ue={},he=oe(ue),de=oe(!1),fe=ue;function pe(t,e){var n=t.type.contextTypes;if(!n)return ue;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function me(t){return null!=(t=t.childContextTypes)}function ge(){le(de),le(he)}function ye(t,e,n){if(he.current!==ue)throw Error(s(168));ce(he,e),ce(de,n)}function ve(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(s(108,M(t)||"Unknown",i));return a({},n,r)}function be(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ue,fe=he.current,ce(he,t),ce(de,de.current),!0}function xe(t,e,n){var r=t.stateNode;if(!r)throw Error(s(169));n?(t=ve(t,e,fe),r.__reactInternalMemoizedMergedChildContext=t,le(de),le(he),ce(he,t)):le(de),ce(de,n)}var _e=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(we(t)/Se|0)|0},we=Math.log,Se=Math.LN2;var Ee=64,Me=4194304;function Ce(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Te(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=Ce(o):0!==(a&=s)&&(r=Ce(a))}else 0!==(s=n&~i)?r=Ce(s):0!==a&&(r=Ce(a));if(0===r)return 0;if(0!==e&&e!==r&&0==(e&i)&&((i=r&-r)>=(a=e&-e)||16===i&&0!=(4194240&a)))return e;if(0!=(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-_e(e)),r|=t[n],e&=~i;return r}function Ae(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function ke(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Le(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pe(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-_e(e)]=n}function Re(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_e(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ie=0;function De(t){return 1<(t&=-t)?4<t?0!=(268435455&t)?16:536870912:4:1}var Be=i.unstable_scheduleCallback,Oe=i.unstable_cancelCallback,Ne=i.unstable_shouldYield,Fe=i.unstable_requestPaint,ze=i.unstable_now,Ue=i.unstable_ImmediatePriority,Ge=i.unstable_UserBlockingPriority,He=i.unstable_NormalPriority,je=i.unstable_IdlePriority,Ve=null,We=null;var $e="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},Ye=null,qe=!1,Xe=!1;function Je(t){null===Ye?Ye=[t]:Ye.push(t)}function Ze(){if(!Xe&&null!==Ye){Xe=!0;var t=0,e=Ie;try{var n=Ye;for(Ie=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}Ye=null,qe=!1}catch(i){throw null!==Ye&&(Ye=Ye.slice(t+1)),Be(Ue,Ze),i}finally{Ie=e,Xe=!1}}return null}var Ke=o.ReactCurrentBatchConfig;function Qe(t,e){if($e(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ie.call(e,i)||!$e(t[i],e[i]))return!1}return!0}function tn(t){switch(t.tag){case 5:return ee(t.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return t=re(t.type,!1);case 11:return t=re(t.type.render,!1);case 1:return t=re(t.type,!0);default:return""}}function en(t,e){if(t&&t.defaultProps){for(var n in e=a({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var nn=oe(null),rn=null,an=null,sn=null;function on(){sn=an=rn=null}function ln(t,e,n){q?(ce(nn,e._currentValue),e._currentValue=n):(ce(nn,e._currentValue2),e._currentValue2=n)}function cn(t){var e=nn.current;le(nn),q?t._currentValue=e:t._currentValue2=e}function un(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hn(t,e){rn=t,sn=an=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&e)&&(Ni=!0),t.firstContext=null)}function dn(t){var e=q?t._currentValue:t._currentValue2;if(sn!==t)if(t={context:t,memoizedValue:e,next:null},null===an){if(null===rn)throw Error(s(308));an=t,rn.dependencies={lanes:0,firstContext:t}}else an=an.next=t;return e}var fn=null,pn=!1;function mn(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gn(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vn(t,e){var n=t.updateQueue;null!==n&&(n=n.shared,null!==Xa&&0!=(1&t.mode)&&0==(2&qa)?(null===(t=n.interleaved)?(e.next=e,null===fn?fn=[n]:fn.push(n)):(e.next=t.next,t.next=e),n.interleaved=e):(null===(t=n.pending)?e.next=e:(e.next=t.next,t.next=e),n.pending=e))}function bn(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!=(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,Re(t,n)}}function xn(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=e:a=a.next=e}else i=a=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _n(t,e,n,r){var i=t.updateQueue;pn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var c=l,u=c.next;c.next=null,null===o?s=u:o.next=u,o=c;var h=t.alternate;null!==h&&((l=(h=h.updateQueue).lastBaseUpdate)!==o&&(null===l?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(null!==s){var d=i.baseState;for(o=0,h=u=c=null,l=s;;){var f=l.lane,p=l.eventTime;if((r&f)===f){null!==h&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var m=t,g=l;switch(f=e,p=n,g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(p,d,f);break t}d=m;break t;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(f="function"==typeof(m=g.payload)?m.call(p,d,f):m))break t;d=a({},d,f);break t;case 2:pn=!0}}null!==l.callback&&0!==l.lane&&(t.flags|=64,null===(f=i.effects)?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(u=h=p,c=d):h=h.next=p,o|=f;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(f=l).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===h&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,null!==(e=i.shared.interleaved)){i=e;do{o|=i.lane,i=i.next}while(i!==e)}else null===s&&(i.shared.lanes=0);ns|=o,t.lanes=o,t.memoizedState=d}}function wn(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var Sn=(new r.Component).refs;function En(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:a({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Mn={isMounted:function(t){return!!(t=t._reactInternals)&&C(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_s(),i=ws(t),a=yn(r,i);a.payload=e,null!=n&&(a.callback=n),vn(t,a),null!==(e=Ss(t,i,r))&&bn(e,t,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_s(),i=ws(t),a=yn(r,i);a.tag=1,a.payload=e,null!=n&&(a.callback=n),vn(t,a),null!==(e=Ss(t,i,r))&&bn(e,t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_s(),r=ws(t),i=yn(n,r);i.tag=2,null!=e&&(i.callback=e),vn(t,i),null!==(e=Ss(t,r,n))&&bn(e,t,r)}};function Cn(t,e,n,r,i,a,s){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,a,s):!e.prototype||!e.prototype.isPureReactComponent||(!Qe(n,r)||!Qe(i,a))}function Tn(t,e,n){var r=!1,i=ue,a=e.contextType;return"object"==typeof a&&null!==a?a=dn(a):(i=me(e)?fe:he.current,a=(r=null!=(r=e.contextTypes))?pe(t,i):ue),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Mn,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function An(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Mn.enqueueReplaceState(e,e.state,null)}function kn(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Sn,mn(t);var a=e.contextType;"object"==typeof a&&null!==a?i.context=dn(a):(a=me(e)?fe:he.current,i.context=pe(t,a)),i.state=t.memoizedState,"function"==typeof(a=e.getDerivedStateFromProps)&&(En(t,e,a,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Mn.enqueueReplaceState(i,i.state,null),_n(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308)}var Ln=[],Pn=0,Rn=null,In=0,Dn=[],Bn=0,On=null,Nn=1,Fn="";function zn(t,e){Ln[Pn++]=In,Ln[Pn++]=Rn,Rn=t,In=e}function Un(t,e,n){Dn[Bn++]=Nn,Dn[Bn++]=Fn,Dn[Bn++]=On,On=t;var r=Nn;t=Fn;var i=32-_e(r)-1;r&=~(1<<i),n+=1;var a=32-_e(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Nn=1<<32-_e(e)+i|n<<i|r,Fn=a+t}else Nn=1<<a|n<<i|r,Fn=t}function Gn(t){null!==t.return&&(zn(t,1),Un(t,1,0))}function Hn(t){for(;t===Rn;)Rn=Ln[--Pn],Ln[Pn]=null,In=Ln[--Pn],Ln[Pn]=null;for(;t===On;)On=Dn[--Bn],Dn[Bn]=null,Fn=Dn[--Bn],Dn[Bn]=null,Nn=Dn[--Bn],Dn[Bn]=null}var jn=null,Vn=null,Wn=!1,$n=!1,Yn=null;function qn(t,e){var n=Ks(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function Xn(t,e){switch(t.tag){case 5:return null!==(e=Dt(e,t.type,t.pendingProps))&&(t.stateNode=e,jn=t,Vn=Gt(e),!0);case 6:return null!==(e=Bt(e,t.pendingProps))&&(t.stateNode=e,jn=t,Vn=null,!0);case 13:if(null!==(e=Ot(e))){var n=null!==On?{id:Nn,overflow:Fn}:null;return t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Ks(18,null,null,0)).stateNode=e,n.return=t,t.child=n,jn=t,Vn=null,!0}return!1;default:return!1}}function Jn(t){return 0!=(1&t.mode)&&0==(128&t.flags)}function Zn(t){if(Wn){var e=Vn;if(e){var n=e;if(!Xn(t,e)){if(Jn(t))throw Error(s(418));e=Ut(n);var r=jn;e&&Xn(t,e)?qn(r,n):(t.flags=-4097&t.flags|2,Wn=!1,jn=t)}}else{if(Jn(t))throw Error(s(418));t.flags=-4097&t.flags|2,Wn=!1,jn=t}}}function Kn(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;jn=t}function Qn(t){if(!Z||t!==jn)return!1;if(!Wn)return Kn(t),Wn=!0,!1;if(3!==t.tag&&(5!==t.tag||Kt(t.type)&&!j(t.type,t.memoizedProps))){var e=Vn;if(e){if(Jn(t)){for(t=Vn;t;)t=Ut(t);throw Error(s(418))}for(;e;)qn(t,e),e=Ut(e)}}if(Kn(t),13===t.tag){if(!Z)throw Error(s(316));if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));Vn=Yt(t)}else Vn=jn?Ut(t.stateNode):null;return!0}function tr(){Z&&(Vn=jn=null,$n=Wn=!1)}function er(t){null===Yn?Yn=[t]:Yn.push(t)}function nr(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,t));var i=r,a=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=i.refs;e===Sn&&(e=i.refs={}),null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!=typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function rr(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ir(t){return(0,t._init)(t._payload)}function ar(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=to(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function c(t,e,n,r){return null===e||6!==e.tag?((e=io(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n,r){var a=n.type;return a===h?p(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===x&&ir(a)===e.type)?((r=i(e,n.props)).ref=nr(t,e,n),r.return=t,r):((r=eo(n.type,n.key,n.props,null,t.mode,r)).ref=nr(t,e,n),r.return=t,r)}function f(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=ao(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function p(t,e,n,r,a){return null===e||7!==e.tag?((e=no(n,t.mode,r,a)).return=t,e):((e=i(e,n)).return=t,e)}function m(t,e,n){if("string"==typeof e&&""!==e||"number"==typeof e)return(e=io(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case l:return(n=eo(e.type,e.key,e.props,null,t.mode,n)).ref=nr(t,null,e),n.return=t,n;case u:return(e=ao(e,t.mode,n)).return=t,e;case x:return m(t,(0,e._init)(e._payload),n)}if(I(e)||S(e))return(e=no(e,t.mode,n,null)).return=t,e;rr(t,e)}return null}function g(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:c(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?d(t,e,n,r):null;case u:return n.key===i?f(t,e,n,r):null;case x:return g(t,e,(i=n._init)(n._payload),r)}if(I(n)||S(n))return null!==i?null:p(t,e,n,r,null);rr(t,n)}return null}function y(t,e,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return c(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case l:return d(e,t=t.get(null===r.key?n:r.key)||null,r,i);case u:return f(e,t=t.get(null===r.key?n:r.key)||null,r,i);case x:return y(t,e,n,(0,r._init)(r._payload),i)}if(I(r)||S(r))return p(e,t=t.get(n)||null,r,i,null);rr(e,r)}return null}function v(i,s,o,l){for(var c=null,u=null,h=s,d=s=0,f=null;null!==h&&d<o.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=g(i,h,o[d],l);if(null===p){null===h&&(h=f);break}t&&h&&null===p.alternate&&e(i,h),s=a(p,s,d),null===u?c=p:u.sibling=p,u=p,h=f}if(d===o.length)return n(i,h),Wn&&zn(i,d),c;if(null===h){for(;d<o.length;d++)null!==(h=m(i,o[d],l))&&(s=a(h,s,d),null===u?c=h:u.sibling=h,u=h);return Wn&&zn(i,d),c}for(h=r(i,h);d<o.length;d++)null!==(f=y(h,i,d,o[d],l))&&(t&&null!==f.alternate&&h.delete(null===f.key?d:f.key),s=a(f,s,d),null===u?c=f:u.sibling=f,u=f);return t&&h.forEach((function(t){return e(i,t)})),Wn&&zn(i,d),c}function b(i,o,l,c){var u=S(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,d=o,f=o=0,p=null,v=l.next();null!==d&&!v.done;f++,v=l.next()){d.index>f?(p=d,d=null):p=d.sibling;var b=g(i,d,v.value,c);if(null===b){null===d&&(d=p);break}t&&d&&null===b.alternate&&e(i,d),o=a(b,o,f),null===h?u=b:h.sibling=b,h=b,d=p}if(v.done)return n(i,d),Wn&&zn(i,f),u;if(null===d){for(;!v.done;f++,v=l.next())null!==(v=m(i,v.value,c))&&(o=a(v,o,f),null===h?u=v:h.sibling=v,h=v);return Wn&&zn(i,f),u}for(d=r(i,d);!v.done;f++,v=l.next())null!==(v=y(d,i,f,v.value,c))&&(t&&null!==v.alternate&&d.delete(null===v.key?f:v.key),o=a(v,o,f),null===h?u=v:h.sibling=v,h=v);return t&&d.forEach((function(t){return e(i,t)})),Wn&&zn(i,f),u}return function t(r,a,s,c){if("object"==typeof s&&null!==s&&s.type===h&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case l:t:{for(var d=s.key,f=a;null!==f;){if(f.key===d){if((d=s.type)===h){if(7===f.tag){n(r,f.sibling),(a=i(f,s.props.children)).return=r,r=a;break t}}else if(f.elementType===d||"object"==typeof d&&null!==d&&d.$$typeof===x&&ir(d)===f.type){n(r,f.sibling),(a=i(f,s.props)).ref=nr(r,f,s),a.return=r,r=a;break t}n(r,f);break}e(r,f),f=f.sibling}s.type===h?((a=no(s.props.children,r.mode,c,s.key)).return=r,r=a):((c=eo(s.type,s.key,s.props,null,r.mode,c)).ref=nr(r,a,s),c.return=r,r=c)}return o(r);case u:t:{for(f=s.key;null!==a;){if(a.key===f){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break t}n(r,a);break}e(r,a),a=a.sibling}(a=ao(s,r.mode,c)).return=r,r=a}return o(r);case x:return t(r,a,(f=s._init)(s._payload),c)}if(I(s))return v(r,a,s,c);if(S(s))return b(r,a,s,c);rr(r,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=io(s,r.mode,c)).return=r,r=a),o(r)):n(r,a)}}var sr=ar(!0),or=ar(!1),lr={},cr=oe(lr),ur=oe(lr),hr=oe(lr);function dr(t){if(t===lr)throw Error(s(174));return t}function fr(t,e){ce(hr,e),ce(ur,t),ce(cr,lr),t=B(e),le(cr),ce(cr,t)}function pr(){le(cr),le(ur),le(hr)}function mr(t){var e=dr(hr.current),n=dr(cr.current);n!==(e=O(n,t.type,e))&&(ce(ur,t),ce(cr,e))}function gr(t){ur.current===t&&(le(cr),le(ur))}var yr=oe(0);function vr(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Nt(n)||Ft(n)))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var br=[];function xr(){for(var t=0;t<br.length;t++){var e=br[t];q?e._workInProgressVersionPrimary=null:e._workInProgressVersionSecondary=null}br.length=0}var _r=o.ReactCurrentDispatcher,wr=o.ReactCurrentBatchConfig,Sr=0,Er=null,Mr=null,Cr=null,Tr=!1,Ar=!1,kr=0,Lr=0;function Pr(){throw Error(s(321))}function Rr(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$e(t[n],e[n]))return!1;return!0}function Ir(t,e,n,r,i,a){if(Sr=a,Er=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_r.current=null===t||null===t.memoizedState?mi:gi,t=n(r,i),Ar){a=0;do{if(Ar=!1,kr=0,25<=a)throw Error(s(301));a+=1,Cr=Mr=null,e.updateQueue=null,_r.current=yi,t=n(r,i)}while(Ar)}if(_r.current=pi,e=null!==Mr&&null!==Mr.next,Sr=0,Cr=Mr=Er=null,Tr=!1,e)throw Error(s(300));return t}function Dr(){var t=0!==kr;return kr=0,t}function Br(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Cr?Er.memoizedState=Cr=t:Cr=Cr.next=t,Cr}function Or(){if(null===Mr){var t=Er.alternate;t=null!==t?t.memoizedState:null}else t=Mr.next;var e=null===Cr?Er.memoizedState:Cr.next;if(null!==e)Cr=e,Mr=t;else{if(null===t)throw Error(s(310));t={memoizedState:(Mr=t).memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},null===Cr?Er.memoizedState=Cr=t:Cr=Cr.next=t}return Cr}function Nr(t,e){return"function"==typeof e?e(t):e}function Fr(t){var e=Or(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=Mr,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((Sr&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,Er.lanes|=h,ns|=h}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,$e(r,e.memoizedState)||(Ni=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{a=i.lane,Er.lanes|=a,ns|=a,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zr(t){var e=Or(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=t(a,o.action),o=o.next}while(o!==i);$e(a,e.memoizedState)||(Ni=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Ur(){}function Gr(t,e){var n=Er,r=Or(),i=e(),a=!$e(r.memoizedState,i);if(a&&(r.memoizedState=i,Ni=!0),r=r.queue,Kr(Vr.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||null!==Cr&&1&Cr.memoizedState.tag){if(n.flags|=2048,Yr(9,jr.bind(null,n,r,i,e),void 0,null),null===Xa)throw Error(s(349));0!=(30&Sr)||Hr(n,e,i)}return i}function Hr(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=Er.updateQueue)?(e={lastEffect:null,stores:null},Er.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function jr(t,e,n,r){e.value=n,e.getSnapshot=r,Wr(e)&&Ss(t,1,-1)}function Vr(t,e,n){return n((function(){Wr(e)&&Ss(t,1,-1)}))}function Wr(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$e(t,n)}catch(r){return!0}}function $r(t){var e=Br();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:t},e.queue=t,t=t.dispatch=ci.bind(null,Er,t),[e.memoizedState,t]}function Yr(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Er.updateQueue)?(e={lastEffect:null,stores:null},Er.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function qr(){return Or().memoizedState}function Xr(t,e,n,r){var i=Br();Er.flags|=t,i.memoizedState=Yr(1|e,n,void 0,void 0===r?null:r)}function Jr(t,e,n,r){var i=Or();r=void 0===r?null:r;var a=void 0;if(null!==Mr){var s=Mr.memoizedState;if(a=s.destroy,null!==r&&Rr(r,s.deps))return void(i.memoizedState=Yr(e,n,a,r))}Er.flags|=t,i.memoizedState=Yr(1|e,n,a,r)}function Zr(t,e){return Xr(8390656,8,t,e)}function Kr(t,e){return Jr(2048,8,t,e)}function Qr(t,e){return Jr(4,2,t,e)}function ti(t,e){return Jr(4,4,t,e)}function ei(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ni(t,e,n){return n=null!=n?n.concat([t]):null,Jr(4,4,ei.bind(null,e,t),n)}function ri(){}function ii(t,e){var n=Or();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Rr(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ai(t,e){var n=Or();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Rr(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function si(t,e){var n=Ie;Ie=0!==n&&4>n?n:4,t(!0);var r=wr.transition;wr.transition={};try{t(!1),e()}finally{Ie=n,wr.transition=r}}function oi(){return Or().memoizedState}function li(t,e,n){var r=ws(t);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ui(t)?hi(e,n):(di(t,e,n),null!==(t=Ss(t,r,n=_s()))&&fi(t,e,r))}function ci(t,e,n){var r=ws(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ui(t))hi(e,i);else{di(t,e,i);var a=t.alternate;if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,$e(o,s))return}catch(l){}null!==(t=Ss(t,r,n=_s()))&&fi(t,e,r)}}function ui(t){var e=t.alternate;return t===Er||null!==e&&e===Er}function hi(t,e){Ar=Tr=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function di(t,e,n){null!==Xa&&0!=(1&t.mode)&&0==(2&qa)?(null===(t=e.interleaved)?(n.next=n,null===fn?fn=[e]:fn.push(e)):(n.next=t.next,t.next=n),e.interleaved=n):(null===(t=e.pending)?n.next=n:(n.next=t.next,t.next=n),e.pending=n)}function fi(t,e,n){if(0!=(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,Re(t,n)}}var pi={readContext:dn,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},mi={readContext:dn,useCallback:function(t,e){return Br().memoizedState=[t,void 0===e?null:e],t},useContext:dn,useEffect:Zr,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,Xr(4194308,4,ei.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xr(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xr(4,2,t,e)},useMemo:function(t,e){var n=Br();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Br();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=li.bind(null,Er,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Br().memoizedState=t},useState:$r,useDebugValue:ri,useDeferredValue:function(t){var e=$r(t),n=e[0],r=e[1];return Zr((function(){var e=wr.transition;wr.transition={};try{r(t)}finally{wr.transition=e}}),[t]),n},useTransition:function(){var t=$r(!1),e=t[0];return t=si.bind(null,t[1]),Br().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Er,i=Br();if(Wn){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===Xa)throw Error(s(349));0!=(30&Sr)||Hr(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Zr(Vr.bind(null,r,a,t),[t]),r.flags|=2048,Yr(9,jr.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Br(),e=Xa.identifierPrefix;if(Wn){var n=Fn;e=":"+e+"R"+(n=(Nn&~(1<<32-_e(Nn)-1)).toString(32)+n),0<(n=kr++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=Lr++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gi={readContext:dn,useCallback:ii,useContext:dn,useEffect:Kr,useImperativeHandle:ni,useInsertionEffect:Qr,useLayoutEffect:ti,useMemo:ai,useReducer:Fr,useRef:qr,useState:function(){return Fr(Nr)},useDebugValue:ri,useDeferredValue:function(t){var e=Fr(Nr),n=e[0],r=e[1];return Kr((function(){var e=wr.transition;wr.transition={};try{r(t)}finally{wr.transition=e}}),[t]),n},useTransition:function(){return[Fr(Nr)[0],Or().memoizedState]},useMutableSource:Ur,useSyncExternalStore:Gr,useId:oi,unstable_isNewReconciler:!1},yi={readContext:dn,useCallback:ii,useContext:dn,useEffect:Kr,useImperativeHandle:ni,useInsertionEffect:Qr,useLayoutEffect:ti,useMemo:ai,useReducer:zr,useRef:qr,useState:function(){return zr(Nr)},useDebugValue:ri,useDeferredValue:function(t){var e=zr(Nr),n=e[0],r=e[1];return Kr((function(){var e=wr.transition;wr.transition={};try{r(t)}finally{wr.transition=e}}),[t]),n},useTransition:function(){return[zr(Nr)[0],Or().memoizedState]},useMutableSource:Ur,useSyncExternalStore:Gr,useId:oi,unstable_isNewReconciler:!1};function vi(t,e){try{var n="",r=e;do{n+=tn(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:t,source:e,stack:i}}function bi(t,e){try{console.error(e.value)}catch(c){setTimeout((function(){throw c}))}}var xi,_i,wi,Si,Ei="function"==typeof WeakMap?WeakMap:Map;function Mi(t,e,n){(n=yn(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hs||(hs=!0,ds=r),bi(0,e)},n}function Ci(t,e,n){(n=yn(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){bi(0,e)}}var a=t.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){bi(0,e),"function"!=typeof r&&(null===fs?fs=new Set([this]):fs.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function Ti(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new Ei;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$s.bind(null,t,e,n),e.then(t,t))}function Ai(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ki(t,e,n,r,i){return 0==(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=yn(-1,1)).tag=2,vn(n,e))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}function Li(t){t.flags|=4}function Pi(t,e){if(null!==t&&t.child===e.child)return!0;if(0!=(16&e.flags))return!1;for(t=e.child;null!==t;){if(0!=(12854&t.flags)||0!=(12854&t.subtreeFlags))return!1;t=t.sibling}return!0}if(X)xi=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)U(t,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},_i=function(){},wi=function(t,e,n,r,i){if((t=t.memoizedProps)!==r){var a=e.stateNode,s=dr(cr.current);n=H(a,n,t,r,i,s),(e.updateQueue=n)&&Li(e)}},Si=function(t,e,n,r){n!==r&&Li(e)};else if(J){xi=function(t,e,n,r){for(var i=e.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Rt(a,i.type,i.memoizedProps,i)),U(t,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=It(a,i.memoizedProps,i)),U(t,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),xi(t,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Ri=function(t,e,n,r){for(var i=e.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Rt(a,i.type,i.memoizedProps,i)),kt(t,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=It(a,i.memoizedProps,i)),kt(t,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),Ri(t,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};_i=function(t,e){var n=e.stateNode;if(!Pi(t,e)){t=n.containerInfo;var r=At(t);Ri(r,e,!1,!1),n.pendingChildren=r,Li(e),Lt(t,r)}},wi=function(t,e,n,r,i){var a=t.stateNode,s=t.memoizedProps;if((t=Pi(t,e))&&s===r)e.stateNode=a;else{var o=e.stateNode,l=dr(cr.current),c=null;s!==r&&(c=H(o,n,s,r,i,l)),t&&null===c?e.stateNode=a:(a=Tt(a,c,n,s,r,e,t,o),G(a,n,r,i,l)&&Li(e),e.stateNode=a,t?Li(e):xi(a,e,!1,!1))}},Si=function(t,e,n,r){n!==r?(t=dr(hr.current),n=dr(cr.current),e.stateNode=V(r,t,n,e),Li(e)):e.stateNode=t.stateNode}}else _i=function(){},wi=function(){},Si=function(){};function Ii(t,e){if(!Wn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Di(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Bi(t,e,n){var r=e.pendingProps;switch(Hn(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Di(e),null;case 1:case 17:return me(e.type)&&ge(),Di(e),null;case 3:return r=e.stateNode,pr(),le(de),le(he),xr(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(Qn(e)?Li(e):null===t||t.memoizedState.isDehydrated&&0==(256&e.flags)||(e.flags|=1024,null!==Yn&&(As(Yn),Yn=null))),_i(t,e),Di(e),null;case 5:gr(e),n=dr(hr.current);var i=e.type;if(null!==t&&null!=e.stateNode)wi(t,e,i,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(s(166));return Di(e),null}if(t=dr(cr.current),Qn(e)){if(!Z)throw Error(s(175));t=Vt(e.stateNode,e.type,e.memoizedProps,n,t,e,!$n),e.updateQueue=t,null!==t&&Li(e)}else{var a=z(i,r,n,t,e);xi(a,e,!1,!1),e.stateNode=a,G(a,i,r,n,t)&&Li(e)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Di(e),null;case 6:if(t&&null!=e.stateNode)Si(t,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(s(166));if(t=dr(hr.current),n=dr(cr.current),Qn(e)){if(!Z)throw Error(s(176));if(t=e.stateNode,r=e.memoizedProps,(n=Wt(t,r,e,!$n))&&null!==(i=jn))switch(a=0!=(1&i.mode),i.tag){case 3:Qt(i.stateNode.containerInfo,t,r,a);break;case 5:te(i.type,i.memoizedProps,i.stateNode,t,r,a)}n&&Li(e)}else e.stateNode=V(r,t,n,e)}return Di(e),null;case 13:if(le(yr),r=e.memoizedState,Wn&&null!==Vn&&0!=(1&e.mode)&&0==(128&e.flags)){for(t=Vn;t;)t=Ut(t);return tr(),e.flags|=98560,e}if(null!==r&&null!==r.dehydrated){if(r=Qn(e),null===t){if(!r)throw Error(s(318));if(!Z)throw Error(s(344));if(!(t=null!==(t=e.memoizedState)?t.dehydrated:null))throw Error(s(317));$t(t,e)}else tr(),0==(128&e.flags)&&(e.memoizedState=null),e.flags|=4;return Di(e),null}return null!==Yn&&(As(Yn),Yn=null),0!=(128&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?Qn(e):n=null!==t.memoizedState,r&&!n&&(e.child.flags|=8192,0!=(1&e.mode)&&(null===t||0!=(1&yr.current)?0===ts&&(ts=3):Os())),null!==e.updateQueue&&(e.flags|=4),Di(e),null);case 4:return pr(),_i(t,e),null===t&&Q(e.stateNode.containerInfo),Di(e),null;case 10:return cn(e.type._context),Di(e),null;case 19:if(le(yr),null===(i=e.memoizedState))return Di(e),null;if(r=0!=(128&e.flags),null===(a=i.rendering))if(r)Ii(i,!1);else{if(0!==ts||null!==t&&0!=(128&t.flags))for(t=e.child;null!==t;){if(null!==(a=vr(t))){for(e.flags|=128,Ii(i,!1),null!==(t=a.updateQueue)&&(e.updateQueue=t,e.flags|=4),e.subtreeFlags=0,t=n,r=e.child;null!==r;)i=t,(n=r).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return ce(yr,1&yr.current|2),e.child}t=t.sibling}null!==i.tail&&ze()>ls&&(e.flags|=128,r=!0,Ii(i,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=vr(a))){if(e.flags|=128,r=!0,null!==(t=t.updateQueue)&&(e.updateQueue=t,e.flags|=4),Ii(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!Wn)return Di(e),null}else 2*ze()-i.renderingStartTime>ls&&1073741824!==n&&(e.flags|=128,r=!0,Ii(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(null!==(t=i.last)?t.sibling=a:e.child=a,i.last=a)}return null!==i.tail?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ze(),e.sibling=null,t=yr.current,ce(yr,r?1&t|2:1&t),e):(Di(e),null);case 22:case 23:return Rs(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!=(1&e.mode)?0!=(1073741824&Ka)&&(Di(e),X&&6&e.subtreeFlags&&(e.flags|=8192)):Di(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}var Oi=o.ReactCurrentOwner,Ni=!1;function Fi(t,e,n,r){e.child=null===t?or(e,null,n,r):sr(e,t.child,n,r)}function zi(t,e,n,r,i){n=n.render;var a=e.ref;return hn(e,i),r=Ir(t,e,n,r,a,i),n=Dr(),null===t||Ni?(Wn&&n&&Gn(e),e.flags|=1,Fi(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,aa(t,e,i))}function Ui(t,e,n,r,i){if(null===t){var a=n.type;return"function"!=typeof a||Qs(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=eo(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Gi(t,e,a,r,i))}if(a=t.child,0==(t.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:Qe)(s,r)&&t.ref===e.ref)return aa(t,e,i)}return e.flags|=1,(t=to(a,r)).ref=e.ref,t.return=e,e.child=t}function Gi(t,e,n,r,i){if(null!==t&&Qe(t.memoizedProps,r)&&t.ref===e.ref){if(Ni=!1,0==(t.lanes&i))return e.lanes=t.lanes,aa(t,e,i);0!=(131072&t.flags)&&(Ni=!0)}return Vi(t,e,n,r,i)}function Hi(t,e,n){var r=e.pendingProps,i=r.children,a=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0==(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null},ce(Qa,Ka),Ka|=n;else{if(0==(1073741824&n))return t=null!==a?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null},e.updateQueue=null,ce(Qa,Ka),Ka|=t,null;e.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,ce(Qa,Ka),Ka|=r}else null!==a?(r=a.baseLanes|n,e.memoizedState=null):r=n,ce(Qa,Ka),Ka|=r;return Fi(t,e,i,n),e.child}function ji(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vi(t,e,n,r,i){var a=me(n)?fe:he.current;return a=pe(e,a),hn(e,i),n=Ir(t,e,n,r,a,i),r=Dr(),null===t||Ni?(Wn&&r&&Gn(e),e.flags|=1,Fi(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,aa(t,e,i))}function Wi(t,e,n,r,i){if(me(n)){var a=!0;be(e)}else a=!1;if(hn(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),Tn(e,n,r),kn(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=dn(c):c=pe(e,c=me(n)?fe:he.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==r||l!==c)&&An(e,s,r,c),pn=!1;var d=e.memoizedState;s.state=d,_n(e,r,s,i),l=e.memoizedState,o!==r||d!==l||de.current||pn?("function"==typeof u&&(En(e,n,u,r),l=e.memoizedState),(o=pn||Cn(e,n,o,r,d,l,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(e.flags|=4194308)):("function"==typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"==typeof s.componentDidMount&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,gn(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:en(e.type,o),s.props=c,h=e.pendingProps,d=s.context,"object"==typeof(l=n.contextType)&&null!==l?l=dn(l):l=pe(e,l=me(n)?fe:he.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==h||d!==l)&&An(e,s,r,l),pn=!1,d=e.memoizedState,s.state=d,_n(e,r,s,i);var p=e.memoizedState;o!==h||d!==p||de.current||pn?("function"==typeof f&&(En(e,n,f,r),p=e.memoizedState),(c=pn||Cn(e,n,c,r,d,p,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof s.componentDidUpdate&&(e.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return $i(t,e,n,r,a,i)}function $i(t,e,n,r,i,a){ji(t,e);var s=0!=(128&e.flags);if(!r&&!s)return i&&xe(e,n,!1),aa(t,e,a);r=e.stateNode,Oi.current=e;var o=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=sr(e,t.child,null,a),e.child=sr(e,null,o,a)):Fi(t,e,o,a),e.memoizedState=r.state,i&&xe(e,n,!0),e.child}function Yi(t){var e=t.stateNode;e.pendingContext?ye(0,e.pendingContext,e.pendingContext!==e.context):e.context&&ye(0,e.context,!1),fr(t,e.containerInfo)}function qi(t,e,n,r,i){return tr(),er(i),e.flags|=256,Fi(t,e,n,r),e.child}var Xi={dehydrated:null,treeContext:null,retryLane:0};function Ji(t){return{baseLanes:t,cachePool:null}}function Zi(t,e,n){var r,i=e.pendingProps,a=yr.current,o=!1,l=0!=(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!=(2&a)),r?(o=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),ce(yr,1&a),null===t)return Zn(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0==(1&e.mode)?e.lanes=1:Ft(t)?e.lanes=8:e.lanes=1073741824,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},0==(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=a):o=ro(a,i,0,null),t=no(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Ji(n),e.memoizedState=Xi,t):Ki(e,a));if(null!==(a=t.memoizedState)){if(null!==(r=a.dehydrated)){if(l)return 256&e.flags?(e.flags&=-257,ea(t,e,n,Error(s(422)))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=i.fallback,a=e.mode,i=ro({mode:"visible",children:i.children},a,0,null),(o=no(o,a,n,null)).flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,0!=(1&e.mode)&&sr(e,t.child,null,n),e.child.memoizedState=Ji(n),e.memoizedState=Xi,o);if(0==(1&e.mode))e=ea(t,e,n,null);else if(Ft(r))e=ea(t,e,n,Error(s(419)));else if(i=0!=(n&t.childLanes),Ni||i){if(null!==(i=Xa)){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(i=0!=(o&(i.suspendedLanes|n))?0:o)&&i!==a.retryLane&&(a.retryLane=i,Ss(t,i,-1))}Os(),e=ea(t,e,n,Error(s(421)))}else Nt(r)?(e.flags|=128,e.child=t.child,e=qs.bind(null,t),zt(r,e),e=null):(n=a.treeContext,Z&&(Vn=jt(r),jn=e,Wn=!0,Yn=null,$n=!1,null!==n&&(Dn[Bn++]=Nn,Dn[Bn++]=Fn,Dn[Bn++]=On,Nn=n.id,Fn=n.overflow,On=e)),(e=Ki(e,e.pendingProps.children)).flags|=4096);return e}return o?(i=ta(t,e,i.children,i.fallback,n),o=e.child,a=t.child.memoizedState,o.memoizedState=null===a?Ji(n):{baseLanes:a.baseLanes|n,cachePool:null},o.childLanes=t.childLanes&~n,e.memoizedState=Xi,i):(n=Qi(t,e,i.children,n),e.memoizedState=null,n)}return o?(i=ta(t,e,i.children,i.fallback,n),o=e.child,a=t.child.memoizedState,o.memoizedState=null===a?Ji(n):{baseLanes:a.baseLanes|n,cachePool:null},o.childLanes=t.childLanes&~n,e.memoizedState=Xi,i):(n=Qi(t,e,i.children,n),e.memoizedState=null,n)}function Ki(t,e){return(e=ro({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Qi(t,e,n,r){var i=t.child;return t=i.sibling,n=to(i,{mode:"visible",children:n}),0==(1&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(null===(r=e.deletions)?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n}function ta(t,e,n,r,i){var a=e.mode,s=(t=t.child).sibling,o={mode:"hidden",children:n};return 0==(1&a)&&e.child!==t?((n=e.child).childLanes=0,n.pendingProps=o,e.deletions=null):(n=to(t,o)).subtreeFlags=14680064&t.subtreeFlags,null!==s?r=to(s,r):(r=no(r,a,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function ea(t,e,n,r){return null!==r&&er(r),sr(e,t.child,null,n),(t=Ki(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function na(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),un(t.return,e,n)}function ra(t,e,n,r,i){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ia(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Fi(t,e,r.children,n),0!=(2&(r=yr.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!=(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&na(t,n,e);else if(19===t.tag)na(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ce(yr,r),0==(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===vr(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ra(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===vr(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ra(e,!0,n,null,a);break;case"together":ra(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function aa(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),ns|=e.lanes,0==(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=to(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=to(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function sa(t,e){switch(Hn(e),e.tag){case 1:return me(e.type)&&ge(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return pr(),le(de),le(he),xr(),0!=(65536&(t=e.flags))&&0==(128&t)?(e.flags=-65537&t|128,e):null;case 5:return gr(e),null;case 13:if(le(yr),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));tr()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return le(yr),null;case 4:return pr(),null;case 10:return cn(e.type._context),null;case 22:case 23:return Rs(),null;default:return null}}var oa=!1,la=!1,ca="function"==typeof WeakSet?WeakSet:Set,ua=null;function ha(t,e){var n=t.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Ws(t,e,r)}else n.current=null}function da(t,e,n){try{n()}catch(r){Ws(t,e,r)}}var fa=!1;function pa(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,void 0!==a&&da(e,n,a)}i=i.next}while(i!==r)}}function ma(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ga(t){var e=t.ref;if(null!==e){var n=t.stateNode;if(5===t.tag)t=D(n);else t=n;"function"==typeof e?e(t):e.current=t}}function ya(t,e,n){if(We&&"function"==typeof We.onCommitFiberUnmount)try{We.onCommitFiberUnmount(Ve,e)}catch(s){}switch(e.tag){case 0:case 11:case 14:case 15:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t=t.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!=(2&i)||0!=(4&i))&&da(e,n,a),r=r.next}while(r!==t)}break;case 1:if(ha(e,n),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){Ws(e,n,s)}break;case 5:ha(e,n);break;case 4:X?Ma(t,e,n):J&&J&&(e=e.stateNode.containerInfo,n=At(e),Pt(e,n))}}function va(t,e,n){for(var r=e;;)if(ya(t,r,n),null===r.child||X&&4===r.tag){if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function ba(t){var e=t.alternate;null!==e&&(t.alternate=null,ba(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&et(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xa(t){return 5===t.tag||3===t.tag||4===t.tag}function _a(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||xa(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function wa(t){if(X){t:{for(var e=t.return;null!==e;){if(xa(e))break t;e=e.return}throw Error(s(160))}var n=e;switch(n.tag){case 5:e=n.stateNode,32&n.flags&&(_t(e),n.flags&=-33),Ea(t,n=_a(t),e);break;case 3:case 4:e=n.stateNode.containerInfo,Sa(t,n=_a(t),e);break;default:throw Error(s(161))}}}function Sa(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?vt(n,t,e):ft(n,t);else if(4!==r&&null!==(t=t.child))for(Sa(t,e,n),t=t.sibling;null!==t;)Sa(t,e,n),t=t.sibling}function Ea(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?yt(n,t,e):dt(n,t);else if(4!==r&&null!==(t=t.child))for(Ea(t,e,n),t=t.sibling;null!==t;)Ea(t,e,n),t=t.sibling}function Ma(t,e,n){for(var r,i,a=e,o=!1;;){if(!o){o=a.return;t:for(;;){if(null===o)throw Error(s(160));switch(r=o.stateNode,o.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}o=o.return}o=!0}if(5===a.tag||6===a.tag)va(t,a,n),i?xt(r,a.stateNode):bt(r,a.stateNode);else if(18===a.tag)i?Zt(r,a.stateNode):Jt(r,a.stateNode);else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(ya(t,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function Ca(t,e){if(X){switch(e.tag){case 0:case 11:case 14:case 15:return pa(3,e,e.return),ma(3,e),void pa(5,e,e.return);case 1:case 12:case 17:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps;t=null!==t?t.memoizedProps:r;var i=e.type,a=e.updateQueue;e.updateQueue=null,null!==a&&gt(n,a,i,t,r,e)}return;case 6:if(null===e.stateNode)throw Error(s(162));return n=e.memoizedProps,void pt(e.stateNode,null!==t?t.memoizedProps:n,n);case 3:return void(Z&&null!==t&&t.memoizedState.isDehydrated&&qt(e.stateNode.containerInfo));case 13:case 19:return void Ta(e)}throw Error(s(163))}switch(e.tag){case 0:case 11:case 14:case 15:return pa(3,e,e.return),ma(3,e),void pa(5,e,e.return);case 12:case 22:case 23:return;case 13:case 19:return void Ta(e);case 3:Z&&null!==t&&t.memoizedState.isDehydrated&&qt(e.stateNode.containerInfo)}t:if(J){switch(e.tag){case 1:case 5:case 6:break t;case 3:case 4:e=e.stateNode,Pt(e.containerInfo,e.pendingChildren);break t}throw Error(s(163))}}function Ta(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new ca),e.forEach((function(e){var r=Xs.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function Aa(t,e,n){ua=t,ka(t,e,n)}function ka(t,e,n){for(var r=0!=(1&t.mode);null!==ua;){var i=ua,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||oa;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||la;o=oa;var c=la;if(oa=s,(la=l)&&!c)for(ua=i;null!==ua;)l=(s=ua).child,22===s.tag&&null!==s.memoizedState?Ra(i):null!==l?(l.return=s,ua=l):Ra(i);for(;null!==a;)ua=a,ka(a,e,n),a=a.sibling;ua=i,oa=o,la=c}La(t)}else 0!=(8772&i.subtreeFlags)&&null!==a?(a.return=i,ua=a):La(t)}}function La(t){for(;null!==ua;){var e=ua;if(0!=(8772&e.flags)){var n=e.alternate;try{if(0!=(8772&e.flags))switch(e.tag){case 0:case 11:case 15:la||ma(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!la)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:en(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&wn(e,a,r);break;case 3:var o=e.updateQueue;if(null!==o){if(n=null,null!==e.child)switch(e.child.tag){case 5:n=D(e.child.stateNode);break;case 1:n=e.child.stateNode}wn(e,o,n)}break;case 5:var l=e.stateNode;null===n&&4&e.flags&&mt(l,e.type,e.memoizedProps,e);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(Z&&null===e.memoizedState){var c=e.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Xt(h)}}}break;default:throw Error(s(163))}la||512&e.flags&&ga(e)}catch(d){Ws(e,e.return,d)}}if(e===t){ua=null;break}if(null!==(n=e.sibling)){n.return=e.return,ua=n;break}ua=e.return}}function Pa(t){for(;null!==ua;){var e=ua;if(e===t){ua=null;break}var n=e.sibling;if(null!==n){n.return=e.return,ua=n;break}ua=e.return}}function Ra(t){for(;null!==ua;){var e=ua;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ma(4,e)}catch(l){Ws(e,n,l)}break;case 1:var r=e.stateNode;if("function"==typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Ws(e,i,l)}}var a=e.return;try{ga(e)}catch(l){Ws(e,a,l)}break;case 5:var s=e.return;try{ga(e)}catch(l){Ws(e,s,l)}}}catch(l){Ws(e,e.return,l)}if(e===t){ua=null;break}var o=e.sibling;if(null!==o){o.return=e.return,ua=o;break}ua=e.return}}var Ia=0,Da=1,Ba=2,Oa=3,Na=4;if("function"==typeof Symbol&&Symbol.for){var Fa=Symbol.for;Ia=Fa("selector.component"),Da=Fa("selector.has_pseudo_class"),Ba=Fa("selector.role"),Oa=Fa("selector.test_id"),Na=Fa("selector.text")}function za(t){var e=K(t);if(null!=e){if("string"!=typeof e.memoizedProps["data-testname"])throw Error(s(364));return e}if(null===(t=at(t)))throw Error(s(362));return t.stateNode.current}function Ua(t,e){switch(e.$$typeof){case Ia:if(t.type===e.value)return!0;break;case Da:t:{e=e.value,t=[t,0];for(var n=0;n<t.length;){var r=t[n++],i=t[n++],a=e[i];if(5!==r.tag||!lt(r)){for(;null!=a&&Ua(r,a);)a=e[++i];if(i===e.length){e=!0;break t}for(r=r.child;null!==r;)t.push(r,i),r=r.sibling}}e=!1}return e;case Ba:if(5===t.tag&&ct(t.stateNode,e.value))return!0;break;case Na:if((5===t.tag||6===t.tag)&&(null!==(t=ot(t))&&0<=t.indexOf(e.value)))return!0;break;case Oa:if(5===t.tag&&("string"==typeof(t=t.memoizedProps["data-testname"])&&t.toLowerCase()===e.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Ga(t){switch(t.$$typeof){case Ia:return"<"+(E(t.value)||"Unknown")+">";case Da:return":has("+(Ga(t)||"")+")";case Ba:return'[role="'+t.value+'"]';case Na:return'"'+t.value+'"';case Oa:return'[data-testname="'+t.value+'"]';default:throw Error(s(365))}}function Ha(t,e){var n=[];t=[t,0];for(var r=0;r<t.length;){var i=t[r++],a=t[r++],s=e[a];if(5!==i.tag||!lt(i)){for(;null!=s&&Ua(i,s);)s=e[++a];if(a===e.length)n.push(i);else for(i=i.child;null!==i;)t.push(i,a),i=i.sibling}}return n}function ja(t,e){if(!it)throw Error(s(363));t=Ha(t=za(t),e),e=[],t=Array.from(t);for(var n=0;n<t.length;){var r=t[n++];if(5===r.tag)lt(r)||e.push(r.stateNode);else for(r=r.child;null!==r;)t.push(r),r=r.sibling}return e}var Va=Math.ceil,Wa=o.ReactCurrentDispatcher,$a=o.ReactCurrentOwner,Ya=o.ReactCurrentBatchConfig,qa=0,Xa=null,Ja=null,Za=0,Ka=0,Qa=oe(0),ts=0,es=null,ns=0,rs=0,is=0,as=null,ss=null,os=0,ls=1/0;function cs(){ls=ze()+500}var us,hs=!1,ds=null,fs=null,ps=!1,ms=null,gs=0,ys=0,vs=null,bs=-1,xs=0;function _s(){return 0!=(6&qa)?ze():-1!==bs?bs:bs=ze()}function ws(t){return 0==(1&t.mode)?1:0!=(2&qa)&&0!==Za?Za&-Za:null!==Ke.transition?(0===xs&&(t=Ee,0==(4194240&(Ee<<=1))&&(Ee=64),xs=t),xs):0!==(t=Ie)?t:tt()}function Ss(t,e,n){if(50<ys)throw ys=0,vs=null,Error(s(185));var r=Es(t,e);return null===r?null:(Pe(r,e,n),0!=(2&qa)&&r===Xa||(r===Xa&&(0==(2&qa)&&(rs|=e),4===ts&&ks(r,Za)),Ms(r,n),1===e&&0===qa&&0==(1&t.mode)&&(cs(),qe&&Ze())),r)}function Es(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function Ms(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-_e(a),o=1<<s,l=i[s];-1===l?0!=(o&n)&&0==(o&r)||(i[s]=Ae(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}}(t,e);var r=Te(t,t===Xa?Za:0);if(0===r)null!==n&&Oe(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Oe(n),1===e)0===t.tag?function(t){qe=!0,Je(t)}(Ls.bind(null,t)):Je(Ls.bind(null,t)),nt?rt((function(){0===qa&&Ze()})):Be(Ue,Ze),n=null;else{switch(De(r)){case 1:n=Ue;break;case 4:n=Ge;break;case 16:default:n=He;break;case 536870912:n=je}n=Js(n,Cs.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Cs(t,e){if(bs=-1,xs=0,0!=(6&qa))throw Error(s(327));var n=t.callbackNode;if(js()&&t.callbackNode!==n)return null;var r=Te(t,t===Xa?Za:0);if(0===r)return null;if(0!=(30&r)||0!=(r&t.expiredLanes)||e)e=Ns(t,r);else{e=r;var i=qa;qa|=2;var a=Bs();for(Xa===t&&Za===e||(cs(),Is(t,e));;)try{zs();break}catch(l){Ds(t,l)}on(),Wa.current=a,qa=i,null!==Ja?e=0:(Xa=null,Za=0,e=ts)}if(0!==e){if(2===e&&(0!==(i=ke(t))&&(r=i,e=Ts(t,i))),1===e)throw n=es,Is(t,0),ks(t,r),Ms(t,ze()),n;if(6===e)ks(t,r);else{if(i=t.current.alternate,0==(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!$e(a(),i))return!1}catch(o){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=Ns(t,r))&&(0!==(a=ke(t))&&(r=a,e=Ts(t,a))),1===e))throw n=es,Is(t,0),ks(t,r),Ms(t,ze()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(s(345));case 2:case 5:Hs(t,ss);break;case 3:if(ks(t,r),(130023424&r)===r&&10<(e=os+500-ze())){if(0!==Te(t,0))break;if(((i=t.suspendedLanes)&r)!==r){_s(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=W(Hs.bind(null,t,ss),e);break}Hs(t,ss);break;case 4:if(ks(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-_e(r);a=1<<o,(o=e[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Va(r/1960))-r)){t.timeoutHandle=W(Hs.bind(null,t,ss),r);break}Hs(t,ss);break;default:throw Error(s(329))}}}return Ms(t,ze()),t.callbackNode===n?Cs.bind(null,t):null}function Ts(t,e){var n=as;return t.current.memoizedState.isDehydrated&&(Is(t,e).flags|=256),2!==(t=Ns(t,e))&&(e=ss,ss=n,null!==e&&As(e)),t}function As(t){null===ss?ss=t:ss.push.apply(ss,t)}function ks(t,e){for(e&=~is,e&=~rs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_e(e),r=1<<n;t[n]=-1,e&=~r}}function Ls(t){if(0!=(6&qa))throw Error(s(327));js();var e=Te(t,0);if(0==(1&e))return Ms(t,ze()),null;var n=Ns(t,e);if(0!==t.tag&&2===n){var r=ke(t);0!==r&&(e=r,n=Ts(t,r))}if(1===n)throw n=es,Is(t,0),ks(t,e),Ms(t,ze()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hs(t,ss),Ms(t,ze()),null}function Ps(t){null!==ms&&0===ms.tag&&0==(6&qa)&&js();var e=qa;qa|=1;var n=Ya.transition,r=Ie;try{if(Ya.transition=null,Ie=1,t)return t()}finally{Ie=r,Ya.transition=n,0==(6&(qa=e))&&Ze()}}function Rs(){Ka=Qa.current,le(Qa)}function Is(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==Y&&(t.timeoutHandle=Y,$(n)),null!==Ja)for(n=Ja.return;null!==n;){var r=n;switch(Hn(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&ge();break;case 3:pr(),le(de),le(he),xr();break;case 5:gr(r);break;case 4:pr();break;case 13:case 19:le(yr);break;case 10:cn(r.type._context);break;case 22:case 23:Rs()}n=n.return}if(Xa=t,Ja=t=to(t.current,null),Za=Ka=e,ts=0,es=null,is=rs=ns=0,ss=as=null,null!==fn){for(e=0;e<fn.length;e++)if(null!==(r=(n=fn[e]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}fn=null}return t}function Ds(t,e){for(;;){var n=Ja;try{if(on(),_r.current=pi,Tr){for(var r=Er.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Tr=!1}if(Sr=0,Cr=Mr=Er=null,Ar=!1,kr=0,$a.current=null,null===n||null===n.return){ts=1,es=e,Ja=null;break}t:{var a=t,o=n.return,l=n,c=e;if(e=Za,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,h=l,d=h.tag;if(0==(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Ai(o);if(null!==p){p.flags&=-257,ki(p,o,l,0,e),1&p.mode&&Ti(a,u,e),c=u;var m=(e=p).updateQueue;if(null===m){var g=new Set;g.add(c),e.updateQueue=g}else m.add(c);break t}if(0==(1&e)){Ti(a,u,e),Os();break t}c=Error(s(426))}else if(Wn&&1&l.mode){var y=Ai(o);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),ki(y,o,l,0,e),er(c);break t}}a=c,4!==ts&&(ts=2),null===as?as=[a]:as.push(a),c=vi(c,l),l=o;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e,xn(l,Mi(0,c,e));break t;case 1:a=c;var v=l.type,b=l.stateNode;if(0==(128&l.flags)&&("function"==typeof v.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===fs||!fs.has(b)))){l.flags|=65536,e&=-e,l.lanes|=e,xn(l,Ci(l,a,e));break t}}l=l.return}while(null!==l)}Gs(n)}catch(x){e=x,Ja===n&&null!==n&&(Ja=n=n.return);continue}break}}function Bs(){var t=Wa.current;return Wa.current=pi,null===t?pi:t}function Os(){0!==ts&&3!==ts&&2!==ts||(ts=4),null===Xa||0==(268435455&ns)&&0==(268435455&rs)||ks(Xa,Za)}function Ns(t,e){var n=qa;qa|=2;var r=Bs();for(Xa===t&&Za===e||Is(t,e);;)try{Fs();break}catch(i){Ds(t,i)}if(on(),qa=n,Wa.current=r,null!==Ja)throw Error(s(261));return Xa=null,Za=0,ts}function Fs(){for(;null!==Ja;)Us(Ja)}function zs(){for(;null!==Ja&&!Ne();)Us(Ja)}function Us(t){var e=us(t.alternate,t,Ka);t.memoizedProps=t.pendingProps,null===e?Gs(t):Ja=e,$a.current=null}function Gs(t){var e=t;do{var n=e.alternate;if(t=e.return,0==(32768&e.flags)){if(null!==(n=Bi(n,e,Ka)))return void(Ja=n)}else{if(null!==(n=sa(n,e)))return n.flags&=32767,void(Ja=n);if(null===t)return ts=6,void(Ja=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Ja=e);Ja=e=t}while(null!==e);0===ts&&(ts=5)}function Hs(t,e){var n=Ie,r=Ya.transition;try{Ya.transition=null,Ie=1,function(t,e,n){do{js()}while(null!==ms);if(0!=(6&qa))throw Error(s(327));var r=t.finishedWork,i=t.finishedLanes;if(null===r)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-_e(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}(t,a),t===Xa&&(Ja=Xa=null,Za=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||ps||(ps=!0,Js(He,(function(){return js(),null}))),a=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||a){a=Ya.transition,Ya.transition=null;var o=Ie;Ie=1;var l=qa;qa|=4,$a.current=null,function(t,e){for(N(t.containerInfo),ua=e;null!==ua;)if(e=(t=ua).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,ua=e;else for(;null!==ua;){t=ua;try{var n=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,a=t.stateNode,o=a.getSnapshotBeforeUpdate(t.elementType===t.type?r:en(t.type,r),i);a.__reactInternalSnapshotBeforeUpdate=o}break;case 3:X&&Ct(t.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(l){Ws(t,t.return,l)}if(null!==(e=t.sibling)){e.return=t.return,ua=e;break}ua=t.return}n=fa,fa=!1}(t,r),function(t,e){for(ua=e;null!==ua;){var n=(e=ua).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t;X?Ma(a,i,e):va(a,i,e);var s=i.alternate;null!==s&&(s.return=null),i.return=null}catch(_){Ws(i,e,_)}}if(n=e.child,0!=(12854&e.subtreeFlags)&&null!==n)n.return=e,ua=n;else for(;null!==ua;){e=ua;try{var o=e.flags;if(32&o&&X&&_t(e.stateNode),512&o){var l=e.alternate;if(null!==l){var c=l.ref;null!==c&&("function"==typeof c?c(null):c.current=null)}}if(8192&o)switch(e.tag){case 13:if(null!==e.memoizedState){var u=e.alternate;null!==u&&null!==u.memoizedState||(os=ze())}break;case 22:var h=null!==e.memoizedState,d=e.alternate,f=null!==d&&null!==d.memoizedState;if(n=e,X)t:if(r=n,i=h,a=null,X)for(var p=r;;){if(5===p.tag){if(null===a){a=p;var m=p.stateNode;i?wt(m):Et(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===a){var g=p.stateNode;i?St(g):Mt(g,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break t;a===p&&(a=null),p=p.return}a===p&&(a=null),p.sibling.return=p.return,p=p.sibling}if(h&&!f&&0!=(1&n.mode)){ua=n;for(var y=n.child;null!==y;){for(n=ua=y;null!==ua;){var v=(r=ua).child;switch(r.tag){case 0:case 11:case 14:case 15:pa(4,r,r.return);break;case 1:ha(r,r.return);var b=r.stateNode;if("function"==typeof b.componentWillUnmount){var x=r.return;try{b.props=r.memoizedProps,b.state=r.memoizedState,b.componentWillUnmount()}catch(_){Ws(r,x,_)}}break;case 5:ha(r,r.return);break;case 22:if(null!==r.memoizedState){Pa(n);continue}}null!==v?(v.return=r,ua=v):Pa(n)}y=y.sibling}}}switch(4102&o){case 2:wa(e),e.flags&=-3;break;case 6:wa(e),e.flags&=-3,Ca(e.alternate,e);break;case 4096:e.flags&=-4097;break;case 4100:e.flags&=-4097,Ca(e.alternate,e);break;case 4:Ca(e.alternate,e)}}catch(_){Ws(e,e.return,_)}if(null!==(n=e.sibling)){n.return=e.return,ua=n;break}ua=e.return}}}(t,r),F(t.containerInfo),t.current=r,Aa(r,t,i),Fe(),qa=l,Ie=o,Ya.transition=a}else t.current=r;if(ps&&(ps=!1,ms=t,gs=i),a=t.pendingLanes,0===a&&(fs=null),function(t){if(We&&"function"==typeof We.onCommitFiberRoot)try{We.onCommitFiberRoot(Ve,t,void 0,128==(128&t.current.flags))}catch(e){}}(r.stateNode),Ms(t,ze()),null!==e)for(n=t.onRecoverableError,r=0;r<e.length;r++)n(e[r]);if(hs)throw hs=!1,t=ds,ds=null,t;0!=(1&gs)&&0!==t.tag&&js(),a=t.pendingLanes,0!=(1&a)?t===vs?ys++:(ys=0,vs=t):ys=0,Ze()}(t,e,n)}finally{Ya.transition=r,Ie=n}return null}function js(){if(null!==ms){var t=De(gs),e=Ya.transition,n=Ie;try{if(Ya.transition=null,Ie=16>t?16:t,null===ms)var r=!1;else{if(t=ms,ms=null,gs=0,0!=(6&qa))throw Error(s(331));var i=qa;for(qa|=4,ua=t.current;null!==ua;){var a=ua,o=a.child;if(0!=(16&ua.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(ua=u;null!==ua;){var h=ua;switch(h.tag){case 0:case 11:case 15:pa(8,h,a)}var d=h.child;if(null!==d)d.return=h,ua=d;else for(;null!==ua;){var f=(h=ua).sibling,p=h.return;if(ba(h),h===u){ua=null;break}if(null!==f){f.return=p,ua=f;break}ua=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}ua=a}}if(0!=(2064&a.subtreeFlags)&&null!==o)o.return=a,ua=o;else t:for(;null!==ua;){if(0!=(2048&(a=ua).flags))switch(a.tag){case 0:case 11:case 15:pa(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,ua=v;break t}ua=a.return}}var b=t.current;for(ua=b;null!==ua;){var x=(o=ua).child;if(0!=(2064&o.subtreeFlags)&&null!==x)x.return=o,ua=x;else t:for(o=b;null!==ua;){if(0!=(2048&(l=ua).flags))try{switch(l.tag){case 0:case 11:case 15:ma(9,l)}}catch(w){Ws(l,l.return,w)}if(l===o){ua=null;break t}var _=l.sibling;if(null!==_){_.return=l.return,ua=_;break t}ua=l.return}}if(qa=i,Ze(),We&&"function"==typeof We.onPostCommitFiberRoot)try{We.onPostCommitFiberRoot(Ve,t)}catch(w){}r=!0}return r}finally{Ie=n,Ya.transition=e}}return!1}function Vs(t,e,n){vn(t,e=Mi(0,e=vi(n,e),1)),e=_s(),null!==(t=Es(t,1))&&(Pe(t,1,e),Ms(t,e))}function Ws(t,e,n){if(3===t.tag)Vs(t,t,n);else for(;null!==e;){if(3===e.tag){Vs(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===fs||!fs.has(r))){vn(e,t=Ci(e,t=vi(n,t),1)),t=_s(),null!==(e=Es(e,1))&&(Pe(e,1,t),Ms(e,t));break}}e=e.return}}function $s(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=_s(),t.pingedLanes|=t.suspendedLanes&n,Xa===t&&(Za&n)===n&&(4===ts||3===ts&&(130023424&Za)===Za&&500>ze()-os?Is(t,0):is|=n),Ms(t,e)}function Ys(t,e){0===e&&(0==(1&t.mode)?e=1:(e=Me,0==(130023424&(Me<<=1))&&(Me=4194304)));var n=_s();null!==(t=Es(t,e))&&(Pe(t,e,n),Ms(t,n))}function qs(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Ys(t,n)}function Xs(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(e),Ys(t,n)}function Js(t,e){return Be(t,e)}function Zs(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(t,e,n,r){return new Zs(t,e,n,r)}function Qs(t){return!(!(t=t.prototype)||!t.isReactComponent)}function to(t,e){var n=t.alternate;return null===n?((n=Ks(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function eo(t,e,n,r,i,a){var o=2;if(r=t,"function"==typeof t)Qs(t)&&(o=1);else if("string"==typeof t)o=5;else t:switch(t){case h:return no(n.children,i,a,e);case d:o=8,i|=8;break;case f:return(t=Ks(12,n,e,2|i)).elementType=f,t.lanes=a,t;case y:return(t=Ks(13,n,e,i)).elementType=y,t.lanes=a,t;case v:return(t=Ks(19,n,e,i)).elementType=v,t.lanes=a,t;case _:return ro(n,i,a,e);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case p:o=10;break t;case m:o=9;break t;case g:o=11;break t;case b:o=14;break t;case x:o=16,r=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Ks(o,n,e,i)).elementType=t,e.type=r,e.lanes=a,e}function no(t,e,n,r){return(t=Ks(7,t,r,e)).lanes=n,t}function ro(t,e,n,r){return(t=Ks(22,t,r,e)).elementType=_,t.lanes=n,t.stateNode={},t}function io(t,e,n){return(t=Ks(6,t,null,e)).lanes=n,t}function ao(t,e,n){return(e=Ks(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function so(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Y,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Le(0),this.expirationTimes=Le(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Le(0),this.identifierPrefix=r,this.onRecoverableError=i,Z&&(this.mutableSourceEagerHydrationData=null)}function oo(t,e,n,r,i,a,s,o,l){return t=new so(t,e,n,o,l),1===e?(e=1,!0===a&&(e|=8)):e=0,a=Ks(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},mn(a),t}function lo(t){if(!t)return ue;t:{if(C(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(me(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(me(n))return ve(t,n,e)}return e}function co(t){var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return null===(t=k(e))?null:t.stateNode}function uo(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function ho(t,e){uo(t,e),(t=t.alternate)&&uo(t,e)}function fo(t){return null===(t=k(t))?null:t.stateNode}function po(){return null}return us=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||de.current)Ni=!0;else{if(0==(t.lanes&n)&&0==(128&e.flags))return Ni=!1,function(t,e,n){switch(e.tag){case 3:Yi(e),tr();break;case 5:mr(e);break;case 1:me(e.type)&&be(e);break;case 4:fr(e,e.stateNode.containerInfo);break;case 10:ln(0,e.type._context,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(null!==r)return null!==r.dehydrated?(ce(yr,1&yr.current),e.flags|=128,null):0!=(n&e.child.childLanes)?Zi(t,e,n):(ce(yr,1&yr.current),null!==(t=aa(t,e,n))?t.sibling:null);ce(yr,1&yr.current);break;case 19:if(r=0!=(n&e.childLanes),0!=(128&t.flags)){if(r)return ia(t,e,n);e.flags|=128}var i=e.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),ce(yr,yr.current),r)break;return null;case 22:case 23:return e.lanes=0,Hi(t,e,n)}return aa(t,e,n)}(t,e,n);Ni=0!=(131072&t.flags)}else Ni=!1,Wn&&0!=(1048576&e.flags)&&Un(e,In,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps;var i=pe(e,he.current);hn(e,n),i=Ir(null,e,r,t,i,n);var a=Dr();return e.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,me(r)?(a=!0,be(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,mn(e),i.updater=Mn,e.stateNode=i,i._reactInternals=e,kn(e,r,t,n),e=$i(null,e,r,!0,a,n)):(e.tag=0,Wn&&a&&Gn(e),Fi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"==typeof t)return Qs(t)?1:0;if(null!=t){if((t=t.$$typeof)===g)return 11;if(t===b)return 14}return 2}(r),t=en(r,t),i){case 0:e=Vi(null,e,r,t,n);break t;case 1:e=Wi(null,e,r,t,n);break t;case 11:e=zi(null,e,r,t,n);break t;case 14:e=Ui(null,e,r,en(r.type,t),n);break t}throw Error(s(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Vi(t,e,r,i=e.elementType===r?i:en(r,i),n);case 1:return r=e.type,i=e.pendingProps,Wi(t,e,r,i=e.elementType===r?i:en(r,i),n);case 3:t:{if(Yi(e),null===t)throw Error(s(387));r=e.pendingProps,i=(a=e.memoizedState).element,gn(t,e),_n(e,r,null,n);var o=e.memoizedState;if(r=o.element,Z&&a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=qi(t,e,r,n,i=Error(s(423)));break t}if(r!==i){e=qi(t,e,r,n,i=Error(s(424)));break t}for(Z&&(Vn=Ht(e.stateNode.containerInfo),jn=e,Wn=!0,Yn=null,$n=!1),n=or(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(tr(),r===i){e=aa(t,e,n);break t}Fi(t,e,r,n)}e=e.child}return e;case 5:return mr(e),null===t&&Zn(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,o=i.children,j(r,i)?o=null:null!==a&&j(r,a)&&(e.flags|=32),ji(t,e),Fi(t,e,o,n),e.child;case 6:return null===t&&Zn(e),null;case 13:return Zi(t,e,n);case 4:return fr(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=sr(e,null,r,n):Fi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,zi(t,e,r,i=e.elementType===r?i:en(r,i),n);case 7:return Fi(t,e,e.pendingProps,n),e.child;case 8:case 12:return Fi(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,ln(0,r,o=i.value),null!==a)if($e(a.value,o)){if(a.children===i.children&&!de.current){e=aa(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=yn(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),un(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),un(o,n,e),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}Fi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hn(e,n),r=r(i=dn(i)),e.flags|=1,Fi(t,e,r,n),e.child;case 14:return i=en(r=e.type,e.pendingProps),Ui(t,e,r,i=en(r.type,i),n);case 15:return Gi(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:en(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,me(r)?(t=!0,be(e)):t=!1,hn(e,n),Tn(e,r,i),kn(e,r,i,n),$i(null,e,r,!0,t,n);case 19:return ia(t,e,n);case 22:return Hi(t,e,n)}throw Error(s(156,e.tag))},e.attemptContinuousHydration=function(t){13===t.tag&&(Ss(t,134217728,_s()),ho(t,134217728))},e.attemptHydrationAtCurrentPriority=function(t){if(13===t.tag){var e=_s(),n=ws(t);Ss(t,n,e),ho(t,n)}},e.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ce(e.pendingLanes);0!==n&&(Re(e,1|n),Ms(e,ze()),0==(6&qa)&&(cs(),Ze()))}break;case 13:var r=_s();Ps((function(){return Ss(t,1,r)})),ho(t,1)}},e.batchedUpdates=function(t,e){var n=qa;qa|=1;try{return t(e)}finally{0===(qa=n)&&(cs(),qe&&Ze())}},e.createComponentSelector=function(t){return{$$typeof:Ia,value:t}},e.createContainer=function(t,e,n,r,i,a,s){return oo(t,e,!1,null,0,r,0,a,s)},e.createHasPseudoClassSelector=function(t){return{$$typeof:Da,value:t}},e.createHydrationContainer=function(t,e,n,r,i,a,s,o,l){return(t=oo(n,r,!0,t,0,a,0,o,l)).context=lo(null),n=t.current,(a=yn(r=_s(),i=ws(n))).callback=null!=e?e:null,vn(n,a),t.current.lanes=i,Pe(t,i,r),Ms(t,r),t},e.createPortal=function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:u,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}},e.createRoleSelector=function(t){return{$$typeof:Ba,value:t}},e.createTestNameSelector=function(t){return{$$typeof:Oa,value:t}},e.createTextSelector=function(t){return{$$typeof:Na,value:t}},e.deferredUpdates=function(t){var e=Ie,n=Ya.transition;try{return Ya.transition=null,Ie=16,t()}finally{Ie=e,Ya.transition=n}},e.discreteUpdates=function(t,e,n,r,i){var a=Ie,s=Ya.transition;try{return Ya.transition=null,Ie=1,t(e,n,r,i)}finally{Ie=a,Ya.transition=s,0===qa&&cs()}},e.findAllNodes=ja,e.findBoundingRects=function(t,e){if(!it)throw Error(s(363));e=ja(t,e),t=[];for(var n=0;n<e.length;n++)t.push(st(e[n]));for(e=t.length-1;0<e;e--)for(var r=(n=t[e]).x,i=r+n.width,a=n.y,o=a+n.height,l=e-1;0<=l;l--)if(e!==l){var c=t[l],u=c.x,h=u+c.width,d=c.y,f=d+c.height;if(r>=u&&a>=d&&i<=h&&o<=f){t.splice(e,1);break}if(!(r!==u||n.width!==c.width||f<a||d>o)){d>a&&(c.height+=d-a,c.y=a),f<o&&(c.height=o-d),t.splice(e,1);break}if(!(a!==d||n.height!==c.height||h<r||u>i)){u>r&&(c.width+=u-r,c.x=r),h<i&&(c.width=i-u),t.splice(e,1);break}}return t},e.findHostInstance=co,e.findHostInstanceWithNoPortals=function(t){return null===(t=null!==(t=A(t))?P(t):null)?null:t.stateNode},e.findHostInstanceWithWarning=function(t){return co(t)},e.flushControlled=function(t){var e=qa;qa|=1;var n=Ya.transition,r=Ie;try{Ya.transition=null,Ie=1,t()}finally{Ie=r,Ya.transition=n,0===(qa=e)&&(cs(),Ze())}},e.flushPassiveEffects=js,e.flushSync=Ps,e.focusWithin=function(t,e){if(!it)throw Error(s(363));for(e=Ha(t=za(t),e),e=Array.from(e),t=0;t<e.length;){var n=e[t++];if(!lt(n)){if(5===n.tag&&ut(n.stateNode))return!0;for(n=n.child;null!==n;)e.push(n),n=n.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Ie},e.getFindAllNodesFailureDescription=function(t,e){if(!it)throw Error(s(363));var n=0,r=[];t=[za(t),0];for(var i=0;i<t.length;){var a=t[i++],o=t[i++],l=e[o];if((5!==a.tag||!lt(a))&&(Ua(a,l)&&(r.push(Ga(l)),++o>n&&(n=o)),o<e.length))for(a=a.child;null!==a;)t.push(a,o),a=a.sibling}if(n<e.length){for(t=[];n<e.length;n++)t.push(Ga(e[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+t.join(" > ")}return null},e.getPublicRootInstance=function(t){return(t=t.current).child?5===t.child.tag?D(t.child.stateNode):t.child.stateNode:null},e.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:fo,findFiberByHostInstance:t.findFiberByHostInstance||po,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)t=!1;else{var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)t=!0;else{try{Ve=e.inject(t),We=e}catch(c){}t=!!e.checkDCE}}return t},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(t,e,n,r){if(!it)throw Error(s(363));t=ja(t,e);var i=ht(t,n,r).disconnect;return{disconnect:function(){i()}}},e.registerMutableSourceForHydration=function(t,e){var n=e._getVersion;n=n(e._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[e,n]:t.mutableSourceEagerHydrationData.push(e,n)},e.runWithPriority=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(t,e,n,r){var i=e.current,a=_s(),s=ws(i);return n=lo(n),null===e.context?e.context=n:e.pendingContext=n,(e=yn(a,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),vn(i,e),null!==(t=Ss(i,s,a))&&bn(t,i,s),s},e}},2576:(t,e,n)=>{"use strict";t.exports=n(6511)},6525:(t,e,n)=>{"use strict";t.exports=n(7287)},460:(t,e,n)=>{"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(7294));function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var l=90,c=219,u=222,h=192,d=100,f=3e3,p="navigator"in n.g&&/Win/i.test(navigator.platform),m="navigator"in n.g&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),g="npm__react-simple-code-editor__textarea",y="\n/**\n * Reset the text fill color so that placeholder is visible\n */\n."+g+":empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  ."+g+" {\n    color: transparent !important;\n  }\n\n  ."+g+"::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n",v=function(t){function e(){var t,n,i;s(this,e);for(var a=arguments.length,g=Array(a),y=0;y<a;y++)g[y]=arguments[y];return n=i=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(g))),i.state={capture:!0},i._recordCurrentState=function(){var t=i._input;if(t){var e=t.value,n=t.selectionStart,r=t.selectionEnd;i._recordChange({value:e,selectionStart:n,selectionEnd:r})}},i._getLines=function(t,e){return t.substring(0,e).split("\n")},i._recordChange=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=i._history,a=n.stack,s=n.offset;if(a.length&&s>-1){i._history.stack=a.slice(0,s+1);var o=i._history.stack.length;if(o>d){var l=o-d;i._history.stack=a.slice(l,o),i._history.offset=Math.max(i._history.offset-l,0)}}var c=Date.now();if(e){var u=i._history.stack[i._history.offset];if(u&&c-u.timestamp<f){var h=/[^a-z0-9]([a-z0-9]+)$/i,p=i._getLines(u.value,u.selectionStart).pop().match(h),m=i._getLines(t.value,t.selectionStart).pop().match(h);if(p&&m&&m[1].startsWith(p[1]))return void(i._history.stack[i._history.offset]=r({},t,{timestamp:c}))}}i._history.stack.push(r({},t,{timestamp:c})),i._history.offset++},i._updateInput=function(t){var e=i._input;e&&(e.value=t.value,e.selectionStart=t.selectionStart,e.selectionEnd=t.selectionEnd,i.props.onValueChange(t.value))},i._applyEdits=function(t){var e=i._input,n=i._history.stack[i._history.offset];n&&e&&(i._history.stack[i._history.offset]=r({},n,{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})),i._recordChange(t),i._updateInput(t)},i._undoEdit=function(){var t=i._history,e=t.stack,n=t.offset,r=e[n-1];r&&(i._updateInput(r),i._history.offset=Math.max(n-1,0))},i._redoEdit=function(){var t=i._history,e=t.stack,n=t.offset,r=e[n+1];r&&(i._updateInput(r),i._history.offset=Math.min(n+1,e.length-1))},i._handleKeyDown=function(t){var e=i.props,n=e.tabSize,r=e.insertSpaces,a=e.ignoreTabKey,s=e.onKeyDown;if(!s||(s(t),!t.defaultPrevented)){27===t.keyCode&&t.target.blur();var o=t.target,d=o.value,f=o.selectionStart,g=o.selectionEnd,y=(r?" ":"\t").repeat(n);if(9===t.keyCode&&!a&&i.state.capture)if(t.preventDefault(),t.shiftKey){var v=i._getLines(d,f),b=v.length-1,x=i._getLines(d,g).length-1,_=d.split("\n").map((function(t,e){return e>=b&&e<=x&&t.startsWith(y)?t.substring(y.length):t})).join("\n");if(d!==_){var w=v[b];i._applyEdits({value:_,selectionStart:w.startsWith(y)?f-y.length:f,selectionEnd:g-(d.length-_.length)})}}else if(f!==g){var S=i._getLines(d,f),E=S.length-1,M=i._getLines(d,g).length-1,C=S[E];i._applyEdits({value:d.split("\n").map((function(t,e){return e>=E&&e<=M?y+t:t})).join("\n"),selectionStart:/\S/.test(C)?f+y.length:f,selectionEnd:g+y.length*(M-E+1)})}else{var T=f+y.length;i._applyEdits({value:d.substring(0,f)+y+d.substring(g),selectionStart:T,selectionEnd:T})}else if(8===t.keyCode){var A=f!==g;if(d.substring(0,f).endsWith(y)&&!A){t.preventDefault();var k=f-y.length;i._applyEdits({value:d.substring(0,f-y.length)+d.substring(g),selectionStart:k,selectionEnd:k})}}else if(13===t.keyCode){if(f===g){var L=i._getLines(d,f).pop().match(/^\s+/);if(L&&L[0]){t.preventDefault();var P="\n"+L[0],R=f+P.length;i._applyEdits({value:d.substring(0,f)+P+d.substring(g),selectionStart:R,selectionEnd:R})}}}else if(57===t.keyCode||t.keyCode===c||t.keyCode===u||t.keyCode===h){var I=void 0;57===t.keyCode&&t.shiftKey?I=["(",")"]:t.keyCode===c?I=t.shiftKey?["{","}"]:["[","]"]:t.keyCode===u?I=t.shiftKey?['"','"']:["'","'"]:t.keyCode!==h||t.shiftKey||(I=["`","`"]),f!==g&&I&&(t.preventDefault(),i._applyEdits({value:d.substring(0,f)+I[0]+d.substring(f,g)+I[1]+d.substring(g),selectionStart:f,selectionEnd:g+2}))}else!(m?t.metaKey&&t.keyCode===l:t.ctrlKey&&t.keyCode===l)||t.shiftKey||t.altKey?(m?t.metaKey&&t.keyCode===l&&t.shiftKey:p?t.ctrlKey&&89===t.keyCode:t.ctrlKey&&t.keyCode===l&&t.shiftKey)&&!t.altKey?(t.preventDefault(),i._redoEdit()):77!==t.keyCode||!t.ctrlKey||m&&!t.shiftKey||(t.preventDefault(),i.setState((function(t){return{capture:!t.capture}}))):(t.preventDefault(),i._undoEdit())}},i._handleChange=function(t){var e=t.target,n=e.value,r=e.selectionStart,a=e.selectionEnd;i._recordChange({value:n,selectionStart:r,selectionEnd:a},!0),i.props.onValueChange(n)},i._history={stack:[],offset:-1},o(i,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){this._recordCurrentState()}},{key:"render",value:function(){var t=this,e=this.props,n=e.value,i=e.style,s=e.padding,o=e.highlight,l=e.textareaId,c=e.autoFocus,u=e.disabled,h=e.form,d=e.maxLength,f=e.minLength,p=e.name,m=e.placeholder,v=e.readOnly,x=e.required,_=e.onClick,w=e.onFocus,S=e.onBlur,E=e.onKeyUp,M=(e.onKeyDown,e.onValueChange,e.tabSize,e.insertSpaces,e.ignoreTabKey,function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(e,["value","style","padding","highlight","textareaId","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey"])),C={paddingTop:s,paddingRight:s,paddingBottom:s,paddingLeft:s},T=o(n);return a.createElement("div",r({},M,{style:r({},b.container,i)}),a.createElement("textarea",{ref:function(e){return t._input=e},style:r({},b.editor,b.textarea,C),className:g,id:l,value:n,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:_,onKeyUp:E,onFocus:w,onBlur:S,disabled:u,form:h,maxLength:d,minLength:f,name:p,placeholder:m,readOnly:v,required:x,autoFocus:c,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),a.createElement("pre",r({"aria-hidden":"true",style:r({},b.editor,b.highlight,C)},"string"==typeof T?{dangerouslySetInnerHTML:{__html:T+"<br />"}}:{children:T})),a.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:y}}))}},{key:"session",get:function(){return{history:this._history}},set:function(t){this._history=t.history}}]),e}(a.Component);v.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},e.Z=v;var b={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}}},3641:(t,e,n)=>{"use strict";n.d(e,{lH:()=>iy,xs:()=>cx});var r=n(7294);const i="143",a={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},s={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o=100,l=204,c=205,u=300,h=301,d=302,f=303,p=304,m=306,g=1e3,y=1001,v=1002,b=1003,x=1004,_=1005,w=1006,S=1007,E=1008,M=1009,C=1012,T=1014,A=1015,k=1016,L=1020,P=1023,R=1026,I=1027,D=33776,B=33777,O=33778,N=33779,F=35840,z=35841,U=35842,G=35843,H=37492,j=37496,V=37808,W=37809,$=37810,Y=37811,q=37812,X=37813,J=37814,Z=37815,K=37816,Q=37817,tt=37818,et=37819,nt=37820,rt=37821,it=36492,at=2300,st=2301,ot=2302,lt=2400,ct=2401,ut=2402,ht=2500,dt=2501,ft=3e3,pt=3001,mt=3200,gt=3201,yt="srgb",vt="srgb-linear",bt=7680,xt=35044,_t="300 es",wt=1035;class St{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t);t.target=null}}}const Et=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Mt=1234567;const Ct=Math.PI/180,Tt=180/Math.PI;function At(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Et[255&t]+Et[t>>8&255]+Et[t>>16&255]+Et[t>>24&255]+"-"+Et[255&e]+Et[e>>8&255]+"-"+Et[e>>16&15|64]+Et[e>>24&255]+"-"+Et[63&n|128]+Et[n>>8&255]+"-"+Et[n>>16&255]+Et[n>>24&255]+Et[255&r]+Et[r>>8&255]+Et[r>>16&255]+Et[r>>24&255]).toLowerCase()}function kt(t,e,n){return Math.max(e,Math.min(n,t))}function Lt(t,e){return(t%e+e)%e}function Pt(t,e,n){return(1-n)*t+n*e}function Rt(t){return 0==(t&t-1)&&0!==t}function It(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Dt(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var Bt=Object.freeze({__proto__:null,DEG2RAD:Ct,RAD2DEG:Tt,generateUUID:At,clamp:kt,euclideanModulo:Lt,mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:Pt,damp:function(t,e,n,r){return Pt(t,e,1-Math.exp(-n*r))},pingpong:function(t,e=1){return e-Math.abs(Lt(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(Mt=t);let e=Mt+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*Ct},radToDeg:function(t){return t*Tt},isPowerOfTwo:Rt,ceilPowerOfTwo:It,floorPowerOfTwo:Dt,setQuaternionFromProperEuler:function(t,e,n,r,i){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),c=a((e+r)/2),u=s((e+r)/2),h=a((e-r)/2),d=s((e-r)/2),f=a((r-e)/2),p=s((r-e)/2);switch(i){case"XYX":t.set(o*u,l*h,l*d,o*c);break;case"YZY":t.set(l*d,o*u,l*h,o*c);break;case"ZXZ":t.set(l*h,l*d,o*u,o*c);break;case"XZX":t.set(o*u,l*p,l*f,o*c);break;case"YXY":t.set(l*f,o*u,l*p,o*c);break;case"ZYZ":t.set(l*p,l*f,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:function(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}},denormalize:function(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}});class Ot{constructor(t=0,e=0){Ot.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,a=this.y-t.y;return this.x=i*n-a*r+t.x,this.y=i*r+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Nt{constructor(){Nt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,i,a,s,o,l){const c=this.elements;return c[0]=t,c[1]=r,c[2]=s,c[3]=e,c[4]=i,c[5]=o,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],y=r[1],v=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=a*p+s*y+o*x,i[3]=a*m+s*v+o*_,i[6]=a*g+s*b+o*w,i[1]=l*p+c*y+u*x,i[4]=l*m+c*v+u*_,i[7]=l*g+c*b+u*w,i[2]=h*p+d*y+f*x,i[5]=h*m+d*v+f*_,i[8]=h*g+d*b+f*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],s=t[5],o=t[6],l=t[7],c=t[8];return e*a*c-e*s*l-n*i*c+n*s*o+r*i*l-r*a*o}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],s=t[5],o=t[6],l=t[7],c=t[8],u=c*a-s*l,h=s*o-c*i,d=l*i-a*o,f=e*u+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return t[0]=u*p,t[1]=(r*l-c*n)*p,t[2]=(s*n-r*a)*p,t[3]=h*p,t[4]=(c*e-r*o)*p,t[5]=(r*i-s*e)*p,t[6]=d*p,t[7]=(n*o-l*e)*p,t[8]=(a*e-n*i)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,a,s){const o=Math.cos(i),l=Math.sin(i);return this.set(n*o,n*l,-n*(o*a+l*s)+a+t,-r*l,r*o,-r*(-l*a+o*s)+s+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],a=r[3],s=r[6],o=r[1],l=r[4],c=r[7];return r[0]=e*i+n*o,r[3]=e*a+n*l,r[6]=e*s+n*c,r[1]=-n*i+e*o,r[4]=-n*a+e*l,r[7]=-n*s+e*c,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function Ft(t){for(let e=t.length-1;e>=0;--e)if(t[e]>65535)return!0;return!1}const zt={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ut(t,e){return new zt[t](e)}function Gt(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Ht(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function jt(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const Vt={[yt]:{[vt]:Ht},[vt]:{[yt]:jt}},Wt={legacyMode:!0,get workingColorSpace(){return vt},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(Vt[e]&&void 0!==Vt[e][n]){const r=Vt[e][n];return t.r=r(t.r),t.g=r(t.g),t.b=r(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},$t={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Yt={r:0,g:0,b:0},qt={h:0,s:0,l:0},Xt={h:0,s:0,l:0};function Jt(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function Zt(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class Kt{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=yt){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Wt.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=vt){return this.r=t,this.g=e,this.b=n,Wt.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=vt){if(t=Lt(t,1),e=kt(e,0,1),n=kt(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=Jt(i,r,t+1/3),this.g=Jt(i,r,t),this.b=Jt(i,r,t-1/3)}return Wt.toWorkingColorSpace(this,r),this}setStyle(t,e=yt){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=r[1],a=r[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,Wt.toWorkingColorSpace(this,e),n(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,Wt.toWorkingColorSpace(this,e),n(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const r=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,a=parseInt(t[3],10)/100;return n(t[4]),this.setHSL(r,i,a,e)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=r[1],n=t.length;if(3===n)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,Wt.toWorkingColorSpace(this,e),this;if(6===n)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,Wt.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=yt){const n=$t[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ht(t.r),this.g=Ht(t.g),this.b=Ht(t.b),this}copyLinearToSRGB(t){return this.r=jt(t.r),this.g=jt(t.g),this.b=jt(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=yt){return Wt.fromWorkingColorSpace(Zt(this,Yt),t),kt(255*Yt.r,0,255)<<16^kt(255*Yt.g,0,255)<<8^kt(255*Yt.b,0,255)<<0}getHexString(t=yt){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=vt){Wt.fromWorkingColorSpace(Zt(this,Yt),e);const n=Yt.r,r=Yt.g,i=Yt.b,a=Math.max(n,r,i),s=Math.min(n,r,i);let o,l;const c=(s+a)/2;if(s===a)o=0,l=0;else{const t=a-s;switch(l=c<=.5?t/(a+s):t/(2-a-s),a){case n:o=(r-i)/t+(r<i?6:0);break;case r:o=(i-n)/t+2;break;case i:o=(n-r)/t+4}o/=6}return t.h=o,t.s=l,t.l=c,t}getRGB(t,e=vt){return Wt.fromWorkingColorSpace(Zt(this,Yt),e),t.r=Yt.r,t.g=Yt.g,t.b=Yt.b,t}getStyle(t=yt){return Wt.fromWorkingColorSpace(Zt(this,Yt),t),t!==yt?`color(${t} ${Yt.r} ${Yt.g} ${Yt.b})`:`rgb(${255*Yt.r|0},${255*Yt.g|0},${255*Yt.b|0})`}offsetHSL(t,e,n){return this.getHSL(qt),qt.h+=t,qt.s+=e,qt.l+=n,this.setHSL(qt.h,qt.s,qt.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(qt),t.getHSL(Xt);const n=Pt(qt.h,Xt.h,e),r=Pt(qt.s,Xt.s,e),i=Pt(qt.l,Xt.l,e);return this.setHSL(n,r,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let Qt;Kt.NAMES=$t;class te{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Qt&&(Qt=Gt("canvas")),Qt.width=t.width,Qt.height=t.height;const n=Qt.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Qt}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Gt("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*Ht(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*Ht(e[t]/255)):e[t]=Ht(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class ee{constructor(t=null){this.isSource=!0,this.uuid=At(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(ne(r[e].image)):t.push(ne(r[e]))}else t=ne(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function ne(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?te.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let re=0;class ie extends St{constructor(t=ie.DEFAULT_IMAGE,e=ie.DEFAULT_MAPPING,n=y,r=y,i=w,a=E,s=P,o=M,l=1,c=ft){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:re++}),this.uuid=At(),this.name="",this.source=new ee(t),this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new Ot(0,0),this.repeat=new Ot(1,1),this.center=new Ot(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==u)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case g:t.x=t.x-Math.floor(t.x);break;case y:t.x=t.x<0?0:1;break;case v:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case g:t.y=t.y-Math.floor(t.y);break;case y:t.y=t.y<0?0:1;break;case v:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}ie.DEFAULT_IMAGE=null,ie.DEFAULT_MAPPING=u;class ae{constructor(t=0,e=0,n=0,r=1){ae.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*e+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*e+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*e+a[7]*n+a[11]*r+a[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const a=t.elements,s=a[0],o=a[4],l=a[8],c=a[1],u=a[5],h=a[9],d=a[2],f=a[6],p=a[10];if(Math.abs(o-c)<.01&&Math.abs(l-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(o+c)<.1&&Math.abs(l+d)<.1&&Math.abs(h+f)<.1&&Math.abs(s+u+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(s+1)/2,a=(u+1)/2,m=(p+1)/2,g=(o+c)/4,y=(l+d)/4,v=(h+f)/4;return t>a&&t>m?t<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=g/n,i=y/n):a>m?a<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=g/r,i=v/r):m<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(m),n=y/i,r=v/i),this.set(n,r,i,e),this}let m=Math.sqrt((f-h)*(f-h)+(l-d)*(l-d)+(c-o)*(c-o));return Math.abs(m)<.001&&(m=1),this.x=(f-h)/m,this.y=(l-d)/m,this.z=(c-o)/m,this.w=Math.acos((s+u+p-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class se extends St{constructor(t,e,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new ae(0,0,t,e),this.scissorTest=!1,this.viewport=new ae(0,0,t,e);const r={width:t,height:e,depth:1};this.texture=new ie(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:w,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new ee(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class oe extends ie{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=b,this.minFilter=b,this.wrapR=y,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class le extends ie{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=b,this.minFilter=b,this.wrapR=y,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ce{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,a,s){let o=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[a+0],d=i[a+1],f=i[a+2],p=i[a+3];if(0===s)return t[e+0]=o,t[e+1]=l,t[e+2]=c,void(t[e+3]=u);if(1===s)return t[e+0]=h,t[e+1]=d,t[e+2]=f,void(t[e+3]=p);if(u!==p||o!==h||l!==d||c!==f){let t=1-s;const e=o*h+l*d+c*f+u*p,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),a=Math.atan2(i,e*n);t=Math.sin(t*a)/i,s=Math.sin(s*a)/i}const i=s*n;if(o=o*t+h*i,l=l*t+d*i,c=c*t+f*i,u=u*t+p*i,t===1-s){const t=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=t,l*=t,c*=t,u*=t}}t[e]=o,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,r,i,a){const s=n[r],o=n[r+1],l=n[r+2],c=n[r+3],u=i[a],h=i[a+1],d=i[a+2],f=i[a+3];return t[e]=s*f+c*u+o*d-l*h,t[e+1]=o*f+c*h+l*u-s*d,t[e+2]=l*f+c*d+s*h-o*u,t[e+3]=c*f-s*u-o*h-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,r=t._y,i=t._z,a=t._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(r/2),u=s(i/2),h=o(n/2),d=o(r/2),f=o(i/2);switch(a){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],a=e[1],s=e[5],o=e[9],l=e[2],c=e[6],u=e[10],h=n+s+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(c-o)*t,this._y=(i-l)*t,this._z=(a-r)*t}else if(n>s&&n>u){const t=2*Math.sqrt(1+n-s-u);this._w=(c-o)/t,this._x=.25*t,this._y=(r+a)/t,this._z=(i+l)/t}else if(s>u){const t=2*Math.sqrt(1+s-n-u);this._w=(i-l)/t,this._x=(r+a)/t,this._y=.25*t,this._z=(o+c)/t}else{const t=2*Math.sqrt(1+u-n-s);this._w=(a-r)/t,this._x=(i+l)/t,this._y=(o+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(kt(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,a=t._w,s=e._x,o=e._y,l=e._z,c=e._w;return this._x=n*c+a*s+r*l-i*o,this._y=r*c+a*o+i*s-n*l,this._z=i*c+a*l+n*o-r*s,this._w=a*c-n*s-r*o-i*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,a=this._w;let s=a*t._w+n*t._x+r*t._y+i*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;const o=1-s*s;if(o<=Number.EPSILON){const t=1-e;return this._w=t*a+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),u=Math.sin((1-e)*c)/l,h=Math.sin(e*c)/l;return this._w=a*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(i),n*Math.cos(i),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ue{constructor(t=0,e=0,n=0){ue.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(de.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(de.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,a=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,s=t.z,o=t.w,l=o*e+a*r-s*n,c=o*n+s*e-i*r,u=o*r+i*n-a*e,h=-i*e-a*n-s*r;return this.x=l*o+h*-i+c*-s-u*-a,this.y=c*o+h*-a+u*-i-l*-s,this.z=u*o+h*-s+l*-a-c*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,a=e.x,s=e.y,o=e.z;return this.x=r*o-i*s,this.y=i*a-n*o,this.z=n*s-r*a,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return he.copy(this).projectOnVector(t),this.sub(he)}reflect(t){return this.sub(he.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(kt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const he=new ue,de=new ce;class fe{constructor(t=new ue(1/0,1/0,1/0),e=new ue(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,s=-1/0;for(let o=0,l=t.length;o<l;o+=3){const l=t[o],c=t[o+1],u=t[o+2];l<e&&(e=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>a&&(a=c),u>s&&(s=u)}return this.min.set(e,n,r),this.max.set(i,a,s),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,s=-1/0;for(let o=0,l=t.count;o<l;o++){const l=t.getX(o),c=t.getY(o),u=t.getZ(o);l<e&&(e=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>a&&(a=c),u>s&&(s=u)}return this.min.set(e,n,r),this.max.set(i,a,s),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=me.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,r=e.count;n<r;n++)me.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(me)}else null===n.boundingBox&&n.computeBoundingBox(),ge.copy(n.boundingBox),ge.applyMatrix4(t.matrixWorld),this.union(ge);const r=t.children;for(let i=0,a=r.length;i<a;i++)this.expandByObject(r[i],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,me),me.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Se),Ee.subVectors(this.max,Se),ye.subVectors(t.a,Se),ve.subVectors(t.b,Se),be.subVectors(t.c,Se),xe.subVectors(ve,ye),_e.subVectors(be,ve),we.subVectors(ye,be);let e=[0,-xe.z,xe.y,0,-_e.z,_e.y,0,-we.z,we.y,xe.z,0,-xe.x,_e.z,0,-_e.x,we.z,0,-we.x,-xe.y,xe.x,0,-_e.y,_e.x,0,-we.y,we.x,0];return!(!Te(e,ye,ve,be,Ee)||(e=[1,0,0,0,1,0,0,0,1],!Te(e,ye,ve,be,Ee)))&&(Me.crossVectors(xe,_e),e=[Me.x,Me.y,Me.z],Te(e,ye,ve,be,Ee))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return me.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(me).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(pe[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),pe[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),pe[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),pe[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),pe[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),pe[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),pe[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),pe[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(pe)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const pe=[new ue,new ue,new ue,new ue,new ue,new ue,new ue,new ue],me=new ue,ge=new fe,ye=new ue,ve=new ue,be=new ue,xe=new ue,_e=new ue,we=new ue,Se=new ue,Ee=new ue,Me=new ue,Ce=new ue;function Te(t,e,n,r,i){for(let a=0,s=t.length-3;a<=s;a+=3){Ce.fromArray(t,a);const s=i.x*Math.abs(Ce.x)+i.y*Math.abs(Ce.y)+i.z*Math.abs(Ce.z),o=e.dot(Ce),l=n.dot(Ce),c=r.dot(Ce);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const Ae=new fe,ke=new ue,Le=new ue,Pe=new ue;class Re{constructor(t=new ue,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Ae.setFromPoints(t).getCenter(n);let r=0;for(let i=0,a=t.length;i<a;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){Pe.subVectors(t,this.center);const e=Pe.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.add(Pe.multiplyScalar(n/t)),this.radius+=n}return this}union(t){return!0===this.center.equals(t.center)?Le.set(0,0,1).multiplyScalar(t.radius):Le.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(ke.copy(t.center).add(Le)),this.expandByPoint(ke.copy(t.center).sub(Le)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ie=new ue,De=new ue,Be=new ue,Oe=new ue,Ne=new ue,Fe=new ue,ze=new ue;class Ue{constructor(t=new ue,e=new ue(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Ie)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Ie.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Ie.copy(this.direction).multiplyScalar(e).add(this.origin),Ie.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){De.copy(t).add(e).multiplyScalar(.5),Be.copy(e).sub(t).normalize(),Oe.copy(this.origin).sub(De);const i=.5*t.distanceTo(e),a=-this.direction.dot(Be),s=Oe.dot(this.direction),o=-Oe.dot(Be),l=Oe.lengthSq(),c=Math.abs(1-a*a);let u,h,d,f;if(c>0)if(u=a*o-s,h=a*s-o,f=i*c,u>=0)if(h>=-f)if(h<=f){const t=1/c;u*=t,h*=t,d=u*(u+a*h+2*s)+h*(a*u+h+2*o)+l}else h=i,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;else h=-i,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;else h<=-f?(u=Math.max(0,-(-a*i+s)),h=u>0?-i:Math.min(Math.max(-i,-o),i),d=-u*u+h*(h+2*o)+l):h<=f?(u=0,h=Math.min(Math.max(-i,-o),i),d=h*(h+2*o)+l):(u=Math.max(0,-(a*i+s)),h=u>0?i:Math.min(Math.max(-i,-o),i),d=-u*u+h*(h+2*o)+l);else h=a>0?-i:i,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(Be).multiplyScalar(h).add(De),d}intersectSphere(t,e){Ie.subVectors(t.center,this.origin);const n=Ie.dot(this.direction),r=Ie.dot(Ie)-n*n,i=t.radius*t.radius;if(r>i)return null;const a=Math.sqrt(i-r),s=n-a,o=n+a;return s<0&&o<0?null:s<0?this.at(o,e):this.at(s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,r=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,r=(t.min.x-h.x)*l),c>=0?(i=(t.min.y-h.y)*c,a=(t.max.y-h.y)*c):(i=(t.max.y-h.y)*c,a=(t.min.y-h.y)*c),n>a||i>r||((i>n||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),u>=0?(s=(t.min.z-h.z)*u,o=(t.max.z-h.z)*u):(s=(t.max.z-h.z)*u,o=(t.min.z-h.z)*u),n>o||s>r)||((s>n||n!=n)&&(n=s),(o<r||r!=r)&&(r=o),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,Ie)}intersectTriangle(t,e,n,r,i){Ne.subVectors(e,t),Fe.subVectors(n,t),ze.crossVectors(Ne,Fe);let a,s=this.direction.dot(ze);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}Oe.subVectors(this.origin,t);const o=a*this.direction.dot(Fe.crossVectors(Oe,Fe));if(o<0)return null;const l=a*this.direction.dot(Ne.cross(Oe));if(l<0||o+l>s)return null;const c=-a*Oe.dot(ze);return c<0?null:this.at(c/s,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ge{constructor(){Ge.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,r,i,a,s,o,l,c,u,h,d,f,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ge).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/He.setFromMatrixColumn(t,0).length(),i=1/He.setFromMatrixColumn(t,1).length(),a=1/He.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,i=t.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===t.order){const t=a*c,n=a*u,r=s*c,i=s*u;e[0]=o*c,e[4]=-o*u,e[8]=l,e[1]=n+r*l,e[5]=t-i*l,e[9]=-s*o,e[2]=i-t*l,e[6]=r+n*l,e[10]=a*o}else if("YXZ"===t.order){const t=o*c,n=o*u,r=l*c,i=l*u;e[0]=t+i*s,e[4]=r*s-n,e[8]=a*l,e[1]=a*u,e[5]=a*c,e[9]=-s,e[2]=n*s-r,e[6]=i+t*s,e[10]=a*o}else if("ZXY"===t.order){const t=o*c,n=o*u,r=l*c,i=l*u;e[0]=t-i*s,e[4]=-a*u,e[8]=r+n*s,e[1]=n+r*s,e[5]=a*c,e[9]=i-t*s,e[2]=-a*l,e[6]=s,e[10]=a*o}else if("ZYX"===t.order){const t=a*c,n=a*u,r=s*c,i=s*u;e[0]=o*c,e[4]=r*l-n,e[8]=t*l+i,e[1]=o*u,e[5]=i*l+t,e[9]=n*l-r,e[2]=-l,e[6]=s*o,e[10]=a*o}else if("YZX"===t.order){const t=a*o,n=a*l,r=s*o,i=s*l;e[0]=o*c,e[4]=i-t*u,e[8]=r*u+n,e[1]=u,e[5]=a*c,e[9]=-s*c,e[2]=-l*c,e[6]=n*u+r,e[10]=t-i*u}else if("XZY"===t.order){const t=a*o,n=a*l,r=s*o,i=s*l;e[0]=o*c,e[4]=-u,e[8]=l*c,e[1]=t*u+i,e[5]=a*c,e[9]=n*u-r,e[2]=r*u-n,e[6]=s*c,e[10]=i*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Ve,t,We)}lookAt(t,e,n){const r=this.elements;return qe.subVectors(t,e),0===qe.lengthSq()&&(qe.z=1),qe.normalize(),$e.crossVectors(n,qe),0===$e.lengthSq()&&(1===Math.abs(n.z)?qe.x+=1e-4:qe.z+=1e-4,qe.normalize(),$e.crossVectors(n,qe)),$e.normalize(),Ye.crossVectors(qe,$e),r[0]=$e.x,r[4]=Ye.x,r[8]=qe.x,r[1]=$e.y,r[5]=Ye.y,r[9]=qe.y,r[2]=$e.z,r[6]=Ye.z,r[10]=qe.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],y=n[3],v=n[7],b=n[11],x=n[15],_=r[0],w=r[4],S=r[8],E=r[12],M=r[1],C=r[5],T=r[9],A=r[13],k=r[2],L=r[6],P=r[10],R=r[14],I=r[3],D=r[7],B=r[11],O=r[15];return i[0]=a*_+s*M+o*k+l*I,i[4]=a*w+s*C+o*L+l*D,i[8]=a*S+s*T+o*P+l*B,i[12]=a*E+s*A+o*R+l*O,i[1]=c*_+u*M+h*k+d*I,i[5]=c*w+u*C+h*L+d*D,i[9]=c*S+u*T+h*P+d*B,i[13]=c*E+u*A+h*R+d*O,i[2]=f*_+p*M+m*k+g*I,i[6]=f*w+p*C+m*L+g*D,i[10]=f*S+p*T+m*P+g*B,i[14]=f*E+p*A+m*R+g*O,i[3]=y*_+v*M+b*k+x*I,i[7]=y*w+v*C+b*L+x*D,i[11]=y*S+v*T+b*P+x*B,i[15]=y*E+v*A+b*R+x*O,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],a=t[1],s=t[5],o=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+i*o*u-r*l*u-i*s*h+n*l*h+r*s*d-n*o*d)+t[7]*(+e*o*d-e*l*h+i*a*h-r*a*d+r*l*c-i*o*c)+t[11]*(+e*l*u-e*s*d-i*a*u+n*a*d+i*s*c-n*l*c)+t[15]*(-r*s*c-e*o*u+e*s*h+r*a*u-n*a*h+n*o*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],s=t[5],o=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15],y=u*m*l-p*h*l+p*o*d-s*m*d-u*o*g+s*h*g,v=f*h*l-c*m*l-f*o*d+a*m*d+c*o*g-a*h*g,b=c*p*l-f*u*l+f*s*d-a*p*d-c*s*g+a*u*g,x=f*u*o-c*p*o-f*s*h+a*p*h+c*s*m-a*u*m,_=e*y+n*v+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return t[0]=y*w,t[1]=(p*h*i-u*m*i-p*r*d+n*m*d+u*r*g-n*h*g)*w,t[2]=(s*m*i-p*o*i+p*r*l-n*m*l-s*r*g+n*o*g)*w,t[3]=(u*o*i-s*h*i-u*r*l+n*h*l+s*r*d-n*o*d)*w,t[4]=v*w,t[5]=(c*m*i-f*h*i+f*r*d-e*m*d-c*r*g+e*h*g)*w,t[6]=(f*o*i-a*m*i-f*r*l+e*m*l+a*r*g-e*o*g)*w,t[7]=(a*h*i-c*o*i+c*r*l-e*h*l-a*r*d+e*o*d)*w,t[8]=b*w,t[9]=(f*u*i-c*p*i-f*n*d+e*p*d+c*n*g-e*u*g)*w,t[10]=(a*p*i-f*s*i+f*n*l-e*p*l-a*n*g+e*s*g)*w,t[11]=(c*s*i-a*u*i-c*n*l+e*u*l+a*n*d-e*s*d)*w,t[12]=x*w,t[13]=(c*p*r-f*u*r+f*n*h-e*p*h-c*n*m+e*u*m)*w,t[14]=(f*s*r-a*p*r-f*n*o+e*p*o+a*n*m-e*s*m)*w,t[15]=(a*u*r-c*s*r+c*n*o-e*u*o-a*n*h+e*s*h)*w,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,a=t.x,s=t.y,o=t.z,l=i*a,c=i*s;return this.set(l*a+n,l*s-r*o,l*o+r*s,0,l*s+r*o,c*s+n,c*o-r*a,0,l*o-r*s,c*o+r*a,i*o*o+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,a){return this.set(1,n,i,0,t,1,a,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,a=e._y,s=e._z,o=e._w,l=i+i,c=a+a,u=s+s,h=i*l,d=i*c,f=i*u,p=a*c,m=a*u,g=s*u,y=o*l,v=o*c,b=o*u,x=n.x,_=n.y,w=n.z;return r[0]=(1-(p+g))*x,r[1]=(d+b)*x,r[2]=(f-v)*x,r[3]=0,r[4]=(d-b)*_,r[5]=(1-(h+g))*_,r[6]=(m+y)*_,r[7]=0,r[8]=(f+v)*w,r[9]=(m-y)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=He.set(r[0],r[1],r[2]).length();const a=He.set(r[4],r[5],r[6]).length(),s=He.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],je.copy(this);const o=1/i,l=1/a,c=1/s;return je.elements[0]*=o,je.elements[1]*=o,je.elements[2]*=o,je.elements[4]*=l,je.elements[5]*=l,je.elements[6]*=l,je.elements[8]*=c,je.elements[9]*=c,je.elements[10]*=c,e.setFromRotationMatrix(je),n.x=i,n.y=a,n.z=s,this}makePerspective(t,e,n,r,i,a){const s=this.elements,o=2*i/(e-t),l=2*i/(n-r),c=(e+t)/(e-t),u=(n+r)/(n-r),h=-(a+i)/(a-i),d=-2*a*i/(a-i);return s[0]=o,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,e,n,r,i,a){const s=this.elements,o=1/(e-t),l=1/(n-r),c=1/(a-i),u=(e+t)*o,h=(n+r)*l,d=(a+i)*c;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const He=new ue,je=new Ge,Ve=new ue(0,0,0),We=new ue(1,1,1),$e=new ue,Ye=new ue,qe=new ue,Xe=new Ge,Je=new ce;class Ze{constructor(t=0,e=0,n=0,r=Ze.DefaultOrder){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,i=r[0],a=r[4],s=r[8],o=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin(kt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-kt(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(kt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-kt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(kt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-kt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Xe.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Xe,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Je.setFromEuler(this),this.setFromQuaternion(Je,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Ze.DefaultOrder="XYZ",Ze.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Ke{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Qe=0;const tn=new ue,en=new ce,nn=new Ge,rn=new ue,an=new ue,sn=new ue,on=new ce,ln=new ue(1,0,0),cn=new ue(0,1,0),un=new ue(0,0,1),hn={type:"added"},dn={type:"removed"};class fn extends St{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Qe++}),this.uuid=At(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fn.DefaultUp.clone();const t=new ue,e=new Ze,n=new ce,r=new ue(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ge},normalMatrix:{value:new Nt}}),this.matrix=new Ge,this.matrixWorld=new Ge,this.matrixAutoUpdate=fn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ke,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return en.setFromAxisAngle(t,e),this.quaternion.multiply(en),this}rotateOnWorldAxis(t,e){return en.setFromAxisAngle(t,e),this.quaternion.premultiply(en),this}rotateX(t){return this.rotateOnAxis(ln,t)}rotateY(t){return this.rotateOnAxis(cn,t)}rotateZ(t){return this.rotateOnAxis(un,t)}translateOnAxis(t,e){return tn.copy(t).applyQuaternion(this.quaternion),this.position.add(tn.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(ln,t)}translateY(t){return this.translateOnAxis(cn,t)}translateZ(t){return this.translateOnAxis(un,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(nn.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?rn.copy(t):rn.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),an.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?nn.lookAt(an,rn,this.up):nn.lookAt(rn,an,this.up),this.quaternion.setFromRotationMatrix(nn),r&&(nn.extractRotation(r.matrixWorld),en.setFromRotationMatrix(nn),this.quaternion.premultiply(en.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(hn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(dn)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(dn)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),nn.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),nn.multiply(t.parent.matrixWorld)),t.applyMatrix4(nn),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(an,t,sn),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(an,on,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=a(t.geometries),r=a(t.materials),i=a(t.textures),s=a(t.images),o=a(t.shapes),l=a(t.skeletons),c=a(t.animations),u=a(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function a(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}fn.DefaultUp=new ue(0,1,0),fn.DefaultMatrixAutoUpdate=!0;const pn=new ue,mn=new ue,gn=new ue,yn=new ue,vn=new ue,bn=new ue,xn=new ue,_n=new ue,wn=new ue,Sn=new ue;class En{constructor(t=new ue,e=new ue,n=new ue){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),pn.subVectors(t,e),r.cross(pn);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){pn.subVectors(r,e),mn.subVectors(n,e),gn.subVectors(t,e);const a=pn.dot(pn),s=pn.dot(mn),o=pn.dot(gn),l=mn.dot(mn),c=mn.dot(gn),u=a*l-s*s;if(0===u)return i.set(-2,-1,-1);const h=1/u,d=(l*o-s*c)*h,f=(a*c-s*o)*h;return i.set(1-d-f,f,d)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,yn),yn.x>=0&&yn.y>=0&&yn.x+yn.y<=1}static getUV(t,e,n,r,i,a,s,o){return this.getBarycoord(t,e,n,r,yn),o.set(0,0),o.addScaledVector(i,yn.x),o.addScaledVector(a,yn.y),o.addScaledVector(s,yn.z),o}static isFrontFacing(t,e,n,r){return pn.subVectors(n,e),mn.subVectors(t,e),pn.cross(mn).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return pn.subVectors(this.c,this.b),mn.subVectors(this.a,this.b),.5*pn.cross(mn).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return En.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return En.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return En.getUV(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return En.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return En.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let a,s;vn.subVectors(r,n),bn.subVectors(i,n),_n.subVectors(t,n);const o=vn.dot(_n),l=bn.dot(_n);if(o<=0&&l<=0)return e.copy(n);wn.subVectors(t,r);const c=vn.dot(wn),u=bn.dot(wn);if(c>=0&&u<=c)return e.copy(r);const h=o*u-c*l;if(h<=0&&o>=0&&c<=0)return a=o/(o-c),e.copy(n).addScaledVector(vn,a);Sn.subVectors(t,i);const d=vn.dot(Sn),f=bn.dot(Sn);if(f>=0&&d<=f)return e.copy(i);const p=d*l-o*f;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),e.copy(n).addScaledVector(bn,s);const m=c*f-d*u;if(m<=0&&u-c>=0&&d-f>=0)return xn.subVectors(i,r),s=(u-c)/(u-c+(d-f)),e.copy(r).addScaledVector(xn,s);const g=1/(m+p+h);return a=p*g,s=h*g,e.copy(n).addScaledVector(vn,a).addScaledVector(bn,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Mn=0;class Cn extends St{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Mn++}),this.uuid=At(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=l,this.blendDst=c,this.blendEquation=o,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=bt,this.stencilZFail=bt,this.stencilZPass=bt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class Tn extends Cn{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Kt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const An=new ue,kn=new Ot;class Ln{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=xt,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Kt),e[n++]=i.r,e[n++]=i.g,e[n++]=i.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Ot),e[n++]=i.x,e[n++]=i.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new ue),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new ae),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z,e[n++]=i.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)kn.fromBufferAttribute(this,e),kn.applyMatrix3(t),this.setXY(e,kn.x,kn.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)An.fromBufferAttribute(this,e),An.applyMatrix3(t),this.setXYZ(e,An.x,An.y,An.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)An.fromBufferAttribute(this,e),An.applyMatrix4(t),this.setXYZ(e,An.x,An.y,An.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)An.fromBufferAttribute(this,e),An.applyNormalMatrix(t),this.setXYZ(e,An.x,An.y,An.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)An.fromBufferAttribute(this,e),An.transformDirection(t),this.setXYZ(e,An.x,An.y,An.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==xt&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}}class Pn extends Ln{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Rn extends Ln{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class In extends Ln{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Dn=0;const Bn=new Ge,On=new fn,Nn=new ue,Fn=new fe,zn=new fe,Un=new ue;class Gn extends St{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Dn++}),this.uuid=At(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Ft(t)?Rn:Pn)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Nt).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Bn.makeRotationFromQuaternion(t),this.applyMatrix4(Bn),this}rotateX(t){return Bn.makeRotationX(t),this.applyMatrix4(Bn),this}rotateY(t){return Bn.makeRotationY(t),this.applyMatrix4(Bn),this}rotateZ(t){return Bn.makeRotationZ(t),this.applyMatrix4(Bn),this}translate(t,e,n){return Bn.makeTranslation(t,e,n),this.applyMatrix4(Bn),this}scale(t,e,n){return Bn.makeScale(t,e,n),this.applyMatrix4(Bn),this}lookAt(t){return On.lookAt(t),On.updateMatrix(),this.applyMatrix4(On.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Nn).negate(),this.translate(Nn.x,Nn.y,Nn.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new In(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new fe);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ue(-1/0,-1/0,-1/0),new ue(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++){const t=e[n];Fn.setFromBufferAttribute(t),this.morphTargetsRelative?(Un.addVectors(this.boundingBox.min,Fn.min),this.boundingBox.expandByPoint(Un),Un.addVectors(this.boundingBox.max,Fn.max),this.boundingBox.expandByPoint(Un)):(this.boundingBox.expandByPoint(Fn.min),this.boundingBox.expandByPoint(Fn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Re);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ue,1/0);if(t){const n=this.boundingSphere.center;if(Fn.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const n=e[t];zn.setFromBufferAttribute(n),this.morphTargetsRelative?(Un.addVectors(Fn.min,zn.min),Fn.expandByPoint(Un),Un.addVectors(Fn.max,zn.max),Fn.expandByPoint(Un)):(Fn.expandByPoint(zn.min),Fn.expandByPoint(zn.max))}Fn.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)Un.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(Un));if(e)for(let i=0,a=e.length;i<a;i++){const a=e[i],s=this.morphTargetsRelative;for(let e=0,i=a.count;e<i;e++)Un.fromBufferAttribute(a,e),s&&(Nn.fromBufferAttribute(t,e),Un.add(Nn)),r=Math.max(r,n.distanceToSquared(Un))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,a=e.uv.array,s=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ln(new Float32Array(4*s),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let M=0;M<s;M++)l[M]=new ue,c[M]=new ue;const u=new ue,h=new ue,d=new ue,f=new Ot,p=new Ot,m=new Ot,g=new ue,y=new ue;function v(t,e,n){u.fromArray(r,3*t),h.fromArray(r,3*e),d.fromArray(r,3*n),f.fromArray(a,2*t),p.fromArray(a,2*e),m.fromArray(a,2*n),h.sub(u),d.sub(u),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);!isFinite(i)||(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(i),y.copy(d).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(i),l[t].add(g),l[e].add(g),l[n].add(g),c[t].add(y),c[e].add(y),c[n].add(y))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let M=0,C=b.length;M<C;++M){const t=b[M],e=t.start;for(let r=e,i=e+t.count;r<i;r+=3)v(n[r+0],n[r+1],n[r+2])}const x=new ue,_=new ue,w=new ue,S=new ue;function E(t){w.fromArray(i,3*t),S.copy(w);const e=l[t];x.copy(e),x.sub(w.multiplyScalar(w.dot(e))).normalize(),_.crossVectors(S,e);const n=_.dot(c[t])<0?-1:1;o[4*t]=x.x,o[4*t+1]=x.y,o[4*t+2]=x.z,o[4*t+3]=n}for(let M=0,C=b.length;M<C;++M){const t=b[M],e=t.start;for(let r=e,i=e+t.count;r<i;r+=3)E(n[r+0]),E(n[r+1]),E(n[r+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Ln(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new ue,i=new ue,a=new ue,s=new ue,o=new ue,l=new ue,c=new ue,u=new ue;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),f=t.getX(h+1),p=t.getX(h+2);r.fromBufferAttribute(e,d),i.fromBufferAttribute(e,f),a.fromBufferAttribute(e,p),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),s.fromBufferAttribute(n,d),o.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),s.add(c),o.add(c),l.add(c),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(f,o.x,o.y,o.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,h=e.count;t<h;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),a.fromBufferAttribute(e,t+2),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===t.attributes[r])continue;const i=n[r].array,a=t.attributes[r],s=a.array,o=a.itemSize*e,l=Math.min(s.length,i.length-o);for(let t=0,e=o;t<l;t++,e++)i[e]=s[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Un.fromBufferAttribute(t,e),Un.normalize(),t.setXYZ(e,Un.x,Un.y,Un.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,a=new n.constructor(e.length*r);let s=0,o=0;for(let l=0,c=e.length;l<c;l++){s=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*r;for(let t=0;t<r;t++)a[o++]=n[s++]}return new Ln(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Gn,n=this.index.array,r=this.attributes;for(const s in r){const i=t(r[s],n);e.setAttribute(s,i)}const i=this.morphAttributes;for(const s in i){const r=[],a=i[s];for(let e=0,i=a.length;e<i;e++){const i=t(a[e],n);r.push(i)}e.morphAttributes[s]=r}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,o=a.length;s<o;s++){const t=a[s];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const o in n){const e=n[o];t.data.attributes[o]=e.toJSON(t.data)}const r={};let i=!1;for(const o in this.morphAttributes){const e=this.morphAttributes[o],n=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];n.push(i.toJSON(t.data))}n.length>0&&(r[o]=n,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const l in r){const t=r[l];this.setAttribute(l,t.clone(e))}const i=t.morphAttributes;for(const l in i){const t=[],n=i[l];for(let r=0,i=n.length;r<i;r++)t.push(n[r].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let l=0,c=a.length;l<c;l++){const t=a[l];this.addGroup(t.start,t.count,t.materialIndex)}const s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Hn=new Ge,jn=new Ue,Vn=new Re,Wn=new ue,$n=new ue,Yn=new ue,qn=new ue,Xn=new ue,Jn=new ue,Zn=new ue,Kn=new ue,Qn=new ue,tr=new Ot,er=new Ot,nr=new Ot,rr=new ue,ir=new ue;class ar extends fn{constructor(t=new Gn,e=new Tn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),Vn.copy(n.boundingSphere),Vn.applyMatrix4(i),!1===t.ray.intersectsSphere(Vn))||(Hn.copy(i).invert(),jn.copy(t.ray).applyMatrix4(Hn),null!==n.boundingBox&&!1===jn.intersectsBox(n.boundingBox)))return;let a;const s=n.index,o=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,u=n.attributes.uv,h=n.attributes.uv2,d=n.groups,f=n.drawRange;if(null!==s)if(Array.isArray(r))for(let p=0,m=d.length;p<m;p++){const n=d[p],i=r[n.materialIndex];for(let r=Math.max(n.start,f.start),d=Math.min(s.count,Math.min(n.start+n.count,f.start+f.count));r<d;r+=3){const d=s.getX(r),f=s.getX(r+1),p=s.getX(r+2);a=sr(this,i,t,jn,o,l,c,u,h,d,f,p),a&&(a.faceIndex=Math.floor(r/3),a.face.materialIndex=n.materialIndex,e.push(a))}}else{for(let n=Math.max(0,f.start),i=Math.min(s.count,f.start+f.count);n<i;n+=3){const i=s.getX(n),d=s.getX(n+1),f=s.getX(n+2);a=sr(this,r,t,jn,o,l,c,u,h,i,d,f),a&&(a.faceIndex=Math.floor(n/3),e.push(a))}}else if(void 0!==o)if(Array.isArray(r))for(let p=0,m=d.length;p<m;p++){const n=d[p],i=r[n.materialIndex];for(let r=Math.max(n.start,f.start),s=Math.min(o.count,Math.min(n.start+n.count,f.start+f.count));r<s;r+=3){a=sr(this,i,t,jn,o,l,c,u,h,r,r+1,r+2),a&&(a.faceIndex=Math.floor(r/3),a.face.materialIndex=n.materialIndex,e.push(a))}}else{for(let n=Math.max(0,f.start),i=Math.min(o.count,f.start+f.count);n<i;n+=3){a=sr(this,r,t,jn,o,l,c,u,h,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),e.push(a))}}}}function sr(t,e,n,r,i,a,s,o,l,c,u,h){Wn.fromBufferAttribute(i,c),$n.fromBufferAttribute(i,u),Yn.fromBufferAttribute(i,h);const d=t.morphTargetInfluences;if(a&&d){Zn.set(0,0,0),Kn.set(0,0,0),Qn.set(0,0,0);for(let t=0,e=a.length;t<e;t++){const e=d[t],n=a[t];0!==e&&(qn.fromBufferAttribute(n,c),Xn.fromBufferAttribute(n,u),Jn.fromBufferAttribute(n,h),s?(Zn.addScaledVector(qn,e),Kn.addScaledVector(Xn,e),Qn.addScaledVector(Jn,e)):(Zn.addScaledVector(qn.sub(Wn),e),Kn.addScaledVector(Xn.sub($n),e),Qn.addScaledVector(Jn.sub(Yn),e)))}Wn.add(Zn),$n.add(Kn),Yn.add(Qn)}t.isSkinnedMesh&&(t.boneTransform(c,Wn),t.boneTransform(u,$n),t.boneTransform(h,Yn));const f=function(t,e,n,r,i,a,s,o){let l;if(l=1===e.side?r.intersectTriangle(s,a,i,!0,o):r.intersectTriangle(i,a,s,2!==e.side,o),null===l)return null;ir.copy(o),ir.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(ir);return c<n.near||c>n.far?null:{distance:c,point:ir.clone(),object:t}}(t,e,n,r,Wn,$n,Yn,rr);if(f){o&&(tr.fromBufferAttribute(o,c),er.fromBufferAttribute(o,u),nr.fromBufferAttribute(o,h),f.uv=En.getUV(rr,Wn,$n,Yn,tr,er,nr,new Ot)),l&&(tr.fromBufferAttribute(l,c),er.fromBufferAttribute(l,u),nr.fromBufferAttribute(l,h),f.uv2=En.getUV(rr,Wn,$n,Yn,tr,er,nr,new Ot));const t={a:c,b:u,c:h,normal:new ue,materialIndex:0};En.getNormal(Wn,$n,Yn,t.normal),f.face=t}return f}class or extends Gn{constructor(t=1,e=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};const s=this;r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);const o=[],l=[],c=[],u=[];let h=0,d=0;function f(t,e,n,r,i,a,f,p,m,g,y){const v=a/m,b=f/g,x=a/2,_=f/2,w=p/2,S=m+1,E=g+1;let M=0,C=0;const T=new ue;for(let s=0;s<E;s++){const a=s*b-_;for(let o=0;o<S;o++){const h=o*v-x;T[t]=h*r,T[e]=a*i,T[n]=w,l.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[n]=p>0?1:-1,c.push(T.x,T.y,T.z),u.push(o/m),u.push(1-s/g),M+=1}}for(let s=0;s<g;s++)for(let t=0;t<m;t++){const e=h+t+S*s,n=h+t+S*(s+1),r=h+(t+1)+S*(s+1),i=h+(t+1)+S*s;o.push(e,n,i),o.push(n,r,i),C+=6}s.addGroup(d,C,y),d+=C,h+=M}f("z","y","x",-1,-1,n,e,t,a,i,0),f("z","y","x",1,-1,n,e,-t,a,i,1),f("x","z","y",1,1,t,n,e,r,a,2),f("x","z","y",1,-1,t,n,-e,r,a,3),f("x","y","z",1,-1,t,e,n,r,i,4),f("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(o),this.setAttribute("position",new In(l,3)),this.setAttribute("normal",new In(c,3)),this.setAttribute("uv",new In(u,2))}static fromJSON(t){return new or(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function lr(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function cr(t){const e={};for(let n=0;n<t.length;n++){const r=lr(t[n]);for(const t in r)e[t]=r[t]}return e}const ur={clone:lr,merge:cr};class hr extends Cn{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=lr(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?e.uniforms[r]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[r]={type:"m4",value:n.toArray()}:e.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class dr extends fn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ge,this.projectionMatrix=new Ge,this.projectionMatrixInverse=new Ge}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class fr extends dr{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Tt*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Ct*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Tt*Math.atan(Math.tan(.5*Ct*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,i,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Ct*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const t=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/t,e-=a.offsetY*n/s,r*=a.width/t,n*=a.height/s}const s=this.filmOffset;0!==s&&(i+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const pr=90;class mr extends fn{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new fr(pr,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ue(1,0,0)),this.add(r);const i=new fr(pr,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new ue(-1,0,0)),this.add(i);const a=new fr(pr,1,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new ue(0,1,0)),this.add(a);const s=new fr(pr,1,t,e);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new ue(0,-1,0)),this.add(s);const o=new fr(pr,1,t,e);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new ue(0,0,1)),this.add(o);const l=new fr(pr,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ue(0,0,-1)),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,a,s,o,l]=this.children,c=t.getRenderTarget(),u=t.toneMapping,h=t.xr.enabled;t.toneMapping=0,t.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,a),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,o),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(c),t.toneMapping=u,t.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class gr extends ie{constructor(t,e,n,r,i,a,s,o,l,c){super(t=void 0!==t?t:[],e=void 0!==e?e:h,n,r,i,a,s,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class yr extends se{constructor(t,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];this.texture=new gr(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:w}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new or(5,5,5),i=new hr({name:"CubemapFromEquirect",uniforms:lr(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=e;const a=new ar(r,i),s=e.minFilter;return e.minFilter===E&&(e.minFilter=w),new mr(1,10,this).update(t,a),e.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,n,r);t.setRenderTarget(i)}}const vr=new ue,br=new ue,xr=new Nt;class _r{constructor(t=new ue(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=vr.subVectors(n,e).cross(br.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(vr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(n).multiplyScalar(i).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||xr.getNormalMatrix(t),r=this.coplanarPoint(vr).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const wr=new Re,Sr=new ue;class Er{constructor(t=new _r,e=new _r,n=new _r,r=new _r,i=new _r,a=new _r){this.planes=[t,e,n,r,i,a]}set(t,e,n,r,i,a){const s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(a),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],y=n[14],v=n[15];return e[0].setComponents(s-r,u-o,p-h,v-m).normalize(),e[1].setComponents(s+r,u+o,p+h,v+m).normalize(),e[2].setComponents(s+i,u+l,p+d,v+g).normalize(),e[3].setComponents(s-i,u-l,p-d,v-g).normalize(),e[4].setComponents(s-a,u-c,p-f,v-y).normalize(),e[5].setComponents(s+a,u+c,p+f,v+y).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),wr.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(wr)}intersectsSprite(t){return wr.center.set(0,0,0),wr.radius=.7071067811865476,wr.applyMatrix4(t.matrixWorld),this.intersectsSphere(wr)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++)if(e[i].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(Sr.x=r.normal.x>0?t.max.x:t.min.x,Sr.y=r.normal.y>0?t.max.y:t.min.y,Sr.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Sr)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Mr(){let t=null,e=!1,n=null,r=null;function i(e,a){n(e,a),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Cr(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const a=r.get(e);void 0===a?r.set(e,function(e,r){const i=e.array,a=e.usage,s=t.createBuffer();let o;if(t.bindBuffer(r,s),t.bufferData(r,i,a),e.onUploadCallback(),i instanceof Float32Array)o=5126;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=5131}else o=5123;else if(i instanceof Int16Array)o=5122;else if(i instanceof Uint32Array)o=5125;else if(i instanceof Int32Array)o=5124;else if(i instanceof Int8Array)o=5120;else if(i instanceof Uint8Array)o=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);o=5121}return{buffer:s,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):a.version<e.version&&(function(e,r,i){const a=r.array,s=r.updateRange;t.bindBuffer(i,e),-1===s.count?t.bufferSubData(i,0,a):(n?t.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):t.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1)}(a.buffer,e,i),a.version=e.version)}}}class Tr extends Gn{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,a=e/2,s=Math.floor(n),o=Math.floor(r),l=s+1,c=o+1,u=t/s,h=e/o,d=[],f=[],p=[],m=[];for(let g=0;g<c;g++){const t=g*h-a;for(let e=0;e<l;e++){const n=e*u-i;f.push(n,-t,0),p.push(0,0,1),m.push(e/s),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let t=0;t<s;t++){const e=t+l*g,n=t+l*(g+1),r=t+1+l*(g+1),i=t+1+l*g;d.push(e,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new In(f,3)),this.setAttribute("normal",new In(p,3)),this.setAttribute("uv",new In(m,2))}static fromJSON(t){return new Tr(t.width,t.height,t.widthSegments,t.heightSegments)}}const Ar={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},kr={common:{diffuse:{value:new Kt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Nt},uv2Transform:{value:new Nt},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ot(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Kt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Kt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Nt}},sprite:{diffuse:{value:new Kt(16777215)},opacity:{value:1},center:{value:new Ot(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Nt}}},Lr={basic:{uniforms:cr([kr.common,kr.specularmap,kr.envmap,kr.aomap,kr.lightmap,kr.fog]),vertexShader:Ar.meshbasic_vert,fragmentShader:Ar.meshbasic_frag},lambert:{uniforms:cr([kr.common,kr.specularmap,kr.envmap,kr.aomap,kr.lightmap,kr.emissivemap,kr.fog,kr.lights,{emissive:{value:new Kt(0)}}]),vertexShader:Ar.meshlambert_vert,fragmentShader:Ar.meshlambert_frag},phong:{uniforms:cr([kr.common,kr.specularmap,kr.envmap,kr.aomap,kr.lightmap,kr.emissivemap,kr.bumpmap,kr.normalmap,kr.displacementmap,kr.fog,kr.lights,{emissive:{value:new Kt(0)},specular:{value:new Kt(1118481)},shininess:{value:30}}]),vertexShader:Ar.meshphong_vert,fragmentShader:Ar.meshphong_frag},standard:{uniforms:cr([kr.common,kr.envmap,kr.aomap,kr.lightmap,kr.emissivemap,kr.bumpmap,kr.normalmap,kr.displacementmap,kr.roughnessmap,kr.metalnessmap,kr.fog,kr.lights,{emissive:{value:new Kt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ar.meshphysical_vert,fragmentShader:Ar.meshphysical_frag},toon:{uniforms:cr([kr.common,kr.aomap,kr.lightmap,kr.emissivemap,kr.bumpmap,kr.normalmap,kr.displacementmap,kr.gradientmap,kr.fog,kr.lights,{emissive:{value:new Kt(0)}}]),vertexShader:Ar.meshtoon_vert,fragmentShader:Ar.meshtoon_frag},matcap:{uniforms:cr([kr.common,kr.bumpmap,kr.normalmap,kr.displacementmap,kr.fog,{matcap:{value:null}}]),vertexShader:Ar.meshmatcap_vert,fragmentShader:Ar.meshmatcap_frag},points:{uniforms:cr([kr.points,kr.fog]),vertexShader:Ar.points_vert,fragmentShader:Ar.points_frag},dashed:{uniforms:cr([kr.common,kr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ar.linedashed_vert,fragmentShader:Ar.linedashed_frag},depth:{uniforms:cr([kr.common,kr.displacementmap]),vertexShader:Ar.depth_vert,fragmentShader:Ar.depth_frag},normal:{uniforms:cr([kr.common,kr.bumpmap,kr.normalmap,kr.displacementmap,{opacity:{value:1}}]),vertexShader:Ar.meshnormal_vert,fragmentShader:Ar.meshnormal_frag},sprite:{uniforms:cr([kr.sprite,kr.fog]),vertexShader:Ar.sprite_vert,fragmentShader:Ar.sprite_frag},background:{uniforms:{uvTransform:{value:new Nt},t2D:{value:null}},vertexShader:Ar.background_vert,fragmentShader:Ar.background_frag},cube:{uniforms:cr([kr.envmap,{opacity:{value:1}}]),vertexShader:Ar.cube_vert,fragmentShader:Ar.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ar.equirect_vert,fragmentShader:Ar.equirect_frag},distanceRGBA:{uniforms:cr([kr.common,kr.displacementmap,{referencePosition:{value:new ue},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ar.distanceRGBA_vert,fragmentShader:Ar.distanceRGBA_frag},shadow:{uniforms:cr([kr.lights,kr.fog,{color:{value:new Kt(0)},opacity:{value:1}}]),vertexShader:Ar.shadow_vert,fragmentShader:Ar.shadow_frag}};function Pr(t,e,n,r,i,a){const s=new Kt(0);let o,l,c=!0===i?0:1,u=null,h=0,d=null;function f(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,a)}return{getClearColor:function(){return s},setClearColor:function(t,e=1){s.set(t),c=e,f(s,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,f(s,c)},render:function(n,i){let a=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=e.get(p));const g=t.xr,y=g.getSession&&g.getSession();y&&"additive"===y.environmentBlendMode&&(p=null),null===p?f(s,c):p&&p.isColor&&(f(p,1),a=!0),(t.autoClear||a)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),p&&(p.isCubeTexture||p.mapping===m)?(void 0===l&&(l=new ar(new or(1,1,1),new hr({name:"BackgroundCubeMaterial",uniforms:lr(Lr.cube.uniforms),vertexShader:Lr.cube.vertexShader,fragmentShader:Lr.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=p,l.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,(u!==p||h!==p.version||d!==t.toneMapping)&&(l.material.needsUpdate=!0,u=p,h=p.version,d=t.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null)):p&&p.isTexture&&(void 0===o&&(o=new ar(new Tr(2,2),new hr({name:"BackgroundMaterial",uniforms:lr(Lr.background.uniforms),vertexShader:Lr.background.vertexShader,fragmentShader:Lr.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),o.material.uniforms.uvTransform.value.copy(p.matrix),(u!==p||h!==p.version||d!==t.toneMapping)&&(o.material.needsUpdate=!0,u=p,h=p.version,d=t.toneMapping),o.layers.enableAll(),n.unshift(o,o.geometry,o.material,0,0,null))}}}function Rr(t,e,n,r){const i=t.getParameter(34921),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||null!==a,o={},l=f(null);let c=l,u=!1;function h(e){return r.isWebGL2?t.bindVertexArray(e):a.bindVertexArrayOES(e)}function d(e){return r.isWebGL2?t.deleteVertexArray(e):a.deleteVertexArrayOES(e)}function f(t){const e=[],n=[],r=[];for(let a=0;a<i;a++)e[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function p(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function m(t){g(t,0)}function g(n,i){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;a[n]=1,0===s[n]&&(t.enableVertexAttribArray(n),s[n]=1),o[n]!==i&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),o[n]=i)}function y(){const e=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function v(e,n,i,a,s,o){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,a,s,o):t.vertexAttribIPointer(e,n,i,s,o)}function b(){x(),u=!0,c!==l&&(c=l,h(c.object))}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,b,x){let _=!1;if(s){const e=function(e,n,i){const s=!0===i.wireframe;let l=o[e.id];void 0===l&&(l={},o[e.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[s];return void 0===u&&(u=f(r.isWebGL2?t.createVertexArray():a.createVertexArrayOES()),c[s]=u),u}(b,d,l);c!==e&&(c=e,h(c.object)),_=function(t,e,n,r){const i=c.attributes,a=e.attributes;let s=0;const o=n.getAttributes();for(const l in o)if(o[l].location>=0){const e=i[l];let n=a[l];if(void 0===n&&("instanceMatrix"===l&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(n=t.instanceColor)),void 0===e||e.attribute!==n||n&&e.data!==n.data)return!0;s++}return c.attributesNum!==s||c.index!==r}(i,b,d,x),_&&function(t,e,n,r){const i={},a=e.attributes;let s=0;const o=n.getAttributes();for(const l in o)if(o[l].location>=0){let e=a[l];void 0===e&&("instanceMatrix"===l&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(e=t.instanceColor));const n={};n.attribute=e,e&&e.data&&(n.data=e.data),i[l]=n,s++}c.attributes=i,c.attributesNum=s,c.index=r}(i,b,d,x)}else{const t=!0===l.wireframe;(c.geometry!==b.id||c.program!==d.id||c.wireframe!==t)&&(c.geometry=b.id,c.program=d.id,c.wireframe=t,_=!0)}null!==x&&n.update(x,34963),(_||u)&&(u=!1,function(i,a,s,o){if(!1===r.isWebGL2&&(i.isInstancedMesh||o.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;p();const l=o.attributes,c=s.getAttributes(),u=a.defaultAttributeValues;for(const e in c){const r=c[e];if(r.location>=0){let a=l[e];if(void 0===a&&("instanceMatrix"===e&&i.instanceMatrix&&(a=i.instanceMatrix),"instanceColor"===e&&i.instanceColor&&(a=i.instanceColor)),void 0!==a){const e=a.normalized,s=a.itemSize,l=n.get(a);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(a.isInterleavedBufferAttribute){const n=a.data,l=n.stride,d=a.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<r.locationSize;t++)g(r.location+t,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<r.locationSize;t++)m(r.location+t);t.bindBuffer(34962,c);for(let t=0;t<r.locationSize;t++)v(r.location+t,s/r.locationSize,u,e,l*h,(d+s/r.locationSize*t)*h)}else{if(a.isInstancedBufferAttribute){for(let t=0;t<r.locationSize;t++)g(r.location+t,a.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let t=0;t<r.locationSize;t++)m(r.location+t);t.bindBuffer(34962,c);for(let t=0;t<r.locationSize;t++)v(r.location+t,s/r.locationSize,u,e,s*h,s/r.locationSize*t*h)}}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r.location,n);break;case 3:t.vertexAttrib3fv(r.location,n);break;case 4:t.vertexAttrib4fv(r.location,n);break;default:t.vertexAttrib1fv(r.location,n)}}}}y()}(i,l,d,b),null!==x&&t.bindBuffer(34963,n.get(x).buffer))},reset:b,resetDefaultState:x,dispose:function(){b();for(const t in o){const e=o[t];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete o[t]}},releaseStatesOfGeometry:function(t){if(void 0===o[t.id])return;const e=o[t.id];for(const n in e){const t=e[n];for(const e in t)d(t[e].object),delete t[e];delete e[n]}delete o[t.id]},releaseStatesOfProgram:function(t){for(const e in o){const n=o[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)d(r[t].object),delete r[t];delete n[t.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:y}}function Ir(t,e,n,r){const i=r.isWebGL2;let a;this.setMode=function(t){a=t},this.render=function(e,r){t.drawArrays(a,e,r),n.update(r,a,1)},this.renderInstances=function(r,s,o){if(0===o)return;let l,c;if(i)l=t,c="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,r,s,o),n.update(s,a,o)}}function Dr(t,e,n){let r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&t instanceof WebGL2ComputeRenderingContext;let s=void 0!==n.precision?n.precision:"highp";const o=i(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=a||e.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=t.getParameter(34930),h=t.getParameter(35660),d=t.getParameter(3379),f=t.getParameter(34076),p=t.getParameter(34921),m=t.getParameter(36347),g=t.getParameter(36348),y=t.getParameter(36349),v=h>0,b=a||e.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:v,floatFragmentTextures:b,floatVertexTextures:v&&b,maxSamples:a?t.getParameter(36183):0}}function Br(t){const e=this;let n=null,r=0,i=!1,a=!1;const s=new _r,o=new Nt,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(t,n,r,i){const a=null!==t?t.length:0;let c=null;if(0!==a){if(c=l.value,!0!==i||null===c){const e=r+4*a,i=n.matrixWorldInverse;o.getNormalMatrix(i),(null===c||c.length<e)&&(c=new Float32Array(e));for(let n=0,l=r;n!==a;++n,l+=4)s.copy(t[n]).applyMatrix4(i,o),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=a,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,a){const s=0!==t.length||e||0!==r||i;return i=e,n=u(t,a,0),r=t.length,s},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1,c()},this.setState=function(e,s,o){const h=e.clippingPlanes,d=e.clipIntersection,f=e.clipShadows,p=t.get(e);if(!i||null===h||0===h.length||a&&!f)a?u(null):c();else{const t=a?0:r,e=4*t;let i=p.clippingState||null;l.value=i,i=u(h,s,e,o);for(let r=0;r!==e;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function Or(t){let e=new WeakMap;function n(t,e){return e===f?t.mapping=h:e===p&&(t.mapping=d),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const a=i.mapping;if(a===f||a===p){if(e.has(i)){return n(e.get(i).texture,i.mapping)}{const a=i.image;if(a&&a.height>0){const s=new yr(a.height/2);return s.fromEquirectangularTexture(t,i),e.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}Lr.physical={uniforms:cr([Lr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ot(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Kt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ot},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Kt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Kt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ar.meshphysical_vert,fragmentShader:Ar.meshphysical_frag};class Nr extends dr{constructor(t=-1,e=1,n=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,a=n+t,s=r+e,o=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,a=i+t*this.view.width,s-=e*this.view.offsetY,o=s-e*this.view.height}this.projectionMatrix.makeOrthographic(i,a,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const Fr=[.125,.215,.35,.446,.526,.582],zr=20,Ur=new Nr,Gr=new Kt;let Hr=null;const jr=(1+Math.sqrt(5))/2,Vr=1/jr,Wr=[new ue(1,1,1),new ue(-1,1,1),new ue(1,1,-1),new ue(-1,1,-1),new ue(0,jr,Vr),new ue(0,jr,-Vr),new ue(Vr,0,jr),new ue(-Vr,0,jr),new ue(jr,Vr,0),new ue(-jr,Vr,0)];class $r{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){Hr=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Jr(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Xr(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Hr),t.scissorTest=!1,qr(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===h||t.mapping===d?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Hr=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:w,minFilter:w,generateMipmaps:!1,type:k,format:P,encoding:ft,depthBuffer:!1},r=Yr(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Yr(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],r=[];let i=t;const a=t-4+1+Fr.length;for(let s=0;s<a;s++){const a=Math.pow(2,i);n.push(a);let o=1/a;s>t-4?o=Fr[s-t+4-1]:0===s&&(o=0),r.push(o);const l=1/(a-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,p=3,m=2,g=1,y=new Float32Array(p*f*d),v=new Float32Array(m*f*d),b=new Float32Array(g*f*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];y.set(r,p*f*t),v.set(h,m*f*t);const i=[t,t,t,t,t,t];b.set(i,g*f*t)}const x=new Gn;x.setAttribute("position",new Ln(y,p)),x.setAttribute("uv",new Ln(v,m)),x.setAttribute("faceIndex",new Ln(b,g)),e.push(x),i>4&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(t,e,n){const r=new Float32Array(zr),i=new ue(0,1,0);return new hr({name:"SphericalGaussianBlur",defines:{n:zr,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Zr(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,t,e)}return r}_compileMaterial(t){const e=new ar(this._lodPlanes[0],t);this._renderer.compile(e,Ur)}_sceneToCubeUV(t,e,n,r){const i=new fr(90,1,e,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(Gr),o.toneMapping=0,o.autoClear=!1;const u=new Tn({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new ar(new or,u);let d=!1;const f=t.background;f?f.isColor&&(u.color.copy(f),t.background=null,d=!0):(u.color.copy(Gr),d=!0);for(let p=0;p<6;p++){const e=p%3;0===e?(i.up.set(0,a[p],0),i.lookAt(s[p],0,0)):1===e?(i.up.set(0,0,a[p]),i.lookAt(0,s[p],0)):(i.up.set(0,a[p],0),i.lookAt(0,0,s[p]));const n=this._cubeSize;qr(r,e*n,p>2?n:0,n,n),o.setRenderTarget(r),d&&o.render(h,i),o.render(t,i)}h.geometry.dispose(),h.material.dispose(),o.toneMapping=c,o.autoClear=l,t.background=f}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===h||t.mapping===d;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Jr()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Xr());const i=r?this._cubemapMaterial:this._equirectMaterial,a=new ar(this._lodPlanes[0],i);i.uniforms.envMap.value=t;const s=this._cubeSize;qr(e,0,0,3*s,2*s),n.setRenderTarget(e),n.render(a,Ur)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const e=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=Wr[(r-1)%Wr.length];this._blur(t,r-1,r,e,n)}e.autoClear=n}_blur(t,e,n,r,i){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,r,"latitudinal",i),this._halfBlur(a,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new ar(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):zr;p>zr&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let b=0;b<zr;++b){const t=b/f,e=Math.exp(-t*t/2);m.push(e),0===b?g+=e:b<p&&(g+=2*e)}for(let b=0;b<m.length;b++)m[b]=m[b]/g;u.envMap.value=t.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===a,s&&(u.poleAxis.value=s);const{_lodMax:y}=this;u.dTheta.value=d,u.mipInt.value=y-n;const v=this._sizeLods[r];qr(e,3*v*(r>y-4?r-y+4:0),4*(this._cubeSize-v),3*v,2*v),o.setRenderTarget(e),o.render(c,Ur)}}function Yr(t,e,n){const r=new se(t,e,n);return r.texture.mapping=m,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function qr(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Xr(){return new hr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Zr(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Jr(){return new hr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Zr(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Zr(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Kr(t){let e=new WeakMap,n=null;function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping,s=a===f||a===p,o=a===h||a===d;if(s||o){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=e.get(i);return null===n&&(n=new $r(t)),r=s?n.fromEquirectangular(i,r):n.fromCubemap(i,r),e.set(i,r),r.texture}if(e.has(i))return e.get(i).texture;{const a=i.image;if(s&&a&&a.height>0||o&&a&&function(t){let e=0;const n=6;for(let r=0;r<n;r++)void 0!==t[r]&&e++;return e===n}(a)){null===n&&(n=new $r(t));const a=s?n.fromEquirectangular(i):n.fromCubemap(i);return e.set(i,a),i.addEventListener("dispose",r),a.texture}return null}}}return i},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Qr(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function ti(t,e,n,r){const i={},a=new WeakMap;function s(t){const o=t.target;null!==o.index&&e.remove(o.index);for(const n in o.attributes)e.remove(o.attributes[n]);o.removeEventListener("dispose",s),delete i[o.id];const l=a.get(o);l&&(e.remove(l),a.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(t){const n=[],r=t.index,i=t.attributes.position;let s=0;if(null!==r){const t=r.array;s=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],a=t[e+2];n.push(r,i,i,a,a,r)}}else{const t=i.array;s=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const o=new(Ft(n)?Rn:Pn)(n,1);o.version=s;const l=a.get(t);l&&e.remove(l),a.set(t,o)}return{get:function(t,e){return!0===i[e.id]||(e.addEventListener("dispose",s),i[e.id]=!0,n.memory.geometries++),e},update:function(t){const n=t.attributes;for(const i in n)e.update(n[i],34962);const r=t.morphAttributes;for(const i in r){const t=r[i];for(let n=0,r=t.length;n<r;n++)e.update(t[n],34962)}},getWireframeAttribute:function(t){const e=a.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&o(t)}else o(t);return a.get(t)}}}function ei(t,e,n,r){const i=r.isWebGL2;let a,s,o;this.setMode=function(t){a=t},this.setIndex=function(t){s=t.type,o=t.bytesPerElement},this.render=function(e,r){t.drawElements(a,r,s,e*o),n.update(r,a,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(i)u=t,h="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](a,l,s,r*o,c),n.update(l,a,c)}}function ni(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function ri(t,e){return t[0]-e[0]}function ii(t,e){return Math.abs(e[1])-Math.abs(t[1])}function ai(t,e){let n=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?n=127:r instanceof Uint8Array?n=255:r instanceof Uint16Array?n=65535:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),t.divideScalar(n)}function si(t,e,n){const r={},i=new Float32Array(8),a=new WeakMap,s=new ae,o=[];for(let l=0;l<8;l++)o[l]=[l,0];return{update:function(l,c,u,h){const d=l.morphTargetInfluences;if(!0===e.isWebGL2){const r=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,i=void 0!==r?r.length:0;let o=a.get(c);if(void 0===o||o.count!==i){let t=function(){y.dispose(),a.delete(c),c.removeEventListener("dispose",t)};void 0!==o&&o.texture.dispose();const n=void 0!==c.morphAttributes.position,r=void 0!==c.morphAttributes.normal,l=void 0!==c.morphAttributes.color,u=c.morphAttributes.position||[],h=c.morphAttributes.normal||[],d=c.morphAttributes.color||[];let f=0;!0===n&&(f=1),!0===r&&(f=2),!0===l&&(f=3);let p=c.attributes.position.count*f,m=1;p>e.maxTextureSize&&(m=Math.ceil(p/e.maxTextureSize),p=e.maxTextureSize);const g=new Float32Array(p*m*4*i),y=new oe(g,p,m,i);y.type=A,y.needsUpdate=!0;const v=4*f;for(let e=0;e<i;e++){const t=u[e],i=h[e],a=d[e],o=p*m*4*e;for(let e=0;e<t.count;e++){const c=e*v;!0===n&&(s.fromBufferAttribute(t,e),!0===t.normalized&&ai(s,t),g[o+c+0]=s.x,g[o+c+1]=s.y,g[o+c+2]=s.z,g[o+c+3]=0),!0===r&&(s.fromBufferAttribute(i,e),!0===i.normalized&&ai(s,i),g[o+c+4]=s.x,g[o+c+5]=s.y,g[o+c+6]=s.z,g[o+c+7]=0),!0===l&&(s.fromBufferAttribute(a,e),!0===a.normalized&&ai(s,a),g[o+c+8]=s.x,g[o+c+9]=s.y,g[o+c+10]=s.z,g[o+c+11]=4===a.itemSize?s.w:1)}}o={count:i,texture:y,size:new Ot(p,m)},a.set(c,o),c.addEventListener("dispose",t)}let l=0;for(let t=0;t<d.length;t++)l+=d[t];const u=c.morphTargetsRelative?1:1-l;h.getUniforms().setValue(t,"morphTargetBaseInfluence",u),h.getUniforms().setValue(t,"morphTargetInfluences",d),h.getUniforms().setValue(t,"morphTargetsTexture",o.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",o.size)}else{const e=void 0===d?0:d.length;let n=r[c.id];if(void 0===n||n.length!==e){n=[];for(let t=0;t<e;t++)n[t]=[t,0];r[c.id]=n}for(let t=0;t<e;t++){const e=n[t];e[0]=t,e[1]=d[t]}n.sort(ii);for(let t=0;t<8;t++)t<e&&n[t][1]?(o[t][0]=n[t][0],o[t][1]=n[t][1]):(o[t][0]=Number.MAX_SAFE_INTEGER,o[t][1]=0);o.sort(ri);const a=c.morphAttributes.position,s=c.morphAttributes.normal;let l=0;for(let t=0;t<8;t++){const e=o[t],n=e[0],r=e[1];n!==Number.MAX_SAFE_INTEGER&&r?(a&&c.getAttribute("morphTarget"+t)!==a[n]&&c.setAttribute("morphTarget"+t,a[n]),s&&c.getAttribute("morphNormal"+t)!==s[n]&&c.setAttribute("morphNormal"+t,s[n]),i[t]=r,l+=r):(a&&!0===c.hasAttribute("morphTarget"+t)&&c.deleteAttribute("morphTarget"+t),s&&!0===c.hasAttribute("morphNormal"+t)&&c.deleteAttribute("morphNormal"+t),i[t]=0)}const u=c.morphTargetsRelative?1:1-l;h.getUniforms().setValue(t,"morphTargetBaseInfluence",u),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}}}function oi(t,e,n,r){let i=new WeakMap;function a(t){const e=t.target;e.removeEventListener("dispose",a),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const s=r.render.frame,o=t.geometry,l=e.get(t,o);return i.get(l)!==s&&(e.update(l),i.set(l,s)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",a)&&t.addEventListener("dispose",a),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}const li=new ie,ci=new oe,ui=new le,hi=new gr,di=[],fi=[],pi=new Float32Array(16),mi=new Float32Array(9),gi=new Float32Array(4);function yi(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let a=di[i];if(void 0===a&&(a=new Float32Array(i),di[i]=a),0!==e){r.toArray(a,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(a,i)}return a}function vi(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function bi(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function xi(t,e){let n=fi[e];void 0===n&&(n=new Int32Array(e),fi[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function _i(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function wi(t,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(vi(n,e))return;t.uniform2fv(this.addr,e),bi(n,e)}}function Si(t,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(vi(n,e))return;t.uniform3fv(this.addr,e),bi(n,e)}}function Ei(t,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(vi(n,e))return;t.uniform4fv(this.addr,e),bi(n,e)}}function Mi(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(vi(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),bi(n,e)}else{if(vi(n,r))return;gi.set(r),t.uniformMatrix2fv(this.addr,!1,gi),bi(n,r)}}function Ci(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(vi(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),bi(n,e)}else{if(vi(n,r))return;mi.set(r),t.uniformMatrix3fv(this.addr,!1,mi),bi(n,r)}}function Ti(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(vi(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),bi(n,e)}else{if(vi(n,r))return;pi.set(r),t.uniformMatrix4fv(this.addr,!1,pi),bi(n,r)}}function Ai(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function ki(t,e){const n=this.cache;vi(n,e)||(t.uniform2iv(this.addr,e),bi(n,e))}function Li(t,e){const n=this.cache;vi(n,e)||(t.uniform3iv(this.addr,e),bi(n,e))}function Pi(t,e){const n=this.cache;vi(n,e)||(t.uniform4iv(this.addr,e),bi(n,e))}function Ri(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Ii(t,e){const n=this.cache;vi(n,e)||(t.uniform2uiv(this.addr,e),bi(n,e))}function Di(t,e){const n=this.cache;vi(n,e)||(t.uniform3uiv(this.addr,e),bi(n,e))}function Bi(t,e){const n=this.cache;vi(n,e)||(t.uniform4uiv(this.addr,e),bi(n,e))}function Oi(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||li,i)}function Ni(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||ui,i)}function Fi(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||hi,i)}function zi(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||ci,i)}function Ui(t,e){t.uniform1fv(this.addr,e)}function Gi(t,e){const n=yi(e,this.size,2);t.uniform2fv(this.addr,n)}function Hi(t,e){const n=yi(e,this.size,3);t.uniform3fv(this.addr,n)}function ji(t,e){const n=yi(e,this.size,4);t.uniform4fv(this.addr,n)}function Vi(t,e){const n=yi(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Wi(t,e){const n=yi(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function $i(t,e){const n=yi(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Yi(t,e){t.uniform1iv(this.addr,e)}function qi(t,e){t.uniform2iv(this.addr,e)}function Xi(t,e){t.uniform3iv(this.addr,e)}function Ji(t,e){t.uniform4iv(this.addr,e)}function Zi(t,e){t.uniform1uiv(this.addr,e)}function Ki(t,e){t.uniform2uiv(this.addr,e)}function Qi(t,e){t.uniform3uiv(this.addr,e)}function ta(t,e){t.uniform4uiv(this.addr,e)}function ea(t,e,n){const r=e.length,i=xi(n,r);t.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)n.setTexture2D(e[a]||li,i[a])}function na(t,e,n){const r=e.length,i=xi(n,r);t.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)n.setTexture3D(e[a]||ui,i[a])}function ra(t,e,n){const r=e.length,i=xi(n,r);t.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)n.setTextureCube(e[a]||hi,i[a])}function ia(t,e,n){const r=e.length,i=xi(n,r);t.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)n.setTexture2DArray(e[a]||ci,i[a])}class aa{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return _i;case 35664:return wi;case 35665:return Si;case 35666:return Ei;case 35674:return Mi;case 35675:return Ci;case 35676:return Ti;case 5124:case 35670:return Ai;case 35667:case 35671:return ki;case 35668:case 35672:return Li;case 35669:case 35673:return Pi;case 5125:return Ri;case 36294:return Ii;case 36295:return Di;case 36296:return Bi;case 35678:case 36198:case 36298:case 36306:case 35682:return Oi;case 35679:case 36299:case 36307:return Ni;case 35680:case 36300:case 36308:case 36293:return Fi;case 36289:case 36303:case 36311:case 36292:return zi}}(e.type)}}class sa{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Ui;case 35664:return Gi;case 35665:return Hi;case 35666:return ji;case 35674:return Vi;case 35675:return Wi;case 35676:return $i;case 5124:case 35670:return Yi;case 35667:case 35671:return qi;case 35668:case 35672:return Xi;case 35669:case 35673:return Ji;case 5125:return Zi;case 36294:return Ki;case 36295:return Qi;case 36296:return ta;case 35678:case 36198:case 36298:case 36306:case 35682:return ea;case 35679:case 36299:case 36307:return na;case 35680:case 36300:case 36308:case 36293:return ra;case 36289:case 36303:case 36311:case 36292:return ia}}(e.type)}}class oa{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const a=r[i];a.setValue(t,e[a.id],n)}}}const la=/(\w+)(\])?(\[|\.)?/g;function ca(t,e){t.seq.push(e),t.map[e.id]=e}function ua(t,e,n){const r=t.name,i=r.length;for(la.lastIndex=0;;){const a=la.exec(r),s=la.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===i){ca(n,void 0===c?new aa(o,t,e):new sa(o,t,e));break}{let t=n.map[o];void 0===t&&(t=new oa(o),ca(n,t)),n=t}}}class ha{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);ua(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,a=e.length;i!==a;++i){const a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n}}function da(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let fa=0;function pa(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let s=i;s<a;s++){const t=s+1;r.push(`${t===e?">":" "} ${t}: ${n[s]}`)}return r.join("\n")}(t.getShaderSource(e),r)}return i}function ma(t,e){const n=function(t){switch(t){case ft:return["Linear","( value )"];case pt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function ga(t,e){let n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ya(t){return""!==t}function va(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ba(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const xa=/^[ \t]*#include +<([\w\d./]+)>/gm;function _a(t){return t.replace(xa,wa)}function wa(t,e){const n=Ar[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return _a(n)}const Sa=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ea=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ma(t){return t.replace(Ea,Ta).replace(Sa,Ca)}function Ca(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ta(t,e,n,r)}function Ta(t,e,n,r){let i="";for(let a=parseInt(e);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Aa(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function ka(t,e,n,r){const i=t.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),c=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case h:case d:e="ENVMAP_TYPE_CUBE";break;case m:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),u=function(t){let e="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===d&&(e="ENVMAP_MODE_REFRACTION");return e}(n),f=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),p=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),g=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ya).join("\n")}(n),y=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(a),v=i.createProgram();let b,x,_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(b=[y].filter(ya).join("\n"),b.length>0&&(b+="\n"),x=[g,y].filter(ya).join("\n"),x.length>0&&(x+="\n")):(b=[Aa(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ya).join("\n"),x=[g,Aa(n),"#define SHADER_NAME "+n.shaderName,y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Ar.tonemapping_pars_fragment:"",0!==n.toneMapping?ga("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ar.encodings_pars_fragment,ma("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ya).join("\n")),s=_a(s),s=va(s,n),s=ba(s,n),o=_a(o),o=va(o,n),o=ba(o,n),s=Ma(s),o=Ma(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,x=["#define varying in",n.glslVersion===_t?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===_t?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const w=_+x+o,S=da(i,35633,_+b+s),E=da(i,35632,w);if(i.attachShader(v,S),i.attachShader(v,E),void 0!==n.index0AttributeName?i.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v),t.debug.checkShaderErrors){const t=i.getProgramInfoLog(v).trim(),e=i.getShaderInfoLog(S).trim(),n=i.getShaderInfoLog(E).trim();let r=!0,a=!0;if(!1===i.getProgramParameter(v,35714)){r=!1;const e=pa(i,S,"vertex"),n=pa(i,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):(""===e||""===n)&&(a=!1);a&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e,prefix:b},fragmentShader:{log:n,prefix:x}})}let M,C;return i.deleteShader(S),i.deleteShader(E),this.getUniforms=function(){return void 0===M&&(M=new ha(i,v)),M},this.getAttributes=function(){return void 0===C&&(C=function(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),a=r.name;let s=1;35674===r.type&&(s=2),35675===r.type&&(s=3),35676===r.type&&(s=4),n[a]={type:r.type,location:t.getAttribLocation(e,a),locationSize:s}}return n}(i,v)),C},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=fa++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=S,this.fragmentShader=E,this}let La=0;class Pa{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}_getShaderStage(t){const e=this.shaderCache;if(!1===e.has(t)){const n=new Ra(t);e.set(t,n)}return e.get(t)}}class Ra{constructor(t){this.id=La++,this.code=t,this.usedTimes=0}}function Ia(t,e,n,r,i,a,s){const o=new Ke,l=new Pa,c=[],u=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,o,c,g,y){const v=g.fog,b=y.geometry,x=a.isMeshStandardMaterial?g.environment:null,_=(a.isMeshStandardMaterial?n:e).get(a.envMap||x),w=_&&_.mapping===m?_.image.height:null,S=p[a.type];null!==a.precision&&(f=i.getMaxPrecision(a.precision),f!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",f,"instead."));const E=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,M=void 0!==E?E.length:0;let C,T,A,k,L=0;if(void 0!==b.morphAttributes.position&&(L=1),void 0!==b.morphAttributes.normal&&(L=2),void 0!==b.morphAttributes.color&&(L=3),S){const t=Lr[S];C=t.vertexShader,T=t.fragmentShader}else C=a.vertexShader,T=a.fragmentShader,l.update(a),A=l.getVertexShaderID(a),k=l.getFragmentShaderID(a);const P=t.getRenderTarget(),R=a.alphaTest>0,I=a.clearcoat>0,D=a.iridescence>0;return{isWebGL2:u,shaderID:S,shaderName:a.type,vertexShader:C,fragmentShader:T,defines:a.defines,customVertexShaderID:A,customFragmentShaderID:k,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:f,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:d,outputEncoding:null===P?t.outputEncoding:!0===P.isXRRenderTarget?P.texture.encoding:ft,map:!!a.map,matcap:!!a.matcap,envMap:!!_,envMapMode:_&&_.mapping,envMapCubeUVHeight:w,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:1===a.normalMapType,tangentSpaceNormalMap:0===a.normalMapType,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===pt,clearcoat:I,clearcoatMap:I&&!!a.clearcoatMap,clearcoatRoughnessMap:I&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:I&&!!a.clearcoatNormalMap,iridescence:D,iridescenceMap:D&&!!a.iridescenceMap,iridescenceThicknessMap:D&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&1===a.blending,alphaMap:!!a.alphaMap,alphaTest:R,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!b.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheenColorMap||a.sheenRoughnessMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!v,useFog:!0===a.fog,fogExp2:v&&v.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:M,morphTextureStride:L,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.length>0,shadowMapType:t.shadowMap.type,toneMapping:a.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){o.disableAll(),e.isWebGL2&&o.enable(0),e.supportsVertexTextures&&o.enable(1),e.instancing&&o.enable(2),e.instancingColor&&o.enable(3),e.map&&o.enable(4),e.matcap&&o.enable(5),e.envMap&&o.enable(6),e.lightMap&&o.enable(7),e.aoMap&&o.enable(8),e.emissiveMap&&o.enable(9),e.bumpMap&&o.enable(10),e.normalMap&&o.enable(11),e.objectSpaceNormalMap&&o.enable(12),e.tangentSpaceNormalMap&&o.enable(13),e.clearcoat&&o.enable(14),e.clearcoatMap&&o.enable(15),e.clearcoatRoughnessMap&&o.enable(16),e.clearcoatNormalMap&&o.enable(17),e.iridescence&&o.enable(18),e.iridescenceMap&&o.enable(19),e.iridescenceThicknessMap&&o.enable(20),e.displacementMap&&o.enable(21),e.specularMap&&o.enable(22),e.roughnessMap&&o.enable(23),e.metalnessMap&&o.enable(24),e.gradientMap&&o.enable(25),e.alphaMap&&o.enable(26),e.alphaTest&&o.enable(27),e.vertexColors&&o.enable(28),e.vertexAlphas&&o.enable(29),e.vertexUvs&&o.enable(30),e.vertexTangents&&o.enable(31),e.uvsVertexOnly&&o.enable(32),e.fog&&o.enable(33),t.push(o.mask),o.disableAll(),e.useFog&&o.enable(0),e.flatShading&&o.enable(1),e.logarithmicDepthBuffer&&o.enable(2),e.skinning&&o.enable(3),e.morphTargets&&o.enable(4),e.morphNormals&&o.enable(5),e.morphColors&&o.enable(6),e.premultipliedAlpha&&o.enable(7),e.shadowMapEnabled&&o.enable(8),e.physicallyCorrectLights&&o.enable(9),e.doubleSided&&o.enable(10),e.flipSided&&o.enable(11),e.useDepthPacking&&o.enable(12),e.dithering&&o.enable(13),e.specularIntensityMap&&o.enable(14),e.specularColorMap&&o.enable(15),e.transmission&&o.enable(16),e.transmissionMap&&o.enable(17),e.thicknessMap&&o.enable(18),e.sheen&&o.enable(19),e.sheenColorMap&&o.enable(20),e.sheenRoughnessMap&&o.enable(21),e.decodeVideoTexture&&o.enable(22),e.opaque&&o.enable(23),t.push(o.mask)}(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=p[t.type];let n;if(e){const t=Lr[e];n=ur.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let t=0,i=c.length;t<i;t++){const e=c[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new ka(t,n,e,a),c.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=c.indexOf(t);c[e]=c[c.length-1],c.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:c,dispose:function(){l.dispose()}}}function Da(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function Ba(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Oa(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Na(){const t=[];let e=0;const n=[],r=[],i=[];function a(n,r,i,a,s,o){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),e++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){e=0,n.length=0,r.length=0,i.length=0},push:function(t,e,s,o,l,c){const u=a(t,e,s,o,l,c);s.transmission>0?r.push(u):!0===s.transparent?i.push(u):n.push(u)},unshift:function(t,e,s,o,l,c){const u=a(t,e,s,o,l,c);s.transmission>0?r.unshift(u):!0===s.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Ba),r.length>1&&r.sort(e||Oa),i.length>1&&i.sort(e||Oa)}}}function Fa(){let t=new WeakMap;return{get:function(e,n){let r;return!1===t.has(e)?(r=new Na,t.set(e,[r])):n>=t.get(e).length?(r=new Na,t.get(e).push(r)):r=t.get(e)[n],r},dispose:function(){t=new WeakMap}}}function za(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new ue,color:new Kt};break;case"SpotLight":n={position:new ue,direction:new ue,color:new Kt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ue,color:new Kt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ue,skyColor:new Kt,groundColor:new Kt};break;case"RectAreaLight":n={color:new Kt,position:new ue,halfWidth:new ue,halfHeight:new ue}}return t[e.id]=n,n}}}let Ua=0;function Ga(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Ha(t,e){const n=new za,r=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ot};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ot,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let l=0;l<9;l++)i.probe.push(new ue);const a=new ue,s=new Ge,o=new Ge;return{setup:function(a,s){let o=0,l=0,c=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let u=0,h=0,d=0,f=0,p=0,m=0,g=0,y=0;a.sort(Ga);const v=!0!==s?Math.PI:1;for(let t=0,e=a.length;t<e;t++){const e=a[t],s=e.color,b=e.intensity,x=e.distance,_=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)o+=s.r*b*v,l+=s.g*b*v,c+=s.b*b*v;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],b);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*v),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=_,i.directionalShadowMatrix[u]=e.shadow.matrix,m++}i.directional[u]=t,u++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(s).multiplyScalar(b*v),t.distance=x,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.spotShadow[d]=n,i.spotShadowMap[d]=_,i.spotShadowMatrix[d]=e.shadow.matrix,y++}i.spot[d]=t,d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(s).multiplyScalar(b),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[f]=t,f++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*v),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=_,i.pointShadowMatrix[h]=e.shadow.matrix,g++}i.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(b*v),t.groundColor.copy(e.groundColor).multiplyScalar(b*v),i.hemi[p]=t,p++}}f>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=kr.LTC_FLOAT_1,i.rectAreaLTC2=kr.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=kr.LTC_HALF_1,i.rectAreaLTC2=kr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=l,i.ambient[2]=c;const b=i.hash;(b.directionalLength!==u||b.pointLength!==h||b.spotLength!==d||b.rectAreaLength!==f||b.hemiLength!==p||b.numDirectionalShadows!==m||b.numPointShadows!==g||b.numSpotShadows!==y)&&(i.directional.length=u,i.spot.length=d,i.rectArea.length=f,i.point.length=h,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=y,b.directionalLength=u,b.pointLength=h,b.spotLength=d,b.rectAreaLength=f,b.hemiLength=p,b.numDirectionalShadows=m,b.numPointShadows=g,b.numSpotShadows=y,i.version=Ua++)},setupView:function(t,e){let n=0,r=0,l=0,c=0,u=0;const h=e.matrixWorldInverse;for(let d=0,f=t.length;d<f;d++){const e=t[d];if(e.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),a.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(h),n++}else if(e.isSpotLight){const t=i.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(e.matrixWorld),a.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(h),l++}else if(e.isRectAreaLight){const t=i.rectArea[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),o.identity(),s.copy(e.matrixWorld),s.premultiply(h),o.extractRotation(s),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(o),t.halfHeight.applyMatrix4(o),c++}else if(e.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),r++}else if(e.isHemisphereLight){const t=i.hemi[u];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(h),u++}}},state:i}}function ja(t,e){const n=new Ha(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(t){n.setup(r,t)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function Va(t,e){let n=new WeakMap;return{get:function(r,i=0){let a;return!1===n.has(r)?(a=new ja(t,e),n.set(r,[a])):i>=n.get(r).length?(a=new ja(t,e),n.get(r).push(a)):a=n.get(r)[i],a},dispose:function(){n=new WeakMap}}}class Wa extends Cn{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=mt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class $a extends Cn{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ue,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function Ya(t,e,n){let r=new Er;const i=new Ot,a=new Ot,s=new ae,o=new Wa({depthPacking:gt}),l=new $a,c={},u=n.maxTextureSize,h={0:1,1:0,2:2},d=new hr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ot},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new Gn;p.setAttribute("position",new Ln(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new ar(p,d),g=this;function y(n,r){const a=e.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new se(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,a,d,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,a,f,m,null)}function v(e,n,r,i,a,s){let u=null;const d=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(u=void 0!==d?d:!0===r.isPointLight?l:o,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const t=u.uuid,e=n.uuid;let r=c[t];void 0===r&&(r={},c[t]=r);let i=r[e];void 0===i&&(i=u.clone(),r[e]=i),u=i}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=3===s?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=i,u.farDistance=a),u}function x(n,i,a,s,o){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],u=i[c.materialIndex];if(u&&u.visible){const e=v(n,u,s,a.near,a.far,o);t.renderBufferDirect(a,null,r,e,n,c)}}}else if(i.visible){const e=v(n,i,s,a.near,a.far,o);t.renderBufferDirect(a,null,r,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)x(l[t],i,a,s,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,n,o){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===e.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let f=0,p=e.length;f<p;f++){const l=e[f],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const h=c.getFrameExtents();if(i.multiply(h),a.copy(c.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(a.x=Math.floor(u/h.x),i.x=a.x*h.x,c.mapSize.x=a.x),i.y>u&&(a.y=Math.floor(u/h.y),i.y=a.y*h.y,c.mapSize.y=a.y)),null===c.map){const t=3!==this.type?{minFilter:b,magFilter:b}:{};c.map=new se(i.x,i.y,t),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}t.setRenderTarget(c.map),t.clear();const p=c.getViewportCount();for(let t=0;t<p;t++){const e=c.getViewport(t);s.set(a.x*e.x,a.y*e.y,a.x*e.z,a.y*e.w),d.viewport(s),c.updateMatrices(l,t),r=c.getFrustum(),x(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&3===this.type&&y(c,o),c.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(l,c,h)}}function qa(t,e,n){const r=n.isWebGL2;const i=new function(){let e=!1;const n=new ae;let r=null;const i=new ae(0,0,0,0);return{setMask:function(n){r!==n&&!e&&(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,a,s,o){!0===o&&(e*=s,r*=s,a*=s),n.set(e,r,a,s),!1===i.equals(n)&&(t.clearColor(e,r,a,s),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(t){t?j(2929):V(2929)},setMask:function(r){n!==r&&!e&&(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},s=new function(){let e=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(t){e||(t?j(2960):V(2960))},setMask:function(r){n!==r&&!e&&(t.stencilMask(r),n=r)},setFunc:function(e,n,s){(r!==e||i!==n||a!==s)&&(t.stencilFunc(e,n,s),r=e,i=n,a=s)},setOp:function(e,n,r){(s!==e||o!==n||l!==r)&&(t.stencilOp(e,n,r),s=e,o=n,l=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,c=null}}},u=new WeakMap,h=new WeakMap;let d={},f={},p=new WeakMap,m=[],g=null,y=!1,v=null,b=null,x=null,_=null,w=null,S=null,E=null,M=!1,C=null,T=null,A=null,k=null,L=null;const P=t.getParameter(35661);let R=!1,I=0;const D=t.getParameter(7938);-1!==D.indexOf("WebGL")?(I=parseFloat(/^WebGL (\d)/.exec(D)[1]),R=I>=1):-1!==D.indexOf("OpenGL ES")&&(I=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),R=I>=2);let B=null,O={};const N=t.getParameter(3088),F=t.getParameter(2978),z=(new ae).fromArray(N),U=(new ae).fromArray(F);function G(e,n,r){const i=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let s=0;s<r;s++)t.texImage2D(n+s,0,6408,1,1,0,6408,5121,i);return a}const H={};function j(e){!0!==d[e]&&(t.enable(e),d[e]=!0)}function V(e){!1!==d[e]&&(t.disable(e),d[e]=!1)}H[3553]=G(3553,3553,1),H[34067]=G(34067,34069,6),i.setClear(0,0,0,1),a.setClear(1),s.setClear(0),j(2929),a.setFunc(3),q(!1),X(1),j(2884),Y(0);const W={[o]:32774,101:32778,102:32779};if(r)W[103]=32775,W[104]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(W[103]=t.MIN_EXT,W[104]=t.MAX_EXT)}const $={200:0,201:1,202:768,[l]:770,210:776,208:774,206:772,203:769,[c]:771,209:775,207:773};function Y(e,n,r,i,a,s,l,c){if(0!==e){if(!1===y&&(j(3042),y=!0),5===e)a=a||n,s=s||r,l=l||i,(n!==b||a!==w)&&(t.blendEquationSeparate(W[n],W[a]),b=n,w=a),(r!==x||i!==_||s!==S||l!==E)&&(t.blendFuncSeparate($[r],$[i],$[s],$[l]),x=r,_=i,S=s,E=l),v=e,M=null;else if(e!==v||c!==M){if((b!==o||w!==o)&&(t.blendEquation(32774),b=o,w=o),c)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}x=null,_=null,S=null,E=null,v=e,M=c}}else!0===y&&(V(3042),y=!1)}function q(e){C!==e&&(e?t.frontFace(2304):t.frontFace(2305),C=e)}function X(e){0!==e?(j(2884),e!==T&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):V(2884),T=e}function J(e,n,r){e?(j(32823),(k!==n||L!==r)&&(t.polygonOffset(n,r),k=n,L=r)):V(32823)}function Z(e){void 0===e&&(e=33984+P-1),B!==e&&(t.activeTexture(e),B=e)}return{buffers:{color:i,depth:a,stencil:s},enable:j,disable:V,bindFramebuffer:function(e,n){return f[e]!==n&&(t.bindFramebuffer(e,n),f[e]=n,r&&(36009===e&&(f[36160]=n),36160===e&&(f[36009]=n)),!0)},drawBuffers:function(r,i){let a=m,s=!1;if(r)if(a=p.get(i),void 0===a&&(a=[],p.set(i,a)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(a.length!==t.length||36064!==a[0]){for(let e=0,n=t.length;e<n;e++)a[e]=36064+e;a.length=t.length,s=!0}}else 36064!==a[0]&&(a[0]=36064,s=!0);else 1029!==a[0]&&(a[0]=1029,s=!0);s&&(n.isWebGL2?t.drawBuffers(a):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(e){return g!==e&&(t.useProgram(e),g=e,!0)},setBlending:Y,setMaterial:function(t,e){2===t.side?V(2884):j(2884);let n=1===t.side;e&&(n=!n),q(n),1===t.blending&&!1===t.transparent?Y(0):Y(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),i.setMask(t.colorWrite);const r=t.stencilWrite;s.setTest(r),r&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),J(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?j(32926):V(32926)},setFlipSided:q,setCullFace:X,setLineWidth:function(e){e!==A&&(R&&t.lineWidth(e),A=e)},setPolygonOffset:J,setScissorTest:function(t){t?j(3089):V(3089)},activeTexture:Z,bindTexture:function(e,n){null===B&&Z();let r=O[B];void 0===r&&(r={type:void 0,texture:void 0},O[B]=r),(r.type!==e||r.texture!==n)&&(t.bindTexture(e,n||H[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=O[B];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(e,n){let r=h.get(n);void 0===r&&(r=new WeakMap,h.set(n,r));let i=r.get(e);void 0===i&&(i=t.getUniformBlockIndex(n,e.name),r.set(e,i))},uniformBlockBinding:function(e,n){const r=h.get(n).get(e);u.get(e)!==r&&(t.uniformBlockBinding(n,r,e.__bindingPointIndex),u.set(e,r))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===z.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),z.copy(e))},viewport:function(e){!1===U.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),U.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},B=null,O={},f={},p=new WeakMap,m=[],g=null,y=!1,v=null,b=null,x=null,_=null,w=null,S=null,E=null,M=!1,C=null,T=null,A=null,k=null,L=null,z.set(0,0,t.canvas.width,t.canvas.height),U.set(0,0,t.canvas.width,t.canvas.height),i.reset(),a.reset(),s.reset()}}}function Xa(t,e,n,r,i,a,s){const o=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const D=new WeakMap;let B=!1;try{B=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function O(t,e){return B?new OffscreenCanvas(t,e):Gt("canvas")}function N(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const r=e?Dt:Math.floor,a=r(i*t.width),s=r(i*t.height);void 0===m&&(m=O(a,s));const o=n?O(a,s):m;return o.width=a,o.height=s,o.getContext("2d").drawImage(t,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+s+")."),o}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function F(t){return Rt(t.width)&&Rt(t.height)}function z(t,e){return t.generateMipmaps&&e&&t.minFilter!==b&&t.minFilter!==w}function U(e){t.generateMipmap(e)}function G(n,r,i,a,s=!1){if(!1===o)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=a===pt&&!1===s?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),(33325===l||33326===l||33327===l||33328===l||34842===l||34836===l)&&e.get("EXT_color_buffer_float"),l}function H(t,e,n){return!0===z(t,n)||t.isFramebufferTexture&&t.minFilter!==b&&t.minFilter!==w?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function j(t){return t===b||t===x||t===_?9728:9729}function V(t){const e=t.target;e.removeEventListener("dispose",V),function(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=D.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&$(t),0===Object.keys(i).length&&D.delete(n)}r.remove(t)}(e),e.isVideoTexture&&p.delete(e)}function W(e){const n=e.target;n.removeEventListener("dispose",W),function(e){const n=e.texture,i=r.get(e),a=r.get(n);if(void 0!==a.__webglTexture&&(t.deleteTexture(a.__webglTexture),s.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)t.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[r]);else{if(t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let e=0;e<i.__webglColorRenderbuffer.length;e++)i.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(i.__webglColorRenderbuffer[e]);i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let o=0,l=n.length;o<l;o++){const e=r.get(n[o]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),s.memory.textures--),r.remove(n[o])}r.remove(n),r.remove(e)}(n)}function $(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source;delete D.get(i)[n.__cacheKey],s.memory.textures--}let Y=0;function q(t,e){const i=r.get(t);if(t.isVideoTexture&&function(t){const e=s.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version){const n=t.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void Q(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}const X={[g]:10497,[y]:33071,[v]:33648},J={[b]:9728,[x]:9984,[_]:9986,[w]:9729,[S]:9985,[E]:9987};function Z(n,a,s){if(s?(t.texParameteri(n,10242,X[a.wrapS]),t.texParameteri(n,10243,X[a.wrapT]),(32879===n||35866===n)&&t.texParameteri(n,32882,X[a.wrapR]),t.texParameteri(n,10240,J[a.magFilter]),t.texParameteri(n,10241,J[a.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),(32879===n||35866===n)&&t.texParameteri(n,32882,33071),(a.wrapS!==y||a.wrapT!==y)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,j(a.magFilter)),t.texParameteri(n,10241,j(a.minFilter)),a.minFilter!==b&&a.minFilter!==w&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const s=e.get("EXT_texture_filter_anisotropic");if(a.type===A&&!1===e.has("OES_texture_float_linear")||!1===o&&a.type===k&&!1===e.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function K(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",V));const i=n.source;let a=D.get(i);void 0===a&&(a={},D.set(i,a));const o=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}(n);if(o!==e.__cacheKey){void 0===a[o]&&(a[o]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,r=!0),a[o].usedTimes++;const i=a[e.__cacheKey];void 0!==i&&(a[e.__cacheKey].usedTimes--,0===i.usedTimes&&$(n)),e.__cacheKey=o,e.__webglTexture=a[o].texture}return r}function Q(e,r,i){let s=3553;r.isDataArrayTexture&&(s=35866),r.isData3DTexture&&(s=32879);const l=K(e,r),c=r.source;if(n.activeTexture(33984+i),n.bindTexture(s,e.__webglTexture),c.version!==c.__currentVersion||!0===l){t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const e=function(t){return!o&&(t.wrapS!==y||t.wrapT!==y||t.minFilter!==b&&t.minFilter!==w)}(r)&&!1===F(r.image);let i=N(r.image,e,!1,u);i=at(r,i);const h=F(i)||o,d=a.convert(r.format,r.encoding);let f,p=a.convert(r.type),m=G(r.internalFormat,d,p,r.encoding,r.isVideoTexture);Z(s,r,h);const g=r.mipmaps,v=o&&!0!==r.isVideoTexture,x=void 0===c.__currentVersion||!0===l,_=H(r,i,h);if(r.isDepthTexture)m=6402,o?m=r.type===A?36012:r.type===T?33190:r.type===L?35056:33189:r.type===A&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===R&&6402===m&&r.type!==C&&r.type!==T&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=T,p=a.convert(r.type)),r.format===I&&6402===m&&(m=34041,r.type!==L&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=L,p=a.convert(r.type))),x&&(v?n.texStorage2D(3553,1,m,i.width,i.height):n.texImage2D(3553,0,m,i.width,i.height,0,d,p,null));else if(r.isDataTexture)if(g.length>0&&h){v&&x&&n.texStorage2D(3553,_,m,g[0].width,g[0].height);for(let t=0,e=g.length;t<e;t++)f=g[t],v?n.texSubImage2D(3553,t,0,0,f.width,f.height,d,p,f.data):n.texImage2D(3553,t,m,f.width,f.height,0,d,p,f.data);r.generateMipmaps=!1}else v?(x&&n.texStorage2D(3553,_,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,i.width,i.height,d,p,i.data)):n.texImage2D(3553,0,m,i.width,i.height,0,d,p,i.data);else if(r.isCompressedTexture){v&&x&&n.texStorage2D(3553,_,m,g[0].width,g[0].height);for(let t=0,e=g.length;t<e;t++)f=g[t],r.format!==P?null!==d?v?n.compressedTexSubImage2D(3553,t,0,0,f.width,f.height,d,f.data):n.compressedTexImage2D(3553,t,m,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):v?n.texSubImage2D(3553,t,0,0,f.width,f.height,d,p,f.data):n.texImage2D(3553,t,m,f.width,f.height,0,d,p,f.data)}else if(r.isDataArrayTexture)v?(x&&n.texStorage3D(35866,_,m,i.width,i.height,i.depth),n.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,d,p,i.data)):n.texImage3D(35866,0,m,i.width,i.height,i.depth,0,d,p,i.data);else if(r.isData3DTexture)v?(x&&n.texStorage3D(32879,_,m,i.width,i.height,i.depth),n.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,d,p,i.data)):n.texImage3D(32879,0,m,i.width,i.height,i.depth,0,d,p,i.data);else if(r.isFramebufferTexture){if(x)if(v)n.texStorage2D(3553,_,m,i.width,i.height);else{let t=i.width,e=i.height;for(let r=0;r<_;r++)n.texImage2D(3553,r,m,t,e,0,d,p,null),t>>=1,e>>=1}}else if(g.length>0&&h){v&&x&&n.texStorage2D(3553,_,m,g[0].width,g[0].height);for(let t=0,e=g.length;t<e;t++)f=g[t],v?n.texSubImage2D(3553,t,0,0,d,p,f):n.texImage2D(3553,t,m,d,p,f);r.generateMipmaps=!1}else v?(x&&n.texStorage2D(3553,_,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,d,p,i)):n.texImage2D(3553,0,m,d,p,i);z(r,h)&&U(s),c.__currentVersion=c.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function tt(e,i,s,o,l){const c=a.convert(s.format,s.encoding),u=a.convert(s.type),h=G(s.internalFormat,c,u,s.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,h,i.width,i.height,0,c,u,null)),n.bindFramebuffer(36160,e),it(i)?d.framebufferTexture2DMultisampleEXT(36160,o,l,r.get(s).__webglTexture,0,rt(i)):t.framebufferTexture2D(36160,o,l,r.get(s).__webglTexture,0),n.bindFramebuffer(36160,null)}function et(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||it(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===A?i=36012:e.type===T&&(i=33190));const r=rt(n);it(n)?d.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):t.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const i=rt(n);r&&!1===it(n)?t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):it(n)?d.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<e.length;i++){const s=e[i],o=a.convert(s.format,s.encoding),l=a.convert(s.type),c=G(s.internalFormat,o,l,s.encoding),u=rt(n);r&&!1===it(n)?t.renderbufferStorageMultisample(36161,u,c,n.width,n.height):it(n)?d.renderbufferStorageMultisampleEXT(36161,u,c,n.width,n.height):t.renderbufferStorage(36161,c,n.width,n.height)}}t.bindRenderbuffer(36161,null)}function nt(e){const i=r.get(e),a=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(i.depthTexture).__webglTexture||i.depthTexture.image.width!==i.width||i.depthTexture.image.height!==i.height)&&(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),q(i.depthTexture,0);const a=r.get(i.depthTexture).__webglTexture,s=rt(i);if(i.depthTexture.format===R)it(i)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,s):t.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==I)throw new Error("Unknown depthTexture format");it(i)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,s):t.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,e)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),et(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),et(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function rt(t){return Math.min(h,t.samples)}function it(t){const n=r.get(t);return o&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function at(t,n){const r=t.encoding,i=t.format,a=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===wt||r!==ft&&(r===pt?!1===o?!0===e.has("EXT_sRGB")&&i===P?(t.format=wt,t.minFilter=w,t.generateMipmaps=!1):n=te.sRGBToLinear(n):(i!==P||a!==M)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){const t=Y;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),Y+=1,t},this.resetTextureUnits=function(){Y=0},this.setTexture2D=q,this.setTexture2DArray=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?Q(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?Q(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(e,i){const s=r.get(e);e.version>0&&s.__version!==e.version?function(e,r,i){if(6!==r.image.length)return;const s=K(e,r),l=r.source;if(n.activeTexture(33984+i),n.bindTexture(34067,e.__webglTexture),l.version!==l.__currentVersion||!0===s){t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const e=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,u=[];for(let t=0;t<6;t++)u[t]=e||i?i?r.image[t].image:r.image[t]:N(r.image[t],!1,!0,c),u[t]=at(r,u[t]);const h=u[0],d=F(h)||o,f=a.convert(r.format,r.encoding),p=a.convert(r.type),m=G(r.internalFormat,f,p,r.encoding),g=o&&!0!==r.isVideoTexture,y=void 0===l.__currentVersion||!0===s;let v,b=H(r,h,d);if(Z(34067,r,d),e){g&&y&&n.texStorage2D(34067,b,m,h.width,h.height);for(let t=0;t<6;t++){v=u[t].mipmaps;for(let e=0;e<v.length;e++){const i=v[e];r.format!==P?null!==f?g?n.compressedTexSubImage2D(34069+t,e,0,0,i.width,i.height,f,i.data):n.compressedTexImage2D(34069+t,e,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g?n.texSubImage2D(34069+t,e,0,0,i.width,i.height,f,p,i.data):n.texImage2D(34069+t,e,m,i.width,i.height,0,f,p,i.data)}}}else{v=r.mipmaps,g&&y&&(v.length>0&&b++,n.texStorage2D(34067,b,m,u[0].width,u[0].height));for(let t=0;t<6;t++)if(i){g?n.texSubImage2D(34069+t,0,0,0,u[t].width,u[t].height,f,p,u[t].data):n.texImage2D(34069+t,0,m,u[t].width,u[t].height,0,f,p,u[t].data);for(let e=0;e<v.length;e++){const r=v[e].image[t].image;g?n.texSubImage2D(34069+t,e+1,0,0,r.width,r.height,f,p,r.data):n.texImage2D(34069+t,e+1,m,r.width,r.height,0,f,p,r.data)}}else{g?n.texSubImage2D(34069+t,0,0,0,f,p,u[t]):n.texImage2D(34069+t,0,m,f,p,u[t]);for(let e=0;e<v.length;e++){const r=v[e];g?n.texSubImage2D(34069+t,e+1,0,0,f,p,r.image[t]):n.texImage2D(34069+t,e+1,m,f,p,r.image[t])}}}z(r,d)&&U(34067),l.__currentVersion=l.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}(s,e,i):(n.activeTexture(33984+i),n.bindTexture(34067,s.__webglTexture))},this.rebindTextures=function(t,e,n){const i=r.get(t);void 0!==e&&tt(i.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&nt(t)},this.setupRenderTarget=function(e){const l=e.texture,c=r.get(e),u=r.get(l);e.addEventListener("dispose",W),!0!==e.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=t.createTexture()),u.__version=l.version,s.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,f=F(e)||o;if(h){c.__webglFramebuffer=[];for(let e=0;e<6;e++)c.__webglFramebuffer[e]=t.createFramebuffer()}else{if(c.__webglFramebuffer=t.createFramebuffer(),d)if(i.drawBuffers){const n=e.texture;for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&e.samples>0&&!1===it(e)){const r=d?l:[l];c.__webglMultisampledFramebuffer=t.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);const s=a.convert(i.format,i.encoding),o=a.convert(i.type),l=G(i.internalFormat,s,o,i.encoding),u=rt(e);t.renderbufferStorageMultisample(36161,u,l,e.width,e.height),t.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(c.__webglDepthRenderbuffer=t.createRenderbuffer(),et(c.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,u.__webglTexture),Z(34067,l,f);for(let t=0;t<6;t++)tt(c.__webglFramebuffer[t],e,l,36064,34069+t);z(l,f)&&U(34067),n.unbindTexture()}else if(d){const t=e.texture;for(let i=0,a=t.length;i<a;i++){const a=t[i],s=r.get(a);n.bindTexture(3553,s.__webglTexture),Z(3553,a,f),tt(c.__webglFramebuffer,e,a,36064+i,3553),z(a,f)&&U(3553)}n.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(o?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(t,u.__webglTexture),Z(t,l,f),tt(c.__webglFramebuffer,e,l,36064,t),z(l,f)&&U(t),n.unbindTexture()}e.depthBuffer&&nt(e)},this.updateRenderTargetMipmap=function(t){const e=F(t)||o,i=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let a=0,s=i.length;a<s;a++){const s=i[a];if(z(s,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,i=r.get(s).__webglTexture;n.bindTexture(e,i),U(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(o&&e.samples>0&&!1===it(e)){const i=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=e.width,s=e.height;let o=16384;const l=[],c=e.stencilBuffer?33306:36096,u=r.get(e),h=!0===e.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<i.length;e++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),e.depthBuffer&&l.push(c);const d=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===d&&(e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024)),h&&t.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[n]),!0===d&&(t.invalidateFramebuffer(36008,[c]),t.invalidateFramebuffer(36009,[c])),h){const e=r.get(i[n]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,e,0)}t.blitFramebuffer(0,0,a,s,0,0,a,s,o,9728),f&&t.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(let e=0;e<i.length;e++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,u.__webglColorRenderbuffer[e]);const a=r.get(i[e]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,a,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=nt,this.setupFrameBufferTexture=tt,this.useMultisampledRTT=it}function Ja(t,e,n){const r=n.isWebGL2;return{convert:function(n,i=null){let a;if(n===M)return 5121;if(1017===n)return 32819;if(1018===n)return 32820;if(1010===n)return 5120;if(1011===n)return 5122;if(n===C)return 5123;if(1013===n)return 5124;if(n===T)return 5125;if(n===A)return 5126;if(n===k)return r?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===n)return 6406;if(n===P)return 6408;if(1024===n)return 6409;if(1025===n)return 6410;if(n===R)return 6402;if(n===I)return 34041;if(1028===n)return 6403;if(1022===n)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===wt)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===n)return 36244;if(1030===n)return 33319;if(1031===n)return 33320;if(1033===n)return 36249;if(n===D||n===B||n===O||n===N)if(i===pt){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(n===D)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===B)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===O)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===N)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(n===D)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===B)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===O)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===N)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===F||n===z||n===U||n===G){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(n===F)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===z)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===U)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===G)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===H||n===j){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(n===H)return i===pt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===j)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===V||n===W||n===$||n===Y||n===q||n===X||n===J||n===Z||n===K||n===Q||n===tt||n===et||n===nt||n===rt){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(n===V)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===W)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===$)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Y)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===q)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===X)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===J)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Z)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===K)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Q)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===tt)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===et)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===nt)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===rt)return i===pt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===it){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(n===it)return i===pt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===L?r?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}}}class Za extends fr{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Ka extends fn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Qa={type:"move"};class ts{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ka,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ka,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ue,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ue),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ka,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ue,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ue),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){a=!0;for(const a of t.hand.values()){const t=e.getJointPose(a,n);if(void 0===l.joints[a.jointName]){const t=new Ka;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[a.jointName]=t,l.add(t)}const r=l.joints[a.jointName];null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=t.radius),r.visible=null!==t}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==o&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Qa)))}return null!==s&&(s.visible=null!==r),null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==a),this}}class es extends ie{constructor(t,e,n,r,i,a,s,o,l,c){if((c=void 0!==c?c:R)!==R&&c!==I)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===R&&(n=T),void 0===n&&c===I&&(n=L),super(null,r,i,a,s,o,c,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==s?s:b,this.minFilter=void 0!==o?o:b,this.flipY=!1,this.generateMipmaps=!1}}class ns extends St{constructor(t,e){super();const n=this;let r=null,i=1,a=null,s="local-floor",o=null,l=null,c=null,u=null,h=null,d=null;const f=e.getContextAttributes();let p=null,m=null;const g=[],y=[],v=new fr;v.layers.enable(1),v.viewport=new ae;const b=new fr;b.layers.enable(2),b.viewport=new ae;const x=[v,b],_=new Za;_.layers.enable(1),_.layers.enable(2);let w=null,S=null;function E(t){const e=y.indexOf(t.inputSource);if(-1===e)return;const n=g[e];void 0!==n&&n.dispatchEvent({type:t.type,data:t.inputSource})}function C(){r.removeEventListener("select",E),r.removeEventListener("selectstart",E),r.removeEventListener("selectend",E),r.removeEventListener("squeeze",E),r.removeEventListener("squeezestart",E),r.removeEventListener("squeezeend",E),r.removeEventListener("end",C),r.removeEventListener("inputsourceschange",A);for(let t=0;t<g.length;t++){const e=y[t];null!==e&&(y[t]=null,g[t].disconnect(e))}w=null,S=null,t.setRenderTarget(p),h=null,u=null,c=null,r=null,m=null,N.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function A(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=y.indexOf(n);r>=0&&(y[r]=null,g[r].dispatchEvent({type:"disconnected",data:n}))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let r=y.indexOf(n);if(-1===r){for(let t=0;t<g.length;t++){if(t>=y.length){y.push(n),r=t;break}if(null===y[t]){y[t]=n,r=t;break}}if(-1===r)break}const i=g[r];i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=g[t];return void 0===e&&(e=new ts,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=g[t];return void 0===e&&(e=new ts,g[t]=e),e.getGripSpace()},this.getHand=function(t){let e=g[t];return void 0===e&&(e=new ts,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o||a},this.setReferenceSpace=function(t){o=t},this.getBaseLayer=function(){return null!==u?u:h},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(p=t.getRenderTarget(),r.addEventListener("select",E),r.addEventListener("selectstart",E),r.addEventListener("selectend",E),r.addEventListener("squeeze",E),r.addEventListener("squeezestart",E),r.addEventListener("squeezeend",E),r.addEventListener("end",C),r.addEventListener("inputsourceschange",A),!0!==f.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:h}),m=new se(h.framebufferWidth,h.framebufferHeight,{format:P,type:M,encoding:t.outputEncoding})}else{let n=null,a=null,s=null;f.depth&&(s=f.stencil?35056:33190,n=f.stencil?I:R,a=f.stencil?L:T);const o={colorFormat:32856,depthFormat:s,scaleFactor:i};c=new XRWebGLBinding(r,e),u=c.createProjectionLayer(o),r.updateRenderState({layers:[u]}),m=new se(u.textureWidth,u.textureHeight,{format:P,type:M,depthTexture:new es(u.textureWidth,u.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,encoding:t.outputEncoding,samples:f.antialias?4:0});t.properties.get(m).__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),o=null,a=await r.requestReferenceSpace(s),N.setContext(r),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const k=new ue,D=new ue;function B(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;_.near=b.near=v.near=t.near,_.far=b.far=v.far=t.far,(w!==_.near||S!==_.far)&&(r.updateRenderState({depthNear:_.near,depthFar:_.far}),w=_.near,S=_.far);const e=t.parent,n=_.cameras;B(_,e);for(let r=0;r<n.length;r++)B(n[r],e);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),t.position.copy(_.position),t.quaternion.copy(_.quaternion),t.scale.copy(_.scale),t.matrix.copy(_.matrix),t.matrixWorld.copy(_.matrixWorld);const i=t.children;for(let r=0,a=i.length;r<a;r++)i[r].updateMatrixWorld(!0);2===n.length?function(t,e,n){k.setFromMatrixPosition(e.matrixWorld),D.setFromMatrixPosition(n.matrixWorld);const r=k.distanceTo(D),i=e.projectionMatrix.elements,a=n.projectionMatrix.elements,s=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(a[8]+1)/a[0],d=s*u,f=s*h,p=r/(-u+h),m=p*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=s+p,y=o+p,v=d-m,b=f+(r-m),x=l*o/y*g,_=c*o/y*g;t.projectionMatrix.makePerspective(v,b,x,_,g,y)}(_,v,b):_.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return _},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(t){null!==u&&(u.fixedFoveation=t),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=t)};let O=null;const N=new Mr;N.setAnimationLoop((function(e,n){if(l=n.getViewerPose(o||a),d=n,null!==l){const e=l.views;null!==h&&(t.setRenderTargetFramebuffer(m,h.framebuffer),t.setRenderTarget(m));let n=!1;e.length!==_.cameras.length&&(_.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r];let a=null;if(null!==h)a=h.getViewport(i);else{const e=c.getViewSubImage(u,i);a=e.viewport,0===r&&(t.setRenderTargetTextures(m,e.colorTexture,u.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(m))}let s=x[r];void 0===s&&(s=new fr,s.layers.enable(r),s.viewport=new ae,x[r]=s),s.matrix.fromArray(i.transform.matrix),s.projectionMatrix.fromArray(i.projectionMatrix),s.viewport.set(a.x,a.y,a.width,a.height),0===r&&_.matrix.copy(s.matrix),!0===n&&_.cameras.push(s)}}for(let t=0;t<g.length;t++){const e=y[t],r=g[t];null!==e&&void 0!==r&&r.update(e,n,o||a)}O&&O(e,n),d=null})),this.setAnimationLoop=function(t){O=t},this.dispose=function(){}}}function rs(t,e){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,1===r.side&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),1===r.side&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=e.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const e=!0!==t.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*e}let a,s;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?a=r.map:r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.roughnessMap?a=r.roughnessMap:r.metalnessMap?a=r.metalnessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap?a=r.emissiveMap:r.clearcoatMap?a=r.clearcoatMap:r.clearcoatNormalMap?a=r.clearcoatNormalMap:r.clearcoatRoughnessMap?a=r.clearcoatRoughnessMap:r.iridescenceMap?a=r.iridescenceMap:r.iridescenceThicknessMap?a=r.iridescenceThicknessMap:r.specularIntensityMap?a=r.specularIntensityMap:r.specularColorMap?a=r.specularColorMap:r.transmissionMap?a=r.transmissionMap:r.thicknessMap?a=r.thicknessMap:r.sheenColorMap?a=r.sheenColorMap:r.sheenRoughnessMap&&(a=r.sheenRoughnessMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uvTransform.value.copy(a.matrix)),r.aoMap?s=r.aoMap:r.lightMap&&(s=r.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uv2Transform.value.copy(s.matrix))}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,i,a,s){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(t,r):r.isMeshToonMaterial?(n(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,r)):r.isMeshPhongMaterial?(n(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,r)):r.isMeshStandardMaterial?(n(t,r),function(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}(t,r),r.isMeshPhysicalMaterial&&function(t,e,n){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap)),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap)),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,r,s)):r.isMeshMatcapMaterial?(n(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,r)):r.isMeshDepthMaterial?n(t,r):r.isMeshDistanceMaterial?(n(t,r),function(t,e){t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?n(t,r):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){let i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,i,a):r.isSpriteMaterial?function(t,e){let n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function is(t,e,n,r){let i={},a={},s=[];const o=n.isWebGL2?t.getParameter(35375):0;function l(t,e,n){const r=t.value;if(void 0===n[e])return n[e]="number"==typeof r?r:r.clone(),!0;if("number"==typeof r){if(n[e]!==r)return n[e]=r,!0}else{const t=n[e];if(!1===t.equals(r))return t.copy(r),!0}return!1}function c(t){const e=t.value,n={boundary:0,storage:0};return"number"==typeof e?(n.boundary=4,n.storage=4):e.isVector2?(n.boundary=8,n.storage=8):e.isVector3||e.isColor?(n.boundary=16,n.storage=12):e.isVector4?(n.boundary=16,n.storage=16):e.isMatrix3?(n.boundary=48,n.storage=48):e.isMatrix4?(n.boundary=64,n.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),n}function u(e){const n=e.target;n.removeEventListener("dispose",u);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),t.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(t,e){const n=e.program;r.uniformBlockBinding(t,n)},update:function(n,h){let d=i[n.id];void 0===d&&(function(t){const e=t.uniforms;let n=0;const r=16;let i=0;for(let a=0,s=e.length;a<s;a++){const t=e[a],s=c(t);if(t.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,a>0){i=n%r;0!==i&&r-i-s.boundary<0&&(n+=r-i,t.__offset=n)}n+=s.storage}i=n%r,i>0&&(n+=r-i),t.__size=n,t.__cache={}}(n),d=function(e){const n=function(){for(let t=0;t<o;t++)if(-1===s.indexOf(t))return s.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const r=t.createBuffer(),i=e.__size,a=e.usage;return t.bindBuffer(35345,r),t.bufferData(35345,i,a),t.bindBuffer(35345,null),t.bindBufferBase(35345,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));const f=h.program;r.updateUBOMapping(n,f);const p=e.render.frame;a[n.id]!==p&&(function(e){const n=i[e.id],r=e.uniforms,a=e.__cache;t.bindBuffer(35345,n);for(let i=0,s=r.length;i<s;i++){const e=r[i];if(!0===l(e,i,a)){const n=e.value,r=e.__offset;"number"==typeof n?(e.__data[0]=n,t.bufferSubData(35345,r,e.__data)):(e.value.isMatrix3?(e.__data[0]=e.value.elements[0],e.__data[1]=e.value.elements[1],e.__data[2]=e.value.elements[2],e.__data[3]=e.value.elements[0],e.__data[4]=e.value.elements[3],e.__data[5]=e.value.elements[4],e.__data[6]=e.value.elements[5],e.__data[7]=e.value.elements[0],e.__data[8]=e.value.elements[6],e.__data[9]=e.value.elements[7],e.__data[10]=e.value.elements[8],e.__data[11]=e.value.elements[0]):n.toArray(e.__data),t.bufferSubData(35345,r,e.__data))}}t.bindBuffer(35345,null)}(n),a[n.id]=p)},dispose:function(){for(const e in i)t.deleteBuffer(i[e]);s=[],i={},a={}}}}function as(t={}){this.isWebGLRenderer=!0;const e=void 0!==t.canvas?t.canvas:function(){const t=Gt("canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,r=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,s=void 0!==t.antialias&&t.antialias,o=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",u=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let h;h=null!==n?n.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;let d=null,f=null;const p=[],m=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ft,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const g=this;let y=!1,v=0,b=0,x=null,_=-1,w=null;const S=new ae,C=new ae;let T=null,L=e.width,R=e.height,I=1,D=null,B=null;const O=new ae(0,0,L,R),N=new ae(0,0,L,R);let F=!1;const z=new Er;let U=!1,G=!1,H=null;const j=new Ge,V=new Ot,W=new ue,$={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Y(){return null===x?I:1}let q,X,J,Z,K,Q,tt,et,nt,rt,it,at,st,ot,lt,ct,ut,ht,dt,pt,mt,gt,yt,vt,bt=n;function xt(t,n){for(let r=0;r<t.length;r++){const i=t[r],a=e.getContext(i,n);if(null!==a)return a}return null}try{const t={alpha:!0,depth:r,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${i}`),e.addEventListener("webglcontextlost",St,!1),e.addEventListener("webglcontextrestored",Et,!1),e.addEventListener("webglcontextcreationerror",Mt,!1),null===bt){const e=["webgl2","webgl","experimental-webgl"];if(!0===g.isWebGL1Renderer&&e.shift(),bt=xt(e,t),null===bt)throw xt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===bt.getShaderPrecisionFormat&&(bt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(zt){throw console.error("THREE.WebGLRenderer: "+zt.message),zt}function _t(){q=new Qr(bt),X=new Dr(bt,q,t),q.init(X),gt=new Ja(bt,q,X),J=new qa(bt,q,X),Z=new ni,K=new Da,Q=new Xa(bt,q,J,K,X,gt,Z),tt=new Or(g),et=new Kr(g),nt=new Cr(bt,X),yt=new Rr(bt,q,nt,X),rt=new ti(bt,nt,Z,yt),it=new oi(bt,rt,nt,Z),dt=new si(bt,X,Q),ct=new Br(K),at=new Ia(g,tt,et,q,X,yt,ct),st=new rs(g,K),ot=new Fa,lt=new Va(q,X),ht=new Pr(g,tt,J,it,h,o),ut=new Ya(g,it,X),vt=new is(bt,Z,X,J),pt=new Ir(bt,q,Z,X),mt=new ei(bt,q,Z,X),Z.programs=at.programs,g.capabilities=X,g.extensions=q,g.properties=K,g.renderLists=ot,g.shadowMap=ut,g.state=J,g.info=Z}_t();const wt=new ns(g,bt);function St(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Et(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const t=Z.autoReset,e=ut.enabled,n=ut.autoUpdate,r=ut.needsUpdate,i=ut.type;_t(),Z.autoReset=t,ut.enabled=e,ut.autoUpdate=n,ut.needsUpdate=r,ut.type=i}function Mt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Ct(t){const e=t.target;e.removeEventListener("dispose",Ct),function(t){(function(t){const e=K.get(t).programs;void 0!==e&&(e.forEach((function(t){at.releaseProgram(t)})),t.isShaderMaterial&&at.releaseShaderCache(t))})(t),K.remove(t)}(e)}this.xr=wt,this.getContext=function(){return bt},this.getContextAttributes=function(){return bt.getContextAttributes()},this.forceContextLoss=function(){const t=q.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=q.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(t){void 0!==t&&(I=t,this.setSize(L,R,!1))},this.getSize=function(t){return t.set(L,R)},this.setSize=function(t,n,r){wt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(L=t,R=n,e.width=Math.floor(t*I),e.height=Math.floor(n*I),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(L*I,R*I).floor()},this.setDrawingBufferSize=function(t,n,r){L=t,R=n,I=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(S)},this.getViewport=function(t){return t.copy(O)},this.setViewport=function(t,e,n,r){t.isVector4?O.set(t.x,t.y,t.z,t.w):O.set(t,e,n,r),J.viewport(S.copy(O).multiplyScalar(I).floor())},this.getScissor=function(t){return t.copy(N)},this.setScissor=function(t,e,n,r){t.isVector4?N.set(t.x,t.y,t.z,t.w):N.set(t,e,n,r),J.scissor(C.copy(N).multiplyScalar(I).floor())},this.getScissorTest=function(){return F},this.setScissorTest=function(t){J.setScissorTest(F=t)},this.setOpaqueSort=function(t){D=t},this.setTransparentSort=function(t){B=t},this.getClearColor=function(t){return t.copy(ht.getClearColor())},this.setClearColor=function(){ht.setClearColor.apply(ht,arguments)},this.getClearAlpha=function(){return ht.getClearAlpha()},this.setClearAlpha=function(){ht.setClearAlpha.apply(ht,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;t&&(r|=16384),e&&(r|=256),n&&(r|=1024),bt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",St,!1),e.removeEventListener("webglcontextrestored",Et,!1),e.removeEventListener("webglcontextcreationerror",Mt,!1),ot.dispose(),lt.dispose(),K.dispose(),tt.dispose(),et.dispose(),it.dispose(),yt.dispose(),vt.dispose(),at.dispose(),wt.dispose(),wt.removeEventListener("sessionstart",At),wt.removeEventListener("sessionend",kt),H&&(H.dispose(),H=null),Lt.stop()},this.renderBufferDirect=function(t,e,n,r,i,a){null===e&&(e=$);const s=i.isMesh&&i.matrixWorld.determinant()<0,o=function(t,e,n,r,i){!0!==e.isScene&&(e=$),Q.resetTextureUnits();const a=e.fog,s=r.isMeshStandardMaterial?e.environment:null,o=null===x?g.outputEncoding:!0===x.isXRRenderTarget?x.texture.encoding:ft,l=(r.isMeshStandardMaterial?et:tt).get(r.envMap||s),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,m=r.toneMapped?g.toneMapping:0,y=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==y?y.length:0,b=K.get(r),S=f.state.lights;if(!0===U&&(!0===G||t!==w)){const e=t===w&&r.id===_;ct.setState(r,t,e)}let E=!1;r.version===b.__version?(b.needsLights&&b.lightsStateVersion!==S.state.version||b.outputEncoding!==o||i.isInstancedMesh&&!1===b.instancing||!i.isInstancedMesh&&!0===b.instancing||i.isSkinnedMesh&&!1===b.skinning||!i.isSkinnedMesh&&!0===b.skinning||b.envMap!==l||!0===r.fog&&b.fog!==a||void 0!==b.numClippingPlanes&&(b.numClippingPlanes!==ct.numPlanes||b.numIntersection!==ct.numIntersection)||b.vertexAlphas!==c||b.vertexTangents!==u||b.morphTargets!==h||b.morphNormals!==d||b.morphColors!==p||b.toneMapping!==m||!0===X.isWebGL2&&b.morphTargetsCount!==v)&&(E=!0):(E=!0,b.__version=r.version);let M=b.currentProgram;!0===E&&(M=Nt(r,e,i));let C=!1,T=!1,A=!1;const k=M.getUniforms(),L=b.uniforms;if(J.useProgram(M.program)&&(C=!0,T=!0,A=!0),r.id!==_&&(_=r.id,T=!0),C||w!==t){if(k.setValue(bt,"projectionMatrix",t.projectionMatrix),X.logarithmicDepthBuffer&&k.setValue(bt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),w!==t&&(w=t,T=!0,A=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const e=k.map.cameraPosition;void 0!==e&&e.setValue(bt,W.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&k.setValue(bt,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&k.setValue(bt,"viewMatrix",t.matrixWorldInverse)}if(i.isSkinnedMesh){k.setOptional(bt,i,"bindMatrix"),k.setOptional(bt,i,"bindMatrixInverse");const t=i.skeleton;t&&(X.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),k.setValue(bt,"boneTexture",t.boneTexture,Q),k.setValue(bt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const P=n.morphAttributes;if((void 0!==P.position||void 0!==P.normal||void 0!==P.color&&!0===X.isWebGL2)&&dt.update(i,n,r,M),(T||b.receiveShadow!==i.receiveShadow)&&(b.receiveShadow=i.receiveShadow,k.setValue(bt,"receiveShadow",i.receiveShadow)),T&&(k.setValue(bt,"toneMappingExposure",g.toneMappingExposure),b.needsLights&&function(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}(L,A),a&&!0===r.fog&&st.refreshFogUniforms(L,a),st.refreshMaterialUniforms(L,r,I,R,H),ha.upload(bt,b.uniformsList,L,Q)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(ha.upload(bt,b.uniformsList,L,Q),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&k.setValue(bt,"center",i.center),k.setValue(bt,"modelViewMatrix",i.modelViewMatrix),k.setValue(bt,"normalMatrix",i.normalMatrix),k.setValue(bt,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const t=r.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(X.isWebGL2){const n=t[e];vt.update(n,M),vt.bind(n,M)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return M}(t,e,n,r,i);J.setMaterial(r,s);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u=1;!0===r.wireframe&&(l=rt.getWireframeAttribute(n),u=2),yt.setup(i,r,o,n,l);let h,d=pt;null!==l&&(h=nt.get(l),d=mt,d.setIndex(h));const p=null!==l?l.count:c.count,m=n.drawRange.start*u,y=n.drawRange.count*u,v=null!==a?a.start*u:0,b=null!==a?a.count*u:1/0,S=Math.max(m,v),E=Math.min(p,m+y,v+b)-1,M=Math.max(0,E-S+1);if(0!==M){if(i.isMesh)!0===r.wireframe?(J.setLineWidth(r.wireframeLinewidth*Y()),d.setMode(1)):d.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),J.setLineWidth(t*Y()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(S,M,i.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(S,M,t)}else d.render(S,M)}},this.compile=function(t,e){f=lt.get(t),f.init(),m.push(f),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(g.physicallyCorrectLights),t.traverse((function(e){const n=e.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){Nt(n[r],t,e)}else Nt(n,t,e)})),m.pop(),f=null};let Tt=null;function At(){Lt.stop()}function kt(){Lt.start()}const Lt=new Mr;function Pt(t,e,n,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||z.intersectsSprite(t)){r&&W.setFromMatrixPosition(t.matrixWorld).applyMatrix4(j);const e=it.update(t),i=t.material;i.visible&&d.push(t,e,i,n,W.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==Z.render.frame&&(t.skeleton.update(),t.skeleton.frame=Z.render.frame),!t.frustumCulled||z.intersectsObject(t))){r&&W.setFromMatrixPosition(t.matrixWorld).applyMatrix4(j);const e=it.update(t),i=t.material;if(Array.isArray(i)){const r=e.groups;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=i[s.materialIndex];o&&o.visible&&d.push(t,e,o,n,W.z,s)}}else i.visible&&d.push(t,e,i,n,W.z,null)}const i=t.children;for(let a=0,s=i.length;a<s;a++)Pt(i[a],e,n,r)}function Rt(t,e,n,r){const i=t.opaque,a=t.transmissive,o=t.transparent;f.setupLightsView(n),a.length>0&&function(t,e,n){const r=X.isWebGL2;null===H&&(H=new se(1,1,{generateMipmaps:!0,type:q.has("EXT_color_buffer_half_float")?k:M,minFilter:E,samples:r&&!0===s?4:0})),g.getDrawingBufferSize(V),r?H.setSize(V.x,V.y):H.setSize(Dt(V.x),Dt(V.y));const i=g.getRenderTarget();g.setRenderTarget(H),g.clear();const a=g.toneMapping;g.toneMapping=0,It(t,e,n),g.toneMapping=a,Q.updateMultisampleRenderTarget(H),Q.updateRenderTargetMipmap(H),g.setRenderTarget(i)}(i,e,n),r&&J.viewport(S.copy(r)),i.length>0&&It(i,e,n),a.length>0&&It(a,e,n),o.length>0&&It(o,e,n),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1)}function It(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,a=t.length;i<a;i++){const a=t[i],s=a.object,o=a.geometry,l=null===r?a.material:r,c=a.group;s.layers.test(n.layers)&&Bt(s,e,n,o,l,c)}}function Bt(t,e,n,r,i,a){t.onBeforeRender(g,e,n,r,i,a),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(g,e,n,r,t,a),!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,g.renderBufferDirect(n,e,r,i,t,a),i.side=0,i.needsUpdate=!0,g.renderBufferDirect(n,e,r,i,t,a),i.side=2):g.renderBufferDirect(n,e,r,i,t,a),t.onAfterRender(g,e,n,r,i,a)}function Nt(t,e,n){!0!==e.isScene&&(e=$);const r=K.get(t),i=f.state.lights,a=f.state.shadowsArray,s=i.state.version,o=at.getParameters(t,i.state,a,e,n),l=at.getProgramCacheKey(o);let c=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?et:tt).get(t.envMap||r.environment),void 0===c&&(t.addEventListener("dispose",Ct),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===s)return Ft(t,o),u}else o.uniforms=at.getUniforms(t),t.onBuild(n,o,g),t.onBeforeCompile(o,g),u=at.acquireProgram(o,l),c.set(l,u),r.uniforms=o.uniforms;const h=r.uniforms;(!t.isShaderMaterial&&!t.isRawShaderMaterial||!0===t.clipping)&&(h.clippingPlanes=ct.uniform),Ft(t,o),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=s,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=u.getUniforms(),p=ha.seqWithValue(d.seq,h);return r.currentProgram=u,r.uniformsList=p,u}function Ft(t,e){const n=K.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Lt.setAnimationLoop((function(t){Tt&&Tt(t)})),typeof self<"u"&&Lt.setContext(self),this.setAnimationLoop=function(t){Tt=t,wt.setAnimationLoop(t),null===t?Lt.stop():Lt.start()},wt.addEventListener("sessionstart",At),wt.addEventListener("sessionend",kt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===y)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===wt.enabled&&!0===wt.isPresenting&&(!0===wt.cameraAutoUpdate&&wt.updateCamera(e),e=wt.getCamera()),!0===t.isScene&&t.onBeforeRender(g,t,e,x),f=lt.get(t,m.length),f.init(),m.push(f),j.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),z.setFromProjectionMatrix(j),G=this.localClippingEnabled,U=ct.init(this.clippingPlanes,G,e),d=ot.get(t,p.length),d.init(),p.push(d),Pt(t,e,0,g.sortObjects),d.finish(),!0===g.sortObjects&&d.sort(D,B),!0===U&&ct.beginShadows();const n=f.state.shadowsArray;if(ut.render(n,t,e),!0===U&&ct.endShadows(),!0===this.info.autoReset&&this.info.reset(),ht.render(d,t),f.setupLights(g.physicallyCorrectLights),e.isArrayCamera){const n=e.cameras;for(let e=0,r=n.length;e<r;e++){const r=n[e];Rt(d,t,r,r.viewport)}}else Rt(d,t,e);null!==x&&(Q.updateMultisampleRenderTarget(x),Q.updateRenderTargetMipmap(x)),!0===t.isScene&&t.onAfterRender(g,t,e),yt.resetDefaultState(),_=-1,w=null,m.pop(),f=m.length>0?m[m.length-1]:null,p.pop(),d=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(t,e,n){K.get(t.texture).__webglTexture=e,K.get(t.depthTexture).__webglTexture=n;const r=K.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===q.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=K.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){x=t,v=e,b=n;let r=!0;if(t){const e=K.get(t);void 0!==e.__useDefaultFramebuffer?(J.bindFramebuffer(36160,null),r=!1):void 0===e.__webglFramebuffer?Q.setupRenderTarget(t):e.__hasExternalTextures&&Q.rebindTextures(t,K.get(t.texture).__webglTexture,K.get(t.depthTexture).__webglTexture)}let i=null,a=!1,s=!1;if(t){const n=t.texture;(n.isData3DTexture||n.isDataArrayTexture)&&(s=!0);const r=K.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=r[e],a=!0):i=X.isWebGL2&&t.samples>0&&!1===Q.useMultisampledRTT(t)?K.get(t).__webglMultisampledFramebuffer:r,S.copy(t.viewport),C.copy(t.scissor),T=t.scissorTest}else S.copy(O).multiplyScalar(I).floor(),C.copy(N).multiplyScalar(I).floor(),T=F;if(J.bindFramebuffer(36160,i)&&X.drawBuffers&&r&&J.drawBuffers(t,i),J.viewport(S),J.scissor(C),J.setScissorTest(T),a){const r=K.get(t.texture);bt.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}else if(s){const r=K.get(t.texture),i=e||0;bt.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}_=-1},this.readRenderTargetPixels=function(t,e,n,r,i,a,s){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=K.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){J.bindFramebuffer(36160,o);try{const s=t.texture,o=s.format,l=s.type;if(o!==P&&gt.convert(o)!==bt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===k&&(q.has("EXT_color_buffer_half_float")||X.isWebGL2&&q.has("EXT_color_buffer_float"));if(!(l===M||gt.convert(l)===bt.getParameter(35738)||l===A&&(X.isWebGL2||q.has("OES_texture_float")||q.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&bt.readPixels(e,n,r,i,gt.convert(o),gt.convert(l),a)}finally{const t=null!==x?K.get(x).__webglFramebuffer:null;J.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),a=Math.floor(e.image.height*r);Q.setTexture2D(e,0),bt.copyTexSubImage2D(3553,n,0,0,t.x,t.y,i,a),J.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,a=e.image.height,s=gt.convert(n.format),o=gt.convert(n.type);Q.setTexture2D(n,0),bt.pixelStorei(37440,n.flipY),bt.pixelStorei(37441,n.premultiplyAlpha),bt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?bt.texSubImage2D(3553,r,t.x,t.y,i,a,s,o,e.image.data):e.isCompressedTexture?bt.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):bt.texSubImage2D(3553,r,t.x,t.y,s,o,e.image),0===r&&n.generateMipmaps&&bt.generateMipmap(3553),J.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(g.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=t.max.x-t.min.x+1,s=t.max.y-t.min.y+1,o=t.max.z-t.min.z+1,l=gt.convert(r.format),c=gt.convert(r.type);let u;if(r.isData3DTexture)Q.setTexture3D(r,0),u=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Q.setTexture2DArray(r,0),u=35866}bt.pixelStorei(37440,r.flipY),bt.pixelStorei(37441,r.premultiplyAlpha),bt.pixelStorei(3317,r.unpackAlignment);const h=bt.getParameter(3314),d=bt.getParameter(32878),f=bt.getParameter(3316),p=bt.getParameter(3315),m=bt.getParameter(32877),y=n.isCompressedTexture?n.mipmaps[0]:n.image;bt.pixelStorei(3314,y.width),bt.pixelStorei(32878,y.height),bt.pixelStorei(3316,t.min.x),bt.pixelStorei(3315,t.min.y),bt.pixelStorei(32877,t.min.z),n.isDataTexture||n.isData3DTexture?bt.texSubImage3D(u,i,e.x,e.y,e.z,a,s,o,l,c,y.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),bt.compressedTexSubImage3D(u,i,e.x,e.y,e.z,a,s,o,l,y.data)):bt.texSubImage3D(u,i,e.x,e.y,e.z,a,s,o,l,c,y),bt.pixelStorei(3314,h),bt.pixelStorei(32878,d),bt.pixelStorei(3316,f),bt.pixelStorei(3315,p),bt.pixelStorei(32877,m),0===i&&r.generateMipmaps&&bt.generateMipmap(u),J.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?Q.setTextureCube(t,0):t.isData3DTexture?Q.setTexture3D(t,0):t.isDataArrayTexture?Q.setTexture2DArray(t,0):Q.setTexture2D(t,0),J.unbindTexture()},this.resetState=function(){v=0,b=0,x=null,J.reset(),yt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class ss extends as{}ss.prototype.isWebGL1Renderer=!0;class os{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new Kt(t),this.density=e}clone(){return new os(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class ls{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new Kt(t),this.near=e,this.far=n}clone(){return new ls(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class cs extends fn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}class us{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=xt,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=At()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=At()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=At()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const hs=new ue;class ds{constructor(t,e,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)hs.fromBufferAttribute(this,e),hs.applyMatrix4(t),this.setXYZ(e,hs.x,hs.y,hs.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)hs.fromBufferAttribute(this,e),hs.applyNormalMatrix(t),this.setXYZ(e,hs.x,hs.y,hs.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)hs.fromBufferAttribute(this,e),hs.transformDirection(t),this.setXYZ(e,hs.x,hs.y,hs.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Ln(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ds(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class fs extends Cn{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Kt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let ps;const ms=new ue,gs=new ue,ys=new ue,vs=new Ot,bs=new Ot,xs=new Ge,_s=new ue,ws=new ue,Ss=new ue,Es=new Ot,Ms=new Ot,Cs=new Ot;class Ts extends fn{constructor(t){if(super(),this.isSprite=!0,this.type="Sprite",void 0===ps){ps=new Gn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new us(t,5);ps.setIndex([0,1,2,0,2,3]),ps.setAttribute("position",new ds(e,3,0,!1)),ps.setAttribute("uv",new ds(e,2,3,!1))}this.geometry=ps,this.material=void 0!==t?t:new fs,this.center=new Ot(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),gs.setFromMatrixScale(this.matrixWorld),xs.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ys.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&gs.multiplyScalar(-ys.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const a=this.center;As(_s.set(-.5,-.5,0),ys,a,gs,r,i),As(ws.set(.5,-.5,0),ys,a,gs,r,i),As(Ss.set(.5,.5,0),ys,a,gs,r,i),Es.set(0,0),Ms.set(1,0),Cs.set(1,1);let s=t.ray.intersectTriangle(_s,ws,Ss,!1,ms);if(null===s&&(As(ws.set(-.5,.5,0),ys,a,gs,r,i),Ms.set(0,1),s=t.ray.intersectTriangle(_s,Ss,ws,!1,ms),null===s))return;const o=t.ray.origin.distanceTo(ms);o<t.near||o>t.far||e.push({distance:o,point:ms.clone(),uv:En.getUV(ms,_s,ws,Ss,Es,Ms,Cs,new Ot),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function As(t,e,n,r,i,a){vs.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(bs.x=a*vs.x-i*vs.y,bs.y=i*vs.x+a*vs.y):bs.copy(vs),t.copy(e),t.x+=bs.x,t.y+=bs.y,t.applyMatrix4(xs)}const ks=new ue,Ls=new ue;class Ps extends fn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,r=e.length;n<r;n++){const t=e[n];this.addLevel(t.object.clone(),t.distance)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0){e=Math.abs(e);const n=this.levels;let r;for(r=0;r<n.length&&!(e<n[r].distance);r++);return n.splice(r,0,{distance:e,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,r;for(n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){ks.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(ks);this.getObjectForDistance(n).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){ks.setFromMatrixPosition(t.matrixWorld),Ls.setFromMatrixPosition(this.matrixWorld);const n=ks.distanceTo(Ls)/t.zoom;let r,i;for(e[0].object.visible=!0,r=1,i=e.length;r<i&&n>=e[r].distance;r++)e[r-1].object.visible=!1,e[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)e[r].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const t=n[r];e.object.levels.push({object:t.object.uuid,distance:t.distance})}return e}}const Rs=new ue,Is=new ae,Ds=new ae,Bs=new ue,Os=new Ge;class Ns extends ar{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ge,this.bindMatrixInverse=new Ge}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new ae,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,r=this.geometry;Is.fromBufferAttribute(r.attributes.skinIndex,t),Ds.fromBufferAttribute(r.attributes.skinWeight,t),Rs.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let i=0;i<4;i++){const t=Ds.getComponent(i);if(0!==t){const r=Is.getComponent(i);Os.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(Bs.copy(Rs).applyMatrix4(Os),t)}}return e.applyMatrix4(this.bindMatrixInverse)}}class Fs extends fn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class zs extends ie{constructor(t=null,e=1,n=1,r,i,a,s,o,l=b,c=b,u,h){super(null,a,s,o,l,c,r,i,u,h),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Us=new Ge,Gs=new Ge;class Hs{constructor(t=[],e=[]){this.uuid=At(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Ge)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Ge;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,a=t.length;i<a;i++){const r=t[i]?t[i].matrixWorld:Gs;Us.multiplyMatrices(r,e[i]),Us.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new Hs(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=It(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new zs(e,t,t,P,A);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const r=t.bones[n];let i=e[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Fs),this.bones.push(i),this.boneInverses.push((new Ge).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,i=e.length;r<i;r++){const i=e[r];t.bones.push(i.uuid);const a=n[r];t.boneInverses.push(a.toArray())}return t}}class js extends Ln{constructor(t,e,n,r=1){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Vs=new Ge,Ws=new Ge,$s=[],Ys=new ar;class qs extends ar{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new js(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,r=this.count;if(Ys.geometry=this.geometry,Ys.material=this.material,void 0!==Ys.material)for(let i=0;i<r;i++){this.getMatrixAt(i,Vs),Ws.multiplyMatrices(n,Vs),Ys.matrixWorld=Ws,Ys.raycast(t,$s);for(let t=0,n=$s.length;t<n;t++){const n=$s[t];n.instanceId=i,n.object=this,e.push(n)}$s.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new js(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Xs extends Cn{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Kt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Js=new ue,Zs=new ue,Ks=new Ge,Qs=new Ue,to=new Re;class eo extends fn{constructor(t=new Gn,e=new Xs){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)Js.fromBufferAttribute(e,t-1),Zs.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=Js.distanceTo(Zs);t.setAttribute("lineDistance",new In(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),to.copy(n.boundingSphere),to.applyMatrix4(r),to.radius+=i,!1===t.ray.intersectsSphere(to))return;Ks.copy(r).invert(),Qs.copy(t.ray).applyMatrix4(Ks);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new ue,c=new ue,u=new ue,h=new ue,d=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f){for(let n=Math.max(0,a.start),r=Math.min(f.count,a.start+a.count)-1;n<r;n+=d){const r=f.getX(n),i=f.getX(n+1);if(l.fromBufferAttribute(p,r),c.fromBufferAttribute(p,i),Qs.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const a=t.ray.origin.distanceTo(h);a<t.near||a>t.far||e.push({distance:a,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,a.start),r=Math.min(p.count,a.start+a.count)-1;n<r;n+=d){if(l.fromBufferAttribute(p,n),c.fromBufferAttribute(p,n+1),Qs.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(h);r<t.near||r>t.far||e.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}const no=new ue,ro=new ue;class io extends eo{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)no.fromBufferAttribute(e,t),ro.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+no.distanceTo(ro);t.setAttribute("lineDistance",new In(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ao extends eo{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class so extends Cn{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Kt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const oo=new Ge,lo=new Ue,co=new Re,uo=new ue;class ho extends fn{constructor(t=new Gn,e=new so){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),co.copy(n.boundingSphere),co.applyMatrix4(r),co.radius+=i,!1===t.ray.intersectsSphere(co))return;oo.copy(r).invert(),lo.copy(t.ray).applyMatrix4(oo);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);n<i;n++){const i=l.getX(n);uo.fromBufferAttribute(c,i),fo(uo,i,o,r,t,e,this)}}else{for(let n=Math.max(0,a.start),i=Math.min(c.count,a.start+a.count);n<i;n++)uo.fromBufferAttribute(c,n),fo(uo,n,o,r,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function fo(t,e,n,r,i,a,s){const o=lo.distanceSqToPoint(t);if(o<n){const n=new ue;lo.closestPointToPoint(t,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:e,face:null,object:s})}}class po extends ie{constructor(t,e,n,r,i,a,s,o,l,c,u,h){super(null,a,s,o,l,c,r,i,u,h),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class mo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let a=1;a<=t;a++)n=this.getPoint(a/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const i=n.length;let a;a=e||t*n[i-1];let s,o=0,l=i-1;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),s=n[r]-a,s<0)o=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===a)return r/(i-1);const c=n[r];return(r+(a-c)/(n[r+1]-c))/(i-1)}getTangent(t,e){let n=t-1e-4,r=t+1e-4;n<0&&(n=0),r>1&&(r=1);const i=this.getPoint(n),a=this.getPoint(r),s=e||(i.isVector2?new Ot:new ue);return s.copy(a).sub(i).normalize(),s}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new ue,r=[],i=[],a=[],s=new ue,o=new Ge;for(let d=0;d<=t;d++){const e=d/t;r[d]=this.getTangentAt(e,new ue)}i[0]=new ue,a[0]=new ue;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),a[0].crossVectors(r[0],i[0]);for(let d=1;d<=t;d++){if(i[d]=i[d-1].clone(),a[d]=a[d-1].clone(),s.crossVectors(r[d-1],r[d]),s.length()>Number.EPSILON){s.normalize();const t=Math.acos(kt(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(o.makeRotationAxis(s,t))}a[d].crossVectors(r[d],i[d])}if(!0===e){let e=Math.acos(kt(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(s.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(o.makeRotationAxis(r[n],e*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class go extends mo{constructor(t=0,e=0,n=1,r=1,i=0,a=2*Math.PI,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(t,e){const n=e||new Ot,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const a=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0===this.aClockwise&&!a&&(i===r?i=-r:i-=r);const s=this.aStartAngle+t*i;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=o-this.aX,r=l-this.aY;o=n*t-r*e+this.aX,l=n*e+r*t+this.aY}return n.set(o,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class yo extends go{constructor(t,e,n,r,i,a){super(t,e,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}}function vo(){let t=0,e=0,n=0,r=0;function i(i,a,s,o){t=i,e=s,n=-3*i+3*a-2*s-o,r=2*i-2*a+s+o}return{initCatmullRom:function(t,e,n,r,a){i(e,n,a*(n-t),a*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,a,s,o){let l=(e-t)/a-(n-t)/(a+s)+(n-e)/s,c=(n-e)/s-(r-e)/(s+o)+(r-n)/o;l*=s,c*=s,i(e,n,l,c)},calc:function(i){const a=i*i;return t+e*i+n*a+r*(a*i)}}}const bo=new ue,xo=new vo,_o=new vo,wo=new vo;class So extends mo{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new ue){const n=e,r=this.points,i=r.length,a=(i-(this.closed?0:1))*t;let s,o,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?s=r[(l-1)%i]:(bo.subVectors(r[0],r[1]).add(r[0]),s=bo);const u=r[l%i],h=r[(l+1)%i];if(this.closed||l+2<i?o=r[(l+2)%i]:(bo.subVectors(r[i-1],r[i-2]).add(r[i-1]),o=bo),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(s.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(h),t),r=Math.pow(h.distanceToSquared(o),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),xo.initNonuniformCatmullRom(s.x,u.x,h.x,o.x,e,n,r),_o.initNonuniformCatmullRom(s.y,u.y,h.y,o.y,e,n,r),wo.initNonuniformCatmullRom(s.z,u.z,h.z,o.z,e,n,r)}else"catmullrom"===this.curveType&&(xo.initCatmullRom(s.x,u.x,h.x,o.x,this.tension),_o.initCatmullRom(s.y,u.y,h.y,o.y,this.tension),wo.initCatmullRom(s.z,u.z,h.z,o.z,this.tension));return n.set(xo.calc(c),_o.calc(c),wo.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new ue).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Eo(t,e,n,r,i){const a=.5*(r-e),s=.5*(i-n),o=t*t;return(2*n-2*r+a+s)*(t*o)+(-3*n+3*r-2*a-s)*o+a*t+n}function Mo(t,e,n,r){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function Co(t,e,n,r,i){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}class To extends mo{constructor(t=new Ot,e=new Ot,n=new Ot,r=new Ot){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Ot){const n=e,r=this.v0,i=this.v1,a=this.v2,s=this.v3;return n.set(Co(t,r.x,i.x,a.x,s.x),Co(t,r.y,i.y,a.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Ao extends mo{constructor(t=new ue,e=new ue,n=new ue,r=new ue){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new ue){const n=e,r=this.v0,i=this.v1,a=this.v2,s=this.v3;return n.set(Co(t,r.x,i.x,a.x,s.x),Co(t,r.y,i.y,a.y,s.y),Co(t,r.z,i.z,a.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class ko extends mo{constructor(t=new Ot,e=new Ot){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Ot){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new Ot;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Lo extends mo{constructor(t=new ue,e=new ue){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new ue){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Po extends mo{constructor(t=new Ot,e=new Ot,n=new Ot){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Ot){const n=e,r=this.v0,i=this.v1,a=this.v2;return n.set(Mo(t,r.x,i.x,a.x),Mo(t,r.y,i.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ro extends mo{constructor(t=new ue,e=new ue,n=new ue){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new ue){const n=e,r=this.v0,i=this.v1,a=this.v2;return n.set(Mo(t,r.x,i.x,a.x),Mo(t,r.y,i.y,a.y),Mo(t,r.z,i.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Io extends mo{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Ot){const n=e,r=this.points,i=(r.length-1)*t,a=Math.floor(i),s=i-a,o=r[0===a?a:a-1],l=r[a],c=r[a>r.length-2?r.length-1:a+1],u=r[a>r.length-3?r.length-1:a+2];return n.set(Eo(s,o.x,l.x,c.x,u.x),Eo(s,o.y,l.y,c.y,u.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Ot).fromArray(n))}return this}}var Do=Object.freeze({__proto__:null,ArcCurve:yo,CatmullRomCurve3:So,CubicBezierCurve:To,CubicBezierCurve3:Ao,EllipseCurve:go,LineCurve:ko,LineCurve3:Lo,QuadraticBezierCurve:Po,QuadraticBezierCurve3:Ro,SplineCurve:Io});class Bo extends mo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new ko(e,t))}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const t=r[i]-n,a=this.curves[i],s=a.getLength(),o=0===s?0:1-t/s;return a.getPointAt(o,e)}i++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const a=i[r],s=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,o=a.getPoints(s);for(let t=0;t<o.length;t++){const r=o[t];n&&n.equals(r)||(e.push(r),n=r)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new Do[n.type]).fromJSON(n))}return this}}class Oo extends Bo{constructor(t){super(),this.type="Path",this.currentPoint=new Ot,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new ko(this.currentPoint.clone(),new Ot(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const i=new Po(this.currentPoint.clone(),new Ot(t,e),new Ot(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,i,a){const s=new To(this.currentPoint.clone(),new Ot(t,e),new Ot(n,r),new Ot(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Io(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,i,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(t+s,e+o,n,r,i,a),this}absarc(t,e,n,r,i,a){return this.absellipse(t,e,n,n,r,i,a),this}ellipse(t,e,n,r,i,a,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,r,i,a,s,o),this}absellipse(t,e,n,r,i,a,s,o){const l=new go(t,e,n,r,i,a,s,o);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class No extends Gn{constructor(t=[new Ot(0,-.5),new Ot(.5,0),new Ot(0,.5)],e=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e),r=kt(r,0,2*Math.PI);const i=[],a=[],s=[],o=[],l=[],c=1/e,u=new ue,h=new Ot,d=new ue,f=new ue,p=new ue;let m=0,g=0;for(let y=0;y<=t.length-1;y++)switch(y){case 0:m=t[y+1].x-t[y].x,g=t[y+1].y-t[y].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case t.length-1:o.push(p.x,p.y,p.z);break;default:m=t[y+1].x-t[y].x,g=t[y+1].y-t[y].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),o.push(d.x,d.y,d.z),p.copy(f)}for(let y=0;y<=e;y++){const i=n+y*c*r,d=Math.sin(i),f=Math.cos(i);for(let n=0;n<=t.length-1;n++){u.x=t[n].x*d,u.y=t[n].y,u.z=t[n].x*f,a.push(u.x,u.y,u.z),h.x=y/e,h.y=n/(t.length-1),s.push(h.x,h.y);const r=o[3*n+0]*d,i=o[3*n+1],c=o[3*n+0]*f;l.push(r,i,c)}}for(let y=0;y<e;y++)for(let e=0;e<t.length-1;e++){const n=e+y*t.length,r=n,a=n+t.length,s=n+t.length+1,o=n+1;i.push(r,a,o),i.push(s,o,a)}this.setIndex(i),this.setAttribute("position",new In(a,3)),this.setAttribute("uv",new In(s,2)),this.setAttribute("normal",new In(l,3))}static fromJSON(t){return new No(t.points,t.segments,t.phiStart,t.phiLength)}}class Fo extends No{constructor(t=1,e=1,n=4,r=8){const i=new Oo;i.absarc(0,-e/2,t,1.5*Math.PI,0),i.absarc(0,e/2,t,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:r}}static fromJSON(t){return new Fo(t.radius,t.length,t.capSegments,t.radialSegments)}}class zo extends Gn{constructor(t=1,e=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},e=Math.max(3,e);const i=[],a=[],s=[],o=[],l=new ue,c=new Ot;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let u=0,h=3;u<=e;u++,h+=3){const i=n+u/e*r;l.x=t*Math.cos(i),l.y=t*Math.sin(i),a.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(a[h]/t+1)/2,c.y=(a[h+1]/t+1)/2,o.push(c.x,c.y)}for(let u=1;u<=e;u++)i.push(u,u+1,0);this.setIndex(i),this.setAttribute("position",new In(a,3)),this.setAttribute("normal",new In(s,3)),this.setAttribute("uv",new In(o,2))}static fromJSON(t){return new zo(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Uo extends Gn{constructor(t=1,e=1,n=1,r=8,i=1,a=!1,s=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],h=[],d=[];let f=0;const p=[],m=n/2;let g=0;function y(n){const i=f,a=new Ot,p=new ue;let y=0;const v=!0===n?t:e,b=!0===n?1:-1;for(let t=1;t<=r;t++)u.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),f++;const x=f;for(let t=0;t<=r;t++){const e=t/r*o+s,n=Math.cos(e),i=Math.sin(e);p.x=v*i,p.y=m*b,p.z=v*n,u.push(p.x,p.y,p.z),h.push(0,b,0),a.x=.5*n+.5,a.y=.5*i*b+.5,d.push(a.x,a.y),f++}for(let t=0;t<r;t++){const e=i+t,r=x+t;!0===n?c.push(r,r+1,e):c.push(r+1,r,e),y+=3}l.addGroup(g,y,!0===n?1:2),g+=y}(function(){const a=new ue,y=new ue;let v=0;const b=(e-t)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,v=g*(e-t)+t;for(let t=0;t<=r;t++){const e=t/r,i=e*o+s,l=Math.sin(i),p=Math.cos(i);y.x=v*l,y.y=-g*n+m,y.z=v*p,u.push(y.x,y.y,y.z),a.set(l,b,p).normalize(),h.push(a.x,a.y,a.z),d.push(e,1-g),c.push(f++)}p.push(c)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){const n=p[e][t],r=p[e+1][t],i=p[e+1][t+1],a=p[e][t+1];c.push(n,r,a),c.push(r,i,a),v+=6}l.addGroup(g,v,0),g+=v})(),!1===a&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new In(u,3)),this.setAttribute("normal",new In(h,3)),this.setAttribute("uv",new In(d,2))}static fromJSON(t){return new Uo(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Go extends Uo{constructor(t=1,e=1,n=8,r=1,i=!1,a=0,s=2*Math.PI){super(0,t,e,n,r,i,a,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:s}}static fromJSON(t){return new Go(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Ho extends Gn{constructor(t=[],e=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r};const i=[],a=[];function s(t,e,n,r){const i=r+1,a=[];for(let s=0;s<=i;s++){a[s]=[];const r=t.clone().lerp(n,s/i),o=e.clone().lerp(n,s/i),l=i-s;for(let t=0;t<=l;t++)a[s][t]=0===t&&s===i?r:r.clone().lerp(o,t/l)}for(let s=0;s<i;s++)for(let t=0;t<2*(i-s)-1;t++){const e=Math.floor(t/2);t%2==0?(o(a[s][e+1]),o(a[s+1][e]),o(a[s][e])):(o(a[s][e+1]),o(a[s+1][e+1]),o(a[s+1][e]))}}function o(t){i.push(t.x,t.y,t.z)}function l(e,n){const r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function c(t,e,n,r){r<0&&1===t.x&&(a[e]=t.x-1),0===n.x&&0===n.z&&(a[e]=r/2/Math.PI+.5)}function u(t){return Math.atan2(t.z,-t.x)}function h(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}(function(t){const n=new ue,r=new ue,i=new ue;for(let a=0;a<e.length;a+=3)l(e[a+0],n),l(e[a+1],r),l(e[a+2],i),s(n,r,i,t)})(r),function(t){const e=new ue;for(let n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}(n),function(){const t=new ue;for(let e=0;e<i.length;e+=3){t.x=i[e+0],t.y=i[e+1],t.z=i[e+2];const n=u(t)/2/Math.PI+.5,r=h(t)/Math.PI+.5;a.push(n,1-r)}(function(){const t=new ue,e=new ue,n=new ue,r=new ue,s=new Ot,o=new Ot,l=new Ot;for(let h=0,d=0;h<i.length;h+=9,d+=6){t.set(i[h+0],i[h+1],i[h+2]),e.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),s.set(a[d+0],a[d+1]),o.set(a[d+2],a[d+3]),l.set(a[d+4],a[d+5]),r.copy(t).add(e).add(n).divideScalar(3);const f=u(r);c(s,d+0,t,f),c(o,d+2,e,f),c(l,d+4,n,f)}})(),function(){for(let t=0;t<a.length;t+=6){const e=a[t+0],n=a[t+2],r=a[t+4],i=Math.max(e,n,r),s=Math.min(e,n,r);i>.9&&s<.1&&(e<.2&&(a[t+0]+=1),n<.2&&(a[t+2]+=1),r<.2&&(a[t+4]+=1))}}()}(),this.setAttribute("position",new In(i,3)),this.setAttribute("normal",new In(i.slice(),3)),this.setAttribute("uv",new In(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(t){return new Ho(t.vertices,t.indices,t.radius,t.details)}}class jo extends Ho{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new jo(t.radius,t.detail)}}const Vo=new ue,Wo=new ue,$o=new ue,Yo=new En;class qo extends Gn{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const n=Math.pow(10,4),r=Math.cos(Ct*e),i=t.getIndex(),a=t.getAttribute("position"),s=i?i.count:a.count,o=[0,0,0],l=["a","b","c"],c=new Array(3),u={},h=[];for(let t=0;t<s;t+=3){i?(o[0]=i.getX(t),o[1]=i.getX(t+1),o[2]=i.getX(t+2)):(o[0]=t,o[1]=t+1,o[2]=t+2);const{a:e,b:s,c:d}=Yo;if(e.fromBufferAttribute(a,o[0]),s.fromBufferAttribute(a,o[1]),d.fromBufferAttribute(a,o[2]),Yo.getNormal($o),c[0]=`${Math.round(e.x*n)},${Math.round(e.y*n)},${Math.round(e.z*n)}`,c[1]=`${Math.round(s.x*n)},${Math.round(s.y*n)},${Math.round(s.z*n)}`,c[2]=`${Math.round(d.x*n)},${Math.round(d.y*n)},${Math.round(d.z*n)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=c[t],i=c[e],a=Yo[l[t]],s=Yo[l[e]],d=`${n}_${i}`,f=`${i}_${n}`;f in u&&u[f]?($o.dot(u[f].normal)<=r&&(h.push(a.x,a.y,a.z),h.push(s.x,s.y,s.z)),u[f]=null):d in u||(u[d]={index0:o[t],index1:o[e],normal:$o.clone()})}}for(const t in u)if(u[t]){const{index0:e,index1:n}=u[t];Vo.fromBufferAttribute(a,e),Wo.fromBufferAttribute(a,n),h.push(Vo.x,Vo.y,Vo.z),h.push(Wo.x,Wo.y,Wo.z)}this.setAttribute("position",new In(h,3))}}}class Xo extends Oo{constructor(t){super(t),this.uuid=At(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new Oo).fromJSON(n))}return this}}const Jo=function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let a=Zo(t,0,i,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c,u,h,d,f;if(r&&(a=function(t,e,n,r){const i=[];let a,s,o,l,c;for(a=0,s=e.length;a<s;a++)o=e[a]*r,l=a<s-1?e[a+1]*r:t.length,c=Zo(t,o,l,r,!1),c===c.next&&(c.steiner=!0),i.push(ll(c));for(i.sort(il),a=0;a<i.length;a++)al(i[a],n),n=Ko(n,n.next);return n}(t,e,a,n)),t.length>80*n){o=c=t[0],l=u=t[1];for(let e=n;e<i;e+=n)h=t[e],d=t[e+1],h<o&&(o=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-o,u-l),f=0!==f?1/f:0}return Qo(a,s,n,o,l,f),s};function Zo(t,e,n,r,i){let a,s;if(i===function(t,e,n,r){let i=0;for(let a=e,s=n-r;a<n;a+=r)i+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return i}(t,e,n,r)>0)for(a=e;a<n;a+=r)s=vl(a,t[a],t[a+1],s);else for(a=n-r;a>=e;a-=r)s=vl(a,t[a],t[a+1],s);return s&&dl(s,s.next)&&(bl(s),s=s.next),s}function Ko(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!dl(r,r.next)&&0!==hl(r.prev,r,r.next))r=r.next;else{if(bl(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function Qo(t,e,n,r,i,a,s){if(!t)return;!s&&a&&function(t,e,n,r){let i=t;do{null===i.z&&(i.z=ol(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,n,r,i,a,s,o,l,c=1;do{for(n=t,t=null,a=null,s=0;n;){for(s++,r=n,o=0,e=0;e<c&&(o++,r=r.nextZ,r);e++);for(l=c;o>0||l>0&&r;)0!==o&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(s>1)}(i)}(t,r,i,a);let o,l,c=t;for(;t.prev!==t.next;)if(o=t.prev,l=t.next,a?el(t,r,i,a):tl(t))e.push(o.i/n),e.push(t.i/n),e.push(l.i/n),bl(t),t=l.next,c=l.next;else if((t=l)===c){s?1===s?Qo(t=nl(Ko(t),e,n),e,n,r,i,a,2):2===s&&rl(t,e,n,r,i,a):Qo(Ko(t),e,n,r,i,a,1);break}}function tl(t){const e=t.prev,n=t,r=t.next;if(hl(e,n,r)>=0)return!1;let i=t.next.next;for(;i!==t.prev;){if(cl(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&hl(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function el(t,e,n,r){const i=t.prev,a=t,s=t.next;if(hl(i,a,s)>=0)return!1;const o=i.x<a.x?i.x<s.x?i.x:s.x:a.x<s.x?a.x:s.x,l=i.y<a.y?i.y<s.y?i.y:s.y:a.y<s.y?a.y:s.y,c=i.x>a.x?i.x>s.x?i.x:s.x:a.x>s.x?a.x:s.x,u=i.y>a.y?i.y>s.y?i.y:s.y:a.y>s.y?a.y:s.y,h=ol(o,l,e,n,r),d=ol(c,u,e,n,r);let f=t.prevZ,p=t.nextZ;for(;f&&f.z>=h&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&cl(i.x,i.y,a.x,a.y,s.x,s.y,f.x,f.y)&&hl(f.prev,f,f.next)>=0||(f=f.prevZ,p!==t.prev&&p!==t.next&&cl(i.x,i.y,a.x,a.y,s.x,s.y,p.x,p.y)&&hl(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&cl(i.x,i.y,a.x,a.y,s.x,s.y,f.x,f.y)&&hl(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&cl(i.x,i.y,a.x,a.y,s.x,s.y,p.x,p.y)&&hl(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function nl(t,e,n){let r=t;do{const i=r.prev,a=r.next.next;!dl(i,a)&&fl(i,r,r.next,a)&&gl(i,a)&&gl(a,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(a.i/n),bl(r),bl(r.next),r=t=a),r=r.next}while(r!==t);return Ko(r)}function rl(t,e,n,r,i,a){let s=t;do{let t=s.next.next;for(;t!==s.prev;){if(s.i!==t.i&&ul(s,t)){let o=yl(s,t);return s=Ko(s,s.next),o=Ko(o,o.next),Qo(s,e,n,r,i,a),void Qo(o,e,n,r,i,a)}t=t.next}s=s.next}while(s!==t)}function il(t,e){return t.x-e.x}function al(t,e){if(e=function(t,e){let n=e;const r=t.x,i=t.y;let a,s=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const t=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>s){if(s=t,t===r){if(i===n.y)return n;if(i===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!a)return null;if(r===s)return a;const o=a,l=a.x,c=a.y;let u,h=1/0;n=a;do{r>=n.x&&n.x>=l&&r!==n.x&&cl(i<c?r:s,i,l,c,i<c?s:r,i,n.x,n.y)&&(u=Math.abs(i-n.y)/(r-n.x),gl(n,t)&&(u<h||u===h&&(n.x>a.x||n.x===a.x&&sl(a,n)))&&(a=n,h=u)),n=n.next}while(n!==o);return a}(t,e),e){const n=yl(e,t);Ko(e,e.next),Ko(n,n.next)}}function sl(t,e){return hl(t.prev,t,e.prev)<0&&hl(e.next,t,t.next)<0}function ol(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ll(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function cl(t,e,n,r,i,a,s,o){return(i-s)*(e-o)-(t-s)*(a-o)>=0&&(t-s)*(r-o)-(n-s)*(e-o)>=0&&(n-s)*(a-o)-(i-s)*(r-o)>=0}function ul(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&fl(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(gl(t,e)&&gl(e,t)&&function(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(hl(t.prev,t,e.prev)||hl(t,e.prev,e))||dl(t,e)&&hl(t.prev,t,t.next)>0&&hl(e.prev,e,e.next)>0)}function hl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function dl(t,e){return t.x===e.x&&t.y===e.y}function fl(t,e,n,r){const i=ml(hl(t,e,n)),a=ml(hl(t,e,r)),s=ml(hl(n,r,t)),o=ml(hl(n,r,e));return!!(i!==a&&s!==o||0===i&&pl(t,n,e)||0===a&&pl(t,r,e)||0===s&&pl(n,t,r)||0===o&&pl(n,e,r))}function pl(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function ml(t){return t>0?1:t<0?-1:0}function gl(t,e){return hl(t.prev,t,t.next)<0?hl(t,e,t.next)>=0&&hl(t,t.prev,e)>=0:hl(t,e,t.prev)<0||hl(t,t.next,e)<0}function yl(t,e){const n=new xl(t.i,t.x,t.y),r=new xl(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function vl(t,e,n,r){const i=new xl(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function bl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function xl(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class _l{static area(t){const e=t.length;let n=0;for(let r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n}static isClockWise(t){return _l.area(t)<0}static triangulateShape(t,e){const n=[],r=[],i=[];wl(t),Sl(n,t);let a=t.length;e.forEach(wl);for(let o=0;o<e.length;o++)r.push(a),a+=e[o].length,Sl(n,e[o]);const s=Jo(n,r);for(let o=0;o<s.length;o+=3)i.push(s.slice(o,o+3));return i}}function wl(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Sl(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class El extends Gn{constructor(t=new Xo([new Ot(.5,.5),new Ot(-.5,.5),new Ot(-.5,-.5),new Ot(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],i=[];for(let s=0,o=t.length;s<o;s++){a(t[s])}function a(t){const a=[],s=void 0!==e.curveSegments?e.curveSegments:12,o=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:1;let c=void 0===e.bevelEnabled||e.bevelEnabled,u=void 0!==e.bevelThickness?e.bevelThickness:.2,h=void 0!==e.bevelSize?e.bevelSize:u-.1,d=void 0!==e.bevelOffset?e.bevelOffset:0,f=void 0!==e.bevelSegments?e.bevelSegments:3;const p=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Ml;let g,y,v,b,x,_=!1;p&&(g=p.getSpacedPoints(o),_=!0,c=!1,y=p.computeFrenetFrames(o,!1),v=new ue,b=new ue,x=new ue),c||(f=0,u=0,h=0,d=0);const w=t.extractPoints(s);let S=w.shape;const E=w.holes;if(!_l.isClockWise(S)){S=S.reverse();for(let t=0,e=E.length;t<e;t++){const e=E[t];_l.isClockWise(e)&&(E[t]=e.reverse())}}const M=_l.triangulateShape(S,E),C=S;for(let e=0,n=E.length;e<n;e++){const t=E[e];S=S.concat(t)}function T(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const A=S.length,k=M.length;function L(t,e,n){let r,i,a;const s=t.x-e.x,o=t.y-e.y,l=n.x-t.x,c=n.y-t.y,u=s*s+o*o,h=s*c-o*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),f=e.x-o/h,p=e.y+s/h,m=((n.x-c/d-f)*c-(n.y+l/d-p)*l)/(s*c-o*l);r=f+s*m-t.x,i=p+o*m-t.y;const g=r*r+i*i;if(g<=2)return new Ot(r,i);a=Math.sqrt(g/2)}else{let t=!1;s>Number.EPSILON?l>Number.EPSILON&&(t=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(o)===Math.sign(c)&&(t=!0),t?(r=-o,i=s,a=Math.sqrt(u)):(r=s,i=o,a=Math.sqrt(u/2))}return new Ot(r/a,i/a)}const P=[];for(let e=0,n=C.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),P[e]=L(C[e],C[r],C[i]);const R=[];let I,D=P.concat();for(let e=0,n=E.length;e<n;e++){const t=E[e];I=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),I[e]=L(t[e],t[r],t[i]);R.push(I),D=D.concat(I)}for(let e=0;e<f;e++){const t=e/f,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,i=C.length;e<i;e++){const t=T(C[e],P[e],r);N(t.x,t.y,-n)}for(let e=0,i=E.length;e<i;e++){const t=E[e];I=R[e];for(let e=0,i=t.length;e<i;e++){const i=T(t[e],I[e],r);N(i.x,i.y,-n)}}}const B=h+d;for(let e=0;e<A;e++){const t=c?T(S[e],D[e],B):S[e];_?(b.copy(y.normals[0]).multiplyScalar(t.x),v.copy(y.binormals[0]).multiplyScalar(t.y),x.copy(g[0]).add(b).add(v),N(x.x,x.y,x.z)):N(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<A;t++){const n=c?T(S[t],D[t],B):S[t];_?(b.copy(y.normals[e]).multiplyScalar(n.x),v.copy(y.binormals[e]).multiplyScalar(n.y),x.copy(g[e]).add(b).add(v),N(x.x,x.y,x.z)):N(n.x,n.y,l/o*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,i=C.length;e<i;e++){const t=T(C[e],P[e],r);N(t.x,t.y,l+n)}for(let e=0,i=E.length;e<i;e++){const t=E[e];I=R[e];for(let e=0,i=t.length;e<i;e++){const i=T(t[e],I[e],r);_?N(i.x,i.y+g[o-1].y,g[o-1].x+n):N(i.x,i.y,l+n)}}}function O(t,e){let n=t.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=t.length-1);for(let t=0,n=o+2*f;t<n;t++){const n=A*t,a=A*(t+1);z(e+r+n,e+i+n,e+i+a,e+r+a)}}}function N(t,e,n){a.push(t),a.push(e),a.push(n)}function F(t,e,i){U(t),U(e),U(i);const a=r.length/3,s=m.generateTopUV(n,r,a-3,a-2,a-1);G(s[0]),G(s[1]),G(s[2])}function z(t,e,i,a){U(t),U(e),U(a),U(e),U(i),U(a);const s=r.length/3,o=m.generateSideWallUV(n,r,s-6,s-3,s-2,s-1);G(o[0]),G(o[1]),G(o[3]),G(o[1]),G(o[2]),G(o[3])}function U(t){r.push(a[3*t+0]),r.push(a[3*t+1]),r.push(a[3*t+2])}function G(t){i.push(t.x),i.push(t.y)}(function(){const t=r.length/3;if(c){let t=0,e=A*t;for(let n=0;n<k;n++){const t=M[n];F(t[2]+e,t[1]+e,t[0]+e)}t=o+2*f,e=A*t;for(let n=0;n<k;n++){const t=M[n];F(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<k;t++){const e=M[t];F(e[2],e[1],e[0])}for(let t=0;t<k;t++){const e=M[t];F(e[0]+A*o,e[1]+A*o,e[2]+A*o)}}n.addGroup(t,r.length/3-t,0)})(),function(){const t=r.length/3;let e=0;O(C,e),e+=C.length;for(let n=0,r=E.length;n<r;n++){const t=E[n];O(t,e),e+=t.length}n.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new In(r,3)),this.setAttribute("uv",new In(i,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const e=t[r];n.shapes.push(e.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let i=0,a=t.shapes.length;i<a;i++){const r=e[t.shapes[i]];n.push(r)}const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new Do[r.type]).fromJSON(r)),new El(n,t.options)}}const Ml={generateTopUV:function(t,e,n,r,i){const a=e[3*n],s=e[3*n+1],o=e[3*r],l=e[3*r+1],c=e[3*i],u=e[3*i+1];return[new Ot(a,s),new Ot(o,l),new Ot(c,u)]},generateSideWallUV:function(t,e,n,r,i,a){const s=e[3*n],o=e[3*n+1],l=e[3*n+2],c=e[3*r],u=e[3*r+1],h=e[3*r+2],d=e[3*i],f=e[3*i+1],p=e[3*i+2],m=e[3*a],g=e[3*a+1],y=e[3*a+2];return Math.abs(o-u)<Math.abs(s-c)?[new Ot(s,1-l),new Ot(c,1-h),new Ot(d,1-p),new Ot(m,1-y)]:[new Ot(o,1-l),new Ot(u,1-h),new Ot(f,1-p),new Ot(g,1-y)]}};class Cl extends Ho{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Cl(t.radius,t.detail)}}class Tl extends Ho{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Tl(t.radius,t.detail)}}class Al extends Gn{constructor(t=.5,e=1,n=8,r=1,i=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n);const s=[],o=[],l=[],c=[];let u=t;const h=(e-t)/(r=Math.max(1,r)),d=new ue,f=new Ot;for(let p=0;p<=r;p++){for(let t=0;t<=n;t++){const r=i+t/n*a;d.x=u*Math.cos(r),d.y=u*Math.sin(r),o.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/e+1)/2,f.y=(d.y/e+1)/2,c.push(f.x,f.y)}u+=h}for(let p=0;p<r;p++){const t=p*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,a=r+n+1,o=r+n+2,l=r+1;s.push(i,a,l),s.push(a,o,l)}}this.setIndex(s),this.setAttribute("position",new In(o,3)),this.setAttribute("normal",new In(l,3)),this.setAttribute("uv",new In(c,2))}static fromJSON(t){return new Al(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class kl extends Gn{constructor(t=new Xo([new Ot(0,.5),new Ot(-.5,-.5),new Ot(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],i=[],a=[];let s=0,o=0;if(!1===Array.isArray(t))l(t);else for(let c=0;c<t.length;c++)l(t[c]),this.addGroup(s,o,c),s+=o,o=0;function l(t){const s=r.length/3,l=t.extractPoints(e);let c=l.shape;const u=l.holes;!1===_l.isClockWise(c)&&(c=c.reverse());for(let e=0,n=u.length;e<n;e++){const t=u[e];!0===_l.isClockWise(t)&&(u[e]=t.reverse())}const h=_l.triangulateShape(c,u);for(let e=0,n=u.length;e<n;e++){const t=u[e];c=c.concat(t)}for(let e=0,n=c.length;e<n;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),a.push(t.x,t.y)}for(let e=0,r=h.length;e<r;e++){const t=h[e],r=t[0]+s,i=t[1]+s,a=t[2]+s;n.push(r,i,a),o+=3}}this.setIndex(n),this.setAttribute("position",new In(r,3)),this.setAttribute("normal",new In(i,3)),this.setAttribute("uv",new In(a,2))}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let r=0,i=t.shapes.length;r<i;r++){const i=e[t.shapes[r]];n.push(i)}return new kl(n,t.curveSegments)}}class Ll extends Gn{constructor(t=1,e=32,n=16,r=0,i=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const o=Math.min(a+s,Math.PI);let l=0;const c=[],u=new ue,h=new ue,d=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){const d=[],y=g/n;let v=0;0==g&&0==a?v=.5/e:g==n&&o==Math.PI&&(v=-.5/e);for(let n=0;n<=e;n++){const o=n/e;u.x=-t*Math.cos(r+o*i)*Math.sin(a+y*s),u.y=t*Math.cos(a+y*s),u.z=t*Math.sin(r+o*i)*Math.sin(a+y*s),f.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),m.push(o+v,1-y),d.push(l++)}c.push(d)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=c[g][t+1],r=c[g][t],i=c[g+1][t],s=c[g+1][t+1];(0!==g||a>0)&&d.push(e,r,s),(g!==n-1||o<Math.PI)&&d.push(r,i,s)}this.setIndex(d),this.setAttribute("position",new In(f,3)),this.setAttribute("normal",new In(p,3)),this.setAttribute("uv",new In(m,2))}static fromJSON(t){return new Ll(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Pl extends Ho{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Pl(t.radius,t.detail)}}class Rl extends Gn{constructor(t=1,e=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],o=[],l=[],c=new ue,u=new ue,h=new ue;for(let d=0;d<=n;d++)for(let a=0;a<=r;a++){const f=a/r*i,p=d/n*Math.PI*2;u.x=(t+e*Math.cos(p))*Math.cos(f),u.y=(t+e*Math.cos(p))*Math.sin(f),u.z=e*Math.sin(p),s.push(u.x,u.y,u.z),c.x=t*Math.cos(f),c.y=t*Math.sin(f),h.subVectors(u,c).normalize(),o.push(h.x,h.y,h.z),l.push(a/r),l.push(d/n)}for(let d=1;d<=n;d++)for(let t=1;t<=r;t++){const e=(r+1)*d+t-1,n=(r+1)*(d-1)+t-1,i=(r+1)*(d-1)+t,s=(r+1)*d+t;a.push(e,n,s),a.push(n,i,s)}this.setIndex(a),this.setAttribute("position",new In(s,3)),this.setAttribute("normal",new In(o,3)),this.setAttribute("uv",new In(l,2))}static fromJSON(t){return new Rl(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class Il extends Gn{constructor(t=1,e=.4,n=64,r=8,i=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);const s=[],o=[],l=[],c=[],u=new ue,h=new ue,d=new ue,f=new ue,p=new ue,m=new ue,g=new ue;for(let v=0;v<=n;++v){const s=v/n*i*Math.PI*2;y(s,i,a,t,d),y(s+.01,i,a,t,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let t=0;t<=r;++t){const i=t/r*Math.PI*2,a=-e*Math.cos(i),s=e*Math.sin(i);u.x=d.x+(a*g.x+s*p.x),u.y=d.y+(a*g.y+s*p.y),u.z=d.z+(a*g.z+s*p.z),o.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(v/n),c.push(t/r)}}for(let v=1;v<=n;v++)for(let t=1;t<=r;t++){const e=(r+1)*(v-1)+(t-1),n=(r+1)*v+(t-1),i=(r+1)*v+t,a=(r+1)*(v-1)+t;s.push(e,n,a),s.push(n,i,a)}function y(t,e,n,r,i){const a=Math.cos(t),s=Math.sin(t),o=n/e*t,l=Math.cos(o);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*s*.5,i.z=r*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new In(o,3)),this.setAttribute("normal",new In(l,3)),this.setAttribute("uv",new In(c,2))}static fromJSON(t){return new Il(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class Dl extends Gn{constructor(t=new Ro(new ue(-1,-1,0),new ue(-1,1,0),new ue(1,1,0)),e=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i};const a=t.computeFrenetFrames(e,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new ue,o=new ue,l=new Ot;let c=new ue;const u=[],h=[],d=[],f=[];function p(i){c=t.getPointAt(i/e,c);const l=a.normals[i],d=a.binormals[i];for(let t=0;t<=r;t++){const e=t/r*Math.PI*2,i=Math.sin(e),a=-Math.cos(e);o.x=a*l.x+i*d.x,o.y=a*l.y+i*d.y,o.z=a*l.z+i*d.z,o.normalize(),h.push(o.x,o.y,o.z),s.x=c.x+n*o.x,s.y=c.y+n*o.y,s.z=c.z+n*o.z,u.push(s.x,s.y,s.z)}}(function(){for(let t=0;t<e;t++)p(t);p(!1===i?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=r;n++)l.x=t/e,l.y=n/r,d.push(l.x,l.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=r;e++){const n=(r+1)*(t-1)+(e-1),i=(r+1)*t+(e-1),a=(r+1)*t+e,s=(r+1)*(t-1)+e;f.push(n,i,s),f.push(i,a,s)}}()})(),this.setIndex(f),this.setAttribute("position",new In(u,3)),this.setAttribute("normal",new In(h,3)),this.setAttribute("uv",new In(d,2))}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new Dl((new Do[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class Bl extends Gn{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,r=new ue,i=new ue;if(null!==t.index){const a=t.attributes.position,s=t.index;let o=t.groups;0===o.length&&(o=[{start:0,count:s.count,materialIndex:0}]);for(let t=0,l=o.length;t<l;++t){const l=o[t],c=l.start;for(let t=c,o=c+l.count;t<o;t+=3)for(let l=0;l<3;l++){const o=s.getX(t+l),c=s.getX(t+(l+1)%3);r.fromBufferAttribute(a,o),i.fromBufferAttribute(a,c),!0===Ol(r,i,n)&&(e.push(r.x,r.y,r.z),e.push(i.x,i.y,i.z))}}}else{const a=t.attributes.position;for(let t=0,s=a.count/3;t<s;t++)for(let o=0;o<3;o++){const s=3*t+o,l=3*t+(o+1)%3;r.fromBufferAttribute(a,s),i.fromBufferAttribute(a,l),!0===Ol(r,i,n)&&(e.push(r.x,r.y,r.z),e.push(i.x,i.y,i.z))}}this.setAttribute("position",new In(e,3))}}}function Ol(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var Nl=Object.freeze({__proto__:null,BoxGeometry:or,BoxBufferGeometry:or,CapsuleGeometry:Fo,CapsuleBufferGeometry:Fo,CircleGeometry:zo,CircleBufferGeometry:zo,ConeGeometry:Go,ConeBufferGeometry:Go,CylinderGeometry:Uo,CylinderBufferGeometry:Uo,DodecahedronGeometry:jo,DodecahedronBufferGeometry:jo,EdgesGeometry:qo,ExtrudeGeometry:El,ExtrudeBufferGeometry:El,IcosahedronGeometry:Cl,IcosahedronBufferGeometry:Cl,LatheGeometry:No,LatheBufferGeometry:No,OctahedronGeometry:Tl,OctahedronBufferGeometry:Tl,PlaneGeometry:Tr,PlaneBufferGeometry:Tr,PolyhedronGeometry:Ho,PolyhedronBufferGeometry:Ho,RingGeometry:Al,RingBufferGeometry:Al,ShapeGeometry:kl,ShapeBufferGeometry:kl,SphereGeometry:Ll,SphereBufferGeometry:Ll,TetrahedronGeometry:Pl,TetrahedronBufferGeometry:Pl,TorusGeometry:Rl,TorusBufferGeometry:Rl,TorusKnotGeometry:Il,TorusKnotBufferGeometry:Il,TubeGeometry:Dl,TubeBufferGeometry:Dl,WireframeGeometry:Bl});class Fl extends Cn{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Kt(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class zl extends hr{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ul extends Cn{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Kt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Gl extends Ul{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ot(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return kt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Kt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Kt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Kt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class Hl extends Cn{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Kt(16777215),this.specular=new Kt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class jl extends Cn{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Kt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class Vl extends Cn{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class Wl extends Cn{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Kt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class $l extends Cn{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Kt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Yl extends Xs{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function ql(t,e,n){return Jl(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function Xl(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function Jl(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Zl(t){const e=t.length,n=new Array(e);for(let r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n}function Kl(t,e,n){const r=t.length,i=new t.constructor(r);for(let a=0,s=0;s!==r;++a){const r=n[a]*e;for(let n=0;n!==e;++n)i[s++]=t[r+n]}return i}function Ql(t,e,n,r){let i=1,a=t[0];for(;void 0!==a&&void 0===a[r];)a=t[i++];if(void 0===a)return;let s=a[r];if(void 0!==s)if(Array.isArray(s))do{s=a[r],void 0!==s&&(e.push(a.time),n.push.apply(n,s)),a=t[i++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[r],void 0!==s&&(e.push(a.time),s.toArray(n,n.length)),a=t[i++]}while(void 0!==a);else do{s=a[r],void 0!==s&&(e.push(a.time),n.push(s)),a=t[i++]}while(void 0!==a)}var tc=Object.freeze({__proto__:null,arraySlice:ql,convertArray:Xl,isTypedArray:Jl,getKeyframeOrder:Zl,sortedArray:Kl,flattenJSON:Ql,subclip:function(t,e,n,r,i=30){const a=t.clone();a.name=e;const s=[];for(let l=0;l<a.tracks.length;++l){const t=a.tracks[l],e=t.getValueSize(),o=[],c=[];for(let a=0;a<t.times.length;++a){const s=t.times[a]*i;if(!(s<n||s>=r)){o.push(t.times[a]);for(let n=0;n<e;++n)c.push(t.values[a*e+n])}}0!==o.length&&(t.times=Xl(o,t.times.constructor),t.values=Xl(c,t.values.constructor),s.push(t))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,a=e/r;for(let s=0;s<i;++s){const e=n.tracks[s],r=e.ValueTypeName;if("bool"===r||"string"===r)continue;const i=t.tracks.find((function(t){return t.name===e.name&&t.ValueTypeName===r}));if(void 0===i)continue;let o=0;const l=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=e.times.length-1;let d;if(a<=e.times[0]){const t=o,n=l-o;d=ql(e.values,t,n)}else if(a>=e.times[h]){const t=h*l+o,n=t+l-o;d=ql(e.values,t,n)}else{const t=e.createInterpolant(),n=o,r=l-o;t.evaluate(a),d=ql(t.resultBuffer,n,r)}"quaternion"===r&&(new ce).fromArray(d).normalize().conjugate().toArray(d);const f=i.times.length;for(let t=0;t<f;++t){const e=t*u+c;if("quaternion"===r)ce.multiplyQuaternionsFlat(i.values,e,d,0,i.values,e);else{const t=u-2*c;for(let n=0;n<t;++n)i.values[e+n]-=d[n]}}}return t.blendMode=dt,t}});class ec{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let a;n:{r:if(!(t<r)){for(let a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=e[++n],t<r)break e}a=e.length;break n}if(t>=i)break t;{const s=e[1];t<s&&(n=2,i=s);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,i=e[--n-1],t>=i)break e}a=n,n=0}}for(;n<a;){const r=n+a>>>1;t<e[r]?a=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let a=0;a!==r;++a)e[a]=n[i+a];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class nc extends ec{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:lt,endingEnd:lt}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,a=t+1,s=r[i],o=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case ct:i=t,s=2*e-n;break;case ut:i=r.length-2,s=e+r[i]-r[i+1];break;default:i=t,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case ct:a=t,o=2*n-e;break;case ut:a=1,o=n+r[1]-r[0];break;default:a=t-1,o=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(o-n),this._offsetPrev=i*c,this._offsetNext=a*c}interpolate_(t,e,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=t*s,l=o-s,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-e)/(r-e),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,y=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,v=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p;for(let x=0;x!==s;++x)i[x]=g*a[c+x]+y*a[l+x]+v*a[o+x]+b*a[u+x];return i}}class rc extends ec{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=t*s,l=o-s,c=(n-e)/(r-e),u=1-c;for(let h=0;h!==s;++h)i[h]=a[l+h]*u+a[o+h]*c;return i}}class ic extends ec{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class ac{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Xl(e,this.TimeBufferType),this.values=Xl(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Xl(t.times,Array),values:Xl(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new ic(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new rc(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new nc(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case at:e=this.InterpolantFactoryMethodDiscrete;break;case st:e=this.InterpolantFactoryMethodLinear;break;case ot:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return at;case this.InterpolantFactoryMethodLinear:return st;case this.InterpolantFactoryMethodSmooth:return ot}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,a=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const t=this.getValueSize();this.times=ql(n,i,a),this.values=ql(this.values,i*t,a*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let s=0;s!==i;s++){const e=n[s];if("number"==typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,e),t=!1;break}if(null!==a&&a>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,e,a),t=!1;break}a=e}if(void 0!==r&&Jl(r))for(let s=0,o=r.length;s!==o;++s){const e=r[s];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,e),t=!1;break}}return t}optimize(){const t=ql(this.times),e=ql(this.values),n=this.getValueSize(),r=this.getInterpolation()===ot,i=t.length-1;let a=1;for(let s=1;s<i;++s){let i=!1;const o=t[s];if(o!==t[s+1]&&(1!==s||o!==t[0]))if(r)i=!0;else{const t=s*n,r=t-n,a=t+n;for(let s=0;s!==n;++s){const n=e[t+s];if(n!==e[r+s]||n!==e[a+s]){i=!0;break}}}if(i){if(s!==a){t[a]=t[s];const r=s*n,i=a*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++a}}if(i>0){t[a]=t[i];for(let t=i*n,r=a*n,s=0;s!==n;++s)e[r+s]=e[t+s];++a}return a!==t.length?(this.times=ql(t,0,a),this.values=ql(e,0,a*n)):(this.times=t,this.values=e),this}clone(){const t=ql(this.times,0),e=ql(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}ac.prototype.TimeBufferType=Float32Array,ac.prototype.ValueBufferType=Float32Array,ac.prototype.DefaultInterpolation=st;class sc extends ac{}sc.prototype.ValueTypeName="bool",sc.prototype.ValueBufferType=Array,sc.prototype.DefaultInterpolation=at,sc.prototype.InterpolantFactoryMethodLinear=void 0,sc.prototype.InterpolantFactoryMethodSmooth=void 0;class oc extends ac{}oc.prototype.ValueTypeName="color";class lc extends ac{}lc.prototype.ValueTypeName="number";class cc extends ec{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-e)/(r-e);let l=t*s;for(let c=l+s;l!==c;l+=4)ce.slerpFlat(i,0,a,l-s,a,l,o);return i}}class uc extends ac{InterpolantFactoryMethodLinear(t){return new cc(this.times,this.values,this.getValueSize(),t)}}uc.prototype.ValueTypeName="quaternion",uc.prototype.DefaultInterpolation=st,uc.prototype.InterpolantFactoryMethodSmooth=void 0;class hc extends ac{}hc.prototype.ValueTypeName="string",hc.prototype.ValueBufferType=Array,hc.prototype.DefaultInterpolation=at,hc.prototype.InterpolantFactoryMethodLinear=void 0,hc.prototype.InterpolantFactoryMethodSmooth=void 0;class dc extends ac{}dc.prototype.ValueTypeName="vector";class fc{constructor(t,e=-1,n,r=ht){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=At(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let a=0,s=n.length;a!==s;++a)e.push(pc(n[a]).scale(r));const i=new this(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let i=0,a=n.length;i!==a;++i)e.push(ac.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const i=e.length,a=[];for(let s=0;s<i;s++){let t=[],o=[];t.push((s+i-1)%i,s,(s+1)%i),o.push(0,1,0);const l=Zl(t);t=Kl(t,1,l),o=Kl(o,1,l),!r&&0===t[0]&&(t.push(i),o.push(o[0])),a.push(new lc(".morphTargetInfluences["+e[s].name+"]",t,o).scale(1/n))}return new this(t,-1,a)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let s=0,o=t.length;s<o;s++){const e=t[s],n=e.name.match(i);if(n&&n.length>1){const t=n[1];let i=r[t];i||(r[t]=i=[]),i.push(e)}}const a=[];for(const s in r)a.push(this.CreateFromMorphTargetSequence(s,r[s],e,n));return a}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,i){if(0!==n.length){const a=[],s=[];Ql(n,a,s,r),0!==a.length&&i.push(new t(e,a,s))}},r=[],i=t.name||"default",a=t.fps||30,s=t.blendMode;let o=t.length||-1;const l=t.hierarchy||[];for(let c=0;c<l.length;c++){const t=l[c].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let n;for(n=0;n<t.length;n++)if(t[n].morphTargets)for(let r=0;r<t[n].morphTargets.length;r++)e[t[n].morphTargets[r]]=-1;for(const i in e){const e=[],a=[];for(let r=0;r!==t[n].morphTargets.length;++r){const r=t[n];e.push(r.time),a.push(r.morphTarget===i?1:0)}r.push(new lc(".morphTargetInfluence["+i+"]",e,a))}o=e.length*a}else{const i=".bones["+e[c].name+"]";n(dc,i+".position",t,"pos",r),n(uc,i+".quaternion",t,"rot",r),n(dc,i+".scale",t,"scl",r)}}return 0===r.length?null:new this(i,o,r,s)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function pc(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lc;case"vector":case"vector2":case"vector3":case"vector4":return dc;case"color":return oc;case"quaternion":return uc;case"bool":case"boolean":return sc;case"string":return hc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];Ql(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const mc={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class gc{constructor(t,e,n){const r=this;let i,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===a&&void 0!==r.onStart&&r.onStart(t,s,o),a=!0},this.itemEnd=function(t){s++,void 0!==r.onProgress&&r.onProgress(t,s,o),s===o&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}const yc=new gc;class vc{constructor(t){this.manager=void 0!==t?t:yc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const bc={};class xc extends Error{constructor(t,e){super(t),this.response=e}}class _c extends vc{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=mc.get(t);if(void 0!==i)return this.manager.itemStart(t),setTimeout((()=>{e&&e(i),this.manager.itemEnd(t)}),0),i;if(void 0!==bc[t])return void bc[t].push({onLoad:e,onProgress:n,onError:r});bc[t]=[],bc[t].push({onLoad:e,onProgress:n,onError:r});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===e.body||void 0===e.body.getReader)return e;const n=bc[t],r=e.body.getReader(),i=e.headers.get("Content-Length"),a=i?parseInt(i):0,s=0!==a;let o=0;const l=new ReadableStream({start(t){!function e(){r.read().then((({done:r,value:i})=>{if(r)t.close();else{o+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(r)}t.enqueue(i),e()}}))}()}});return new Response(l)}throw new xc(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`,e)})).then((t=>{switch(o){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,s)));case"json":return t.json();default:if(void 0===s)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(s),n=e&&e[1]?e[1].toLowerCase():void 0,r=new TextDecoder(n);return t.arrayBuffer().then((t=>r.decode(t)))}}})).then((e=>{mc.add(t,e);const n=bc[t];delete bc[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onLoad&&r.onLoad(e)}})).catch((e=>{const n=bc[t];if(void 0===n)throw this.manager.itemError(t),e;delete bc[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class wc extends vc{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,a=mc.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;const s=Gt("img");function o(){c(),mc.add(t,this),e&&e(this),i.manager.itemEnd(t)}function l(e){c(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function c(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(t),s.src=t,s}}class Sc extends fn{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Kt(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}class Ec extends Sc{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(fn.DefaultUp),this.updateMatrix(),this.groundColor=new Kt(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const Mc=new Ge,Cc=new ue,Tc=new ue;class Ac{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ot(512,512),this.map=null,this.mapPass=null,this.matrix=new Ge,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Er,this._frameExtents=new Ot(1,1),this._viewportCount=1,this._viewports=[new ae(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;Cc.setFromMatrixPosition(t.matrixWorld),e.position.copy(Cc),Tc.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Tc),e.updateMatrixWorld(),Mc.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mc),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class kc extends Ac{constructor(){super(new fr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*Tt*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;(n!==e.fov||r!==e.aspect||i!==e.far)&&(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Lc extends Sc{constructor(t,e,n=0,r=Math.PI/3,i=0,a=1){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(fn.DefaultUp),this.updateMatrix(),this.target=new fn,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.shadow=new kc}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const Pc=new Ge,Rc=new ue,Ic=new ue;class Dc extends Ac{constructor(){super(new fr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ot(4,2),this._viewportCount=6,this._viewports=[new ae(2,1,1,1),new ae(0,1,1,1),new ae(3,1,1,1),new ae(1,1,1,1),new ae(3,0,1,1),new ae(1,0,1,1)],this._cubeDirections=[new ue(1,0,0),new ue(-1,0,0),new ue(0,0,1),new ue(0,0,-1),new ue(0,1,0),new ue(0,-1,0)],this._cubeUps=[new ue(0,1,0),new ue(0,1,0),new ue(0,1,0),new ue(0,1,0),new ue(0,0,1),new ue(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Rc.setFromMatrixPosition(t.matrixWorld),n.position.copy(Rc),Ic.copy(n.position),Ic.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(Ic),n.updateMatrixWorld(),r.makeTranslation(-Rc.x,-Rc.y,-Rc.z),Pc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Pc)}}class Bc extends Sc{constructor(t,e,n=0,r=1){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Dc}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Oc extends Ac{constructor(){super(new Nr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Nc extends Sc{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(fn.DefaultUp),this.updateMatrix(),this.target=new fn,this.shadow=new Oc}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Fc extends Sc{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class zc extends Sc{constructor(t,e,n=10,r=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class Uc{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new ue)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,i=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*r),e.addScaledVector(a[2],.488603*i),e.addScaledVector(a[3],.488603*n),e.addScaledVector(a[4],n*r*1.092548),e.addScaledVector(a[5],r*i*1.092548),e.addScaledVector(a[6],.315392*(3*i*i-1)),e.addScaledVector(a[7],n*i*1.092548),e.addScaledVector(a[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,i=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],1.023328*r),e.addScaledVector(a[2],1.023328*i),e.addScaledVector(a[3],1.023328*n),e.addScaledVector(a[4],.858086*n*r),e.addScaledVector(a[5],.858086*r*i),e.addScaledVector(a[6],.743125*i*i-.247708),e.addScaledVector(a[7],.858086*n*i),e.addScaledVector(a[8],.429043*(n*n-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}toArray(t=[],e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}class Gc extends Sc{constructor(t=new Uc,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class Hc extends vc{constructor(t){super(t),this.textures={}}load(t,e,n,r){const i=this,a=new _c(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(t)}}),n,r)}parse(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const r=Hc.createMaterialFromType(t.type);if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&void 0!==r.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=t.sheen),void 0!==t.sheenColor&&(r.sheenColor=(new Kt).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(r.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==r.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==r.specular&&r.specular.setHex(t.specular),void 0!==t.specularIntensity&&(r.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.iridescence&&(r.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(r.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(r.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.thickness&&(r.thickness=t.thickness),void 0!==t.attenuationDistance&&(r.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(t.attenuationColor),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.shadowSide&&(r.shadowSide=t.shadowSide),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.alphaToCoverage&&(r.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(r.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const i in t.uniforms){const e=t.uniforms[i];switch(r.uniforms[i]={},e.type){case"t":r.uniforms[i].value=n(e.value);break;case"c":r.uniforms[i].value=(new Kt).setHex(e.value);break;case"v2":r.uniforms[i].value=(new Ot).fromArray(e.value);break;case"v3":r.uniforms[i].value=(new ue).fromArray(e.value);break;case"v4":r.uniforms[i].value=(new ae).fromArray(e.value);break;case"m3":r.uniforms[i].value=(new Nt).fromArray(e.value);break;case"m4":r.uniforms[i].value=(new Ge).fromArray(e.value);break;default:r.uniforms[i].value=e.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const i in t.extensions)r.extensions[i]=t.extensions[i];if(void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),r.normalScale=(new Ot).fromArray(e)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(r.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(r.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Ot).fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(r.iridescenceMap=n(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(r.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(r.thicknessMap=n(t.thicknessMap)),void 0!==t.sheenColorMap&&(r.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(r.sheenRoughnessMap=n(t.sheenRoughnessMap)),r}setTextures(t){return this.textures=t,this}static createMaterialFromType(t){return new{ShadowMaterial:Fl,SpriteMaterial:fs,RawShaderMaterial:zl,ShaderMaterial:hr,PointsMaterial:so,MeshPhysicalMaterial:Gl,MeshStandardMaterial:Ul,MeshPhongMaterial:Hl,MeshToonMaterial:jl,MeshNormalMaterial:Vl,MeshLambertMaterial:Wl,MeshDepthMaterial:Wa,MeshDistanceMaterial:$a,MeshBasicMaterial:Tn,MeshMatcapMaterial:$l,LineDashedMaterial:Yl,LineBasicMaterial:Xs,Material:Cn}[t]}}class jc{static decodeText(t){if(typeof TextDecoder<"u")return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class Vc extends Gn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class Wc extends vc{constructor(t){super(t)}load(t,e,n,r){const i=this,a=new _c(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(t)}}),n,r)}parse(t){const e={},n={};function r(t,r){if(void 0!==e[r])return e[r];const i=t.interleavedBuffers[r],a=function(t,e){if(void 0!==n[e])return n[e];const r=t.arrayBuffers[e],i=new Uint32Array(r).buffer;return n[e]=i,i}(t,i.buffer),s=Ut(i.type,a),o=new us(s,i.stride);return o.uuid=i.uuid,e[r]=o,o}const i=t.isInstancedBufferGeometry?new Vc:new Gn,a=t.data.index;if(void 0!==a){const t=Ut(a.type,a.array);i.setIndex(new Ln(t,1))}const s=t.data.attributes;for(const u in s){const e=s[u];let n;if(e.isInterleavedBufferAttribute){const i=r(t.data,e.data);n=new ds(i,e.itemSize,e.offset,e.normalized)}else{const t=Ut(e.type,e.array);n=new(e.isInstancedBufferAttribute?js:Ln)(t,e.itemSize,e.normalized)}void 0!==e.name&&(n.name=e.name),void 0!==e.usage&&n.setUsage(e.usage),void 0!==e.updateRange&&(n.updateRange.offset=e.updateRange.offset,n.updateRange.count=e.updateRange.count),i.setAttribute(u,n)}const o=t.data.morphAttributes;if(o)for(const u in o){const e=o[u],n=[];for(let i=0,a=e.length;i<a;i++){const a=e[i];let s;if(a.isInterleavedBufferAttribute){const e=r(t.data,a.data);s=new ds(e,a.itemSize,a.offset,a.normalized)}else{const t=Ut(a.type,a.array);s=new Ln(t,a.itemSize,a.normalized)}void 0!==a.name&&(s.name=a.name),n.push(s)}i.morphAttributes[u]=n}t.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(let u=0,h=l.length;u!==h;++u){const t=l[u];i.addGroup(t.start,t.count,t.materialIndex)}const c=t.data.boundingSphere;if(void 0!==c){const t=new ue;void 0!==c.center&&t.fromArray(c.center),i.boundingSphere=new Re(t,c.radius)}return t.name&&(i.name=t.name),t.userData&&(i.userData=t.userData),i}}const $c={UVMapping:u,CubeReflectionMapping:h,CubeRefractionMapping:d,EquirectangularReflectionMapping:f,EquirectangularRefractionMapping:p,CubeUVReflectionMapping:m},Yc={RepeatWrapping:g,ClampToEdgeWrapping:y,MirroredRepeatWrapping:v},qc={NearestFilter:b,NearestMipmapNearestFilter:x,NearestMipmapLinearFilter:_,LinearFilter:w,LinearMipmapNearestFilter:S,LinearMipmapLinearFilter:E};let Xc;const Jc={getContext:function(){return void 0===Xc&&(Xc=new(window.AudioContext||window.webkitAudioContext)),Xc},setContext:function(t){Xc=t}};const Zc=new Ge,Kc=new Ge,Qc=new Ge;class tu{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=eu(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=eu();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function eu(){return(typeof performance>"u"?Date:performance).now()}const nu=new ue,ru=new ce,iu=new ue,au=new ue;class su extends fn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const ou=new ue,lu=new ce,cu=new ue,uu=new ue;class hu{constructor(t,e,n){let r,i,a;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,r=this.valueSize,i=t*r+r;let a=this.cumulativeWeight;if(0===a){for(let t=0;t!==r;++t)n[i+t]=n[t];a=e}else{a+=e;const t=e/a;this._mixBufferRegion(n,i,0,t,r)}this.cumulativeWeight=a}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const t=e*this._origIndex;this._mixBufferRegion(n,r,t,1-i,e)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let o=e,l=e+e;o!==l;++o)if(n[o]!==n[o+e]){s.setValue(n,r);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(let i=n,a=r;i!==a;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,r,i){if(r>=.5)for(let a=0;a!==i;++a)t[e+a]=t[n+a]}_slerp(t,e,n,r){ce.slerpFlat(t,e,t,e,t,n,r)}_slerpAdditive(t,e,n,r,i){const a=this._workIndex*i;ce.multiplyQuaternionsFlat(t,a,t,e,t,n),ce.slerpFlat(t,e,t,e,t,a,r)}_lerp(t,e,n,r,i){const a=1-r;for(let s=0;s!==i;++s){const i=e+s;t[i]=t[i]*a+t[n+s]*r}}_lerpAdditive(t,e,n,r,i){for(let a=0;a!==i;++a){const i=e+a;t[i]=t[i]+t[n+a]*r}}}const du="\\[\\]\\.:\\/",fu=new RegExp("["+du+"]","g"),pu="[^"+du+"]",mu="[^"+du.replace("\\.","")+"]",gu=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",pu)+/(WCOD+)?/.source.replace("WCOD",mu)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pu)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pu)+"$"),yu=["material","materials","bones"];class vu{constructor(t,e,n){this.path=e,this.parsedPath=n||vu.parseTrackName(e),this.node=vu.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new vu.Composite(t,e,n):new vu(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(fu,"")}static parseTrackName(t){const e=gu.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==yu.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const a=n(i.children);if(a)return a}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=vu.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const a=t[r];if(void 0===a){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}vu.Composite=class{constructor(t,e,n){const r=n||vu.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},vu.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},vu.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},vu.prototype.GetterByBindingType=[vu.prototype._getValue_direct,vu.prototype._getValue_array,vu.prototype._getValue_arrayElement,vu.prototype._getValue_toArray],vu.prototype.SetterByBindingTypeAndVersioning=[[vu.prototype._setValue_direct,vu.prototype._setValue_direct_setNeedsUpdate,vu.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vu.prototype._setValue_array,vu.prototype._setValue_array_setNeedsUpdate,vu.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vu.prototype._setValue_arrayElement,vu.prototype._setValue_arrayElement_setNeedsUpdate,vu.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vu.prototype._setValue_fromArray,vu.prototype._setValue_fromArray_setNeedsUpdate,vu.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class bu{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const i=e.tracks,a=i.length,s=new Array(a),o={endingStart:lt,endingEnd:lt};for(let l=0;l!==a;++l){const t=i[l].createInterpolant(null);s[l]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,i=r/n,a=n/r;t.warp(1,i,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,i=r.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=i,o[1]=i+n,l[0]=t/a,l[1]=e/a,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const i=this._startTime;if(null!==i){const r=(t-i)*n;if(r<0||0===n)return;this._startTime=null,e=n*r}e*=this._updateTimeScale(t);const a=this._updateTime(e),s=this._updateWeight(t);if(s>0){const t=this._interpolants,e=this._propertyBindings;if(this.blendMode===dt)for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(a),e[n].accumulateAdditive(s);else for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(a),e[n].accumulate(r,s)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,i=this._loopCount;const a=2202===n;if(0===t)return-1===i?r:a&&1==(1&i)?e-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=e||r<0){const n=Math.floor(r/e);r-=e*n,i+=Math.abs(n);const s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){const e=t<0;this._setEndings(e,!e,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&1==(1&i))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=ct,r.endingEnd=ct):(r.endingStart=t?this.zeroSlopeAtStart?ct:lt:ut,r.endingEnd=e?this.zeroSlopeAtEnd?ct:lt:ut)}_scheduleFading(t,e,n){const r=this._mixer,i=r.time;let a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=i,o[0]=e,s[1]=i+t,o[1]=n,this}}const xu=new Float32Array(1);class _u{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new _u(void 0===this.value.clone?this.value:this.value.clone())}}let wu=0;class Su extends us{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class Eu{constructor(t,e,n=0,r=1/0){this.ray=new Ue(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new Ke,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return Cu(t,this,n,e),n.sort(Mu),n}intersectObjects(t,e=!0,n=[]){for(let r=0,i=t.length;r<i;r++)Cu(t[r],this,n,e);return n.sort(Mu),n}}function Mu(t,e){return t.distance-e.distance}function Cu(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)Cu(r[t],e,n,!0)}}class Tu{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(kt(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Au=new Ot;const ku=new ue,Lu=new ue;class Pu{constructor(t=new ue,e=new ue){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){ku.subVectors(t,this.start),Lu.subVectors(this.end,this.start);const n=Lu.dot(Lu);let r=Lu.dot(ku)/n;return e&&(r=kt(r,0,1)),r}closestPointToPoint(t,e,n){const r=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Ru=new ue;const Iu=new ue,Du=new Ge,Bu=new Ge;function Ou(t){const e=[];!0===t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,Ou(t.children[n]));return e}const Nu=new ue,Fu=new Kt,zu=new Kt;const Uu=new ue,Gu=new ue,Hu=new ue;const ju=new ue,Vu=new dr;function Wu(t,e,n,r,i,a,s){ju.set(i,a,s).unproject(r);const o=e[t];if(void 0!==o){const t=n.getAttribute("position");for(let e=0,n=o.length;e<n;e++)t.setXYZ(o[e],ju.x,ju.y,ju.z)}}const $u=new fe;const Yu=new ue;let qu,Xu;const Ju=Zu();function Zu(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const t=l-127;t<-27?(r[l]=0,r[256|l]=32768,i[l]=24,i[256|l]=24):t<-14?(r[l]=1024>>-t-14,r[256|l]=1024>>-t-14|32768,i[l]=-t-1,i[256|l]=-t-1):t<=15?(r[l]=t+15<<10,r[256|l]=t+15<<10|32768,i[l]=13,i[256|l]=13):t<128?(r[l]=31744,r[256|l]=64512,i[l]=24,i[256|l]=24):(r[l]=31744,r[256|l]=64512,i[l]=13,i[256|l]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let t=l<<13,e=0;for(;0==(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,a[l]=t|e}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}var Ku=Object.freeze({__proto__:null,toHalfFloat:function(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=kt(t,-65504,65504),Ju.floatView[0]=t;const e=Ju.uint32View[0],n=e>>23&511;return Ju.baseTable[n]+((8388607&e)>>Ju.shiftTable[n])},fromHalfFloat:function(t){const e=t>>10;return Ju.uint32View[0]=Ju.mantissaTable[Ju.offsetTable[e]+(1023&t)]+Ju.exponentTable[e],Ju.floatView[0]}});class Qu extends se{constructor(t,e,n){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(t,e,n),this.samples=4}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i);const th=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:4,AddEquation:o,AddOperation:2,AdditiveAnimationBlendMode:dt,AdditiveBlending:2,AlphaFormat:1021,AlwaysDepth:1,AlwaysStencilFunc:519,AmbientLight:Fc,AmbientLightProbe:class extends Gc{constructor(t,e=1){super(void 0,e),this.isAmbientLightProbe=!0;const n=(new Kt).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}},AnimationClip:fc,AnimationLoader:class extends vc{constructor(t){super(t)}load(t,e,n,r){const i=this,a=new _c(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(t)}}),n,r)}parse(t){const e=[];for(let n=0;n<t.length;n++){const r=fc.parse(t[n]);e.push(r)}return e}},AnimationMixer:class extends St{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,a=t._propertyBindings,s=t._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let u=0;u!==i;++u){const t=r[u],i=t.name;let l=c[i];if(void 0!==l)++l.referenceCount,a[u]=l;else{if(l=a[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,i));continue}const r=e&&e._propertyBindings[u].binding.parsedPath;l=new hu(vu.create(n,i,r),t.ValueTypeName,t.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,i),a[u]=l}s[u].resultBuffer=l.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const r=this._actions,i=this._actionsByClip;let a=i[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=a;else{const e=a.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),a.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const i=t._clip.uuid,a=this._actionsByClip,s=a[i],o=s.knownActions,l=o[o.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),t._byClipCacheIndex=null;delete s.actionByRoot[(t._localRoot||this._root).uuid],0===o.length&&delete a[i],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const t=e[n];0==--t.referenceCount&&this._removeInactiveBinding(t)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_addInactiveBinding(t,e,n){const r=this._bindingsByRootAndName,i=this._bindings;let a=r[e];void 0===a&&(a={},r[e]=a),a[n]=t,t._cacheIndex=i.length,i.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,s=a[r],o=e[e.length-1],l=t._cacheIndex;o._cacheIndex=l,e[l]=o,e.pop(),delete s[i],0===Object.keys(s).length&&delete a[r]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new rc(new Float32Array(2),new Float32Array(2),1,xu),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i}clipAction(t,e,n){const r=e||this._root,i=r.uuid;let a="string"==typeof t?fc.findByName(r,t):t;const s=null!==a?a.uuid:t,o=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:ht),void 0!==o){const t=o.actionByRoot[i];if(void 0!==t&&t.blendMode===n)return t;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new bu(this,a,e,n);return this._bindAction(c,l),this._addInactiveAction(c,s,i),c}existingAction(t,e){const n=e||this._root,r=n.uuid,i="string"==typeof t?fc.findByName(n,t):t,a=i?i.uuid:t,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[r]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),a=this._accuIndex^=1;for(let l=0;l!==n;++l)e[l]._update(r,t,i,a);const s=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)s[l].apply(a);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const t=i.knownActions;for(let n=0,r=t.length;n!==r;++n){const r=t[n];this._deactivateAction(r);const i=r._cacheIndex,a=e[e.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,e[i]=a,e.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const i in n){const t=n[i].actionByRoot[e];void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const i in r){const t=r[i];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},AnimationObjectGroup:class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=At(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length;let s,o=t.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=e[h];if(void 0===d){d=o++,e[h]=d,t.push(u);for(let t=0,e=a;t!==e;++t)i[t].push(new vu(u,n[t],r[t]))}else if(d<l){s=t[d];const o=--l,c=t[o];e[c.uuid]=d,t[d]=c,e[h]=o,t[o]=u;for(let t=0,e=a;t!==e;++t){const e=i[t],a=e[o];let s=e[d];e[d]=a,void 0===s&&(s=new vu(u,n[t],r[t])),e[o]=s}}else t[d]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a],o=s.uuid,l=e[o];if(void 0!==l&&l>=i){const a=i++,c=t[a];e[c.uuid]=l,t[l]=c,e[o]=a,t[a]=s;for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[a],i=e[l];e[l]=r,e[a]=i}}}this.nCachedObjects_=i}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,a=t.length;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s].uuid,l=e[o];if(void 0!==l)if(delete e[o],l<i){const s=--i,o=t[s],c=--a,u=t[c];e[o.uuid]=l,t[l]=o,e[u.uuid]=s,t[s]=u,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[s],i=e[c];e[l]=r,e[s]=i,e.pop()}}else{const i=--a,s=t[i];i>0&&(e[s.uuid]=l),t[l]=s,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t];e[l]=e[i],e.pop()}}}this.nCachedObjects_=i}subscribe_(t,e){const n=this._bindingsIndicesByPath;let r=n[t];const i=this._bindings;if(void 0!==r)return i[r];const a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[t]=r,a.push(t),s.push(e),i.push(u);for(let h=c,d=o.length;h!==d;++h){const n=o[h];u[h]=new vu(n,t,e)}return u}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];e[t[s]]=n,a[n]=o,a.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}},AnimationUtils:tc,ArcCurve:yo,ArrayCamera:Za,ArrowHelper:class extends fn{constructor(t=new ue(0,0,1),e=new ue(0,0,0),n=1,r=16776960,i=.2*n,a=.2*i){super(),this.type="ArrowHelper",void 0===qu&&(qu=new Gn,qu.setAttribute("position",new In([0,0,0,0,1,0],3)),Xu=new Uo(0,.5,1,5,1),Xu.translate(0,-.5,0)),this.position.copy(e),this.line=new eo(qu,new Xs({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ar(Xu,new Tn({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,a)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Yu.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Yu,e)}}setLength(t,e=.2*t,n=.2*e){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}},Audio:su,AudioAnalyser:class{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}},AudioContext:Jc,AudioListener:class extends fn{constructor(){super(),this.type="AudioListener",this.context=Jc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new tu}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(nu,ru,iu),au.set(0,0,-1).applyQuaternion(ru),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(nu.x,t),e.positionY.linearRampToValueAtTime(nu.y,t),e.positionZ.linearRampToValueAtTime(nu.z,t),e.forwardX.linearRampToValueAtTime(au.x,t),e.forwardY.linearRampToValueAtTime(au.y,t),e.forwardZ.linearRampToValueAtTime(au.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(nu.x,nu.y,nu.z),e.setOrientation(au.x,au.y,au.z,n.x,n.y,n.z)}},AudioLoader:class extends vc{constructor(t){super(t)}load(t,e,n,r){const i=this,a=new _c(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){try{const t=n.slice(0);Jc.getContext().decodeAudioData(t,(function(t){e(t)}))}catch(a){r?r(a):console.error(a),i.manager.itemError(t)}}),n,r)}},AxesHelper:class extends io{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new Gn;n.setAttribute("position",new In(e,3)),n.setAttribute("color",new In([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new Xs({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,n){const r=new Kt,i=this.geometry.attributes.color.array;return r.set(t),r.toArray(i,0),r.toArray(i,3),r.set(e),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},BackSide:1,BasicDepthPacking:mt,BasicShadowMap:0,Bone:Fs,BooleanKeyframeTrack:sc,Box2:class{constructor(t=new Ot(1/0,1/0),e=new Ot(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Au.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Au.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},Box3:fe,Box3Helper:class extends io{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Gn;r.setIndex(new Ln(n,1)),r.setAttribute("position",new In([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Xs({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}},BoxBufferGeometry:or,BoxGeometry:or,BoxHelper:class extends io{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Gn;i.setIndex(new Ln(n,1)),i.setAttribute("position",new Ln(r,3)),super(i,new Xs({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&$u.setFromObject(this.object),$u.isEmpty())return;const e=$u.min,n=$u.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}},BufferAttribute:Ln,BufferGeometry:Gn,BufferGeometryLoader:Wc,ByteType:1010,Cache:mc,Camera:dr,CameraHelper:class extends io{constructor(t){const e=new Gn,n=new Xs({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={};function s(t,e){o(t),o(e)}function o(t){r.push(0,0,0),i.push(0,0,0),void 0===a[t]&&(a[t]=[]),a[t].push(r.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),e.setAttribute("position",new In(r,3)),e.setAttribute("color",new In(i,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new Kt(16755200),c=new Kt(16711680),u=new Kt(43775),h=new Kt(16777215),d=new Kt(3355443);this.setColors(l,c,u,h,d)}setColors(t,e,n,r,i){const a=this.geometry.getAttribute("color");a.setXYZ(0,t.r,t.g,t.b),a.setXYZ(1,t.r,t.g,t.b),a.setXYZ(2,t.r,t.g,t.b),a.setXYZ(3,t.r,t.g,t.b),a.setXYZ(4,t.r,t.g,t.b),a.setXYZ(5,t.r,t.g,t.b),a.setXYZ(6,t.r,t.g,t.b),a.setXYZ(7,t.r,t.g,t.b),a.setXYZ(8,t.r,t.g,t.b),a.setXYZ(9,t.r,t.g,t.b),a.setXYZ(10,t.r,t.g,t.b),a.setXYZ(11,t.r,t.g,t.b),a.setXYZ(12,t.r,t.g,t.b),a.setXYZ(13,t.r,t.g,t.b),a.setXYZ(14,t.r,t.g,t.b),a.setXYZ(15,t.r,t.g,t.b),a.setXYZ(16,t.r,t.g,t.b),a.setXYZ(17,t.r,t.g,t.b),a.setXYZ(18,t.r,t.g,t.b),a.setXYZ(19,t.r,t.g,t.b),a.setXYZ(20,t.r,t.g,t.b),a.setXYZ(21,t.r,t.g,t.b),a.setXYZ(22,t.r,t.g,t.b),a.setXYZ(23,t.r,t.g,t.b),a.setXYZ(24,e.r,e.g,e.b),a.setXYZ(25,e.r,e.g,e.b),a.setXYZ(26,e.r,e.g,e.b),a.setXYZ(27,e.r,e.g,e.b),a.setXYZ(28,e.r,e.g,e.b),a.setXYZ(29,e.r,e.g,e.b),a.setXYZ(30,e.r,e.g,e.b),a.setXYZ(31,e.r,e.g,e.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap;Vu.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Wu("c",e,t,Vu,0,0,-1),Wu("t",e,t,Vu,0,0,1),Wu("n1",e,t,Vu,-1,-1,-1),Wu("n2",e,t,Vu,1,-1,-1),Wu("n3",e,t,Vu,-1,1,-1),Wu("n4",e,t,Vu,1,1,-1),Wu("f1",e,t,Vu,-1,-1,1),Wu("f2",e,t,Vu,1,-1,1),Wu("f3",e,t,Vu,-1,1,1),Wu("f4",e,t,Vu,1,1,1),Wu("u1",e,t,Vu,.7,1.1,-1),Wu("u2",e,t,Vu,-.7,1.1,-1),Wu("u3",e,t,Vu,0,2,-1),Wu("cf1",e,t,Vu,-1,0,1),Wu("cf2",e,t,Vu,1,0,1),Wu("cf3",e,t,Vu,0,-1,1),Wu("cf4",e,t,Vu,0,1,1),Wu("cn1",e,t,Vu,-1,0,-1),Wu("cn2",e,t,Vu,1,0,-1),Wu("cn3",e,t,Vu,0,-1,-1),Wu("cn4",e,t,Vu,0,1,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}},CanvasTexture:class extends ie{constructor(t,e,n,r,i,a,s,o,l){super(t,e,n,r,i,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},CapsuleBufferGeometry:Fo,CapsuleGeometry:Fo,CatmullRomCurve3:So,CineonToneMapping:3,CircleBufferGeometry:zo,CircleGeometry:zo,ClampToEdgeWrapping:y,Clock:tu,Color:Kt,ColorKeyframeTrack:oc,ColorManagement:Wt,CompressedTexture:po,CompressedTextureLoader:class extends vc{constructor(t){super(t)}load(t,e,n,r){const i=this,a=[],s=new po,o=new _c(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials);let l=0;function c(c){o.load(t[c],(function(t){const n=i.parse(t,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=w),s.image=a,s.format=n.format,s.needsUpdate=!0,e&&e(s))}),n,r)}if(Array.isArray(t))for(let u=0,h=t.length;u<h;++u)c(u);else o.load(t,(function(t){const n=i.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){a[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)a[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),a[e].format=n.format,a[e].width=n.width,a[e].height=n.height}s.image=a}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=w),s.format=n.format,s.needsUpdate=!0,e&&e(s)}),n,r);return s}},ConeBufferGeometry:Go,ConeGeometry:Go,CubeCamera:mr,CubeReflectionMapping:h,CubeRefractionMapping:d,CubeTexture:gr,CubeTextureLoader:class extends vc{constructor(t){super(t)}load(t,e,n,r){const i=new gr,a=new wc(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function o(n){a.load(t[n],(function(t){i.images[n]=t,s++,6===s&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(let l=0;l<t.length;++l)o(l);return i}},CubeUVReflectionMapping:m,CubicBezierCurve:To,CubicBezierCurve3:Ao,CubicInterpolant:nc,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,CullFaceNone:0,Curve:mo,CurvePath:Bo,CustomBlending:5,CustomToneMapping:5,CylinderBufferGeometry:Uo,CylinderGeometry:Uo,Cylindrical:class{constructor(t=1,e=0,n=0){return this.radius=t,this.theta=e,this.y=n,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return(new this.constructor).copy(this)}},Data3DTexture:le,DataArrayTexture:oe,DataTexture:zs,DataTexture2DArray:class extends oe{constructor(t,e,n,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(t,e,n,r)}},DataTexture3D:class extends le{constructor(t,e,n,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(t,e,n,r)}},DataTextureLoader:class extends vc{constructor(t){super(t)}load(t,e,n,r){const i=this,a=new zs,s=new _c(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(i.withCredentials),s.load(t,(function(t){const n=i.parse(t);!n||(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:y,a.wrapT=void 0!==n.wrapT?n.wrapT:y,a.magFilter=void 0!==n.magFilter?n.magFilter:w,a.minFilter=void 0!==n.minFilter?n.minFilter:w,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=E),1===n.mipmapCount&&(a.minFilter=w),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,e&&e(a,n))}),n,r),a}},DataUtils:Ku,DecrementStencilOp:7683,DecrementWrapStencilOp:34056,DefaultLoadingManager:yc,DepthFormat:R,DepthStencilFormat:I,DepthTexture:es,DirectionalLight:Nc,DirectionalLightHelper:class extends fn{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);let r=new Gn;r.setAttribute("position",new In([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const i=new Xs({fog:!1,toneMapped:!1});this.lightPlane=new eo(r,i),this.add(this.lightPlane),r=new Gn,r.setAttribute("position",new In([0,0,0,0,0,1],3)),this.targetLine=new eo(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Uu.setFromMatrixPosition(this.light.matrixWorld),Gu.setFromMatrixPosition(this.light.target.matrixWorld),Hu.subVectors(Gu,Uu),this.lightPlane.lookAt(Gu),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gu),this.targetLine.scale.z=Hu.length()}},DiscreteInterpolant:ic,DodecahedronBufferGeometry:jo,DodecahedronGeometry:jo,DoubleSide:2,DstAlphaFactor:206,DstColorFactor:208,DynamicCopyUsage:35050,DynamicDrawUsage:35048,DynamicReadUsage:35049,EdgesGeometry:qo,EllipseCurve:go,EqualDepth:4,EqualStencilFunc:514,EquirectangularReflectionMapping:f,EquirectangularRefractionMapping:p,Euler:Ze,EventDispatcher:St,ExtrudeBufferGeometry:El,ExtrudeGeometry:El,FileLoader:_c,FlatShading:1,Float16BufferAttribute:class extends Ln{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}},Float32BufferAttribute:In,Float64BufferAttribute:class extends Ln{constructor(t,e,n){super(new Float64Array(t),e,n)}},FloatType:A,Fog:ls,FogExp2:os,Font:function(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")},FontLoader:function(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")},FramebufferTexture:class extends ie{constructor(t,e,n){super({width:t,height:e}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=b,this.minFilter=b,this.generateMipmaps=!1,this.needsUpdate=!0}},FrontSide:0,Frustum:Er,GLBufferAttribute:class{constructor(t,e,n,r,i){this.isGLBufferAttribute=!0,this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}},GLSL1:"100",GLSL3:_t,GreaterDepth:6,GreaterEqualDepth:5,GreaterEqualStencilFunc:518,GreaterStencilFunc:516,GridHelper:class extends io{constructor(t=10,e=10,n=4473924,r=8947848){n=new Kt(n),r=new Kt(r);const i=e/2,a=t/e,s=t/2,o=[],l=[];for(let u=0,h=0,d=-s;u<=e;u++,d+=a){o.push(-s,0,d,s,0,d),o.push(d,0,-s,d,0,s);const t=u===i?n:r;t.toArray(l,h),h+=3,t.toArray(l,h),h+=3,t.toArray(l,h),h+=3,t.toArray(l,h),h+=3}const c=new Gn;c.setAttribute("position",new In(o,3)),c.setAttribute("color",new In(l,3));super(c,new Xs({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}},Group:Ka,HalfFloatType:k,HemisphereLight:Ec,HemisphereLightHelper:class extends fn{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new Tl(e);r.rotateY(.5*Math.PI),this.material=new Tn({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.setAttribute("color",new Ln(a,3)),this.add(new ar(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");Fu.copy(this.light.color),zu.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const r=t<n/2?Fu:zu;e.setXYZ(t,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(Nu.setFromMatrixPosition(this.light.matrixWorld).negate())}},HemisphereLightProbe:class extends Gc{constructor(t,e,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const r=(new Kt).set(t),i=(new Kt).set(e),a=new ue(r.r,r.g,r.b),s=new ue(i.r,i.g,i.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(s).multiplyScalar(o),this.sh.coefficients[1].copy(a).sub(s).multiplyScalar(l)}},IcosahedronBufferGeometry:Cl,IcosahedronGeometry:Cl,ImageBitmapLoader:class extends vc{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,a=mc.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(t,s).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){mc.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}},ImageLoader:wc,ImageUtils:te,ImmediateRenderObject:function(){console.error("THREE.ImmediateRenderObject has been removed.")},IncrementStencilOp:7682,IncrementWrapStencilOp:34055,InstancedBufferAttribute:js,InstancedBufferGeometry:Vc,InstancedInterleavedBuffer:Su,InstancedMesh:qs,Int16BufferAttribute:class extends Ln{constructor(t,e,n){super(new Int16Array(t),e,n)}},Int32BufferAttribute:class extends Ln{constructor(t,e,n){super(new Int32Array(t),e,n)}},Int8BufferAttribute:class extends Ln{constructor(t,e,n){super(new Int8Array(t),e,n)}},IntType:1013,InterleavedBuffer:us,InterleavedBufferAttribute:ds,Interpolant:ec,InterpolateDiscrete:at,InterpolateLinear:st,InterpolateSmooth:ot,InvertStencilOp:5386,KeepStencilOp:bt,KeyframeTrack:ac,LOD:Ps,LatheBufferGeometry:No,LatheGeometry:No,Layers:Ke,LessDepth:2,LessEqualDepth:3,LessEqualStencilFunc:515,LessStencilFunc:513,Light:Sc,LightProbe:Gc,Line:eo,Line3:Pu,LineBasicMaterial:Xs,LineCurve:ko,LineCurve3:Lo,LineDashedMaterial:Yl,LineLoop:ao,LineSegments:io,LinearEncoding:ft,LinearFilter:w,LinearInterpolant:rc,LinearMipMapLinearFilter:1008,LinearMipMapNearestFilter:1007,LinearMipmapLinearFilter:E,LinearMipmapNearestFilter:S,LinearSRGBColorSpace:vt,LinearToneMapping:1,Loader:vc,LoaderUtils:jc,LoadingManager:gc,LoopOnce:2200,LoopPingPong:2202,LoopRepeat:2201,LuminanceAlphaFormat:1025,LuminanceFormat:1024,MOUSE:a,Material:Cn,MaterialLoader:Hc,MathUtils:Bt,Matrix3:Nt,Matrix4:Ge,MaxEquation:104,Mesh:ar,MeshBasicMaterial:Tn,MeshDepthMaterial:Wa,MeshDistanceMaterial:$a,MeshLambertMaterial:Wl,MeshMatcapMaterial:$l,MeshNormalMaterial:Vl,MeshPhongMaterial:Hl,MeshPhysicalMaterial:Gl,MeshStandardMaterial:Ul,MeshToonMaterial:jl,MinEquation:103,MirroredRepeatWrapping:v,MixOperation:1,MultiplyBlending:4,MultiplyOperation:0,NearestFilter:b,NearestMipMapLinearFilter:1005,NearestMipMapNearestFilter:1004,NearestMipmapLinearFilter:_,NearestMipmapNearestFilter:x,NeverDepth:0,NeverStencilFunc:512,NoBlending:0,NoColorSpace:"",NoToneMapping:0,NormalAnimationBlendMode:ht,NormalBlending:1,NotEqualDepth:7,NotEqualStencilFunc:517,NumberKeyframeTrack:lc,Object3D:fn,ObjectLoader:class extends vc{constructor(t){super(t)}load(t,e,n,r){const i=this,a=""===this.path?jc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const s=new _c(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){let a=null;try{a=JSON.parse(n)}catch(o){return void 0!==r&&r(o),void console.error("THREE:ObjectLoader: Can't parse "+t+".",o.message)}const s=a.metadata;void 0!==s&&void 0!==s.type&&"geometry"!==s.type.toLowerCase()?i.parse(a,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,r)}async loadAsync(t,e){const n=""===this.path?jc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const r=new _c(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(t,e),a=JSON.parse(i),s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(a)}parse(t,e){const n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),a=this.parseImages(t.images,(function(){void 0!==e&&e(l)})),s=this.parseTextures(t.textures,a),o=this.parseMaterials(t.materials,s),l=this.parseObject(t.object,i,o,s,n),c=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,c),void 0!==e){let t=!1;for(const e in a)if(a[e].data instanceof HTMLImageElement){t=!0;break}!1===t&&e(l)}return l}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,n),i=await this.parseImagesAsync(t.images),a=this.parseTextures(t.textures,i),s=this.parseMaterials(t.materials,a),o=this.parseObject(t.object,r,s,a,e),l=this.parseSkeletons(t.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(t){const e={};if(void 0!==t)for(let n=0,r=t.length;n<r;n++){const r=(new Xo).fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},r={};if(e.traverse((function(t){t.isBone&&(r[t.uuid]=t)})),void 0!==t)for(let i=0,a=t.length;i<a;i++){const e=(new Hs).fromJSON(t[i],r);n[e.uuid]=e}return n}parseGeometries(t,e){const n={};if(void 0!==t){const r=new Wc;for(let i=0,a=t.length;i<a;i++){let a;const s=t[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:s.type in Nl?a=Nl[s.type].fromJSON(s,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${s.type}"`)}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(t,e){const n={},r={};if(void 0!==t){const i=new Hc;i.setTextures(e);for(let e=0,a=t.length;e<a;e++){const a=t[e];if("MultiMaterial"===a.type){const t=[];for(let e=0;e<a.materials.length;e++){const r=a.materials[e];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),t.push(n[r.uuid])}r[a.uuid]=t}else void 0===n[a.uuid]&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const r=t[n],i=fc.parse(r);e[i.uuid]=i}return e}parseImages(t,e){const n=this,r={};let i;function a(t){if("string"==typeof t){const e=t;return function(t){return n.manager.itemStart(t),i.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e)}return t.data?{data:Ut(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new gc(e);i=new wc(n),i.setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const n=t[e],i=n.url;if(Array.isArray(i)){const t=[];for(let e=0,n=i.length;e<n;e++){const n=a(i[e]);null!==n&&(n instanceof HTMLImageElement?t.push(n):t.push(new zs(n.data,n.width,n.height)))}r[n.uuid]=new ee(t)}else{const t=a(n.url);r[n.uuid]=new ee(t)}}}return r}async parseImagesAsync(t){const e=this,n={};let r;async function i(t){if("string"==typeof t){const n=t,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:e.resourcePath+n;return await r.loadAsync(i)}return t.data?{data:Ut(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){r=new wc(this.manager),r.setCrossOrigin(this.crossOrigin);for(let e=0,r=t.length;e<r;e++){const r=t[e],a=r.url;if(Array.isArray(a)){const t=[];for(let e=0,n=a.length;e<n;e++){const n=a[e],r=await i(n);null!==r&&(r instanceof HTMLImageElement?t.push(r):t.push(new zs(r.data,r.width,r.height)))}n[r.uuid]=new ee(t)}else{const t=await i(r.url);n[r.uuid]=new ee(t)}}}return n}parseTextures(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const r={};if(void 0!==t)for(let i=0,a=t.length;i<a;i++){const a=t[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const s=e[a.image],o=s.data;let l;Array.isArray(o)?(l=new gr,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new zs:new ie,o&&(l.needsUpdate=!0)),l.source=s,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=n(a.mapping,$c)),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=n(a.wrap[0],Yc),l.wrapT=n(a.wrap[1],Yc)),void 0!==a.format&&(l.format=a.format),void 0!==a.type&&(l.type=a.type),void 0!==a.encoding&&(l.encoding=a.encoding),void 0!==a.minFilter&&(l.minFilter=n(a.minFilter,qc)),void 0!==a.magFilter&&(l.magFilter=n(a.magFilter,qc)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.userData&&(l.userData=a.userData),r[a.uuid]=l}return r}parseObject(t,e,n,r,i){let a,s,o;function l(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function c(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),e.push(n[i])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}function u(t){return void 0===r[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),r[t]}switch(t.type){case"Scene":a=new cs,void 0!==t.background&&(Number.isInteger(t.background)?a.background=new Kt(t.background):a.background=u(t.background)),void 0!==t.environment&&(a.environment=u(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new ls(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new os(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new fr(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new Nr(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new Fc(t.color,t.intensity);break;case"DirectionalLight":a=new Nc(t.color,t.intensity);break;case"PointLight":a=new Bc(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new zc(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new Lc(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new Ec(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=(new Gc).fromJSON(t);break;case"SkinnedMesh":s=l(t.geometry),o=c(t.material),a=new Ns(s,o),void 0!==t.bindMode&&(a.bindMode=t.bindMode),void 0!==t.bindMatrix&&a.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(a.skeleton=t.skeleton);break;case"Mesh":s=l(t.geometry),o=c(t.material),a=new ar(s,o);break;case"InstancedMesh":s=l(t.geometry),o=c(t.material);const e=t.count,n=t.instanceMatrix,r=t.instanceColor;a=new qs(s,o,e),a.instanceMatrix=new js(new Float32Array(n.array),16),void 0!==r&&(a.instanceColor=new js(new Float32Array(r.array),r.itemSize));break;case"LOD":a=new Ps;break;case"Line":a=new eo(l(t.geometry),c(t.material));break;case"LineLoop":a=new ao(l(t.geometry),c(t.material));break;case"LineSegments":a=new io(l(t.geometry),c(t.material));break;case"PointCloud":case"Points":a=new ho(l(t.geometry),c(t.material));break;case"Sprite":a=new Ts(c(t.material));break;case"Group":a=new Ka;break;case"Bone":a=new Fs;break;default:a=new fn}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(a.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(a.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.frustumCulled&&(a.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(a.renderOrder=t.renderOrder),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.layers&&(a.layers.mask=t.layers),void 0!==t.children){const s=t.children;for(let t=0;t<s.length;t++)a.add(this.parseObject(s[t],e,n,r,i))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const n=e[t];a.animations.push(i[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(a.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],r=a.getObjectByProperty("uuid",n.object);void 0!==r&&a.addLevel(r,n.distance)}}return a}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}}))}},ObjectSpaceNormalMap:1,OctahedronBufferGeometry:Tl,OctahedronGeometry:Tl,OneFactor:201,OneMinusDstAlphaFactor:207,OneMinusDstColorFactor:209,OneMinusSrcAlphaFactor:c,OneMinusSrcColorFactor:203,OrthographicCamera:Nr,PCFShadowMap:1,PCFSoftShadowMap:2,PMREMGenerator:$r,ParametricGeometry:class extends Gn{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}},Path:Oo,PerspectiveCamera:fr,Plane:_r,PlaneBufferGeometry:Tr,PlaneGeometry:Tr,PlaneHelper:class extends eo{constructor(t,e=1,n=16776960){const r=n,i=new Gn;i.setAttribute("position",new In([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new Xs({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const a=new Gn;a.setAttribute("position",new In([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),a.computeBoundingSphere(),this.add(new ar(a,new Tn({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}},PointLight:Bc,PointLightHelper:class extends ar{constructor(t,e,n){super(new Ll(e,4,2),new Tn({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},Points:ho,PointsMaterial:so,PolarGridHelper:class extends io{constructor(t=10,e=16,n=8,r=64,i=4473924,a=8947848){i=new Kt(i),a=new Kt(a);const s=[],o=[];for(let c=0;c<=e;c++){const n=c/e*(2*Math.PI),r=Math.sin(n)*t,l=Math.cos(n)*t;s.push(0,0,0),s.push(r,0,l);const u=1&c?i:a;o.push(u.r,u.g,u.b),o.push(u.r,u.g,u.b)}for(let c=0;c<=n;c++){const e=1&c?i:a,l=t-t/n*c;for(let t=0;t<r;t++){let n=t/r*(2*Math.PI),i=Math.sin(n)*l,a=Math.cos(n)*l;s.push(i,0,a),o.push(e.r,e.g,e.b),n=(t+1)/r*(2*Math.PI),i=Math.sin(n)*l,a=Math.cos(n)*l,s.push(i,0,a),o.push(e.r,e.g,e.b)}}const l=new Gn;l.setAttribute("position",new In(s,3)),l.setAttribute("color",new In(o,3));super(l,new Xs({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}},PolyhedronBufferGeometry:Ho,PolyhedronGeometry:Ho,PositionalAudio:class extends su{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(ou,lu,cu),uu.set(0,0,1).applyQuaternion(lu);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(ou.x,t),e.positionY.linearRampToValueAtTime(ou.y,t),e.positionZ.linearRampToValueAtTime(ou.z,t),e.orientationX.linearRampToValueAtTime(uu.x,t),e.orientationY.linearRampToValueAtTime(uu.y,t),e.orientationZ.linearRampToValueAtTime(uu.z,t)}else e.setPosition(ou.x,ou.y,ou.z),e.setOrientation(uu.x,uu.y,uu.z)}},PropertyBinding:vu,PropertyMixer:hu,QuadraticBezierCurve:Po,QuadraticBezierCurve3:Ro,Quaternion:ce,QuaternionKeyframeTrack:uc,QuaternionLinearInterpolant:cc,REVISION:i,RGBADepthPacking:gt,RGBAFormat:P,RGBAIntegerFormat:1033,RGBA_ASTC_10x10_Format:et,RGBA_ASTC_10x5_Format:K,RGBA_ASTC_10x6_Format:Q,RGBA_ASTC_10x8_Format:tt,RGBA_ASTC_12x10_Format:nt,RGBA_ASTC_12x12_Format:rt,RGBA_ASTC_4x4_Format:V,RGBA_ASTC_5x4_Format:W,RGBA_ASTC_5x5_Format:$,RGBA_ASTC_6x5_Format:Y,RGBA_ASTC_6x6_Format:q,RGBA_ASTC_8x5_Format:X,RGBA_ASTC_8x6_Format:J,RGBA_ASTC_8x8_Format:Z,RGBA_BPTC_Format:it,RGBA_ETC2_EAC_Format:j,RGBA_PVRTC_2BPPV1_Format:G,RGBA_PVRTC_4BPPV1_Format:U,RGBA_S3TC_DXT1_Format:B,RGBA_S3TC_DXT3_Format:O,RGBA_S3TC_DXT5_Format:N,RGBFormat:1022,RGB_ETC1_Format:36196,RGB_ETC2_Format:H,RGB_PVRTC_2BPPV1_Format:z,RGB_PVRTC_4BPPV1_Format:F,RGB_S3TC_DXT1_Format:D,RGFormat:1030,RGIntegerFormat:1031,RawShaderMaterial:zl,Ray:Ue,Raycaster:Eu,RectAreaLight:zc,RedFormat:1028,RedIntegerFormat:1029,ReinhardToneMapping:2,RepeatWrapping:g,ReplaceStencilOp:7681,ReverseSubtractEquation:102,RingBufferGeometry:Al,RingGeometry:Al,SRGBColorSpace:yt,Scene:cs,ShaderChunk:Ar,ShaderLib:Lr,ShaderMaterial:hr,ShadowMaterial:Fl,Shape:Xo,ShapeBufferGeometry:kl,ShapeGeometry:kl,ShapePath:class{constructor(){this.type="ShapePath",this.color=new Kt,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new Oo,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,i,a){return this.currentPath.bezierCurveTo(t,e,n,r,i,a),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t,e){function n(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n],i=new Xo;i.curves=r.curves,e.push(i)}return e}function r(t,e){const n=e.length;let r=!1;for(let i=n-1,a=0;a<n;i=a++){let n=e[i],s=e[a],o=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=e[a],o=-o,s=e[i],l=-l),t.y<n.y||t.y>s.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=l*(t.x-n.x)-o*(t.y-n.y);if(0===e)return!0;if(e<0)continue;r=!r}}else{if(t.y!==n.y)continue;if(s.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=s.x)return!0}}return r}const i=_l.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return n(a);let s,o,l;const c=[];if(1===a.length)return o=a[0],l=new Xo,l.curves=o.curves,c.push(l),c;let u=!i(a[0].getPoints());u=t?!u:u;const h=[],d=[];let f,p,m=[],g=0;d[g]=void 0,m[g]=[];for(let y=0,v=a.length;y<v;y++)o=a[y],f=o.getPoints(),s=i(f),s=t?!s:s,s?(!u&&d[g]&&g++,d[g]={s:new Xo,p:f},d[g].s.curves=o.curves,u&&g++,m[g]=[]):m[g].push({h:o,p:f[0]});if(!d[0])return n(a);if(d.length>1){let t=!1,e=0;for(let n=0,r=d.length;n<r;n++)h[n]=[];for(let n=0,i=d.length;n<i;n++){const i=m[n];for(let a=0;a<i.length;a++){const s=i[a];let o=!0;for(let i=0;i<d.length;i++)r(s.p,d[i].p)&&(n!==i&&e++,o?(o=!1,h[i].push(s)):t=!0);o&&h[n].push(s)}}e>0&&!1===t&&(m=h)}for(let y=0,v=d.length;y<v;y++){l=d[y].s,c.push(l),p=m[y];for(let t=0,e=p.length;t<e;t++)l.holes.push(p[t].h)}return c}},ShapeUtils:_l,ShortType:1011,Skeleton:Hs,SkeletonHelper:class extends io{constructor(t){const e=Ou(t),n=new Gn,r=[],i=[],a=new Kt(0,0,1),s=new Kt(0,1,0);for(let o=0;o<e.length;o++){const t=e[o];t.parent&&t.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(s.r,s.g,s.b))}n.setAttribute("position",new In(r,3)),n.setAttribute("color",new In(i,3));super(n,new Xs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");Bu.copy(this.root.matrixWorld).invert();for(let i=0,a=0;i<e.length;i++){const t=e[i];t.parent&&t.parent.isBone&&(Du.multiplyMatrices(Bu,t.matrixWorld),Iu.setFromMatrixPosition(Du),r.setXYZ(a,Iu.x,Iu.y,Iu.z),Du.multiplyMatrices(Bu,t.parent.matrixWorld),Iu.setFromMatrixPosition(Du),r.setXYZ(a+1,Iu.x,Iu.y,Iu.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}},SkinnedMesh:Ns,SmoothShading:2,Source:ee,Sphere:Re,SphereBufferGeometry:Ll,SphereGeometry:Ll,Spherical:Tu,SphericalHarmonics3:Uc,SplineCurve:Io,SpotLight:Lc,SpotLightHelper:class extends fn{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const n=new Gn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,s=1,o=32;a<o;a++,s++){const t=a/o*Math.PI*2,e=s/o*Math.PI*2;r.push(Math.cos(t),Math.sin(t),1,Math.cos(e),Math.sin(e),1)}n.setAttribute("position",new In(r,3));const i=new Xs({fog:!1,toneMapped:!1});this.cone=new io(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Ru.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ru),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Sprite:Ts,SpriteMaterial:fs,SrcAlphaFactor:l,SrcAlphaSaturateFactor:210,SrcColorFactor:202,StaticCopyUsage:35046,StaticDrawUsage:xt,StaticReadUsage:35045,StereoCamera:class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new fr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new fr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Qc.copy(t.projectionMatrix);const n=e.eyeSep/2,r=n*e.near/e.focus,i=e.near*Math.tan(Ct*e.fov*.5)/e.zoom;let a,s;Kc.elements[12]=-n,Zc.elements[12]=n,a=-i*e.aspect+r,s=i*e.aspect+r,Qc.elements[0]=2*e.near/(s-a),Qc.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(Qc),a=-i*e.aspect-r,s=i*e.aspect-r,Qc.elements[0]=2*e.near/(s-a),Qc.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(Qc)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Kc),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Zc)}},StreamCopyUsage:35042,StreamDrawUsage:35040,StreamReadUsage:35041,StringKeyframeTrack:hc,SubtractEquation:101,SubtractiveBlending:3,TOUCH:s,TangentSpaceNormalMap:0,TetrahedronBufferGeometry:Pl,TetrahedronGeometry:Pl,TextGeometry:class extends Gn{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}},Texture:ie,TextureLoader:class extends vc{constructor(t){super(t)}load(t,e,n,r){const i=new ie,a=new wc(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}},TorusBufferGeometry:Rl,TorusGeometry:Rl,TorusKnotBufferGeometry:Il,TorusKnotGeometry:Il,Triangle:En,TriangleFanDrawMode:2,TriangleStripDrawMode:1,TrianglesDrawMode:0,TubeBufferGeometry:Dl,TubeGeometry:Dl,UVMapping:u,Uint16BufferAttribute:Pn,Uint32BufferAttribute:Rn,Uint8BufferAttribute:class extends Ln{constructor(t,e,n){super(new Uint8Array(t),e,n)}},Uint8ClampedBufferAttribute:class extends Ln{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}},Uniform:_u,UniformsGroup:class extends St{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:wu++}),this.name="",this.usage=xt,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return-1!==e&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,r=e.length;n<r;n++)this.uniforms.push(e[n].clone());return this}clone(){return(new this.constructor).copy(this)}},UniformsLib:kr,UniformsUtils:ur,UnsignedByteType:M,UnsignedInt248Type:L,UnsignedIntType:T,UnsignedShort4444Type:1017,UnsignedShort5551Type:1018,UnsignedShortType:C,VSMShadowMap:3,Vector2:Ot,Vector3:ue,Vector4:ae,VectorKeyframeTrack:dc,VideoTexture:class extends ie{constructor(t,e,n,r,i,a,s,o,l){super(t,e,n,r,i,a,s,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:w,this.magFilter=void 0!==i?i:w,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t==!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},WebGL1Renderer:ss,WebGL3DRenderTarget:class extends se{constructor(t,e,n){super(t,e),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new le(null,t,e,n),this.texture.isRenderTargetTexture=!0}},WebGLArrayRenderTarget:class extends se{constructor(t,e,n){super(t,e),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new oe(null,t,e,n),this.texture.isRenderTargetTexture=!0}},WebGLCubeRenderTarget:yr,WebGLMultipleRenderTargets:class extends se{constructor(t,e,n,r={}){super(t,e,r),this.isWebGLMultipleRenderTargets=!0;const i=this.texture;this.texture=[];for(let a=0;a<n;a++)this.texture[a]=i.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=t,this.texture[r].image.height=e,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}},WebGLMultisampleRenderTarget:Qu,WebGLRenderTarget:se,WebGLRenderer:as,WebGLUtils:Ja,WireframeGeometry:Bl,WrapAroundEnding:ut,ZeroCurvatureEnding:lt,ZeroFactor:200,ZeroSlopeEnding:ct,ZeroStencilOp:0,_SRGBAFormat:wt,sRGBEncoding:pt},Symbol.toStringTag,{value:"Module"}));var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"?self:{};function nh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rh,ih={exports:{}},ah={};function sh(t){let e;const n=new Set,r=(t,r)=>{const i="function"==typeof t?t(e):t;if(i!==e){const t=e;e=r?i:Object.assign({},e,i),n.forEach((n=>n(e,t)))}},i=()=>e,a={setState:r,getState:i,subscribe:(t,r,a)=>r||a?((t,r=i,a=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=r(e);function o(){const n=r(e);if(!a(s,n)){const e=s;t(s=n,e)}}return n.add(o),()=>n.delete(o)})(t,r,a):(n.add(t),()=>n.delete(t)),destroy:()=>n.clear()};return e=t(r,i,a),a}ih.exports=(rh||(rh=1,ah.ConcurrentRoot=1,ah.ContinuousEventPriority=4,ah.DefaultEventPriority=16,ah.DiscreteEventPriority=1,ah.IdleEventPriority=536870912,ah.LegacyRoot=0),ah);const oh=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?r.useEffect:r.useLayoutEffect;var lh,ch={exports:{}},uh={exports:{}},hh={};var dh,fh;function ph(){return fh||(fh=1,dh=function(t){var e={},n=r,i=uh.exports,a=Object.assign;function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),_=Symbol.iterator;function w(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=_&&t[_]||t["@@iterator"])?t:null}function S(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case h:return"StrictMode";case g:return"Suspense";case y:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case p:return(t.displayName||"Context")+".Consumer";case f:return(t._context.displayName||"Context")+".Provider";case m:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case v:return null!==(e=t.displayName||null)?e:S(t.type)||"Memo";case b:e=t._payload,t=t._init;try{return S(t(e))}catch{}}return null}function E(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(e);case 8:return e===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e}return null}function M(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function C(t){if(M(t)!==t)throw Error(s(188))}function T(t){var e=t.alternate;if(!e){if(null===(e=M(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return C(i),t;if(a===r)return C(i),e;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}function A(t){return null!==(t=T(t))?k(t):null}function k(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=k(t);if(null!==e)return e;t=t.sibling}return null}function L(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){if(4!==t.tag){var e=L(t);if(null!==e)return e}t=t.sibling}return null}var P,R=Array.isArray,I=t.getPublicInstance,D=t.getRootHostContext,B=t.getChildHostContext,O=t.prepareForCommit,N=t.resetAfterCommit,F=t.createInstance,z=t.appendInitialChild,U=t.finalizeInitialChildren,G=t.prepareUpdate,H=t.shouldSetTextContent,j=t.createTextInstance,V=t.scheduleTimeout,W=t.cancelTimeout,$=t.noTimeout,Y=t.isPrimaryRenderer,q=t.supportsMutation,X=t.supportsPersistence,J=t.supportsHydration,Z=t.getInstanceFromNode,K=t.preparePortalMount,Q=t.getCurrentEventPriority,tt=t.detachDeletedInstance,et=t.supportsMicrotasks,nt=t.scheduleMicrotask,rt=t.supportsTestSelectors,it=t.findFiberRoot,at=t.getBoundingRect,st=t.getTextContent,ot=t.isHiddenSubtree,lt=t.matchAccessibilityRole,ct=t.setFocusIfFocusable,ut=t.setupIntersectionObserver,ht=t.appendChild,dt=t.appendChildToContainer,ft=t.commitTextUpdate,pt=t.commitMount,mt=t.commitUpdate,gt=t.insertBefore,yt=t.insertInContainerBefore,vt=t.removeChild,bt=t.removeChildFromContainer,xt=t.resetTextContent,_t=t.hideInstance,wt=t.hideTextInstance,St=t.unhideInstance,Et=t.unhideTextInstance,Mt=t.clearContainer,Ct=t.cloneInstance,Tt=t.createContainerChildSet,At=t.appendChildToContainerChildSet,kt=t.finalizeContainerChildren,Lt=t.replaceContainerChildren,Pt=t.cloneHiddenInstance,Rt=t.cloneHiddenTextInstance,It=t.canHydrateInstance,Dt=t.canHydrateTextInstance,Bt=t.canHydrateSuspenseInstance,Ot=t.isSuspenseInstancePending,Nt=t.isSuspenseInstanceFallback,Ft=t.registerSuspenseInstanceRetry,zt=t.getNextHydratableSibling,Ut=t.getFirstHydratableChild,Gt=t.getFirstHydratableChildWithinContainer,Ht=t.getFirstHydratableChildWithinSuspenseInstance,jt=t.hydrateInstance,Vt=t.hydrateTextInstance,Wt=t.hydrateSuspenseInstance,$t=t.getNextHydratableInstanceAfterSuspenseInstance,Yt=t.commitHydratedContainer,qt=t.commitHydratedSuspenseInstance,Xt=t.clearSuspenseBoundary,Jt=t.clearSuspenseBoundaryFromContainer,Zt=t.shouldDeleteUnhydratedTailInstances,Kt=t.didNotMatchHydratedContainerTextInstance,Qt=t.didNotMatchHydratedTextInstance;function te(t){if(void 0===P)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);P=e&&e[1]||""}return"\n"+P+t}var ee=!1;function ne(t,e){if(!t||ee)return"";ee=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=o);break}}}finally{ee=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?te(t):""}var re=Object.prototype.hasOwnProperty,ie=[],ae=-1;function se(t){return{current:t}}function oe(t){0>ae||(t.current=ie[ae],ie[ae]=null,ae--)}function le(t,e){ae++,ie[ae]=t.current,t.current=e}var ce={},ue=se(ce),he=se(!1),de=ce;function fe(t,e){var n=t.type.contextTypes;if(!n)return ce;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function pe(t){return null!=(t=t.childContextTypes)}function me(){oe(he),oe(ue)}function ge(t,e,n){if(ue.current!==ce)throw Error(s(168));le(ue,e),le(he,n)}function ye(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(s(108,E(t)||"Unknown",i));return a({},n,r)}function ve(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ce,de=ue.current,le(ue,t),le(he,he.current),!0}function be(t,e,n){var r=t.stateNode;if(!r)throw Error(s(169));n?(t=ye(t,e,de),r.__reactInternalMemoizedMergedChildContext=t,oe(he),oe(ue),le(ue,t)):oe(he),le(he,n)}var xe=Math.clz32?Math.clz32:function(t){return 0==(t>>>=0)?32:31-(_e(t)/we|0)|0},_e=Math.log,we=Math.LN2;var Se=64,Ee=4194304;function Me(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ce(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=Me(o):0!==(a&=s)&&(r=Me(a))}else 0!==(s=n&~i)?r=Me(s):0!==a&&(r=Me(a));if(0===r)return 0;if(0!==e&&e!==r&&0==(e&i)&&((i=r&-r)>=(a=e&-e)||16===i&&0!=(4194240&a)))return e;if(0!=(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-xe(e)),r|=t[n],e&=~i;return r}function Te(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function Ae(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ke(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Le(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-xe(e)]=n}function Pe(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xe(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Re=0;function Ie(t){return 1<(t&=-t)?4<t?0!=(268435455&t)?16:536870912:4:1}var De=i.unstable_scheduleCallback,Be=i.unstable_cancelCallback,Oe=i.unstable_shouldYield,Ne=i.unstable_requestPaint,Fe=i.unstable_now,ze=i.unstable_ImmediatePriority,Ue=i.unstable_UserBlockingPriority,Ge=i.unstable_NormalPriority,He=i.unstable_IdlePriority,je=null,Ve=null;var We="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},$e=null,Ye=!1,qe=!1;function Xe(t){null===$e?$e=[t]:$e.push(t)}function Je(){if(!qe&&null!==$e){qe=!0;var t=0,e=Re;try{var n=$e;for(Re=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}$e=null,Ye=!1}catch(i){throw null!==$e&&($e=$e.slice(t+1)),De(ze,Je),i}finally{Re=e,qe=!1}}return null}var Ze=o.ReactCurrentBatchConfig;function Ke(t,e){if(We(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(e,i)||!We(t[i],e[i]))return!1}return!0}function Qe(t){switch(t.tag){case 5:return te(t.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return t=ne(t.type,!1);case 11:return t=ne(t.type.render,!1);case 1:return t=ne(t.type,!0);default:return""}}function tn(t,e){if(t&&t.defaultProps){for(var n in e=a({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var en=se(null),nn=null,rn=null,an=null;function sn(){an=rn=nn=null}function on(t,e,n){Y?(le(en,e._currentValue),e._currentValue=n):(le(en,e._currentValue2),e._currentValue2=n)}function ln(t){var e=en.current;oe(en),Y?t._currentValue=e:t._currentValue2=e}function cn(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function un(t,e){nn=t,an=rn=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&e)&&(Oi=!0),t.firstContext=null)}function hn(t){var e=Y?t._currentValue:t._currentValue2;if(an!==t)if(t={context:t,memoizedValue:e,next:null},null===rn){if(null===nn)throw Error(s(308));rn=t,nn.dependencies={lanes:0,firstContext:t}}else rn=rn.next=t;return e}var dn=null,fn=!1;function pn(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mn(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yn(t,e){var n=t.updateQueue;null!==n&&(n=n.shared,null!==qa&&0!=(1&t.mode)&&0==(2&Ya)?(null===(t=n.interleaved)?(e.next=e,null===dn?dn=[n]:dn.push(n)):(e.next=t.next,t.next=e),n.interleaved=e):(null===(t=n.pending)?e.next=e:(e.next=t.next,t.next=e),n.pending=e))}function vn(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!=(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,Pe(t,n)}}function bn(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=e:a=a.next=e}else i=a=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xn(t,e,n,r){var i=t.updateQueue;fn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var c=l,u=c.next;c.next=null,null===o?s=u:o.next=u,o=c;var h=t.alternate;null!==h&&((l=(h=h.updateQueue).lastBaseUpdate)!==o&&(null===l?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(null!==s){var d=i.baseState;for(o=0,h=u=c=null,l=s;;){var f=l.lane,p=l.eventTime;if((r&f)===f){null!==h&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var m=t,g=l;switch(f=e,p=n,g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(p,d,f);break t}d=m;break t;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(f="function"==typeof(m=g.payload)?m.call(p,d,f):m))break t;d=a({},d,f);break t;case 2:fn=!0}}null!==l.callback&&0!==l.lane&&(t.flags|=64,null===(f=i.effects)?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(u=h=p,c=d):h=h.next=p,o|=f;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(f=l).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===h&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,null!==(e=i.shared.interleaved)){i=e;do{o|=i.lane,i=i.next}while(i!==e)}else null===s&&(i.shared.lanes=0);es|=o,t.lanes=o,t.memoizedState=d}}function _n(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var wn=(new n.Component).refs;function Sn(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:a({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var En={isMounted:function(t){return!!(t=t._reactInternals)&&M(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xs(),i=_s(t),a=gn(r,i);a.payload=e,null!=n&&(a.callback=n),yn(t,a),null!==(e=ws(t,i,r))&&vn(e,t,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xs(),i=_s(t),a=gn(r,i);a.tag=1,a.payload=e,null!=n&&(a.callback=n),yn(t,a),null!==(e=ws(t,i,r))&&vn(e,t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xs(),r=_s(t),i=gn(n,r);i.tag=2,null!=e&&(i.callback=e),yn(t,i),null!==(e=ws(t,r,n))&&vn(e,t,r)}};function Mn(t,e,n,r,i,a,s){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,a,s):!e.prototype||!e.prototype.isPureReactComponent||(!Ke(n,r)||!Ke(i,a))}function Cn(t,e,n){var r=!1,i=ce,a=e.contextType;return"object"==typeof a&&null!==a?a=hn(a):(i=pe(e)?de:ue.current,a=(r=null!=(r=e.contextTypes))?fe(t,i):ce),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=En,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Tn(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&En.enqueueReplaceState(e,e.state,null)}function An(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=wn,pn(t);var a=e.contextType;"object"==typeof a&&null!==a?i.context=hn(a):(a=pe(e)?de:ue.current,i.context=fe(t,a)),i.state=t.memoizedState,"function"==typeof(a=e.getDerivedStateFromProps)&&(Sn(t,e,a,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&En.enqueueReplaceState(i,i.state,null),xn(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308)}var kn=[],Ln=0,Pn=null,Rn=0,In=[],Dn=0,Bn=null,On=1,Nn="";function Fn(t,e){kn[Ln++]=Rn,kn[Ln++]=Pn,Pn=t,Rn=e}function zn(t,e,n){In[Dn++]=On,In[Dn++]=Nn,In[Dn++]=Bn,Bn=t;var r=On;t=Nn;var i=32-xe(r)-1;r&=~(1<<i),n+=1;var a=32-xe(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,On=1<<32-xe(e)+i|n<<i|r,Nn=a+t}else On=1<<a|n<<i|r,Nn=t}function Un(t){null!==t.return&&(Fn(t,1),zn(t,1,0))}function Gn(t){for(;t===Pn;)Pn=kn[--Ln],kn[Ln]=null,Rn=kn[--Ln],kn[Ln]=null;for(;t===Bn;)Bn=In[--Dn],In[Dn]=null,Nn=In[--Dn],In[Dn]=null,On=In[--Dn],In[Dn]=null}var Hn=null,jn=null,Vn=!1,Wn=!1,$n=null;function Yn(t,e){var n=Zs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function qn(t,e){switch(t.tag){case 5:return null!==(e=It(e,t.type,t.pendingProps))&&(t.stateNode=e,Hn=t,jn=Ut(e),!0);case 6:return null!==(e=Dt(e,t.pendingProps))&&(t.stateNode=e,Hn=t,jn=null,!0);case 13:if(null!==(e=Bt(e))){var n=null!==Bn?{id:On,overflow:Nn}:null;return t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Zs(18,null,null,0)).stateNode=e,n.return=t,t.child=n,Hn=t,jn=null,!0}return!1;default:return!1}}function Xn(t){return 0!=(1&t.mode)&&0==(128&t.flags)}function Jn(t){if(Vn){var e=jn;if(e){var n=e;if(!qn(t,e)){if(Xn(t))throw Error(s(418));e=zt(n);var r=Hn;e&&qn(t,e)?Yn(r,n):(t.flags=-4097&t.flags|2,Vn=!1,Hn=t)}}else{if(Xn(t))throw Error(s(418));t.flags=-4097&t.flags|2,Vn=!1,Hn=t}}}function Zn(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Hn=t}function Kn(t){if(!J||t!==Hn)return!1;if(!Vn)return Zn(t),Vn=!0,!1;if(3!==t.tag&&(5!==t.tag||Zt(t.type)&&!H(t.type,t.memoizedProps))){var e=jn;if(e){if(Xn(t)){for(t=jn;t;)t=zt(t);throw Error(s(418))}for(;e;)Yn(t,e),e=zt(e)}}if(Zn(t),13===t.tag){if(!J)throw Error(s(316));if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));jn=$t(t)}else jn=Hn?zt(t.stateNode):null;return!0}function Qn(){J&&(jn=Hn=null,Wn=Vn=!1)}function tr(t){null===$n?$n=[t]:$n.push(t)}function er(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,t));var i=r,a=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===a?e.ref:((e=function(t){var e=i.refs;e===wn&&(e=i.refs={}),null===t?delete e[a]:e[a]=t})._stringRef=a,e)}if("string"!=typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function nr(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rr(t){return(0,t._init)(t._payload)}function ir(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Qs(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function h(t,e,n,r){return null===e||6!==e.tag?((e=ro(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n,r){var a=n.type;return a===u?p(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===b&&rr(a)===e.type)?((r=i(e,n.props)).ref=er(t,e,n),r.return=t,r):((r=to(n.type,n.key,n.props,null,t.mode,r)).ref=er(t,e,n),r.return=t,r)}function f(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=io(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function p(t,e,n,r,a){return null===e||7!==e.tag?((e=eo(n,t.mode,r,a)).return=t,e):((e=i(e,n)).return=t,e)}function m(t,e,n){if("string"==typeof e&&""!==e||"number"==typeof e)return(e=ro(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case l:return(n=to(e.type,e.key,e.props,null,t.mode,n)).ref=er(t,null,e),n.return=t,n;case c:return(e=io(e,t.mode,n)).return=t,e;case b:return m(t,(0,e._init)(e._payload),n)}if(R(e)||w(e))return(e=eo(e,t.mode,n,null)).return=t,e;nr(t,e)}return null}function g(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:h(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?d(t,e,n,r):null;case c:return n.key===i?f(t,e,n,r):null;case b:return g(t,e,(i=n._init)(n._payload),r)}if(R(n)||w(n))return null!==i?null:p(t,e,n,r,null);nr(t,n)}return null}function y(t,e,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return h(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case l:return d(e,t=t.get(null===r.key?n:r.key)||null,r,i);case c:return f(e,t=t.get(null===r.key?n:r.key)||null,r,i);case b:return y(t,e,n,(0,r._init)(r._payload),i)}if(R(r)||w(r))return p(e,t=t.get(n)||null,r,i,null);nr(e,r)}return null}return function h(d,f,p,v){if("object"==typeof p&&null!==p&&p.type===u&&null===p.key&&(p=p.props.children),"object"==typeof p&&null!==p){switch(p.$$typeof){case l:t:{for(var x=p.key,_=f;null!==_;){if(_.key===x){if((x=p.type)===u){if(7===_.tag){n(d,_.sibling),(f=i(_,p.props.children)).return=d,d=f;break t}}else if(_.elementType===x||"object"==typeof x&&null!==x&&x.$$typeof===b&&rr(x)===_.type){n(d,_.sibling),(f=i(_,p.props)).ref=er(d,_,p),f.return=d,d=f;break t}n(d,_);break}e(d,_),_=_.sibling}p.type===u?((f=eo(p.props.children,d.mode,v,p.key)).return=d,d=f):((v=to(p.type,p.key,p.props,null,d.mode,v)).ref=er(d,f,p),v.return=d,d=v)}return o(d);case c:t:{for(_=p.key;null!==f;){if(f.key===_){if(4===f.tag&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){n(d,f.sibling),(f=i(f,p.children||[])).return=d,d=f;break t}n(d,f);break}e(d,f),f=f.sibling}(f=io(p,d.mode,v)).return=d,d=f}return o(d);case b:return h(d,f,(_=p._init)(p._payload),v)}if(R(p))return function(i,s,o,l){for(var c=null,u=null,h=s,d=s=0,f=null;null!==h&&d<o.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=g(i,h,o[d],l);if(null===p){null===h&&(h=f);break}t&&h&&null===p.alternate&&e(i,h),s=a(p,s,d),null===u?c=p:u.sibling=p,u=p,h=f}if(d===o.length)return n(i,h),Vn&&Fn(i,d),c;if(null===h){for(;d<o.length;d++)null!==(h=m(i,o[d],l))&&(s=a(h,s,d),null===u?c=h:u.sibling=h,u=h);return Vn&&Fn(i,d),c}for(h=r(i,h);d<o.length;d++)null!==(f=y(h,i,d,o[d],l))&&(t&&null!==f.alternate&&h.delete(null===f.key?d:f.key),s=a(f,s,d),null===u?c=f:u.sibling=f,u=f);return t&&h.forEach((function(t){return e(i,t)})),Vn&&Fn(i,d),c}(d,f,p,v);if(w(p))return function(i,o,l,c){var u=w(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,d=o,f=o=0,p=null,v=l.next();null!==d&&!v.done;f++,v=l.next()){d.index>f?(p=d,d=null):p=d.sibling;var b=g(i,d,v.value,c);if(null===b){null===d&&(d=p);break}t&&d&&null===b.alternate&&e(i,d),o=a(b,o,f),null===h?u=b:h.sibling=b,h=b,d=p}if(v.done)return n(i,d),Vn&&Fn(i,f),u;if(null===d){for(;!v.done;f++,v=l.next())null!==(v=m(i,v.value,c))&&(o=a(v,o,f),null===h?u=v:h.sibling=v,h=v);return Vn&&Fn(i,f),u}for(d=r(i,d);!v.done;f++,v=l.next())null!==(v=y(d,i,f,v.value,c))&&(t&&null!==v.alternate&&d.delete(null===v.key?f:v.key),o=a(v,o,f),null===h?u=v:h.sibling=v,h=v);return t&&d.forEach((function(t){return e(i,t)})),Vn&&Fn(i,f),u}(d,f,p,v);nr(d,p)}return"string"==typeof p&&""!==p||"number"==typeof p?(p=""+p,null!==f&&6===f.tag?(n(d,f.sibling),(f=i(f,p)).return=d,d=f):(n(d,f),(f=ro(p,d.mode,v)).return=d,d=f),o(d)):n(d,f)}}var ar=ir(!0),sr=ir(!1),or={},lr=se(or),cr=se(or),ur=se(or);function hr(t){if(t===or)throw Error(s(174));return t}function dr(t,e){le(ur,e),le(cr,t),le(lr,or),t=D(e),oe(lr),le(lr,t)}function fr(){oe(lr),oe(cr),oe(ur)}function pr(t){var e=hr(ur.current),n=hr(lr.current);n!==(e=B(n,t.type,e))&&(le(cr,t),le(lr,e))}function mr(t){cr.current===t&&(oe(lr),oe(cr))}var gr=se(0);function yr(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ot(n)||Nt(n)))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vr=[];function br(){for(var t=0;t<vr.length;t++){var e=vr[t];Y?e._workInProgressVersionPrimary=null:e._workInProgressVersionSecondary=null}vr.length=0}var xr=o.ReactCurrentDispatcher,_r=o.ReactCurrentBatchConfig,wr=0,Sr=null,Er=null,Mr=null,Cr=!1,Tr=!1,Ar=0,kr=0;function Lr(){throw Error(s(321))}function Pr(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!We(t[n],e[n]))return!1;return!0}function Rr(t,e,n,r,i,a){if(wr=a,Sr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xr.current=null===t||null===t.memoizedState?pi:mi,t=n(r,i),Tr){a=0;do{if(Tr=!1,Ar=0,25<=a)throw Error(s(301));a+=1,Mr=Er=null,e.updateQueue=null,xr.current=gi,t=n(r,i)}while(Tr)}if(xr.current=fi,e=null!==Er&&null!==Er.next,wr=0,Mr=Er=Sr=null,Cr=!1,e)throw Error(s(300));return t}function Ir(){var t=0!==Ar;return Ar=0,t}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Mr?Sr.memoizedState=Mr=t:Mr=Mr.next=t,Mr}function Br(){if(null===Er){var t=Sr.alternate;t=null!==t?t.memoizedState:null}else t=Er.next;var e=null===Mr?Sr.memoizedState:Mr.next;if(null!==e)Mr=e,Er=t;else{if(null===t)throw Error(s(310));t={memoizedState:(Er=t).memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},null===Mr?Sr.memoizedState=Mr=t:Mr=Mr.next=t}return Mr}function Or(t,e){return"function"==typeof e?e(t):e}function Nr(t){var e=Br(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=Er,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((wr&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,Sr.lanes|=h,es|=h}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,We(r,e.memoizedState)||(Oi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{a=i.lane,Sr.lanes|=a,es|=a,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fr(t){var e=Br(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=t(a,o.action),o=o.next}while(o!==i);We(a,e.memoizedState)||(Oi=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function zr(){}function Ur(t,e){var n=Sr,r=Br(),i=e(),a=!We(r.memoizedState,i);if(a&&(r.memoizedState=i,Oi=!0),r=r.queue,Zr(jr.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||null!==Mr&&1&Mr.memoizedState.tag){if(n.flags|=2048,$r(9,Hr.bind(null,n,r,i,e),void 0,null),null===qa)throw Error(s(349));0!=(30&wr)||Gr(n,e,i)}return i}function Gr(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=Sr.updateQueue)?(e={lastEffect:null,stores:null},Sr.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Hr(t,e,n,r){e.value=n,e.getSnapshot=r,Vr(e)&&ws(t,1,-1)}function jr(t,e,n){return n((function(){Vr(e)&&ws(t,1,-1)}))}function Vr(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!We(t,n)}catch{return!0}}function Wr(t){var e=Dr();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:t},e.queue=t,t=t.dispatch=li.bind(null,Sr,t),[e.memoizedState,t]}function $r(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Sr.updateQueue)?(e={lastEffect:null,stores:null},Sr.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Yr(){return Br().memoizedState}function qr(t,e,n,r){var i=Dr();Sr.flags|=t,i.memoizedState=$r(1|e,n,void 0,void 0===r?null:r)}function Xr(t,e,n,r){var i=Br();r=void 0===r?null:r;var a=void 0;if(null!==Er){var s=Er.memoizedState;if(a=s.destroy,null!==r&&Pr(r,s.deps))return void(i.memoizedState=$r(e,n,a,r))}Sr.flags|=t,i.memoizedState=$r(1|e,n,a,r)}function Jr(t,e){return qr(8390656,8,t,e)}function Zr(t,e){return Xr(2048,8,t,e)}function Kr(t,e){return Xr(4,2,t,e)}function Qr(t,e){return Xr(4,4,t,e)}function ti(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ei(t,e,n){return n=null!=n?n.concat([t]):null,Xr(4,4,ti.bind(null,e,t),n)}function ni(){}function ri(t,e){var n=Br();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Pr(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ii(t,e){var n=Br();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Pr(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ai(t,e){var n=Re;Re=0!==n&&4>n?n:4,t(!0);var r=_r.transition;_r.transition={};try{t(!1),e()}finally{Re=n,_r.transition=r}}function si(){return Br().memoizedState}function oi(t,e,n){var r=_s(t);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ci(t)?ui(e,n):(hi(t,e,n),null!==(t=ws(t,r,n=xs()))&&di(t,e,r))}function li(t,e,n){var r=_s(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ci(t))ui(e,i);else{hi(t,e,i);var a=t.alternate;if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,We(o,s))return}catch{}null!==(t=ws(t,r,n=xs()))&&di(t,e,r)}}function ci(t){var e=t.alternate;return t===Sr||null!==e&&e===Sr}function ui(t,e){Tr=Cr=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hi(t,e,n){null!==qa&&0!=(1&t.mode)&&0==(2&Ya)?(null===(t=e.interleaved)?(n.next=n,null===dn?dn=[e]:dn.push(e)):(n.next=t.next,t.next=n),e.interleaved=n):(null===(t=e.pending)?n.next=n:(n.next=t.next,t.next=n),e.pending=n)}function di(t,e,n){if(0!=(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,Pe(t,n)}}var fi={readContext:hn,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},pi={readContext:hn,useCallback:function(t,e){return Dr().memoizedState=[t,void 0===e?null:e],t},useContext:hn,useEffect:Jr,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,qr(4194308,4,ti.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qr(4194308,4,t,e)},useInsertionEffect:function(t,e){return qr(4,2,t,e)},useMemo:function(t,e){var n=Dr();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dr();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=oi.bind(null,Sr,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Dr().memoizedState=t},useState:Wr,useDebugValue:ni,useDeferredValue:function(t){var e=Wr(t),n=e[0],r=e[1];return Jr((function(){var e=_r.transition;_r.transition={};try{r(t)}finally{_r.transition=e}}),[t]),n},useTransition:function(){var t=Wr(!1),e=t[0];return t=ai.bind(null,t[1]),Dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Sr,i=Dr();if(Vn){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===qa)throw Error(s(349));0!=(30&wr)||Gr(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Jr(jr.bind(null,r,a,t),[t]),r.flags|=2048,$r(9,Hr.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Dr(),e=qa.identifierPrefix;if(Vn){var n=Nn;e=":"+e+"R"+(n=(On&~(1<<32-xe(On)-1)).toString(32)+n),0<(n=Ar++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=kr++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mi={readContext:hn,useCallback:ri,useContext:hn,useEffect:Zr,useImperativeHandle:ei,useInsertionEffect:Kr,useLayoutEffect:Qr,useMemo:ii,useReducer:Nr,useRef:Yr,useState:function(){return Nr(Or)},useDebugValue:ni,useDeferredValue:function(t){var e=Nr(Or),n=e[0],r=e[1];return Zr((function(){var e=_r.transition;_r.transition={};try{r(t)}finally{_r.transition=e}}),[t]),n},useTransition:function(){return[Nr(Or)[0],Br().memoizedState]},useMutableSource:zr,useSyncExternalStore:Ur,useId:si,unstable_isNewReconciler:!1},gi={readContext:hn,useCallback:ri,useContext:hn,useEffect:Zr,useImperativeHandle:ei,useInsertionEffect:Kr,useLayoutEffect:Qr,useMemo:ii,useReducer:Fr,useRef:Yr,useState:function(){return Fr(Or)},useDebugValue:ni,useDeferredValue:function(t){var e=Fr(Or),n=e[0],r=e[1];return Zr((function(){var e=_r.transition;_r.transition={};try{r(t)}finally{_r.transition=e}}),[t]),n},useTransition:function(){return[Fr(Or)[0],Br().memoizedState]},useMutableSource:zr,useSyncExternalStore:Ur,useId:si,unstable_isNewReconciler:!1};function yi(t,e){try{var n="",r=e;do{n+=Qe(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:t,source:e,stack:i}}function vi(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var bi,xi,_i,wi,Si="function"==typeof WeakMap?WeakMap:Map;function Ei(t,e,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){us||(us=!0,hs=r),vi(0,e)},n}function Mi(t,e,n){(n=gn(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vi(0,e)}}var a=t.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){vi(0,e),"function"!=typeof r&&(null===ds?ds=new Set([this]):ds.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function Ci(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new Si;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ws.bind(null,t,e,n),e.then(t,t))}function Ti(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function Ai(t,e,n,r,i){return 0==(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=gn(-1,1)).tag=2,yn(n,e))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}function ki(t){t.flags|=4}function Li(t,e){if(null!==t&&t.child===e.child)return!0;if(0!=(16&e.flags))return!1;for(t=e.child;null!==t;){if(0!=(12854&t.flags)||0!=(12854&t.subtreeFlags))return!1;t=t.sibling}return!0}if(q)bi=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)z(t,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},xi=function(){},_i=function(t,e,n,r,i){if((t=t.memoizedProps)!==r){var a=e.stateNode,s=hr(lr.current);n=G(a,n,t,r,i,s),(e.updateQueue=n)&&ki(e)}},wi=function(t,e,n,r){n!==r&&ki(e)};else if(X){bi=function(t,e,n,r){for(var i=e.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Pt(a,i.type,i.memoizedProps,i)),z(t,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=Rt(a,i.memoizedProps,i)),z(t,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),bi(t,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Pi=function(t,e,n,r){for(var i=e.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Pt(a,i.type,i.memoizedProps,i)),At(t,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=Rt(a,i.memoizedProps,i)),At(t,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),Pi(t,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};xi=function(t,e){var n=e.stateNode;if(!Li(t,e)){t=n.containerInfo;var r=Tt(t);Pi(r,e,!1,!1),n.pendingChildren=r,ki(e),kt(t,r)}},_i=function(t,e,n,r,i){var a=t.stateNode,s=t.memoizedProps;if((t=Li(t,e))&&s===r)e.stateNode=a;else{var o=e.stateNode,l=hr(lr.current),c=null;s!==r&&(c=G(o,n,s,r,i,l)),t&&null===c?e.stateNode=a:(a=Ct(a,c,n,s,r,e,t,o),U(a,n,r,i,l)&&ki(e),e.stateNode=a,t?ki(e):bi(a,e,!1,!1))}},wi=function(t,e,n,r){n!==r?(t=hr(ur.current),n=hr(lr.current),e.stateNode=j(r,t,n,e),ki(e)):e.stateNode=t.stateNode}}else xi=function(){},_i=function(){},wi=function(){};function Ri(t,e){if(!Vn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ii(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Di(t,e,n){var r=e.pendingProps;switch(Gn(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ii(e),null;case 1:case 17:return pe(e.type)&&me(),Ii(e),null;case 3:return r=e.stateNode,fr(),oe(he),oe(ue),br(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(null===t||null===t.child)&&(Kn(e)?ki(e):null===t||t.memoizedState.isDehydrated&&0==(256&e.flags)||(e.flags|=1024,null!==$n&&(Ts($n),$n=null))),xi(t,e),Ii(e),null;case 5:mr(e),n=hr(ur.current);var i=e.type;if(null!==t&&null!=e.stateNode)_i(t,e,i,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(s(166));return Ii(e),null}if(t=hr(lr.current),Kn(e)){if(!J)throw Error(s(175));t=jt(e.stateNode,e.type,e.memoizedProps,n,t,e,!Wn),e.updateQueue=t,null!==t&&ki(e)}else{var a=F(i,r,n,t,e);bi(a,e,!1,!1),e.stateNode=a,U(a,i,r,n,t)&&ki(e)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ii(e),null;case 6:if(t&&null!=e.stateNode)wi(t,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(s(166));if(t=hr(ur.current),n=hr(lr.current),Kn(e)){if(!J)throw Error(s(176));if(t=e.stateNode,r=e.memoizedProps,(n=Vt(t,r,e,!Wn))&&null!==(i=Hn))switch(a=0!=(1&i.mode),i.tag){case 3:Kt(i.stateNode.containerInfo,t,r,a);break;case 5:Qt(i.type,i.memoizedProps,i.stateNode,t,r,a)}n&&ki(e)}else e.stateNode=j(r,t,n,e)}return Ii(e),null;case 13:if(oe(gr),r=e.memoizedState,Vn&&null!==jn&&0!=(1&e.mode)&&0==(128&e.flags)){for(t=jn;t;)t=zt(t);return Qn(),e.flags|=98560,e}if(null!==r&&null!==r.dehydrated){if(r=Kn(e),null===t){if(!r)throw Error(s(318));if(!J)throw Error(s(344));if(!(t=null!==(t=e.memoizedState)?t.dehydrated:null))throw Error(s(317));Wt(t,e)}else Qn(),0==(128&e.flags)&&(e.memoizedState=null),e.flags|=4;return Ii(e),null}return null!==$n&&(Ts($n),$n=null),0!=(128&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?Kn(e):n=null!==t.memoizedState,r&&!n&&(e.child.flags|=8192,0!=(1&e.mode)&&(null===t||0!=(1&gr.current)?0===Qa&&(Qa=3):Bs())),null!==e.updateQueue&&(e.flags|=4),Ii(e),null);case 4:return fr(),xi(t,e),null===t&&K(e.stateNode.containerInfo),Ii(e),null;case 10:return ln(e.type._context),Ii(e),null;case 19:if(oe(gr),null===(i=e.memoizedState))return Ii(e),null;if(r=0!=(128&e.flags),null===(a=i.rendering))if(r)Ri(i,!1);else{if(0!==Qa||null!==t&&0!=(128&t.flags))for(t=e.child;null!==t;){if(null!==(a=yr(t))){for(e.flags|=128,Ri(i,!1),null!==(t=a.updateQueue)&&(e.updateQueue=t,e.flags|=4),e.subtreeFlags=0,t=n,r=e.child;null!==r;)i=t,(n=r).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return le(gr,1&gr.current|2),e.child}t=t.sibling}null!==i.tail&&Fe()>os&&(e.flags|=128,r=!0,Ri(i,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=yr(a))){if(e.flags|=128,r=!0,null!==(t=t.updateQueue)&&(e.updateQueue=t,e.flags|=4),Ri(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!Vn)return Ii(e),null}else 2*Fe()-i.renderingStartTime>os&&1073741824!==n&&(e.flags|=128,r=!0,Ri(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(null!==(t=i.last)?t.sibling=a:e.child=a,i.last=a)}return null!==i.tail?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,t=gr.current,le(gr,r?1&t|2:1&t),e):(Ii(e),null);case 22:case 23:return Ps(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!=(1&e.mode)?0!=(1073741824&Za)&&(Ii(e),q&&6&e.subtreeFlags&&(e.flags|=8192)):Ii(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}var Bi=o.ReactCurrentOwner,Oi=!1;function Ni(t,e,n,r){e.child=null===t?sr(e,null,n,r):ar(e,t.child,n,r)}function Fi(t,e,n,r,i){n=n.render;var a=e.ref;return un(e,i),r=Rr(t,e,n,r,a,i),n=Ir(),null===t||Oi?(Vn&&n&&Un(e),e.flags|=1,Ni(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ia(t,e,i))}function zi(t,e,n,r,i){if(null===t){var a=n.type;return"function"!=typeof a||Ks(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=to(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Ui(t,e,a,r,i))}if(a=t.child,0==(t.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:Ke)(s,r)&&t.ref===e.ref)return ia(t,e,i)}return e.flags|=1,(t=Qs(a,r)).ref=e.ref,t.return=e,e.child=t}function Ui(t,e,n,r,i){if(null!==t&&Ke(t.memoizedProps,r)&&t.ref===e.ref){if(Oi=!1,0==(t.lanes&i))return e.lanes=t.lanes,ia(t,e,i);0!=(131072&t.flags)&&(Oi=!0)}return ji(t,e,n,r,i)}function Gi(t,e,n){var r=e.pendingProps,i=r.children,a=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0==(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null},le(Ka,Za),Za|=n;else{if(0==(1073741824&n))return t=null!==a?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null},e.updateQueue=null,le(Ka,Za),Za|=t,null;e.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,le(Ka,Za),Za|=r}else null!==a?(r=a.baseLanes|n,e.memoizedState=null):r=n,le(Ka,Za),Za|=r;return Ni(t,e,i,n),e.child}function Hi(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ji(t,e,n,r,i){var a=pe(n)?de:ue.current;return a=fe(e,a),un(e,i),n=Rr(t,e,n,r,a,i),r=Ir(),null===t||Oi?(Vn&&r&&Un(e),e.flags|=1,Ni(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ia(t,e,i))}function Vi(t,e,n,r,i){if(pe(n)){var a=!0;ve(e)}else a=!1;if(un(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),Cn(e,n,r),An(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=hn(c):c=fe(e,c=pe(n)?de:ue.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==r||l!==c)&&Tn(e,s,r,c),fn=!1;var d=e.memoizedState;s.state=d,xn(e,r,s,i),l=e.memoizedState,o!==r||d!==l||he.current||fn?("function"==typeof u&&(Sn(e,n,u,r),l=e.memoizedState),(o=fn||Mn(e,n,o,r,d,l,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(e.flags|=4194308)):("function"==typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"==typeof s.componentDidMount&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,mn(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:tn(e.type,o),s.props=c,h=e.pendingProps,d=s.context,"object"==typeof(l=n.contextType)&&null!==l?l=hn(l):l=fe(e,l=pe(n)?de:ue.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==h||d!==l)&&Tn(e,s,r,l),fn=!1,d=e.memoizedState,s.state=d,xn(e,r,s,i);var p=e.memoizedState;o!==h||d!==p||he.current||fn?("function"==typeof f&&(Sn(e,n,f,r),p=e.memoizedState),(c=fn||Mn(e,n,c,r,d,p,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof s.componentDidUpdate&&(e.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Wi(t,e,n,r,a,i)}function Wi(t,e,n,r,i,a){Hi(t,e);var s=0!=(128&e.flags);if(!r&&!s)return i&&be(e,n,!1),ia(t,e,a);r=e.stateNode,Bi.current=e;var o=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=ar(e,t.child,null,a),e.child=ar(e,null,o,a)):Ni(t,e,o,a),e.memoizedState=r.state,i&&be(e,n,!0),e.child}function $i(t){var e=t.stateNode;e.pendingContext?ge(0,e.pendingContext,e.pendingContext!==e.context):e.context&&ge(0,e.context,!1),dr(t,e.containerInfo)}function Yi(t,e,n,r,i){return Qn(),tr(i),e.flags|=256,Ni(t,e,n,r),e.child}var qi={dehydrated:null,treeContext:null,retryLane:0};function Xi(t){return{baseLanes:t,cachePool:null}}function Ji(t,e,n){var r,i=e.pendingProps,a=gr.current,o=!1,l=0!=(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!=(2&a)),r?(o=!0,e.flags&=-129):(null===t||null!==t.memoizedState)&&(a|=1),le(gr,1&a),null===t)return Jn(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0==(1&e.mode)?e.lanes=1:Nt(t)?e.lanes=8:e.lanes=1073741824,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},0==(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=a):o=no(a,i,0,null),t=eo(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Xi(n),e.memoizedState=qi,t):Zi(e,a));if(null!==(a=t.memoizedState)){if(null!==(r=a.dehydrated)){if(l)return 256&e.flags?(e.flags&=-257,ta(t,e,n,Error(s(422)))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=i.fallback,a=e.mode,i=no({mode:"visible",children:i.children},a,0,null),(o=eo(o,a,n,null)).flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,0!=(1&e.mode)&&ar(e,t.child,null,n),e.child.memoizedState=Xi(n),e.memoizedState=qi,o);if(0==(1&e.mode))e=ta(t,e,n,null);else if(Nt(r))e=ta(t,e,n,Error(s(419)));else if(i=0!=(n&t.childLanes),Oi||i){if(null!==(i=qa)){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(i=0!=(o&(i.suspendedLanes|n))?0:o)&&i!==a.retryLane&&(a.retryLane=i,ws(t,i,-1))}Bs(),e=ta(t,e,n,Error(s(421)))}else Ot(r)?(e.flags|=128,e.child=t.child,e=Ys.bind(null,t),Ft(r,e),e=null):(n=a.treeContext,J&&(jn=Ht(r),Hn=e,Vn=!0,$n=null,Wn=!1,null!==n&&(In[Dn++]=On,In[Dn++]=Nn,In[Dn++]=Bn,On=n.id,Nn=n.overflow,Bn=e)),(e=Zi(e,e.pendingProps.children)).flags|=4096);return e}return o?(i=Qi(t,e,i.children,i.fallback,n),o=e.child,a=t.child.memoizedState,o.memoizedState=null===a?Xi(n):{baseLanes:a.baseLanes|n,cachePool:null},o.childLanes=t.childLanes&~n,e.memoizedState=qi,i):(n=Ki(t,e,i.children,n),e.memoizedState=null,n)}return o?(i=Qi(t,e,i.children,i.fallback,n),o=e.child,a=t.child.memoizedState,o.memoizedState=null===a?Xi(n):{baseLanes:a.baseLanes|n,cachePool:null},o.childLanes=t.childLanes&~n,e.memoizedState=qi,i):(n=Ki(t,e,i.children,n),e.memoizedState=null,n)}function Zi(t,e){return(e=no({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Ki(t,e,n,r){var i=t.child;return t=i.sibling,n=Qs(i,{mode:"visible",children:n}),0==(1&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(null===(r=e.deletions)?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n}function Qi(t,e,n,r,i){var a=e.mode,s=(t=t.child).sibling,o={mode:"hidden",children:n};return 0==(1&a)&&e.child!==t?((n=e.child).childLanes=0,n.pendingProps=o,e.deletions=null):(n=Qs(t,o)).subtreeFlags=14680064&t.subtreeFlags,null!==s?r=Qs(s,r):(r=eo(r,a,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function ta(t,e,n,r){return null!==r&&tr(r),ar(e,t.child,null,n),(t=Zi(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function ea(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),cn(t.return,e,n)}function na(t,e,n,r,i){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ra(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Ni(t,e,r.children,n),0!=(2&(r=gr.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!=(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&ea(t,n,e);else if(19===t.tag)ea(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(le(gr,r),0==(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===yr(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),na(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===yr(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}na(e,!0,n,null,a);break;case"together":na(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ia(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),es|=e.lanes,0==(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Qs(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Qs(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function aa(t,e){switch(Gn(e),e.tag){case 1:return pe(e.type)&&me(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return fr(),oe(he),oe(ue),br(),0!=(65536&(t=e.flags))&&0==(128&t)?(e.flags=-65537&t|128,e):null;case 5:return mr(e),null;case 13:if(oe(gr),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));Qn()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return oe(gr),null;case 4:return fr(),null;case 10:return ln(e.type._context),null;case 22:case 23:return Ps(),null;default:return null}}var sa=!1,oa=!1,la="function"==typeof WeakSet?WeakSet:Set,ca=null;function ua(t,e){var n=t.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Vs(t,e,r)}else n.current=null}function ha(t,e,n){try{n()}catch(r){Vs(t,e,r)}}var da=!1;function fa(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,void 0!==a&&ha(e,n,a)}i=i.next}while(i!==r)}}function pa(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ma(t){var e=t.ref;if(null!==e){var n=t.stateNode;if(5===t.tag)t=I(n);else t=n;"function"==typeof e?e(t):e.current=t}}function ga(t,e,n){if(Ve&&"function"==typeof Ve.onCommitFiberUnmount)try{Ve.onCommitFiberUnmount(je,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t=t.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!=(2&i)||0!=(4&i))&&ha(e,n,a),r=r.next}while(r!==t)}break;case 1:if(ua(e,n),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){Vs(e,n,s)}break;case 5:ua(e,n);break;case 4:q?Ea(t,e,n):X&&X&&(e=e.stateNode.containerInfo,n=Tt(e),Lt(e,n))}}function ya(t,e,n){for(var r=e;;)if(ga(t,r,n),null===r.child||q&&4===r.tag){if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function va(t){var e=t.alternate;null!==e&&(t.alternate=null,va(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&tt(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ba(t){return 5===t.tag||3===t.tag||4===t.tag}function xa(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||ba(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags||null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function _a(t){if(q){t:{for(var e=t.return;null!==e;){if(ba(e))break t;e=e.return}throw Error(s(160))}var n=e;switch(n.tag){case 5:e=n.stateNode,32&n.flags&&(xt(e),n.flags&=-33),Sa(t,n=xa(t),e);break;case 3:case 4:e=n.stateNode.containerInfo,wa(t,n=xa(t),e);break;default:throw Error(s(161))}}}function wa(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?yt(n,t,e):dt(n,t);else if(4!==r&&null!==(t=t.child))for(wa(t,e,n),t=t.sibling;null!==t;)wa(t,e,n),t=t.sibling}function Sa(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?gt(n,t,e):ht(n,t);else if(4!==r&&null!==(t=t.child))for(Sa(t,e,n),t=t.sibling;null!==t;)Sa(t,e,n),t=t.sibling}function Ea(t,e,n){for(var r,i,a=e,o=!1;;){if(!o){o=a.return;t:for(;;){if(null===o)throw Error(s(160));switch(r=o.stateNode,o.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}o=o.return}o=!0}if(5===a.tag||6===a.tag)ya(t,a,n),i?bt(r,a.stateNode):vt(r,a.stateNode);else if(18===a.tag)i?Jt(r,a.stateNode):Xt(r,a.stateNode);else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(ga(t,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function Ma(t,e){if(q){switch(e.tag){case 0:case 11:case 14:case 15:return fa(3,e,e.return),pa(3,e),void fa(5,e,e.return);case 1:case 12:case 17:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps;t=null!==t?t.memoizedProps:r;var i=e.type,a=e.updateQueue;e.updateQueue=null,null!==a&&mt(n,a,i,t,r,e)}return;case 6:if(null===e.stateNode)throw Error(s(162));return n=e.memoizedProps,void ft(e.stateNode,null!==t?t.memoizedProps:n,n);case 3:return void(J&&null!==t&&t.memoizedState.isDehydrated&&Yt(e.stateNode.containerInfo));case 13:case 19:return void Ca(e)}throw Error(s(163))}switch(e.tag){case 0:case 11:case 14:case 15:return fa(3,e,e.return),pa(3,e),void fa(5,e,e.return);case 12:case 22:case 23:return;case 13:case 19:return void Ca(e);case 3:J&&null!==t&&t.memoizedState.isDehydrated&&Yt(e.stateNode.containerInfo)}t:if(X){switch(e.tag){case 1:case 5:case 6:break t;case 3:case 4:e=e.stateNode,Lt(e.containerInfo,e.pendingChildren);break t}throw Error(s(163))}}function Ca(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new la),e.forEach((function(e){var r=qs.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function Ta(t,e,n){ca=t,Aa(t)}function Aa(t,e,n){for(var r=0!=(1&t.mode);null!==ca;){var i=ca,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||sa;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||oa;o=sa;var c=oa;if(sa=s,(oa=l)&&!c)for(ca=i;null!==ca;)l=(s=ca).child,22===s.tag&&null!==s.memoizedState?Pa(i):null!==l?(l.return=s,ca=l):Pa(i);for(;null!==a;)ca=a,Aa(a),a=a.sibling;ca=i,sa=o,oa=c}ka(t)}else 0!=(8772&i.subtreeFlags)&&null!==a?(a.return=i,ca=a):ka(t)}}function ka(t){for(;null!==ca;){var e=ca;if(0!=(8772&e.flags)){var n=e.alternate;try{if(0!=(8772&e.flags))switch(e.tag){case 0:case 11:case 15:oa||pa(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!oa)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&_n(e,a,r);break;case 3:var o=e.updateQueue;if(null!==o){if(n=null,null!==e.child)switch(e.child.tag){case 5:n=I(e.child.stateNode);break;case 1:n=e.child.stateNode}_n(e,o,n)}break;case 5:var l=e.stateNode;null===n&&4&e.flags&&pt(l,e.type,e.memoizedProps,e);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(J&&null===e.memoizedState){var c=e.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(s(163))}oa||512&e.flags&&ma(e)}catch(d){Vs(e,e.return,d)}}if(e===t){ca=null;break}if(null!==(n=e.sibling)){n.return=e.return,ca=n;break}ca=e.return}}function La(t){for(;null!==ca;){var e=ca;if(e===t){ca=null;break}var n=e.sibling;if(null!==n){n.return=e.return,ca=n;break}ca=e.return}}function Pa(t){for(;null!==ca;){var e=ca;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pa(4,e)}catch(l){Vs(e,n,l)}break;case 1:var r=e.stateNode;if("function"==typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Vs(e,i,l)}}var a=e.return;try{ma(e)}catch(l){Vs(e,a,l)}break;case 5:var s=e.return;try{ma(e)}catch(l){Vs(e,s,l)}}}catch(l){Vs(e,e.return,l)}if(e===t){ca=null;break}var o=e.sibling;if(null!==o){o.return=e.return,ca=o;break}ca=e.return}}var Ra=0,Ia=1,Da=2,Ba=3,Oa=4;if("function"==typeof Symbol&&Symbol.for){var Na=Symbol.for;Ra=Na("selector.component"),Ia=Na("selector.has_pseudo_class"),Da=Na("selector.role"),Ba=Na("selector.test_id"),Oa=Na("selector.text")}function Fa(t){var e=Z(t);if(null!=e){if("string"!=typeof e.memoizedProps["data-testname"])throw Error(s(364));return e}if(null===(t=it(t)))throw Error(s(362));return t.stateNode.current}function za(t,e){switch(e.$$typeof){case Ra:if(t.type===e.value)return!0;break;case Ia:t:{e=e.value,t=[t,0];for(var n=0;n<t.length;){var r=t[n++],i=t[n++],a=e[i];if(5!==r.tag||!ot(r)){for(;null!=a&&za(r,a);)a=e[++i];if(i===e.length){e=!0;break t}for(r=r.child;null!==r;)t.push(r,i),r=r.sibling}}e=!1}return e;case Da:if(5===t.tag&&lt(t.stateNode,e.value))return!0;break;case Oa:if((5===t.tag||6===t.tag)&&(null!==(t=st(t))&&0<=t.indexOf(e.value)))return!0;break;case Ba:if(5===t.tag&&("string"==typeof(t=t.memoizedProps["data-testname"])&&t.toLowerCase()===e.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Ua(t){switch(t.$$typeof){case Ra:return"<"+(S(t.value)||"Unknown")+">";case Ia:return":has("+(Ua(t)||"")+")";case Da:return'[role="'+t.value+'"]';case Oa:return'"'+t.value+'"';case Ba:return'[data-testname="'+t.value+'"]';default:throw Error(s(365))}}function Ga(t,e){var n=[];t=[t,0];for(var r=0;r<t.length;){var i=t[r++],a=t[r++],s=e[a];if(5!==i.tag||!ot(i)){for(;null!=s&&za(i,s);)s=e[++a];if(a===e.length)n.push(i);else for(i=i.child;null!==i;)t.push(i,a),i=i.sibling}}return n}function Ha(t,e){if(!rt)throw Error(s(363));t=Ga(t=Fa(t),e),e=[],t=Array.from(t);for(var n=0;n<t.length;){var r=t[n++];if(5===r.tag)ot(r)||e.push(r.stateNode);else for(r=r.child;null!==r;)t.push(r),r=r.sibling}return e}var ja=Math.ceil,Va=o.ReactCurrentDispatcher,Wa=o.ReactCurrentOwner,$a=o.ReactCurrentBatchConfig,Ya=0,qa=null,Xa=null,Ja=0,Za=0,Ka=se(0),Qa=0,ts=null,es=0,ns=0,rs=0,is=null,as=null,ss=0,os=1/0;function ls(){os=Fe()+500}var cs,us=!1,hs=null,ds=null,fs=!1,ps=null,ms=0,gs=0,ys=null,vs=-1,bs=0;function xs(){return 0!=(6&Ya)?Fe():-1!==vs?vs:vs=Fe()}function _s(t){return 0==(1&t.mode)?1:0!=(2&Ya)&&0!==Ja?Ja&-Ja:null!==Ze.transition?(0===bs&&(t=Se,0==(4194240&(Se<<=1))&&(Se=64),bs=t),bs):0!==(t=Re)?t:Q()}function ws(t,e,n){if(50<gs)throw gs=0,ys=null,Error(s(185));var r=Ss(t,e);return null===r?null:(Le(r,e,n),(0==(2&Ya)||r!==qa)&&(r===qa&&(0==(2&Ya)&&(ns|=e),4===Qa&&As(r,Ja)),Es(r,n),1===e&&0===Ya&&0==(1&t.mode)&&(ls(),Ye&&Je())),r)}function Ss(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function Es(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-xe(a),o=1<<s,l=i[s];-1===l?(0==(o&n)||0!=(o&r))&&(i[s]=Te(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}}(t,e);var r=Ce(t,t===qa?Ja:0);if(0===r)null!==n&&Be(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Be(n),1===e)0===t.tag?function(t){Ye=!0,Xe(t)}(ks.bind(null,t)):Xe(ks.bind(null,t)),et?nt((function(){0===Ya&&Je()})):De(ze,Je),n=null;else{switch(Ie(r)){case 1:n=ze;break;case 4:n=Ue;break;case 16:default:n=Ge;break;case 536870912:n=He}n=Xs(n,Ms.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ms(t,e){if(vs=-1,bs=0,0!=(6&Ya))throw Error(s(327));var n=t.callbackNode;if(Hs()&&t.callbackNode!==n)return null;var r=Ce(t,t===qa?Ja:0);if(0===r)return null;if(0!=(30&r)||0!=(r&t.expiredLanes)||e)e=Os(t,r);else{e=r;var i=Ya;Ya|=2;var a=Ds();for((qa!==t||Ja!==e)&&(ls(),Rs(t,e));;)try{Fs();break}catch(l){Is(t,l)}sn(),Va.current=a,Ya=i,null!==Xa?e=0:(qa=null,Ja=0,e=Qa)}if(0!==e){if(2===e&&(0!==(i=Ae(t))&&(r=i,e=Cs(t,i))),1===e)throw n=ts,Rs(t,0),As(t,r),Es(t,Fe()),n;if(6===e)As(t,r);else{if(i=t.current.alternate,0==(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!We(a(),i))return!1}catch{return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=Os(t,r))&&(0!==(a=Ae(t))&&(r=a,e=Cs(t,a))),1===e))throw n=ts,Rs(t,0),As(t,r),Es(t,Fe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(s(345));case 2:case 5:Gs(t,as);break;case 3:if(As(t,r),(130023424&r)===r&&10<(e=ss+500-Fe())){if(0!==Ce(t,0))break;if(((i=t.suspendedLanes)&r)!==r){xs(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=V(Gs.bind(null,t,as),e);break}Gs(t,as);break;case 4:if(As(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-xe(r);a=1<<o,(o=e[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Fe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ja(r/1960))-r)){t.timeoutHandle=V(Gs.bind(null,t,as),r);break}Gs(t,as);break;default:throw Error(s(329))}}}return Es(t,Fe()),t.callbackNode===n?Ms.bind(null,t):null}function Cs(t,e){var n=is;return t.current.memoizedState.isDehydrated&&(Rs(t,e).flags|=256),2!==(t=Os(t,e))&&(e=as,as=n,null!==e&&Ts(e)),t}function Ts(t){null===as?as=t:as.push.apply(as,t)}function As(t,e){for(e&=~rs,e&=~ns,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xe(e),r=1<<n;t[n]=-1,e&=~r}}function ks(t){if(0!=(6&Ya))throw Error(s(327));Hs();var e=Ce(t,0);if(0==(1&e))return Es(t,Fe()),null;var n=Os(t,e);if(0!==t.tag&&2===n){var r=Ae(t);0!==r&&(e=r,n=Cs(t,r))}if(1===n)throw n=ts,Rs(t,0),As(t,e),Es(t,Fe()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,as),Es(t,Fe()),null}function Ls(t){null!==ps&&0===ps.tag&&0==(6&Ya)&&Hs();var e=Ya;Ya|=1;var n=$a.transition,r=Re;try{if($a.transition=null,Re=1,t)return t()}finally{Re=r,$a.transition=n,0==(6&(Ya=e))&&Je()}}function Ps(){Za=Ka.current,oe(Ka)}function Rs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==$&&(t.timeoutHandle=$,W(n)),null!==Xa)for(n=Xa.return;null!==n;){var r=n;switch(Gn(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&me();break;case 3:fr(),oe(he),oe(ue),br();break;case 5:mr(r);break;case 4:fr();break;case 13:case 19:oe(gr);break;case 10:ln(r.type._context);break;case 22:case 23:Ps()}n=n.return}if(qa=t,Xa=t=Qs(t.current,null),Ja=Za=e,Qa=0,ts=null,rs=ns=es=0,as=is=null,null!==dn){for(e=0;e<dn.length;e++)if(null!==(r=(n=dn[e]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}dn=null}return t}function Is(t,e){for(;;){var n=Xa;try{if(sn(),xr.current=fi,Cr){for(var r=Sr.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Cr=!1}if(wr=0,Mr=Er=Sr=null,Tr=!1,Ar=0,Wa.current=null,null===n||null===n.return){Qa=1,ts=e,Xa=null;break}t:{var a=t,o=n.return,l=n,c=e;if(e=Ja,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,h=l,d=h.tag;if(0==(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Ti(o);if(null!==p){p.flags&=-257,Ai(p,o,l,0,e),1&p.mode&&Ci(a,u,e),c=u;var m=(e=p).updateQueue;if(null===m){var g=new Set;g.add(c),e.updateQueue=g}else m.add(c);break t}if(0==(1&e)){Ci(a,u,e),Bs();break t}c=Error(s(426))}else if(Vn&&1&l.mode){var y=Ti(o);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),Ai(y,o,l,0,e),tr(c);break t}}a=c,4!==Qa&&(Qa=2),null===is?is=[a]:is.push(a),c=yi(c,l),l=o;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e,bn(l,Ei(0,c,e));break t;case 1:a=c;var v=l.type,b=l.stateNode;if(0==(128&l.flags)&&("function"==typeof v.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===ds||!ds.has(b)))){l.flags|=65536,e&=-e,l.lanes|=e,bn(l,Mi(l,a,e));break t}}l=l.return}while(null!==l)}Us(n)}catch(x){e=x,Xa===n&&null!==n&&(Xa=n=n.return);continue}break}}function Ds(){var t=Va.current;return Va.current=fi,null===t?fi:t}function Bs(){(0===Qa||3===Qa||2===Qa)&&(Qa=4),null===qa||0==(268435455&es)&&0==(268435455&ns)||As(qa,Ja)}function Os(t,e){var n=Ya;Ya|=2;var r=Ds();for(qa===t&&Ja===e||Rs(t,e);;)try{Ns();break}catch(i){Is(t,i)}if(sn(),Ya=n,Va.current=r,null!==Xa)throw Error(s(261));return qa=null,Ja=0,Qa}function Ns(){for(;null!==Xa;)zs(Xa)}function Fs(){for(;null!==Xa&&!Oe();)zs(Xa)}function zs(t){var e=cs(t.alternate,t,Za);t.memoizedProps=t.pendingProps,null===e?Us(t):Xa=e,Wa.current=null}function Us(t){var e=t;do{var n=e.alternate;if(t=e.return,0==(32768&e.flags)){if(null!==(n=Di(n,e,Za)))return void(Xa=n)}else{if(null!==(n=aa(n,e)))return n.flags&=32767,void(Xa=n);if(null===t)return Qa=6,void(Xa=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Xa=e);Xa=e=t}while(null!==e);0===Qa&&(Qa=5)}function Gs(t,e){var n=Re,r=$a.transition;try{$a.transition=null,Re=1,function(t,e,n){do{Hs()}while(null!==ps);if(0!=(6&Ya))throw Error(s(327));var r=t.finishedWork,i=t.finishedLanes;if(null===r)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xe(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}(t,a),t===qa&&(Xa=qa=null,Ja=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||fs||(fs=!0,Xs(Ge,(function(){return Hs(),null}))),a=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||a){a=$a.transition,$a.transition=null;var o=Re;Re=1;var l=Ya;Ya|=4,Wa.current=null,function(t,e){for(O(t.containerInfo),ca=e;null!==ca;)if(e=(t=ca).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,ca=e;else for(;null!==ca;){t=ca;try{var n=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,a=t.stateNode,o=a.getSnapshotBeforeUpdate(t.elementType===t.type?r:tn(t.type,r),i);a.__reactInternalSnapshotBeforeUpdate=o}break;case 3:q&&Mt(t.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(l){Vs(t,t.return,l)}if(null!==(e=t.sibling)){e.return=t.return,ca=e;break}ca=t.return}n=da,da=!1}(t,r),function(t,e){for(ca=e;null!==ca;){var n=(e=ca).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t;q?Ea(a,i,e):ya(a,i,e);var s=i.alternate;null!==s&&(s.return=null),i.return=null}catch(_){Vs(i,e,_)}}if(n=e.child,0!=(12854&e.subtreeFlags)&&null!==n)n.return=e,ca=n;else for(;null!==ca;){e=ca;try{var o=e.flags;if(32&o&&q&&xt(e.stateNode),512&o){var l=e.alternate;if(null!==l){var c=l.ref;null!==c&&("function"==typeof c?c(null):c.current=null)}}if(8192&o)switch(e.tag){case 13:if(null!==e.memoizedState){var u=e.alternate;(null===u||null===u.memoizedState)&&(ss=Fe())}break;case 22:var h=null!==e.memoizedState,d=e.alternate,f=null!==d&&null!==d.memoizedState;if(n=e,q)t:if(r=n,i=h,a=null,q)for(var p=r;;){if(5===p.tag){if(null===a){a=p;var m=p.stateNode;i?_t(m):St(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===a){var g=p.stateNode;i?wt(g):Et(g,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break t;a===p&&(a=null),p=p.return}a===p&&(a=null),p.sibling.return=p.return,p=p.sibling}if(h&&!f&&0!=(1&n.mode)){ca=n;for(var y=n.child;null!==y;){for(n=ca=y;null!==ca;){var v=(r=ca).child;switch(r.tag){case 0:case 11:case 14:case 15:fa(4,r,r.return);break;case 1:ua(r,r.return);var b=r.stateNode;if("function"==typeof b.componentWillUnmount){var x=r.return;try{b.props=r.memoizedProps,b.state=r.memoizedState,b.componentWillUnmount()}catch(_){Vs(r,x,_)}}break;case 5:ua(r,r.return);break;case 22:if(null!==r.memoizedState){La(n);continue}}null!==v?(v.return=r,ca=v):La(n)}y=y.sibling}}}switch(4102&o){case 2:_a(e),e.flags&=-3;break;case 6:_a(e),e.flags&=-3,Ma(e.alternate,e);break;case 4096:e.flags&=-4097;break;case 4100:e.flags&=-4097,Ma(e.alternate,e);break;case 4:Ma(e.alternate,e)}}catch(_){Vs(e,e.return,_)}if(null!==(n=e.sibling)){n.return=e.return,ca=n;break}ca=e.return}}}(t,r),N(t.containerInfo),t.current=r,Ta(r),Ne(),Ya=l,Re=o,$a.transition=a}else t.current=r;if(fs&&(fs=!1,ps=t,ms=i),a=t.pendingLanes,0===a&&(ds=null),function(t){if(Ve&&"function"==typeof Ve.onCommitFiberRoot)try{Ve.onCommitFiberRoot(je,t,void 0,128==(128&t.current.flags))}catch{}}(r.stateNode),Es(t,Fe()),null!==e)for(n=t.onRecoverableError,r=0;r<e.length;r++)n(e[r]);if(us)throw us=!1,t=hs,hs=null,t;0!=(1&ms)&&0!==t.tag&&Hs(),a=t.pendingLanes,0!=(1&a)?t===ys?gs++:(gs=0,ys=t):gs=0,Je()}(t,e,n)}finally{$a.transition=r,Re=n}return null}function Hs(){if(null!==ps){var t=Ie(ms),e=$a.transition,n=Re;try{if($a.transition=null,Re=16>t?16:t,null===ps)var r=!1;else{if(t=ps,ps=null,ms=0,0!=(6&Ya))throw Error(s(331));var i=Ya;for(Ya|=4,ca=t.current;null!==ca;){var a=ca,o=a.child;if(0!=(16&ca.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(ca=u;null!==ca;){var h=ca;switch(h.tag){case 0:case 11:case 15:fa(8,h,a)}var d=h.child;if(null!==d)d.return=h,ca=d;else for(;null!==ca;){var f=(h=ca).sibling,p=h.return;if(va(h),h===u){ca=null;break}if(null!==f){f.return=p,ca=f;break}ca=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}ca=a}}if(0!=(2064&a.subtreeFlags)&&null!==o)o.return=a,ca=o;else t:for(;null!==ca;){if(0!=(2048&(a=ca).flags))switch(a.tag){case 0:case 11:case 15:fa(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,ca=v;break t}ca=a.return}}var b=t.current;for(ca=b;null!==ca;){var x=(o=ca).child;if(0!=(2064&o.subtreeFlags)&&null!==x)x.return=o,ca=x;else t:for(o=b;null!==ca;){if(0!=(2048&(l=ca).flags))try{switch(l.tag){case 0:case 11:case 15:pa(9,l)}}catch(w){Vs(l,l.return,w)}if(l===o){ca=null;break t}var _=l.sibling;if(null!==_){_.return=l.return,ca=_;break t}ca=l.return}}if(Ya=i,Je(),Ve&&"function"==typeof Ve.onPostCommitFiberRoot)try{Ve.onPostCommitFiberRoot(je,t)}catch{}r=!0}return r}finally{Re=n,$a.transition=e}}return!1}function js(t,e,n){yn(t,e=Ei(0,e=yi(n,e),1)),e=xs(),null!==(t=Ss(t,1))&&(Le(t,1,e),Es(t,e))}function Vs(t,e,n){if(3===t.tag)js(t,t,n);else for(;null!==e;){if(3===e.tag){js(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ds||!ds.has(r))){yn(e,t=Mi(e,t=yi(n,t),1)),t=xs(),null!==(e=Ss(e,1))&&(Le(e,1,t),Es(e,t));break}}e=e.return}}function Ws(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=xs(),t.pingedLanes|=t.suspendedLanes&n,qa===t&&(Ja&n)===n&&(4===Qa||3===Qa&&(130023424&Ja)===Ja&&500>Fe()-ss?Rs(t,0):rs|=n),Es(t,e)}function $s(t,e){0===e&&(0==(1&t.mode)?e=1:(e=Ee,0==(130023424&(Ee<<=1))&&(Ee=4194304)));var n=xs();null!==(t=Ss(t,e))&&(Le(t,e,n),Es(t,n))}function Ys(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),$s(t,n)}function qs(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(e),$s(t,n)}function Xs(t,e){return De(t,e)}function Js(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zs(t,e,n,r){return new Js(t,e,n,r)}function Ks(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Qs(t,e){var n=t.alternate;return null===n?((n=Zs(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function to(t,e,n,r,i,a){var o=2;if(r=t,"function"==typeof t)Ks(t)&&(o=1);else if("string"==typeof t)o=5;else t:switch(t){case u:return eo(n.children,i,a,e);case h:o=8,i|=8;break;case d:return(t=Zs(12,n,e,2|i)).elementType=d,t.lanes=a,t;case g:return(t=Zs(13,n,e,i)).elementType=g,t.lanes=a,t;case y:return(t=Zs(19,n,e,i)).elementType=y,t.lanes=a,t;case x:return no(n,i,a,e);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case f:o=10;break t;case p:o=9;break t;case m:o=11;break t;case v:o=14;break t;case b:o=16,r=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Zs(o,n,e,i)).elementType=t,e.type=r,e.lanes=a,e}function eo(t,e,n,r){return(t=Zs(7,t,r,e)).lanes=n,t}function no(t,e,n,r){return(t=Zs(22,t,r,e)).elementType=x,t.lanes=n,t.stateNode={},t}function ro(t,e,n){return(t=Zs(6,t,null,e)).lanes=n,t}function io(t,e,n){return(e=Zs(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ao(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=$,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ke(0),this.expirationTimes=ke(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.identifierPrefix=r,this.onRecoverableError=i,J&&(this.mutableSourceEagerHydrationData=null)}function so(t,e,n,r,i,a,s,o,l){return t=new ao(t,e,n,o,l),1===e?(e=1,!0===a&&(e|=8)):e=0,a=Zs(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},pn(a),t}function oo(t){if(!t)return ce;t:{if(M(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(pe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(pe(n))return ye(t,n,e)}return e}function lo(t){var e=t._reactInternals;if(void 0===e)throw"function"==typeof t.render?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return null===(t=A(e))?null:t.stateNode}function co(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function uo(t,e){co(t,e),(t=t.alternate)&&co(t,e)}function ho(t){return null===(t=A(t))?null:t.stateNode}function fo(){return null}return cs=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||he.current)Oi=!0;else{if(0==(t.lanes&n)&&0==(128&e.flags))return Oi=!1,function(t,e,n){switch(e.tag){case 3:$i(e),Qn();break;case 5:pr(e);break;case 1:pe(e.type)&&ve(e);break;case 4:dr(e,e.stateNode.containerInfo);break;case 10:on(0,e.type._context,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(null!==r)return null!==r.dehydrated?(le(gr,1&gr.current),e.flags|=128,null):0!=(n&e.child.childLanes)?Ji(t,e,n):(le(gr,1&gr.current),null!==(t=ia(t,e,n))?t.sibling:null);le(gr,1&gr.current);break;case 19:if(r=0!=(n&e.childLanes),0!=(128&t.flags)){if(r)return ra(t,e,n);e.flags|=128}var i=e.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),le(gr,gr.current),r)break;return null;case 22:case 23:return e.lanes=0,Gi(t,e,n)}return ia(t,e,n)}(t,e,n);Oi=0!=(131072&t.flags)}else Oi=!1,Vn&&0!=(1048576&e.flags)&&zn(e,Rn,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps;var i=fe(e,ue.current);un(e,n),i=Rr(null,e,r,t,i,n);var a=Ir();return e.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pe(r)?(a=!0,ve(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,pn(e),i.updater=En,e.stateNode=i,i._reactInternals=e,An(e,r,t,n),e=Wi(null,e,r,!0,a,n)):(e.tag=0,Vn&&a&&Un(e),Ni(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"==typeof t)return Ks(t)?1:0;if(null!=t){if((t=t.$$typeof)===m)return 11;if(t===v)return 14}return 2}(r),t=tn(r,t),i){case 0:e=ji(null,e,r,t,n);break t;case 1:e=Vi(null,e,r,t,n);break t;case 11:e=Fi(null,e,r,t,n);break t;case 14:e=zi(null,e,r,tn(r.type,t),n);break t}throw Error(s(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,ji(t,e,r,i=e.elementType===r?i:tn(r,i),n);case 1:return r=e.type,i=e.pendingProps,Vi(t,e,r,i=e.elementType===r?i:tn(r,i),n);case 3:t:{if($i(e),null===t)throw Error(s(387));r=e.pendingProps,i=(a=e.memoizedState).element,mn(t,e),xn(e,r,null,n);var o=e.memoizedState;if(r=o.element,J&&a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Yi(t,e,r,n,i=Error(s(423)));break t}if(r!==i){e=Yi(t,e,r,n,i=Error(s(424)));break t}for(J&&(jn=Gt(e.stateNode.containerInfo),Hn=e,Vn=!0,$n=null,Wn=!1),n=sr(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Qn(),r===i){e=ia(t,e,n);break t}Ni(t,e,r,n)}e=e.child}return e;case 5:return pr(e),null===t&&Jn(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,o=i.children,H(r,i)?o=null:null!==a&&H(r,a)&&(e.flags|=32),Hi(t,e),Ni(t,e,o,n),e.child;case 6:return null===t&&Jn(e),null;case 13:return Ji(t,e,n);case 4:return dr(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=ar(e,null,r,n):Ni(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Fi(t,e,r,i=e.elementType===r?i:tn(r,i),n);case 7:return Ni(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ni(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,on(0,r,o=i.value),null!==a)if(We(a.value,o)){if(a.children===i.children&&!he.current){e=ia(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=gn(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),cn(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),cn(o,n,e),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}Ni(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,un(e,n),r=r(i=hn(i)),e.flags|=1,Ni(t,e,r,n),e.child;case 14:return i=tn(r=e.type,e.pendingProps),zi(t,e,r,i=tn(r.type,i),n);case 15:return Ui(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tn(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,pe(r)?(t=!0,ve(e)):t=!1,un(e,n),Cn(e,r,i),An(e,r,i,n),Wi(null,e,r,!0,t,n);case 19:return ra(t,e,n);case 22:return Gi(t,e,n)}throw Error(s(156,e.tag))},e.attemptContinuousHydration=function(t){13===t.tag&&(ws(t,134217728,xs()),uo(t,134217728))},e.attemptHydrationAtCurrentPriority=function(t){if(13===t.tag){var e=xs(),n=_s(t);ws(t,n,e),uo(t,n)}},e.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Me(e.pendingLanes);0!==n&&(Pe(e,1|n),Es(e,Fe()),0==(6&Ya)&&(ls(),Je()))}break;case 13:var r=xs();Ls((function(){return ws(t,1,r)})),uo(t,1)}},e.batchedUpdates=function(t,e){var n=Ya;Ya|=1;try{return t(e)}finally{0===(Ya=n)&&(ls(),Ye&&Je())}},e.createComponentSelector=function(t){return{$$typeof:Ra,value:t}},e.createContainer=function(t,e,n,r,i,a,s){return so(t,e,!1,null,0,r,0,a,s)},e.createHasPseudoClassSelector=function(t){return{$$typeof:Ia,value:t}},e.createHydrationContainer=function(t,e,n,r,i,a,s,o,l){return(t=so(n,r,!0,t,0,a,0,o,l)).context=oo(null),n=t.current,(a=gn(r=xs(),i=_s(n))).callback=null!=e?e:null,yn(n,a),t.current.lanes=i,Le(t,i,r),Es(t,r),t},e.createPortal=function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}},e.createRoleSelector=function(t){return{$$typeof:Da,value:t}},e.createTestNameSelector=function(t){return{$$typeof:Ba,value:t}},e.createTextSelector=function(t){return{$$typeof:Oa,value:t}},e.deferredUpdates=function(t){var e=Re,n=$a.transition;try{return $a.transition=null,Re=16,t()}finally{Re=e,$a.transition=n}},e.discreteUpdates=function(t,e,n,r,i){var a=Re,s=$a.transition;try{return $a.transition=null,Re=1,t(e,n,r,i)}finally{Re=a,$a.transition=s,0===Ya&&ls()}},e.findAllNodes=Ha,e.findBoundingRects=function(t,e){if(!rt)throw Error(s(363));e=Ha(t,e),t=[];for(var n=0;n<e.length;n++)t.push(at(e[n]));for(e=t.length-1;0<e;e--)for(var r=(n=t[e]).x,i=r+n.width,a=n.y,o=a+n.height,l=e-1;0<=l;l--)if(e!==l){var c=t[l],u=c.x,h=u+c.width,d=c.y,f=d+c.height;if(r>=u&&a>=d&&i<=h&&o<=f){t.splice(e,1);break}if(!(r!==u||n.width!==c.width||f<a||d>o)){d>a&&(c.height+=d-a,c.y=a),f<o&&(c.height=o-d),t.splice(e,1);break}if(!(a!==d||n.height!==c.height||h<r||u>i)){u>r&&(c.width+=u-r,c.x=r),h<i&&(c.width=i-u),t.splice(e,1);break}}return t},e.findHostInstance=lo,e.findHostInstanceWithNoPortals=function(t){return null===(t=null!==(t=T(t))?L(t):null)?null:t.stateNode},e.findHostInstanceWithWarning=function(t){return lo(t)},e.flushControlled=function(t){var e=Ya;Ya|=1;var n=$a.transition,r=Re;try{$a.transition=null,Re=1,t()}finally{Re=r,$a.transition=n,0===(Ya=e)&&(ls(),Je())}},e.flushPassiveEffects=Hs,e.flushSync=Ls,e.focusWithin=function(t,e){if(!rt)throw Error(s(363));for(e=Ga(t=Fa(t),e),e=Array.from(e),t=0;t<e.length;){var n=e[t++];if(!ot(n)){if(5===n.tag&&ct(n.stateNode))return!0;for(n=n.child;null!==n;)e.push(n),n=n.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Re},e.getFindAllNodesFailureDescription=function(t,e){if(!rt)throw Error(s(363));var n=0,r=[];t=[Fa(t),0];for(var i=0;i<t.length;){var a=t[i++],o=t[i++],l=e[o];if((5!==a.tag||!ot(a))&&(za(a,l)&&(r.push(Ua(l)),++o>n&&(n=o)),o<e.length))for(a=a.child;null!==a;)t.push(a,o),a=a.sibling}if(n<e.length){for(t=[];n<e.length;n++)t.push(Ua(e[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+t.join(" > ")}return null},e.getPublicRootInstance=function(t){return(t=t.current).child?5===t.child.tag?I(t.child.stateNode):t.child.stateNode:null},e.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:ho,findFiberByHostInstance:t.findFiberByHostInstance||fo,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)t=!0;else{try{je=e.inject(t),Ve=e}catch{}t=!!e.checkDCE}}return t},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(t,e,n,r){if(!rt)throw Error(s(363));t=Ha(t,e);var i=ut(t,n,r).disconnect;return{disconnect:function(){i()}}},e.registerMutableSourceForHydration=function(t,e){var n=e._getVersion;n=n(e._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[e,n]:t.mutableSourceEagerHydrationData.push(e,n)},e.runWithPriority=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(t,e,n,r){var i=e.current,a=xs(),s=_s(i);return n=oo(n),null===e.context?e.context=n:e.pendingContext=n,(e=gn(a,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),yn(i,e),null!==(t=ws(i,s,a))&&vn(t,i,s),s},e}),dh}!function(t){t.exports=(lh||(lh=1,function(t){function e(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,a=t[r];if(!(0<i(a,e)))break t;t[r]=e,t[n]=a,n=r}}function n(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,a=t.length,s=a>>>1;r<s;){var o=2*(r+1)-1,l=t[o],c=o+1,u=t[c];if(0>i(l,n))c<a&&0>i(u,l)?(t[r]=u,t[c]=n,r=c):(t[r]=l,t[o]=n,r=o);else{if(!(c<a&&0>i(u,n)))break t;t[r]=u,t[c]=n,r=c}}}return e}function i(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function b(t){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=t))break;r(c),i.sortIndex=i.expirationTime,e(l,i)}i=n(c)}}function x(t){if(m=!1,b(t),!p)if(null!==n(l))p=!0,R(_);else{var e=n(c);null!==e&&I(x,e.startTime-t)}}function _(e,i){p=!1,m&&(m=!1,y(M),M=-1),f=!0;var a=d;try{for(b(i),h=n(l);null!==h&&(!(h.expirationTime>i)||e&&!A());){var s=h.callback;if("function"==typeof s){h.callback=null,d=h.priorityLevel;var o=s(h.expirationTime<=i);i=t.unstable_now(),"function"==typeof o?h.callback=o:h===n(l)&&r(l),b(i)}else r(l);h=n(l)}if(null!==h)var u=!0;else{var g=n(c);null!==g&&I(x,g.startTime-i),u=!1}return u}finally{h=null,d=a,f=!1}}typeof navigator<"u"&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,E=null,M=-1,C=5,T=-1;function A(){return!(t.unstable_now()-T<C)}function k(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?w():(S=!1,E=null)}}else S=!1}if("function"==typeof v)w=function(){v(k)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,P=L.port2;L.port1.onmessage=k,w=function(){P.postMessage(null)}}else w=function(){g(k,0)};function R(t){E=t,S||(S=!0,w())}function I(e,n){M=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(t){t.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,R(_))},t.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<t?Math.floor(1e3/t):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(t){switch(d){case 1:case 2:case 3:var e=3;break;default:e=d}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_scheduleCallback=function(r,i,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(r.sortIndex=a,e(c,r),null===n(l)&&r===n(c)&&(m?(y(M),M=-1):m=!0,I(x,a-s))):(r.sortIndex=o,e(l,r),p||f||(p=!0,R(_))),r},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(t){var e=d;return function(){var n=d;d=e;try{return t.apply(this,arguments)}finally{d=n}}}}(hh)),hh)}(uh);!function(t){t.exports=ph()}(ch);const mh=nh(ch.exports);function gh(t,e,n=((t,e)=>t===e)){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}const yh=[];const vh=(t,e,n)=>function(t,e,n=!1,r={}){for(const a of yh)if(gh(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return a.response;if(!n)throw a.promise}const i={keys:e,equal:r.equal,promise:t(...e).then((t=>i.response=t)).then((()=>{r.lifespan&&r.lifespan>0&&setTimeout((()=>{const t=yh.indexOf(i);-1!==t&&yh.splice(t,1)}),r.lifespan)})).catch((t=>i.error=t))};if(yh.push(i),!n)throw i.promise}(t,e,!1,n);var bh,xh={exports:{}},_h={};!function(t){t.exports=function(){if(bh)return _h;bh=1;var t=r,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(t,n,r){var o,l={},c=null,u=null;for(o in void 0!==r&&(c=""+r),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)i.call(n,o)&&!s.hasOwnProperty(o)&&(l[o]=n[o]);if(t&&t.defaultProps)for(o in n=t.defaultProps)void 0===l[o]&&(l[o]=n[o]);return{$$typeof:e,type:t,key:c,ref:u,props:l,_owner:a.current}}return _h.Fragment=n,_h.jsx=o,_h.jsxs=o,_h}()}(xh);const wh=xh.exports.Fragment,Sh=xh.exports.jsx,Eh=xh.exports.jsxs;var Mh,Ch;const Th=t=>t&&t.isOrthographicCamera,Ah=typeof window<"u"&&(null!=(Mh=window.document)&&Mh.createElement||"ReactNative"===(null==(Ch=window.navigator)?void 0:Ch.product))?r.useLayoutEffect:r.useEffect;function kh(t){const e=r.useRef(t);return Ah((()=>{e.current=t}),[t]),e}function Lh({set:t}){return Ah((()=>(t(new Promise((()=>null))),()=>t(!1))),[t]),null}class Ph extends r.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}Ph.getDerivedStateFromError=()=>({error:!0});const Rh="__default";function Ih(t){return Array.isArray(t)?Math.min(Math.max(t[0],window.devicePixelRatio),t[1]):t}const Dh=t=>{var e;return null==(e=t.__r3f)?void 0:e.root.getState()},Bh={obj:t=>t===Object(t)&&!Bh.arr(t)&&"function"!=typeof t,fun:t=>"function"==typeof t,str:t=>"string"==typeof t,num:t=>"number"==typeof t,boo:t=>"boolean"==typeof t,und:t=>void 0===t,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Bh.str(t)||Bh.num(t))return t===e;const a=Bh.obj(t);if(a&&"reference"===r)return t===e;const s=Bh.arr(t);if(s&&"reference"===n)return t===e;if((s||a)&&t===e)return!0;let o;for(o in t)if(!(o in e))return!1;for(o in i?e:t)if(t[o]!==e[o])return!1;if(Bh.und(o)){if(s&&0===t.length&&0===e.length||a&&0===Object.keys(t).length&&0===Object.keys(e).length)return!0;if(t!==e)return!1}return!0}};function Oh(t,e){const n=t;return(null!=e&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function Nh(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce(((t,e)=>t[e]),t),{target:n,key:i}}return{target:n,key:e}}const Fh=/-\d+$/;function zh(t,e,n){if(Bh.str(n)){if(Fh.test(n)){const e=n.replace(Fh,""),{target:r,key:i}=Nh(t,e);Array.isArray(r[i])||(r[i]=[])}const{target:r,key:i}=Nh(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function Uh(t,e,n){var r,i;if(Bh.str(n)){const{target:r,key:i}=Nh(t,n),a=e.__r3f.previousAttach;void 0===a?delete r[i]:r[i]=a}else null==(r=e.__r3f)||null==r.previousAttach||r.previousAttach(t,e);null==(i=e.__r3f)||delete i.previousAttach}function Gh(t,{children:e,key:n,ref:r,...i},{children:a,key:s,ref:o,...l}={},c=!1){var u;const h=null!=(u=null==t?void 0:t.__r3f)?u:{},d=Object.entries(i),f=[];if(c){const t=Object.keys(l);for(let e=0;e<t.length;e++)i.hasOwnProperty(t[e])||d.unshift([t[e],Rh+"remove"])}d.forEach((([e,n])=>{var r;if(null!=(r=t.__r3f)&&r.primitive&&"object"===e||Bh.equ(n,l[e]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(e))return f.push([e,n,!0,[]]);let i=[];e.includes("-")&&(i=e.split("-")),f.push([e,n,!1,i])}));const p={...i};return h.memoizedProps&&h.memoizedProps.args&&(p.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(p.attach=h.memoizedProps.attach),{memoized:p,changes:f}}function Hh(t,e){var n,r;const i=null!=(n=t.__r3f)?n:{},a=i.root,s=null!=(r=null==a||null==a.getState?void 0:a.getState())?r:{},{memoized:o,changes:l}=(t=>t&&!!t.memoized&&!!t.changes)(e)?e:Gh(t,e),c=i.eventCount;if(t.__r3f&&(t.__r3f.memoizedProps=o),l.forEach((([e,n,r,a])=>{let l=t,c=l[e];if(a.length&&(c=a.reduce(((t,e)=>t[e]),t),!c||!c.set)){const[n,...r]=a.reverse();l=r.reverse().reduce(((t,e)=>t[e]),t),e=n}if(n===Rh+"remove")if(c&&c.constructor){var u;n=new c.constructor(...null!=(u=o.args)?u:[])}else if(l.constructor){var h;const t=new l.constructor(...null!=(h=l.__r3f.memoizedProps.args)?h:[]);n=t[c],t.dispose&&t.dispose()}else n=0;if(r)n?i.handlers[e]=n:delete i.handlers[e],i.eventCount=Object.keys(i.handlers).length;else if(c&&c.set&&(c.copy||c instanceof Ke)){if(Array.isArray(n))c.fromArray?c.fromArray(n):c.set(...n);else if(c.copy&&n&&n.constructor&&c.constructor.name===n.constructor.name)c.copy(n);else if(void 0!==n){const t=c instanceof Kt;!t&&c.setScalar?c.setScalar(n):c instanceof Ke&&n instanceof Ke?c.mask=n.mask:c.set(n),!("ColorManagement"in th)&&!s.linear&&t&&c.convertSRGBToLinear()}}else l[e]=n,!s.linear&&l[e]instanceof ie&&(l[e].encoding=pt);jh(t)})),i.parent&&s.internal&&t.raycast&&c!==i.eventCount){const e=s.internal.interaction.indexOf(t);e>-1&&s.internal.interaction.splice(e,1),i.eventCount&&s.internal.interaction.push(t)}return l.length&&t.parent&&Vh(t),t}function jh(t){var e,n;const r=null==(e=t.__r3f)||null==(n=e.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function Vh(t){null==t.onUpdate||t.onUpdate(t)}function Wh(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function $h(t,e,n,r){const i=n.get(e);i&&(n.delete(e),0===n.size&&(t.delete(r),i.target.releasePointerCapture(r)))}function Yh(t){function e(t){return t.filter((t=>["Move","Over","Enter","Out","Leave"].some((e=>{var n;return null==(n=t.__r3f)?void 0:n.handlers["onPointer"+e]}))))}function n(e){const{internal:n}=t.getState();Array.from(n.hovered.values()).forEach((t=>{if(!e.length||!e.find((e=>e.object===t.object&&e.index===t.index&&e.instanceId===t.instanceId))){const r=t.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(Wh(t)),null!=r&&r.eventCount){const n={...t,intersections:e};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}))}function r(t,e){e.forEach((e=>{var n;return null==(n=e.__r3f)||null==n.handlers.onPointerMissed?void 0:n.handlers.onPointerMissed(t)}))}return{handlePointer:i=>{switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return e=>{const{internal:r}=t.getState();"pointerId"in e&&!r.capturedMap.has(e.pointerId)&&(r.capturedMap.delete(e.pointerId),n([]))}}return a=>{const{onPointerMissed:s,internal:o}=t.getState();o.lastEvent.current=a;const l="onPointerMove"===i,c="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,u=function(e,n){const r=t.getState(),i=new Set,a=[],s=n?n(r.internal.interaction):r.internal.interaction;s.forEach((t=>{const e=Dh(t);e&&(e.raycaster.camera=void 0)})),r.previousRoot||null==r.events.compute||r.events.compute(e,r);let o=s.flatMap((t=>{const n=Dh(t);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(e,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(t,!0):[]):[];var r})).sort(((t,e)=>{const n=Dh(t.object),r=Dh(e.object);return n&&r?r.events.priority-n.events.priority||t.distance-e.distance:0})).filter((t=>{const e=Wh(t);return!i.has(e)&&(i.add(e),!0)}));r.events.filter&&(o=r.events.filter(o,r));for(const t of o){let e=t.object;for(;e;){var l;null!=(l=e.__r3f)&&l.eventCount&&a.push({...t,eventObject:e}),e=e.parent}}if("pointerId"in e&&r.internal.capturedMap.has(e.pointerId))for(let t of r.internal.capturedMap.get(e.pointerId).values())a.push(t.intersection);return a}(a,l?e:void 0),h=c?function(e){const{internal:n}=t.getState(),r=e.offsetX-n.initialClick[0],i=e.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===i&&(o.initialClick=[a.offsetX,a.offsetY],o.initialHits=u.map((t=>t.eventObject))),c&&!u.length&&h<=2&&(r(a,o.interaction),s&&s(a)),l&&n(u),function(t,e,r,i){if(t.length){const a={stopped:!1};for(const s of t){const o=Dh(s.object);if(o){const{raycaster:l,pointer:c,camera:u,internal:h}=o,d=new ue(c.x,c.y,0).unproject(u),f=t=>{var e,n;return null!=(e=null==(n=h.capturedMap.get(t))?void 0:n.has(s.eventObject))&&e},p=t=>{const n={intersection:s,target:e.target};h.capturedMap.has(t)?h.capturedMap.get(t).set(s.eventObject,n):h.capturedMap.set(t,new Map([[s.eventObject,n]])),e.target.setPointerCapture(t)},m=t=>{const e=h.capturedMap.get(t);e&&$h(h.capturedMap,s.eventObject,e,t)};let g={};for(let t in e){let n=e[t];"function"!=typeof n&&(g[t]=n)}let y={...s,...g,pointer:c,intersections:t,stopped:a.stopped,delta:r,unprojectedPoint:d,ray:l.ray,camera:u,stopPropagation:()=>{const r="pointerId"in e&&h.capturedMap.get(e.pointerId);(!r||r.has(s.eventObject))&&(y.stopped=a.stopped=!0,h.hovered.size&&Array.from(h.hovered.values()).find((t=>t.eventObject===s.eventObject)))&&n([...t.slice(0,t.indexOf(s)),s])},target:{hasPointerCapture:f,setPointerCapture:p,releasePointerCapture:m},currentTarget:{hasPointerCapture:f,setPointerCapture:p,releasePointerCapture:m},nativeEvent:e};if(i(y),!0===a.stopped)break}}}}(u,a,h,(t=>{const e=t.eventObject,n=e.__r3f,s=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(s.onPointerOver||s.onPointerEnter||s.onPointerOut||s.onPointerLeave){const e=Wh(t),n=o.hovered.get(e);n?n.stopped&&t.stopPropagation():(o.hovered.set(e,t),null==s.onPointerOver||s.onPointerOver(t),null==s.onPointerEnter||s.onPointerEnter(t))}null==s.onPointerMove||s.onPointerMove(t)}else{const n=s[i];n?(!c||o.initialHits.includes(e))&&(r(a,o.interaction.filter((t=>!o.initialHits.includes(t)))),n(t)):c&&o.initialHits.includes(e)&&r(a,o.interaction.filter((t=>!o.initialHits.includes(t))))}}))}}}}let qh={};const Xh=t=>!(null==t||!t.render),Jh=r.createContext(null),Zh=(t,e)=>{const n=function(t){const e="function"==typeof t?sh(t):t,n=(t=e.getState,n=Object.is)=>{const[,i]=(0,r.useReducer)((t=>t+1),0),a=e.getState(),s=(0,r.useRef)(a),o=(0,r.useRef)(t),l=(0,r.useRef)(n),c=(0,r.useRef)(!1),u=(0,r.useRef)();void 0===u.current&&(u.current=t(a));let h,d=!1;(s.current!==a||o.current!==t||l.current!==n||c.current)&&(h=t(a),d=!n(u.current,h)),oh((()=>{d&&(u.current=h),s.current=a,o.current=t,l.current=n,c.current=!1}));const f=(0,r.useRef)(a);oh((()=>{const t=()=>{try{const t=e.getState(),n=o.current(t);l.current(u.current,n)||(s.current=t,u.current=n,i())}catch{c.current=!0,i()}},n=e.subscribe(t);return e.getState()!==f.current&&t(),n}),[]);const p=d?h:u.current;return(0,r.useDebugValue)(p),p};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const t=[n,e];return{next(){const e=t.length<=0;return{value:t.shift(),done:e}}}},n}(((n,i)=>{const a=new ue,s=new ue,o=new ue;function l(t=i().camera,e=s,n=i().size){const{width:r,height:l,top:c,left:u}=n,h=r/l;e instanceof ue?o.copy(e):o.set(...e);const d=t.getWorldPosition(a).distanceTo(o);if(Th(t))return{width:r/t.zoom,height:l/t.zoom,top:c,left:u,factor:1,distance:d,aspect:h};{const e=t.fov*Math.PI/180,n=2*Math.tan(e/2)*d,i=n*(r/l);return{width:i,height:n,top:c,left:u,factor:r/i,distance:d,aspect:h}}}let c;const u=t=>n((e=>({performance:{...e.performance,current:t}}))),h=new Ot;return{set:n,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(e=1)=>t(i(),e),advance:(t,n)=>e(t,n,i()),legacy:!1,linear:!1,flat:!1,scene:Oh(new cs),controls:null,clock:new tu,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const t=i();c&&clearTimeout(c),t.performance.current!==t.performance.min&&u(t.performance.min),c=setTimeout((()=>u(i().performance.max)),t.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:t=>n((e=>({...e,events:{...e.events,...t}}))),setSize:(t,e,r,a,o)=>{const c=i().camera,u={width:t,height:e,top:a||0,left:o||0,updateStyle:r};n((t=>({size:u,viewport:{...t.viewport,...l(c,s,u)}})))},setDpr:t=>n((e=>{const n=Ih(t);return{viewport:{...e.viewport,dpr:n,initialDpr:e.viewport.initialDpr||n}}})),setFrameloop:(t="always")=>{const e=i().clock;e.stop(),e.elapsedTime=0,"never"!==t&&(e.start(),e.elapsedTime=0),n((()=>({frameloop:t})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:r.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(t,e,n)=>{const r=i().internal;return r.priority=r.priority+(e>0?1:0),r.subscribers.push({ref:t,priority:e,store:n}),r.subscribers=r.subscribers.sort(((t,e)=>t.priority-e.priority)),()=>{const n=i().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(e>0?1:0),n.subscribers=n.subscribers.filter((e=>e.ref!==t)))}}}}})),i=n.getState();let a=i.size,s=i.viewport.dpr,o=i.camera;return n.subscribe((()=>{const{camera:t,size:e,viewport:r,gl:i,set:l}=n.getState();(e!==a||r.dpr!==s)&&(a=e,s=r.dpr,function(t,e){t.manual||(Th(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}(t,e),i.setPixelRatio(r.dpr),i.setSize(e.width,e.height,e.updateStyle)),t!==o&&(o=t,l((e=>({viewport:{...e.viewport,...e.viewport.getCurrentViewport(t)}}))))})),n.subscribe((e=>t(e))),n};let Kh,Qh,td,ed=new Set,nd=new Set,rd=new Set;function id(t,e){!t.size||t.forEach((({callback:t})=>t(e)))}function ad(t,e){switch(t){case"before":return id(ed,e);case"after":return id(nd,e);case"tail":return id(rd,e)}}function sd(t,e,n){let r=e.clock.getDelta();for("never"===e.frameloop&&"number"==typeof t&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),Qh=e.internal.subscribers,Kh=0;Kh<Qh.length;Kh++)td=Qh[Kh],td.ref.current(td.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),"always"===e.frameloop?1:e.internal.frames}function od(){const t=r.useContext(Jh);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function ld(t=(t=>t),e){return od()(t,e)}function cd(t,e=0){const n=od(),r=n.getState().internal.subscribe,i=kh(t);return Ah((()=>r(i,e,n)),[e,r,n]),null}const ud=new Map,{invalidate:hd,advance:dd}=function(t){let e,n,r,i=!1;function a(s){if(n=requestAnimationFrame(a),i=!0,e=0,ad("before",s),t.forEach((t=>{var n;r=t.store.getState(),r.internal.active&&("always"===r.frameloop||r.internal.frames>0)&&(null==(n=r.gl.xr)||!n.isPresenting)&&(e+=sd(s,r))})),ad("after",s),0===e)return ad("tail",s),i=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function e(n,r=1){var s;if(!n)return t.forEach((t=>e(t.store.getState())),r);null!=(s=n.gl.xr)&&s.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+r),i||(i=!0,requestAnimationFrame(a)))},advance:function(e,n=!0,r,i){n&&ad("before",e),r?sd(e,r,i):t.forEach((t=>sd(e,t.store.getState()))),n&&ad("after",e)}}}(ud),{reconciler:fd,applyProps:pd}=function(t,e){function n(t,{args:e=[],attach:n,...r},i){let a,s=`${t[0].toUpperCase()}${t.slice(1)}`;if("primitive"===t){if(void 0===r.object)throw new Error("R3F: Primitives without 'object' are invalid!");a=Oh(r.object,{type:t,root:i,attach:n,primitive:!0})}else{const r=qh[s];if(!r)throw new Error(`R3F: ${s} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(e))throw new Error("R3F: The args prop must be an array!");a=Oh(new r(...e),{type:t,root:i,attach:n,memoizedProps:{args:e}})}return void 0===a.__r3f.attach&&(a instanceof Gn?a.__r3f.attach="geometry":a instanceof Cn&&(a.__r3f.attach="material")),"inject"!==s&&Hh(a,r),a}function r(t,e){let n=!1;var r,i;e&&(null!=(r=e.__r3f)&&r.attach?zh(t,e,e.__r3f.attach):e.isObject3D&&t.isObject3D&&(t.add(e),n=!0),n||null==(i=t.__r3f)||i.objects.push(e),e.__r3f||Oh(e,{}),e.__r3f.parent=t,Vh(e),jh(e))}function i(t,e,n){let r=!1;if(e){var i,a;if(null!=(i=e.__r3f)&&i.attach)zh(t,e,e.__r3f.attach);else if(e.isObject3D&&t.isObject3D){e.parent=t,e.dispatchEvent({type:"added"});const i=t.children.filter((t=>t!==e)),a=i.indexOf(n);t.children=[...i.slice(0,a),e,...i.slice(a)],r=!0}r||null==(a=t.__r3f)||a.objects.push(e),e.__r3f||Oh(e,{}),e.__r3f.parent=t,Vh(e),jh(e)}}function a(t,e,n=!1){t&&[...t].forEach((t=>s(e,t,n)))}function s(t,e,n){if(e){var r,i,s;if(e.__r3f&&(e.__r3f.parent=null),null!=(r=t.__r3f)&&r.objects&&(t.__r3f.objects=t.__r3f.objects.filter((t=>t!==e))),null!=(i=e.__r3f)&&i.attach)Uh(t,e,e.__r3f.attach);else if(e.isObject3D&&t.isObject3D){var o;t.remove(e),null!=(o=e.__r3f)&&o.root&&function(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter((t=>t!==e)),n.initialHits=n.initialHits.filter((t=>t!==e)),n.hovered.forEach(((t,r)=>{(t.eventObject===e||t.object===e)&&n.hovered.delete(r)})),n.capturedMap.forEach(((t,r)=>{$h(n.capturedMap,e,t,r)}))}(e.__r3f.root,e)}const c=null==(s=e.__r3f)?void 0:s.primitive,u=void 0===n?null!==e.dispose&&!c:n;var l;if(!c)a(null==(l=e.__r3f)?void 0:l.objects,e,u),a(e.children,e,u);e.__r3f&&(delete e.__r3f.root,delete e.__r3f.objects,delete e.__r3f.handlers,delete e.__r3f.memoizedProps,c||delete e.__r3f),u&&e.dispose&&"Scene"!==e.type&&uh.exports.unstable_scheduleCallback(uh.exports.unstable_IdlePriority,(()=>{try{e.dispose()}catch{}})),jh(t)}}const o=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:mh({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(t,e)=>{if(!e)return;const n=t.getState().scene;!n.__r3f||(n.__r3f.root=t,r(n,e))},removeChildFromContainer:(t,e)=>{!e||s(t.getState().scene,e)},insertInContainerBefore:(t,e,n)=>{if(!e||!n)return;const r=t.getState().scene;!r.__r3f||i(r,e,n)},getRootHostContext:()=>null,getChildHostContext:t=>t,finalizeInitialChildren(t){var e;const n=null!=(e=null==t?void 0:t.__r3f)?e:{};return Boolean(n.handlers)},prepareUpdate(t,e,n,r){if(t.__r3f.primitive&&r.object&&r.object!==t)return[!0];{const{args:e=[],children:i,...a}=r,{args:s=[],children:o,...l}=n;if(!Array.isArray(e))throw new Error("R3F: the args prop must be an array!");if(e.some(((t,e)=>t!==s[e])))return[!0];const c=Gh(t,a,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(t,[e,i],a,o,l,c){e?function(t,e,i,a){var o;const l=null==(o=t.__r3f)?void 0:o.parent;if(!l)return;const c=n(e,i,t.__r3f.root);if(t.children){for(const e of t.children)e.__r3f&&r(c,e);t.children=t.children.filter((t=>!t.__r3f))}t.__r3f.objects.forEach((t=>r(c,t))),t.__r3f.objects=[],s(l,t),r(l,c),c.raycast&&c.__r3f.eventCount&&c.__r3f.root.getState().internal.interaction.push(c),[a,a.alternate].forEach((t=>{null!==t&&(t.stateNode=c,t.ref&&("function"==typeof t.ref?t.ref(c):t.ref.current=c))}))}(t,a,l,c):Hh(t,i)},commitMount(t,e,n,r){var i;const a=null!=(i=t.__r3f)?i:{};t.raycast&&a.handlers&&a.eventCount&&t.__r3f.root.getState().internal.interaction.push(t)},getPublicInstance:t=>t,prepareForCommit:()=>null,preparePortalMount:t=>Oh(t.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(t){var e;const{attach:n,parent:r}=null!=(e=t.__r3f)?e:{};n&&r&&Uh(r,t,n),t.isObject3D&&(t.visible=!1),jh(t)},unhideInstance(t,e){var n;const{attach:r,parent:i}=null!=(n=t.__r3f)?n:{};r&&i&&zh(i,t,r),(t.isObject3D&&null==e.visible||e.visible)&&(t.visible=!0),jh(t)},createTextInstance:o,hideTextInstance:o,unhideTextInstance:o,getCurrentEventPriority:()=>e?e():ih.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Bh.fun(performance.now)?performance.now:Bh.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Bh.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Bh.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Hh}}(0,(function(){var t,e;switch(null==(t=window)||null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ih.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ih.exports.ContinuousEventPriority;default:return ih.exports.DefaultEventPriority}})),md={objects:"shallow",strict:!1},gd=(t,e)=>{const n="function"==typeof t?t(e):t;return Xh(n)?n:new as({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function yd(t,e){if(e)return e;if(function(t){return t instanceof HTMLCanvasElement}(t)&&t.parentElement){const{width:e,height:n,top:r,left:i}=t.parentElement.getBoundingClientRect();return{width:e,height:n,top:r,left:i}}return{width:0,height:0,top:0,left:0}}function vd({store:t,children:e,onCreated:n,rootElement:i}){return Ah((()=>{const e=t.getState();e.set((t=>({internal:{...t.internal,active:!0}}))),n&&n(e),t.getState().events.connected||null==e.events.connect||e.events.connect(i)}),[]),r.createElement(Jh.Provider,{value:t},e)}function bd(t,e){const n=ud.get(t),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),fd.updateContainer(null,r,null,(()=>{i&&setTimeout((()=>{try{var n,r,a,s;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(s=i.gl)&&s.xr&&i.xr.disconnect(),function(t){t.dispose&&"Scene"!==t.type&&t.dispose();for(const e in t)null==e.dispose||e.dispose(),delete t[e]}(i),ud.delete(t),e&&e(t)}catch{}}),500)}))}}function xd(t,e,n){var r,i,a,s,o;function l(){var c=Date.now()-s;c<e&&c>=0?r=setTimeout(l,e-c):(r=null,n||(o=t.apply(a,i),a=i=null))}null==e&&(e=100);var c=function(){a=this,i=arguments,s=Date.now();var c=n&&!r;return r||(r=setTimeout(l,e)),c&&(o=t.apply(a,i),a=i=null),o};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(o=t.apply(a,i),a=i=null,clearTimeout(r),r=null)},c}fd.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:r.version}),xd.debounce=xd;var _d=xd;function wd(t){let{debounce:e,scroll:n,polyfill:i,offsetSize:a}=void 0===t?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,l]=(0,r.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=(0,r.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?"number"==typeof e?e:e.scroll:null,h=e?"number"==typeof e?e:e.resize:null,d=(0,r.useRef)(!1);(0,r.useEffect)((()=>(d.current=!0,()=>{d.current=!1})));const[f,p,m]=(0,r.useMemo)((()=>{const t=()=>{if(!c.current.element)return;const{left:t,top:e,width:n,height:r,bottom:i,right:s,x:o,y:u}=c.current.element.getBoundingClientRect(),h={left:t,top:e,width:n,height:r,bottom:i,right:s,x:o,y:u};c.current.element instanceof HTMLElement&&a&&(h.height=c.current.element.offsetHeight,h.width=c.current.element.offsetWidth),Object.freeze(h),d.current&&!Md(c.current.lastBounds,h)&&l(c.current.lastBounds=h)};return[t,h?_d(t,h):t,u?_d(t,u):t]}),[l,a,u,h]);function g(){c.current.scrollContainers&&(c.current.scrollContainers.forEach((t=>t.removeEventListener("scroll",m,!0))),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function y(){!c.current.element||(c.current.resizeObserver=new s(m),c.current.resizeObserver.observe(c.current.element),n&&c.current.scrollContainers&&c.current.scrollContainers.forEach((t=>t.addEventListener("scroll",m,{capture:!0,passive:!0}))))}return function(t,e){(0,r.useEffect)((()=>{if(e){const e=t;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e,!0)}}}),[t,e])}(m,Boolean(n)),function(t){(0,r.useEffect)((()=>{const e=t;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[t])}(p),(0,r.useEffect)((()=>{g(),y()}),[n,m,p]),(0,r.useEffect)((()=>g),[]),[t=>{!t||t===c.current.element||(g(),c.current.element=t,c.current.scrollContainers=Sd(t),y())},o,f]}function Sd(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some((t=>"auto"===t||"scroll"===t))&&e.push(t),[...e,...Sd(t.parentElement)]}const Ed=["x","y","top","bottom","left","right","width","height"],Md=(t,e)=>Ed.every((n=>t[n]===e[n])),Cd={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Td(t){const{handlePointer:e}=Yh(t);return{priority:1,enabled:!0,compute(t,e,n){e.pointer.set(t.offsetX/e.size.width*2-1,-t.offsetY/e.size.height*2+1),e.raycaster.setFromCamera(e.pointer,e.camera)},connected:void 0,handlers:Object.keys(Cd).reduce(((t,n)=>({...t,[n]:e(n)})),{}),connect:e=>{var n;const{set:r,events:i}=t.getState();null==i.disconnect||i.disconnect(),r((t=>({events:{...t.events,connected:e}}))),Object.entries(null!=(n=i.handlers)?n:[]).forEach((([t,n])=>{const[r,i]=Cd[t];e.addEventListener(r,n,{passive:i})}))},disconnect:()=>{const{set:e,events:n}=t.getState();var r;n.connected&&(Object.entries(null!=(r=n.handlers)?r:[]).forEach((([t,e])=>{if(n&&n.connected instanceof HTMLElement){const[r]=Cd[t];n.connected.removeEventListener(r,e)}})),e((t=>({events:{...t.events,connected:void 0}}))))}}}const Ad=r.forwardRef((function({children:t,fallback:e,resize:n,style:i,gl:a,events:s=Td,eventSource:o,eventPrefix:l,shadows:c,linear:u,flat:h,legacy:d,orthographic:f,frameloop:p,dpr:m,performance:g,raycaster:y,camera:v,onPointerMissed:b,onCreated:x,..._},w){r.useMemo((()=>(t=>{qh={...qh,...t}})(th)),[]);const[S,E]=wd({scroll:!0,debounce:{scroll:50,resize:0},...n}),M=r.useRef(null),C=r.useRef(null),[T,A]=r.useState(null);r.useImperativeHandle(w,(()=>M.current));const k=kh(b),[L,P]=r.useState(!1),[R,I]=r.useState(!1);if(L)throw L;if(R)throw R;const D=r.useRef(null);return E.width>0&&E.height>0&&T&&(D.current||(D.current=function(t){const e=ud.get(t),n=null==e?void 0:e.fiber,r=null==e?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i="function"==typeof reportError?reportError:console.error,a=r||Zh(hd,dd),s=n||fd.createContainer(a,ih.exports.ConcurrentRoot,null,!1,null,"",i,null);e||ud.set(t,{fiber:s,store:a});let o,l=!1;return{configure(e={}){let{gl:n,size:r,events:i,onCreated:s,shadows:c=!1,linear:u=!1,flat:h=!1,legacy:d=!1,orthographic:f=!1,frameloop:p="always",dpr:m=[1,2],performance:g,raycaster:y,camera:v,onPointerMissed:b}=e,x=a.getState(),_=x.gl;x.gl||x.set({gl:_=gd(n,t)});let w=x.raycaster;w||x.set({raycaster:w=new Eu});const{params:S,...E}=y||{};if(Bh.equ(E,w,md)||pd(w,{...E}),Bh.equ(S,w.params,md)||pd(w,{params:{...w.params,...S}}),!x.camera){const t=v instanceof dr,e=t?v:f?new Nr(0,0,0,0,.1,1e3):new fr(75,0,.1,1e3);t||(e.position.z=5,v&&pd(e,v),null!=v&&v.rotation||e.lookAt(0,0,0)),x.set({camera:e})}if(!x.xr){const t=(t,e)=>{const n=a.getState();"never"!==n.frameloop&&dd(t,!0,n,e)},e=()=>{const e=a.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?t:null),e.gl.xr.isPresenting||hd(e)},n={connect(){const t=a.getState().gl;t.xr.addEventListener("sessionstart",e),t.xr.addEventListener("sessionend",e)},disconnect(){const t=a.getState().gl;t.xr.removeEventListener("sessionstart",e),t.xr.removeEventListener("sessionend",e)}};_.xr&&n.connect(),x.set({xr:n})}if(_.shadowMap){const t=Bh.boo(c);if(t&&_.shadowMap.enabled!==c||!Bh.equ(c,_.shadowMap,md)){const e=_.shadowMap.enabled;_.shadowMap.enabled=!!c,t?_.shadowMap.type=2:Object.assign(_.shadowMap,c),e!==_.shadowMap.enabled&&(_.shadowMap.needsUpdate=!0)}}"ColorManagement"in th&&function(t,e,n){const r=n.pop();n.reduce(((t,e)=>t[e]),t)[r]=e}(th,d,["ColorManagement","legacyMode"]);const M=u?ft:pt,C=h?0:4;_.outputEncoding!==M&&(_.outputEncoding=M),_.toneMapping!==C&&(_.toneMapping=C),x.legacy!==d&&x.set((()=>({legacy:d}))),x.linear!==u&&x.set((()=>({linear:u}))),x.flat!==h&&x.set((()=>({flat:h}))),n&&!Bh.fun(n)&&!Xh(n)&&!Bh.equ(n,_,md)&&pd(_,n),i&&!x.events.handlers&&x.set({events:i(a)}),m&&x.viewport.dpr!==Ih(m)&&x.setDpr(m);const T=yd(t,r);return Bh.equ(T,x.size,md)||x.setSize(T.width,T.height,T.updateStyle,T.top,T.left),x.frameloop!==p&&x.setFrameloop(p),x.onPointerMissed||x.set({onPointerMissed:b}),g&&!Bh.equ(g,x.performance,md)&&x.set((t=>({performance:{...t.performance,...g}}))),o=s,l=!0,this},render(e){return l||this.configure(),fd.updateContainer(Sh(vd,{store:a,children:e,onCreated:o,rootElement:t}),s,null,(()=>{})),a},unmount(){bd(t)}}}(T)),D.current.configure({gl:a,events:s,shadows:c,linear:u,flat:h,legacy:d,orthographic:f,frameloop:p,dpr:m,performance:g,raycaster:y,camera:v,size:E,onPointerMissed:(...t)=>null==k.current?void 0:k.current(...t),onCreated:t=>{null==t.events.connect||t.events.connect(o?(t=>t&&t.hasOwnProperty("current"))(o)?o.current:o:C.current),l&&t.setEvents({compute:(t,e)=>{const n=t[l+"X"],r=t[l+"Y"];e.pointer.set(n/e.size.width*2-1,-r/e.size.height*2+1),e.raycaster.setFromCamera(e.pointer,e.camera)}}),null==x||x(t)}}),D.current.render(Sh(Ph,{set:I,children:Sh(r.Suspense,{fallback:Sh(Lh,{set:P}),children:t})}))),Ah((()=>{A(M.current)}),[]),r.useEffect((()=>{if(T)return()=>bd(T)}),[T]),Sh("div",{ref:C,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:o?"none":"auto",...i},..._,children:Sh("div",{ref:S,style:{width:"100%",height:"100%"},children:Sh("canvas",{ref:M,style:{display:"block"},children:e})})})}));var kd,Ld=[],Pd="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(kd||(kd={}));var Rd,Id,Dd=function(t){return Object.freeze(t)},Bd=function(t,e){this.inlineSize=t,this.blockSize=e,Dd(this)},Od=function(){function t(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Dd(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),Nd=function(t){return t instanceof SVGElement&&"getBBox"in t},Fd=function(t){if(Nd(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var i=t,a=i.offsetWidth,s=i.offsetHeight;return!(a||s||t.getClientRects().length)},zd=function(t){var e,n;if(t instanceof Element)return!0;var r=null===(n=null===(e=t)||void 0===e?void 0:e.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&t instanceof r.Element)},Ud=typeof window<"u"?window:{},Gd=new WeakMap,Hd=/auto|scroll/,jd=/^tb|vertical/,Vd=/msie|trident/i.test(Ud.navigator&&Ud.navigator.userAgent),Wd=function(t){return parseFloat(t||"0")},$d=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!1),new Bd((n?e:t)||0,(n?t:e)||0)},Yd=Dd({devicePixelContentBoxSize:$d(),borderBoxSize:$d(),contentBoxSize:$d(),contentRect:new Od(0,0,0,0)}),qd=function(t,e){if(void 0===e&&(e=!1),Gd.has(t)&&!e)return Gd.get(t);if(Fd(t))return Gd.set(t,Yd),Yd;var n=getComputedStyle(t),r=Nd(t)&&t.ownerSVGElement&&t.getBBox(),i=!Vd&&"border-box"===n.boxSizing,a=jd.test(n.writingMode||""),s=!r&&Hd.test(n.overflowY||""),o=!r&&Hd.test(n.overflowX||""),l=r?0:Wd(n.paddingTop),c=r?0:Wd(n.paddingRight),u=r?0:Wd(n.paddingBottom),h=r?0:Wd(n.paddingLeft),d=r?0:Wd(n.borderTopWidth),f=r?0:Wd(n.borderRightWidth),p=r?0:Wd(n.borderBottomWidth),m=h+c,g=l+u,y=(r?0:Wd(n.borderLeftWidth))+f,v=d+p,b=o?t.offsetHeight-v-t.clientHeight:0,x=s?t.offsetWidth-y-t.clientWidth:0,_=i?m+y:0,w=i?g+v:0,S=r?r.width:Wd(n.width)-_-x,E=r?r.height:Wd(n.height)-w-b,M=S+m+x+y,C=E+g+b+v,T=Dd({devicePixelContentBoxSize:$d(Math.round(S*devicePixelRatio),Math.round(E*devicePixelRatio),a),borderBoxSize:$d(M,C,a),contentBoxSize:$d(S,E,a),contentRect:new Od(h,l,S,E)});return Gd.set(t,T),T},Xd=function(t,e,n){var r=qd(t,n),i=r.borderBoxSize,a=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(e){case kd.DEVICE_PIXEL_CONTENT_BOX:return s;case kd.BORDER_BOX:return i;default:return a}},Jd=function(t){var e=qd(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=Dd([e.borderBoxSize]),this.contentBoxSize=Dd([e.contentBoxSize]),this.devicePixelContentBoxSize=Dd([e.devicePixelContentBoxSize])},Zd=function(t){if(Fd(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},Kd=function(){var t=1/0,e=[];Ld.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(e){var n=new Jd(e.target),i=Zd(e.target);r.push(n),e.lastReportedSize=Xd(e.target,e.observedBox),i<t&&(t=i)})),e.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=e;n<r.length;n++){(0,r[n])()}return t},Qd=function(t){Ld.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(n){n.isActive()&&(Zd(n.target)>t?e.activeTargets.push(n):e.skippedTargets.push(n))}))}))},tf=function(){var t=0;for(Qd(t);Ld.some((function(t){return t.activeTargets.length>0}));)t=Kd(),Qd(t);return Ld.some((function(t){return t.skippedTargets.length>0}))&&function(){var t;"function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:Pd}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=Pd),window.dispatchEvent(t)}(),t>0},ef=[],nf=function(t){if(!Rd){var e=0,n=document.createTextNode("");new MutationObserver((function(){return ef.splice(0).forEach((function(t){return t()}))})).observe(n,{characterData:!0}),Rd=function(){n.textContent=""+(e?e--:e++)}}ef.push(t),Rd()},rf=0,af={attributes:!0,characterData:!0,childList:!0,subtree:!0},sf=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],of=function(t){return void 0===t&&(t=0),Date.now()+t},lf=!1,cf=function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!lf){lf=!0;var n=of(t);!function(t){nf((function(){requestAnimationFrame(t)}))}((function(){var r=!1;try{r=tf()}finally{if(lf=!1,t=n-of(),!rf)return;r?e.run(1e3):t>0?e.run(t):e.start()}}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,af)};document.body?e():Ud.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),sf.forEach((function(e){return Ud.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),sf.forEach((function(e){return Ud.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}(),uf=new cf,hf=function(t){!rf&&t>0&&uf.start(),!(rf+=t)&&uf.stop()},df=function(){function t(t,e){this.target=t,this.observedBox=e||kd.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t=Xd(this.target,this.observedBox,!0);return function(t){return!Nd(t)&&!function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)&&"inline"===getComputedStyle(t).display}(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},t}(),ff=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},pf=new WeakMap,mf=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},gf=function(){function t(){}return t.connect=function(t,e){var n=new ff(t,e);pf.set(t,n)},t.observe=function(t,e,n){var r=pf.get(t),i=0===r.observationTargets.length;mf(r.observationTargets,e)<0&&(i&&Ld.push(r),r.observationTargets.push(new df(e,n&&n.box)),hf(1),uf.schedule())},t.unobserve=function(t,e){var n=pf.get(t),r=mf(n.observationTargets,e),i=1===n.observationTargets.length;r>=0&&(i&&Ld.splice(Ld.indexOf(n),1),n.observationTargets.splice(r,1),hf(-1))},t.disconnect=function(t){var e=this,n=pf.get(t);n.observationTargets.slice().forEach((function(n){return e.unobserve(t,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},t}(),yf=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");gf.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!zd(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");gf.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!zd(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");gf.unobserve(this,t)},t.prototype.disconnect=function(){gf.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),vf={exports:{}},bf={},xf={exports:{}},_f={};var wf,Sf;function Ef(){return wf||(wf=1,function(t){t.exports=(Id||(Id=1,function(t){function e(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,a=t[r];if(!(0<i(a,e)))break t;t[r]=e,t[n]=a,n=r}}function n(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,a=t.length,s=a>>>1;r<s;){var o=2*(r+1)-1,l=t[o],c=o+1,u=t[c];if(0>i(l,n))c<a&&0>i(u,l)?(t[r]=u,t[c]=n,r=c):(t[r]=l,t[o]=n,r=o);else{if(!(c<a&&0>i(u,n)))break t;t[r]=u,t[c]=n,r=c}}}return e}function i(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function b(t){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=t))break;r(c),i.sortIndex=i.expirationTime,e(l,i)}i=n(c)}}function x(t){if(m=!1,b(t),!p)if(null!==n(l))p=!0,R(_);else{var e=n(c);null!==e&&I(x,e.startTime-t)}}function _(e,i){p=!1,m&&(m=!1,y(M),M=-1),f=!0;var a=d;try{for(b(i),h=n(l);null!==h&&(!(h.expirationTime>i)||e&&!A());){var s=h.callback;if("function"==typeof s){h.callback=null,d=h.priorityLevel;var o=s(h.expirationTime<=i);i=t.unstable_now(),"function"==typeof o?h.callback=o:h===n(l)&&r(l),b(i)}else r(l);h=n(l)}if(null!==h)var u=!0;else{var g=n(c);null!==g&&I(x,g.startTime-i),u=!1}return u}finally{h=null,d=a,f=!1}}typeof navigator<"u"&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,E=null,M=-1,C=5,T=-1;function A(){return!(t.unstable_now()-T<C)}function k(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?w():(S=!1,E=null)}}else S=!1}if("function"==typeof v)w=function(){v(k)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,P=L.port2;L.port1.onmessage=k,w=function(){P.postMessage(null)}}else w=function(){g(k,0)};function R(t){E=t,S||(S=!0,w())}function I(e,n){M=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(t){t.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,R(_))},t.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<t?Math.floor(1e3/t):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(t){switch(d){case 1:case 2:case 3:var e=3;break;default:e=d}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_scheduleCallback=function(r,i,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(r.sortIndex=a,e(c,r),null===n(l)&&r===n(c)&&(m?(y(M),M=-1):m=!0,I(x,a-s))):(r.sortIndex=o,e(l,r),p||f||(p=!0,R(_))),r},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(t){var e=d;return function(){var n=d;d=e;try{return t.apply(this,arguments)}finally{d=n}}}}(_f)),_f)}(xf)),xf.exports}function Mf(){if(Sf)return bf;Sf=1;var t=r,e=Ef();function n(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function s(t,e){o(t,e),o(t+"Capture",e)}function o(t,e){for(a[t]=e,t=0;t<e.length;t++)i.add(e[t])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},d={};function f(t,e,n,r,i,a,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){p[t]=new f(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];p[e]=new f(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){p[t]=new f(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){p[t]=new f(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){p[t]=new f(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){p[t]=new f(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){p[t]=new f(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){p[t]=new f(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){p[t]=new f(t,5,!1,t.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(t){return t[1].toUpperCase()}function y(t,e,n,r){var i=p.hasOwnProperty(e)?p[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||typeof e>"u"||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!c.call(d,t)||!c.call(h,t)&&(u.test(t)?d[t]=!0:(h[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(m,g);p[e]=new f(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(m,g);p[e]=new f(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(m,g);p[e]=new f(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){p[t]=new f(t,1,!1,t.toLowerCase(),null,!1,!1)})),p.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){p[t]=new f(t,1,!1,t.toLowerCase(),null,!0,!0)}));var v=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),M=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),R=Symbol.iterator;function I(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=R&&t[R]||t["@@iterator"])?t:null}var D,B=Object.assign;function O(t){if(void 0===D)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);D=e&&e[1]||""}return"\n"+D+t}var N=!1;function F(t,e){if(!t||N)return"";N=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=o);break}}}finally{N=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?O(t):""}function z(t){switch(t.tag){case 5:return O(t.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return t=F(t.type,!1);case 11:return t=F(t.type.render,!1);case 1:return t=F(t.type,!0);default:return""}}function U(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case w:return"StrictMode";case T:return"Suspense";case A:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case M:return(t.displayName||"Context")+".Consumer";case E:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case k:return null!==(e=t.displayName||null)?e:U(t.type)||"Memo";case L:e=t._payload,t=t._init;try{return U(t(e))}catch{}}return null}function G(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(e);case 8:return e===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e}return null}function H(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function j(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function V(t){t._valueTracker||(t._valueTracker=function(t){var e=j(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function W(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=j(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function $(t){if(typeof(t=t||(typeof document<"u"?document:void 0))>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Y(t,e){var n=e.checked;return B({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function q(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=H(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function X(t,e){null!=(e=e.checked)&&y(t,"checked",e,!1)}function J(t,e){X(t,e);var n=H(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?K(t,e.type,n):e.hasOwnProperty("defaultValue")&&K(t,e.type,H(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function K(t,e,n){("number"!==e||$(t.ownerDocument)!==t)&&(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Q=Array.isArray;function tt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+H(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function et(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(n(91));return B({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nt(t,e){var r=e.value;if(null==r){if(r=e.children,e=e.defaultValue,null!=r){if(null!=e)throw Error(n(92));if(Q(r)){if(1<r.length)throw Error(n(93));r=r[0]}e=r}null==e&&(e=""),r=e}t._wrapperState={initialValue:H(r)}}function rt(t,e){var n=H(e.value),r=H(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function it(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function st(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ot,lt=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ot=ot||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ot.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function ct(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ht=["Webkit","ms","Moz","O"];function dt(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||ut.hasOwnProperty(t)&&ut[t]?(""+e).trim():e+"px"}function ft(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=dt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ut).forEach((function(t){ht.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ut[e]=ut[t]}))}));var pt=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mt(t,e){if(e){if(pt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(n(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(n(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(n(62))}}function gt(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yt=null;function vt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var bt=null,xt=null,_t=null;function wt(t){if(t=fi(t)){if("function"!=typeof bt)throw Error(n(280));var e=t.stateNode;e&&(e=mi(e),bt(t.stateNode,t.type,e))}}function St(t){xt?_t?_t.push(t):_t=[t]:xt=t}function Et(){if(xt){var t=xt,e=_t;if(_t=xt=null,wt(t),e)for(t=0;t<e.length;t++)wt(e[t])}}function Mt(t,e){return t(e)}function Ct(){}var Tt=!1;function At(t,e,n){if(Tt)return t(e,n);Tt=!0;try{return Mt(t,e,n)}finally{Tt=!1,(null!==xt||null!==_t)&&(Ct(),Et())}}function kt(t,e){var r=t.stateNode;if(null===r)return null;var i=mi(r);if(null===i)return null;r=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(r&&"function"!=typeof r)throw Error(n(231,e,typeof r));return r}var Lt=!1;if(l)try{var Pt={};Object.defineProperty(Pt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Pt,Pt),window.removeEventListener("test",Pt,Pt)}catch{Lt=!1}function Rt(t,e,n,r,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var It=!1,Dt=null,Bt=!1,Ot=null,Nt={onError:function(t){It=!0,Dt=t}};function Ft(t,e,n,r,i,a,s,o,l){It=!1,Dt=null,Rt.apply(Nt,arguments)}function zt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ut(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Gt(t){if(zt(t)!==t)throw Error(n(188))}function Ht(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=zt(t)))throw Error(n(188));return e!==t?null:t}for(var r=t,i=e;;){var a=r.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(i=a.return)){r=i;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return Gt(a),t;if(s===i)return Gt(a),e;s=s.sibling}throw Error(n(188))}if(r.return!==i.return)r=a,i=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,i=s;break}if(l===i){o=!0,i=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,i=a;break}if(l===i){o=!0,i=s,r=a;break}l=l.sibling}if(!o)throw Error(n(189))}}if(r.alternate!==i)throw Error(n(190))}if(3!==r.tag)throw Error(n(188));return r.stateNode.current===r?t:e}(t))?jt(t):null}function jt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=jt(t);if(null!==e)return e;t=t.sibling}return null}var Vt=e.unstable_scheduleCallback,Wt=e.unstable_cancelCallback,$t=e.unstable_shouldYield,Yt=e.unstable_requestPaint,qt=e.unstable_now,Xt=e.unstable_getCurrentPriorityLevel,Jt=e.unstable_ImmediatePriority,Zt=e.unstable_UserBlockingPriority,Kt=e.unstable_NormalPriority,Qt=e.unstable_LowPriority,te=e.unstable_IdlePriority,ee=null,ne=null;var re=Math.clz32?Math.clz32:function(t){return 0==(t>>>=0)?32:31-(ie(t)/ae|0)|0},ie=Math.log,ae=Math.LN2;var se=64,oe=4194304;function le(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ce(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=le(o):0!==(a&=s)&&(r=le(a))}else 0!==(s=n&~i)?r=le(s):0!==a&&(r=le(a));if(0===r)return 0;if(0!==e&&e!==r&&0==(e&i)&&((i=r&-r)>=(a=e&-e)||16===i&&0!=(4194240&a)))return e;if(0!=(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-re(e)),r|=t[n],e&=~i;return r}function ue(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function he(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function de(){var t=se;return 0==(4194240&(se<<=1))&&(se=64),t}function fe(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pe(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-re(e)]=n}function me(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-re(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ge=0;function ye(t){return 1<(t&=-t)?4<t?0!=(268435455&t)?16:536870912:4:1}var ve,be,xe,_e,we,Se=!1,Ee=[],Me=null,Ce=null,Te=null,Ae=new Map,ke=new Map,Le=[],Pe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Re(t,e){switch(t){case"focusin":case"focusout":Me=null;break;case"dragenter":case"dragleave":Ce=null;break;case"mouseover":case"mouseout":Te=null;break;case"pointerover":case"pointerout":Ae.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ke.delete(e.pointerId)}}function Ie(t,e,n,r,i,a){return null===t||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==e&&(null!==(e=fi(e))&&be(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function De(t){var e=di(t.target);if(null!==e){var n=zt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ut(n)))return t.blockedOn=e,void we(t.priority,(function(){xe(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Be(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=fi(n))&&be(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);yt=r,n.target.dispatchEvent(r),yt=null,e.shift()}return!0}function Oe(t,e,n){Be(t)&&n.delete(e)}function Ne(){Se=!1,null!==Me&&Be(Me)&&(Me=null),null!==Ce&&Be(Ce)&&(Ce=null),null!==Te&&Be(Te)&&(Te=null),Ae.forEach(Oe),ke.forEach(Oe)}function Fe(t,n){t.blockedOn===n&&(t.blockedOn=null,Se||(Se=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ne)))}function ze(t){function e(e){return Fe(e,t)}if(0<Ee.length){Fe(Ee[0],t);for(var n=1;n<Ee.length;n++){var r=Ee[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Me&&Fe(Me,t),null!==Ce&&Fe(Ce,t),null!==Te&&Fe(Te,t),Ae.forEach(e),ke.forEach(e),n=0;n<Le.length;n++)(r=Le[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Le.length&&null===(n=Le[0]).blockedOn;)De(n),null===n.blockedOn&&Le.shift()}var Ue=v.ReactCurrentBatchConfig,Ge=!0;function He(t,e,n,r){var i=ge,a=Ue.transition;Ue.transition=null;try{ge=1,Ve(t,e,n,r)}finally{ge=i,Ue.transition=a}}function je(t,e,n,r){var i=ge,a=Ue.transition;Ue.transition=null;try{ge=4,Ve(t,e,n,r)}finally{ge=i,Ue.transition=a}}function Ve(t,e,n,r){if(Ge){var i=$e(t,e,n,r);if(null===i)Fr(t,e,r,We,n),Re(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Me=Ie(Me,t,e,n,r,i),!0;case"dragenter":return Ce=Ie(Ce,t,e,n,r,i),!0;case"mouseover":return Te=Ie(Te,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ae.set(a,Ie(Ae.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ke.set(a,Ie(ke.get(a)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Re(t,r),4&e&&-1<Pe.indexOf(t)){for(;null!==i;){var a=fi(i);if(null!==a&&ve(a),null===(a=$e(t,e,n,r))&&Fr(t,e,r,We,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Fr(t,e,r,null,n)}}var We=null;function $e(t,e,n,r){if(We=null,null!==(t=di(t=vt(r))))if(null===(e=zt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ut(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return We=t,null}function Ye(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xt()){case Jt:return 1;case Zt:return 4;case Kt:case Qt:return 16;case te:return 536870912;default:return 16}default:return 16}}var qe=null,Xe=null,Je=null;function Ze(){if(Je)return Je;var t,e,n=Xe,r=n.length,i="value"in qe?qe.value:qe.textContent,a=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[a-e];e++);return Je=i.slice(t,1<e?1-e:void 0)}function Ke(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function Qe(){return!0}function tn(){return!1}function en(t){function e(e,n,r,i,a){for(var s in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Qe:tn,this.isPropagationStopped=tn,this}return B(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Qe)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Qe)},persist:function(){},isPersistent:Qe}),e}var nn,rn,an,sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},on=en(sn),ln=B({},sn,{view:0,detail:0}),cn=en(ln),un=B({},ln,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==an&&(an&&"mousemove"===t.type?(nn=t.screenX-an.screenX,rn=t.screenY-an.screenY):rn=nn=0,an=t),nn)},movementY:function(t){return"movementY"in t?t.movementY:rn}}),hn=en(un),dn=en(B({},un,{dataTransfer:0})),fn=en(B({},ln,{relatedTarget:0})),pn=en(B({},sn,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=en(B({},sn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),gn=en(B({},sn,{data:0})),yn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=bn[t])&&!!e[t]}function _n(){return xn}var wn=en(B({},ln,{key:function(t){if(t.key){var e=yn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Ke(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?vn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(t){return"keypress"===t.type?Ke(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Ke(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),Sn=en(B({},un,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=en(B({},ln,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Mn=en(B({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=en(B({},un,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),Tn=[9,13,27,32],An=l&&"CompositionEvent"in window,kn=null;l&&"documentMode"in document&&(kn=document.documentMode);var Ln=l&&"TextEvent"in window&&!kn,Pn=l&&(!An||kn&&8<kn&&11>=kn),Rn=String.fromCharCode(32),In=!1;function Dn(t,e){switch(t){case"keyup":return-1!==Tn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var On=!1;var Nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Nn[t.type]:"textarea"===e}function zn(t,e,n,r){St(r),0<(e=Ur(e,"onChange")).length&&(n=new on("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Un=null,Gn=null;function Hn(t){Rr(t,0)}function jn(t){if(W(pi(t)))return t}function Vn(t,e){if("change"===t)return e}var Wn=!1;if(l){var $n;if(l){var Yn="oninput"in document;if(!Yn){var qn=document.createElement("div");qn.setAttribute("oninput","return;"),Yn="function"==typeof qn.oninput}$n=Yn}else $n=!1;Wn=$n&&(!document.documentMode||9<document.documentMode)}function Xn(){Un&&(Un.detachEvent("onpropertychange",Jn),Gn=Un=null)}function Jn(t){if("value"===t.propertyName&&jn(Gn)){var e=[];zn(e,Gn,t,vt(t)),At(Hn,e)}}function Zn(t,e,n){"focusin"===t?(Xn(),Gn=n,(Un=e).attachEvent("onpropertychange",Jn)):"focusout"===t&&Xn()}function Kn(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return jn(Gn)}function Qn(t,e){if("click"===t)return jn(e)}function tr(t,e){if("input"===t||"change"===t)return jn(e)}var er="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e};function nr(t,e){if(er(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!c.call(e,i)||!er(t[i],e[i]))return!1}return!0}function rr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ir(t,e){var n,r=rr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=rr(r)}}function ar(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?ar(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function sr(){for(var t=window,e=$();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch{n=!1}if(!n)break;e=$((t=e.contentWindow).document)}return e}function or(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function lr(t){var e=sr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ar(n.ownerDocument.documentElement,n)){if(null!==r&&or(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=ir(n,a);var s=ir(n,r);i&&s&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cr=l&&"documentMode"in document&&11>=document.documentMode,ur=null,hr=null,dr=null,fr=!1;function pr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;fr||null==ur||ur!==$(r)||("selectionStart"in(r=ur)&&or(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},dr&&nr(dr,r)||(dr=r,0<(r=Ur(hr,"onSelect")).length&&(e=new on("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ur)))}function mr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gr={animationend:mr("Animation","AnimationEnd"),animationiteration:mr("Animation","AnimationIteration"),animationstart:mr("Animation","AnimationStart"),transitionend:mr("Transition","TransitionEnd")},yr={},vr={};function br(t){if(yr[t])return yr[t];if(!gr[t])return t;var e,n=gr[t];for(e in n)if(n.hasOwnProperty(e)&&e in vr)return yr[t]=n[e];return t}l&&(vr=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);var xr=br("animationend"),_r=br("animationiteration"),wr=br("animationstart"),Sr=br("transitionend"),Er=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(t,e){Er.set(t,e),s(e,[t])}for(var Tr=0;Tr<Mr.length;Tr++){var Ar=Mr[Tr];Cr(Ar.toLowerCase(),"on"+(Ar[0].toUpperCase()+Ar.slice(1)))}Cr(xr,"onAnimationEnd"),Cr(_r,"onAnimationIteration"),Cr(wr,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(Sr,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function Pr(t,e,r){var i=t.type||"unknown-event";t.currentTarget=r,function(t,e,r,i,a,s,o,l,c){if(Ft.apply(this,arguments),It){if(!It)throw Error(n(198));var u=Dt;It=!1,Dt=null,Bt||(Bt=!0,Ot=u)}}(i,e,void 0,t),t.currentTarget=null}function Rr(t,e){e=0!=(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break t;Pr(i,o,c),a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break t;Pr(i,o,c),a=l}}}if(Bt)throw t=Ot,Bt=!1,Ot=null,t}function Ir(t,e){var n=e[ci];void 0===n&&(n=e[ci]=new Set);var r=t+"__bubble";n.has(r)||(Nr(e,t,2,!1),n.add(r))}function Dr(t,e,n){var r=0;e&&(r|=4),Nr(n,t,r,e)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Or(t){if(!t[Br]){t[Br]=!0,i.forEach((function(e){"selectionchange"!==e&&(Lr.has(e)||Dr(e,!1,t),Dr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Br]||(e[Br]=!0,Dr("selectionchange",!1,e))}}function Nr(t,e,n,r){switch(Ye(e)){case 1:var i=He;break;case 4:i=je;break;default:i=Ve}n=i.bind(null,e,n,t),i=void 0,!Lt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Fr(t,e,n,r,i){var a=r;if(0==(1&e)&&0==(2&e)&&null!==r)t:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=di(o)))return;if(5===(l=s.tag)||6===l){r=a=s;continue t}o=o.parentNode}}r=r.return}At((function(){var r=a,i=vt(n),s=[];t:{var o=Er.get(t);if(void 0!==o){var l=on,c=t;switch(t){case"keypress":if(0===Ke(n))break t;case"keydown":case"keyup":l=wn;break;case"focusin":c="focus",l=fn;break;case"focusout":c="blur",l=fn;break;case"beforeblur":case"afterblur":l=fn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case xr:case _r:case wr:l=pn;break;case Sr:l=Mn;break;case"scroll":l=cn;break;case"wheel":l=Cn;break;case"copy":case"cut":case"paste":l=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Sn}var u=0!=(4&e),h=!u&&"scroll"===t,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=kt(p,d))&&u.push(zr(p,m,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),s.push({event:o,listeners:u}))}}if(0==(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(o="mouseover"===t||"pointerover"===t)||n===yt||!(c=n.relatedTarget||n.fromElement)||!di(c)&&!c[li])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?di(c):null)&&(c!==(h=zt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=hn,m="onMouseLeave",d="onMouseEnter",p="mouse",("pointerout"===t||"pointerover"===t)&&(u=Sn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:pi(l),f=null==c?o:pi(c),(o=new u(m,p+"leave",l,n,i)).target=h,o.relatedTarget=f,m=null,di(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)t:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break t;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Hr(s,o,l,u,!1),null!==c&&null!==h&&Hr(s,h,c,u,!0)}if("select"===(l=(o=r?pi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Vn;else if(Fn(o))if(Wn)g=tr;else{g=Kn;var y=Zn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=Qn);switch(g&&(g=g(t,r))?zn(s,g,n,i):(y&&y(t,o,r),"focusout"===t&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&K(o,"number",o.value)),y=r?pi(r):window,t){case"focusin":(Fn(y)||"true"===y.contentEditable)&&(ur=y,hr=r,dr=null);break;case"focusout":dr=hr=ur=null;break;case"mousedown":fr=!0;break;case"contextmenu":case"mouseup":case"dragend":fr=!1,pr(s,n,i);break;case"selectionchange":if(cr)break;case"keydown":case"keyup":pr(s,n,i)}var v;if(An)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else On?Dn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Pn&&"ko"!==n.locale&&(On||"onCompositionStart"!==b?"onCompositionEnd"===b&&On&&(v=Ze()):(Xe="value"in(qe=i)?qe.value:qe.textContent,On=!0)),0<(y=Ur(r,b)).length&&(b=new gn(b,t,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=Ln?function(t,e){switch(t){case"compositionend":return Bn(e);case"keypress":return 32!==e.which?null:(In=!0,Rn);case"textInput":return(t=e.data)===Rn&&In?null:t;default:return null}}(t,n):function(t,e){if(On)return"compositionend"===t||!An&&Dn(t,e)?(t=Ze(),Je=Xe=qe=null,On=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Ur(r,"onBeforeInput")).length&&(i=new gn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Rr(s,e)}))}function zr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ur(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=kt(t,n))&&r.unshift(zr(t,a,i)),null!=(a=kt(t,e))&&r.push(zr(t,a,i))),t=t.return}return r}function Gr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Hr(t,e,n,r,i){for(var a=e._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=kt(n,a))&&s.unshift(zr(n,l,o)):i||null!=(l=kt(n,a))&&s.push(zr(n,l,o))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}var jr=/\r\n?/g,Vr=/\u0000|\uFFFD/g;function Wr(t){return("string"==typeof t?t:""+t).replace(jr,"\n").replace(Vr,"")}function $r(t,e,r){if(e=Wr(e),Wr(t)!==e&&r)throw Error(n(425))}function Yr(){}var qr=null,Xr=null;function Jr(t,e){return"textarea"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Zr="function"==typeof setTimeout?setTimeout:void 0,Kr="function"==typeof clearTimeout?clearTimeout:void 0,Qr="function"==typeof Promise?Promise:void 0,ti="function"==typeof queueMicrotask?queueMicrotask:typeof Qr<"u"?function(t){return Qr.resolve(null).then(t).catch(ei)}:Zr;function ei(t){setTimeout((function(){throw t}))}function ni(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void ze(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);ze(e)}function ri(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ii(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var ai=Math.random().toString(36).slice(2),si="__reactFiber$"+ai,oi="__reactProps$"+ai,li="__reactContainer$"+ai,ci="__reactEvents$"+ai,ui="__reactListeners$"+ai,hi="__reactHandles$"+ai;function di(t){var e=t[si];if(e)return e;for(var n=t.parentNode;n;){if(e=n[li]||n[si]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ii(t);null!==t;){if(n=t[si])return n;t=ii(t)}return e}n=(t=n).parentNode}return null}function fi(t){return!(t=t[si]||t[li])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function pi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(n(33))}function mi(t){return t[oi]||null}var gi=[],yi=-1;function vi(t){return{current:t}}function bi(t){0>yi||(t.current=gi[yi],gi[yi]=null,yi--)}function xi(t,e){yi++,gi[yi]=t.current,t.current=e}var _i={},wi=vi(_i),Si=vi(!1),Ei=_i;function Mi(t,e){var n=t.type.contextTypes;if(!n)return _i;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Ci(t){return null!=(t=t.childContextTypes)}function Ti(){bi(Si),bi(wi)}function Ai(t,e,r){if(wi.current!==_i)throw Error(n(168));xi(wi,e),xi(Si,r)}function ki(t,e,r){var i=t.stateNode;if(e=e.childContextTypes,"function"!=typeof i.getChildContext)return r;for(var a in i=i.getChildContext())if(!(a in e))throw Error(n(108,G(t)||"Unknown",a));return B({},r,i)}function Li(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_i,Ei=wi.current,xi(wi,t),xi(Si,Si.current),!0}function Pi(t,e,r){var i=t.stateNode;if(!i)throw Error(n(169));r?(t=ki(t,e,Ei),i.__reactInternalMemoizedMergedChildContext=t,bi(Si),bi(wi),xi(wi,t)):bi(Si),xi(Si,r)}var Ri=null,Ii=!1,Di=!1;function Bi(t){null===Ri?Ri=[t]:Ri.push(t)}function Oi(){if(!Di&&null!==Ri){Di=!0;var t=0,e=ge;try{var n=Ri;for(ge=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}Ri=null,Ii=!1}catch(i){throw null!==Ri&&(Ri=Ri.slice(t+1)),Vt(Jt,Oi),i}finally{ge=e,Di=!1}}return null}var Ni=[],Fi=0,zi=null,Ui=0,Gi=[],Hi=0,ji=null,Vi=1,Wi="";function $i(t,e){Ni[Fi++]=Ui,Ni[Fi++]=zi,zi=t,Ui=e}function Yi(t,e,n){Gi[Hi++]=Vi,Gi[Hi++]=Wi,Gi[Hi++]=ji,ji=t;var r=Vi;t=Wi;var i=32-re(r)-1;r&=~(1<<i),n+=1;var a=32-re(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Vi=1<<32-re(e)+i|n<<i|r,Wi=a+t}else Vi=1<<a|n<<i|r,Wi=t}function qi(t){null!==t.return&&($i(t,1),Yi(t,1,0))}function Xi(t){for(;t===zi;)zi=Ni[--Fi],Ni[Fi]=null,Ui=Ni[--Fi],Ni[Fi]=null;for(;t===ji;)ji=Gi[--Hi],Gi[Hi]=null,Wi=Gi[--Hi],Gi[Hi]=null,Vi=Gi[--Hi],Gi[Hi]=null}var Ji=null,Zi=null,Ki=!1,Qi=null;function ta(t,e){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function ea(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,Ji=t,Zi=ri(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,Ji=t,Zi=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==ji?{id:Vi,overflow:Wi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,Ji=t,Zi=null,!0);default:return!1}}function na(t){return 0!=(1&t.mode)&&0==(128&t.flags)}function ra(t){if(Ki){var e=Zi;if(e){var r=e;if(!ea(t,e)){if(na(t))throw Error(n(418));e=ri(r.nextSibling);var i=Ji;e&&ea(t,e)?ta(i,r):(t.flags=-4097&t.flags|2,Ki=!1,Ji=t)}}else{if(na(t))throw Error(n(418));t.flags=-4097&t.flags|2,Ki=!1,Ji=t}}}function ia(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Ji=t}function aa(t){if(t!==Ji)return!1;if(!Ki)return ia(t),Ki=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!Jr(t.type,t.memoizedProps)),e&&(e=Zi)){if(na(t))throw sa(),Error(n(418));for(;e;)ta(t,e),e=ri(e.nextSibling)}if(ia(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(n(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var r=t.data;if("/$"===r){if(0===e){Zi=ri(t.nextSibling);break t}e--}else"$"!==r&&"$!"!==r&&"$?"!==r||e++}t=t.nextSibling}Zi=null}}else Zi=Ji?ri(t.stateNode.nextSibling):null;return!0}function sa(){for(var t=Zi;t;)t=ri(t.nextSibling)}function oa(){Zi=Ji=null,Ki=!1}function la(t){null===Qi?Qi=[t]:Qi.push(t)}var ca=v.ReactCurrentBatchConfig;function ua(t,e){if(t&&t.defaultProps){for(var n in e=B({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var ha=vi(null),da=null,fa=null,pa=null;function ma(){pa=fa=da=null}function ga(t){var e=ha.current;bi(ha),t._currentValue=e}function ya(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function va(t,e){da=t,pa=fa=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&e)&&(po=!0),t.firstContext=null)}function ba(t){var e=t._currentValue;if(pa!==t)if(t={context:t,memoizedValue:e,next:null},null===fa){if(null===da)throw Error(n(308));fa=t,da.dependencies={lanes:0,firstContext:t}}else fa=fa.next=t;return e}var xa=null;function _a(t){null===xa?xa=[t]:xa.push(t)}function wa(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,_a(e)):(n.next=i.next,i.next=n),e.interleaved=n,Sa(t,r)}function Sa(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Ea=!1;function Ma(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ca(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ta(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Aa(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&wl)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Sa(t,n)}return null===(i=r.interleaved)?(e.next=e,_a(r)):(e.next=i.next,i.next=e),r.interleaved=e,Sa(t,n)}function ka(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!=(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,me(t,n)}}function La(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=e:a=a.next=e}else i=a=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pa(t,e,n,r){var i=t.updateQueue;Ea=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=t.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var h=i.baseState;for(s=0,u=c=l=null,o=a;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var p=t,m=o;switch(d=e,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(f,h,d):p))break t;h=B({},h,d);break t;case 2:Ea=!0}}null!==o.callback&&0!==o.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,s|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(e=i.shared.interleaved)){i=e;do{s|=i.lane,i=i.next}while(i!==e)}else null===a&&(i.shared.lanes=0);Ll|=s,t.lanes=s,t.memoizedState=h}}function Ra(t,e,r){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],a=i.callback;if(null!==a){if(i.callback=null,i=r,"function"!=typeof a)throw Error(n(191,a));a.call(i)}}}var Ia=(new t.Component).refs;function Da(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:B({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Ba={isMounted:function(t){return!!(t=t._reactInternals)&&zt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ql(),i=Xl(t),a=Ta(r,i);a.payload=e,null!=n&&(a.callback=n),null!==(e=Aa(t,a,i))&&(Jl(e,t,i,r),ka(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ql(),i=Xl(t),a=Ta(r,i);a.tag=1,a.payload=e,null!=n&&(a.callback=n),null!==(e=Aa(t,a,i))&&(Jl(e,t,i,r),ka(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ql(),r=Xl(t),i=Ta(n,r);i.tag=2,null!=e&&(i.callback=e),null!==(e=Aa(t,i,r))&&(Jl(e,t,r,n),ka(e,t,r))}};function Oa(t,e,n,r,i,a,s){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,a,s):!e.prototype||!e.prototype.isPureReactComponent||(!nr(n,r)||!nr(i,a))}function Na(t,e,n){var r=!1,i=_i,a=e.contextType;return"object"==typeof a&&null!==a?a=ba(a):(i=Ci(e)?Ei:wi.current,a=(r=null!=(r=e.contextTypes))?Mi(t,i):_i),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Ba,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Fa(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ba.enqueueReplaceState(e,e.state,null)}function za(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Ia,Ma(t);var a=e.contextType;"object"==typeof a&&null!==a?i.context=ba(a):(a=Ci(e)?Ei:wi.current,i.context=Mi(t,a)),i.state=t.memoizedState,"function"==typeof(a=e.getDerivedStateFromProps)&&(Da(t,e,a,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Pa(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308)}function Ua(t,e,r){if(null!==(t=r.ref)&&"function"!=typeof t&&"object"!=typeof t){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(n(309));var i=r.stateNode}if(!i)throw Error(n(147,t));var a=i,s=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===s?e.ref:((e=function(t){var e=a.refs;e===Ia&&(e=a.refs={}),null===t?delete e[s]:e[s]=t})._stringRef=s,e)}if("string"!=typeof t)throw Error(n(284));if(!r._owner)throw Error(n(290,t))}return t}function Ga(t,e){throw t=Object.prototype.toString.call(e),Error(n(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ha(t){return(0,t._init)(t._payload)}function ja(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function r(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(t,e){return(t=Tc(t,e)).index=0,t.sibling=null,t}function s(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=Pc(n,t.mode,r)).return=t,e):((e=a(e,n)).return=t,e)}function c(t,e,n,r){var i=n.type;return i===_?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===L&&Ha(i)===e.type)?((r=a(e,n.props)).ref=Ua(t,e,n),r.return=t,r):((r=Ac(n.type,n.key,n.props,null,t.mode,r)).ref=Ua(t,e,n),r.return=t,r)}function u(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Rc(n,t.mode,r)).return=t,e):((e=a(e,n.children||[])).return=t,e)}function h(t,e,n,r,i){return null===e||7!==e.tag?((e=kc(n,t.mode,r,i)).return=t,e):((e=a(e,n)).return=t,e)}function d(t,e,n){if("string"==typeof e&&""!==e||"number"==typeof e)return(e=Pc(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case b:return(n=Ac(e.type,e.key,e.props,null,t.mode,n)).ref=Ua(t,null,e),n.return=t,n;case x:return(e=Rc(e,t.mode,n)).return=t,e;case L:return d(t,(0,e._init)(e._payload),n)}if(Q(e)||I(e))return(e=kc(e,t.mode,n,null)).return=t,e;Ga(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(t,e,n,r):null;case x:return n.key===i?u(t,e,n,r):null;case L:return f(t,e,(i=n._init)(n._payload),r)}if(Q(n)||I(n))return null!==i?null:h(t,e,n,r,null);Ga(t,n)}return null}function p(t,e,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case b:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case x:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case L:return p(t,e,n,(0,r._init)(r._payload),i)}if(Q(r)||I(r))return h(e,t=t.get(n)||null,r,i,null);Ga(e,r)}return null}return function l(c,u,h,m){if("object"==typeof h&&null!==h&&h.type===_&&null===h.key&&(h=h.props.children),"object"==typeof h&&null!==h){switch(h.$$typeof){case b:t:{for(var g=h.key,y=u;null!==y;){if(y.key===g){if((g=h.type)===_){if(7===y.tag){r(c,y.sibling),(u=a(y,h.props.children)).return=c,c=u;break t}}else if(y.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===L&&Ha(g)===y.type){r(c,y.sibling),(u=a(y,h.props)).ref=Ua(c,y,h),u.return=c,c=u;break t}r(c,y);break}e(c,y),y=y.sibling}h.type===_?((u=kc(h.props.children,c.mode,m,h.key)).return=c,c=u):((m=Ac(h.type,h.key,h.props,null,c.mode,m)).ref=Ua(c,u,h),m.return=c,c=m)}return o(c);case x:t:{for(y=h.key;null!==u;){if(u.key===y){if(4===u.tag&&u.stateNode.containerInfo===h.containerInfo&&u.stateNode.implementation===h.implementation){r(c,u.sibling),(u=a(u,h.children||[])).return=c,c=u;break t}r(c,u);break}e(c,u),u=u.sibling}(u=Rc(h,c.mode,m)).return=c,c=u}return o(c);case L:return l(c,u,(y=h._init)(h._payload),m)}if(Q(h))return function(n,a,o,l){for(var c=null,u=null,h=a,m=a=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(n,h,o[m],l);if(null===y){null===h&&(h=g);break}t&&h&&null===y.alternate&&e(n,h),a=s(y,a,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===o.length)return r(n,h),Ki&&$i(n,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(n,o[m],l))&&(a=s(h,a,m),null===u?c=h:u.sibling=h,u=h);return Ki&&$i(n,m),c}for(h=i(n,h);m<o.length;m++)null!==(g=p(h,n,m,o[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=s(g,a,m),null===u?c=g:u.sibling=g,u=g);return t&&h.forEach((function(t){return e(n,t)})),Ki&&$i(n,m),c}(c,u,h,m);if(I(h))return function(a,o,l,c){var u=I(l);if("function"!=typeof u)throw Error(n(150));if(null==(l=u.call(l)))throw Error(n(151));for(var h=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(a,m,v.value,c);if(null===b){null===m&&(m=y);break}t&&m&&null===b.alternate&&e(a,m),o=s(b,o,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return r(a,m),Ki&&$i(a,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(a,v.value,c))&&(o=s(v,o,g),null===h?u=v:h.sibling=v,h=v);return Ki&&$i(a,g),u}for(m=i(a,m);!v.done;g++,v=l.next())null!==(v=p(m,a,g,v.value,c))&&(t&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=s(v,o,g),null===h?u=v:h.sibling=v,h=v);return t&&m.forEach((function(t){return e(a,t)})),Ki&&$i(a,g),u}(c,u,h,m);Ga(c,h)}return"string"==typeof h&&""!==h||"number"==typeof h?(h=""+h,null!==u&&6===u.tag?(r(c,u.sibling),(u=a(u,h)).return=c,c=u):(r(c,u),(u=Pc(h,c.mode,m)).return=c,c=u),o(c)):r(c,u)}}var Va=ja(!0),Wa=ja(!1),$a={},Ya=vi($a),qa=vi($a),Xa=vi($a);function Ja(t){if(t===$a)throw Error(n(174));return t}function Za(t,e){switch(xi(Xa,e),xi(qa,t),xi(Ya,$a),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:st(null,"");break;default:e=st(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}bi(Ya),xi(Ya,e)}function Ka(){bi(Ya),bi(qa),bi(Xa)}function Qa(t){Ja(Xa.current);var e=Ja(Ya.current),n=st(e,t.type);e!==n&&(xi(qa,t),xi(Ya,n))}function ts(t){qa.current===t&&(bi(Ya),bi(qa))}var es=vi(0);function ns(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rs=[];function is(){for(var t=0;t<rs.length;t++)rs[t]._workInProgressVersionPrimary=null;rs.length=0}var as=v.ReactCurrentDispatcher,ss=v.ReactCurrentBatchConfig,os=0,ls=null,cs=null,us=null,hs=!1,ds=!1,fs=0,ps=0;function ms(){throw Error(n(321))}function gs(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!er(t[n],e[n]))return!1;return!0}function ys(t,e,r,i,a,s){if(os=s,ls=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,as.current=null===t||null===t.memoizedState?to:eo,t=r(i,a),ds){s=0;do{if(ds=!1,fs=0,25<=s)throw Error(n(301));s+=1,us=cs=null,e.updateQueue=null,as.current=no,t=r(i,a)}while(ds)}if(as.current=Qs,e=null!==cs&&null!==cs.next,os=0,us=cs=ls=null,hs=!1,e)throw Error(n(300));return t}function vs(){var t=0!==fs;return fs=0,t}function bs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===us?ls.memoizedState=us=t:us=us.next=t,us}function xs(){if(null===cs){var t=ls.alternate;t=null!==t?t.memoizedState:null}else t=cs.next;var e=null===us?ls.memoizedState:us.next;if(null!==e)us=e,cs=t;else{if(null===t)throw Error(n(310));t={memoizedState:(cs=t).memoizedState,baseState:cs.baseState,baseQueue:cs.baseQueue,queue:cs.queue,next:null},null===us?ls.memoizedState=us=t:us=us.next=t}return us}function _s(t,e){return"function"==typeof e?e(t):e}function ws(t){var e=xs(),r=e.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=t;var i=cs,a=i.baseQueue,s=r.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}i.baseQueue=a=s,r.pending=null}if(null!==a){s=a.next,i=i.baseState;var l=o=null,c=null,u=s;do{var h=u.lane;if((os&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=i):c=c.next=d,ls.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==s);null===c?o=i:c.next=l,er(i,e.memoizedState)||(po=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}if(null!==(t=r.interleaved)){a=t;do{s=a.lane,ls.lanes|=s,Ll|=s,a=a.next}while(a!==t)}else null===a&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Ss(t){var e=xs(),r=e.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=t;var i=r.dispatch,a=r.pending,s=e.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{s=t(s,o.action),o=o.next}while(o!==a);er(s,e.memoizedState)||(po=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),r.lastRenderedState=s}return[s,i]}function Es(){}function Ms(t,e){var r=ls,i=xs(),a=e(),s=!er(i.memoizedState,a);if(s&&(i.memoizedState=a,po=!0),i=i.queue,Ns(As.bind(null,r,i,t),[t]),i.getSnapshot!==e||s||null!==us&&1&us.memoizedState.tag){if(r.flags|=2048,Rs(9,Ts.bind(null,r,i,a,e),void 0,null),null===Sl)throw Error(n(349));0!=(30&os)||Cs(r,e,a)}return a}function Cs(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ls.updateQueue)?(e={lastEffect:null,stores:null},ls.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ts(t,e,n,r){e.value=n,e.getSnapshot=r,ks(e)&&Ls(t)}function As(t,e,n){return n((function(){ks(e)&&Ls(t)}))}function ks(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!er(t,n)}catch{return!0}}function Ls(t){var e=Sa(t,1);null!==e&&Jl(e,t,1,-1)}function Ps(t){var e=bs();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:t},e.queue=t,t=t.dispatch=Xs.bind(null,ls,t),[e.memoizedState,t]}function Rs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=ls.updateQueue)?(e={lastEffect:null,stores:null},ls.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Is(){return xs().memoizedState}function Ds(t,e,n,r){var i=bs();ls.flags|=t,i.memoizedState=Rs(1|e,n,void 0,void 0===r?null:r)}function Bs(t,e,n,r){var i=xs();r=void 0===r?null:r;var a=void 0;if(null!==cs){var s=cs.memoizedState;if(a=s.destroy,null!==r&&gs(r,s.deps))return void(i.memoizedState=Rs(e,n,a,r))}ls.flags|=t,i.memoizedState=Rs(1|e,n,a,r)}function Os(t,e){return Ds(8390656,8,t,e)}function Ns(t,e){return Bs(2048,8,t,e)}function Fs(t,e){return Bs(4,2,t,e)}function zs(t,e){return Bs(4,4,t,e)}function Us(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Gs(t,e,n){return n=null!=n?n.concat([t]):null,Bs(4,4,Us.bind(null,e,t),n)}function Hs(){}function js(t,e){var n=xs();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&gs(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Vs(t,e){var n=xs();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&gs(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ws(t,e,n){return 0==(21&os)?(t.baseState&&(t.baseState=!1,po=!0),t.memoizedState=n):(er(n,e)||(n=de(),ls.lanes|=n,Ll|=n,t.baseState=!0),e)}function $s(t,e){var n=ge;ge=0!==n&&4>n?n:4,t(!0);var r=ss.transition;ss.transition={};try{t(!1),e()}finally{ge=n,ss.transition=r}}function Ys(){return xs().memoizedState}function qs(t,e,n){var r=Xl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Js(t))Zs(e,n);else if(null!==(n=wa(t,e,n,r))){Jl(n,t,r,ql()),Ks(n,e,r)}}function Xs(t,e,n){var r=Xl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Js(t))Zs(e,i);else{var a=t.alternate;if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,er(o,s)){var l=e.interleaved;return null===l?(i.next=i,_a(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch{}null!==(n=wa(t,e,i,r))&&(Jl(n,t,r,i=ql()),Ks(n,e,r))}}function Js(t){var e=t.alternate;return t===ls||null!==e&&e===ls}function Zs(t,e){ds=hs=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ks(t,e,n){if(0!=(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,me(t,n)}}var Qs={readContext:ba,useCallback:ms,useContext:ms,useEffect:ms,useImperativeHandle:ms,useInsertionEffect:ms,useLayoutEffect:ms,useMemo:ms,useReducer:ms,useRef:ms,useState:ms,useDebugValue:ms,useDeferredValue:ms,useTransition:ms,useMutableSource:ms,useSyncExternalStore:ms,useId:ms,unstable_isNewReconciler:!1},to={readContext:ba,useCallback:function(t,e){return bs().memoizedState=[t,void 0===e?null:e],t},useContext:ba,useEffect:Os,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,Ds(4194308,4,Us.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ds(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ds(4,2,t,e)},useMemo:function(t,e){var n=bs();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bs();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qs.bind(null,ls,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},bs().memoizedState=t},useState:Ps,useDebugValue:Hs,useDeferredValue:function(t){return bs().memoizedState=t},useTransition:function(){var t=Ps(!1),e=t[0];return t=$s.bind(null,t[1]),bs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var i=ls,a=bs();if(Ki){if(void 0===r)throw Error(n(407));r=r()}else{if(r=e(),null===Sl)throw Error(n(349));0!=(30&os)||Cs(i,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,Os(As.bind(null,i,s,t),[t]),i.flags|=2048,Rs(9,Ts.bind(null,i,s,r,e),void 0,null),r},useId:function(){var t=bs(),e=Sl.identifierPrefix;if(Ki){var n=Wi;e=":"+e+"R"+(n=(Vi&~(1<<32-re(Vi)-1)).toString(32)+n),0<(n=fs++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=ps++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eo={readContext:ba,useCallback:js,useContext:ba,useEffect:Ns,useImperativeHandle:Gs,useInsertionEffect:Fs,useLayoutEffect:zs,useMemo:Vs,useReducer:ws,useRef:Is,useState:function(){return ws(_s)},useDebugValue:Hs,useDeferredValue:function(t){return Ws(xs(),cs.memoizedState,t)},useTransition:function(){return[ws(_s)[0],xs().memoizedState]},useMutableSource:Es,useSyncExternalStore:Ms,useId:Ys,unstable_isNewReconciler:!1},no={readContext:ba,useCallback:js,useContext:ba,useEffect:Ns,useImperativeHandle:Gs,useInsertionEffect:Fs,useLayoutEffect:zs,useMemo:Vs,useReducer:Ss,useRef:Is,useState:function(){return Ss(_s)},useDebugValue:Hs,useDeferredValue:function(t){var e=xs();return null===cs?e.memoizedState=t:Ws(e,cs.memoizedState,t)},useTransition:function(){return[Ss(_s)[0],xs().memoizedState]},useMutableSource:Es,useSyncExternalStore:Ms,useId:Ys,unstable_isNewReconciler:!1};function ro(t,e){try{var n="",r=e;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:t,source:e,stack:i,digest:null}}function io(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ao(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var so="function"==typeof WeakMap?WeakMap:Map;function oo(t,e,n){(n=Ta(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fl||(Fl=!0,zl=r),ao(0,e)},n}function lo(t,e,n){(n=Ta(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ao(0,e)}}var a=t.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){ao(0,e),"function"!=typeof r&&(null===Ul?Ul=new Set([this]):Ul.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function co(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new so;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=bc.bind(null,t,e,n),e.then(t,t))}function uo(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ho(t,e,n,r,i){return 0==(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Ta(-1,1)).tag=2,Aa(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var fo=v.ReactCurrentOwner,po=!1;function mo(t,e,n,r){e.child=null===t?Wa(e,null,n,r):Va(e,t.child,n,r)}function go(t,e,n,r,i){n=n.render;var a=e.ref;return va(e,i),r=ys(t,e,n,r,a,i),n=vs(),null===t||po?(Ki&&n&&qi(e),e.flags|=1,mo(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fo(t,e,i))}function yo(t,e,n,r,i){if(null===t){var a=n.type;return"function"!=typeof a||Cc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ac(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,vo(t,e,a,r,i))}if(a=t.child,0==(t.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:nr)(s,r)&&t.ref===e.ref)return Fo(t,e,i)}return e.flags|=1,(t=Tc(a,r)).ref=e.ref,t.return=e,e.child=t}function vo(t,e,n,r,i){if(null!==t){var a=t.memoizedProps;if(nr(a,r)&&t.ref===e.ref){if(po=!1,e.pendingProps=r=a,0==(t.lanes&i))return e.lanes=t.lanes,Fo(t,e,i);0!=(131072&t.flags)&&(po=!0)}}return _o(t,e,n,r,i)}function bo(t,e,n){var r=e.pendingProps,i=r.children,a=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0==(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xi(Tl,Cl),Cl|=n;else{if(0==(1073741824&n))return t=null!==a?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xi(Tl,Cl),Cl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,xi(Tl,Cl),Cl|=r}else null!==a?(r=a.baseLanes|n,e.memoizedState=null):r=n,xi(Tl,Cl),Cl|=r;return mo(t,e,i,n),e.child}function xo(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _o(t,e,n,r,i){var a=Ci(n)?Ei:wi.current;return a=Mi(e,a),va(e,i),n=ys(t,e,n,r,a,i),r=vs(),null===t||po?(Ki&&r&&qi(e),e.flags|=1,mo(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fo(t,e,i))}function wo(t,e,n,r,i){if(Ci(n)){var a=!0;Li(e)}else a=!1;if(va(e,i),null===e.stateNode)No(t,e),Na(e,n,r),za(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=ba(c):c=Mi(e,c=Ci(n)?Ei:wi.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==r||l!==c)&&Fa(e,s,r,c),Ea=!1;var d=e.memoizedState;s.state=d,Pa(e,r,s,i),l=e.memoizedState,o!==r||d!==l||Si.current||Ea?("function"==typeof u&&(Da(e,n,u,r),l=e.memoizedState),(o=Ea||Oa(e,n,o,r,d,l,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(e.flags|=4194308)):("function"==typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"==typeof s.componentDidMount&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Ca(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:ua(e.type,o),s.props=c,h=e.pendingProps,d=s.context,"object"==typeof(l=n.contextType)&&null!==l?l=ba(l):l=Mi(e,l=Ci(n)?Ei:wi.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==h||d!==l)&&Fa(e,s,r,l),Ea=!1,d=e.memoizedState,s.state=d,Pa(e,r,s,i);var p=e.memoizedState;o!==h||d!==p||Si.current||Ea?("function"==typeof f&&(Da(e,n,f,r),p=e.memoizedState),(c=Ea||Oa(e,n,c,r,d,p,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof s.componentDidUpdate&&(e.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return So(t,e,n,r,a,i)}function So(t,e,n,r,i,a){xo(t,e);var s=0!=(128&e.flags);if(!r&&!s)return i&&Pi(e,n,!1),Fo(t,e,a);r=e.stateNode,fo.current=e;var o=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=Va(e,t.child,null,a),e.child=Va(e,null,o,a)):mo(t,e,o,a),e.memoizedState=r.state,i&&Pi(e,n,!0),e.child}function Eo(t){var e=t.stateNode;e.pendingContext?Ai(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ai(0,e.context,!1),Za(t,e.containerInfo)}function Mo(t,e,n,r,i){return oa(),la(i),e.flags|=256,mo(t,e,n,r),e.child}var Co,To,Ao,ko={dehydrated:null,treeContext:null,retryLane:0};function Lo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Po(t,e,r){var i,a=e.pendingProps,s=es.current,o=!1,l=0!=(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!=(2&s)),i?(o=!0,e.flags&=-129):(null===t||null!==t.memoizedState)&&(s|=1),xi(es,1&s),null===t)return ra(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0==(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=a.children,t=a.fallback,o?(a=e.mode,o=e.child,l={mode:"hidden",children:l},0==(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,a,0,null),t=kc(t,a,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Lo(r),e.memoizedState=ko,t):Ro(e,l));if(null!==(s=t.memoizedState)&&null!==(i=s.dehydrated))return function(t,e,r,i,a,s,o){if(r)return 256&e.flags?(e.flags&=-257,i=io(Error(n(422))),Io(t,e,o,i)):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=i.fallback,a=e.mode,i=Lc({mode:"visible",children:i.children},a,0,null),s=kc(s,a,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,0!=(1&e.mode)&&Va(e,t.child,null,o),e.child.memoizedState=Lo(o),e.memoizedState=ko,s);if(0==(1&e.mode))return Io(t,e,o,null);if("$!"===a.data){if(i=a.nextSibling&&a.nextSibling.dataset)var l=i.dgst;return i=l,Io(t,e,o,i=io(s=Error(n(419)),i,void 0))}if(l=0!=(o&t.childLanes),po||l){if(null!==(i=Sl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!=(a&(i.suspendedLanes|o))?0:a)&&a!==s.retryLane&&(s.retryLane=a,Sa(t,a),Jl(i,t,a,-1))}return cc(),Io(t,e,o,i=io(Error(n(421))))}return"$?"===a.data?(e.flags|=128,e.child=t.child,e=_c.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,Zi=ri(a.nextSibling),Ji=e,Ki=!0,Qi=null,null!==t&&(Gi[Hi++]=Vi,Gi[Hi++]=Wi,Gi[Hi++]=ji,Vi=t.id,Wi=t.overflow,ji=e),e=Ro(e,i.children),e.flags|=4096,e)}(t,e,l,a,i,s,r);if(o){o=a.fallback,l=e.mode,i=(s=t.child).sibling;var c={mode:"hidden",children:a.children};return 0==(1&l)&&e.child!==s?((a=e.child).childLanes=0,a.pendingProps=c,e.deletions=null):(a=Tc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==i?o=Tc(i,o):(o=kc(o,l,r,null)).flags|=2,o.return=e,a.return=e,a.sibling=o,e.child=a,a=o,o=e.child,l=null===(l=t.child.memoizedState)?Lo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~r,e.memoizedState=ko,a}return t=(o=t.child).sibling,a=Tc(o,{mode:"visible",children:a.children}),0==(1&e.mode)&&(a.lanes=r),a.return=e,a.sibling=null,null!==t&&(null===(r=e.deletions)?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=a,e.memoizedState=null,a}function Ro(t,e){return(e=Lc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Io(t,e,n,r){return null!==r&&la(r),Va(e,t.child,null,n),(t=Ro(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Do(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),ya(t.return,e,n)}function Bo(t,e,n,r,i){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Oo(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(mo(t,e,r.children,n),0!=(2&(r=es.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!=(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Do(t,n,e);else if(19===t.tag)Do(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xi(es,r),0==(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===ns(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Bo(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===ns(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Bo(e,!0,n,null,a);break;case"together":Bo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function No(t,e){0==(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fo(t,e,r){if(null!==t&&(e.dependencies=t.dependencies),Ll|=e.lanes,0==(r&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(n(153));if(null!==e.child){for(r=Tc(t=e.child,t.pendingProps),e.child=r,r.return=e;null!==t.sibling;)t=t.sibling,(r=r.sibling=Tc(t,t.pendingProps)).return=e;r.sibling=null}return e.child}function zo(t,e){if(!Ki)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Uo(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Go(t,e,r){var i=e.pendingProps;switch(Xi(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Uo(e),null;case 1:case 17:return Ci(e.type)&&Ti(),Uo(e),null;case 3:return i=e.stateNode,Ka(),bi(Si),bi(wi),is(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(null===t||null===t.child)&&(aa(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0==(256&e.flags)||(e.flags|=1024,null!==Qi&&(tc(Qi),Qi=null))),Uo(e),null;case 5:ts(e);var s=Ja(Xa.current);if(r=e.type,null!==t&&null!=e.stateNode)To(t,e,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(n(166));return Uo(e),null}if(t=Ja(Ya.current),aa(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[si]=e,i[oi]=o,t=0!=(1&e.mode),r){case"dialog":Ir("cancel",i),Ir("close",i);break;case"iframe":case"object":case"embed":Ir("load",i);break;case"video":case"audio":for(s=0;s<kr.length;s++)Ir(kr[s],i);break;case"source":Ir("error",i);break;case"img":case"image":case"link":Ir("error",i),Ir("load",i);break;case"details":Ir("toggle",i);break;case"input":q(i,o),Ir("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ir("invalid",i);break;case"textarea":nt(i,o),Ir("invalid",i)}for(var l in mt(r,o),s=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"==typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(i.textContent,c,t),s=["children",c]):"number"==typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(i.textContent,c,t),s=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ir("scroll",i)}switch(r){case"input":V(i),Z(i,o,!0);break;case"textarea":V(i),it(i);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(i.onclick=Yr)}i=s,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(r)),"http://www.w3.org/1999/xhtml"===t?"script"===r?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof i.is?t=l.createElement(r,{is:i.is}):(t=l.createElement(r),"select"===r&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,r),t[si]=e,t[oi]=i,Co(t,e),e.stateNode=t;t:{switch(l=gt(r,i),r){case"dialog":Ir("cancel",t),Ir("close",t),s=i;break;case"iframe":case"object":case"embed":Ir("load",t),s=i;break;case"video":case"audio":for(s=0;s<kr.length;s++)Ir(kr[s],t);s=i;break;case"source":Ir("error",t),s=i;break;case"img":case"image":case"link":Ir("error",t),Ir("load",t),s=i;break;case"details":Ir("toggle",t),s=i;break;case"input":q(t,i),s=Y(t,i),Ir("invalid",t);break;case"option":default:s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=B({},i,{value:void 0}),Ir("invalid",t);break;case"textarea":nt(t,i),s=et(t,i),Ir("invalid",t)}for(o in mt(r,s),c=s)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ft(t,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&lt(t,u):"children"===o?"string"==typeof u?("textarea"!==r||""!==u)&&ct(t,u):"number"==typeof u&&ct(t,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ir("scroll",t):null!=u&&y(t,o,u,l))}switch(r){case"input":V(t),Z(t,i,!1);break;case"textarea":V(t),it(t);break;case"option":null!=i.value&&t.setAttribute("value",""+H(i.value));break;case"select":t.multiple=!!i.multiple,null!=(o=i.value)?tt(t,!!i.multiple,o,!1):null!=i.defaultValue&&tt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof s.onClick&&(t.onclick=Yr)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Uo(e),null;case 6:if(t&&null!=e.stateNode)Ao(0,e,t.memoizedProps,i);else{if("string"!=typeof i&&null===e.stateNode)throw Error(n(166));if(r=Ja(Xa.current),Ja(Ya.current),aa(e)){if(i=e.stateNode,r=e.memoizedProps,i[si]=e,(o=i.nodeValue!==r)&&null!==(t=Ji))switch(t.tag){case 3:$r(i.nodeValue,r,0!=(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&$r(i.nodeValue,r,0!=(1&t.mode))}o&&(e.flags|=4)}else(i=(9===r.nodeType?r:r.ownerDocument).createTextNode(i))[si]=e,e.stateNode=i}return Uo(e),null;case 13:if(bi(es),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(Ki&&null!==Zi&&0!=(1&e.mode)&&0==(128&e.flags))sa(),oa(),e.flags|=98560,o=!1;else if(o=aa(e),null!==i&&null!==i.dehydrated){if(null===t){if(!o)throw Error(n(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(n(317));o[si]=e}else oa(),0==(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Uo(e),o=!1}else null!==Qi&&(tc(Qi),Qi=null),o=!0;if(!o)return 65536&e.flags?e:null}return 0!=(128&e.flags)?(e.lanes=r,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!=(1&e.mode)&&(null===t||0!=(1&es.current)?0===Al&&(Al=3):cc())),null!==e.updateQueue&&(e.flags|=4),Uo(e),null);case 4:return Ka(),null===t&&Or(e.stateNode.containerInfo),Uo(e),null;case 10:return ga(e.type._context),Uo(e),null;case 19:if(bi(es),null===(o=e.memoizedState))return Uo(e),null;if(i=0!=(128&e.flags),null===(l=o.rendering))if(i)zo(o,!1);else{if(0!==Al||null!==t&&0!=(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ns(t))){for(e.flags|=128,zo(o,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;null!==r;)t=i,(o=r).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return xi(es,1&es.current|2),e.child}t=t.sibling}null!==o.tail&&qt()>Ol&&(e.flags|=128,i=!0,zo(o,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=ns(l))){if(e.flags|=128,i=!0,null!==(r=t.updateQueue)&&(e.updateQueue=r,e.flags|=4),zo(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!Ki)return Uo(e),null}else 2*qt()-o.renderingStartTime>Ol&&1073741824!==r&&(e.flags|=128,i=!0,zo(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(null!==(r=o.last)?r.sibling=l:e.child=l,o.last=l)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=qt(),e.sibling=null,r=es.current,xi(es,i?1&r|2:1&r),e):(Uo(e),null);case 22:case 23:return ac(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!=(1&e.mode)?0!=(1073741824&Cl)&&(Uo(e),6&e.subtreeFlags&&(e.flags|=8192)):Uo(e),null;case 24:case 25:return null}throw Error(n(156,e.tag))}function Ho(t,e){switch(Xi(e),e.tag){case 1:return Ci(e.type)&&Ti(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Ka(),bi(Si),bi(wi),is(),0!=(65536&(t=e.flags))&&0==(128&t)?(e.flags=-65537&t|128,e):null;case 5:return ts(e),null;case 13:if(bi(es),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(n(340));oa()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return bi(es),null;case 4:return Ka(),null;case 10:return ga(e.type._context),null;case 22:case 23:return ac(),null;default:return null}}Co=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},To=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ja(Ya.current);var s,o=null;switch(n){case"input":i=Y(t,i),r=Y(t,r),o=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),o=[];break;case"textarea":i=et(t,i),r=et(t,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(t.onclick=Yr)}for(u in mt(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ir("scroll",t),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}},Ao=function(t,e,n,r){n!==r&&(e.flags|=4)};var jo=!1,Vo=!1,Wo="function"==typeof WeakSet?WeakSet:Set,$o=null;function Yo(t,e){var n=t.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){vc(t,e,r)}else n.current=null}function qo(t,e,n){try{n()}catch(r){vc(t,e,r)}}var Xo=!1;function Jo(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,void 0!==a&&qo(e,n,a)}i=i.next}while(i!==r)}}function Zo(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ko(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"==typeof e?e(t):e.current=t}}function Qo(t){var e=t.alternate;null!==e&&(t.alternate=null,Qo(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[si],delete e[oi],delete e[ci],delete e[ui],delete e[hi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tl(t){return 5===t.tag||3===t.tag||4===t.tag}function el(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||tl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags||null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function nl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=Yr));else if(4!==r&&null!==(t=t.child))for(nl(t,e,n),t=t.sibling;null!==t;)nl(t,e,n),t=t.sibling}function rl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(rl(t,e,n),t=t.sibling;null!==t;)rl(t,e,n),t=t.sibling}var il=null,al=!1;function sl(t,e,n){for(n=n.child;null!==n;)ol(t,e,n),n=n.sibling}function ol(t,e,n){if(ne&&"function"==typeof ne.onCommitFiberUnmount)try{ne.onCommitFiberUnmount(ee,n)}catch{}switch(n.tag){case 5:Vo||Yo(n,e);case 6:var r=il,i=al;il=null,sl(t,e,n),al=i,null!==(il=r)&&(al?(t=il,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):il.removeChild(n.stateNode));break;case 18:null!==il&&(al?(t=il,n=n.stateNode,8===t.nodeType?ni(t.parentNode,n):1===t.nodeType&&ni(t,n),ze(t)):ni(il,n.stateNode));break;case 4:r=il,i=al,il=n.stateNode.containerInfo,al=!0,sl(t,e,n),il=r,al=i;break;case 0:case 11:case 14:case 15:if(!Vo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(0!=(2&a)||0!=(4&a))&&qo(n,e,s),i=i.next}while(i!==r)}sl(t,e,n);break;case 1:if(!Vo&&(Yo(n,e),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){vc(n,e,o)}sl(t,e,n);break;case 21:sl(t,e,n);break;case 22:1&n.mode?(Vo=(r=Vo)||null!==n.memoizedState,sl(t,e,n),Vo=r):sl(t,e,n);break;default:sl(t,e,n)}}function ll(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Wo),e.forEach((function(e){var r=wc.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function cl(t,e){var r=e.deletions;if(null!==r)for(var i=0;i<r.length;i++){var a=r[i];try{var s=t,o=e,l=o;t:for(;null!==l;){switch(l.tag){case 5:il=l.stateNode,al=!1;break t;case 3:case 4:il=l.stateNode.containerInfo,al=!0;break t}l=l.return}if(null===il)throw Error(n(160));ol(s,o,a),il=null,al=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){vc(a,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)ul(e,t),e=e.sibling}function ul(t,e){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cl(e,t),hl(t),4&i){try{Jo(3,t,t.return),Zo(3,t)}catch(g){vc(t,t.return,g)}try{Jo(5,t,t.return)}catch(g){vc(t,t.return,g)}}break;case 1:cl(e,t),hl(t),512&i&&null!==r&&Yo(r,r.return);break;case 5:if(cl(e,t),hl(t),512&i&&null!==r&&Yo(r,r.return),32&t.flags){var a=t.stateNode;try{ct(a,"")}catch(g){vc(t,t.return,g)}}if(4&i&&null!=(a=t.stateNode)){var s=t.memoizedProps,o=null!==r?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(a,s),gt(l,o);var u=gt(l,s);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?ft(a,d):"dangerouslySetInnerHTML"===h?lt(a,d):"children"===h?ct(a,d):y(a,h,d,u)}switch(l){case"input":J(a,s);break;case"textarea":rt(a,s);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?tt(a,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?tt(a,!!s.multiple,s.defaultValue,!0):tt(a,!!s.multiple,s.multiple?[]:"",!1))}a[oi]=s}catch(g){vc(t,t.return,g)}}break;case 6:if(cl(e,t),hl(t),4&i){if(null===t.stateNode)throw Error(n(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(g){vc(t,t.return,g)}}break;case 3:if(cl(e,t),hl(t),4&i&&null!==r&&r.memoizedState.isDehydrated)try{ze(e.containerInfo)}catch(g){vc(t,t.return,g)}break;case 4:default:cl(e,t),hl(t);break;case 13:cl(e,t),hl(t),8192&(a=t.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,!s||null!==a.alternate&&null!==a.alternate.memoizedState||(Bl=qt())),4&i&&ll(t);break;case 22:if(h=null!==r&&null!==r.memoizedState,1&t.mode?(Vo=(u=Vo)||h,cl(e,t),Vo=u):cl(e,t),hl(t),8192&i){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!=(1&t.mode))for($o=t,h=t.child;null!==h;){for(d=$o=h;null!==$o;){switch(p=(f=$o).child,f.tag){case 0:case 11:case 14:case 15:Jo(4,f,f.return);break;case 1:Yo(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){i=f,r=f.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){vc(i,r,g)}}break;case 5:Yo(f,f.return);break;case 22:if(null!==f.memoizedState){ml(d);continue}}null!==p?(p.return=f,$o=p):ml(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{a=d.stateNode,u?"function"==typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,o=null!=(c=d.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=dt("display",o))}catch(g){vc(t,t.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){vc(t,t.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:cl(e,t),hl(t),4&i&&ll(t);case 21:}}function hl(t){var e=t.flags;if(2&e){try{t:{for(var r=t.return;null!==r;){if(tl(r)){var i=r;break t}r=r.return}throw Error(n(160))}switch(i.tag){case 5:var a=i.stateNode;32&i.flags&&(ct(a,""),i.flags&=-33),rl(t,el(t),a);break;case 3:case 4:var s=i.stateNode.containerInfo;nl(t,el(t),s);break;default:throw Error(n(161))}}catch(o){vc(t,t.return,o)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function dl(t,e,n){$o=t,fl(t)}function fl(t,e,n){for(var r=0!=(1&t.mode);null!==$o;){var i=$o,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||jo;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Vo;o=jo;var c=Vo;if(jo=s,(Vo=l)&&!c)for($o=i;null!==$o;)l=(s=$o).child,22===s.tag&&null!==s.memoizedState?gl(i):null!==l?(l.return=s,$o=l):gl(i);for(;null!==a;)$o=a,fl(a),a=a.sibling;$o=i,jo=o,Vo=c}pl(t)}else 0!=(8772&i.subtreeFlags)&&null!==a?(a.return=i,$o=a):pl(t)}}function pl(t){for(;null!==$o;){var e=$o;if(0!=(8772&e.flags)){var r=e.alternate;try{if(0!=(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Vo||Zo(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Vo)if(null===r)i.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:ua(e.type,r.memoizedProps);i.componentDidUpdate(a,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&Ra(e,s,i);break;case 3:var o=e.updateQueue;if(null!==o){if(r=null,null!==e.child)switch(e.child.tag){case 5:case 1:r=e.child.stateNode}Ra(e,o,r)}break;case 5:var l=e.stateNode;if(null===r&&4&e.flags){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&ze(d)}}}break;default:throw Error(n(163))}Vo||512&e.flags&&Ko(e)}catch(f){vc(e,e.return,f)}}if(e===t){$o=null;break}if(null!==(r=e.sibling)){r.return=e.return,$o=r;break}$o=e.return}}function ml(t){for(;null!==$o;){var e=$o;if(e===t){$o=null;break}var n=e.sibling;if(null!==n){n.return=e.return,$o=n;break}$o=e.return}}function gl(t){for(;null!==$o;){var e=$o;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zo(4,e)}catch(l){vc(e,n,l)}break;case 1:var r=e.stateNode;if("function"==typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){vc(e,i,l)}}var a=e.return;try{Ko(e)}catch(l){vc(e,a,l)}break;case 5:var s=e.return;try{Ko(e)}catch(l){vc(e,s,l)}}}catch(l){vc(e,e.return,l)}if(e===t){$o=null;break}var o=e.sibling;if(null!==o){o.return=e.return,$o=o;break}$o=e.return}}var yl,vl=Math.ceil,bl=v.ReactCurrentDispatcher,xl=v.ReactCurrentOwner,_l=v.ReactCurrentBatchConfig,wl=0,Sl=null,El=null,Ml=0,Cl=0,Tl=vi(0),Al=0,kl=null,Ll=0,Pl=0,Rl=0,Il=null,Dl=null,Bl=0,Ol=1/0,Nl=null,Fl=!1,zl=null,Ul=null,Gl=!1,Hl=null,jl=0,Vl=0,Wl=null,$l=-1,Yl=0;function ql(){return 0!=(6&wl)?qt():-1!==$l?$l:$l=qt()}function Xl(t){return 0==(1&t.mode)?1:0!=(2&wl)&&0!==Ml?Ml&-Ml:null!==ca.transition?(0===Yl&&(Yl=de()),Yl):(0!==(t=ge)||(t=void 0===(t=window.event)?16:Ye(t.type)),t)}function Jl(t,e,r,i){if(50<Vl)throw Vl=0,Wl=null,Error(n(185));pe(t,r,i),(0==(2&wl)||t!==Sl)&&(t===Sl&&(0==(2&wl)&&(Pl|=r),4===Al&&ec(t,Ml)),Zl(t,i),1===r&&0===wl&&0==(1&e.mode)&&(Ol=qt()+500,Ii&&Oi()))}function Zl(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-re(a),o=1<<s,l=i[s];-1===l?(0==(o&n)||0!=(o&r))&&(i[s]=ue(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}}(t,e);var r=ce(t,t===Sl?Ml:0);if(0===r)null!==n&&Wt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Wt(n),1===e)0===t.tag?function(t){Ii=!0,Bi(t)}(nc.bind(null,t)):Bi(nc.bind(null,t)),ti((function(){0==(6&wl)&&Oi()})),n=null;else{switch(ye(r)){case 1:n=Jt;break;case 4:n=Zt;break;case 16:default:n=Kt;break;case 536870912:n=te}n=Sc(n,Kl.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Kl(t,e){if($l=-1,Yl=0,0!=(6&wl))throw Error(n(327));var r=t.callbackNode;if(gc()&&t.callbackNode!==r)return null;var i=ce(t,t===Sl?Ml:0);if(0===i)return null;if(0!=(30&i)||0!=(i&t.expiredLanes)||e)e=uc(t,i);else{e=i;var a=wl;wl|=2;var s=lc();for((Sl!==t||Ml!==e)&&(Nl=null,Ol=qt()+500,sc(t,e));;)try{dc();break}catch(l){oc(t,l)}ma(),bl.current=s,wl=a,null!==El?e=0:(Sl=null,Ml=0,e=Al)}if(0!==e){if(2===e&&(0!==(a=he(t))&&(i=a,e=Ql(t,a))),1===e)throw r=kl,sc(t,0),ec(t,i),Zl(t,qt()),r;if(6===e)ec(t,i);else{if(a=t.current.alternate,0==(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!er(a(),i))return!1}catch{return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(a)&&(2===(e=uc(t,i))&&(0!==(s=he(t))&&(i=s,e=Ql(t,s))),1===e))throw r=kl,sc(t,0),ec(t,i),Zl(t,qt()),r;switch(t.finishedWork=a,t.finishedLanes=i,e){case 0:case 1:throw Error(n(345));case 2:case 5:mc(t,Dl,Nl);break;case 3:if(ec(t,i),(130023424&i)===i&&10<(e=Bl+500-qt())){if(0!==ce(t,0))break;if(((a=t.suspendedLanes)&i)!==i){ql(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Zr(mc.bind(null,t,Dl,Nl),e);break}mc(t,Dl,Nl);break;case 4:if(ec(t,i),(4194240&i)===i)break;for(e=t.eventTimes,a=-1;0<i;){var o=31-re(i);s=1<<o,(o=e[o])>a&&(a=o),i&=~s}if(i=a,10<(i=(120>(i=qt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*vl(i/1960))-i)){t.timeoutHandle=Zr(mc.bind(null,t,Dl,Nl),i);break}mc(t,Dl,Nl);break;default:throw Error(n(329))}}}return Zl(t,qt()),t.callbackNode===r?Kl.bind(null,t):null}function Ql(t,e){var n=Il;return t.current.memoizedState.isDehydrated&&(sc(t,e).flags|=256),2!==(t=uc(t,e))&&(e=Dl,Dl=n,null!==e&&tc(e)),t}function tc(t){null===Dl?Dl=t:Dl.push.apply(Dl,t)}function ec(t,e){for(e&=~Rl,e&=~Pl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-re(e),r=1<<n;t[n]=-1,e&=~r}}function nc(t){if(0!=(6&wl))throw Error(n(327));gc();var e=ce(t,0);if(0==(1&e))return Zl(t,qt()),null;var r=uc(t,e);if(0!==t.tag&&2===r){var i=he(t);0!==i&&(e=i,r=Ql(t,i))}if(1===r)throw r=kl,sc(t,0),ec(t,e),Zl(t,qt()),r;if(6===r)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mc(t,Dl,Nl),Zl(t,qt()),null}function rc(t,e){var n=wl;wl|=1;try{return t(e)}finally{0===(wl=n)&&(Ol=qt()+500,Ii&&Oi())}}function ic(t){null!==Hl&&0===Hl.tag&&0==(6&wl)&&gc();var e=wl;wl|=1;var n=_l.transition,r=ge;try{if(_l.transition=null,ge=1,t)return t()}finally{ge=r,_l.transition=n,0==(6&(wl=e))&&Oi()}}function ac(){Cl=Tl.current,bi(Tl)}function sc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Kr(n)),null!==El)for(n=El.return;null!==n;){var r=n;switch(Xi(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ti();break;case 3:Ka(),bi(Si),bi(wi),is();break;case 5:ts(r);break;case 4:Ka();break;case 13:case 19:bi(es);break;case 10:ga(r.type._context);break;case 22:case 23:ac()}n=n.return}if(Sl=t,El=t=Tc(t.current,null),Ml=Cl=e,Al=0,kl=null,Rl=Pl=Ll=0,Dl=Il=null,null!==xa){for(e=0;e<xa.length;e++)if(null!==(r=(n=xa[e]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}xa=null}return t}function oc(t,e){for(;;){var r=El;try{if(ma(),as.current=Qs,hs){for(var i=ls.memoizedState;null!==i;){var a=i.queue;null!==a&&(a.pending=null),i=i.next}hs=!1}if(os=0,us=cs=ls=null,ds=!1,fs=0,xl.current=null,null===r||null===r.return){Al=1,kl=e,El=null;break}t:{var s=t,o=r.return,l=r,c=e;if(e=Ml,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,h=l,d=h.tag;if(0==(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=uo(o);if(null!==p){p.flags&=-257,ho(p,o,l,0,e),1&p.mode&&co(s,u,e),c=u;var m=(e=p).updateQueue;if(null===m){var g=new Set;g.add(c),e.updateQueue=g}else m.add(c);break t}if(0==(1&e)){co(s,u,e),cc();break t}c=Error(n(426))}else if(Ki&&1&l.mode){var y=uo(o);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),ho(y,o,l,0,e),la(ro(c,l));break t}}s=c=ro(c,l),4!==Al&&(Al=2),null===Il?Il=[s]:Il.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e,La(s,oo(0,c,e));break t;case 1:l=c;var v=s.type,b=s.stateNode;if(0==(128&s.flags)&&("function"==typeof v.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===Ul||!Ul.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e,La(s,lo(s,l,e));break t}}s=s.return}while(null!==s)}pc(r)}catch(x){e=x,El===r&&null!==r&&(El=r=r.return);continue}break}}function lc(){var t=bl.current;return bl.current=Qs,null===t?Qs:t}function cc(){(0===Al||3===Al||2===Al)&&(Al=4),null===Sl||0==(268435455&Ll)&&0==(268435455&Pl)||ec(Sl,Ml)}function uc(t,e){var r=wl;wl|=2;var i=lc();for((Sl!==t||Ml!==e)&&(Nl=null,sc(t,e));;)try{hc();break}catch(a){oc(t,a)}if(ma(),wl=r,bl.current=i,null!==El)throw Error(n(261));return Sl=null,Ml=0,Al}function hc(){for(;null!==El;)fc(El)}function dc(){for(;null!==El&&!$t();)fc(El)}function fc(t){var e=yl(t.alternate,t,Cl);t.memoizedProps=t.pendingProps,null===e?pc(t):El=e,xl.current=null}function pc(t){var e=t;do{var n=e.alternate;if(t=e.return,0==(32768&e.flags)){if(null!==(n=Go(n,e,Cl)))return void(El=n)}else{if(null!==(n=Ho(n,e)))return n.flags&=32767,void(El=n);if(null===t)return Al=6,void(El=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(El=e);El=e=t}while(null!==e);0===Al&&(Al=5)}function mc(t,e,r){var i=ge,a=_l.transition;try{_l.transition=null,ge=1,function(t,e,r,i){do{gc()}while(null!==Hl);if(0!=(6&wl))throw Error(n(327));r=t.finishedWork;var a=t.finishedLanes;if(null===r)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-re(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}(t,s),t===Sl&&(El=Sl=null,Ml=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||Gl||(Gl=!0,Sc(Kt,(function(){return gc(),null}))),s=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||s){s=_l.transition,_l.transition=null;var o=ge;ge=1;var l=wl;wl|=4,xl.current=null,function(t,e){if(qr=Ge,or(t=sr())){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(r=(r=t.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(i&&0!==i.rangeCount){r=i.anchorNode;var a=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break t}var o=0,l=-1,c=-1,u=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==r||0!==a&&3!==d.nodeType||(l=o+a),d!==s||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===r&&++u===a&&(l=o),f===s&&++h===i&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xr={focusedElem:t,selectionRange:r},Ge=!1,$o=e;null!==$o;)if(t=(e=$o).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,$o=t;else for(;null!==$o;){e=$o;try{var m=e.alternate;if(0!=(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:ua(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(n(163))}}catch(_){vc(e,e.return,_)}if(null!==(t=e.sibling)){t.return=e.return,$o=t;break}$o=e.return}m=Xo,Xo=!1}(t,r),ul(r,t),lr(Xr),Ge=!!qr,Xr=qr=null,t.current=r,dl(r),Yt(),wl=l,ge=o,_l.transition=s}else t.current=r;if(Gl&&(Gl=!1,Hl=t,jl=a),s=t.pendingLanes,0===s&&(Ul=null),function(t){if(ne&&"function"==typeof ne.onCommitFiberRoot)try{ne.onCommitFiberRoot(ee,t,void 0,128==(128&t.current.flags))}catch{}}(r.stateNode),Zl(t,qt()),null!==e)for(i=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],i(a.value,{componentStack:a.stack,digest:a.digest});if(Fl)throw Fl=!1,t=zl,zl=null,t;0!=(1&jl)&&0!==t.tag&&gc(),s=t.pendingLanes,0!=(1&s)?t===Wl?Vl++:(Vl=0,Wl=t):Vl=0,Oi()}(t,e,r,i)}finally{_l.transition=a,ge=i}return null}function gc(){if(null!==Hl){var t=ye(jl),e=_l.transition,r=ge;try{if(_l.transition=null,ge=16>t?16:t,null===Hl)var i=!1;else{if(t=Hl,Hl=null,jl=0,0!=(6&wl))throw Error(n(331));var a=wl;for(wl|=4,$o=t.current;null!==$o;){var s=$o,o=s.child;if(0!=(16&$o.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($o=u;null!==$o;){var h=$o;switch(h.tag){case 0:case 11:case 15:Jo(8,h,s)}var d=h.child;if(null!==d)d.return=h,$o=d;else for(;null!==$o;){var f=(h=$o).sibling,p=h.return;if(Qo(h),h===u){$o=null;break}if(null!==f){f.return=p,$o=f;break}$o=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}$o=s}}if(0!=(2064&s.subtreeFlags)&&null!==o)o.return=s,$o=o;else t:for(;null!==$o;){if(0!=(2048&(s=$o).flags))switch(s.tag){case 0:case 11:case 15:Jo(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,$o=v;break t}$o=s.return}}var b=t.current;for($o=b;null!==$o;){var x=(o=$o).child;if(0!=(2064&o.subtreeFlags)&&null!==x)x.return=o,$o=x;else t:for(o=b;null!==$o;){if(0!=(2048&(l=$o).flags))try{switch(l.tag){case 0:case 11:case 15:Zo(9,l)}}catch(w){vc(l,l.return,w)}if(l===o){$o=null;break t}var _=l.sibling;if(null!==_){_.return=l.return,$o=_;break t}$o=l.return}}if(wl=a,Oi(),ne&&"function"==typeof ne.onPostCommitFiberRoot)try{ne.onPostCommitFiberRoot(ee,t)}catch{}i=!0}return i}finally{ge=r,_l.transition=e}}return!1}function yc(t,e,n){t=Aa(t,e=oo(0,e=ro(n,e),1),1),e=ql(),null!==t&&(pe(t,1,e),Zl(t,e))}function vc(t,e,n){if(3===t.tag)yc(t,t,n);else for(;null!==e;){if(3===e.tag){yc(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ul||!Ul.has(r))){e=Aa(e,t=lo(e,t=ro(n,t),1),1),t=ql(),null!==e&&(pe(e,1,t),Zl(e,t));break}}e=e.return}}function bc(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=ql(),t.pingedLanes|=t.suspendedLanes&n,Sl===t&&(Ml&n)===n&&(4===Al||3===Al&&(130023424&Ml)===Ml&&500>qt()-Bl?sc(t,0):Rl|=n),Zl(t,e)}function xc(t,e){0===e&&(0==(1&t.mode)?e=1:(e=oe,0==(130023424&(oe<<=1))&&(oe=4194304)));var n=ql();null!==(t=Sa(t,e))&&(pe(t,e,n),Zl(t,n))}function _c(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),xc(t,n)}function wc(t,e){var r=0;switch(t.tag){case 13:var i=t.stateNode,a=t.memoizedState;null!==a&&(r=a.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(n(314))}null!==i&&i.delete(e),xc(t,r)}function Sc(t,e){return Vt(t,e)}function Ec(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(t,e,n,r){return new Ec(t,e,n,r)}function Cc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Tc(t,e){var n=t.alternate;return null===n?((n=Mc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ac(t,e,r,i,a,s){var o=2;if(i=t,"function"==typeof t)Cc(t)&&(o=1);else if("string"==typeof t)o=5;else t:switch(t){case _:return kc(r.children,a,s,e);case w:o=8,a|=8;break;case S:return(t=Mc(12,r,e,2|a)).elementType=S,t.lanes=s,t;case T:return(t=Mc(13,r,e,a)).elementType=T,t.lanes=s,t;case A:return(t=Mc(19,r,e,a)).elementType=A,t.lanes=s,t;case P:return Lc(r,a,s,e);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case E:o=10;break t;case M:o=9;break t;case C:o=11;break t;case k:o=14;break t;case L:o=16,i=null;break t}throw Error(n(130,null==t?t:typeof t,""))}return(e=Mc(o,r,e,a)).elementType=t,e.type=i,e.lanes=s,e}function kc(t,e,n,r){return(t=Mc(7,t,r,e)).lanes=n,t}function Lc(t,e,n,r){return(t=Mc(22,t,r,e)).elementType=P,t.lanes=n,t.stateNode={isHidden:!1},t}function Pc(t,e,n){return(t=Mc(6,t,null,e)).lanes=n,t}function Rc(t,e,n){return(e=Mc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ic(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fe(0),this.expirationTimes=fe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fe(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Dc(t,e,n,r,i,a,s,o,l){return t=new Ic(t,e,n,o,l),1===e?(e=1,!0===a&&(e|=8)):e=0,a=Mc(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ma(a),t}function Bc(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Oc(t){if(!t)return _i;t:{if(zt(t=t._reactInternals)!==t||1!==t.tag)throw Error(n(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ci(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(n(171))}if(1===t.tag){var r=t.type;if(Ci(r))return ki(t,r,e)}return e}function Nc(t,e,n,r,i,a,s,o,l){return(t=Dc(n,r,!0,t,0,a,0,o,l)).context=Oc(null),n=t.current,(a=Ta(r=ql(),i=Xl(n))).callback=null!=e?e:null,Aa(n,a,i),t.current.lanes=i,pe(t,i,r),Zl(t,r),t}function Fc(t,e,n,r){var i=e.current,a=ql(),s=Xl(i);return n=Oc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Ta(a,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Aa(i,e,s))&&(Jl(t,i,s,a),ka(t,i,s)),s}function zc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Uc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Gc(t,e){Uc(t,e),(t=t.alternate)&&Uc(t,e)}yl=function(t,e,r){if(null!==t)if(t.memoizedProps!==e.pendingProps||Si.current)po=!0;else{if(0==(t.lanes&r)&&0==(128&e.flags))return po=!1,function(t,e,n){switch(e.tag){case 3:Eo(e),oa();break;case 5:Qa(e);break;case 1:Ci(e.type)&&Li(e);break;case 4:Za(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xi(ha,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(xi(es,1&es.current),e.flags|=128,null):0!=(n&e.child.childLanes)?Po(t,e,n):(xi(es,1&es.current),null!==(t=Fo(t,e,n))?t.sibling:null);xi(es,1&es.current);break;case 19:if(r=0!=(n&e.childLanes),0!=(128&t.flags)){if(r)return Oo(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(es,es.current),r)break;return null;case 22:case 23:return e.lanes=0,bo(t,e,n)}return Fo(t,e,n)}(t,e,r);po=0!=(131072&t.flags)}else po=!1,Ki&&0!=(1048576&e.flags)&&Yi(e,Ui,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;No(t,e),t=e.pendingProps;var a=Mi(e,wi.current);va(e,r),a=ys(null,e,i,t,a,r);var s=vs();return e.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ci(i)?(s=!0,Li(e)):s=!1,e.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ma(e),a.updater=Ba,e.stateNode=a,a._reactInternals=e,za(e,i,t,r),e=So(null,e,i,!0,s,r)):(e.tag=0,Ki&&s&&qi(e),mo(null,e,a,r),e=e.child),e;case 16:i=e.elementType;t:{switch(No(t,e),t=e.pendingProps,i=(a=i._init)(i._payload),e.type=i,a=e.tag=function(t){if("function"==typeof t)return Cc(t)?1:0;if(null!=t){if((t=t.$$typeof)===C)return 11;if(t===k)return 14}return 2}(i),t=ua(i,t),a){case 0:e=_o(null,e,i,t,r);break t;case 1:e=wo(null,e,i,t,r);break t;case 11:e=go(null,e,i,t,r);break t;case 14:e=yo(null,e,i,ua(i.type,t),r);break t}throw Error(n(306,i,""))}return e;case 0:return i=e.type,a=e.pendingProps,_o(t,e,i,a=e.elementType===i?a:ua(i,a),r);case 1:return i=e.type,a=e.pendingProps,wo(t,e,i,a=e.elementType===i?a:ua(i,a),r);case 3:t:{if(Eo(e),null===t)throw Error(n(387));i=e.pendingProps,a=(s=e.memoizedState).element,Ca(t,e),Pa(e,i,null,r);var o=e.memoizedState;if(i=o.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=Mo(t,e,i,r,a=ro(Error(n(423)),e));break t}if(i!==a){e=Mo(t,e,i,r,a=ro(Error(n(424)),e));break t}for(Zi=ri(e.stateNode.containerInfo.firstChild),Ji=e,Ki=!0,Qi=null,r=Wa(e,null,i,r),e.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(oa(),i===a){e=Fo(t,e,r);break t}mo(t,e,i,r)}e=e.child}return e;case 5:return Qa(e),null===t&&ra(e),i=e.type,a=e.pendingProps,s=null!==t?t.memoizedProps:null,o=a.children,Jr(i,a)?o=null:null!==s&&Jr(i,s)&&(e.flags|=32),xo(t,e),mo(t,e,o,r),e.child;case 6:return null===t&&ra(e),null;case 13:return Po(t,e,r);case 4:return Za(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=Va(e,null,i,r):mo(t,e,i,r),e.child;case 11:return i=e.type,a=e.pendingProps,go(t,e,i,a=e.elementType===i?a:ua(i,a),r);case 7:return mo(t,e,e.pendingProps,r),e.child;case 8:case 12:return mo(t,e,e.pendingProps.children,r),e.child;case 10:t:{if(i=e.type._context,a=e.pendingProps,s=e.memoizedProps,o=a.value,xi(ha,i._currentValue),i._currentValue=o,null!==s)if(er(s.value,o)){if(s.children===a.children&&!Si.current){e=Fo(t,e,r);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===s.tag){(c=Ta(-1,r&-r)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=r,null!==(c=s.alternate)&&(c.lanes|=r),ya(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(10===s.tag)o=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(n(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),ya(o,r,e),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}mo(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,i=e.pendingProps.children,va(e,r),i=i(a=ba(a)),e.flags|=1,mo(t,e,i,r),e.child;case 14:return a=ua(i=e.type,e.pendingProps),yo(t,e,i,a=ua(i.type,a),r);case 15:return vo(t,e,e.type,e.pendingProps,r);case 17:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:ua(i,a),No(t,e),e.tag=1,Ci(i)?(t=!0,Li(e)):t=!1,va(e,r),Na(e,i,a),za(e,i,a,r),So(null,e,i,!0,t,r);case 19:return Oo(t,e,r);case 22:return bo(t,e,r)}throw Error(n(156,e.tag))};var Hc="function"==typeof reportError?reportError:function(t){console.error(t)};function jc(t){this._internalRoot=t}function Vc(t){this._internalRoot=t}function Wc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function $c(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Yc(){}function qc(t,e,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"==typeof i){var o=i;i=function(){var t=zc(s);o.call(t)}}Fc(e,s,t,i)}else s=function(t,e,n,r,i){if(i){if("function"==typeof r){var a=r;r=function(){var t=zc(s);a.call(t)}}var s=Nc(e,r,t,0,null,!1,0,"",Yc);return t._reactRootContainer=s,t[li]=s.current,Or(8===t.nodeType?t.parentNode:t),ic(),s}for(;i=t.lastChild;)t.removeChild(i);if("function"==typeof r){var o=r;r=function(){var t=zc(l);o.call(t)}}var l=Dc(t,0,!1,null,0,!1,0,"",Yc);return t._reactRootContainer=l,t[li]=l.current,Or(8===t.nodeType?t.parentNode:t),ic((function(){Fc(e,l,n,r)})),l}(n,e,t,i,r);return zc(s)}Vc.prototype.render=jc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(n(409));Fc(t,e,null,null)},Vc.prototype.unmount=jc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;ic((function(){Fc(null,t,null,null)})),e[li]=null}},Vc.prototype.unstable_scheduleHydration=function(t){if(t){var e=_e();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Le.length&&0!==e&&e<Le[n].priority;n++);Le.splice(n,0,t),0===n&&De(t)}},ve=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=le(e.pendingLanes);0!==n&&(me(e,1|n),Zl(e,qt()),0==(6&wl)&&(Ol=qt()+500,Oi()))}break;case 13:ic((function(){var e=Sa(t,1);if(null!==e){var n=ql();Jl(e,t,1,n)}})),Gc(t,1)}},be=function(t){if(13===t.tag){var e=Sa(t,134217728);if(null!==e)Jl(e,t,134217728,ql());Gc(t,134217728)}},xe=function(t){if(13===t.tag){var e=Xl(t),n=Sa(t,e);if(null!==n)Jl(n,t,e,ql());Gc(t,e)}},_e=function(){return ge},we=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}},bt=function(t,e,r){switch(e){case"input":if(J(t,r),e=r.name,"radio"===r.type&&null!=e){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==t&&i.form===t.form){var a=mi(i);if(!a)throw Error(n(90));W(i),J(i,a)}}}break;case"textarea":rt(t,r);break;case"select":null!=(e=r.value)&&tt(t,!!r.multiple,e,!1)}},Mt=rc,Ct=ic;var Xc={usingClientEntryPoint:!1,Events:[fi,pi,mi,St,Et,rc]},Jc={findFiberByHostInstance:di,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Zc={bundleType:Jc.bundleType,version:Jc.version,rendererPackageName:Jc.rendererPackageName,rendererConfig:Jc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Ht(t))?null:t.stateNode},findFiberByHostInstance:Jc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{ee=Kc.inject(Zc),ne=Kc}catch{}}return bf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xc,bf.createPortal=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Wc(e))throw Error(n(200));return Bc(t,e,null,r)},bf.createRoot=function(t,e){if(!Wc(t))throw Error(n(299));var r=!1,i="",a=Hc;return null!=e&&(!0===e.unstable_strictMode&&(r=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(a=e.onRecoverableError)),e=Dc(t,1,!1,null,0,r,0,i,a),t[li]=e.current,Or(8===t.nodeType?t.parentNode:t),new jc(e)},bf.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e)throw"function"==typeof t.render?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=null===(t=Ht(e))?null:t.stateNode},bf.flushSync=function(t){return ic(t)},bf.hydrate=function(t,e,r){if(!$c(e))throw Error(n(200));return qc(null,t,e,!0,r)},bf.hydrateRoot=function(t,e,r){if(!Wc(t))throw Error(n(405));var i=null!=r&&r.hydratedSources||null,a=!1,s="",o=Hc;if(null!=r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),e=Nc(e,null,t,1,null!=r?r:null,a,0,s,o),t[li]=e.current,Or(t),i)for(t=0;t<i.length;t++)a=(a=(r=i[t])._getVersion)(r._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new Vc(e)},bf.render=function(t,e,r){if(!$c(e))throw Error(n(200));return qc(null,t,e,!1,r)},bf.unmountComponentAtNode=function(t){if(!$c(t))throw Error(n(40));return!!t._reactRootContainer&&(ic((function(){qc(null,null,t,!1,(function(){t._reactRootContainer=null,t[li]=null}))})),!0)},bf.unstable_batchedUpdates=rc,bf.unstable_renderSubtreeIntoContainer=function(t,e,r,i){if(!$c(r))throw Error(n(200));if(null==t||void 0===t._reactInternals)throw Error(n(38));return qc(t,e,r,!1,i)},bf.version="18.2.0-next-9e3b772b8-20220608",bf}!function(t){(function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||"function"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}})(),t.exports=Mf()}(vf);var Cf,Tf=vf.exports;Cf=Tf.createRoot,Tf.hydrateRoot;const Af=new ue,kf=new ue,Lf=new ue;function Pf(t,e,n){const r=Af.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,a=n.height/2;return[r.x*i+i,-r.y*a+a]}const Rf=t=>Math.abs(t)<1e-10?0:t;function If(t,e,n=""){let r="matrix3d(";for(let i=0;16!==i;i++)r+=Rf(e[i]*t.elements[i])+(15!==i?",":")");return n+r}const Df=(t=>e=>If(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Bf=(t,e)=>If(t,(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1])(e),"translate(-50%,-50%)"),Of=r.forwardRef((({children:t,eps:e=.001,style:n,className:i,prepend:a,center:s,fullscreen:o,portal:l,distanceFactor:c,sprite:u=!1,transform:h=!1,occlude:d,onOcclude:f,zIndexRange:p=[16777271,0],calculatePosition:m=Pf,as:g="div",wrapperClass:y,pointerEvents:v="auto",...b},x)=>{const{gl:_,camera:w,scene:S,size:E,raycaster:M,events:C}=ld(),[T]=r.useState((()=>document.createElement(g))),A=r.useRef(),k=r.useRef(null),L=r.useRef(0),P=r.useRef([0,0]),R=r.useRef(null),I=r.useRef(null),D=(null==l?void 0:l.current)||C.connected||_.domElement.parentNode;r.useLayoutEffect((()=>{if(k.current){const t=A.current=Cf(T);if(S.updateMatrixWorld(),h)T.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const t=m(k.current,w,E);T.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${t[0]}px,${t[1]}px,0);transform-origin:0 0;`}return D&&(a?D.prepend(T):D.appendChild(T)),()=>{D&&D.removeChild(T),t.unmount()}}}),[D,h]),r.useLayoutEffect((()=>{y&&(T.className=y)}),[y]);const B=r.useMemo((()=>h?{position:"absolute",top:0,left:0,width:E.width,height:E.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-E.height/2,left:-E.width/2,width:E.width,height:E.height},...n}),[n,s,o,E,h]),O=r.useMemo((()=>({position:"absolute",pointerEvents:v})),[v]);r.useLayoutEffect((()=>{var e,r;h?null==(e=A.current)||e.render(Sh("div",{ref:R,style:B,children:Sh("div",{ref:I,style:O,children:Sh("div",{ref:x,className:i,style:n,children:t})})})):null==(r=A.current)||r.render(Sh("div",{ref:x,style:B,className:i,children:t}))}));const N=r.useRef(!0);return cd((()=>{if(k.current){w.updateMatrixWorld(),k.current.updateWorldMatrix(!0,!1);const t=h?P.current:m(k.current,w,E);if(h||Math.abs(L.current-w.zoom)>e||Math.abs(P.current[0]-t[0])>e||Math.abs(P.current[1]-t[1])>e){const e=function(t,e){const n=Af.setFromMatrixPosition(t.matrixWorld),r=kf.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),a=e.getWorldDirection(Lf);return i.angleTo(a)>Math.PI/2}(k.current,w);let n=!1;"boolean"==typeof d?!0===d&&(n=[S]):Array.isArray(d)&&(n=d.map((t=>t.current)));const r=N.current;if(n){const t=function(t,e,n,r){const i=Af.setFromMatrixPosition(t.matrixWorld),a=i.clone();a.project(e),n.setFromCamera(a,e);const s=n.intersectObjects(r,!0);if(s.length){const t=s[0].distance;return i.distanceTo(n.ray.origin)<t}return!0}(k.current,w,M,n);N.current=t&&!e}else N.current=!e;if(r!==N.current&&(f?f(!N.current):T.style.display=N.current?"block":"none"),T.style.zIndex=`${function(t,e,n){if(e instanceof fr||e instanceof Nr){const r=Af.setFromMatrixPosition(t.matrixWorld),i=kf.setFromMatrixPosition(e.matrixWorld),a=r.distanceTo(i),s=(n[1]-n[0])/(e.far-e.near),o=n[1]-s*e.far;return Math.round(s*a+o)}}(k.current,w,p)}`,h){const[t,e]=[E.width/2,E.height/2],n=w.projectionMatrix.elements[5]*e,{isOrthographicCamera:r,top:i,left:a,bottom:s,right:o}=w,l=Df(w.matrixWorldInverse),h=r?`scale(${n})translate(${Rf(-(o+a)/2)}px,${Rf((i+s)/2)}px)`:`translateZ(${n}px)`;let d=k.current.matrixWorld;u&&(d=w.matrixWorldInverse.clone().transpose().copyPosition(d).scale(k.current.scale),d.elements[3]=d.elements[7]=d.elements[11]=0,d.elements[15]=1),T.style.width=E.width+"px",T.style.height=E.height+"px",T.style.perspective=r?"":`${n}px`,R.current&&I.current&&(R.current.style.transform=`${h}${l}translate(${t}px,${e}px)`,I.current.style.transform=Bf(d,1/((c||10)/400)))}else{const e=void 0===c?1:function(t,e){if(e instanceof Nr)return e.zoom;if(e instanceof fr){const n=Af.setFromMatrixPosition(t.matrixWorld),r=kf.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,a=n.distanceTo(r);return 1/(2*Math.tan(i/2)*a)}return 1}(k.current,w)*c;T.style.transform=`translate3d(${t[0]}px,${t[1]}px,0) scale(${e})`}P.current=t,L.current=w.zoom}}})),Sh("group",{...b,ref:k})}));function Nf(t){return function(e){t.forEach((function(t){"function"==typeof t?t(e):null!=t&&(t.current=e)}))}}var Ff=function(){var t,e,n,r=new ue;function i(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new l,this.unassigned=new l,this.vertices=[]}function a(){this.normal=new ue,this.midpoint=new ue,this.area=0,this.constant=0,this.outside=null,this.mark=0,this.edge=null}function s(t,e){this.vertex=t,this.prev=null,this.next=null,this.twin=null,this.face=e}function o(t){this.point=t,this.prev=null,this.next=null,this.face=null}function l(){this.head=null,this.tail=null}return Object.assign(i.prototype,{setFromPoints:function(t){!0!==Array.isArray(t)&&console.error("THREE.ConvexHull: Points parameter is not an array."),t.length<4&&console.error("THREE.ConvexHull: The algorithm needs at least four points."),this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.vertices.push(new o(t[e]));return this.compute(),this},setFromObject:function(t){var e=[];return t.updateMatrixWorld(!0),t.traverse((function(t){var n,r,i,a=t.geometry;if(void 0!==a){if(a.isGeometry)return void console.error("THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.");if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(n=0,r=s.count;n<r;n++)(i=new ue).fromBufferAttribute(s,n).applyMatrix4(t.matrixWorld),e.push(i)}}})),this.setFromPoints(e)},containsPoint:function(t){var e=this.faces;for(let n=0,r=e.length;n<r;n++){if(e[n].distanceToPoint(t)>this.tolerance)return!1}return!0},intersectRay:function(t,e){var n=this.faces,r=-1/0,i=1/0;for(let c=0,u=n.length;c<u;c++){var a=n[c],s=a.distanceToPoint(t.origin),o=a.normal.dot(t.direction);if(s>0&&o>=0)return null;var l=0!==o?-s/o:0;if(!(l<=0)&&(o>0?i=Math.min(l,i):r=Math.max(l,r),r>i))return null}return r!==-1/0?t.at(r,e):t.at(i,e),e},intersectsRay:function(t){return null!==this.intersectRay(t,r)},makeEmpty:function(){return this.faces=[],this.vertices=[],this},addVertexToFace:function(t,e){return t.face=e,null===e.outside?this.assigned.append(t):this.assigned.insertBefore(e.outside,t),e.outside=t,this},removeVertexFromFace:function(t,e){return t===e.outside&&(null!==t.next&&t.next.face===e?e.outside=t.next:e.outside=null),this.assigned.remove(t),this},removeAllVerticesFromFace:function(t){if(null!==t.outside){for(var e=t.outside,n=t.outside;null!==n.next&&n.next.face===t;)n=n.next;return this.assigned.removeSubList(e,n),e.prev=n.next=null,t.outside=null,e}},deleteFaceVertices:function(t,e){var n=this.removeAllVerticesFromFace(t);if(void 0!==n)if(void 0===e)this.unassigned.appendChain(n);else{var r=n;do{var i=r.next;e.distanceToPoint(r.point)>this.tolerance?this.addVertexToFace(r,e):this.unassigned.append(r),r=i}while(null!==r)}return this},resolveUnassignedPoints:function(t){if(!1===this.unassigned.isEmpty()){var e=this.unassigned.first();do{var n=e.next,r=this.tolerance,i=null;for(let n=0;n<t.length;n++){var a=t[n];if(0===a.mark){var s=a.distanceToPoint(e.point);if(s>r&&(r=s,i=a),r>1e3*this.tolerance)break}}null!==i&&this.addVertexToFace(e,i),e=n}while(null!==e)}return this},computeExtremes:function(){var t,e,n,r=new ue,i=new ue,a=[],s=[];for(t=0;t<3;t++)a[t]=s[t]=this.vertices[0];for(r.copy(this.vertices[0].point),i.copy(this.vertices[0].point),t=0,e=this.vertices.length;t<e;t++){var o=this.vertices[t],l=o.point;for(n=0;n<3;n++)l.getComponent(n)<r.getComponent(n)&&(r.setComponent(n,l.getComponent(n)),a[n]=o);for(n=0;n<3;n++)l.getComponent(n)>i.getComponent(n)&&(i.setComponent(n,l.getComponent(n)),s[n]=o)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(r.x),Math.abs(i.x))+Math.max(Math.abs(r.y),Math.abs(i.y))+Math.max(Math.abs(r.z),Math.abs(i.z))),{min:a,max:s}},computeInitialHull:function(){void 0===t&&(t=new Pu,e=new _r,n=new ue);var r,i,s,o,l,c,u,h,d,f=this.vertices,p=this.computeExtremes(),m=p.min,g=p.max,y=0,v=0;for(c=0;c<3;c++)(d=g[c].point.getComponent(c)-m[c].point.getComponent(c))>y&&(y=d,v=c);for(i=m[v],s=g[v],y=0,t.set(i.point,s.point),c=0,u=this.vertices.length;c<u;c++)(r=f[c])!==i&&r!==s&&(t.closestPointToPoint(r.point,!0,n),(d=n.distanceToSquared(r.point))>y&&(y=d,o=r));for(y=-1,e.setFromCoplanarPoints(i.point,s.point,o.point),c=0,u=this.vertices.length;c<u;c++)(r=f[c])!==i&&r!==s&&r!==o&&(d=Math.abs(e.distanceToPoint(r.point)))>y&&(y=d,l=r);var b=[];if(e.distanceToPoint(l.point)<0)for(b.push(a.create(i,s,o),a.create(l,s,i),a.create(l,o,s),a.create(l,i,o)),c=0;c<3;c++)h=(c+1)%3,b[c+1].getEdge(2).setTwin(b[0].getEdge(h)),b[c+1].getEdge(1).setTwin(b[h+1].getEdge(0));else for(b.push(a.create(i,o,s),a.create(l,i,s),a.create(l,s,o),a.create(l,o,i)),c=0;c<3;c++)h=(c+1)%3,b[c+1].getEdge(2).setTwin(b[0].getEdge((3-c)%3)),b[c+1].getEdge(0).setTwin(b[h+1].getEdge(1));for(c=0;c<4;c++)this.faces.push(b[c]);for(c=0,u=f.length;c<u;c++)if((r=f[c])!==i&&r!==s&&r!==o&&r!==l){y=this.tolerance;var x=null;for(h=0;h<4;h++)(d=this.faces[h].distanceToPoint(r.point))>y&&(y=d,x=this.faces[h]);null!==x&&this.addVertexToFace(r,x)}return this},reindexFaces:function(){var t=[];for(let n=0;n<this.faces.length;n++){var e=this.faces[n];0===e.mark&&t.push(e)}return this.faces=t,this},nextVertexToAdd:function(){if(!1===this.assigned.isEmpty()){var t,e=0,n=this.assigned.first().face,r=n.outside;do{var i=n.distanceToPoint(r.point);i>e&&(e=i,t=r),r=r.next}while(null!==r&&r.face===n);return t}},computeHorizon:function(t,e,n,r){var i;this.deleteFaceVertices(n),n.mark=1,i=null===e?e=n.getEdge(0):e.next;do{var a=i.twin,s=a.face;0===s.mark&&(s.distanceToPoint(t)>this.tolerance?this.computeHorizon(t,a,s,r):r.push(i)),i=i.next}while(i!==e);return this},addAdjoiningFace:function(t,e){var n=a.create(t,e.tail(),e.head());return this.faces.push(n),n.getEdge(-1).setTwin(e.twin),n.getEdge(0)},addNewFaces:function(t,e){this.newFaces=[];var n=null,r=null;for(let s=0;s<e.length;s++){var i=e[s],a=this.addAdjoiningFace(t,i);null===n?n=a:a.next.setTwin(r),this.newFaces.push(a.face),r=a}return n.next.setTwin(r),this},addVertexToHull:function(t){var e=[];return this.unassigned.clear(),this.removeVertexFromFace(t,t.face),this.computeHorizon(t.point,null,t.face,e),this.addNewFaces(t,e),this.resolveUnassignedPoints(this.newFaces),this},cleanup:function(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this},compute:function(){var t;for(this.computeInitialHull();void 0!==(t=this.nextVertexToAdd());)this.addVertexToHull(t);return this.reindexFaces(),this.cleanup(),this}}),Object.assign(a,{create:function(t,e,n){var r=new a,i=new s(t,r),o=new s(e,r),l=new s(n,r);return i.next=l.prev=o,o.next=i.prev=l,l.next=o.prev=i,r.edge=i,r.compute()}}),Object.assign(a.prototype,{getEdge:function(t){for(var e=this.edge;t>0;)e=e.next,t--;for(;t<0;)e=e.prev,t++;return e},compute:function(){var t;return function(){void 0===t&&(t=new En);var e=this.edge.tail(),n=this.edge.head(),r=this.edge.next.head();return t.set(e.point,n.point,r.point),t.getNormal(this.normal),t.getMidpoint(this.midpoint),this.area=t.getArea(),this.constant=this.normal.dot(this.midpoint),this}}(),distanceToPoint:function(t){return this.normal.dot(t)-this.constant}}),Object.assign(s.prototype,{head:function(){return this.vertex},tail:function(){return this.prev?this.prev.vertex:null},length:function(){var t=this.head(),e=this.tail();return null!==e?e.point.distanceTo(t.point):-1},lengthSquared:function(){var t=this.head(),e=this.tail();return null!==e?e.point.distanceToSquared(t.point):-1},setTwin:function(t){return this.twin=t,t.twin=this,this}}),Object.assign(l.prototype,{first:function(){return this.head},last:function(){return this.tail},clear:function(){return this.head=this.tail=null,this},insertBefore:function(t,e){return e.prev=t.prev,e.next=t,null===e.prev?this.head=e:e.prev.next=e,t.prev=e,this},insertAfter:function(t,e){return e.prev=t,e.next=t.next,null===e.next?this.tail=e:e.next.prev=e,t.next=e,this},append:function(t){return null===this.head?this.head=t:this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t,this},appendChain:function(t){for(null===this.head?this.head=t:this.tail.next=t,t.prev=this.tail;null!==t.next;)t=t.next;return this.tail=t,this},remove:function(t){return null===t.prev?this.head=t.next:t.prev.next=t.next,null===t.next?this.tail=t.prev:t.next.prev=t.prev,this},removeSubList:function(t,e){return null===t.prev?this.head=e.next:t.prev.next=e.next,null===e.next?this.tail=t.prev:e.next.prev=t.prev,this},isEmpty:function(){return null===this.head}}),i}();class zf extends Gn{constructor(t){super();const e=[],n=[];void 0===Ff&&console.error("THREE.ConvexGeometry: ConvexGeometry relies on ConvexHull");const r=(new Ff).setFromPoints(t).faces;for(let i=0;i<r.length;i++){const t=r[i];let a=t.edge;do{const r=a.head().point;e.push(r.x,r.y,r.z),n.push(t.normal.x,t.normal.y,t.normal.z),a=a.next}while(a!==t.edge)}this.setAttribute("position",new In(e,3)),this.setAttribute("normal",new In(n,3))}}function Uf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Gf=(t,e)=>{const n=null!==t[0].index,r=new Set(Object.keys(t[0].attributes)),i=new Set(Object.keys(t[0].morphAttributes)),a={},s={},o=t[0].morphTargetsRelative,l=new Gn;let c=0;if(t.forEach(((t,u)=>{let h=0;if(n!==(null!==t.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let e in t.attributes){if(!r.has(e))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+e+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[e]&&(a[e]=[]),a[e].push(t.attributes[e]),h++}if(h!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(o!==t.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let e in t.morphAttributes){if(!i.has(e))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===s[e]&&(s[e]=[]),s[e].push(t.morphAttributes[e])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(t.userData),e){let e;if(t.index)e=t.index.count;else{if(void 0===t.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;e=t.attributes.position.count}l.addGroup(c,e,u),c+=e}})),n){let e=0;const n=[];t.forEach((t=>{const r=t.index;for(let i=0;i<r.count;++i)n.push(r.getX(i)+e);e+=t.attributes.position.count})),l.setIndex(n)}for(let u in a){const t=Hf(a[u]);if(!t)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,t)}for(let u in s){const t=s[u][0].length;if(0===t)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let e=0;e<t;++e){const t=[];for(let r=0;r<s[u].length;++r)t.push(s[u][r][e]);const n=Hf(t);if(!n)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(n)}}return l},Hf=t=>{let e,n,r,i=0;if(t.forEach((t=>(void 0===e&&(e=t.array.constructor),e!==t.array.constructor?(console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null):(void 0===n&&(n=t.itemSize),n!==t.itemSize?(console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null):(void 0===r&&(r=t.normalized),r!==t.normalized?(console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null):void(i+=t.array.length)))))),e&&n){const a=new e(i);let s=0;return t.forEach((t=>{a.set(t.array,s),s+=t.array.length})),new Ln(a,n,r)}},jf=(t,e)=>(t%e+e)%e;class Vf extends St{constructor(t,e){super(),Uf(this,"object",void 0),Uf(this,"domElement",void 0),Uf(this,"enabled",!0),Uf(this,"target",new ue),Uf(this,"minDistance",0),Uf(this,"maxDistance",1/0),Uf(this,"minZoom",0),Uf(this,"maxZoom",1/0),Uf(this,"minPolarAngle",0),Uf(this,"maxPolarAngle",Math.PI),Uf(this,"minAzimuthAngle",-1/0),Uf(this,"maxAzimuthAngle",1/0),Uf(this,"enableDamping",!1),Uf(this,"dampingFactor",.05),Uf(this,"enableZoom",!0),Uf(this,"zoomSpeed",1),Uf(this,"enableRotate",!0),Uf(this,"rotateSpeed",1),Uf(this,"enablePan",!0),Uf(this,"panSpeed",1),Uf(this,"screenSpacePanning",!0),Uf(this,"keyPanSpeed",7),Uf(this,"autoRotate",!1),Uf(this,"autoRotateSpeed",2),Uf(this,"reverseOrbit",!1),Uf(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Uf(this,"mouseButtons",{LEFT:a.ROTATE,MIDDLE:a.DOLLY,RIGHT:a.PAN}),Uf(this,"touches",{ONE:s.ROTATE,TWO:s.DOLLY_PAN}),Uf(this,"target0",void 0),Uf(this,"position0",void 0),Uf(this,"zoom0",void 0),Uf(this,"_domElementKeyEvents",null),Uf(this,"getPolarAngle",void 0),Uf(this,"getAzimuthalAngle",void 0),Uf(this,"setPolarAngle",void 0),Uf(this,"setAzimuthalAngle",void 0),Uf(this,"getDistance",void 0),Uf(this,"listenToKeyEvents",void 0),Uf(this,"saveState",void 0),Uf(this,"reset",void 0),Uf(this,"update",void 0),Uf(this,"connect",void 0),Uf(this,"dispose",void 0),this.object=t,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof fr?this.object.zoom:1,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=t=>{let e=jf(t,2*Math.PI),r=h.phi;r<0&&(r+=2*Math.PI),e<0&&(e+=2*Math.PI);let i=Math.abs(e-r);2*Math.PI-i<i&&(e<r?e+=2*Math.PI:r+=2*Math.PI),d.phi=e-r,n.update()},this.setAzimuthalAngle=t=>{let e=jf(t,2*Math.PI),r=h.theta;r<0&&(r+=2*Math.PI),e<0&&(e+=2*Math.PI);let i=Math.abs(e-r);2*Math.PI-i<i&&(e<r?e+=2*Math.PI:r+=2*Math.PI),d.theta=e-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=t=>{t.addEventListener("keydown",q),this._domElementKeyEvents=t},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object instanceof fr?n.object.zoom:1},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object instanceof fr&&(n.object.zoom=n.zoom0,n.object.updateProjectionMatrix()),n.dispatchEvent(r),n.update(),c=l.NONE},this.update=(()=>{const e=new ue,i=(new ce).setFromUnitVectors(t.up,new ue(0,1,0)),a=i.clone().invert(),s=new ue,o=new ce,g=2*Math.PI;return function(){const t=n.object.position;e.copy(t).sub(n.target),e.applyQuaternion(i),h.setFromVector3(e),n.autoRotate&&c===l.NONE&&A(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(h.theta+=d.theta*n.dampingFactor,h.phi+=d.phi*n.dampingFactor):(h.theta+=d.theta,h.phi+=d.phi);let y=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(y)&&isFinite(v)&&(y<-Math.PI?y+=g:y>Math.PI&&(y-=g),v<-Math.PI?v+=g:v>Math.PI&&(v-=g),h.theta=y<=v?Math.max(y,Math.min(v,h.theta)):h.theta>(y+v)/2?Math.max(y,h.theta):Math.min(v,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=f,h.radius=Math.max(n.minDistance,Math.min(n.maxDistance,h.radius)),!0===n.enableDamping?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),e.setFromSpherical(h),e.applyQuaternion(a),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),p.set(0,0,0)),f=1,!!(m||s.distanceToSquared(n.object.position)>u||8*(1-o.dot(n.object.quaternion))>u)&&(n.dispatchEvent(r),s.copy(n.object.position),o.copy(n.object.quaternion),m=!1,!0)}})(),this.connect=t=>{t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=t,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",X),n.domElement.addEventListener("pointerdown",j),n.domElement.addEventListener("pointercancel",$),n.domElement.addEventListener("wheel",Y)},this.dispose=()=>{var t,e,r,i,a,s;null===(t=n.domElement)||void 0===t||t.removeEventListener("contextmenu",X),null===(e=n.domElement)||void 0===e||e.removeEventListener("pointerdown",j),null===(r=n.domElement)||void 0===r||r.removeEventListener("pointercancel",$),null===(i=n.domElement)||void 0===i||i.removeEventListener("wheel",Y),null===(a=n.domElement)||void 0===a||a.ownerDocument.removeEventListener("pointermove",V),null===(s=n.domElement)||void 0===s||s.ownerDocument.removeEventListener("pointerup",W),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",q)};const n=this,r={type:"change"},i={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const u=1e-6,h=new Tu,d=new Tu;let f=1;const p=new ue;let m=!1;const g=new Ot,y=new Ot,v=new Ot,b=new Ot,x=new Ot,_=new Ot,w=new Ot,S=new Ot,E=new Ot,M=[],C={};function T(){return Math.pow(.95,n.zoomSpeed)}function A(t){n.reverseOrbit?d.theta+=t:d.theta-=t}function k(t){n.reverseOrbit?d.phi+=t:d.phi-=t}const L=(()=>{const t=new ue;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),p.add(t)}})(),P=(()=>{const t=new ue;return function(e,r){!0===n.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),p.add(t)}})(),R=(()=>{const t=new ue;return function(e,r){const i=n.domElement;if(i&&n.object instanceof fr&&n.object.isPerspectiveCamera){const a=n.object.position;t.copy(a).sub(n.target);let s=t.length();s*=Math.tan(n.object.fov/2*Math.PI/180),L(2*e*s/i.clientHeight,n.object.matrix),P(2*r*s/i.clientHeight,n.object.matrix)}else i&&n.object instanceof Nr&&n.object.isOrthographicCamera?(L(e*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),P(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function I(t){n.object instanceof fr&&n.object.isPerspectiveCamera?f/=t:n.object instanceof Nr&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(t){n.object instanceof fr&&n.object.isPerspectiveCamera?f*=t:n.object instanceof Nr&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function B(t){g.set(t.clientX,t.clientY)}function O(t){b.set(t.clientX,t.clientY)}function N(){if(1==M.length)g.set(M[0].pageX,M[0].pageY);else{const t=.5*(M[0].pageX+M[1].pageX),e=.5*(M[0].pageY+M[1].pageY);g.set(t,e)}}function F(){if(1==M.length)b.set(M[0].pageX,M[0].pageY);else{const t=.5*(M[0].pageX+M[1].pageX),e=.5*(M[0].pageY+M[1].pageY);b.set(t,e)}}function z(){const t=M[0].pageX-M[1].pageX,e=M[0].pageY-M[1].pageY,n=Math.sqrt(t*t+e*e);w.set(0,n)}function U(t){if(1==M.length)y.set(t.pageX,t.pageY);else{const e=K(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);y.set(n,r)}v.subVectors(y,g).multiplyScalar(n.rotateSpeed);const e=n.domElement;e&&(A(2*Math.PI*v.x/e.clientHeight),k(2*Math.PI*v.y/e.clientHeight)),g.copy(y)}function G(t){if(1==M.length)x.set(t.pageX,t.pageY);else{const e=K(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);x.set(n,r)}_.subVectors(x,b).multiplyScalar(n.panSpeed),R(_.x,_.y),b.copy(x)}function H(t){const e=K(t),r=t.pageX-e.x,i=t.pageY-e.y,a=Math.sqrt(r*r+i*i);S.set(0,a),E.set(0,Math.pow(S.y/w.y,n.zoomSpeed)),I(E.y),w.copy(S)}function j(t){if(!1!==n.enabled){var e,r;if(0===M.length)null===(e=n.domElement)||void 0===e||e.ownerDocument.addEventListener("pointermove",V),null===(r=n.domElement)||void 0===r||r.ownerDocument.addEventListener("pointerup",W);(function(t){M.push(t)})(t),"touch"===t.pointerType?function(t){switch(Z(t),M.length){case 1:switch(n.touches.ONE){case s.ROTATE:if(!1===n.enableRotate)return;N(),c=l.TOUCH_ROTATE;break;case s.PAN:if(!1===n.enablePan)return;F(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(n.touches.TWO){case s.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&z(),n.enablePan&&F(),c=l.TOUCH_DOLLY_PAN;break;case s.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&z(),n.enableRotate&&N(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(i)}(t):function(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case a.DOLLY:if(!1===n.enableZoom)return;(function(t){w.set(t.clientX,t.clientY)})(t),c=l.DOLLY;break;case a.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;O(t),c=l.PAN}else{if(!1===n.enableRotate)return;B(t),c=l.ROTATE}break;case a.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;B(t),c=l.ROTATE}else{if(!1===n.enablePan)return;O(t),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(i)}(t)}}function V(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(Z(t),c){case l.TOUCH_ROTATE:if(!1===n.enableRotate)return;U(t),n.update();break;case l.TOUCH_PAN:if(!1===n.enablePan)return;G(t),n.update();break;case l.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;(function(t){n.enableZoom&&H(t),n.enablePan&&G(t)})(t),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function(t){n.enableZoom&&H(t),n.enableRotate&&U(t)})(t),n.update();break;default:c=l.NONE}}(t):function(t){if(!1!==n.enabled)switch(c){case l.ROTATE:if(!1===n.enableRotate)return;!function(t){y.set(t.clientX,t.clientY),v.subVectors(y,g).multiplyScalar(n.rotateSpeed);const e=n.domElement;e&&(A(2*Math.PI*v.x/e.clientHeight),k(2*Math.PI*v.y/e.clientHeight)),g.copy(y),n.update()}(t);break;case l.DOLLY:if(!1===n.enableZoom)return;!function(t){S.set(t.clientX,t.clientY),E.subVectors(S,w),E.y>0?I(T()):E.y<0&&D(T()),w.copy(S),n.update()}(t);break;case l.PAN:if(!1===n.enablePan)return;!function(t){x.set(t.clientX,t.clientY),_.subVectors(x,b).multiplyScalar(n.panSpeed),R(_.x,_.y),b.copy(x),n.update()}(t)}}(t))}function W(t){var e,r,i;(J(t),0===M.length)&&(null===(e=n.domElement)||void 0===e||e.releasePointerCapture(t.pointerId),null===(r=n.domElement)||void 0===r||r.ownerDocument.removeEventListener("pointermove",V),null===(i=n.domElement)||void 0===i||i.ownerDocument.removeEventListener("pointerup",W));n.dispatchEvent(o),c=l.NONE}function $(t){J(t)}function Y(t){!1===n.enabled||!1===n.enableZoom||c!==l.NONE&&c!==l.ROTATE||(t.preventDefault(),n.dispatchEvent(i),function(t){t.deltaY<0?D(T()):t.deltaY>0&&I(T()),n.update()}(t),n.dispatchEvent(o))}function q(t){!1===n.enabled||!1===n.enablePan||function(t){let e=!1;switch(t.code){case n.keys.UP:R(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:R(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:R(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:R(-n.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),n.update())}(t)}function X(t){!1!==n.enabled&&t.preventDefault()}function J(t){delete C[t.pointerId];for(let e=0;e<M.length;e++)if(M[e].pointerId==t.pointerId)return void M.splice(e,1)}function Z(t){let e=C[t.pointerId];void 0===e&&(e=new Ot,C[t.pointerId]=e),e.set(t.pageX,t.pageY)}function K(t){const e=t.pointerId===M[0].pointerId?M[1]:M[0];return C[e.pointerId]}void 0!==e&&this.connect(e),this.update()}}const Wf=new ue;function $f(t,e,n,r,i,a){const s=2*Math.PI*i/4,o=Math.max(a-2*i,0),l=Math.PI/4;Wf.copy(e),Wf[r]=0,Wf.normalize();const c=.5*s/(s+o),u=1-Wf.angleTo(t)/l;return 1===Math.sign(Wf[n])?u*c:o/(s+o)+c+c*(1-u)}class Yf extends or{constructor(t=1,e=1,n=1,r=2,i=.1){if(r=2*r+1,i=Math.min(t/2,e/2,n/2,i),super(1,1,1,r,r,r),1===r)return;const a=this.toNonIndexed();this.index=null,this.attributes.position=a.attributes.position,this.attributes.normal=a.attributes.normal,this.attributes.uv=a.attributes.uv;const s=new ue,o=new ue,l=new ue(t,e,n).divideScalar(2).subScalar(i),c=this.attributes.position.array,u=this.attributes.normal.array,h=this.attributes.uv.array,d=c.length/6,f=new ue,p=.5/r;for(let m=0,g=0;m<c.length;m+=3,g+=2)switch(s.fromArray(c,m),o.copy(s),o.x-=Math.sign(o.x)*p,o.y-=Math.sign(o.y)*p,o.z-=Math.sign(o.z)*p,o.normalize(),c[m+0]=l.x*Math.sign(s.x)+o.x*i,c[m+1]=l.y*Math.sign(s.y)+o.y*i,c[m+2]=l.z*Math.sign(s.z)+o.z*i,u[m+0]=o.x,u[m+1]=o.y,u[m+2]=o.z,Math.floor(m/d)){case 0:f.set(1,0,0),h[g+0]=$f(f,o,"z","y",i,n),h[g+1]=1-$f(f,o,"y","z",i,e);break;case 1:f.set(-1,0,0),h[g+0]=1-$f(f,o,"z","y",i,n),h[g+1]=1-$f(f,o,"y","z",i,e);break;case 2:f.set(0,1,0),h[g+0]=1-$f(f,o,"x","z",i,t),h[g+1]=$f(f,o,"z","x",i,n);break;case 3:f.set(0,-1,0),h[g+0]=1-$f(f,o,"x","z",i,t),h[g+1]=1-$f(f,o,"z","x",i,n);break;case 4:f.set(0,0,1),h[g+0]=1-$f(f,o,"x","y",i,t),h[g+1]=1-$f(f,o,"y","x",i,e);break;case 5:f.set(0,0,-1),h[g+0]=$f(f,o,"x","y",i,t),h[g+1]=1-$f(f,o,"y","x",i,e)}}}const qf=new fe,Xf=new ue;class Jf extends Vc{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new In([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new In([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(t){const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==e&&(e.applyMatrix4(t),n.applyMatrix4(t),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(t){let e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));const n=new Su(e,6,1);return this.setAttribute("instanceStart",new ds(n,3,0)),this.setAttribute("instanceEnd",new ds(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(t){let e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));const n=new Su(e,6,1);return this.setAttribute("instanceColorStart",new ds(n,3,0)),this.setAttribute("instanceColorEnd",new ds(n,3,3)),this}fromWireframeGeometry(t){return this.setPositions(t.attributes.position.array),this}fromEdgesGeometry(t){return this.setPositions(t.attributes.position.array),this}fromMesh(t){return this.fromWireframeGeometry(new Bl(t.geometry)),this}fromLineSegments(t){const e=t.geometry;return this.setPositions(e.attributes.position.array),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new fe);const t=this.attributes.instanceStart,e=this.attributes.instanceEnd;void 0!==t&&void 0!==e&&(this.boundingBox.setFromBufferAttribute(t),qf.setFromBufferAttribute(e),this.boundingBox.union(qf))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Re),null===this.boundingBox&&this.computeBoundingBox();const t=this.attributes.instanceStart,e=this.attributes.instanceEnd;if(void 0!==t&&void 0!==e){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let i=0,a=t.count;i<a;i++)Xf.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(Xf)),Xf.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(Xf));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(t){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(t)}}class Zf extends Jf{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(t){const e=t.length-3,n=new Float32Array(2*e);for(let r=0;r<e;r+=3)n[2*r]=t[r],n[2*r+1]=t[r+1],n[2*r+2]=t[r+2],n[2*r+3]=t[r+3],n[2*r+4]=t[r+4],n[2*r+5]=t[r+5];return super.setPositions(n),this}setColors(t){const e=t.length-3,n=new Float32Array(2*e);for(let r=0;r<e;r+=3)n[2*r]=t[r],n[2*r+1]=t[r+1],n[2*r+2]=t[r+2],n[2*r+3]=t[r+3],n[2*r+4]=t[r+4],n[2*r+5]=t[r+5];return super.setColors(n),this}fromLine(t){const e=t.geometry;return this.setPositions(e.attributes.position.array),this}}kr.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ot(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},Lr.line={uniforms:ur.merge([kr.common,kr.fog,kr.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tworldStart = start.xyz;\n\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t#else\n\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// get the offset direction as perpendicular to the view vector\n\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\tvec3 offset;\n\t\t\t\tif ( position.y < 0.5 ) {\n\n\t\t\t\t\toffset = normalize( cross( start.xyz, worldDir ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\toffset = normalize( cross( end.xyz, worldDir ) );\n\n\t\t\t\t}\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\tfloat forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );\n\n\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t// extend the line bounds to encompass  endcaps\n\t\t\t\t\tstart.xyz += - worldDir * linewidth * 0.5;\n\t\t\t\t\tend.xyz += worldDir * linewidth * 0.5;\n\n\t\t\t\t\t// shift the position of the quad so it hugs the forward edge of the line\n\t\t\t\t\toffset.xy -= dir * forwardOffset;\n\t\t\t\t\toffset.z += 0.5;\n\n\t\t\t\t#endif\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\toffset.xy += dir * 2.0 * forwardOffset;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth * 0.5;\n\n\t\t\t\t// set the world position\n\t\t\t\tworldPos = ( position.y < 0.5 ) ? start : end;\n\t\t\t\tworldPos.xyz += offset;\n\n\t\t\t\t// project the worldpos\n\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t// segments overlap neatly\n\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t#else\n\n\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\tdir.x /= aspect;\n\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\toffset += - dir;\n\n\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\toffset += dir;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth;\n\n\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t// select end\n\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t// back to clip space\n\t\t\t\toffset *= clip.w;\n\n\t\t\t\tclip.xy += offset;\n\n\t\t\t#endif\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform float linewidth;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\tfloat mua;\n\t\t\tfloat mub;\n\n\t\t\tvec3 p13 = p1 - p3;\n\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\tmua = numer / denom;\n\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\treturn vec2( mua, mub );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tfloat alpha = opacity;\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\tfloat len = length( delta );\n\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#endif\n\n\t\t\t#else\n\n\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t#else\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, alpha );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};class Kf extends hr{constructor(t){super({type:"LineMaterial",uniforms:ur.clone(Lr.line.uniforms),vertexShader:Lr.line.vertexShader,fragmentShader:Lr.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){!0===t?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set(t){Boolean(t)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),!0===t?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(t){Boolean(t)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),!0===t?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(t)}}const Qf=new ue,tp=new ue,ep=new ae,np=new ae,rp=new ae,ip=new ue,ap=new Ge,sp=new Pu,op=new ue,lp=new fe,cp=new Re,up=new ae;let hp,dp,fp,pp;function mp(t,e,n){return up.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),up.multiplyScalar(1/up.w),up.x=pp/n.width,up.y=pp/n.height,up.applyMatrix4(t.projectionMatrixInverse),up.multiplyScalar(1/up.w),Math.abs(Math.max(up.x,up.y))}class gp extends ar{constructor(t=new Jf,e=new Kf({color:16777215*Math.random()})){super(t,e),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const t=this.geometry,e=t.attributes.instanceStart,n=t.attributes.instanceEnd,r=new Float32Array(2*e.count);for(let a=0,s=0,o=e.count;a<o;a++,s+=2)Qf.fromBufferAttribute(e,a),tp.fromBufferAttribute(n,a),r[s]=0===s?0:r[s-1],r[s+1]=r[s]+Qf.distanceTo(tp);const i=new Su(r,2,1);return t.setAttribute("instanceDistanceStart",new ds(i,1,0)),t.setAttribute("instanceDistanceEnd",new ds(i,1,1)),this}raycast(t,e){const n=this.material.worldUnits,r=t.camera;null===r&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const i=void 0!==t.params.Line2&&t.params.Line2.threshold||0;hp=t.ray;const a=this.matrixWorld,s=this.geometry,o=this.material;let l,c;if(pp=o.linewidth+i,dp=s.attributes.instanceStart,fp=s.attributes.instanceEnd,null===s.boundingSphere&&s.computeBoundingSphere(),cp.copy(s.boundingSphere).applyMatrix4(a),n)l=.5*pp;else{l=mp(r,Math.max(r.near,cp.distanceToPoint(hp.origin)),o.resolution)}if(cp.radius+=l,!1!==hp.intersectsSphere(cp)){if(null===s.boundingBox&&s.computeBoundingBox(),lp.copy(s.boundingBox).applyMatrix4(a),n)c=.5*pp;else{c=mp(r,Math.max(r.near,lp.distanceToPoint(hp.origin)),o.resolution)}lp.expandByScalar(c),!1!==hp.intersectsBox(lp)&&(n?function(t,e){for(let n=0,r=dp.count;n<r;n++){sp.start.fromBufferAttribute(dp,n),sp.end.fromBufferAttribute(fp,n);const r=new ue,i=new ue;hp.distanceSqToSegment(sp.start,sp.end,i,r),i.distanceTo(r)<.5*pp&&e.push({point:i,pointOnLine:r,distance:hp.origin.distanceTo(i),object:t,face:null,faceIndex:n,uv:null,uv2:null})}}(this,e):function(t,e,n){const r=e.projectionMatrix,i=t.material.resolution,a=t.matrixWorld,s=t.geometry,o=s.attributes.instanceStart,l=s.attributes.instanceEnd,c=-e.near;hp.at(1,rp),rp.w=1,rp.applyMatrix4(e.matrixWorldInverse),rp.applyMatrix4(r),rp.multiplyScalar(1/rp.w),rp.x*=i.x/2,rp.y*=i.y/2,rp.z=0,ip.copy(rp),ap.multiplyMatrices(e.matrixWorldInverse,a);for(let u=0,h=o.count;u<h;u++){if(ep.fromBufferAttribute(o,u),np.fromBufferAttribute(l,u),ep.w=1,np.w=1,ep.applyMatrix4(ap),np.applyMatrix4(ap),ep.z>c&&np.z>c)continue;if(ep.z>c){const t=ep.z-np.z,e=(ep.z-c)/t;ep.lerp(np,e)}else if(np.z>c){const t=np.z-ep.z,e=(np.z-c)/t;np.lerp(ep,e)}ep.applyMatrix4(r),np.applyMatrix4(r),ep.multiplyScalar(1/ep.w),np.multiplyScalar(1/np.w),ep.x*=i.x/2,ep.y*=i.y/2,np.x*=i.x/2,np.y*=i.y/2,sp.start.copy(ep),sp.start.z=0,sp.end.copy(np),sp.end.z=0;const e=sp.closestPointToPointParameter(ip,!0);sp.at(e,op);const s=Bt.lerp(ep.z,np.z,e),h=s>=-1&&s<=1,d=ip.distanceTo(op)<.5*pp;if(h&&d){sp.start.fromBufferAttribute(o,u),sp.end.fromBufferAttribute(l,u),sp.start.applyMatrix4(a),sp.end.applyMatrix4(a);const e=new ue,r=new ue;hp.distanceSqToSegment(sp.start,sp.end,r,e),n.push({point:r,pointOnLine:e,distance:hp.origin.distanceTo(r),object:t,face:null,faceIndex:u,uv:null,uv2:null})}}}(this,r,e))}}}class yp extends gp{constructor(t=new Zf,e=new Kf({color:16777215*Math.random()})){super(t,e),this.isLine2=!0,this.type="Line2"}}const vp=r.forwardRef((function({follow:t=!0,lockX:e=!1,lockY:n=!1,lockZ:i=!1,...a},s){const o=r.useRef();return cd((({camera:r})=>{if(!t||!o.current)return;const a=o.current.rotation.clone();o.current.quaternion.copy(r.quaternion),e&&(o.current.rotation.x=a.x),n&&(o.current.rotation.y=a.y),i&&(o.current.rotation.z=a.z)})),Sh("group",{ref:Nf([o,s]),...a})})),bp=r.forwardRef((function({points:t,color:e="black",vertexColors:n,linewidth:i,lineWidth:a,dashed:s,...o},l){const c=ld((t=>t.size)),[u]=r.useState((()=>new yp)),[h]=r.useState((()=>new Kf)),d=r.useMemo((()=>{const e=new Zf,r=t.map((t=>t instanceof ue?t.toArray():t));if(e.setPositions(r.flat()),n){const t=n.map((t=>t instanceof Kt?t.toArray():t));e.setColors(t.flat())}return e}),[t,n]);return r.useLayoutEffect((()=>{u.computeLineDistances()}),[t,u]),r.useLayoutEffect((()=>{s?h.defines.USE_DASH="":delete h.defines.USE_DASH,h.needsUpdate=!0}),[s,h]),r.useEffect((()=>()=>d.dispose()),[d]),Eh("primitive",{object:u,ref:l,...o,children:[Sh("primitive",{object:d,attach:"geometry"}),Sh("primitive",{object:h,attach:"material",color:e,vertexColors:Boolean(n),resolution:[c.width,c.height],linewidth:null!=i?i:a,dashed:s,...o})]})}));function xp(){var t,e=0,n=[],r=0,i=0;var a=d((function(t){i||o(1,t)})),s=d((function(t){i||o(-1,t)}));function o(n,r){i++;var a=0;try{r===m&&f();var s=n>0&&h(r);s?s.call(r,d((function(t){a++,o(1,t)})),d((function(t){a++,o(-1,t)}))):(e=n,t=r,l())}catch(c){!e&&!a&&o(-1,c)}}function l(){r||(setTimeout(c,0),r=1)}function c(){var t=n;r=0,n=[],t.forEach(u)}function u(t){t()}function h(t){var e=t&&(p(t)||"object"==typeof t)&&t.then;return p(e)&&e}function d(t){var e=0;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];e++||t.apply(this,n)}}function f(){throw new TypeError("Chaining cycle detected")}var p=function(t){return"function"==typeof t},m={then:function(r,i){var a=xp();return n.push((function(){var n=e>0?r:i;if(p(n))try{var s=n(t);s===a&&f();var o=h(s);o?o.call(s,a.resolve,a.reject):a.resolve(s)}catch(l){a.reject(l)}else a[e>0?"resolve":"reject"](t)})),e&&l(),a},resolve:a,reject:s};return m}function _p(){var t,e,n=new Promise((function(n,r){t=n,e=r}));return{then:n.then.bind(n),resolve:t,reject:e}}xp.all=_p.all=function(t){var e=0,n=[],r=wp();return 0===t.length?r.resolve([]):t.forEach((function(i,a){var s=wp();s.resolve(i),s.then((function(i){e++,n[a]=i,e===t.length&&r.resolve(n)}),r.reject)})),r};var wp="function"==typeof Promise?_p:xp;function Sp(){var t=Object.create(null);function e(r,i){var a=r.id,s=r.name,o=r.dependencies;void 0===o&&(o=[]);var l=r.init;void 0===l&&(l=function(){});var c=r.getTransferables;if(void 0===c&&(c=null),!t[a])try{o=o.map((function(n){return n&&n.isWorkerModule&&(e(n,(function(t){if(t instanceof Error)throw t})),n=t[n.id].value),n})),l=n("<"+s+">.init",l),c&&(c=n("<"+s+">.getTransferables",c));var u=null;"function"==typeof l?u=l.apply(void 0,o):console.error("worker module init function failed to rehydrate"),t[a]={id:a,value:u,getTransferables:c},i(u)}catch(h){h&&h.noLog||console.error(h),i(h)}}function n(t,e){var n=void 0;self.troikaDefine=function(t){return n=t};var r=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+e+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(i){console.error(i)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var r=n.data,i=r.messageId,a=r.action,s=r.data;try{"registerModule"===a&&e(s,(function(t){t instanceof Error?postMessage({messageId:i,success:!1,error:t.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"==typeof t}})})),"callModule"===a&&function(e,n){var r,i=e.id,a=e.args;(!t[i]||"function"!=typeof t[i].value)&&n(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var s=(r=t[i]).value.apply(r,a);s&&"function"==typeof s.then?s.then(o,(function(t){return n(t instanceof Error?t:new Error(""+t))})):o(s)}catch(l){n(l)}function o(e){try{var r=t[i].getTransferables&&t[i].getTransferables(e);(!r||!Array.isArray(r)||!r.length)&&(r=void 0),n(e,r)}catch(a){console.error(a),n(a)}}}(s,(function(t,e){t instanceof Error?postMessage({messageId:i,success:!1,error:t.message}):postMessage({messageId:i,success:!0,result:t},e||void 0)}))}catch(o){postMessage({messageId:i,success:!1,error:o.stack})}}))}var Ep=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),t=!0}catch(e){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return Ep=function(){return t},t},Mp=0,Cp=0,Tp=!1,Ap=Object.create(null),kp=Object.create(null),Lp=Object.create(null);function Pp(t){if(!(t&&"function"==typeof t.init||Tp))throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,r=t.getTransferables,i=t.workerId;if(!Ep())return function(t){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then((function(e){if("function"==typeof e)return e.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return e._getInitResult=function(){var n=t.dependencies,r=t.init;n=Array.isArray(n)?n.map((function(t){return t&&t._getInitResult?t._getInitResult():t})):[];var i=wp.all(n).then((function(t){return r.apply(null,t)}));return e._getInitResult=function(){return i},i},e}(t);null==i&&(i="#default");var a="workerModule"+ ++Mp,s=t.name||a,o=null;function l(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(!o){o=Ip(i,"registerModule",l.workerModuleData);var n=function(){o=null,kp[i].delete(n)};(kp[i]||(kp[i]=new Set)).add(n)}return o.then((function(e){if(e.isCallable)return Ip(i,"callModule",{id:a,args:t});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return e=e&&e.map((function(t){return"function"==typeof t&&!t.workerModuleData&&(Tp=!0,t=Pp({workerId:i,name:"<"+s+"> function dependency: "+t.name,init:"function(){return (\n"+Rp(t)+"\n)}"}),Tp=!1),t&&t.workerModuleData&&(t=t.workerModuleData),t})),l.workerModuleData={isWorkerModule:!0,id:a,name:s,dependencies:e,init:Rp(n),getTransferables:r&&Rp(r)},l}function Rp(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Ip(t,e,n){var r=wp(),i=++Cp;return Lp[i]=function(t){t.success?r.resolve(t.result):r.reject(new Error("Error in worker "+e+" call: "+t.error))},function(t){var e=Ap[t];if(!e){var n=Rp(Sp);(e=Ap[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(t){var e=t.data,n=e.messageId,r=Lp[n];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete Lp[n],r(e)}}return e}(t).postMessage({messageId:i,action:e,data:n}),r}var Dp=Pp({name:"Thenable",dependencies:[wp],init:function(t){return t}});function Bp(){var t=function(t){function e(t,e,n,r,i,a,s,o){var l=1-s;o.x=l*l*t+2*l*s*n+s*s*i,o.y=l*l*e+2*l*s*r+s*s*a}function n(t,e,n,r,i,a,s,o,l,c){var u=1-l;c.x=u*u*u*t+3*u*u*l*n+3*u*l*l*i+l*l*l*s,c.y=u*u*u*e+3*u*u*l*r+3*u*l*l*a+l*l*l*o}function r(t,e){for(var n,r,i,a,s,o=/([MLQCZ])([^MLQCZ]*)/g;n=o.exec(t);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(t){return parseFloat(t)}));switch(n[1]){case"M":a=r=l[0],s=i=l[1];break;case"L":(l[0]!==a||l[1]!==s)&&e("L",a,s,a=l[0],s=l[1]);break;case"Q":e("Q",a,s,a=l[2],s=l[3],l[0],l[1]);break;case"C":e("C",a,s,a=l[4],s=l[5],l[0],l[1],l[2],l[3]);break;case"Z":(a!==r||s!==i)&&e("L",a,s,r,i)}}}function i(t,i,a){void 0===a&&(a=16);var s={x:0,y:0};r(t,(function(t,r,o,l,c,u,h,d,f){switch(t){case"L":i(r,o,l,c);break;case"Q":for(var p=r,m=o,g=1;g<a;g++)e(r,o,u,h,l,c,g/(a-1),s),i(p,m,s.x,s.y),p=s.x,m=s.y;break;case"C":for(var y=r,v=o,b=1;b<a;b++)n(r,o,u,h,d,f,l,c,b/(a-1),s),i(y,v,s.x,s.y),y=s.x,v=s.y}}))}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",s=new WeakMap,o={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(t,e){var n=t.getContext?t.getContext("webgl",o):t,r=s.get(n);if(!r){let t=function(t){var e=a[t];if(!e&&!(e=a[t]=n.getExtension(t)))throw new Error(t+" not supported");return e},e=function(t,e){var r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r},o=function(r,a,s,o){if(!l[r]){var c={},u={},h=n.createProgram();n.attachShader(h,e(a,n.VERTEX_SHADER)),n.attachShader(h,e(s,n.FRAGMENT_SHADER)),n.linkProgram(h),l[r]={program:h,transaction:function(e){n.useProgram(h),e({setUniform:function(t,e){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];var a=u[e]||(u[e]=n.getUniformLocation(h,e));n["uniform"+t].apply(n,[a].concat(r))},setAttribute:function(e,r,a,s,o){var l=c[e];l||(l=c[e]={buf:n.createBuffer(),loc:n.getAttribLocation(h,e),data:null}),n.bindBuffer(n.ARRAY_BUFFER,l.buf),n.vertexAttribPointer(l.loc,r,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l.loc),i?n.vertexAttribDivisor(l.loc,s):t("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,s),o!==l.data&&(n.bufferData(n.ARRAY_BUFFER,o,a),l.data=o)}})}}}l[r].transaction(o)},d=function(t,e){u++;try{n.activeTexture(n.TEXTURE0+u);var r=c[t];r||(r=c[t]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,r),e(r,u)}finally{u--}},f=function(t,e,r){var i=n.createFramebuffer();h.push(i),n.bindFramebuffer(n.FRAMEBUFFER,i),n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,t),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);try{r(i)}finally{n.deleteFramebuffer(i),n.bindFramebuffer(n.FRAMEBUFFER,h[--h.length-1]||null)}},p=function(){a={},l={},c={},u=-1,h.length=0};var i=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext,a={},l={},c={},u=-1,h=[];n.canvas.addEventListener("webglcontextlost",(function(t){p(),t.preventDefault()}),!1),s.set(n,r={gl:n,isWebGL2:i,getExtension:t,withProgram:o,withTexture:d,withTextureFramebuffer:f,handleContextLoss:p})}e(r)}function c(t,e,n,r,i,s,o,c){void 0===o&&(o=15),void 0===c&&(c=null),l(t,(function(t){var l=t.gl,u=t.withProgram;(0,t.withTexture)("copy",(function(t,h){l.texImage2D(l.TEXTURE_2D,0,l.RGBA,i,s,0,l.RGBA,l.UNSIGNED_BYTE,e),u("copy",a,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",(function(t){var e=t.setUniform;(0,t.setAttribute)("aUV",2,l.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),e("1i","image",h),l.bindFramebuffer(l.FRAMEBUFFER,c||null),l.disable(l.BLEND),l.colorMask(8&o,4&o,2&o,1&o),l.viewport(n,r,i,s),l.scissor(n,r,i,s),l.drawArrays(l.TRIANGLES,0,3)}))}))}))}var u=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:c,resizeWebGLCanvasWithoutClearing:function(t,e,n){var r=t.width,i=t.height;l(t,(function(a){var s=a.gl,o=new Uint8Array(r*i*4);s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,o),t.width=e,t.height=n,c(s,o,0,0,r,i)}))}});function h(t,e,n,r,a,s){void 0===s&&(s=1);var o=new Uint8Array(t*e),l=r[2]-r[0],c=r[3]-r[1],u=[];i(n,(function(t,e,n,r){u.push({x1:t,y1:e,x2:n,y2:r,minX:Math.min(t,n),minY:Math.min(e,r),maxX:Math.max(t,n),maxY:Math.max(e,r)})})),u.sort((function(t,e){return t.maxX-e.maxX}));for(var h=0;h<t;h++)for(var d=0;d<e;d++){var f=g(r[0]+l*(h+.5)/t,r[1]+c*(d+.5)/e),m=Math.pow(1-Math.abs(f)/a,s)/2;f<0&&(m=1-m),m=Math.max(0,Math.min(255,Math.round(255*m))),o[d*t+h]=m}return o;function g(t,e){for(var n=1/0,r=1/0,i=u.length;i--;){var a=u[i];if(a.maxX+r<=t)break;if(t+r>a.minX&&e-r<a.maxY&&e+r>a.minY){var s=p(t,e,a.x1,a.y1,a.x2,a.y2);s<n&&(n=s,r=Math.sqrt(n))}}return function(t,e){for(var n=0,r=u.length;r--;){var i=u[r];if(i.maxX<=t)break;i.y1>e!=i.y2>e&&t<(i.x2-i.x1)*(e-i.y1)/(i.y2-i.y1)+i.x1&&(n+=i.y1<i.y2?1:-1)}return 0!==n}(t,e)&&(r=-r),r}}function d(t,e,n,r,i,a,s,o,l,c){void 0===a&&(a=1),void 0===o&&(o=0),void 0===l&&(l=0),void 0===c&&(c=0),f(t,e,n,r,i,a,s,null,o,l,c)}function f(t,e,n,r,i,a,s,o,l,u,d){void 0===a&&(a=1),void 0===l&&(l=0),void 0===u&&(u=0),void 0===d&&(d=0);for(var f=h(t,e,n,r,i,a),p=new Uint8Array(4*f.length),m=0;m<f.length;m++)p[4*m+d]=f[m];c(s,p,l,u,t,e,1<<3-d,o)}function p(t,e,n,r,i,a){var s=i-n,o=a-r,l=s*s+o*o,c=l?Math.max(0,Math.min(1,((t-n)*s+(e-r)*o)/l)):0,u=t-(n+c*s),h=e-(r+c*o);return u*u+h*h}var m=Object.freeze({__proto__:null,generate:h,generateIntoCanvas:d,generateIntoFramebuffer:f}),g=new Float32Array([0,0,2,0,0,2]),y=null,v=!1,b={},x=new WeakMap;function _(t){if(!v&&!M(t))throw new Error("WebGL generation not supported")}function w(t,e,n,r,i,a,s){if(void 0===a&&(a=1),void 0===s&&(s=null),!s&&!(s=y)){var o="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!o)throw new Error("OffscreenCanvas or DOM canvas not supported");s=y=o.getContext("webgl",{depth:!1})}_(s);var c=new Uint8Array(t*e*4);l(s,(function(s){var o=s.gl,l=s.withTexture,u=s.withTextureFramebuffer;l("readable",(function(s,l){o.texImage2D(o.TEXTURE_2D,0,o.RGBA,t,e,0,o.RGBA,o.UNSIGNED_BYTE,null),u(s,l,(function(s){E(t,e,n,r,i,a,o,s,0,0,0),o.readPixels(0,0,t,e,o.RGBA,o.UNSIGNED_BYTE,c)}))}))}));for(var u=new Uint8Array(t*e),h=0,d=0;h<c.length;h+=4)u[d++]=c[h];return u}function S(t,e,n,r,i,a,s,o,l,c){void 0===a&&(a=1),void 0===o&&(o=0),void 0===l&&(l=0),void 0===c&&(c=0),E(t,e,n,r,i,a,s,null,o,l,c)}function E(t,e,n,r,s,o,c,u,h,d,f){void 0===o&&(o=1),void 0===h&&(h=0),void 0===d&&(d=0),void 0===f&&(f=0),_(c);var p=[];i(n,(function(t,e,n,r){p.push(t,e,n,r)})),p=new Float32Array(p),l(c,(function(n){var i=n.gl,l=n.isWebGL2,c=n.getExtension,m=n.withProgram,y=n.withTexture,v=n.withTextureFramebuffer,b=n.handleContextLoss;if(y("rawDistances",(function(n,y){(t!==n._lastWidth||e!==n._lastHeight)&&i.texImage2D(i.TEXTURE_2D,0,i.RGBA,n._lastWidth=t,n._lastHeight=e,0,i.RGBA,i.UNSIGNED_BYTE,null),m("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",(function(a){var u=a.setAttribute,h=a.setUniform,d=!l&&c("ANGLE_instanced_arrays"),f=!l&&c("EXT_blend_minmax");u("aUV",2,i.STATIC_DRAW,0,g),u("aLineSegment",4,i.DYNAMIC_DRAW,1,p),h.apply(void 0,["4f","uGlyphBounds"].concat(r)),h("1f","uMaxDistance",s),h("1f","uExponent",o),v(n,y,(function(n){i.enable(i.BLEND),i.colorMask(!0,!0,!0,!0),i.viewport(0,0,t,e),i.scissor(0,0,t,e),i.blendFunc(i.ONE,i.ONE),i.blendEquationSeparate(i.FUNC_ADD,l?i.MAX:f.MAX_EXT),i.clear(i.COLOR_BUFFER_BIT),l?i.drawArraysInstanced(i.TRIANGLES,0,3,p.length/4):d.drawArraysInstancedANGLE(i.TRIANGLES,0,3,p.length/4)}))})),m("post",a,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",(function(n){n.setAttribute("aUV",2,i.STATIC_DRAW,0,g),n.setUniform("1i","tex",y),i.bindFramebuffer(i.FRAMEBUFFER,u),i.disable(i.BLEND),i.colorMask(0===f,1===f,2===f,3===f),i.viewport(h,d,t,e),i.scissor(h,d,t,e),i.drawArrays(i.TRIANGLES,0,3)}))})),i.isContextLost())throw b(),new Error("webgl context lost")}))}function M(t){var e=t&&t!==y?t.canvas||t:b,n=x.get(e);if(void 0===n){v=!0;var r=null;try{var i=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],a=w(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,t);(n=a&&i.length===a.length&&a.every((function(t,e){return t===i[e]})))||(r="bad trial run results",console.info(i,a))}catch(s){n=!1,r=s.message}r&&console.warn("WebGL SDF generation not supported:",r),v=!1,x.set(e,n)}return n}var C=Object.freeze({__proto__:null,generate:w,generateIntoCanvas:S,generateIntoFramebuffer:E,isSupported:M});return t.forEachPathCommand=r,t.generate=function(t,e,n,r,i,a){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===a&&(a=1);try{return w.apply(C,arguments)}catch(s){return console.info("WebGL SDF generation failed, falling back to JS",s),h.apply(m,arguments)}},t.generateIntoCanvas=function(t,e,n,r,i,a,s,o,l,c){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===a&&(a=1),void 0===o&&(o=0),void 0===l&&(l=0),void 0===c&&(c=0);try{return S.apply(C,arguments)}catch(u){return console.info("WebGL SDF generation failed, falling back to JS",u),d.apply(m,arguments)}},t.javascript=m,t.pathToLineSegments=i,t.webgl=C,t.webglUtils=u,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return t}const Op=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Np(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(t,e){let n=Ar[e];return n?Np(n):t}))}const Fp=[];for(let ux=0;ux<256;ux++)Fp[ux]=(ux<16?"0":"")+ux.toString(16);const zp=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let n=arguments[e];if(n)for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e])}return t},Up=Date.now(),Gp=new WeakMap,Hp=new Map;let jp=1e10;function Vp(t,e){const n=function(t){const e=JSON.stringify(t,$p);let n=qp.get(e);return null==n&&qp.set(e,n=++Yp),n}(e);let r=Gp.get(t);if(r||Gp.set(t,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,a=function(r){t.onBeforeCompile.call(this,r);const a=this.customProgramCacheKey()+"|"+r.vertexShader+"|"+r.fragmentShader;let s=Hp[a];if(!s){const t=function({vertexShader:t,fragmentShader:e},n,r){let{vertexDefs:i,vertexMainIntro:a,vertexMainOutro:s,vertexTransform:o,fragmentDefs:l,fragmentMainIntro:c,fragmentMainOutro:u,fragmentColorTransform:h,customRewriter:d,timeUniform:f}=n;if(i=i||"",a=a||"",s=s||"",l=l||"",c=c||"",u=u||"",(o||d)&&(t=Np(t)),(h||d)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"),e=Np(e)),d){let n=d({vertexShader:t,fragmentShader:e});t=n.vertexShader,e=n.fragmentShader}if(h){let t=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(e=>(t.push(e),""))),u=`${h}\n${t.join("\n")}\n${u}`}if(f){const t=`\nuniform float ${f};\n`;i=t+i,l=t+l}return o&&(t=`vec3 troika_position_${r};\nvec3 troika_normal_${r};\nvec2 troika_uv_${r};\n${t}\n`,i=`${i}\nvoid troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${o}\n}\n`,a=`\ntroika_position_${r} = vec3(position);\ntroika_normal_${r} = vec3(normal);\ntroika_uv_${r} = vec2(uv);\ntroikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});\n${a}\n`,t=t.replace(/\b(position|normal|uv)\b/g,((t,e,n,i)=>/\battribute\s+vec[23]\s+$/.test(i.substr(0,n))?e:`troika_${e}_${r}`))),t=Wp(t,r,i,a,s),e=Wp(e,r,l,c,u),{vertexShader:t,fragmentShader:e}}(r,e,n);s=Hp[a]=t}r.vertexShader=s.vertexShader,r.fragmentShader=s.fragmentShader,zp(r.uniforms,this.uniforms),e.timeUniform&&(r.uniforms[e.timeUniform]={get value(){return Date.now()-Up}}),this[i]&&this[i](r)},s=function(){return o(e.chained?t:t.clone())},o=function(r){const i=Object.create(r,l);return Object.defineProperty(i,"baseMaterial",{value:t}),Object.defineProperty(i,"id",{value:jp++}),i.uuid=function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Fp[255&t]+Fp[t>>8&255]+Fp[t>>16&255]+Fp[t>>24&255]+"-"+Fp[255&e]+Fp[e>>8&255]+"-"+Fp[e>>16&15|64]+Fp[e>>24&255]+"-"+Fp[63&n|128]+Fp[n>>8&255]+"-"+Fp[n>>16&255]+Fp[n>>24&255]+Fp[255&r]+Fp[r>>8&255]+Fp[r>>16&255]+Fp[r>>24&255]).toUpperCase()}(),i.uniforms=zp({},r.uniforms,e.uniforms),i.defines=zp({},r.defines,e.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=zp({},r.extensions,e.extensions),i._listeners=void 0,i},l={constructor:{value:s},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>a,set(t){this[i]=t}},copy:{writable:!0,configurable:!0,value:function(e){return t.copy.call(this,e),!t.isShaderMaterial&&!t.isDerivedMaterial&&(zp(this.extensions,e.extensions),zp(this.defines,e.defines),zp(this.uniforms,ur.clone(e.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const e=new t.constructor;return o(e).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=Vp(t.isDerivedMaterial?t.getDepthMaterial():new Wa({depthPacking:gt}),e),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=Vp(t.isDerivedMaterial?t.getDistanceMaterial():new $a,e),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:e,_distanceMaterial:n}=this;e&&e.dispose(),n&&n.dispose(),t.dispose.call(this)}}};return r[n]=s,new s}function Wp(t,e,n,r,i){return(r||i||n)&&(t=t.replace(Op,`\n${n}\nvoid troikaOrigMain${e}() {`),t+=`\nvoid main() {\n  ${r}\n  troikaOrigMain${e}();\n  ${i}\n}`),t}function $p(t,e){return"uniforms"===t?void 0:"function"==typeof e?e.toString():e}let Yp=0;const qp=new Map;const Xp=()=>(self.performance||Date).now(),Jp=Bp();let Zp;const Kp=function(){const t=[];let e=0;function n(){const r=Xp();for(;t.length&&Xp()-r<5;)t.shift()();e=t.length?setTimeout(n,0):0}return(...r)=>{const i=wp();return t.push((()=>{const t=Xp();try{Jp.webgl.generateIntoCanvas(...r),i.resolve({timing:Xp()-t})}catch(e){i.reject(e)}})),e||(e=setTimeout(n,0)),i}}(),Qp=function(){const t={};let e=0;return function(n,r,i,a,s,o,l,c,u,h){const d="TroikaTextSDFGenerator_JS_"+e++%4;let f=t[d];return f||(f=t[d]={workerModule:Pp({name:d,workerId:d,dependencies:[Bp,Xp],init(t,e){const n=t().javascript.generate;return function(...t){const r=e();return{textureData:n(...t),timing:e()-r}}},getTransferables:t=>[t.textureData.buffer]}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(n,r,i,a,s,o).then((({textureData:t,timing:e})=>{const i=Xp(),a=new Uint8Array(4*t.length);for(let n=0;n<t.length;n++)a[4*n+h]=t[n];return Jp.webglUtils.renderImageData(l,a,c,u,n,r,1<<3-h),e+=Xp()-i,0==--f.requests&&(f.idleTimer=setTimeout((()=>{!function(t){kp[t]&&kp[t].forEach((function(t){t()})),Ap[t]&&(Ap[t].terminate(),delete Ap[t])}(d)}),2e3)),{timing:e}}))}}();const tm=Jp.webglUtils.resizeWebGLCanvasWithoutClearing;const em=Pp({name:"Typr Font Parser",dependencies:[function(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(t){var n=e._bin,r=new Uint8Array(t);if("ttcf"==n.readASCII(r,0,4)){var i=4;n.readUshort(r,i),i+=2,n.readUshort(r,i),i+=2;var a=n.readUint(r,i);i+=4;for(var s=[],o=0;o<a;o++){var l=n.readUint(r,i);i+=4,s.push(e._readFont(r,l))}return s}return[e._readFont(r,0)]},_readFont:function(t,n){var r=e._bin,i=n;r.readFixed(t,n),n+=4;var a=r.readUshort(t,n);n+=2,r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2;for(var s=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],o={_data:t,_offset:i},l={},c=0;c<a;c++){var u=r.readASCII(t,n,4);n+=4,r.readUint(t,n),n+=4;var h=r.readUint(t,n);n+=4;var d=r.readUint(t,n);n+=4,l[u]={offset:h,length:d}}for(c=0;c<s.length;c++){var f=s[c];l[f]&&(o[f.trim()]=e[f.trim()].parse(t,l[f].offset,l[f].length,o))}return o},_tabOffset:function(t,n,r){for(var i=e._bin,a=i.readUshort(t,r+4),s=r+12,o=0;o<a;o++){var l=i.readASCII(t,s,4);s+=4,i.readUint(t,s),s+=4;var c=i.readUint(t,s);if(s+=4,i.readUint(t,s),s+=4,l==n)return c}return 0}};e._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,n){return e._bin.readShort(t,n)/16384},readInt:function(t,n){return e._bin._view(t).getInt32(n)},readInt8:function(t,n){return e._bin._view(t).getInt8(n)},readShort:function(t,n){return e._bin._view(t).getInt16(n)},readUshort:function(t,n){return e._bin._view(t).getUint16(n)},readUshorts:function(t,n,r){for(var i=[],a=0;a<r;a++)i.push(e._bin.readUshort(t,n+2*a));return i},readUint:function(t,n){return e._bin._view(t).getUint32(n)},readUint64:function(t,n){return 4294967296*e._bin.readUint(t,n)+e._bin.readUint(t,n+4)},readASCII:function(t,e,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(t[e+i]);return r},readUnicode:function(t,e,n){for(var r="",i=0;i<n;i++){var a=t[e++]<<8|t[e++];r+=String.fromCharCode(a)}return r},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,n,r){var i=e._bin._tdec;return i&&0==n&&r==t.length?i.decode(t):e._bin.readASCII(t,n,r)},readBytes:function(t,e,n){for(var r=[],i=0;i<n;i++)r.push(t[e+i]);return r},readASCIIArray:function(t,e,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(t[e+i]));return r},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},e._lctf={},e._lctf.parse=function(t,n,r,i,a){var s=e._bin,o={},l=n;s.readFixed(t,n),n+=4;var c=s.readUshort(t,n);n+=2;var u=s.readUshort(t,n);n+=2;var h=s.readUshort(t,n);return n+=2,o.scriptList=e._lctf.readScriptList(t,l+c),o.featureList=e._lctf.readFeatureList(t,l+u),o.lookupList=e._lctf.readLookupList(t,l+h,a),o},e._lctf.readLookupList=function(t,n,r){var i=e._bin,a=n,s=[],o=i.readUshort(t,n);n+=2;for(var l=0;l<o;l++){var c=i.readUshort(t,n);n+=2;var u=e._lctf.readLookupTable(t,a+c,r);s.push(u)}return s},e._lctf.readLookupTable=function(t,n,r){var i=e._bin,a=n,s={tabs:[]};s.ltype=i.readUshort(t,n),n+=2,s.flag=i.readUshort(t,n),n+=2;var o=i.readUshort(t,n);n+=2;for(var l=s.ltype,c=0;c<o;c++){var u=i.readUshort(t,n);n+=2;var h=r(t,l,a+u,s);s.tabs.push(h)}return s},e._lctf.numOfOnes=function(t){for(var e=0,n=0;n<32;n++)0!=(t>>>n&1)&&e++;return e},e._lctf.readClassDef=function(t,n){var r=e._bin,i=[],a=r.readUshort(t,n);if(n+=2,1==a){var s=r.readUshort(t,n);n+=2;var o=r.readUshort(t,n);n+=2;for(var l=0;l<o;l++)i.push(s+l),i.push(s+l),i.push(r.readUshort(t,n)),n+=2}if(2==a){var c=r.readUshort(t,n);for(n+=2,l=0;l<c;l++)i.push(r.readUshort(t,n)),n+=2,i.push(r.readUshort(t,n)),n+=2,i.push(r.readUshort(t,n)),n+=2}return i},e._lctf.getInterval=function(t,e){for(var n=0;n<t.length;n+=3){var r=t[n],i=t[n+1];if(t[n+2],r<=e&&e<=i)return n}return-1},e._lctf.readCoverage=function(t,n){var r=e._bin,i={};i.fmt=r.readUshort(t,n),n+=2;var a=r.readUshort(t,n);return n+=2,1==i.fmt&&(i.tab=r.readUshorts(t,n,a)),2==i.fmt&&(i.tab=r.readUshorts(t,n,3*a)),i},e._lctf.coverageIndex=function(t,n){var r=t.tab;if(1==t.fmt)return r.indexOf(n);if(2==t.fmt){var i=e._lctf.getInterval(r,n);if(-1!=i)return r[i+2]+(n-r[i])}return-1},e._lctf.readFeatureList=function(t,n){var r=e._bin,i=n,a=[],s=r.readUshort(t,n);n+=2;for(var o=0;o<s;o++){var l=r.readASCII(t,n,4);n+=4;var c=r.readUshort(t,n);n+=2;var u=e._lctf.readFeatureTable(t,i+c);u.tag=l.trim(),a.push(u)}return a},e._lctf.readFeatureTable=function(t,n){var r=e._bin,i=n,a={},s=r.readUshort(t,n);n+=2,s>0&&(a.featureParams=i+s);var o=r.readUshort(t,n);n+=2,a.tab=[];for(var l=0;l<o;l++)a.tab.push(r.readUshort(t,n+2*l));return a},e._lctf.readScriptList=function(t,n){var r=e._bin,i=n,a={},s=r.readUshort(t,n);n+=2;for(var o=0;o<s;o++){var l=r.readASCII(t,n,4);n+=4;var c=r.readUshort(t,n);n+=2,a[l.trim()]=e._lctf.readScriptTable(t,i+c)}return a},e._lctf.readScriptTable=function(t,n){var r=e._bin,i=n,a={},s=r.readUshort(t,n);n+=2,a.default=e._lctf.readLangSysTable(t,i+s);var o=r.readUshort(t,n);n+=2;for(var l=0;l<o;l++){var c=r.readASCII(t,n,4);n+=4;var u=r.readUshort(t,n);n+=2,a[c.trim()]=e._lctf.readLangSysTable(t,i+u)}return a},e._lctf.readLangSysTable=function(t,n){var r=e._bin,i={};r.readUshort(t,n),n+=2,i.reqFeature=r.readUshort(t,n),n+=2;var a=r.readUshort(t,n);return n+=2,i.features=r.readUshorts(t,n,a),i},e.CFF={},e.CFF.parse=function(t,n,r){var i=e._bin;(t=new Uint8Array(t.buffer,n,r))[n=0],t[++n],t[++n],t[++n],n++;var a=[];n=e.CFF.readIndex(t,n,a);for(var s=[],o=0;o<a.length-1;o++)s.push(i.readASCII(t,n+a[o],a[o+1]-a[o]));n+=a[a.length-1];var l=[];n=e.CFF.readIndex(t,n,l);var c=[];for(o=0;o<l.length-1;o++)c.push(e.CFF.readDict(t,n+l[o],n+l[o+1]));n+=l[l.length-1];var u=c[0],h=[];n=e.CFF.readIndex(t,n,h);var d=[];for(o=0;o<h.length-1;o++)d.push(i.readASCII(t,n+h[o],h[o+1]-h[o]));if(n+=h[h.length-1],e.CFF.readSubrs(t,n,u),u.CharStrings){n=u.CharStrings,h=[],n=e.CFF.readIndex(t,n,h);var f=[];for(o=0;o<h.length-1;o++)f.push(i.readBytes(t,n+h[o],h[o+1]-h[o]));u.CharStrings=f}if(u.ROS){n=u.FDArray;var p=[];for(n=e.CFF.readIndex(t,n,p),u.FDArray=[],o=0;o<p.length-1;o++){var m=e.CFF.readDict(t,n+p[o],n+p[o+1]);e.CFF._readFDict(t,m,d),u.FDArray.push(m)}n+=p[p.length-1],n=u.FDSelect,u.FDSelect=[];var g=t[n];if(n++,3!=g)throw g;var y=i.readUshort(t,n);for(n+=2,o=0;o<y+1;o++)u.FDSelect.push(i.readUshort(t,n),t[n+2]),n+=3}return u.Encoding&&(u.Encoding=e.CFF.readEncoding(t,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=e.CFF.readCharset(t,u.charset,u.CharStrings.length)),e.CFF._readFDict(t,u,d),u},e.CFF._readFDict=function(t,n,r){var i;for(var a in n.Private&&(i=n.Private[1],n.Private=e.CFF.readDict(t,i,i+n.Private[0]),n.Private.Subrs&&e.CFF.readSubrs(t,i+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(a)&&(n[a]=r[n[a]-426+35])},e.CFF.readSubrs=function(t,n,r){var i=e._bin,a=[];n=e.CFF.readIndex(t,n,a);var s,o=a.length;s=o<1240?107:o<33900?1131:32768,r.Bias=s,r.Subrs=[];for(var l=0;l<a.length-1;l++)r.Subrs.push(i.readBytes(t,n+a[l],a[l+1]-a[l]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(t,e){for(var n=0;n<t.charset.length;n++)if(t.charset[n]==e)return n;return-1},e.CFF.glyphBySE=function(t,n){return n<0||n>255?-1:e.CFF.glyphByUnicode(t,e.CFF.tableSE[n])},e.CFF.readEncoding=function(t,n,r){e._bin;var i=[".notdef"],a=t[n];if(n++,0!=a)throw"error: unknown encoding format: "+a;var s=t[n];n++;for(var o=0;o<s;o++)i.push(t[n+o]);return i},e.CFF.readCharset=function(t,n,r){var i=e._bin,a=[".notdef"],s=t[n];if(n++,0==s)for(var o=0;o<r;o++){var l=i.readUshort(t,n);n+=2,a.push(l)}else{if(1!=s&&2!=s)throw"error: format: "+s;for(;a.length<r;){l=i.readUshort(t,n),n+=2;var c=0;for(1==s?(c=t[n],n++):(c=i.readUshort(t,n),n+=2),o=0;o<=c;o++)a.push(l),l++}}return a},e.CFF.readIndex=function(t,n,r){var i=e._bin,a=i.readUshort(t,n)+1,s=t[n+=2];if(n++,1==s)for(var o=0;o<a;o++)r.push(t[n+o]);else if(2==s)for(o=0;o<a;o++)r.push(i.readUshort(t,n+2*o));else if(3==s)for(o=0;o<a;o++)r.push(16777215&i.readUint(t,n+3*o-1));else if(1!=a)throw"unsupported offset size: "+s+", count: "+a;return(n+=a*s)-1},e.CFF.getCharString=function(t,n,r){var i=e._bin,a=t[n],s=t[n+1];t[n+2],t[n+3],t[n+4];var o=1,l=null,c=null;a<=20&&(l=a,o=1),12==a&&(l=100*a+s,o=2),21<=a&&a<=27&&(l=a,o=1),28==a&&(c=i.readShort(t,n+1),o=3),29<=a&&a<=31&&(l=a,o=1),32<=a&&a<=246&&(c=a-139,o=1),247<=a&&a<=250&&(c=256*(a-247)+s+108,o=2),251<=a&&a<=254&&(c=256*-(a-251)-s-108,o=2),255==a&&(c=i.readInt(t,n+1)/65535,o=5),r.val=null!=c?c:"o"+l,r.size=o},e.CFF.readCharString=function(t,n,r){for(var i=n+r,a=e._bin,s=[];n<i;){var o=t[n],l=t[n+1];t[n+2],t[n+3],t[n+4];var c=1,u=null,h=null;o<=20&&(u=o,c=1),12==o&&(u=100*o+l,c=2),19!=o&&20!=o||(u=o,c=2),21<=o&&o<=27&&(u=o,c=1),28==o&&(h=a.readShort(t,n+1),c=3),29<=o&&o<=31&&(u=o,c=1),32<=o&&o<=246&&(h=o-139,c=1),247<=o&&o<=250&&(h=256*(o-247)+l+108,c=2),251<=o&&o<=254&&(h=256*-(o-251)-l-108,c=2),255==o&&(h=a.readInt(t,n+1)/65535,c=5),s.push(null!=h?h:"o"+u),n+=c}return s},e.CFF.readDict=function(t,n,r){for(var i=e._bin,a={},s=[];n<r;){var o=t[n],l=t[n+1];t[n+2],t[n+3],t[n+4];var c=1,u=null,h=null;if(28==o&&(h=i.readShort(t,n+1),c=3),29==o&&(h=i.readInt(t,n+1),c=5),32<=o&&o<=246&&(h=o-139,c=1),247<=o&&o<=250&&(h=256*(o-247)+l+108,c=2),251<=o&&o<=254&&(h=256*-(o-251)-l-108,c=2),255==o)throw h=i.readInt(t,n+1)/65535,c=5,"unknown number";if(30==o){var d=[];for(c=1;;){var f=t[n+c];c++;var p=f>>4,m=15&f;if(15!=p&&d.push(p),15!=m&&d.push(m),15==m)break}for(var g="",y=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],v=0;v<d.length;v++)g+=y[d[v]];h=parseFloat(g)}o<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][o],c=1,12==o&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],c=2)),null!=u?(a[u]=1==s.length?s[0]:s,s=[]):s.push(h),n+=c}return a},e.cmap={},e.cmap.parse=function(t,n,r){t=new Uint8Array(t.buffer,n,r),n=0;var i=e._bin,a={};i.readUshort(t,n),n+=2;var s=i.readUshort(t,n);n+=2;var o=[];a.tables=[];for(var l=0;l<s;l++){var c=i.readUshort(t,n);n+=2;var u=i.readUshort(t,n);n+=2;var h=i.readUint(t,n);n+=4;var d="p"+c+"e"+u,f=o.indexOf(h);if(-1==f){var p;f=a.tables.length,o.push(h);var m=i.readUshort(t,h);0==m?p=e.cmap.parse0(t,h):4==m?p=e.cmap.parse4(t,h):6==m?p=e.cmap.parse6(t,h):12==m?p=e.cmap.parse12(t,h):console.debug("unknown format: "+m,c,u,h),a.tables.push(p)}if(null!=a[d])throw"multiple tables for one platform+encoding";a[d]=f}return a},e.cmap.parse0=function(t,n){var r=e._bin,i={};i.format=r.readUshort(t,n),n+=2;var a=r.readUshort(t,n);n+=2,r.readUshort(t,n),n+=2,i.map=[];for(var s=0;s<a-6;s++)i.map.push(t[n+s]);return i},e.cmap.parse4=function(t,n){var r=e._bin,i=n,a={};a.format=r.readUshort(t,n),n+=2;var s=r.readUshort(t,n);n+=2,r.readUshort(t,n),n+=2;var o=r.readUshort(t,n);n+=2;var l=o/2;a.searchRange=r.readUshort(t,n),n+=2,a.entrySelector=r.readUshort(t,n),n+=2,a.rangeShift=r.readUshort(t,n),n+=2,a.endCount=r.readUshorts(t,n,l),n+=2*l,n+=2,a.startCount=r.readUshorts(t,n,l),n+=2*l,a.idDelta=[];for(var c=0;c<l;c++)a.idDelta.push(r.readShort(t,n)),n+=2;for(a.idRangeOffset=r.readUshorts(t,n,l),n+=2*l,a.glyphIdArray=[];n<i+s;)a.glyphIdArray.push(r.readUshort(t,n)),n+=2;return a},e.cmap.parse6=function(t,n){var r=e._bin,i={};i.format=r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2,i.firstCode=r.readUshort(t,n),n+=2;var a=r.readUshort(t,n);n+=2,i.glyphIdArray=[];for(var s=0;s<a;s++)i.glyphIdArray.push(r.readUshort(t,n)),n+=2;return i},e.cmap.parse12=function(t,n){var r=e._bin,i={};i.format=r.readUshort(t,n),n+=2,n+=2,r.readUint(t,n),n+=4,r.readUint(t,n),n+=4;var a=r.readUint(t,n);n+=4,i.groups=[];for(var s=0;s<a;s++){var o=n+12*s,l=r.readUint(t,o+0),c=r.readUint(t,o+4),u=r.readUint(t,o+8);i.groups.push([l,c,u])}return i},e.glyf={},e.glyf.parse=function(t,e,n,r){for(var i=[],a=0;a<r.maxp.numGlyphs;a++)i.push(null);return i},e.glyf._parseGlyf=function(t,n){var r=e._bin,i=t._data,a=e._tabOffset(i,"glyf",t._offset)+t.loca[n];if(t.loca[n]==t.loca[n+1])return null;var s={};if(s.noc=r.readShort(i,a),a+=2,s.xMin=r.readShort(i,a),a+=2,s.yMin=r.readShort(i,a),a+=2,s.xMax=r.readShort(i,a),a+=2,s.yMax=r.readShort(i,a),a+=2,s.xMin>=s.xMax||s.yMin>=s.yMax)return null;if(s.noc>0){s.endPts=[];for(var o=0;o<s.noc;o++)s.endPts.push(r.readUshort(i,a)),a+=2;var l=r.readUshort(i,a);if(a+=2,i.length-a<l)return null;s.instructions=r.readBytes(i,a,l),a+=l;var c=s.endPts[s.noc-1]+1;for(s.flags=[],o=0;o<c;o++){var u=i[a];if(a++,s.flags.push(u),0!=(8&u)){var h=i[a];a++;for(var d=0;d<h;d++)s.flags.push(u),o++}}for(s.xs=[],o=0;o<c;o++){var f=0!=(2&s.flags[o]),p=0!=(16&s.flags[o]);f?(s.xs.push(p?i[a]:-i[a]),a++):p?s.xs.push(0):(s.xs.push(r.readShort(i,a)),a+=2)}for(s.ys=[],o=0;o<c;o++)f=0!=(4&s.flags[o]),p=0!=(32&s.flags[o]),f?(s.ys.push(p?i[a]:-i[a]),a++):p?s.ys.push(0):(s.ys.push(r.readShort(i,a)),a+=2);var m=0,g=0;for(o=0;o<c;o++)m+=s.xs[o],g+=s.ys[o],s.xs[o]=m,s.ys[o]=g}else{var y;s.parts=[];do{y=r.readUshort(i,a),a+=2;var v={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(s.parts.push(v),v.glyphIndex=r.readUshort(i,a),a+=2,1&y){var b=r.readShort(i,a);a+=2;var x=r.readShort(i,a);a+=2}else b=r.readInt8(i,a),a++,x=r.readInt8(i,a),a++;2&y?(v.m.tx=b,v.m.ty=x):(v.p1=b,v.p2=x),8&y?(v.m.a=v.m.d=r.readF2dot14(i,a),a+=2):64&y?(v.m.a=r.readF2dot14(i,a),a+=2,v.m.d=r.readF2dot14(i,a),a+=2):128&y&&(v.m.a=r.readF2dot14(i,a),a+=2,v.m.b=r.readF2dot14(i,a),a+=2,v.m.c=r.readF2dot14(i,a),a+=2,v.m.d=r.readF2dot14(i,a),a+=2)}while(32&y);if(256&y){var _=r.readUshort(i,a);for(a+=2,s.instr=[],o=0;o<_;o++)s.instr.push(i[a]),a++}}return s},e.GPOS={},e.GPOS.parse=function(t,n,r,i){return e._lctf.parse(t,n,r,i,e.GPOS.subt)},e.GPOS.subt=function(t,n,r,i){var a=e._bin,s=r,o={};if(o.fmt=a.readUshort(t,r),r+=2,1==n||2==n||3==n||7==n||8==n&&o.fmt<=2){var l=a.readUshort(t,r);r+=2,o.coverage=e._lctf.readCoverage(t,l+s)}if(1==n&&1==o.fmt){var c=a.readUshort(t,r);r+=2;var u=e._lctf.numOfOnes(c);0!=c&&(o.pos=e.GPOS.readValueRecord(t,r,c))}else if(2==n&&o.fmt>=1&&o.fmt<=2){c=a.readUshort(t,r),r+=2;var h=a.readUshort(t,r);r+=2,u=e._lctf.numOfOnes(c);var d=e._lctf.numOfOnes(h);if(1==o.fmt){o.pairsets=[];var f=a.readUshort(t,r);r+=2;for(var p=0;p<f;p++){var m=s+a.readUshort(t,r);r+=2;var g=a.readUshort(t,m);m+=2;for(var y=[],v=0;v<g;v++){var b=a.readUshort(t,m);m+=2,0!=c&&(M=e.GPOS.readValueRecord(t,m,c),m+=2*u),0!=h&&(C=e.GPOS.readValueRecord(t,m,h),m+=2*d),y.push({gid2:b,val1:M,val2:C})}o.pairsets.push(y)}}if(2==o.fmt){var x=a.readUshort(t,r);r+=2;var _=a.readUshort(t,r);r+=2;var w=a.readUshort(t,r);r+=2;var S=a.readUshort(t,r);for(r+=2,o.classDef1=e._lctf.readClassDef(t,s+x),o.classDef2=e._lctf.readClassDef(t,s+_),o.matrix=[],p=0;p<w;p++){var E=[];for(v=0;v<S;v++){var M=null,C=null;0!=c&&(M=e.GPOS.readValueRecord(t,r,c),r+=2*u),0!=h&&(C=e.GPOS.readValueRecord(t,r,h),r+=2*d),E.push({val1:M,val2:C})}o.matrix.push(E)}}}else{if(9==n&&1==o.fmt){var T=a.readUshort(t,r);r+=2;var A=a.readUint(t,r);if(r+=4,9==i.ltype)i.ltype=T;else if(i.ltype!=T)throw"invalid extension substitution";return e.GPOS.subt(t,i.ltype,s+A)}console.debug("unsupported GPOS table LookupType",n,"format",o.fmt)}return o},e.GPOS.readValueRecord=function(t,n,r){var i=e._bin,a=[];return a.push(1&r?i.readShort(t,n):0),n+=1&r?2:0,a.push(2&r?i.readShort(t,n):0),n+=2&r?2:0,a.push(4&r?i.readShort(t,n):0),n+=4&r?2:0,a.push(8&r?i.readShort(t,n):0),n+=8&r?2:0,a},e.GSUB={},e.GSUB.parse=function(t,n,r,i){return e._lctf.parse(t,n,r,i,e.GSUB.subt)},e.GSUB.subt=function(t,n,r,i){var a=e._bin,s=r,o={};if(o.fmt=a.readUshort(t,r),r+=2,1!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||4==n||5==n&&o.fmt<=2||6==n&&o.fmt<=2){var l=a.readUshort(t,r);r+=2,o.coverage=e._lctf.readCoverage(t,s+l)}if(1==n&&o.fmt>=1&&o.fmt<=2){if(1==o.fmt)o.delta=a.readShort(t,r),r+=2;else if(2==o.fmt){var c=a.readUshort(t,r);r+=2,o.newg=a.readUshorts(t,r,c),r+=2*o.newg.length}}else if(4==n){o.vals=[],c=a.readUshort(t,r),r+=2;for(var u=0;u<c;u++){var h=a.readUshort(t,r);r+=2,o.vals.push(e.GSUB.readLigatureSet(t,s+h))}}else if(5==n&&2==o.fmt){if(2==o.fmt){var d=a.readUshort(t,r);r+=2,o.cDef=e._lctf.readClassDef(t,s+d),o.scset=[];var f=a.readUshort(t,r);for(r+=2,u=0;u<f;u++){var p=a.readUshort(t,r);r+=2,o.scset.push(0==p?null:e.GSUB.readSubClassSet(t,s+p))}}}else if(6==n&&3==o.fmt){if(3==o.fmt){for(u=0;u<3;u++){c=a.readUshort(t,r),r+=2;for(var m=[],g=0;g<c;g++)m.push(e._lctf.readCoverage(t,s+a.readUshort(t,r+2*g)));r+=2*c,0==u&&(o.backCvg=m),1==u&&(o.inptCvg=m),2==u&&(o.ahedCvg=m)}c=a.readUshort(t,r),r+=2,o.lookupRec=e.GSUB.readSubstLookupRecords(t,r,c)}}else{if(7==n&&1==o.fmt){var y=a.readUshort(t,r);r+=2;var v=a.readUint(t,r);if(r+=4,9==i.ltype)i.ltype=y;else if(i.ltype!=y)throw"invalid extension substitution";return e.GSUB.subt(t,i.ltype,s+v)}console.debug("unsupported GSUB table LookupType",n,"format",o.fmt)}return o},e.GSUB.readSubClassSet=function(t,n){var r=e._bin.readUshort,i=n,a=[],s=r(t,n);n+=2;for(var o=0;o<s;o++){var l=r(t,n);n+=2,a.push(e.GSUB.readSubClassRule(t,i+l))}return a},e.GSUB.readSubClassRule=function(t,n){var r=e._bin.readUshort,i={},a=r(t,n),s=r(t,n+=2);n+=2,i.input=[];for(var o=0;o<a-1;o++)i.input.push(r(t,n)),n+=2;return i.substLookupRecords=e.GSUB.readSubstLookupRecords(t,n,s),i},e.GSUB.readSubstLookupRecords=function(t,n,r){for(var i=e._bin.readUshort,a=[],s=0;s<r;s++)a.push(i(t,n),i(t,n+2)),n+=4;return a},e.GSUB.readChainSubClassSet=function(t,n){var r=e._bin,i=n,a=[],s=r.readUshort(t,n);n+=2;for(var o=0;o<s;o++){var l=r.readUshort(t,n);n+=2,a.push(e.GSUB.readChainSubClassRule(t,i+l))}return a},e.GSUB.readChainSubClassRule=function(t,n){for(var r=e._bin,i={},a=["backtrack","input","lookahead"],s=0;s<a.length;s++){var o=r.readUshort(t,n);n+=2,1==s&&o--,i[a[s]]=r.readUshorts(t,n,o),n+=2*i[a[s]].length}return o=r.readUshort(t,n),n+=2,i.subst=r.readUshorts(t,n,2*o),n+=2*i.subst.length,i},e.GSUB.readLigatureSet=function(t,n){var r=e._bin,i=n,a=[],s=r.readUshort(t,n);n+=2;for(var o=0;o<s;o++){var l=r.readUshort(t,n);n+=2,a.push(e.GSUB.readLigature(t,i+l))}return a},e.GSUB.readLigature=function(t,n){var r=e._bin,i={chain:[]};i.nglyph=r.readUshort(t,n),n+=2;var a=r.readUshort(t,n);n+=2;for(var s=0;s<a-1;s++)i.chain.push(r.readUshort(t,n)),n+=2;return i},e.head={},e.head.parse=function(t,n,r){var i=e._bin,a={};return i.readFixed(t,n),n+=4,a.fontRevision=i.readFixed(t,n),n+=4,i.readUint(t,n),n+=4,i.readUint(t,n),n+=4,a.flags=i.readUshort(t,n),n+=2,a.unitsPerEm=i.readUshort(t,n),n+=2,a.created=i.readUint64(t,n),n+=8,a.modified=i.readUint64(t,n),n+=8,a.xMin=i.readShort(t,n),n+=2,a.yMin=i.readShort(t,n),n+=2,a.xMax=i.readShort(t,n),n+=2,a.yMax=i.readShort(t,n),n+=2,a.macStyle=i.readUshort(t,n),n+=2,a.lowestRecPPEM=i.readUshort(t,n),n+=2,a.fontDirectionHint=i.readShort(t,n),n+=2,a.indexToLocFormat=i.readShort(t,n),n+=2,a.glyphDataFormat=i.readShort(t,n),n+=2,a},e.hhea={},e.hhea.parse=function(t,n,r){var i=e._bin,a={};return i.readFixed(t,n),n+=4,a.ascender=i.readShort(t,n),n+=2,a.descender=i.readShort(t,n),n+=2,a.lineGap=i.readShort(t,n),n+=2,a.advanceWidthMax=i.readUshort(t,n),n+=2,a.minLeftSideBearing=i.readShort(t,n),n+=2,a.minRightSideBearing=i.readShort(t,n),n+=2,a.xMaxExtent=i.readShort(t,n),n+=2,a.caretSlopeRise=i.readShort(t,n),n+=2,a.caretSlopeRun=i.readShort(t,n),n+=2,a.caretOffset=i.readShort(t,n),n+=2,n+=8,a.metricDataFormat=i.readShort(t,n),n+=2,a.numberOfHMetrics=i.readUshort(t,n),n+=2,a},e.hmtx={},e.hmtx.parse=function(t,n,r,i){for(var a=e._bin,s={aWidth:[],lsBearing:[]},o=0,l=0,c=0;c<i.maxp.numGlyphs;c++)c<i.hhea.numberOfHMetrics&&(o=a.readUshort(t,n),n+=2,l=a.readShort(t,n),n+=2),s.aWidth.push(o),s.lsBearing.push(l);return s},e.kern={},e.kern.parse=function(t,n,r,i){var a=e._bin,s=a.readUshort(t,n);if(n+=2,1==s)return e.kern.parseV1(t,n-2,r,i);var o=a.readUshort(t,n);n+=2;for(var l={glyph1:[],rval:[]},c=0;c<o;c++){n+=2,r=a.readUshort(t,n),n+=2;var u=a.readUshort(t,n);n+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;n=e.kern.readFormat0(t,n,l)}return l},e.kern.parseV1=function(t,n,r,i){var a=e._bin;a.readFixed(t,n),n+=4;var s=a.readUint(t,n);n+=4;for(var o={glyph1:[],rval:[]},l=0;l<s;l++){a.readUint(t,n),n+=4;var c=a.readUshort(t,n);n+=2,a.readUshort(t,n),n+=2;var u=c>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;n=e.kern.readFormat0(t,n,o)}return o},e.kern.readFormat0=function(t,n,r){var i=e._bin,a=-1,s=i.readUshort(t,n);n+=2,i.readUshort(t,n),n+=2,i.readUshort(t,n),n+=2,i.readUshort(t,n),n+=2;for(var o=0;o<s;o++){var l=i.readUshort(t,n);n+=2;var c=i.readUshort(t,n);n+=2;var u=i.readShort(t,n);n+=2,l!=a&&(r.glyph1.push(l),r.rval.push({glyph2:[],vals:[]}));var h=r.rval[r.rval.length-1];h.glyph2.push(c),h.vals.push(u),a=l}return n},e.loca={},e.loca.parse=function(t,n,r,i){var a=e._bin,s=[],o=i.head.indexToLocFormat,l=i.maxp.numGlyphs+1;if(0==o)for(var c=0;c<l;c++)s.push(a.readUshort(t,n+(c<<1))<<1);if(1==o)for(c=0;c<l;c++)s.push(a.readUint(t,n+(c<<2)));return s},e.maxp={},e.maxp.parse=function(t,n,r){var i=e._bin,a={},s=i.readUint(t,n);return n+=4,a.numGlyphs=i.readUshort(t,n),n+=2,65536==s&&(a.maxPoints=i.readUshort(t,n),n+=2,a.maxContours=i.readUshort(t,n),n+=2,a.maxCompositePoints=i.readUshort(t,n),n+=2,a.maxCompositeContours=i.readUshort(t,n),n+=2,a.maxZones=i.readUshort(t,n),n+=2,a.maxTwilightPoints=i.readUshort(t,n),n+=2,a.maxStorage=i.readUshort(t,n),n+=2,a.maxFunctionDefs=i.readUshort(t,n),n+=2,a.maxInstructionDefs=i.readUshort(t,n),n+=2,a.maxStackElements=i.readUshort(t,n),n+=2,a.maxSizeOfInstructions=i.readUshort(t,n),n+=2,a.maxComponentElements=i.readUshort(t,n),n+=2,a.maxComponentDepth=i.readUshort(t,n),n+=2),a},e.name={},e.name.parse=function(t,n,r){var i=e._bin,a={};i.readUshort(t,n),n+=2;var s=i.readUshort(t,n);n+=2,i.readUshort(t,n);for(var o,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],c=n+=2,u=0;u<s;u++){var h=i.readUshort(t,n);n+=2;var d=i.readUshort(t,n);n+=2;var f=i.readUshort(t,n);n+=2;var p=i.readUshort(t,n);n+=2;var m=i.readUshort(t,n);n+=2;var g=i.readUshort(t,n);n+=2;var y,v=l[p],b=c+12*s+g;if(0==h)y=i.readUnicode(t,b,m/2);else if(3==h&&0==d)y=i.readUnicode(t,b,m/2);else if(0==d)y=i.readASCII(t,b,m);else if(1==d)y=i.readUnicode(t,b,m/2);else if(3==d)y=i.readUnicode(t,b,m/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;y=i.readASCII(t,b,m),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var x="p"+h+","+f.toString(16);null==a[x]&&(a[x]={}),a[x][void 0!==v?v:p]=y,a[x]._lang=f}for(var _ in a)if(null!=a[_].postScriptName&&1033==a[_]._lang)return a[_];for(var _ in a)if(null!=a[_].postScriptName&&0==a[_]._lang)return a[_];for(var _ in a)if(null!=a[_].postScriptName&&3084==a[_]._lang)return a[_];for(var _ in a)if(null!=a[_].postScriptName)return a[_];for(var _ in a){o=_;break}return console.debug("returning name table with languageID "+a[o]._lang),a[o]},e["OS/2"]={},e["OS/2"].parse=function(t,n,r){var i=e._bin.readUshort(t,n);n+=2;var a={};if(0==i)e["OS/2"].version0(t,n,a);else if(1==i)e["OS/2"].version1(t,n,a);else if(2==i||3==i||4==i)e["OS/2"].version2(t,n,a);else{if(5!=i)throw"unknown OS/2 table version: "+i;e["OS/2"].version5(t,n,a)}return a},e["OS/2"].version0=function(t,n,r){var i=e._bin;return r.xAvgCharWidth=i.readShort(t,n),n+=2,r.usWeightClass=i.readUshort(t,n),n+=2,r.usWidthClass=i.readUshort(t,n),n+=2,r.fsType=i.readUshort(t,n),n+=2,r.ySubscriptXSize=i.readShort(t,n),n+=2,r.ySubscriptYSize=i.readShort(t,n),n+=2,r.ySubscriptXOffset=i.readShort(t,n),n+=2,r.ySubscriptYOffset=i.readShort(t,n),n+=2,r.ySuperscriptXSize=i.readShort(t,n),n+=2,r.ySuperscriptYSize=i.readShort(t,n),n+=2,r.ySuperscriptXOffset=i.readShort(t,n),n+=2,r.ySuperscriptYOffset=i.readShort(t,n),n+=2,r.yStrikeoutSize=i.readShort(t,n),n+=2,r.yStrikeoutPosition=i.readShort(t,n),n+=2,r.sFamilyClass=i.readShort(t,n),n+=2,r.panose=i.readBytes(t,n,10),n+=10,r.ulUnicodeRange1=i.readUint(t,n),n+=4,r.ulUnicodeRange2=i.readUint(t,n),n+=4,r.ulUnicodeRange3=i.readUint(t,n),n+=4,r.ulUnicodeRange4=i.readUint(t,n),n+=4,r.achVendID=[i.readInt8(t,n),i.readInt8(t,n+1),i.readInt8(t,n+2),i.readInt8(t,n+3)],n+=4,r.fsSelection=i.readUshort(t,n),n+=2,r.usFirstCharIndex=i.readUshort(t,n),n+=2,r.usLastCharIndex=i.readUshort(t,n),n+=2,r.sTypoAscender=i.readShort(t,n),n+=2,r.sTypoDescender=i.readShort(t,n),n+=2,r.sTypoLineGap=i.readShort(t,n),n+=2,r.usWinAscent=i.readUshort(t,n),n+=2,r.usWinDescent=i.readUshort(t,n),n+2},e["OS/2"].version1=function(t,n,r){var i=e._bin;return n=e["OS/2"].version0(t,n,r),r.ulCodePageRange1=i.readUint(t,n),n+=4,r.ulCodePageRange2=i.readUint(t,n),n+4},e["OS/2"].version2=function(t,n,r){var i=e._bin;return n=e["OS/2"].version1(t,n,r),r.sxHeight=i.readShort(t,n),n+=2,r.sCapHeight=i.readShort(t,n),n+=2,r.usDefault=i.readUshort(t,n),n+=2,r.usBreak=i.readUshort(t,n),n+=2,r.usMaxContext=i.readUshort(t,n),n+2},e["OS/2"].version5=function(t,n,r){var i=e._bin;return n=e["OS/2"].version2(t,n,r),r.usLowerOpticalPointSize=i.readUshort(t,n),n+=2,r.usUpperOpticalPointSize=i.readUshort(t,n),n+2},e.post={},e.post.parse=function(t,n,r){var i=e._bin,a={};return a.version=i.readFixed(t,n),n+=4,a.italicAngle=i.readFixed(t,n),n+=4,a.underlinePosition=i.readShort(t,n),n+=2,a.underlineThickness=i.readShort(t,n),n+=2,a},null==e&&(e={}),null==e.U&&(e.U={}),e.U.codeToGlyph=function(t,e){var n=t.cmap,r=-1;if(null!=n.p0e4?r=n.p0e4:null!=n.p3e1?r=n.p3e1:null!=n.p1e0?r=n.p1e0:null!=n.p0e3&&(r=n.p0e3),-1==r)throw"no familiar platform and encoding!";var i=n.tables[r];if(0==i.format)return e>=i.map.length?0:i.map[e];if(4==i.format){for(var a=-1,s=0;s<i.endCount.length;s++)if(e<=i.endCount[s]){a=s;break}return-1==a||i.startCount[a]>e?0:65535&(0!=i.idRangeOffset[a]?i.glyphIdArray[e-i.startCount[a]+(i.idRangeOffset[a]>>1)-(i.idRangeOffset.length-a)]:e+i.idDelta[a])}if(12==i.format){if(e>i.groups[i.groups.length-1][1])return 0;for(s=0;s<i.groups.length;s++){var o=i.groups[s];if(o[0]<=e&&e<=o[1])return o[2]+(e-o[0])}return 0}throw"unknown cmap table format "+i.format},e.U.glyphToPath=function(t,n){var r={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[n]){var i=t.SVG.entries[n];return null==i?r:("string"==typeof i&&(i=e.SVG.toPath(i),t.SVG.entries[n]=i),i)}if(t.CFF){var a={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},s=t.CFF,o=t.CFF.Private;if(s.ROS){for(var l=0;s.FDSelect[l+2]<=n;)l+=2;o=s.FDArray[s.FDSelect[l+1]].Private}e.U._drawCFF(t.CFF.CharStrings[n],a,s,o,r)}else t.glyf&&e.U._drawGlyf(n,t,r);return r},e.U._drawGlyf=function(t,n,r){var i=n.glyf[t];null==i&&(i=n.glyf[t]=e.glyf._parseGlyf(n,t)),null!=i&&(i.noc>-1?e.U._simpleGlyph(i,r):e.U._compoGlyph(i,n,r))},e.U._simpleGlyph=function(t,n){for(var r=0;r<t.noc;r++){for(var i=0==r?0:t.endPts[r-1]+1,a=t.endPts[r],s=i;s<=a;s++){var o=s==i?a:s-1,l=s==a?i:s+1,c=1&t.flags[s],u=1&t.flags[o],h=1&t.flags[l],d=t.xs[s],f=t.ys[s];if(s==i)if(c){if(!u){e.U.P.moveTo(n,d,f);continue}e.U.P.moveTo(n,t.xs[o],t.ys[o])}else u?e.U.P.moveTo(n,t.xs[o],t.ys[o]):e.U.P.moveTo(n,(t.xs[o]+d)/2,(t.ys[o]+f)/2);c?u&&e.U.P.lineTo(n,d,f):h?e.U.P.qcurveTo(n,d,f,t.xs[l],t.ys[l]):e.U.P.qcurveTo(n,d,f,(d+t.xs[l])/2,(f+t.ys[l])/2)}e.U.P.closePath(n)}},e.U._compoGlyph=function(t,n,r){for(var i=0;i<t.parts.length;i++){var a={cmds:[],crds:[]},s=t.parts[i];e.U._drawGlyf(s.glyphIndex,n,a);for(var o=s.m,l=0;l<a.crds.length;l+=2){var c=a.crds[l],u=a.crds[l+1];r.crds.push(c*o.a+u*o.b+o.tx),r.crds.push(c*o.c+u*o.d+o.ty)}for(l=0;l<a.cmds.length;l++)r.cmds.push(a.cmds[l])}},e.U._getGlyphClass=function(t,n){var r=e._lctf.getInterval(n,t);return-1==r?0:n[r+2]},e.U.getPairAdjustment=function(t,n,r){var i=0,a=!1;if(t.GPOS)for(var s=t.GPOS,o=s.lookupList,l=s.featureList,c=[],u=0;u<l.length;u++){var h=l[u];if("kern"==h.tag){a=!0;for(var d=0;d<h.tab.length;d++)if(!c[h.tab[d]]){c[h.tab[d]]=!0;for(var f=o[h.tab[d]],p=0;p<f.tabs.length;p++)if(null!=f.tabs[p]){var m,g=f.tabs[p];if((!g.coverage||-1!=(m=e._lctf.coverageIndex(g.coverage,n)))&&1!=f.ltype&&2==f.ltype){var y;if(1==g.fmt){var v=g.pairsets[m];for(u=0;u<v.length;u++)v[u].gid2==r&&(y=v[u])}else if(2==g.fmt){var b=e.U._getGlyphClass(n,g.classDef1),x=e.U._getGlyphClass(r,g.classDef2);y=g.matrix[b][x]}y&&y.val1&&y.val1[2]&&(i+=y.val1[2]),y&&y.val2&&y.val2[0]&&(i+=y.val2[0])}}}}}if(t.kern&&!a){var _=t.kern.glyph1.indexOf(n);if(-1!=_){var w=t.kern.rval[_].glyph2.indexOf(r);-1!=w&&(i+=t.kern.rval[_].vals[w])}}return i},e.U._applySubs=function(t,n,r,i){for(var a=t.length-n-1,s=0;s<r.tabs.length;s++)if(null!=r.tabs[s]){var o,l=r.tabs[s];if(!l.coverage||-1!=(o=e._lctf.coverageIndex(l.coverage,t[n])))if(1==r.ltype)t[n],1==l.fmt?t[n]=t[n]+l.delta:t[n]=l.newg[o];else if(4==r.ltype)for(var c=l.vals[o],u=0;u<c.length;u++){var h=c[u],d=h.chain.length;if(!(d>a)){for(var f=!0,p=0,m=0;m<d;m++){for(;-1==t[n+p+(1+m)];)p++;h.chain[m]!=t[n+p+(1+m)]&&(f=!1)}if(f){for(t[n]=h.nglyph,m=0;m<d+p;m++)t[n+m+1]=-1;break}}}else if(5==r.ltype&&2==l.fmt)for(var g=e._lctf.getInterval(l.cDef,t[n]),y=l.cDef[g+2],v=l.scset[y],b=0;b<v.length;b++){var x=v[b],_=x.input;if(!(_.length>a)){for(f=!0,m=0;m<_.length;m++){var w=e._lctf.getInterval(l.cDef,t[n+1+m]);if(-1==g&&l.cDef[w+2]!=_[m]){f=!1;break}}if(f){var S=x.substLookupRecords;for(u=0;u<S.length;u+=2)S[u],S[u+1]}}}else if(6==r.ltype&&3==l.fmt){if(!e.U._glsCovered(t,l.backCvg,n-l.backCvg.length)||!e.U._glsCovered(t,l.inptCvg,n)||!e.U._glsCovered(t,l.ahedCvg,n+l.inptCvg.length))continue;var E=l.lookupRec;for(b=0;b<E.length;b+=2){g=E[b];var M=i[E[b+1]];e.U._applySubs(t,n+g,M,i)}}}},e.U._glsCovered=function(t,n,r){for(var i=0;i<n.length;i++)if(-1==e._lctf.coverageIndex(n[i],t[r+i]))return!1;return!0},e.U.glyphsToPath=function(t,n,r){for(var i={cmds:[],crds:[]},a=0,s=0;s<n.length;s++){var o=n[s];if(-1!=o){for(var l=s<n.length-1&&-1!=n[s+1]?n[s+1]:0,c=e.U.glyphToPath(t,o),u=0;u<c.crds.length;u+=2)i.crds.push(c.crds[u]+a),i.crds.push(c.crds[u+1]);for(r&&i.cmds.push(r),u=0;u<c.cmds.length;u++)i.cmds.push(c.cmds[u]);r&&i.cmds.push("X"),a+=t.hmtx.aWidth[o],s<n.length-1&&(a+=e.U.getPairAdjustment(t,o,l))}}return i},e.U.P={},e.U.P.moveTo=function(t,e,n){t.cmds.push("M"),t.crds.push(e,n)},e.U.P.lineTo=function(t,e,n){t.cmds.push("L"),t.crds.push(e,n)},e.U.P.curveTo=function(t,e,n,r,i,a,s){t.cmds.push("C"),t.crds.push(e,n,r,i,a,s)},e.U.P.qcurveTo=function(t,e,n,r,i){t.cmds.push("Q"),t.crds.push(e,n,r,i)},e.U.P.closePath=function(t){t.cmds.push("Z")},e.U._drawCFF=function(t,n,r,i,a){for(var s=n.stack,o=n.nStems,l=n.haveWidth,c=n.width,u=n.open,h=0,d=n.x,f=n.y,p=0,m=0,g=0,y=0,v=0,b=0,x=0,_=0,w=0,S=0,E={val:0,size:0};h<t.length;){e.CFF.getCharString(t,h,E);var M=E.val;if(h+=E.size,"o1"==M||"o18"==M)s.length%2!=0&&!l&&(c=s.shift()+i.nominalWidthX),o+=s.length>>1,s.length=0,l=!0;else if("o3"==M||"o23"==M)s.length%2!=0&&!l&&(c=s.shift()+i.nominalWidthX),o+=s.length>>1,s.length=0,l=!0;else if("o4"==M)s.length>1&&!l&&(c=s.shift()+i.nominalWidthX,l=!0),u&&e.U.P.closePath(a),f+=s.pop(),e.U.P.moveTo(a,d,f),u=!0;else if("o5"==M)for(;s.length>0;)d+=s.shift(),f+=s.shift(),e.U.P.lineTo(a,d,f);else if("o6"==M||"o7"==M)for(var C=s.length,T="o6"==M,A=0;A<C;A++){var k=s.shift();T?d+=k:f+=k,T=!T,e.U.P.lineTo(a,d,f)}else if("o8"==M||"o24"==M){C=s.length;for(var L=0;L+6<=C;)p=d+s.shift(),m=f+s.shift(),g=p+s.shift(),y=m+s.shift(),d=g+s.shift(),f=y+s.shift(),e.U.P.curveTo(a,p,m,g,y,d,f),L+=6;"o24"==M&&(d+=s.shift(),f+=s.shift(),e.U.P.lineTo(a,d,f))}else{if("o11"==M)break;if("o1234"==M||"o1235"==M||"o1236"==M||"o1237"==M)"o1234"==M&&(m=f,g=(p=d+s.shift())+s.shift(),S=y=m+s.shift(),b=y,_=f,d=(x=(v=(w=g+s.shift())+s.shift())+s.shift())+s.shift(),e.U.P.curveTo(a,p,m,g,y,w,S),e.U.P.curveTo(a,v,b,x,_,d,f)),"o1235"==M&&(p=d+s.shift(),m=f+s.shift(),g=p+s.shift(),y=m+s.shift(),w=g+s.shift(),S=y+s.shift(),v=w+s.shift(),b=S+s.shift(),x=v+s.shift(),_=b+s.shift(),d=x+s.shift(),f=_+s.shift(),s.shift(),e.U.P.curveTo(a,p,m,g,y,w,S),e.U.P.curveTo(a,v,b,x,_,d,f)),"o1236"==M&&(p=d+s.shift(),m=f+s.shift(),g=p+s.shift(),S=y=m+s.shift(),b=y,x=(v=(w=g+s.shift())+s.shift())+s.shift(),_=b+s.shift(),d=x+s.shift(),e.U.P.curveTo(a,p,m,g,y,w,S),e.U.P.curveTo(a,v,b,x,_,d,f)),"o1237"==M&&(p=d+s.shift(),m=f+s.shift(),g=p+s.shift(),y=m+s.shift(),w=g+s.shift(),S=y+s.shift(),v=w+s.shift(),b=S+s.shift(),x=v+s.shift(),_=b+s.shift(),Math.abs(x-d)>Math.abs(_-f)?d=x+s.shift():f=_+s.shift(),e.U.P.curveTo(a,p,m,g,y,w,S),e.U.P.curveTo(a,v,b,x,_,d,f));else if("o14"==M){if(s.length>0&&!l&&(c=s.shift()+r.nominalWidthX,l=!0),4==s.length){var P=s.shift(),R=s.shift(),I=s.shift(),D=s.shift(),B=e.CFF.glyphBySE(r,I),O=e.CFF.glyphBySE(r,D);e.U._drawCFF(r.CharStrings[B],n,r,i,a),n.x=P,n.y=R,e.U._drawCFF(r.CharStrings[O],n,r,i,a)}u&&(e.U.P.closePath(a),u=!1)}else if("o19"==M||"o20"==M)s.length%2!=0&&!l&&(c=s.shift()+i.nominalWidthX),o+=s.length>>1,s.length=0,l=!0,h+=o+7>>3;else if("o21"==M)s.length>2&&!l&&(c=s.shift()+i.nominalWidthX,l=!0),f+=s.pop(),d+=s.pop(),u&&e.U.P.closePath(a),e.U.P.moveTo(a,d,f),u=!0;else if("o22"==M)s.length>1&&!l&&(c=s.shift()+i.nominalWidthX,l=!0),d+=s.pop(),u&&e.U.P.closePath(a),e.U.P.moveTo(a,d,f),u=!0;else if("o25"==M){for(;s.length>6;)d+=s.shift(),f+=s.shift(),e.U.P.lineTo(a,d,f);p=d+s.shift(),m=f+s.shift(),g=p+s.shift(),y=m+s.shift(),d=g+s.shift(),f=y+s.shift(),e.U.P.curveTo(a,p,m,g,y,d,f)}else if("o26"==M)for(s.length%2&&(d+=s.shift());s.length>0;)p=d,m=f+s.shift(),d=g=p+s.shift(),f=(y=m+s.shift())+s.shift(),e.U.P.curveTo(a,p,m,g,y,d,f);else if("o27"==M)for(s.length%2&&(f+=s.shift());s.length>0;)m=f,g=(p=d+s.shift())+s.shift(),y=m+s.shift(),d=g+s.shift(),f=y,e.U.P.curveTo(a,p,m,g,y,d,f);else if("o10"==M||"o29"==M){var N="o10"==M?i:r;if(0==s.length)console.debug("error: empty stack");else{var F=s.pop(),z=N.Subrs[F+N.Bias];n.x=d,n.y=f,n.nStems=o,n.haveWidth=l,n.width=c,n.open=u,e.U._drawCFF(z,n,r,i,a),d=n.x,f=n.y,o=n.nStems,l=n.haveWidth,c=n.width,u=n.open}}else if("o30"==M||"o31"==M){var U=s.length,G=(L=0,"o31"==M);for(L+=U-(C=-3&U);L<C;)G?(m=f,g=(p=d+s.shift())+s.shift(),f=(y=m+s.shift())+s.shift(),C-L==5?(d=g+s.shift(),L++):d=g,G=!1):(p=d,m=f+s.shift(),g=p+s.shift(),y=m+s.shift(),d=g+s.shift(),C-L==5?(f=y+s.shift(),L++):f=y,G=!0),e.U.P.curveTo(a,p,m,g,y,d,f),L+=4}else{if("o"==(M+"").charAt(0))throw console.debug("Unknown operation: "+M,t),M;s.push(M)}}}n.x=d,n.y=f,n.nStems=o,n.haveWidth=l,n.width=c,n.open=u};var n=e,r={Typr:n};return t.Typr=n,t.default=r,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr},function(){return function(t){var e=Uint8Array,n=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return[i,s]},l=o(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=o(a,0)[0],d=new n(32768),f=0;f<32768;++f){var p=(43690&f)>>>1|(21845&f)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,d[f]=((65280&p)>>>8|(255&p)<<8)>>>1}var m=function(t,e,r){for(var i=t.length,a=0,s=new n(e);a<i;++a)++s[t[a]-1];var o,l=new n(e);for(a=0;a<e;++a)l[a]=l[a-1]+s[a-1]<<1;if(r){o=new n(1<<e);var c=15-e;for(a=0;a<i;++a)if(t[a])for(var u=a<<4|t[a],h=e-t[a],f=l[t[a]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)o[d[f]>>>c]=u}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=d[l[t[a]-1]++]>>>15-t[a]);return o},g=new e(288);for(f=0;f<144;++f)g[f]=8;for(f=144;f<256;++f)g[f]=9;for(f=256;f<280;++f)g[f]=7;for(f=280;f<288;++f)g[f]=8;var y=new e(32);for(f=0;f<32;++f)y[f]=5;var v=m(g,9,1),b=m(y,5,1),x=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},_=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&n},w=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},S=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,e,n){var r=new Error(e||S[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,E),!n)throw r;return r},M=new e(0),C=typeof TextDecoder<"u"&&new TextDecoder;try{C.decode(M,{stream:!0})}catch{}return t.convert_streams=function(t){var o=new DataView(t),l=0;function u(){var t=o.getUint16(l);return l+=2,t}function d(){var t=o.getUint32(l);return l+=4,t}function f(t){R.setUint16(I,t),I+=2}function p(t){R.setUint32(I,t),I+=4}for(var g={signature:d(),flavor:d(),length:d(),numTables:u(),reserved:u(),totalSfntSize:d(),majorVersion:u(),minorVersion:u(),metaOffset:d(),metaLength:d(),metaOrigLength:d(),privOffset:d(),privLength:d()},y=0;Math.pow(2,y)<=g.numTables;)y++;y--;for(var S=16*Math.pow(2,y),M=16*g.numTables-S,C=12,T=[],A=0;A<g.numTables;A++)T.push({tag:d(),offset:d(),compLength:d(),origLength:d(),origChecksum:d()}),C+=16;var k,L=new Uint8Array(12+16*T.length+T.reduce((function(t,e){return t+e.origLength+4}),0)),P=L.buffer,R=new DataView(P),I=0;return p(g.flavor),f(g.numTables),f(S),f(y),f(M),T.forEach((function(t){p(t.tag),p(t.origChecksum),p(C),p(t.origLength),t.outOffset=C,(C+=t.origLength)%4!=0&&(C+=4-C%4)})),T.forEach((function(o){var l=t.slice(o.offset,o.offset+o.compLength);if(o.compLength!=o.origLength){var u=new Uint8Array(o.origLength);(function(t,o,l){var u=t.length;if(!u||l&&!l.l&&u<5)return o||new e(0);var d=!o||l,f=!l||l.i;l||(l={}),o||(o=new e(3*u));var p,g=function(t){var n=o.length;if(t>n){var r=new e(Math.max(2*n,t));r.set(o),o=r}},y=l.f||0,S=l.p||0,M=l.b||0,C=l.l,T=l.d,A=l.m,k=l.n,L=8*u;do{if(!C){l.f=y=_(t,S,1);var P=_(t,S+1,3);if(S+=3,!P){var R=t[(j=((p=S)/8|0)+(7&p&&1)+4)-4]|t[j-3]<<8,I=j+R;if(I>u){f&&E(0);break}d&&g(M+R),o.set(t.subarray(j,I),M),l.b=M+=R,l.p=S=8*I;continue}if(1==P)C=v,T=b,A=9,k=5;else if(2==P){var D=_(t,S,31)+257,B=_(t,S+10,15)+4,O=D+_(t,S+5,31)+1;S+=14;for(var N=new e(O),F=new e(19),z=0;z<B;++z)F[s[z]]=_(t,S+3*z,7);S+=3*B;var U=x(F),G=(1<<U)-1,H=m(F,U,1);for(z=0;z<O;){var j,V=H[_(t,S,G)];if(S+=15&V,(j=V>>>4)<16)N[z++]=j;else{var W=0,$=0;for(16==j?($=3+_(t,S,3),S+=2,W=N[z-1]):17==j?($=3+_(t,S,7),S+=3):18==j&&($=11+_(t,S,127),S+=7);$--;)N[z++]=W}}var Y=N.subarray(0,D),q=N.subarray(D);A=x(Y),k=x(q),C=m(Y,A,1),T=m(q,k,1)}else E(1);if(S>L){f&&E(0);break}}d&&g(M+131072);for(var X=(1<<A)-1,J=(1<<k)-1,Z=S;;Z=S){var K=(W=C[w(t,S)&X])>>>4;if((S+=15&W)>L){f&&E(0);break}if(W||E(2),K<256)o[M++]=K;else{if(256==K){Z=S,C=null;break}var Q=K-254;if(K>264){var tt=i[z=K-257];Q=_(t,S,(1<<tt)-1)+c[z],S+=tt}var et=T[w(t,S)&J],nt=et>>>4;if(et||E(3),S+=15&et,q=h[nt],nt>3&&(tt=a[nt],q+=w(t,S)&(1<<tt)-1,S+=tt),S>L){f&&E(0);break}d&&g(M+131072);for(var rt=M+Q;M<rt;M+=4)o[M]=o[M-q],o[M+1]=o[M+1-q],o[M+2]=o[M+2-q],o[M+3]=o[M+3-q];M=rt}}l.l=C,l.p=Z,l.b=M,C&&(y=1,l.m=A,l.d=T,l.n=k)}while(!y);M==o.length||function(t,i,a){(null==i||i<0)&&(i=0),(null==a||a>t.length)&&(a=t.length);var s=new(t instanceof n?n:t instanceof r?r:e)(a-i);s.set(t.subarray(i,a))}(o,0,M)})(new Uint8Array(l,2),u)}else u=new Uint8Array(l);L.set(u,o.outOffset);var d=0;(C=o.outOffset+o.origLength)%4!=0&&(d=4-C%4),L.set(new Uint8Array(d).buffer,o.outOffset+o.origLength),k=C+d})),P.slice(0,k)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams},function(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let i;function a(t){if(!i){const t={R:2,L:1,D:4,C:16,U:32,T:8};i=new Map;for(let e in r){let n=0;r[e].split(",").forEach((r=>{let[a,s]=r.split("+");a=parseInt(a,36),s=s?parseInt(s,36):0,i.set(n+=a,t[e]);for(let o=s;o--;)i.set(++n,t[e])}))}}return i.get(t)||32}const s=[null,"isol","init","fina","medi"];function o(t){const e=new Uint8Array(t.length);let n=32,r=1,i=-1;for(let s=0;s<t.length;s++){const o=t.codePointAt(s);let l=0|a(o),c=1;8&l||(21&n?22&l?(c=3,(1===r||3===r)&&e[i]++):33&l&&(2===r||4===r)&&e[i]--:34&n&&(2===r||4===r)&&e[i]--,r=e[s]=c,n=l,i=s,o>65535&&s++)}return e}function l(e){const r=Object.create(null),i={unitsPerEm:e.head.unitsPerEm,ascender:e.hhea.ascender,descender:e.hhea.descender,forEachGlyph(a,l,c,u){let h=0;const d=1/i.unitsPerEm*l,f=function(e,n){const r=[];for(let a=0;a<n.length;a++){const i=n.codePointAt(a);i>65535&&a++,r.push(t.U.codeToGlyph(e,i))}const i=e.GSUB;if(i){const{lookupList:e,featureList:a}=i;let l;const c=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,u=[];a.forEach((i=>{if(c.test(i.tag))for(let a=0;a<i.tab.length;a++){if(u[i.tab[a]])continue;u[i.tab[a]]=!0;const c=e[i.tab[a]],h=/^(isol|init|fina|medi)$/.test(i.tag);h&&!l&&(l=o(n));for(let n=0;n<r.length;n++)(!l||!h||s[l[n]]===i.tag)&&t.U._applySubs(r,n,c,e)}}))}return r}(e,a);let p=0,m=-1;return f.forEach(((i,s)=>{if(-1!==i){let a=r[i];if(!a){const{cmds:s,crds:o}=t.U.glyphToPath(e,i);let l,c,u,h,d="",f=0;for(let t=0,e=s.length;t<e;t++){const e=n[s[t]];d+=s[t];for(let t=1;t<=e;t++)d+=(t>1?",":"")+o[f++]}if(o.length){l=c=1/0,u=h=-1/0;for(let t=0,e=o.length;t<e;t+=2){let e=o[t],n=o[t+1];e<l&&(l=e),n<c&&(c=n),e>u&&(u=e),n>h&&(h=n)}}else l=u=c=h=0;a=r[i]={index:i,advanceWidth:e.hmtx.aWidth[i],xMin:l,yMin:c,xMax:u,yMax:h,path:d,pathCommandCount:s.length}}-1!==m&&(h+=t.U.getPairAdjustment(e,m,i)*d),u.call(null,a,h,p),a.advanceWidth&&(h+=a.advanceWidth*d),c&&(h+=c*l),m=i}p+=a.codePointAt(p)>65535?2:1})),h}};return i}return function(n){const r=new Uint8Array(n,0,4),i=t._bin.readASCII(r,0,4);if("wOFF"===i)n=e(n);else if("wOF2"===i)throw new Error("woff2 fonts not supported");return l(t.parse(n)[0])}}],init:(t,e,n)=>n(t(),e())}),nm={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},rm=new Kt;function im(){return(self.performance||Date).now()}const am=Object.create(null);function sm(t,e){t=function(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}({},t);const n=im();if(t.font=function(t){return lm||(lm=typeof document>"u"?{}:document.createElement("a")),lm.href=t,lm.href}(t.font||nm.defaultFontURL),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||nm.sdfGlyphSize,null!=t.colorRanges){let e={};for(let n in t.colorRanges)if(t.colorRanges.hasOwnProperty(n)){let r=t.colorRanges[n];"number"!=typeof r&&(r=rm.set(r).getHex()),e[n]=r}t.colorRanges=e}Object.freeze(t);const{textureWidth:r,sdfExponent:i}=nm,{sdfGlyphSize:a}=t,s=r/a*4;let o=am[a];if(!o){const t=document.createElement("canvas");t.width=r,t.height=256*a/s,o=am[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:t,sdfTexture:new ie(t,void 0,void 0,void 0,w,w),contextLost:!1,glyphsByFont:new Map},o.sdfTexture.generateMipmaps=!1,function(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",(e=>{console.log("Context Lost",e),e.preventDefault(),t.contextLost=!0})),e.addEventListener("webglcontextrestored",(e=>{console.log("Context Restored",e),t.contextLost=!1;const n=[];t.glyphsByFont.forEach((e=>{e.forEach((e=>{n.push(om(e,t,!0))}))})),wp.all(n).then((()=>{cm(t),t.sdfTexture.needsUpdate=!0}))}))}(o)}const{sdfTexture:l,sdfCanvas:c}=o;let u=o.glyphsByFont.get(t.font);u||o.glyphsByFont.set(t.font,u=new Map),hm(t).then((h=>{const{glyphIds:d,glyphPositions:f,fontSize:p,unitsPerEm:m,timings:g}=h,y=[],v=new Float32Array(4*d.length),b=p/m;let x=0,_=0;const w=im();d.forEach(((t,e)=>{let n=u.get(t);if(!n){const{path:e,pathBounds:r}=h.glyphData[t],i=Math.max(r[2]-r[0],r[3]-r[1])/a*(nm.sdfMargin*a+.5),s=o.glyphCount++,l=[r[0]-i,r[1]-i,r[2]+i,r[3]+i];u.set(t,n={path:e,atlasIndex:s,sdfViewBox:l}),y.push(n)}const{sdfViewBox:r}=n,i=f[_++],s=f[_++];v[x++]=i+r[0]*b,v[x++]=s+r[1]*b,v[x++]=i+r[2]*b,v[x++]=s+r[3]*b,d[e]=n.atlasIndex})),g.quads=(g.quads||0)+(im()-w);const S=im();g.sdf={};const E=c.height,M=Math.ceil(o.glyphCount/s),C=Math.pow(2,Math.ceil(Math.log2(M*a)));C>E&&(console.info(`Increasing SDF texture size ${E}->${C}`),tm(c,r,C),l.dispose()),wp.all(y.map((e=>om(e,o,t.gpuAccelerateSDF).then((({timing:t})=>{g.sdf[e.atlasIndex]=t}))))).then((()=>{y.length&&!o.contextLost&&(cm(o),l.needsUpdate=!0),g.sdfTotal=im()-S,g.total=im()-n,e(Object.freeze({parameters:t,sdfTexture:l,sdfGlyphSize:a,sdfExponent:i,glyphBounds:v,glyphAtlasIndices:d,glyphColors:h.glyphColors,caretPositions:h.caretPositions,caretHeight:h.caretHeight,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),h.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[t,e,n,r]=h.blockBounds;return[n-t,r-e]}}))}))})),wp.all([]).then((()=>{o.contextLost||function(t){t._warm||(Jp.webgl.isSupported(t),t._warm=!0)}(c)}))}function om({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:a},s){if(a)return Promise.resolve({timing:-1});const{textureWidth:o,sdfExponent:l}=nm,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(e/4);return function(t,e,n,r,i,a,s,o,l,c,u=!0){return u?Kp(t,e,n,r,i,a,s,o,l,c).then(null,(u=>(Zp||(console.warn("WebGL SDF generation failed, falling back to JS",u),Zp=!0),Qp(t,e,n,r,i,a,s,o,l,c)))):Qp(t,e,n,r,i,a,s,o,l,c)}(r,r,t,n,c,l,i,u%(o/r)*r,Math.floor(u/(o/r))*r,e%4,s)}let lm;function cm(t){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:r,height:i}=e,a=t.sdfCanvas.getContext("webgl");let s=n.image.data;(!s||s.length!==r*i*4)&&(s=new Uint8Array(r*i*4),n.image={width:r,height:i,data:s},n.flipY=!1,n.isDataTexture=!0),a.readPixels(0,0,r,i,a.RGBA,a.UNSIGNED_BYTE,s)}}const um=Pp({name:"Typesetter",dependencies:[nm,em,function(t,e,n){const{defaultFontURL:r}=n,i=Object.create(null),a=1/0,s=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,o=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function l(e,n){e||(e=r);let a=i[e];a?a.pending?a.pending.push(n):n(a):(i[e]={pending:[n]},function(e,n){!function i(){const a=t=>{console.error(`Failure loading font ${e}${e===r?"":"; trying fallback"}`,t),e!==r&&(e=r,i())};try{const r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){if(r.status>=400)a(new Error(r.statusText));else if(r.status>0)try{const e=t(r.response);n(e)}catch(e){a(e)}},r.onerror=a,r.send()}catch(s){a(s)}}()}(e,(t=>{let n=i[e].pending;i[e]=t,n.forEach((e=>e(t)))})))}function c({text:t="",font:n=r,sdfGlyphSize:i=64,fontSize:c=1,letterSpacing:p=0,lineHeight:m="normal",maxWidth:g=a,direction:y,textAlign:v="left",textIndent:b=0,whiteSpace:x="normal",overflowWrap:_="normal",anchorX:w=0,anchorY:S=0,includeCaretPositions:E=!1,chunkedBoundsSize:M=8192,colorRanges:C=null},T,A=!1){const k=d(),L={fontLoad:0,typesetting:0};t.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),c=+c,p=+p,g=+g,m=m||"normal",b=+b,l(n,(n=>{const r=isFinite(g);let i=null,l=null,P=null,R=null,I=null,D=null,B=null,O=0,N=0,F="nowrap"!==x;const{ascender:z,descender:U,unitsPerEm:G}=n;L.fontLoad=d()-k;const H=d(),j=c/G;"normal"===m&&(m=(z-U)/G);const V=((m*=c)-(z-U)*j)/2,W=-(z*j+V),$=Math.min(m,(z-U)*j),Y=(z+U)/2*j-$/2;let q=b,X=new f;const J=[X];n.forEachGlyph(t,c,p,((e,n,i)=>{const a=t.charAt(i),l=e.advanceWidth*j,u=X.count;let h;if("isEmpty"in e||(e.isWhitespace=!!a&&/\s/.test(a),e.canBreakAfter=!!a&&o.test(a),e.isEmpty=e.xMin===e.xMax||e.yMin===e.yMax||s.test(a)),!e.isWhitespace&&!e.isEmpty&&N++,F&&r&&!e.isWhitespace&&n+l+q>g&&u){if(X.glyphAt(u-1).glyphObj.canBreakAfter)h=new f,q=-n;else for(let t=u;t--;){if(0===t&&"break-word"===_){h=new f,q=-n;break}if(X.glyphAt(t).glyphObj.canBreakAfter){h=X.splitAt(t+1);const e=h.glyphAt(0).x;q-=e;for(let t=h.count;t--;)h.glyphAt(t).x-=e;break}}h&&(X.isSoftWrapped=!0,X=h,J.push(X),O=g)}let d=X.glyphAt(X.count);d.glyphObj=e,d.x=n+q,d.width=l,d.charIndex=i,"\n"===a&&(X=new f,J.push(X),q=-(n+l+p*c)+b)})),J.forEach((t=>{for(let e=t.count;e--;){let{glyphObj:n,x:r,width:i}=t.glyphAt(e);if(!n.isWhitespace)return t.width=r+i,void(t.width>O&&(O=t.width))}}));let Z=0,K=0;if(w&&("number"==typeof w?Z=-w:"string"==typeof w&&(Z=-O*("left"===w?0:"center"===w?.5:"right"===w?1:u(w)))),S)if("number"==typeof S)K=-S;else if("string"==typeof S){let t=J.length*m;K="top"===S?0:"top-baseline"===S?-W:"middle"===S?t/2:"bottom"===S?t:"bottom-baseline"===S?t-V+U*j:u(S)*t}if(!A){const r=e.getEmbeddingLevels(t,y);i=new Uint16Array(N),l=new Float32Array(2*N),P={},D=[a,a,-a,-a],B=[];let s=W;E&&(I=new Float32Array(3*t.length)),C&&(R=new Uint8Array(3*N));let o,c,u=0,d=-1,f=-1;if(J.forEach(((p,g)=>{let{count:y,width:b}=p;if(y>0){let m=0;for(let t=y;t--&&p.glyphAt(t).glyphObj.isWhitespace;)m++;let g=0,x=0;if("center"===v)g=(O-b)/2;else if("right"===v)g=O-b;else if("justify"===v&&p.isSoftWrapped){let t=0;for(let e=y-m;e--;)p.glyphAt(e).glyphObj.isWhitespace&&t++;x=(O-b)/t}if(x||g){let t=0;for(let e=0;e<y;e++){let n=p.glyphAt(e);const r=n.glyphObj;n.x+=g+t,0!==x&&r.isWhitespace&&e<y-m&&(t+=x,n.width+=x)}}const _=e.getReorderSegments(t,r,p.glyphAt(0).charIndex,p.glyphAt(p.count-1).charIndex);for(let t=0;t<_.length;t++){const[e,n]=_[t];let r=1/0,i=-1/0;for(let t=0;t<y;t++)if(p.glyphAt(t).charIndex>=e){let e=t,a=t;for(;a<y;a++){let t=p.glyphAt(a);if(t.charIndex>n)break;a<y-m&&(r=Math.min(r,t.x),i=Math.max(i,t.x+t.width))}for(let t=e;t<a;t++){const e=p.glyphAt(t);e.x=i-(e.x+e.width-r)}break}}let w;const S=t=>w=t;for(let v=0;v<y;v++){let m=p.glyphAt(v);w=m.glyphObj;const g=w.index,y=1&r.levels[m.charIndex];if(y){const r=e.getMirroredCharacter(t[m.charIndex]);r&&n.forEachGlyph(r,0,0,S)}if(E){const{charIndex:t}=m,e=m.x+Z,n=m.x+m.width+Z;I[3*t]=y?n:e,I[3*t+1]=y?e:n,I[3*t+2]=s+Y+K;const r=t-d;r>1&&h(I,d,r),d=t}if(C){const{charIndex:t}=m;for(;t>f;)f++,C.hasOwnProperty(f)&&(c=C[f])}if(!w.isWhitespace&&!w.isEmpty){const t=u++;P[g]||(P[g]={path:w.path,pathBounds:[w.xMin,w.yMin,w.xMax,w.yMax]});const e=m.x+Z,n=s+K;l[2*t]=e,l[2*t+1]=n;const r=e+w.xMin*j,h=n+w.yMin*j,d=e+w.xMax*j,f=n+w.yMax*j;r<D[0]&&(D[0]=r),h<D[1]&&(D[1]=h),d>D[2]&&(D[2]=d),f>D[3]&&(D[3]=f),t%M==0&&(o={start:t,end:t,rect:[a,a,-a,-a]},B.push(o)),o.end++;const p=o.rect;if(r<p[0]&&(p[0]=r),h<p[1]&&(p[1]=h),d>p[2]&&(p[2]=d),f>p[3]&&(p[3]=f),i[t]=g,C){const e=3*t;R[e]=c>>16&255,R[e+1]=c>>8&255,R[e+2]=255&c}}}}s-=m})),I){const e=t.length-d;e>1&&h(I,d,e)}}L.typesetting=d()-H,T({glyphIds:i,glyphPositions:l,glyphData:P,caretPositions:I,caretHeight:$,glyphColors:R,chunkedBounds:B,fontSize:c,unitsPerEm:G,ascender:z*j,descender:U*j,lineHeight:m,topBaseline:W,blockBounds:[Z,K-J.length*m,Z+O,K],visibleBounds:D,timings:L})}))}function u(t){let e=t.match(/^([\d.]+)%$/),n=e?parseFloat(e[1]):NaN;return isNaN(n)?0:n/100}function h(t,e,n){const r=t[3*e],i=t[3*e+1],a=t[3*e+2],s=(i-r)/n;for(let o=0;o<n;o++){const n=3*(e+o);t[n]=r+s*o,t[n+1]=r+s*(o+1),t[n+2]=a}}function d(){return(self.performance||Date).now()}function f(){this.data=[]}const p=["glyphObj","x","width","charIndex"];return f.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/p.length)},glyphAt(t){let e=f.flyweight;return e.data=this.data,e.index=t,e},splitAt(t){let e=new f;return e.data=this.data.splice(t*p.length),e}},f.flyweight=p.reduce(((t,e,n,r)=>(Object.defineProperty(t,e,{get(){return this.data[this.index*p.length+n]},set(t){this.data[this.index*p.length+n]=t}}),t)),{data:null,index:0}),{typeset:c,measure:function(t,e){c(t,(t=>{const[n,r,i,a]=t.blockBounds;e({width:i-n,height:a-r})}),{metricsOnly:!0})},loadFont:l}},function(){return function(t){var e={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(e).forEach((function(t,e){n[t]=1<<e+1,r[n[t]]=t})),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,a=n.L|n.R|n.AL,s=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,o=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,l=n.S|n.WS|n.B|i|n.PDI|o,c=null;function u(t){return function(){if(!c){c=new Map;var t=function(t){if(e.hasOwnProperty(t)){var r=0;e[t].split(",").forEach((function(e){var i=e.split("+"),a=i[0],s=i[1];a=parseInt(a,36),s=s?parseInt(s,36):0,c.set(r+=a,n[t]);for(var o=0;o<s;o++)c.set(++r,n[t])}))}};for(var r in e)t(r)}}(),c.get(t.codePointAt(0))||n.L}var h,d,f,p="14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",m="6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye";function g(t,e){var n,r=0,i=new Map,a=e&&new Map;return t.split(",").forEach((function t(s){if(-1!==s.indexOf("+"))for(var o=+s;o--;)t(n);else{n=s;var l=s.split(">"),c=l[0],u=l[1];c=String.fromCodePoint(r+=parseInt(c,36)),u=String.fromCodePoint(r+=parseInt(u,36)),i.set(c,u),e&&a.set(u,c)}})),{map:i,reverseMap:a}}function y(){if(!h){var t=g(p,!0),e=t.map,n=t.reverseMap;h=e,d=n,f=g(m,!1).map}}function v(t){return y(),h.get(t)||null}function b(t){return y(),d.get(t)||null}function x(t){return y(),f.get(t)||null}var _=n.L,w=n.R,S=n.EN,E=n.ES,M=n.ET,C=n.AN,T=n.CS,A=n.B,k=n.S,L=n.ON,P=n.BN,R=n.NSM,I=n.AL,D=n.LRO,B=n.RLO,O=n.LRE,N=n.RLE,F=n.PDF,z=n.LRI,U=n.RLI,G=n.FSI,H=n.PDI;var j;function V(t){return function(){if(!j){var t=g("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),e=t.map;t.reverseMap.forEach((function(t,n){e.set(n,t)})),j=e}}(),j.get(t)||null}function W(t,e,n,r){var i=t.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);var a=[];return e.paragraphs.forEach((function(i){var s=Math.max(n,i.start),o=Math.min(r,i.end);if(s<o){for(var c=e.levels.slice(s,o+1),h=o;h>=s&&u(t[h])&l;h--)c[h]=i.level;for(var d=i.level,f=1/0,p=0;p<c.length;p++){var m=c[p];m>d&&(d=m),m<f&&(f=1|m)}for(var g=d;g>=f;g--)for(var y=0;y<c.length;y++)if(c[y]>=g){for(var v=y;y+1<c.length&&c[y+1]>=g;)y++;y>v&&a.push([v+n,y+n])}}})),a}function $(t,e,n,r){for(var i=W(t,e,n,r),a=[],s=0;s<t.length;s++)a[s]=s;return i.forEach((function(t){for(var e=t[0],n=t[1],r=a.slice(e,n+1),i=r.length;i--;)a[n-i]=r[i]})),a}return t.closingToOpeningBracket=b,t.getBidiCharType=u,t.getBidiCharTypeName=function(t){return r[u(t)]},t.getCanonicalBracket=x,t.getEmbeddingLevels=function(t,e){for(var n=new Uint32Array(t.length),r=0;r<t.length;r++)n[r]=u(t[r]);var c=new Map;function h(t,e){var r=n[t];n[t]=e,c.set(r,c.get(r)-1),r&s&&c.set(s,c.get(s)-1),c.set(e,(c.get(e)||0)+1),e&s&&c.set(s,(c.get(s)||0)+1)}for(var d=new Uint8Array(t.length),f=new Map,p=[],m=null,g=0;g<t.length;g++)m||p.push(m={start:g,end:t.length-1,level:"rtl"===e?1:"ltr"===e?0:Ge(g,!1)}),n[g]&A&&(m.end=g,m=null);for(var y=N|O|B|D|i|H|F|A,j=function(t){return t+(1&t?1:2)},V=function(t){return t+(1&t?2:1)},W=0;W<p.length;W++){var $=[{_level:(m=p[W]).level,_override:0,_isolate:0}],Y=void 0,q=0,X=0,J=0;c.clear();for(var Z=m.start;Z<=m.end;Z++){var K=n[Z];if(Y=$[$.length-1],c.set(K,(c.get(K)||0)+1),K&s&&c.set(s,(c.get(s)||0)+1),K&y)if(K&(N|O)){d[Z]=Y._level;var Q=(K===N?V:j)(Y._level);Q<=125&&!q&&!X?$.push({_level:Q,_override:0,_isolate:0}):q||X++}else if(K&(B|D)){d[Z]=Y._level;var tt=(K===B?V:j)(Y._level);tt<=125&&!q&&!X?$.push({_level:tt,_override:K&B?w:_,_isolate:0}):q||X++}else if(K&i){K&G&&(K=1===Ge(Z+1,!0)?U:z),d[Z]=Y._level,Y._override&&h(Z,Y._override);var et=(K===U?V:j)(Y._level);et<=125&&0===q&&0===X?(J++,$.push({_level:et,_override:0,_isolate:1,_isolInitIndex:Z})):q++}else if(K&H){if(q>0)q--;else if(J>0){for(X=0;!$[$.length-1]._isolate;)$.pop();var nt=$[$.length-1]._isolInitIndex;null!=nt&&(f.set(nt,Z),f.set(Z,nt)),$.pop(),J--}Y=$[$.length-1],d[Z]=Y._level,Y._override&&h(Z,Y._override)}else K&F?(0===q&&(X>0?X--:!Y._isolate&&$.length>1&&($.pop(),Y=$[$.length-1])),d[Z]=Y._level):K&A&&(d[Z]=m.level);else d[Z]=Y._level,Y._override&&K!==P&&h(Z,Y._override)}for(var rt=[],it=null,at=m.start;at<=m.end;at++){var st=n[at];if(!(st&o)){var ot=d[at],lt=st&i,ct=st===H;it&&ot===it._level?(it._end=at,it._endsWithIsolInit=lt):rt.push(it={_start:at,_end:at,_level:ot,_startsWithPDI:ct,_endsWithIsolInit:lt})}}for(var ut=[],ht=0;ht<rt.length;ht++){var dt=rt[ht];if(!dt._startsWithPDI||dt._startsWithPDI&&!f.has(dt._start)){for(var ft=[it=dt],pt=void 0;it&&it._endsWithIsolInit&&null!=(pt=f.get(it._end));)for(var mt=ht+1;mt<rt.length;mt++)if(rt[mt]._start===pt){ft.push(it=rt[mt]);break}for(var gt=[],yt=0;yt<ft.length;yt++)for(var vt=ft[yt],bt=vt._start;bt<=vt._end;bt++)gt.push(bt);for(var xt=d[gt[0]],_t=m.level,wt=gt[0]-1;wt>=0;wt--)if(!(n[wt]&o)){_t=d[wt];break}var St=gt[gt.length-1],Et=d[St],Mt=m.level;if(!(n[St]&i))for(var Ct=St+1;Ct<=m.end;Ct++)if(!(n[Ct]&o)){Mt=d[Ct];break}ut.push({_seqIndices:gt,_sosType:Math.max(_t,xt)%2?w:_,_eosType:Math.max(Mt,Et)%2?w:_})}}for(var Tt=0;Tt<ut.length;Tt++){var At=ut[Tt],kt=At._seqIndices,Lt=At._sosType,Pt=At._eosType;if(c.get(R))for(var Rt=0;Rt<kt.length;Rt++){var It=kt[Rt];if(n[It]&R){for(var Dt=Lt,Bt=Rt-1;Bt>=0;Bt--)if(!(n[kt[Bt]]&o)){Dt=n[kt[Bt]];break}h(It,Dt&(i|H)?L:Dt)}}if(c.get(S))for(var Ot=0;Ot<kt.length;Ot++){var Nt=kt[Ot];if(n[Nt]&S)for(var Ft=Ot-1;Ft>=-1;Ft--){var zt=-1===Ft?Lt:n[kt[Ft]];if(zt&a){zt===I&&h(Nt,C);break}}}if(c.get(I))for(var Ut=0;Ut<kt.length;Ut++){var Gt=kt[Ut];n[Gt]&I&&h(Gt,w)}if(c.get(E)||c.get(T))for(var Ht=1;Ht<kt.length-1;Ht++){var jt=kt[Ht];if(n[jt]&(E|T)){for(var Vt=0,Wt=0,$t=Ht-1;$t>=0&&(Vt=n[kt[$t]])&o;$t--);for(var Yt=Ht+1;Yt<kt.length&&(Wt=n[kt[Yt]])&o;Yt++);Vt===Wt&&(n[jt]===E?Vt===S:Vt&(S|C))&&h(jt,Vt)}}if(c.get(S))for(var qt=0;qt<kt.length;qt++){var Xt=kt[qt];if(n[Xt]&S){for(var Jt=qt-1;Jt>=0&&n[kt[Jt]]&(M|o);Jt--)h(kt[Jt],S);for(var Zt=qt+1;Zt<kt.length&&n[kt[Zt]]&(M|o);Zt++)h(kt[Zt],S)}}if(c.get(M)||c.get(E)||c.get(T))for(var Kt=0;Kt<kt.length;Kt++){var Qt=kt[Kt];if(n[Qt]&(M|E|T)){h(Qt,L);for(var te=Kt-1;te>=0&&n[kt[te]]&o;te--)h(kt[te],L);for(var ee=Kt+1;ee<kt.length&&n[kt[ee]]&o;ee++)h(kt[ee],L)}}if(c.get(S))for(var ne=0,re=Lt;ne<kt.length;ne++){var ie=kt[ne],ae=n[ie];ae&S?re===_&&h(ie,_):ae&a&&(re=ae)}if(c.get(s)){for(var se=w|S|C,oe=se|_,le=[],ce=[],ue=0;ue<kt.length;ue++)if(n[kt[ue]]&s){var he=t[kt[ue]],de=void 0;if(null!==v(he)){if(!(ce.length<63))break;ce.push({char:he,seqIndex:ue})}else if(null!==(de=b(he)))for(var fe=ce.length-1;fe>=0;fe--){var pe=ce[fe].char;if(pe===de||pe===b(x(he))||v(x(pe))===he){le.push([ce[fe].seqIndex,ue]),ce.length=fe;break}}}le.sort((function(t,e){return t[0]-e[0]}));for(var me=0;me<le.length;me++){for(var ge=le[me],ye=ge[0],ve=ge[1],be=!1,xe=0,_e=ye+1;_e<ve;_e++){var we=kt[_e];if(n[we]&oe){be=!0;var Se=n[we]&se?w:_;if(Se===je(we)){xe=Se;break}}}if(be&&!xe){xe=Lt;for(var Ee=ye-1;Ee>=0;Ee--){var Me=kt[Ee];if(n[Me]&oe){var Ce=n[Me]&se?w:_;xe=Ce!==je(Me)?Ce:je(Me);break}}}if(xe){if(n[kt[ye]]=n[kt[ve]]=xe,xe!==je(kt[ye]))for(var Te=ye+1;Te<kt.length;Te++)if(!(n[kt[Te]]&o)){u(t[kt[Te]])&R&&(n[kt[Te]]=xe);break}if(xe!==je(kt[ve]))for(var Ae=ve+1;Ae<kt.length;Ae++)if(!(n[kt[Ae]]&o)){u(t[kt[Ae]])&R&&(n[kt[Ae]]=xe);break}}}for(var ke=0;ke<kt.length;ke++)if(n[kt[ke]]&s){for(var Le=ke,Pe=ke,Re=Lt,Ie=ke-1;Ie>=0;Ie--){if(!(n[kt[Ie]]&o)){Re=n[kt[Ie]]&se?w:_;break}Le=Ie}for(var De=Pt,Be=ke+1;Be<kt.length;Be++){if(!(n[kt[Be]]&(s|o))){De=n[kt[Be]]&se?w:_;break}Pe=Be}for(var Oe=Le;Oe<=Pe;Oe++)n[kt[Oe]]=Re===De?Re:je(kt[Oe]);ke=Pe}}}for(var Ne=m.start;Ne<=m.end;Ne++){var Fe=d[Ne],ze=n[Ne];if(1&Fe?ze&(_|S|C)&&d[Ne]++:ze&w?d[Ne]++:ze&(C|S)&&(d[Ne]+=2),ze&o&&(d[Ne]=0===Ne?m.level:d[Ne-1]),Ne===m.end||u(t[Ne])&(k|A))for(var Ue=Ne;Ue>=0&&u(t[Ue])&l;Ue--)d[Ue]=m.level}}return{levels:d,paragraphs:p};function Ge(e,r){for(var a=e;a<t.length;a++){var s=n[a];if(s&(w|I))return 1;if(s&(A|_)||r&&s===H)return 0;if(s&i){var o=He(a);a=-1===o?t.length:o}}return 0}function He(e){for(var r=1,a=e+1;a<t.length;a++){var s=n[a];if(s&A)break;if(s&H){if(0==--r)return a}else s&i&&r++}return-1}function je(t){return 1&d[t]?w:_}},t.getMirroredCharacter=V,t.getMirroredCharactersMap=function(t,e,n,r){var i=t.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);for(var a=new Map,s=n;s<=r;s++)if(1&e[s]){var o=V(t[s]);null!==o&&a.set(s,o)}return a},t.getReorderSegments=W,t.getReorderedIndices=$,t.getReorderedString=function(t,e,n,r){var i=$(t,e,n,r),a=[].concat(t);return i.forEach((function(n,r){a[r]=(1&e.levels[n]?V(t[n]):null)||t[n]})),a.join("")},t.openingToClosingBracket=v,Object.defineProperty(t,"__esModule",{value:!0}),t}({})}],init(t,e,n,r){const{defaultFontURL:i}=t;return n(e,r(),{defaultFontURL:i})}}),hm=Pp({name:"Typesetter",dependencies:[um,Dp],init:(t,e)=>function(n){const r=new e;return t.typeset(n,r.resolve),r},getTransferables(t){const e=[t.glyphPositions.buffer,t.glyphIds.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.glyphColors&&e.push(t.glyphColors.buffer),e}}),dm=(()=>{const t={};const e="aTroikaGlyphIndex";class n extends Vc{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Re,this.boundingBox=new fe}computeBoundingSphere(){}computeBoundingBox(){}setSide(t){const e=this.getIndex().count;this.setDrawRange(1===t?e/2:0,2===t?e:e/2)}set detail(e){if(e!==this._detail){this._detail=e,("number"!=typeof e||e<1)&&(e=1);let n=function(e){let n=t[e];if(!n){const r=new Tr(1,1,e,e),i=r.clone(),a=r.attributes,s=i.attributes,o=new Gn,l=a.uv.count;for(let t=0;t<l;t++)s.position.array[3*t]*=-1,s.normal.array[3*t+2]*=-1;["position","normal","uv"].forEach((t=>{o.setAttribute(t,new In([...a[t].array,...s[t].array],a[t].itemSize))})),o.setIndex([...r.index.array,...i.index.array.map((t=>t+l))]),o.translate(.5,.5,0),n=t[e]=o}return n}(e);["position","normal","uv"].forEach((t=>{this.attributes[t]=n.attributes[t].clone()})),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,n,a,s,o){r(this,"aTroikaGlyphBounds",t,4),r(this,e,n,1),r(this,"aTroikaGlyphColor",o,3),this._blockBounds=a,this._chunkedBounds=s,i(this,n.length),this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:e,boundingBox:n}=this;if(e){const{PI:r,floor:i,min:a,max:s,sin:o,cos:l}=Math,c=r/2,u=2*r,h=Math.abs(e),d=t[0]/h,f=t[2]/h,p=i((d+c)/u)!==i((f+c)/u)?-h:a(o(d)*h,o(f)*h),m=i((d-c)/u)!==i((f-c)/u)?h:s(o(d)*h,o(f)*h),g=i((d+r)/u)!==i((f+r)/u)?2*h:s(h-l(d)*h,h-l(f)*h);n.min.set(p,t[1],e<0?-g:0),n.max.set(m,t[3],e<0?0:g)}else n.min.set(t[0],t[1],0),n.max.set(t[2],t[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let n=this.getAttribute(e).count,r=this._chunkedBounds;if(r)for(let e=r.length;e--;){n=r[e].end;let i=r[e].rect;if(i[1]<t.w&&i[3]>t.y&&i[0]<t.z&&i[2]>t.x)break}i(this,n)}}function r(t,e,n,r){const i=t.getAttribute(e);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(t.setAttribute(e,new js(n,r)),delete t._maxInstanceCount,t.dispose()):i&&t.deleteAttribute(e)}function i(t,e){t[t.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=e}return n.prototype.setAttribute||(n.prototype.setAttribute=function(t,e){return this.attributes[t]=e,this}),n})();const fm=(()=>{const t=new Tn({color:16777215,side:2,transparent:!0}),e=8421504,n=new Ge,r=new ue,i=new ue,a=[],s=new ue,o="+x+y";function l(t){return Array.isArray(t)?t[0]:t}let c=()=>{const e=new ar(new Tr(1,1),t);return c=()=>e,e},u=()=>{const e=new ar(new Tr(1,1,32,1),t);return u=()=>e,e};const h={type:"syncstart"},d={type:"synccomplete"},f=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],p=f.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class m extends ar{constructor(){super(new dm,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=e,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=o,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(h),sm({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},(e=>{this._isSyncing=!1,this._textRenderInfo=e,this.geometry.updateGlyphs(e.glyphBounds,e.glyphAtlasIndices,e.blockBounds,e.chunkedBounds,e.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{n.forEach((t=>t&&t()))}))),this.dispatchEvent(d),t&&t()}))))}onBeforeRender(t,e,n,r,i,a){this.sync(),i.isTroikaTextMaterial&&this._prepareForRender(i),i._hadOwnSide=i.hasOwnProperty("side"),this.geometry.setSide(i._actualSide=i.side),i.side=0}onAfterRender(t,e,n,r,i,a){i._hadOwnSide?i.side=i._actualSide:delete i.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=t.clone());if((!e||e.baseMaterial!==n)&&(e=this._derivedMaterial=function(t){const e=Vp(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ot},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new ae(0,0,0,0)},uTroikaClipRect:{value:new ae(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ot},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Kt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Nt},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader:t,fragmentShader:e}){let n=/\buniform\s+vec3\s+diffuse\b/;return n.test(e)&&(e=e.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(t)||(t=t.replace(Op,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:t,fragmentShader:e}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}(n),n.addEventListener("dispose",(function t(){n.removeEventListener("dispose",t),e.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let t=e._outlineMtl;return t||(t=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),t.isTextOutlineMaterial=!0,t.depthWrite=!1,t.map=null,e.addEventListener("dispose",(function n(){e.removeEventListener("dispose",n),t.dispose()}))),[t,e]}return e}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return l(this.material).getDepthMaterial()}get customDistanceMaterial(){return l(this.material).getDistanceMaterial()}_prepareForRender(t){const a=t.isTextOutlineMaterial,l=t.uniforms,c=this.textRenderInfo;if(c){const{sdfTexture:t,blockBounds:n}=c;l.uTroikaSDFTexture.value=t,l.uTroikaSDFTextureSize.value.set(t.image.width,t.image.height),l.uTroikaSDFGlyphSize.value=c.sdfGlyphSize,l.uTroikaSDFExponent.value=c.sdfExponent,l.uTroikaTotalBounds.value.fromArray(n),l.uTroikaUseGlyphColors.value=!a&&!!c.glyphColors;let r,i,s,o=0,u=0,h=0,d=0,f=0;if(a){let{outlineWidth:t,outlineOffsetX:e,outlineOffsetY:n,outlineBlur:i,outlineOpacity:a}=this;o=this._parsePercent(t)||0,u=Math.max(0,this._parsePercent(i)||0),r=a,d=this._parsePercent(e)||0,f=this._parsePercent(n)||0}else h=Math.max(0,this._parsePercent(this.strokeWidth)||0),h&&(s=this.strokeColor,l.uTroikaStrokeColor.value.set(null==s?e:s),i=this.strokeOpacity,null==i&&(i=1)),r=this.fillOpacity;l.uTroikaDistanceOffset.value=o,l.uTroikaPositionOffset.value.set(d,f),l.uTroikaBlurRadius.value=u,l.uTroikaStrokeWidth.value=h,l.uTroikaStrokeOpacity.value=i,l.uTroikaFillOpacity.value=null==r?1:r,l.uTroikaCurveRadius.value=this.curveRadius||0;let p=this.clipRect;if(p&&Array.isArray(p)&&4===p.length)l.uTroikaClipRect.value.fromArray(p);else{const t=100*(this.fontSize||.1);l.uTroikaClipRect.value.set(n[0]-t,n[1]-t,n[2]+t,n[3]+t)}this.geometry.applyClipRect(l.uTroikaClipRect.value)}l.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const u=a?this.outlineColor||0:this.color;if(null==u)delete t.color;else{const e=t.hasOwnProperty("color")?t.color:t.color=new Kt;(u!==e._input||"object"==typeof u)&&e.set(e._input=u)}let h=this.orientation||o;if(h!==t._orientation){let e=l.uTroikaOrient.value;h=h.replace(/[^-+xyz]/g,"");let a=h!==o&&h.match(/^([-+])([xyz])([-+])([xyz])$/);if(a){let[,t,o,l,c]=a;r.set(0,0,0)[o]="-"===t?1:-1,i.set(0,0,0)[c]="-"===l?-1:1,n.lookAt(s,r.cross(i),i),e.setFromMatrix4(n)}else e.identity();t._orientation=h}}_parsePercent(t){if("string"==typeof t){let e=t.match(/^(-?[\d.]+)%$/),n=e?parseFloat(e[1]):NaN;t=(isNaN(n)?0:n/100)*this.fontSize}return t}localPositionToTextCoords(t,e=new Ot){e.copy(t);const n=this.curveRadius;return n&&(e.x=Math.atan2(t.x,Math.abs(n)-Math.abs(t.z))*Math.abs(n)),e}worldPositionToTextCoords(t,e=new Ot){return r.copy(t),this.localPositionToTextCoords(this.worldToLocal(r),e)}raycast(t,e){const{textRenderInfo:n,curveRadius:r}=this;if(n){const i=n.blockBounds,s=r?u():c(),o=s.geometry,{position:l,uv:h}=o.attributes;for(let t=0;t<h.count;t++){let e=i[0]+h.getX(t)*(i[2]-i[0]);const n=i[1]+h.getY(t)*(i[3]-i[1]);let a=0;r&&(a=r-Math.cos(e/r)*r,e=Math.sin(e/r)*r),l.setXYZ(t,e,n,a)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,s.matrixWorld=this.matrixWorld,s.material.side=this.material.side,a.length=0,s.raycast(t,a);for(let t=0;t<a.length;t++)a[t].object=this,e.push(a[t])}}copy(t){const e=this.geometry;return super.copy(t),this.geometry=e,p.forEach((e=>{this[e]=t[e]})),this}clone(){return(new this.constructor).copy(this)}}f.forEach((t=>{const e="_private_"+t;Object.defineProperty(m.prototype,t,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})}));let g=!1;return Object.defineProperty(m.prototype,"anchor",{get(){return this._deprecated_anchor},set(t){this._deprecated_anchor=t,g||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),g=!0),Array.isArray(t)?(this.anchorX=100*(+t[0]||0)+"%",this.anchorY=100*(+t[1]||0)+"%"):this.anchorX=this.anchorY=0}}),m})(),pm=r.forwardRef((({anchorX:t="center",anchorY:e="middle",font:n,children:i,characters:a,onSync:s,...o},l)=>{const c=ld((({invalidate:t})=>t)),[u]=r.useState((()=>new fm)),[h,d]=r.useMemo((()=>{const t=[];let e="";return r.Children.forEach(i,(n=>{"string"==typeof n||"number"==typeof n?e+=n:t.push(n)})),[t,e]}),[i]);return vh((()=>new Promise((t=>function({font:t,characters:e,sdfGlyphSize:n},r){sm({font:t,sdfGlyphSize:n,text:Array.isArray(e)?e.join("\n"):""+e},r)}({font:n,characters:a},t)))),["troika-text",n,a]),r.useLayoutEffect((()=>{u.sync((()=>{c(),s&&s(u)}))})),r.useEffect((()=>()=>u.dispose()),[u]),Sh("primitive",{object:u,ref:l,font:n,text:d,anchorX:t,anchorY:e,...o,children:h})}));var mm=9007199254740991,gm="[object Arguments]",ym="[object Function]",vm="[object GeneratorFunction]",bm="[object Symbol]",xm="object"==typeof eh&&eh&&eh.Object===Object&&eh,_m="object"==typeof self&&self&&self.Object===Object&&self,wm=xm||_m||Function("return this")();function Sm(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Em(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Mm=Object.prototype,Cm=Mm.hasOwnProperty,Tm=Mm.toString,Am=wm.Symbol,km=Mm.propertyIsEnumerable,Lm=Am?Am.isConcatSpreadable:void 0,Pm=Math.max;function Rm(t,e,n,r,i){var a=-1,s=t.length;for(n||(n=Im),i||(i=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?Rm(o,e-1,n,r,i):Em(i,o):r||(i[i.length]=o)}return i}function Im(t){return Bm(t)||function(t){return function(t){return Om(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=mm}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?Tm.call(t):"";return e==ym||e==vm}(t)}(t)}(t)&&Cm.call(t,"callee")&&(!km.call(t,"callee")||Tm.call(t)==gm)}(t)||!!(Lm&&t&&t[Lm])}function Dm(t){if("string"==typeof t||function(t){return"symbol"==typeof t||Om(t)&&Tm.call(t)==bm}(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}var Bm=Array.isArray;function Om(t){return!!t&&"object"==typeof t}var Nm=function(t,e){return e=Pm(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,i=Pm(n.length-e,0),a=Array(i);++r<i;)a[r]=n[e+r];r=-1;for(var s=Array(e+1);++r<e;)s[r]=n[r];return s[e]=a,Sm(t,this,s)}}((function(t,e){return null==t?{}:function(t,e){return function(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var s=e[r],o=t[s];n(o,s)&&(a[s]=o)}return a}(t=Object(t),e,(function(e,n){return n in t}))}(t,function(t,e){for(var n=-1,r=t?t.length:0,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}(Rm(e,1),Dm))})),Fm=Nm;const zm=r.forwardRef((({makeDefault:t,camera:e,regress:n,domElement:i,enableDamping:a=!0,onChange:s,onStart:o,onEnd:l,...c},u)=>{const h=ld((t=>t.invalidate)),d=ld((t=>t.camera)),f=ld((t=>t.gl)),p=ld((t=>t.events)),m=ld((t=>t.set)),g=ld((t=>t.get)),y=ld((t=>t.performance)),v=e||d,b=i||p.connected||f.domElement,x=r.useMemo((()=>new Vf(v)),[v]);return cd((()=>{x.enabled&&x.update()}),-1),r.useEffect((()=>(x.connect(b),()=>{x.dispose()})),[b,n,x,h]),r.useEffect((()=>{const t=t=>{h(),n&&y.regress(),s&&s(t)};return x.addEventListener("change",t),o&&x.addEventListener("start",o),l&&x.addEventListener("end",l),()=>{o&&x.removeEventListener("start",o),l&&x.removeEventListener("end",l),x.removeEventListener("change",t)}}),[s,o,l,x,h]),r.useEffect((()=>{if(t){const t=g().controls;return m({controls:x}),()=>m({controls:t})}}),[t,x]),Sh("primitive",{ref:u,object:x,enableDamping:a,...c})}));const Um=function(t){const e=t+"Geometry";return r.forwardRef((({args:t,children:n,...r},i)=>Eh("mesh",{ref:i,...r,children:[Sh(e,{attach:"geometry",args:t}),n]})))}("circle"),Gm=t=>{let e;const n=new Set,r=(t,r)=>{const i="function"==typeof t?t(e):t;if(i!==e){const t=e;e=(null!=r?r:"object"!=typeof i)?i:Object.assign({},e,i),n.forEach((n=>n(e,t)))}},i=()=>e,a={setState:r,getState:i,subscribe:t=>(n.add(t),()=>n.delete(t)),destroy:()=>n.clear()};return e=t(r,i,a),a};var Hm,jm={exports:{}},Vm={},Wm={exports:{}},$m={};var Ym,qm;function Xm(){return Ym||(Ym=1,function(t){t.exports=function(){if(Hm)return $m;Hm=1;var t=r,e="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},n=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!e(t,r)}catch{return!0}}var l=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?function(t,e){return e()}:function(t,e){var r=e(),l=n({inst:{value:r,getSnapshot:e}}),c=l[0].inst,u=l[1];return a((function(){c.value=r,c.getSnapshot=e,o(c)&&u({inst:c})}),[t,r,e]),i((function(){return o(c)&&u({inst:c}),t((function(){o(c)&&u({inst:c})}))}),[t]),s(r),r};return $m.useSyncExternalStore=void 0!==t.useSyncExternalStore?t.useSyncExternalStore:l,$m}()}(Wm)),Wm.exports}!function(t){t.exports=function(){if(qm)return Vm;qm=1;var t=r,e=Xm(),n="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,l=t.useDebugValue;return Vm.useSyncExternalStoreWithSelector=function(t,e,r,c,u){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=o((function(){function t(t){if(!s){if(s=!0,i=t,t=c(t),void 0!==u&&d.hasValue){var e=d.value;if(u(e,t))return a=e}return a=t}if(e=a,n(i,t))return e;var r=c(t);return void 0!==u&&u(e,r)?e:(i=t,a=r)}var i,a,s=!1,o=void 0===r?null:r;return[function(){return t(e())},null===o?void 0:function(){return t(o())}]}),[e,r,c,u]);var f=i(t,h[0],h[1]);return s((function(){d.hasValue=!0,d.value=f}),[f]),l(f),f},Vm}()}(jm);const Jm=nh(jm.exports),{useSyncExternalStoreWithSelector:Zm}=Jm;function Km(t,e=t.getState,n){const i=Zm(t.subscribe,t.getState,t.getServerState||t.getState,e,n);return(0,r.useDebugValue)(i),i}const Qm=t=>{const e="function"==typeof t?(t=>t?Gm(t):Gm)(t):t,n=(t,n)=>Km(e,t,n);return Object.assign(n,e),n};var tg=t=>t?Qm(t):Qm;const eg=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=(t,e,n)=>{let a=t;if(e){const i=(null==n?void 0:n.equalityFn)||Object.is;let s=t(r.getState());a=n=>{const r=t(n);if(!i(s,r)){const t=s;e(s=r,t)}},null!=n&&n.fireImmediately&&e(s,s)}return i(a)},t(e,n,r)};function ng(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function rg(t){return!!t&&!!t[Hg]}function ig(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===jg}(t)||Array.isArray(t)||!!t[Gg]||!!t.constructor[Gg]||cg(t)||ug(t))}function ag(t,e,n){void 0===n&&(n=!1),0===sg(t)?(n?Object.keys:Vg)(t).forEach((function(r){n&&"symbol"==typeof r||e(r,t[r],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function sg(t){var e=t[Hg];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:cg(t)?2:ug(t)?3:0}function og(t,e){return 2===sg(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function lg(t,e,n){var r=sg(t);2===r?t.set(e,n):3===r?(t.delete(e),t.add(n)):t[e]=n}function cg(t){return Ng&&t instanceof Map}function ug(t){return Fg&&t instanceof Set}function hg(t){return t.o||t.t}function dg(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Wg(t);delete e[Hg];for(var n=Vg(e),r=0;r<n.length;r++){var i=n[r],a=e[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(e[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function fg(t,e){return void 0===e&&(e=!1),mg(t)||rg(t)||!ig(t)||(sg(t)>1&&(t.set=t.add=t.clear=t.delete=pg),Object.freeze(t),e&&ag(t,(function(t,e){return fg(e,!0)}),!0)),t}function pg(){ng(2)}function mg(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function gg(t){var e=$g[t];return e||ng(18,t),e}function yg(){return Bg}function vg(t,e){e&&(gg("Patches"),t.u=[],t.s=[],t.v=e)}function bg(t){xg(t),t.p.forEach(wg),t.p=null}function xg(t){t===Bg&&(Bg=t.l)}function _g(t){return Bg={p:[],l:Bg,h:t,m:!0,_:0}}function wg(t){var e=t[Hg];0===e.i||1===e.i?e.j():e.O=!0}function Sg(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.g||gg("ES5").S(e,t,r),r?(n[Hg].P&&(bg(e),ng(4)),ig(t)&&(t=Eg(e,t),e.l||Cg(e,t)),e.u&&gg("Patches").M(n[Hg].t,t,e.u,e.s)):t=Eg(e,n,[]),bg(e),e.u&&e.v(e.u,e.s),t!==Ug?t:void 0}function Eg(t,e,n){if(mg(e))return e;var r=e[Hg];if(!r)return ag(e,(function(i,a){return Mg(t,r,e,i,a,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return Cg(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=dg(r.k):r.o;ag(3===r.i?new Set(i):i,(function(e,a){return Mg(t,r,i,e,a,n)})),Cg(t,i,!1),n&&t.u&&gg("Patches").R(r,n,t.u,t.s)}return r.o}function Mg(t,e,n,r,i,a){if(rg(i)){var s=Eg(t,i,a&&e&&3!==e.i&&!og(e.D,r)?a.concat(r):void 0);if(lg(n,r,s),!rg(s))return;t.m=!1}if(ig(i)&&!mg(i)){if(!t.h.F&&t._<1)return;Eg(t,i),e&&e.A.l||Cg(t,i)}}function Cg(t,e,n){void 0===n&&(n=!1),t.h.F&&t.m&&fg(e,n)}function Tg(t,e){var n=t[Hg];return(n?hg(n):t)[e]}function Ag(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function kg(t){t.P||(t.P=!0,t.l&&kg(t.l))}function Lg(t){t.o||(t.o=dg(t.t))}function Pg(t,e,n){var r=cg(e)?gg("MapSet").N(e,n):ug(e)?gg("MapSet").T(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:yg(),P:!1,I:!1,D:{},l:e,t:t,k:null,o:null,j:null,C:!1},i=r,a=Yg;n&&(i=[r],a=qg);var s=Proxy.revocable(i,a),o=s.revoke,l=s.proxy;return r.k=l,r.j=o,l}(e,n):gg("ES5").J(e,n);return(n?n.A:yg()).p.push(r),r}function Rg(t){return rg(t)||ng(22,t),function t(e){if(!ig(e))return e;var n,r=e[Hg],i=sg(e);if(r){if(!r.P&&(r.i<4||!gg("ES5").K(r)))return r.t;r.I=!0,n=Ig(e,i),r.I=!1}else n=Ig(e,i);return ag(n,(function(e,i){r&&function(t,e){return 2===sg(t)?t.get(e):t[e]}(r.t,e)===i||lg(n,e,t(i))})),3===i?new Set(n):n}(t)}function Ig(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return dg(t)}var Dg,Bg,Og=typeof Symbol<"u"&&"symbol"==typeof Symbol("x"),Ng=typeof Map<"u",Fg=typeof Set<"u",zg=typeof Proxy<"u"&&void 0!==Proxy.revocable&&typeof Reflect<"u",Ug=Og?Symbol.for("immer-nothing"):((Dg={})["immer-nothing"]=!0,Dg),Gg=Og?Symbol.for("immer-draftable"):"__$immer_draftable",Hg=Og?Symbol.for("immer-state"):"__$immer_state",jg=""+Object.prototype.constructor,Vg=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Wg=Object.getOwnPropertyDescriptors||function(t){var e={};return Vg(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},$g={},Yg={get:function(t,e){if(e===Hg)return t;var n=hg(t);if(!og(n,e))return function(t,e,n){var r,i=Ag(e,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(t.k):void 0}(t,n,e);var r=n[e];return t.I||!ig(r)?r:r===Tg(t.t,e)?(Lg(t),t.o[e]=Pg(t.A.h,r,t)):r},has:function(t,e){return e in hg(t)},ownKeys:function(t){return Reflect.ownKeys(hg(t))},set:function(t,e,n){var r=Ag(hg(t),e);if(null!=r&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=Tg(hg(t),e),a=null==i?void 0:i[Hg];if(a&&a.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}(n,i)&&(void 0!==n||og(t.t,e)))return!0;Lg(t),kg(t)}return t.o[e]===n&&"number"!=typeof n&&(void 0!==n||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==Tg(t.t,e)||e in t.t?(t.D[e]=!1,Lg(t),kg(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=hg(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:r.enumerable,value:n[e]}},defineProperty:function(){ng(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){ng(12)}},qg={};ag(Yg,(function(t,e){qg[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),qg.deleteProperty=function(t,e){return qg.set.call(this,t,e,void 0)},qg.set=function(t,e,n){return Yg.set.call(this,t[0],e,n,t[0])};var Xg=function(){function t(t){var e=this;this.g=zg,this.F=!0,this.produce=function(t,n,r){if("function"==typeof t&&"function"!=typeof n){var i=n;n=t;var a=e;return function(t){var e=this;void 0===t&&(t=i);for(var r=arguments.length,s=Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return a.produce(t,(function(t){var r;return(r=n).call.apply(r,[e,t].concat(s))}))}}var s;if("function"!=typeof n&&ng(6),void 0!==r&&"function"!=typeof r&&ng(7),ig(t)){var o=_g(e),l=Pg(e,t,void 0),c=!0;try{s=n(l),c=!1}finally{c?bg(o):xg(o)}return typeof Promise<"u"&&s instanceof Promise?s.then((function(t){return vg(o,r),Sg(t,o)}),(function(t){throw bg(o),t})):(vg(o,r),Sg(s,o))}if(!t||"object"!=typeof t){if(void 0===(s=n(t))&&(s=t),s===Ug&&(s=void 0),e.F&&fg(s,!0),r){var u=[],h=[];gg("Patches").M(t,s,u,h),r(u,h)}return s}ng(21,t)},this.produceWithPatches=function(t,n){if("function"==typeof t)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(i))}))};var r,i,a=e.produce(t,n,(function(t,e){r=t,i=e}));return typeof Promise<"u"&&a instanceof Promise?a.then((function(t){return[t,r,i]})):[a,r,i]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){ig(t)||ng(8),rg(t)&&(t=Rg(t));var e=_g(this),n=Pg(this,t,void 0);return n[Hg].C=!0,xg(e),n},e.finishDraft=function(t,e){var n=(t&&t[Hg]).A;return vg(n,e),Sg(void 0,n)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!zg&&ng(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));var i=gg("Patches").$;return rg(t)?i(t,e):this.produce(t,(function(t){return i(t,e)}))},t}(),Jg=new Xg,Zg=Jg.produce;Jg.produceWithPatches.bind(Jg),Jg.setAutoFreeze.bind(Jg),Jg.setUseProxies.bind(Jg),Jg.applyPatches.bind(Jg),Jg.createDraft.bind(Jg),Jg.finishDraft.bind(Jg);const Kg=Zg;class Qg{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&void 0!==document.hidden,!0===this._usePageVisibilityAPI&&(this._pageVisibilityHandler=ty.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return!0===this._usePageVisibilityAPI&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(t){return this._fixedDelta=1e3*t,this}setTimescale(t){return this._timescale=t,this}update(){return!0===this._useFixedDelta?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function ty(){!1===document.hidden&&this.reset()}var ey={exports:{}};!function(t,e){(function(){var n,r="Expected a function",i="__lodash_hash_undefined__",a="__lodash_placeholder__",s=16,o=32,l=64,c=128,u=256,h=1/0,d=9007199254740991,f=NaN,p=4294967295,m=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",o],["partialRight",l],["rearg",u]],g="[object Arguments]",y="[object Array]",v="[object Boolean]",b="[object Date]",x="[object Error]",_="[object Function]",w="[object GeneratorFunction]",S="[object Map]",E="[object Number]",M="[object Object]",C="[object Promise]",T="[object RegExp]",A="[object Set]",k="[object String]",L="[object Symbol]",P="[object WeakMap]",R="[object ArrayBuffer]",I="[object DataView]",D="[object Float32Array]",B="[object Float64Array]",O="[object Int8Array]",N="[object Int16Array]",F="[object Int32Array]",z="[object Uint8Array]",U="[object Uint8ClampedArray]",G="[object Uint16Array]",H="[object Uint32Array]",j=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,q=RegExp($.source),X=RegExp(Y.source),J=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tt=/^\w*$/,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nt=/[\\^$.*+?()[\]{}|]/g,rt=RegExp(nt.source),it=/^\s+/,at=/\s/,st=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ot=/\{\n\/\* \[wrapped with (.+)\] \*/,lt=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/[()=,{}\[\]\/\s]/,ht=/\\(\\)?/g,dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,pt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,yt=/^0o[0-7]+$/i,vt=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xt=/($^)/,_t=/['\n\r\u2028\u2029\\]/g,wt="\\ud800-\\udfff",St="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Et="\\u2700-\\u27bf",Mt="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",Tt="\\ufe0e\\ufe0f",At="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",kt="['\u2019]",Lt="["+wt+"]",Pt="["+At+"]",Rt="["+St+"]",It="\\d+",Dt="["+Et+"]",Bt="["+Mt+"]",Ot="[^"+wt+At+It+Et+Mt+Ct+"]",Nt="\\ud83c[\\udffb-\\udfff]",Ft="[^"+wt+"]",zt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ut="[\\ud800-\\udbff][\\udc00-\\udfff]",Gt="["+Ct+"]",Ht="\\u200d",jt="(?:"+Bt+"|"+Ot+")",Vt="(?:"+Gt+"|"+Ot+")",Wt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",$t="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Yt="(?:"+Rt+"|"+Nt+")"+"?",qt="["+Tt+"]?",Xt=qt+Yt+("(?:"+Ht+"(?:"+[Ft,zt,Ut].join("|")+")"+qt+Yt+")*"),Jt="(?:"+[Dt,zt,Ut].join("|")+")"+Xt,Zt="(?:"+[Ft+Rt+"?",Rt,zt,Ut,Lt].join("|")+")",Kt=RegExp(kt,"g"),Qt=RegExp(Rt,"g"),te=RegExp(Nt+"(?="+Nt+")|"+Zt+Xt,"g"),ee=RegExp([Gt+"?"+Bt+"+"+Wt+"(?="+[Pt,Gt,"$"].join("|")+")",Vt+"+"+$t+"(?="+[Pt,Gt+jt,"$"].join("|")+")",Gt+"?"+jt+"+"+Wt,Gt+"+"+$t,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",It,Jt].join("|"),"g"),ne=RegExp("["+Ht+wt+St+Tt+"]"),re=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ie=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ae=-1,se={};se[D]=se[B]=se[O]=se[N]=se[F]=se[z]=se[U]=se[G]=se[H]=!0,se[g]=se[y]=se[R]=se[v]=se[I]=se[b]=se[x]=se[_]=se[S]=se[E]=se[M]=se[T]=se[A]=se[k]=se[P]=!1;var oe={};oe[g]=oe[y]=oe[R]=oe[I]=oe[v]=oe[b]=oe[D]=oe[B]=oe[O]=oe[N]=oe[F]=oe[S]=oe[E]=oe[M]=oe[T]=oe[A]=oe[k]=oe[L]=oe[z]=oe[U]=oe[G]=oe[H]=!0,oe[x]=oe[_]=oe[P]=!1;var le={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ce=parseFloat,ue=parseInt,he="object"==typeof eh&&eh&&eh.Object===Object&&eh,de="object"==typeof self&&self&&self.Object===Object&&self,fe=he||de||Function("return this")(),pe=e&&!e.nodeType&&e,me=pe&&t&&!t.nodeType&&t,ge=me&&me.exports===pe,ye=ge&&he.process,ve=function(){try{return me&&me.require&&me.require("util").types||ye&&ye.binding&&ye.binding("util")}catch{}}(),be=ve&&ve.isArrayBuffer,xe=ve&&ve.isDate,_e=ve&&ve.isMap,we=ve&&ve.isRegExp,Se=ve&&ve.isSet,Ee=ve&&ve.isTypedArray;function Me(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ce(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var s=t[i];e(r,s,n(s),t)}return r}function Te(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ae(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Le(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}function Pe(t,e){return!!(null==t?0:t.length)&&Ge(t,e,0)>-1}function Re(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Ie(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function De(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Be(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function Oe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Ne(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Fe=We("length");function ze(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ue(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function Ge(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ue(t,je,n)}function He(t,e,n,r){for(var i=n-1,a=t.length;++i<a;)if(r(t[i],e))return i;return-1}function je(t){return t!=t}function Ve(t,e){var n=null==t?0:t.length;return n?qe(t,e)/n:f}function We(t){return function(e){return null==e?n:e[t]}}function $e(t){return function(e){return null==t?n:t[e]}}function Ye(t,e,n,r,i){return i(t,(function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)})),n}function qe(t,e){for(var r,i=-1,a=t.length;++i<a;){var s=e(t[i]);s!==n&&(r=r===n?s:r+s)}return r}function Xe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Je(t){return t&&t.slice(0,pn(t)+1).replace(it,"")}function Ze(t){return function(e){return t(e)}}function Ke(t,e){return Ie(e,(function(e){return t[e]}))}function Qe(t,e){return t.has(e)}function tn(t,e){for(var n=-1,r=t.length;++n<r&&Ge(e,t[n],0)>-1;);return n}function en(t,e){for(var n=t.length;n--&&Ge(e,t[n],0)>-1;);return n}function nn(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var rn=$e({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=$e({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(t){return"\\"+le[t]}function on(t){return ne.test(t)}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function cn(t,e){return function(n){return t(e(n))}}function un(t,e){for(var n=-1,r=t.length,i=0,s=[];++n<r;){var o=t[n];(o===e||o===a)&&(t[n]=a,s[i++]=n)}return s}function hn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function dn(t){return on(t)?function(t){for(var e=te.lastIndex=0;te.test(t);)++e;return e}(t):Fe(t)}function fn(t){return on(t)?function(t){return t.match(te)||[]}(t):function(t){return t.split("")}(t)}function pn(t){for(var e=t.length;e--&&at.test(t.charAt(e)););return e}var mn=$e({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gn=function t(e){var at,wt=(e=null==e?fe:gn.defaults(fe.Object(),e,gn.pick(fe,ie))).Array,St=e.Date,Et=e.Error,Mt=e.Function,Ct=e.Math,Tt=e.Object,At=e.RegExp,kt=e.String,Lt=e.TypeError,Pt=wt.prototype,Rt=Mt.prototype,It=Tt.prototype,Dt=e["__core-js_shared__"],Bt=Rt.toString,Ot=It.hasOwnProperty,Nt=0,Ft=(at=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||""))?"Symbol(src)_1."+at:"",zt=It.toString,Ut=Bt.call(Tt),Gt=fe._,Ht=At("^"+Bt.call(Ot).replace(nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jt=ge?e.Buffer:n,Vt=e.Symbol,Wt=e.Uint8Array,$t=jt?jt.allocUnsafe:n,Yt=cn(Tt.getPrototypeOf,Tt),qt=Tt.create,Xt=It.propertyIsEnumerable,Jt=Pt.splice,Zt=Vt?Vt.isConcatSpreadable:n,te=Vt?Vt.iterator:n,ne=Vt?Vt.toStringTag:n,le=function(){try{var t=da(Tt,"defineProperty");return t({},"",{}),t}catch{}}(),he=e.clearTimeout!==fe.clearTimeout&&e.clearTimeout,de=St&&St.now!==fe.Date.now&&St.now,pe=e.setTimeout!==fe.setTimeout&&e.setTimeout,me=Ct.ceil,ye=Ct.floor,ve=Tt.getOwnPropertySymbols,Fe=jt?jt.isBuffer:n,$e=e.isFinite,yn=Pt.join,vn=cn(Tt.keys,Tt),bn=Ct.max,xn=Ct.min,_n=St.now,wn=e.parseInt,Sn=Ct.random,En=Pt.reverse,Mn=da(e,"DataView"),Cn=da(e,"Map"),Tn=da(e,"Promise"),An=da(e,"Set"),kn=da(e,"WeakMap"),Ln=da(Tt,"create"),Pn=kn&&new kn,Rn={},In=za(Mn),Dn=za(Cn),Bn=za(Tn),On=za(An),Nn=za(kn),Fn=Vt?Vt.prototype:n,zn=Fn?Fn.valueOf:n,Un=Fn?Fn.toString:n;function Gn(t){if(no(t)&&!Ws(t)&&!(t instanceof Wn)){if(t instanceof Vn)return t;if(Ot.call(t,"__wrapped__"))return Ua(t)}return new Vn(t)}var Hn=function(){function t(){}return function(e){if(!eo(e))return{};if(qt)return qt(e);t.prototype=e;var r=new t;return t.prototype=n,r}}();function jn(){}function Vn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function Wn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function $n(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new qn;++e<n;)this.add(t[e])}function Jn(t){var e=this.__data__=new Yn(t);this.size=e.size}function Zn(t,e){var n=Ws(t),r=!n&&Vs(t),i=!n&&!r&&Xs(t),a=!n&&!r&&!i&&uo(t),s=n||r||i||a,o=s?Xe(t.length,kt):[],l=o.length;for(var c in t)(e||Ot.call(t,c))&&(!s||!("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ba(c,l)))&&o.push(c);return o}function Kn(t){var e=t.length;return e?t[Xr(0,e-1)]:n}function Qn(t,e){return Oa(Li(t),lr(e,0,t.length))}function tr(t){return Oa(Li(t))}function er(t,e,r){(r!==n&&!Gs(t[e],r)||r===n&&!(e in t))&&sr(t,e,r)}function nr(t,e,r){var i=t[e];(!Ot.call(t,e)||!Gs(i,r)||r===n&&!(e in t))&&sr(t,e,r)}function rr(t,e){for(var n=t.length;n--;)if(Gs(t[n][0],e))return n;return-1}function ir(t,e,n,r){return fr(t,(function(t,i,a){e(r,t,n(t),a)})),r}function ar(t,e){return t&&Pi(e,Io(e),t)}function sr(t,e,n){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function or(t,e){for(var r=-1,i=e.length,a=wt(i),s=null==t;++r<i;)a[r]=s?n:Ao(t,e[r]);return a}function lr(t,e,r){return t==t&&(r!==n&&(t=t<=r?t:r),e!==n&&(t=t>=e?t:e)),t}function cr(t,e,r,i,a,s){var o,l=1&e,c=2&e,u=4&e;if(r&&(o=a?r(t,i,a,s):r(t)),o!==n)return o;if(!eo(t))return t;var h=Ws(t);if(h){if(o=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ot.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return Li(t,o)}else{var d=ma(t),f=d==_||d==w;if(Xs(t))return Ei(t,l);if(d==M||d==g||f&&!a){if(o=c||f?{}:ya(t),!l)return c?function(t,e){return Pi(t,pa(t),e)}(t,function(t,e){return t&&Pi(e,Do(e),t)}(o,t)):function(t,e){return Pi(t,fa(t),e)}(t,ar(o,t))}else{if(!oe[d])return a?t:{};o=function(t,e,n){var r=t.constructor;switch(e){case R:return Mi(t);case v:case b:return new r(+t);case I:return function(t,e){var n=e?Mi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case D:case B:case O:case N:case F:case z:case U:case G:case H:return Ci(t,n);case S:return new r;case E:case k:return new r(t);case T:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case A:return new r;case L:return function(t){return zn?Tt(zn.call(t)):{}}(t)}}(t,d,l)}}s||(s=new Jn);var p=s.get(t);if(p)return p;s.set(t,o),oo(t)?t.forEach((function(n){o.add(cr(n,e,r,n,t,s))})):ro(t)&&t.forEach((function(n,i){o.set(i,cr(n,e,r,i,t,s))}));var m=h?n:(u?c?aa:ia:c?Do:Io)(t);return Te(m||t,(function(n,i){m&&(n=t[i=n]),nr(o,i,cr(n,e,r,i,t,s))})),o}function ur(t,e,r){var i=r.length;if(null==t)return!i;for(t=Tt(t);i--;){var a=r[i],s=e[a],o=t[a];if(o===n&&!(a in t)||!s(o))return!1}return!0}function hr(t,e,i){if("function"!=typeof t)throw new Lt(r);return Ra((function(){t.apply(n,i)}),e)}function dr(t,e,n,r){var i=-1,a=Pe,s=!0,o=t.length,l=[],c=e.length;if(!o)return l;n&&(e=Ie(e,Ze(n))),r?(a=Re,s=!1):e.length>=200&&(a=Qe,s=!1,e=new Xn(e));t:for(;++i<o;){var u=t[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,s&&h==h){for(var d=c;d--;)if(e[d]===h)continue t;l.push(u)}else a(e,h,r)||l.push(u)}return l}Gn.templateSettings={escape:J,evaluate:Z,interpolate:K,variable:"",imports:{_:Gn}},Gn.prototype=jn.prototype,Gn.prototype.constructor=Gn,Vn.prototype=Hn(jn.prototype),Vn.prototype.constructor=Vn,Wn.prototype=Hn(jn.prototype),Wn.prototype.constructor=Wn,$n.prototype.clear=function(){this.__data__=Ln?Ln(null):{},this.size=0},$n.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},$n.prototype.get=function(t){var e=this.__data__;if(Ln){var r=e[t];return r===i?n:r}return Ot.call(e,t)?e[t]:n},$n.prototype.has=function(t){var e=this.__data__;return Ln?e[t]!==n:Ot.call(e,t)},$n.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Ln&&e===n?i:e,this},Yn.prototype.clear=function(){this.__data__=[],this.size=0},Yn.prototype.delete=function(t){var e=this.__data__,n=rr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Jt.call(e,n,1),--this.size,!0)},Yn.prototype.get=function(t){var e=this.__data__,r=rr(e,t);return r<0?n:e[r][1]},Yn.prototype.has=function(t){return rr(this.__data__,t)>-1},Yn.prototype.set=function(t,e){var n=this.__data__,r=rr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new $n,map:new(Cn||Yn),string:new $n}},qn.prototype.delete=function(t){var e=ua(this,t).delete(t);return this.size-=e?1:0,e},qn.prototype.get=function(t){return ua(this,t).get(t)},qn.prototype.has=function(t){return ua(this,t).has(t)},qn.prototype.set=function(t,e){var n=ua(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(t){return this.__data__.set(t,i),this},Xn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.clear=function(){this.__data__=new Yn,this.size=0},Jn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Jn.prototype.get=function(t){return this.__data__.get(t)},Jn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Yn){var r=n.__data__;if(!Cn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(t,e),this.size=n.size,this};var fr=Di(_r),pr=Di(wr,!0);function mr(t,e){var n=!0;return fr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function gr(t,e,r){for(var i=-1,a=t.length;++i<a;){var s=t[i],o=e(s);if(null!=o&&(l===n?o==o&&!co(o):r(o,l)))var l=o,c=s}return c}function yr(t,e){var n=[];return fr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function vr(t,e,n,r,i){var a=-1,s=t.length;for(n||(n=va),i||(i=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?vr(o,e-1,n,r,i):De(i,o):r||(i[i.length]=o)}return i}var br=Bi(),xr=Bi(!0);function _r(t,e){return t&&br(t,e,Io)}function wr(t,e){return t&&xr(t,e,Io)}function Sr(t,e){return Le(e,(function(e){return Ks(t[e])}))}function Er(t,e){for(var r=0,i=(e=xi(e,t)).length;null!=t&&r<i;)t=t[Fa(e[r++])];return r&&r==i?t:n}function Mr(t,e,n){var r=e(t);return Ws(t)?r:De(r,n(t))}function Cr(t){return null==t?t===n?"[object Undefined]":"[object Null]":ne&&ne in Tt(t)?function(t){var e=Ot.call(t,ne),r=t[ne];try{t[ne]=n;var i=!0}catch{}var a=zt.call(t);return i&&(e?t[ne]=r:delete t[ne]),a}(t):function(t){return zt.call(t)}(t)}function Tr(t,e){return t>e}function Ar(t,e){return null!=t&&Ot.call(t,e)}function kr(t,e){return null!=t&&e in Tt(t)}function Lr(t,e,r){for(var i=r?Re:Pe,a=t[0].length,s=t.length,o=s,l=wt(s),c=1/0,u=[];o--;){var h=t[o];o&&e&&(h=Ie(h,Ze(e))),c=xn(h.length,c),l[o]=!r&&(e||a>=120&&h.length>=120)?new Xn(o&&h):n}h=t[0];var d=-1,f=l[0];t:for(;++d<a&&u.length<c;){var p=h[d],m=e?e(p):p;if(p=r||0!==p?p:0,!(f?Qe(f,m):i(u,m,r))){for(o=s;--o;){var g=l[o];if(!(g?Qe(g,m):i(t[o],m,r)))continue t}f&&f.push(m),u.push(p)}}return u}function Pr(t,e,r){var i=null==(t=Aa(t,e=xi(e,t)))?t:t[Fa(Za(e))];return null==i?n:Me(i,t,r)}function Rr(t){return no(t)&&Cr(t)==g}function Ir(t,e,r,i,a){return t===e||(null==t||null==e||!no(t)&&!no(e)?t!=t&&e!=e:function(t,e,r,i,a,s){var o=Ws(t),l=Ws(e),c=o?y:ma(t),u=l?y:ma(e),h=(c=c==g?M:c)==M,d=(u=u==g?M:u)==M,f=c==u;if(f&&Xs(t)){if(!Xs(e))return!1;o=!0,h=!1}if(f&&!h)return s||(s=new Jn),o||uo(t)?na(t,e,r,i,a,s):function(t,e,n,r,i,a,s){switch(n){case I:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case R:return!(t.byteLength!=e.byteLength||!a(new Wt(t),new Wt(e)));case v:case b:case E:return Gs(+t,+e);case x:return t.name==e.name&&t.message==e.message;case T:case k:return t==e+"";case S:var o=ln;case A:var l=1&r;if(o||(o=hn),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var u=na(o(t),o(e),r,i,a,s);return s.delete(t),u;case L:if(zn)return zn.call(t)==zn.call(e)}return!1}(t,e,c,r,i,a,s);if(!(1&r)){var p=h&&Ot.call(t,"__wrapped__"),m=d&&Ot.call(e,"__wrapped__");if(p||m){var _=p?t.value():t,w=m?e.value():e;return s||(s=new Jn),a(_,w,r,i,s)}}return!!f&&(s||(s=new Jn),function(t,e,r,i,a,s){var o=1&r,l=ia(t),c=l.length,u=ia(e),h=u.length;if(c!=h&&!o)return!1;for(var d=c;d--;){var f=l[d];if(!(o?f in e:Ot.call(e,f)))return!1}var p=s.get(t),m=s.get(e);if(p&&m)return p==e&&m==t;var g=!0;s.set(t,e),s.set(e,t);for(var y=o;++d<c;){var v=t[f=l[d]],b=e[f];if(i)var x=o?i(b,v,f,e,t,s):i(v,b,f,t,e,s);if(!(x===n?v===b||a(v,b,r,i,s):x)){g=!1;break}y||(y="constructor"==f)}if(g&&!y){var _=t.constructor,w=e.constructor;_!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w)&&(g=!1)}return s.delete(t),s.delete(e),g}(t,e,r,i,a,s))}(t,e,r,i,Ir,a))}function Dr(t,e,r,i){var a=r.length,s=a,o=!i;if(null==t)return!s;for(t=Tt(t);a--;){var l=r[a];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<s;){var c=(l=r[a])[0],u=t[c],h=l[1];if(o&&l[2]){if(u===n&&!(c in t))return!1}else{var d=new Jn;if(i)var f=i(u,h,c,t,e,d);if(!(f===n?Ir(h,u,3,i,d):f))return!1}}return!0}function Br(t){return!(!eo(t)||function(t){return!!Ft&&Ft in t}(t))&&(Ks(t)?Ht:gt).test(za(t))}function Or(t){return"function"==typeof t?t:null==t?al:"object"==typeof t?Ws(t)?Hr(t[0],t[1]):Gr(t):pl(t)}function Nr(t){if(!Ea(t))return vn(t);var e=[];for(var n in Tt(t))Ot.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Fr(t){if(!eo(t))return function(t){var e=[];if(null!=t)for(var n in Tt(t))e.push(n);return e}(t);var e=Ea(t),n=[];for(var r in t)"constructor"==r&&(e||!Ot.call(t,r))||n.push(r);return n}function zr(t,e){return t<e}function Ur(t,e){var n=-1,r=Ys(t)?wt(t.length):[];return fr(t,(function(t,i,a){r[++n]=e(t,i,a)})),r}function Gr(t){var e=ha(t);return 1==e.length&&e[0][2]?Ca(e[0][0],e[0][1]):function(n){return n===t||Dr(n,t,e)}}function Hr(t,e){return _a(t)&&Ma(e)?Ca(Fa(t),e):function(r){var i=Ao(r,t);return i===n&&i===e?ko(r,t):Ir(e,i,3)}}function jr(t,e,r,i,a){t!==e&&br(e,(function(s,o){if(a||(a=new Jn),eo(s))!function(t,e,r,i,a,s,o){var l=La(t,r),c=La(e,r),u=o.get(c);if(u)return void er(t,r,u);var h=s?s(l,c,r+"",t,e,o):n,d=h===n;if(d){var f=Ws(c),p=!f&&Xs(c),m=!f&&!p&&uo(c);h=c,f||p||m?Ws(l)?h=l:qs(l)?h=Li(l):p?(d=!1,h=Ei(c,!0)):m?(d=!1,h=Ci(c,!0)):h=[]:ao(c)||Vs(c)?(h=l,Vs(l)?h=bo(l):(!eo(l)||Ks(l))&&(h=ya(c))):d=!1}d&&(o.set(c,h),a(h,c,i,s,o),o.delete(c)),er(t,r,h)}(t,e,o,r,jr,i,a);else{var l=i?i(La(t,o),s,o+"",t,e,a):n;l===n&&(l=s),er(t,o,l)}}),Do)}function Vr(t,e){var r=t.length;if(r)return ba(e+=e<0?r:0,r)?t[e]:n}function Wr(t,e,n){e=e.length?Ie(e,(function(t){return Ws(t)?function(e){return Er(e,1===t.length?t[0]:t)}:t})):[al];var r=-1;return e=Ie(e,Ze(ca())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Ur(t,(function(t,n,i){return{criteria:Ie(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,s=i.length,o=n.length;++r<s;){var l=Ti(i[r],a[r]);if(l)return r>=o?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function $r(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var s=e[r],o=Er(t,s);n(o,s)&&ti(a,xi(s,t),o)}return a}function Yr(t,e,n,r){var i=r?He:Ge,a=-1,s=e.length,o=t;for(t===e&&(e=Li(e)),n&&(o=Ie(t,Ze(n)));++a<s;)for(var l=0,c=e[a],u=n?n(c):c;(l=i(o,u,l,r))>-1;)o!==t&&Jt.call(o,l,1),Jt.call(t,l,1);return t}function qr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==a){var a=i;ba(i)?Jt.call(t,i,1):di(t,i)}}return t}function Xr(t,e){return t+ye(Sn()*(e-t+1))}function Jr(t,e){var n="";if(!t||e<1||e>d)return n;do{e%2&&(n+=t),(e=ye(e/2))&&(t+=t)}while(e);return n}function Zr(t,e){return Ia(Ta(t,e,al),t+"")}function Kr(t){return Kn(Ho(t))}function Qr(t,e){var n=Ho(t);return Oa(n,lr(e,0,n.length))}function ti(t,e,r,i){if(!eo(t))return t;for(var a=-1,s=(e=xi(e,t)).length,o=s-1,l=t;null!=l&&++a<s;){var c=Fa(e[a]),u=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(a!=o){var h=l[c];(u=i?i(h,c,l):n)===n&&(u=eo(h)?h:ba(e[a+1])?[]:{})}nr(l,c,u),l=l[c]}return t}var ei=Pn?function(t,e){return Pn.set(t,e),t}:al,ni=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:nl(e),writable:!0})}:al;function ri(t){return Oa(Ho(t))}function ii(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=wt(i);++r<i;)a[r]=t[r+e];return a}function ai(t,e){var n;return fr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function si(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var a=r+i>>>1,s=t[a];null!==s&&!co(s)&&(n?s<=e:s<e)?r=a+1:i=a}return i}return oi(t,e,al,n)}function oi(t,e,r,i){var a=0,s=null==t?0:t.length;if(0===s)return 0;for(var o=(e=r(e))!=e,l=null===e,c=co(e),u=e===n;a<s;){var h=ye((a+s)/2),d=r(t[h]),f=d!==n,p=null===d,m=d==d,g=co(d);if(o)var y=i||m;else y=u?m&&(i||f):l?m&&f&&(i||!p):c?m&&f&&!p&&(i||!g):!p&&!g&&(i?d<=e:d<e);y?a=h+1:s=h}return xn(s,4294967294)}function li(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var s=t[n],o=e?e(s):s;if(!n||!Gs(o,l)){var l=o;a[i++]=0===s?0:s}}return a}function ci(t){return"number"==typeof t?t:co(t)?f:+t}function ui(t){if("string"==typeof t)return t;if(Ws(t))return Ie(t,ui)+"";if(co(t))return Un?Un.call(t):"";var e=t+"";return"0"==e&&1/t==-h?"-0":e}function hi(t,e,n){var r=-1,i=Pe,a=t.length,s=!0,o=[],l=o;if(n)s=!1,i=Re;else if(a>=200){var c=e?null:Ji(t);if(c)return hn(c);s=!1,i=Qe,l=new Xn}else l=e?[]:o;t:for(;++r<a;){var u=t[r],h=e?e(u):u;if(u=n||0!==u?u:0,s&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),o.push(u)}else i(l,h,n)||(l!==o&&l.push(h),o.push(u))}return o}function di(t,e){return null==(t=Aa(t,e=xi(e,t)))||delete t[Fa(Za(e))]}function fi(t,e,n,r){return ti(t,e,n(Er(t,e)),r)}function pi(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?ii(t,r?0:a,r?a+1:i):ii(t,r?a+1:0,r?i:a)}function mi(t,e){var n=t;return n instanceof Wn&&(n=n.value()),Be(e,(function(t,e){return e.func.apply(e.thisArg,De([t],e.args))}),n)}function gi(t,e,n){var r=t.length;if(r<2)return r?hi(t[0]):[];for(var i=-1,a=wt(r);++i<r;)for(var s=t[i],o=-1;++o<r;)o!=i&&(a[i]=dr(a[i]||s,t[o],e,n));return hi(vr(a,1),e,n)}function yi(t,e,r){for(var i=-1,a=t.length,s=e.length,o={};++i<a;){var l=i<s?e[i]:n;r(o,t[i],l)}return o}function vi(t){return qs(t)?t:[]}function bi(t){return"function"==typeof t?t:al}function xi(t,e){return Ws(t)?t:_a(t,e)?[t]:Na(xo(t))}var _i=Zr;function wi(t,e,r){var i=t.length;return r=r===n?i:r,!e&&r>=i?t:ii(t,e,r)}var Si=he||function(t){return fe.clearTimeout(t)};function Ei(t,e){if(e)return t.slice();var n=t.length,r=$t?$t(n):new t.constructor(n);return t.copy(r),r}function Mi(t){var e=new t.constructor(t.byteLength);return new Wt(e).set(new Wt(t)),e}function Ci(t,e){var n=e?Mi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ti(t,e){if(t!==e){var r=t!==n,i=null===t,a=t==t,s=co(t),o=e!==n,l=null===e,c=e==e,u=co(e);if(!l&&!u&&!s&&t>e||s&&o&&c&&!l&&!u||i&&o&&c||!r&&c||!a)return 1;if(!i&&!s&&!u&&t<e||u&&r&&a&&!i&&!s||l&&r&&a||!o&&a||!c)return-1}return 0}function Ai(t,e,n,r){for(var i=-1,a=t.length,s=n.length,o=-1,l=e.length,c=bn(a-s,0),u=wt(l+c),h=!r;++o<l;)u[o]=e[o];for(;++i<s;)(h||i<a)&&(u[n[i]]=t[i]);for(;c--;)u[o++]=t[i++];return u}function ki(t,e,n,r){for(var i=-1,a=t.length,s=-1,o=n.length,l=-1,c=e.length,u=bn(a-o,0),h=wt(u+c),d=!r;++i<u;)h[i]=t[i];for(var f=i;++l<c;)h[f+l]=e[l];for(;++s<o;)(d||i<a)&&(h[f+n[s]]=t[i++]);return h}function Li(t,e){var n=-1,r=t.length;for(e||(e=wt(r));++n<r;)e[n]=t[n];return e}function Pi(t,e,r,i){var a=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var l=e[s],c=i?i(r[l],t[l],l,r,t):n;c===n&&(c=t[l]),a?sr(r,l,c):nr(r,l,c)}return r}function Ri(t,e){return function(n,r){var i=Ws(n)?Ce:ir,a=e?e():{};return i(n,t,ca(r,2),a)}}function Ii(t){return Zr((function(e,r){var i=-1,a=r.length,s=a>1?r[a-1]:n,o=a>2?r[2]:n;for(s=t.length>3&&"function"==typeof s?(a--,s):n,o&&xa(r[0],r[1],o)&&(s=a<3?n:s,a=1),e=Tt(e);++i<a;){var l=r[i];l&&t(e,l,i,s)}return e}))}function Di(t,e){return function(n,r){if(null==n)return n;if(!Ys(n))return t(n,r);for(var i=n.length,a=e?i:-1,s=Tt(n);(e?a--:++a<i)&&!1!==r(s[a],a,s););return n}}function Bi(t){return function(e,n,r){for(var i=-1,a=Tt(e),s=r(e),o=s.length;o--;){var l=s[t?o:++i];if(!1===n(a[l],l,a))break}return e}}function Oi(t){return function(e){var r=on(e=xo(e))?fn(e):n,i=r?r[0]:e.charAt(0),a=r?wi(r,1).join(""):e.slice(1);return i[t]()+a}}function Ni(t){return function(e){return Be(Qo(Wo(e).replace(Kt,"")),t,"")}}function Fi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Hn(t.prototype),r=t.apply(n,e);return eo(r)?r:n}}function zi(t){return function(e,r,i){var a=Tt(e);if(!Ys(e)){var s=ca(r,3);e=Io(e),r=function(t){return s(a[t],t,a)}}var o=t(e,r,i);return o>-1?a[s?e[o]:o]:n}}function Ui(t){return ra((function(e){var i=e.length,a=i,s=Vn.prototype.thru;for(t&&e.reverse();a--;){var o=e[a];if("function"!=typeof o)throw new Lt(r);if(s&&!l&&"wrapper"==oa(o))var l=new Vn([],!0)}for(a=l?a:i;++a<i;){var c=oa(o=e[a]),u="wrapper"==c?sa(o):n;l=u&&wa(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[oa(u[0])].apply(l,u[3]):1==o.length&&wa(o)?l[c]():l.thru(o)}return function(){var t=arguments,n=t[0];if(l&&1==t.length&&Ws(n))return l.plant(n).value();for(var r=0,a=i?e[r].apply(this,t):n;++r<i;)a=e[r].call(this,a);return a}}))}function Gi(t,e,r,i,a,s,o,l,u,h){var d=e&c,f=1&e,p=2&e,m=24&e,g=512&e,y=p?n:Fi(t);return function n(){for(var c=arguments.length,v=wt(c),b=c;b--;)v[b]=arguments[b];if(m)var x=la(n),_=nn(v,x);if(i&&(v=Ai(v,i,a,m)),s&&(v=ki(v,s,o,m)),c-=_,m&&c<h){var w=un(v,x);return qi(t,e,Gi,n.placeholder,r,v,w,l,u,h-c)}var S=f?r:this,E=p?S[t]:t;return c=v.length,l?v=ka(v,l):g&&c>1&&v.reverse(),d&&u<c&&(v.length=u),this&&this!==fe&&this instanceof n&&(E=y||Fi(E)),E.apply(S,v)}}function Hi(t,e){return function(n,r){return function(t,e,n,r){return _r(t,(function(t,i,a){e(r,n(t),i,a)})),r}(n,t,e(r),{})}}function ji(t,e){return function(r,i){var a;if(r===n&&i===n)return e;if(r!==n&&(a=r),i!==n){if(a===n)return i;"string"==typeof r||"string"==typeof i?(r=ui(r),i=ui(i)):(r=ci(r),i=ci(i)),a=t(r,i)}return a}}function Vi(t){return ra((function(e){return e=Ie(e,Ze(ca())),Zr((function(n){var r=this;return t(e,(function(t){return Me(t,r,n)}))}))}))}function Wi(t,e){var r=(e=e===n?" ":ui(e)).length;if(r<2)return r?Jr(e,t):e;var i=Jr(e,me(t/dn(e)));return on(e)?wi(fn(i),0,t).join(""):i.slice(0,t)}function $i(t){return function(e,r,i){return i&&"number"!=typeof i&&xa(e,r,i)&&(r=i=n),e=mo(e),r===n?(r=e,e=0):r=mo(r),function(t,e,n,r){for(var i=-1,a=bn(me((e-t)/(n||1)),0),s=wt(a);a--;)s[r?a:++i]=t,t+=n;return s}(e,r,i=i===n?e<r?1:-1:mo(i),t)}}function Yi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=vo(e),n=vo(n)),t(e,n)}}function qi(t,e,r,i,a,s,c,u,h,d){var f=8&e;e|=f?o:l,4&(e&=~(f?l:o))||(e&=-4);var p=[t,e,a,f?s:n,f?c:n,f?n:s,f?n:c,u,h,d],m=r.apply(n,p);return wa(t)&&Pa(m,p),m.placeholder=i,Da(m,t,e)}function Xi(t){var e=Ct[t];return function(t,n){if(t=vo(t),(n=null==n?0:xn(go(n),292))&&$e(t)){var r=(xo(t)+"e").split("e");return+((r=(xo(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Ji=An&&1/hn(new An([,-0]))[1]==h?function(t){return new An(t)}:ul;function Zi(t){return function(e){var n=ma(e);return n==S?ln(e):n==A?function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}(e):function(t,e){return Ie(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ki(t,e,i,h,d,f,p,m){var g=2&e;if(!g&&"function"!=typeof t)throw new Lt(r);var y=h?h.length:0;if(y||(e&=-97,h=d=n),p=p===n?p:bn(go(p),0),m=m===n?m:go(m),y-=d?d.length:0,e&l){var v=h,b=d;h=d=n}var x=g?n:sa(t),_=[t,e,i,h,d,v,b,f,p,m];if(x&&function(t,e){var n=t[1],r=e[1],i=n|r,s=i<131,o=r==c&&8==n||r==c&&n==u&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!s&&!o)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var l=e[3];if(l){var h=t[3];t[3]=h?Ai(h,l,e[4]):l,t[4]=h?un(t[3],a):e[4]}l=e[5],l&&(h=t[5],t[5]=h?ki(h,l,e[6]):l,t[6]=h?un(t[5],a):e[6]),l=e[7],l&&(t[7]=l),r&c&&(t[8]=null==t[8]?e[8]:xn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(_,x),t=_[0],e=_[1],i=_[2],h=_[3],d=_[4],!(m=_[9]=_[9]===n?g?0:t.length:bn(_[9]-y,0))&&24&e&&(e&=-25),e&&1!=e)w=8==e||e==s?function(t,e,r){var i=Fi(t);return function a(){for(var s=arguments.length,o=wt(s),l=s,c=la(a);l--;)o[l]=arguments[l];var u=s<3&&o[0]!==c&&o[s-1]!==c?[]:un(o,c);return(s-=u.length)<r?qi(t,e,Gi,a.placeholder,n,o,u,n,n,r-s):Me(this&&this!==fe&&this instanceof a?i:t,this,o)}}(t,e,m):e!=o&&33!=e||d.length?Gi.apply(n,_):function(t,e,n,r){var i=1&e,a=Fi(t);return function e(){for(var s=-1,o=arguments.length,l=-1,c=r.length,u=wt(c+o),h=this&&this!==fe&&this instanceof e?a:t;++l<c;)u[l]=r[l];for(;o--;)u[l++]=arguments[++s];return Me(h,i?n:this,u)}}(t,e,i,h);else var w=function(t,e,n){var r=1&e,i=Fi(t);return function e(){return(this&&this!==fe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,i);return Da((x?ei:Pa)(w,_),t,e)}function Qi(t,e,r,i){return t===n||Gs(t,It[r])&&!Ot.call(i,r)?e:t}function ta(t,e,r,i,a,s){return eo(t)&&eo(e)&&(s.set(e,t),jr(t,e,n,ta,s),s.delete(e)),t}function ea(t){return ao(t)?n:t}function na(t,e,r,i,a,s){var o=1&r,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(t),h=s.get(e);if(u&&h)return u==e&&h==t;var d=-1,f=!0,p=2&r?new Xn:n;for(s.set(t,e),s.set(e,t);++d<l;){var m=t[d],g=e[d];if(i)var y=o?i(g,m,d,e,t,s):i(m,g,d,t,e,s);if(y!==n){if(y)continue;f=!1;break}if(p){if(!Ne(e,(function(t,e){if(!Qe(p,e)&&(m===t||a(m,t,r,i,s)))return p.push(e)}))){f=!1;break}}else if(m!==g&&!a(m,g,r,i,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function ra(t){return Ia(Ta(t,n,$a),t+"")}function ia(t){return Mr(t,Io,fa)}function aa(t){return Mr(t,Do,pa)}var sa=Pn?function(t){return Pn.get(t)}:ul;function oa(t){for(var e=t.name+"",n=Rn[e],r=Ot.call(Rn,e)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function la(t){return(Ot.call(Gn,"placeholder")?Gn:t).placeholder}function ca(){var t=Gn.iteratee||sl;return t=t===sl?Or:t,arguments.length?t(arguments[0],arguments[1]):t}function ua(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function ha(t){for(var e=Io(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ma(i)]}return e}function da(t,e){var r=function(t,e){return null==t?n:t[e]}(t,e);return Br(r)?r:n}var fa=ve?function(t){return null==t?[]:(t=Tt(t),Le(ve(t),(function(e){return Xt.call(t,e)})))}:yl,pa=ve?function(t){for(var e=[];t;)De(e,fa(t)),t=Yt(t);return e}:yl,ma=Cr;function ga(t,e,n){for(var r=-1,i=(e=xi(e,t)).length,a=!1;++r<i;){var s=Fa(e[r]);if(!(a=null!=t&&n(t,s)))break;t=t[s]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&to(i)&&ba(s,i)&&(Ws(t)||Vs(t))}function ya(t){return"function"!=typeof t.constructor||Ea(t)?{}:Hn(Yt(t))}function va(t){return Ws(t)||Vs(t)||!!(Zt&&t&&t[Zt])}function ba(t,e){var n=typeof t;return!!(e=null==e?d:e)&&("number"==n||"symbol"!=n&&vt.test(t))&&t>-1&&t%1==0&&t<e}function xa(t,e,n){if(!eo(n))return!1;var r=typeof e;return!!("number"==r?Ys(n)&&ba(e,n.length):"string"==r&&e in n)&&Gs(n[e],t)}function _a(t,e){if(Ws(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!co(t))||(tt.test(t)||!Q.test(t)||null!=e&&t in Tt(e))}function wa(t){var e=oa(t),n=Gn[e];if("function"!=typeof n||!(e in Wn.prototype))return!1;if(t===n)return!0;var r=sa(n);return!!r&&t===r[0]}(Mn&&ma(new Mn(new ArrayBuffer(1)))!=I||Cn&&ma(new Cn)!=S||Tn&&ma(Tn.resolve())!=C||An&&ma(new An)!=A||kn&&ma(new kn)!=P)&&(ma=function(t){var e=Cr(t),r=e==M?t.constructor:n,i=r?za(r):"";if(i)switch(i){case In:return I;case Dn:return S;case Bn:return C;case On:return A;case Nn:return P}return e});var Sa=Dt?Ks:vl;function Ea(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||It)}function Ma(t){return t==t&&!eo(t)}function Ca(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==n||t in Tt(r)))}}function Ta(t,e,r){return e=bn(e===n?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=bn(n.length-e,0),s=wt(a);++i<a;)s[i]=n[e+i];i=-1;for(var o=wt(e+1);++i<e;)o[i]=n[i];return o[e]=r(s),Me(t,this,o)}}function Aa(t,e){return e.length<2?t:Er(t,ii(e,0,-1))}function ka(t,e){for(var r=t.length,i=xn(e.length,r),a=Li(t);i--;){var s=e[i];t[i]=ba(s,r)?a[s]:n}return t}function La(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Pa=Ba(ei),Ra=pe||function(t,e){return fe.setTimeout(t,e)},Ia=Ba(ni);function Da(t,e,n){var r=e+"";return Ia(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(st,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Te(m,(function(n){var r="_."+n[0];e&n[1]&&!Pe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ot);return e?e[1].split(lt):[]}(r),n)))}function Ba(t){var e=0,r=0;return function(){var i=_n(),a=16-(i-r);if(r=i,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(n,arguments)}}function Oa(t,e){var r=-1,i=t.length,a=i-1;for(e=e===n?i:e;++r<e;){var s=Xr(r,a),o=t[s];t[s]=t[r],t[r]=o}return t.length=e,t}var Na=function(t){var e=Bs(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(et,(function(t,n,r,i){e.push(r?i.replace(ht,"$1"):n||t)})),e}));function Fa(t){if("string"==typeof t||co(t))return t;var e=t+"";return"0"==e&&1/t==-h?"-0":e}function za(t){if(null!=t){try{return Bt.call(t)}catch{}try{return t+""}catch{}}return""}function Ua(t){if(t instanceof Wn)return t.clone();var e=new Vn(t.__wrapped__,t.__chain__);return e.__actions__=Li(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ga=Zr((function(t,e){return qs(t)?dr(t,vr(e,1,qs,!0)):[]})),Ha=Zr((function(t,e){var r=Za(e);return qs(r)&&(r=n),qs(t)?dr(t,vr(e,1,qs,!0),ca(r,2)):[]})),ja=Zr((function(t,e){var r=Za(e);return qs(r)&&(r=n),qs(t)?dr(t,vr(e,1,qs,!0),n,r):[]}));function Va(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:go(n);return i<0&&(i=bn(r+i,0)),Ue(t,ca(e,3),i)}function Wa(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var a=i-1;return r!==n&&(a=go(r),a=r<0?bn(i+a,0):xn(a,i-1)),Ue(t,ca(e,3),a,!0)}function $a(t){return(null==t?0:t.length)?vr(t,1):[]}function Ya(t){return t&&t.length?t[0]:n}var qa=Zr((function(t){var e=Ie(t,vi);return e.length&&e[0]===t[0]?Lr(e):[]})),Xa=Zr((function(t){var e=Za(t),r=Ie(t,vi);return e===Za(r)?e=n:r.pop(),r.length&&r[0]===t[0]?Lr(r,ca(e,2)):[]})),Ja=Zr((function(t){var e=Za(t),r=Ie(t,vi);return(e="function"==typeof e?e:n)&&r.pop(),r.length&&r[0]===t[0]?Lr(r,n,e):[]}));function Za(t){var e=null==t?0:t.length;return e?t[e-1]:n}var Ka=Zr(Qa);function Qa(t,e){return t&&t.length&&e&&e.length?Yr(t,e):t}var ts=ra((function(t,e){var n=null==t?0:t.length,r=or(t,e);return qr(t,Ie(e,(function(t){return ba(t,n)?+t:t})).sort(Ti)),r}));function es(t){return null==t?t:En.call(t)}var ns=Zr((function(t){return hi(vr(t,1,qs,!0))})),rs=Zr((function(t){var e=Za(t);return qs(e)&&(e=n),hi(vr(t,1,qs,!0),ca(e,2))})),is=Zr((function(t){var e=Za(t);return e="function"==typeof e?e:n,hi(vr(t,1,qs,!0),n,e)}));function as(t){if(!t||!t.length)return[];var e=0;return t=Le(t,(function(t){if(qs(t))return e=bn(t.length,e),!0})),Xe(e,(function(e){return Ie(t,We(e))}))}function ss(t,e){if(!t||!t.length)return[];var r=as(t);return null==e?r:Ie(r,(function(t){return Me(e,n,t)}))}var os=Zr((function(t,e){return qs(t)?dr(t,e):[]})),ls=Zr((function(t){return gi(Le(t,qs))})),cs=Zr((function(t){var e=Za(t);return qs(e)&&(e=n),gi(Le(t,qs),ca(e,2))})),us=Zr((function(t){var e=Za(t);return e="function"==typeof e?e:n,gi(Le(t,qs),n,e)})),hs=Zr(as);var ds=Zr((function(t){var e=t.length,r=e>1?t[e-1]:n;return r="function"==typeof r?(t.pop(),r):n,ss(t,r)}));function fs(t){var e=Gn(t);return e.__chain__=!0,e}function ps(t,e){return e(t)}var ms=ra((function(t){var e=t.length,r=e?t[0]:0,i=this.__wrapped__,a=function(e){return or(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Wn&&ba(r)?((i=i.slice(r,+r+(e?1:0))).__actions__.push({func:ps,args:[a],thisArg:n}),new Vn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(n),t}))):this.thru(a)}));var gs=Ri((function(t,e,n){Ot.call(t,n)?++t[n]:sr(t,n,1)}));var ys=zi(Va),vs=zi(Wa);function bs(t,e){return(Ws(t)?Te:fr)(t,ca(e,3))}function xs(t,e){return(Ws(t)?Ae:pr)(t,ca(e,3))}var _s=Ri((function(t,e,n){Ot.call(t,n)?t[n].push(e):sr(t,n,[e])}));var ws=Zr((function(t,e,n){var r=-1,i="function"==typeof e,a=Ys(t)?wt(t.length):[];return fr(t,(function(t){a[++r]=i?Me(e,t,n):Pr(t,e,n)})),a})),Ss=Ri((function(t,e,n){sr(t,n,e)}));function Es(t,e){return(Ws(t)?Ie:Ur)(t,ca(e,3))}var Ms=Ri((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Cs=Zr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&xa(t,e[0],e[1])?e=[]:n>2&&xa(e[0],e[1],e[2])&&(e=[e[0]]),Wr(t,vr(e,1),[])})),Ts=de||function(){return fe.Date.now()};function As(t,e,r){return e=r?n:e,e=t&&null==e?t.length:e,Ki(t,c,n,n,n,n,e)}function ks(t,e){var i;if("function"!=typeof e)throw new Lt(r);return t=go(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=n),i}}var Ls=Zr((function(t,e,n){var r=1;if(n.length){var i=un(n,la(Ls));r|=o}return Ki(t,r,e,n,i)})),Ps=Zr((function(t,e,n){var r=3;if(n.length){var i=un(n,la(Ps));r|=o}return Ki(e,r,t,n,i)}));function Rs(t,e,i){var a,s,o,l,c,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new Lt(r);function m(e){var r=a,i=s;return a=s=n,h=e,l=t.apply(i,r)}function g(t){return h=t,c=Ra(v,e),d?m(t):l}function y(t){var r=t-u;return u===n||r>=e||r<0||f&&t-h>=o}function v(){var t=Ts();if(y(t))return b(t);c=Ra(v,function(t){var n=e-(t-u);return f?xn(n,o-(t-h)):n}(t))}function b(t){return c=n,p&&a?m(t):(a=s=n,l)}function x(){var t=Ts(),r=y(t);if(a=arguments,s=this,u=t,r){if(c===n)return g(u);if(f)return Si(c),c=Ra(v,e),m(u)}return c===n&&(c=Ra(v,e)),l}return e=vo(e)||0,eo(i)&&(d=!!i.leading,o=(f="maxWait"in i)?bn(vo(i.maxWait)||0,e):o,p="trailing"in i?!!i.trailing:p),x.cancel=function(){c!==n&&Si(c),h=0,a=u=s=c=n},x.flush=function(){return c===n?l:b(Ts())},x}var Is=Zr((function(t,e){return hr(t,1,e)})),Ds=Zr((function(t,e,n){return hr(t,vo(e)||0,n)}));function Bs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Lt(r);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(Bs.Cache||qn),n}function Os(t){if("function"!=typeof t)throw new Lt(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Bs.Cache=qn;var Ns=_i((function(t,e){var n=(e=1==e.length&&Ws(e[0])?Ie(e[0],Ze(ca())):Ie(vr(e,1),Ze(ca()))).length;return Zr((function(r){for(var i=-1,a=xn(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return Me(t,this,r)}))})),Fs=Zr((function(t,e){var r=un(e,la(Fs));return Ki(t,o,n,e,r)})),zs=Zr((function(t,e){var r=un(e,la(zs));return Ki(t,l,n,e,r)})),Us=ra((function(t,e){return Ki(t,u,n,n,n,e)}));function Gs(t,e){return t===e||t!=t&&e!=e}var Hs=Yi(Tr),js=Yi((function(t,e){return t>=e})),Vs=Rr(function(){return arguments}())?Rr:function(t){return no(t)&&Ot.call(t,"callee")&&!Xt.call(t,"callee")},Ws=wt.isArray,$s=be?Ze(be):function(t){return no(t)&&Cr(t)==R};function Ys(t){return null!=t&&to(t.length)&&!Ks(t)}function qs(t){return no(t)&&Ys(t)}var Xs=Fe||vl,Js=xe?Ze(xe):function(t){return no(t)&&Cr(t)==b};function Zs(t){if(!no(t))return!1;var e=Cr(t);return e==x||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ao(t)}function Ks(t){if(!eo(t))return!1;var e=Cr(t);return e==_||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qs(t){return"number"==typeof t&&t==go(t)}function to(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}function eo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function no(t){return null!=t&&"object"==typeof t}var ro=_e?Ze(_e):function(t){return no(t)&&ma(t)==S};function io(t){return"number"==typeof t||no(t)&&Cr(t)==E}function ao(t){if(!no(t)||Cr(t)!=M)return!1;var e=Yt(t);if(null===e)return!0;var n=Ot.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Bt.call(n)==Ut}var so=we?Ze(we):function(t){return no(t)&&Cr(t)==T};var oo=Se?Ze(Se):function(t){return no(t)&&ma(t)==A};function lo(t){return"string"==typeof t||!Ws(t)&&no(t)&&Cr(t)==k}function co(t){return"symbol"==typeof t||no(t)&&Cr(t)==L}var uo=Ee?Ze(Ee):function(t){return no(t)&&to(t.length)&&!!se[Cr(t)]};var ho=Yi(zr),fo=Yi((function(t,e){return t<=e}));function po(t){if(!t)return[];if(Ys(t))return lo(t)?fn(t):Li(t);if(te&&t[te])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[te]());var e=ma(t);return(e==S?ln:e==A?hn:Ho)(t)}function mo(t){return t?(t=vo(t))===h||t===-h?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function go(t){var e=mo(t),n=e%1;return e==e?n?e-n:e:0}function yo(t){return t?lr(go(t),0,p):0}function vo(t){if("number"==typeof t)return t;if(co(t))return f;if(eo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=eo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Je(t);var n=mt.test(t);return n||yt.test(t)?ue(t.slice(2),n?2:8):pt.test(t)?f:+t}function bo(t){return Pi(t,Do(t))}function xo(t){return null==t?"":ui(t)}var _o=Ii((function(t,e){if(Ea(e)||Ys(e))Pi(e,Io(e),t);else for(var n in e)Ot.call(e,n)&&nr(t,n,e[n])})),wo=Ii((function(t,e){Pi(e,Do(e),t)})),So=Ii((function(t,e,n,r){Pi(e,Do(e),t,r)})),Eo=Ii((function(t,e,n,r){Pi(e,Io(e),t,r)})),Mo=ra(or);var Co=Zr((function(t,e){t=Tt(t);var r=-1,i=e.length,a=i>2?e[2]:n;for(a&&xa(e[0],e[1],a)&&(i=1);++r<i;)for(var s=e[r],o=Do(s),l=-1,c=o.length;++l<c;){var u=o[l],h=t[u];(h===n||Gs(h,It[u])&&!Ot.call(t,u))&&(t[u]=s[u])}return t})),To=Zr((function(t){return t.push(n,ta),Me(Oo,n,t)}));function Ao(t,e,r){var i=null==t?n:Er(t,e);return i===n?r:i}function ko(t,e){return null!=t&&ga(t,e,kr)}var Lo=Hi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),t[e]=n}),nl(al)),Po=Hi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),Ot.call(t,e)?t[e].push(n):t[e]=[n]}),ca),Ro=Zr(Pr);function Io(t){return Ys(t)?Zn(t):Nr(t)}function Do(t){return Ys(t)?Zn(t,!0):Fr(t)}var Bo=Ii((function(t,e,n){jr(t,e,n)})),Oo=Ii((function(t,e,n,r){jr(t,e,n,r)})),No=ra((function(t,e){var n={};if(null==t)return n;var r=!1;e=Ie(e,(function(e){return e=xi(e,t),r||(r=e.length>1),e})),Pi(t,aa(t),n),r&&(n=cr(n,7,ea));for(var i=e.length;i--;)di(n,e[i]);return n}));var Fo=ra((function(t,e){return null==t?{}:function(t,e){return $r(t,e,(function(e,n){return ko(t,n)}))}(t,e)}));function zo(t,e){if(null==t)return{};var n=Ie(aa(t),(function(t){return[t]}));return e=ca(e),$r(t,n,(function(t,n){return e(t,n[0])}))}var Uo=Zi(Io),Go=Zi(Do);function Ho(t){return null==t?[]:Ke(t,Io(t))}var jo=Ni((function(t,e,n){return e=e.toLowerCase(),t+(n?Vo(e):e)}));function Vo(t){return Ko(xo(t).toLowerCase())}function Wo(t){return(t=xo(t))&&t.replace(bt,rn).replace(Qt,"")}var $o=Ni((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Yo=Ni((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),qo=Oi("toLowerCase");var Xo=Ni((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Jo=Ni((function(t,e,n){return t+(n?" ":"")+Ko(e)}));var Zo=Ni((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ko=Oi("toUpperCase");function Qo(t,e,r){return t=xo(t),(e=r?n:e)===n?function(t){return re.test(t)}(t)?function(t){return t.match(ee)||[]}(t):function(t){return t.match(ct)||[]}(t):t.match(e)||[]}var tl=Zr((function(t,e){try{return Me(t,n,e)}catch(r){return Zs(r)?r:new Et(r)}})),el=ra((function(t,e){return Te(e,(function(e){e=Fa(e),sr(t,e,Ls(t[e],t))})),t}));function nl(t){return function(){return t}}var rl=Ui(),il=Ui(!0);function al(t){return t}function sl(t){return Or("function"==typeof t?t:cr(t,1))}var ol=Zr((function(t,e){return function(n){return Pr(n,t,e)}})),ll=Zr((function(t,e){return function(n){return Pr(t,n,e)}}));function cl(t,e,n){var r=Io(e),i=Sr(e,r);null==n&&(!eo(e)||!i.length&&r.length)&&(n=e,e=t,t=this,i=Sr(e,Io(e)));var a=!(eo(n)&&"chain"in n&&!n.chain),s=Ks(t);return Te(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),i=n.__actions__=Li(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,De([this.value()],arguments))})})),t}function ul(){}var hl=Vi(Ie),dl=Vi(ke),fl=Vi(Ne);function pl(t){return _a(t)?We(Fa(t)):function(t){return function(e){return Er(e,t)}}(t)}var ml=$i(),gl=$i(!0);function yl(){return[]}function vl(){return!1}var bl=ji((function(t,e){return t+e}),0),xl=Xi("ceil"),_l=ji((function(t,e){return t/e}),1),wl=Xi("floor");var Sl=ji((function(t,e){return t*e}),1),El=Xi("round"),Ml=ji((function(t,e){return t-e}),0);return Gn.after=function(t,e){if("function"!=typeof e)throw new Lt(r);return t=go(t),function(){if(--t<1)return e.apply(this,arguments)}},Gn.ary=As,Gn.assign=_o,Gn.assignIn=wo,Gn.assignInWith=So,Gn.assignWith=Eo,Gn.at=Mo,Gn.before=ks,Gn.bind=Ls,Gn.bindAll=el,Gn.bindKey=Ps,Gn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ws(t)?t:[t]},Gn.chain=fs,Gn.chunk=function(t,e,r){e=(r?xa(t,e,r):e===n)?1:bn(go(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,s=0,o=wt(me(i/e));a<i;)o[s++]=ii(t,a,a+=e);return o},Gn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var a=t[e];a&&(i[r++]=a)}return i},Gn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=wt(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return De(Ws(n)?Li(n):[n],vr(e,1))},Gn.cond=function(t){var e=null==t?0:t.length,n=ca();return t=e?Ie(t,(function(t){if("function"!=typeof t[1])throw new Lt(r);return[n(t[0]),t[1]]})):[],Zr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Me(i[0],this,n))return Me(i[1],this,n)}}))},Gn.conforms=function(t){return function(t){var e=Io(t);return function(n){return ur(n,t,e)}}(cr(t,1))},Gn.constant=nl,Gn.countBy=gs,Gn.create=function(t,e){var n=Hn(t);return null==e?n:ar(n,e)},Gn.curry=function t(e,r,i){var a=Ki(e,8,n,n,n,n,n,r=i?n:r);return a.placeholder=t.placeholder,a},Gn.curryRight=function t(e,r,i){var a=Ki(e,s,n,n,n,n,n,r=i?n:r);return a.placeholder=t.placeholder,a},Gn.debounce=Rs,Gn.defaults=Co,Gn.defaultsDeep=To,Gn.defer=Is,Gn.delay=Ds,Gn.difference=Ga,Gn.differenceBy=Ha,Gn.differenceWith=ja,Gn.drop=function(t,e,r){var i=null==t?0:t.length;return i?ii(t,(e=r||e===n?1:go(e))<0?0:e,i):[]},Gn.dropRight=function(t,e,r){var i=null==t?0:t.length;return i?ii(t,0,(e=i-(e=r||e===n?1:go(e)))<0?0:e):[]},Gn.dropRightWhile=function(t,e){return t&&t.length?pi(t,ca(e,3),!0,!0):[]},Gn.dropWhile=function(t,e){return t&&t.length?pi(t,ca(e,3),!0):[]},Gn.fill=function(t,e,r,i){var a=null==t?0:t.length;return a?(r&&"number"!=typeof r&&xa(t,e,r)&&(r=0,i=a),function(t,e,r,i){var a=t.length;for((r=go(r))<0&&(r=-r>a?0:a+r),(i=i===n||i>a?a:go(i))<0&&(i+=a),i=r>i?0:yo(i);r<i;)t[r++]=e;return t}(t,e,r,i)):[]},Gn.filter=function(t,e){return(Ws(t)?Le:yr)(t,ca(e,3))},Gn.flatMap=function(t,e){return vr(Es(t,e),1)},Gn.flatMapDeep=function(t,e){return vr(Es(t,e),h)},Gn.flatMapDepth=function(t,e,r){return r=r===n?1:go(r),vr(Es(t,e),r)},Gn.flatten=$a,Gn.flattenDeep=function(t){return(null==t?0:t.length)?vr(t,h):[]},Gn.flattenDepth=function(t,e){return(null==t?0:t.length)?vr(t,e=e===n?1:go(e)):[]},Gn.flip=function(t){return Ki(t,512)},Gn.flow=rl,Gn.flowRight=il,Gn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Gn.functions=function(t){return null==t?[]:Sr(t,Io(t))},Gn.functionsIn=function(t){return null==t?[]:Sr(t,Do(t))},Gn.groupBy=_s,Gn.initial=function(t){return(null==t?0:t.length)?ii(t,0,-1):[]},Gn.intersection=qa,Gn.intersectionBy=Xa,Gn.intersectionWith=Ja,Gn.invert=Lo,Gn.invertBy=Po,Gn.invokeMap=ws,Gn.iteratee=sl,Gn.keyBy=Ss,Gn.keys=Io,Gn.keysIn=Do,Gn.map=Es,Gn.mapKeys=function(t,e){var n={};return e=ca(e,3),_r(t,(function(t,r,i){sr(n,e(t,r,i),t)})),n},Gn.mapValues=function(t,e){var n={};return e=ca(e,3),_r(t,(function(t,r,i){sr(n,r,e(t,r,i))})),n},Gn.matches=function(t){return Gr(cr(t,1))},Gn.matchesProperty=function(t,e){return Hr(t,cr(e,1))},Gn.memoize=Bs,Gn.merge=Bo,Gn.mergeWith=Oo,Gn.method=ol,Gn.methodOf=ll,Gn.mixin=cl,Gn.negate=Os,Gn.nthArg=function(t){return t=go(t),Zr((function(e){return Vr(e,t)}))},Gn.omit=No,Gn.omitBy=function(t,e){return zo(t,Os(ca(e)))},Gn.once=function(t){return ks(2,t)},Gn.orderBy=function(t,e,r,i){return null==t?[]:(Ws(e)||(e=null==e?[]:[e]),Ws(r=i?n:r)||(r=null==r?[]:[r]),Wr(t,e,r))},Gn.over=hl,Gn.overArgs=Ns,Gn.overEvery=dl,Gn.overSome=fl,Gn.partial=Fs,Gn.partialRight=zs,Gn.partition=Ms,Gn.pick=Fo,Gn.pickBy=zo,Gn.property=pl,Gn.propertyOf=function(t){return function(e){return null==t?n:Er(t,e)}},Gn.pull=Ka,Gn.pullAll=Qa,Gn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Yr(t,e,ca(n,2)):t},Gn.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Yr(t,e,n,r):t},Gn.pullAt=ts,Gn.range=ml,Gn.rangeRight=gl,Gn.rearg=Us,Gn.reject=function(t,e){return(Ws(t)?Le:yr)(t,Os(ca(e,3)))},Gn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],a=t.length;for(e=ca(e,3);++r<a;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return qr(t,i),n},Gn.rest=function(t,e){if("function"!=typeof t)throw new Lt(r);return Zr(t,e=e===n?e:go(e))},Gn.reverse=es,Gn.sampleSize=function(t,e,r){return e=(r?xa(t,e,r):e===n)?1:go(e),(Ws(t)?Qn:Qr)(t,e)},Gn.set=function(t,e,n){return null==t?t:ti(t,e,n)},Gn.setWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:ti(t,e,r,i)},Gn.shuffle=function(t){return(Ws(t)?tr:ri)(t)},Gn.slice=function(t,e,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&xa(t,e,r)?(e=0,r=i):(e=null==e?0:go(e),r=r===n?i:go(r)),ii(t,e,r)):[]},Gn.sortBy=Cs,Gn.sortedUniq=function(t){return t&&t.length?li(t):[]},Gn.sortedUniqBy=function(t,e){return t&&t.length?li(t,ca(e,2)):[]},Gn.split=function(t,e,r){return r&&"number"!=typeof r&&xa(t,e,r)&&(e=r=n),(r=r===n?p:r>>>0)?(t=xo(t))&&("string"==typeof e||null!=e&&!so(e))&&(!(e=ui(e))&&on(t))?wi(fn(t),0,r):t.split(e,r):[]},Gn.spread=function(t,e){if("function"!=typeof t)throw new Lt(r);return e=null==e?0:bn(go(e),0),Zr((function(n){var r=n[e],i=wi(n,0,e);return r&&De(i,r),Me(t,this,i)}))},Gn.tail=function(t){var e=null==t?0:t.length;return e?ii(t,1,e):[]},Gn.take=function(t,e,r){return t&&t.length?ii(t,0,(e=r||e===n?1:go(e))<0?0:e):[]},Gn.takeRight=function(t,e,r){var i=null==t?0:t.length;return i?ii(t,(e=i-(e=r||e===n?1:go(e)))<0?0:e,i):[]},Gn.takeRightWhile=function(t,e){return t&&t.length?pi(t,ca(e,3),!1,!0):[]},Gn.takeWhile=function(t,e){return t&&t.length?pi(t,ca(e,3)):[]},Gn.tap=function(t,e){return e(t),t},Gn.throttle=function(t,e,n){var i=!0,a=!0;if("function"!=typeof t)throw new Lt(r);return eo(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),Rs(t,e,{leading:i,maxWait:e,trailing:a})},Gn.thru=ps,Gn.toArray=po,Gn.toPairs=Uo,Gn.toPairsIn=Go,Gn.toPath=function(t){return Ws(t)?Ie(t,Fa):co(t)?[t]:Li(Na(xo(t)))},Gn.toPlainObject=bo,Gn.transform=function(t,e,n){var r=Ws(t),i=r||Xs(t)||uo(t);if(e=ca(e,4),null==n){var a=t&&t.constructor;n=i?r?new a:[]:eo(t)&&Ks(a)?Hn(Yt(t)):{}}return(i?Te:_r)(t,(function(t,r,i){return e(n,t,r,i)})),n},Gn.unary=function(t){return As(t,1)},Gn.union=ns,Gn.unionBy=rs,Gn.unionWith=is,Gn.uniq=function(t){return t&&t.length?hi(t):[]},Gn.uniqBy=function(t,e){return t&&t.length?hi(t,ca(e,2)):[]},Gn.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?hi(t,n,e):[]},Gn.unset=function(t,e){return null==t||di(t,e)},Gn.unzip=as,Gn.unzipWith=ss,Gn.update=function(t,e,n){return null==t?t:fi(t,e,bi(n))},Gn.updateWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:fi(t,e,bi(r),i)},Gn.values=Ho,Gn.valuesIn=function(t){return null==t?[]:Ke(t,Do(t))},Gn.without=os,Gn.words=Qo,Gn.wrap=function(t,e){return Fs(bi(e),t)},Gn.xor=ls,Gn.xorBy=cs,Gn.xorWith=us,Gn.zip=hs,Gn.zipObject=function(t,e){return yi(t||[],e||[],nr)},Gn.zipObjectDeep=function(t,e){return yi(t||[],e||[],ti)},Gn.zipWith=ds,Gn.entries=Uo,Gn.entriesIn=Go,Gn.extend=wo,Gn.extendWith=So,cl(Gn,Gn),Gn.add=bl,Gn.attempt=tl,Gn.camelCase=jo,Gn.capitalize=Vo,Gn.ceil=xl,Gn.clamp=function(t,e,r){return r===n&&(r=e,e=n),r!==n&&(r=(r=vo(r))==r?r:0),e!==n&&(e=(e=vo(e))==e?e:0),lr(vo(t),e,r)},Gn.clone=function(t){return cr(t,4)},Gn.cloneDeep=function(t){return cr(t,5)},Gn.cloneDeepWith=function(t,e){return cr(t,5,e="function"==typeof e?e:n)},Gn.cloneWith=function(t,e){return cr(t,4,e="function"==typeof e?e:n)},Gn.conformsTo=function(t,e){return null==e||ur(t,e,Io(e))},Gn.deburr=Wo,Gn.defaultTo=function(t,e){return null==t||t!=t?e:t},Gn.divide=_l,Gn.endsWith=function(t,e,r){t=xo(t),e=ui(e);var i=t.length,a=r=r===n?i:lr(go(r),0,i);return(r-=e.length)>=0&&t.slice(r,a)==e},Gn.eq=Gs,Gn.escape=function(t){return(t=xo(t))&&X.test(t)?t.replace(Y,an):t},Gn.escapeRegExp=function(t){return(t=xo(t))&&rt.test(t)?t.replace(nt,"\\$&"):t},Gn.every=function(t,e,r){var i=Ws(t)?ke:mr;return r&&xa(t,e,r)&&(e=n),i(t,ca(e,3))},Gn.find=ys,Gn.findIndex=Va,Gn.findKey=function(t,e){return ze(t,ca(e,3),_r)},Gn.findLast=vs,Gn.findLastIndex=Wa,Gn.findLastKey=function(t,e){return ze(t,ca(e,3),wr)},Gn.floor=wl,Gn.forEach=bs,Gn.forEachRight=xs,Gn.forIn=function(t,e){return null==t?t:br(t,ca(e,3),Do)},Gn.forInRight=function(t,e){return null==t?t:xr(t,ca(e,3),Do)},Gn.forOwn=function(t,e){return t&&_r(t,ca(e,3))},Gn.forOwnRight=function(t,e){return t&&wr(t,ca(e,3))},Gn.get=Ao,Gn.gt=Hs,Gn.gte=js,Gn.has=function(t,e){return null!=t&&ga(t,e,Ar)},Gn.hasIn=ko,Gn.head=Ya,Gn.identity=al,Gn.includes=function(t,e,n,r){t=Ys(t)?t:Ho(t),n=n&&!r?go(n):0;var i=t.length;return n<0&&(n=bn(i+n,0)),lo(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ge(t,e,n)>-1},Gn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:go(n);return i<0&&(i=bn(r+i,0)),Ge(t,e,i)},Gn.inRange=function(t,e,r){return e=mo(e),r===n?(r=e,e=0):r=mo(r),function(t,e,n){return t>=xn(e,n)&&t<bn(e,n)}(t=vo(t),e,r)},Gn.invoke=Ro,Gn.isArguments=Vs,Gn.isArray=Ws,Gn.isArrayBuffer=$s,Gn.isArrayLike=Ys,Gn.isArrayLikeObject=qs,Gn.isBoolean=function(t){return!0===t||!1===t||no(t)&&Cr(t)==v},Gn.isBuffer=Xs,Gn.isDate=Js,Gn.isElement=function(t){return no(t)&&1===t.nodeType&&!ao(t)},Gn.isEmpty=function(t){if(null==t)return!0;if(Ys(t)&&(Ws(t)||"string"==typeof t||"function"==typeof t.splice||Xs(t)||uo(t)||Vs(t)))return!t.length;var e=ma(t);if(e==S||e==A)return!t.size;if(Ea(t))return!Nr(t).length;for(var n in t)if(Ot.call(t,n))return!1;return!0},Gn.isEqual=function(t,e){return Ir(t,e)},Gn.isEqualWith=function(t,e,r){var i=(r="function"==typeof r?r:n)?r(t,e):n;return i===n?Ir(t,e,n,r):!!i},Gn.isError=Zs,Gn.isFinite=function(t){return"number"==typeof t&&$e(t)},Gn.isFunction=Ks,Gn.isInteger=Qs,Gn.isLength=to,Gn.isMap=ro,Gn.isMatch=function(t,e){return t===e||Dr(t,e,ha(e))},Gn.isMatchWith=function(t,e,r){return r="function"==typeof r?r:n,Dr(t,e,ha(e),r)},Gn.isNaN=function(t){return io(t)&&t!=+t},Gn.isNative=function(t){if(Sa(t))throw new Et("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Br(t)},Gn.isNil=function(t){return null==t},Gn.isNull=function(t){return null===t},Gn.isNumber=io,Gn.isObject=eo,Gn.isObjectLike=no,Gn.isPlainObject=ao,Gn.isRegExp=so,Gn.isSafeInteger=function(t){return Qs(t)&&t>=-d&&t<=d},Gn.isSet=oo,Gn.isString=lo,Gn.isSymbol=co,Gn.isTypedArray=uo,Gn.isUndefined=function(t){return t===n},Gn.isWeakMap=function(t){return no(t)&&ma(t)==P},Gn.isWeakSet=function(t){return no(t)&&"[object WeakSet]"==Cr(t)},Gn.join=function(t,e){return null==t?"":yn.call(t,e)},Gn.kebabCase=$o,Gn.last=Za,Gn.lastIndexOf=function(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var a=i;return r!==n&&(a=(a=go(r))<0?bn(i+a,0):xn(a,i-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,a):Ue(t,je,a,!0)},Gn.lowerCase=Yo,Gn.lowerFirst=qo,Gn.lt=ho,Gn.lte=fo,Gn.max=function(t){return t&&t.length?gr(t,al,Tr):n},Gn.maxBy=function(t,e){return t&&t.length?gr(t,ca(e,2),Tr):n},Gn.mean=function(t){return Ve(t,al)},Gn.meanBy=function(t,e){return Ve(t,ca(e,2))},Gn.min=function(t){return t&&t.length?gr(t,al,zr):n},Gn.minBy=function(t,e){return t&&t.length?gr(t,ca(e,2),zr):n},Gn.stubArray=yl,Gn.stubFalse=vl,Gn.stubObject=function(){return{}},Gn.stubString=function(){return""},Gn.stubTrue=function(){return!0},Gn.multiply=Sl,Gn.nth=function(t,e){return t&&t.length?Vr(t,go(e)):n},Gn.noConflict=function(){return fe._===this&&(fe._=Gt),this},Gn.noop=ul,Gn.now=Ts,Gn.pad=function(t,e,n){t=xo(t);var r=(e=go(e))?dn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Wi(ye(i),n)+t+Wi(me(i),n)},Gn.padEnd=function(t,e,n){t=xo(t);var r=(e=go(e))?dn(t):0;return e&&r<e?t+Wi(e-r,n):t},Gn.padStart=function(t,e,n){t=xo(t);var r=(e=go(e))?dn(t):0;return e&&r<e?Wi(e-r,n)+t:t},Gn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),wn(xo(t).replace(it,""),e||0)},Gn.random=function(t,e,r){if(r&&"boolean"!=typeof r&&xa(t,e,r)&&(e=r=n),r===n&&("boolean"==typeof e?(r=e,e=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&e===n?(t=0,e=1):(t=mo(t),e===n?(e=t,t=0):e=mo(e)),t>e){var i=t;t=e,e=i}if(r||t%1||e%1){var a=Sn();return xn(t+a*(e-t+ce("1e-"+((a+"").length-1))),e)}return Xr(t,e)},Gn.reduce=function(t,e,n){var r=Ws(t)?Be:Ye,i=arguments.length<3;return r(t,ca(e,4),n,i,fr)},Gn.reduceRight=function(t,e,n){var r=Ws(t)?Oe:Ye,i=arguments.length<3;return r(t,ca(e,4),n,i,pr)},Gn.repeat=function(t,e,r){return e=(r?xa(t,e,r):e===n)?1:go(e),Jr(xo(t),e)},Gn.replace=function(){var t=arguments,e=xo(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Gn.result=function(t,e,r){var i=-1,a=(e=xi(e,t)).length;for(a||(a=1,t=n);++i<a;){var s=null==t?n:t[Fa(e[i])];s===n&&(i=a,s=r),t=Ks(s)?s.call(t):s}return t},Gn.round=El,Gn.runInContext=t,Gn.sample=function(t){return(Ws(t)?Kn:Kr)(t)},Gn.size=function(t){if(null==t)return 0;if(Ys(t))return lo(t)?dn(t):t.length;var e=ma(t);return e==S||e==A?t.size:Nr(t).length},Gn.snakeCase=Xo,Gn.some=function(t,e,r){var i=Ws(t)?Ne:ai;return r&&xa(t,e,r)&&(e=n),i(t,ca(e,3))},Gn.sortedIndex=function(t,e){return si(t,e)},Gn.sortedIndexBy=function(t,e,n){return oi(t,e,ca(n,2))},Gn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=si(t,e);if(r<n&&Gs(t[r],e))return r}return-1},Gn.sortedLastIndex=function(t,e){return si(t,e,!0)},Gn.sortedLastIndexBy=function(t,e,n){return oi(t,e,ca(n,2),!0)},Gn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=si(t,e,!0)-1;if(Gs(t[n],e))return n}return-1},Gn.startCase=Jo,Gn.startsWith=function(t,e,n){return t=xo(t),n=null==n?0:lr(go(n),0,t.length),e=ui(e),t.slice(n,n+e.length)==e},Gn.subtract=Ml,Gn.sum=function(t){return t&&t.length?qe(t,al):0},Gn.sumBy=function(t,e){return t&&t.length?qe(t,ca(e,2)):0},Gn.template=function(t,e,r){var i=Gn.templateSettings;r&&xa(t,e,r)&&(e=n),t=xo(t),e=So({},e,i,Qi);var a,s,o=So({},e.imports,i.imports,Qi),l=Io(o),c=Ke(o,l),u=0,h=e.interpolate||xt,d="__p += '",f=At((e.escape||xt).source+"|"+h.source+"|"+(h===K?dt:xt).source+"|"+(e.evaluate||xt).source+"|$","g"),p="//# sourceURL="+(Ot.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ae+"]")+"\n";t.replace(f,(function(e,n,r,i,o,l){return r||(r=i),d+=t.slice(u,l).replace(_t,sn),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),o&&(s=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),d+="';\n";var m=Ot.call(e,"variable")&&e.variable;if(m){if(ut.test(m))throw new Et("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(j,""):d).replace(V,"$1").replace(W,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=tl((function(){return Mt(l,p+"return "+d).apply(n,c)}));if(g.source=d,Zs(g))throw g;return g},Gn.times=function(t,e){if((t=go(t))<1||t>d)return[];var n=p,r=xn(t,p);e=ca(e),t-=p;for(var i=Xe(r,e);++n<t;)e(n);return i},Gn.toFinite=mo,Gn.toInteger=go,Gn.toLength=yo,Gn.toLower=function(t){return xo(t).toLowerCase()},Gn.toNumber=vo,Gn.toSafeInteger=function(t){return t?lr(go(t),-d,d):0===t?t:0},Gn.toString=xo,Gn.toUpper=function(t){return xo(t).toUpperCase()},Gn.trim=function(t,e,r){if((t=xo(t))&&(r||e===n))return Je(t);if(!t||!(e=ui(e)))return t;var i=fn(t),a=fn(e);return wi(i,tn(i,a),en(i,a)+1).join("")},Gn.trimEnd=function(t,e,r){if((t=xo(t))&&(r||e===n))return t.slice(0,pn(t)+1);if(!t||!(e=ui(e)))return t;var i=fn(t);return wi(i,0,en(i,fn(e))+1).join("")},Gn.trimStart=function(t,e,r){if((t=xo(t))&&(r||e===n))return t.replace(it,"");if(!t||!(e=ui(e)))return t;var i=fn(t);return wi(i,tn(i,fn(e))).join("")},Gn.truncate=function(t,e){var r=30,i="...";if(eo(e)){var a="separator"in e?e.separator:a;r="length"in e?go(e.length):r,i="omission"in e?ui(e.omission):i}var s=(t=xo(t)).length;if(on(t)){var o=fn(t);s=o.length}if(r>=s)return t;var l=r-dn(i);if(l<1)return i;var c=o?wi(o,0,l).join(""):t.slice(0,l);if(a===n)return c+i;if(o&&(l+=c.length-l),so(a)){if(t.slice(l).search(a)){var u,h=c;for(a.global||(a=At(a.source,xo(ft.exec(a))+"g")),a.lastIndex=0;u=a.exec(h);)var d=u.index;c=c.slice(0,d===n?l:d)}}else if(t.indexOf(ui(a),l)!=l){var f=c.lastIndexOf(a);f>-1&&(c=c.slice(0,f))}return c+i},Gn.unescape=function(t){return(t=xo(t))&&q.test(t)?t.replace($,mn):t},Gn.uniqueId=function(t){var e=++Nt;return xo(t)+e},Gn.upperCase=Zo,Gn.upperFirst=Ko,Gn.each=bs,Gn.eachRight=xs,Gn.first=Ya,cl(Gn,function(){var t={};return _r(Gn,(function(e,n){Ot.call(Gn.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),Gn.VERSION="4.17.21",Te(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Gn[t].placeholder=Gn})),Te(["drop","take"],(function(t,e){Wn.prototype[t]=function(r){r=r===n?1:bn(go(r),0);var i=this.__filtered__&&!e?new Wn(this):this.clone();return i.__filtered__?i.__takeCount__=xn(r,i.__takeCount__):i.__views__.push({size:xn(r,p),type:t+(i.__dir__<0?"Right":"")}),i},Wn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Te(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Wn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ca(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Te(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Wn.prototype[t]=function(){return this[n](1).value()[0]}})),Te(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Wn.prototype[t]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(al)},Wn.prototype.find=function(t){return this.filter(t).head()},Wn.prototype.findLast=function(t){return this.reverse().find(t)},Wn.prototype.invokeMap=Zr((function(t,e){return"function"==typeof t?new Wn(this):this.map((function(n){return Pr(n,t,e)}))})),Wn.prototype.reject=function(t){return this.filter(Os(ca(t)))},Wn.prototype.slice=function(t,e){t=go(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Wn(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==n&&(r=(e=go(e))<0?r.dropRight(-e):r.take(e-t)),r)},Wn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Wn.prototype.toArray=function(){return this.take(p)},_r(Wn.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),a=Gn[i?"take"+("last"==e?"Right":""):e],s=i||/^find/.test(e);!a||(Gn.prototype[e]=function(){var e=this.__wrapped__,o=i?[1]:arguments,l=e instanceof Wn,c=o[0],u=l||Ws(e),h=function(t){var e=a.apply(Gn,De([t],o));return i&&d?e[0]:e};u&&r&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=s&&!d,m=l&&!f;if(!s&&u){e=m?e:new Wn(this);var g=t.apply(e,o);return g.__actions__.push({func:ps,args:[h],thisArg:n}),new Vn(g,d)}return p&&m?t.apply(this,o):(g=this.thru(h),p?i?g.value()[0]:g.value():g)})})),Te(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Pt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Gn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ws(i)?i:[],t)}return this[n]((function(n){return e.apply(Ws(n)?n:[],t)}))}})),_r(Wn.prototype,(function(t,e){var n=Gn[e];if(n){var r=n.name+"";Ot.call(Rn,r)||(Rn[r]=[]),Rn[r].push({name:e,func:n})}})),Rn[Gi(n,2).name]=[{name:"wrapper",func:n}],Wn.prototype.clone=function(){var t=new Wn(this.__wrapped__);return t.__actions__=Li(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Li(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Li(this.__views__),t},Wn.prototype.reverse=function(){if(this.__filtered__){var t=new Wn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Wn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ws(t),r=e<0,i=n?t.length:0,a=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],s=a.size;switch(a.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=xn(e,t+s);break;case"takeRight":t=bn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=a.start,o=a.end,l=o-s,c=r?o:s-1,u=this.__iteratees__,h=u.length,d=0,f=xn(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return mi(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var m=-1,g=t[c+=e];++m<h;){var y=u[m],v=y.iteratee,b=y.type,x=v(g);if(2==b)g=x;else if(!x){if(1==b)continue t;break t}}p[d++]=g}return p},Gn.prototype.at=ms,Gn.prototype.chain=function(){return fs(this)},Gn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Gn.prototype.next=function(){this.__values__===n&&(this.__values__=po(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},Gn.prototype.plant=function(t){for(var e,r=this;r instanceof jn;){var i=Ua(r);i.__index__=0,i.__values__=n,e?a.__wrapped__=i:e=i;var a=i;r=r.__wrapped__}return a.__wrapped__=t,e},Gn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Wn){var e=t;return this.__actions__.length&&(e=new Wn(this)),(e=e.reverse()).__actions__.push({func:ps,args:[es],thisArg:n}),new Vn(e,this.__chain__)}return this.thru(es)},Gn.prototype.toJSON=Gn.prototype.valueOf=Gn.prototype.value=function(){return mi(this.__wrapped__,this.__actions__)},Gn.prototype.first=Gn.prototype.head,te&&(Gn.prototype[te]=function(){return this}),Gn}();me?((me.exports=gn)._=gn,pe._=gn):fe._=gn}).call(eh)}(ey,ey.exports);const ny=ey.exports,ry=(t=>(e,n,r)=>t(((t,n)=>{const r="function"==typeof t?Kg(t):t;return e(r,n)}),n,r))(eg(((t,e)=>({clock:new Qg,items:{},tfs:{},hulls:{},lines:{},texts:{},onMove:(e,n,r,i)=>t((t=>{console.log(i),t[n][e].position={...i.position},t[n][e].rotation=i.quaternion,t[n][e].rotation.x=i.quaternion.x,t[n][e].rotation.y=i.quaternion.y,t[n][e].rotation.z=i.quaternion.z,t[n][e].rotation.w=i.quaternion.w,t[n][e].scale={...i.scale}})),onClick:(t,n,r)=>{n||console.log(`id: ${t} clicked!`),e().items[t]&&!n&&r.stopPropagation()},onPointerOver:(t,e,n)=>{},onPointerOut:(t,e,n)=>{},pause:()=>t((t=>{t.clock.setTimescale(0)})),play:e=>t((t=>{t.clock.setTimescale(e||1)})),reset:e=>t((t=>{console.log(`setting time to ${e}`),t.clock._elapsed=e?1e3*e:0})),clearItems:()=>t((t=>({items:{}}))),clearLines:()=>t((t=>({lines:{}}))),clearTfs:()=>t((t=>({tfs:{}}))),clearHulls:()=>t((t=>({hulls:{}}))),clearTexts:()=>t((t=>({texts:{}}))),setItems:e=>t((t=>({items:e}))),setLines:e=>t((t=>({lines:e}))),setTfs:e=>t((t=>({tfs:e}))),setHulls:e=>t((t=>({hulls:e}))),setTexts:e=>t((t=>({texts:e}))),removeItem:e=>t((t=>{delete t.items[e]})),removeLine:e=>t((t=>{delete t.lines[e]})),removeTf:e=>t((t=>{delete t.tfs[e]})),removeHull:e=>t((t=>{delete t.hulls[e]})),removeText:e=>t((t=>{delete t.texts[e]})),setItem:(e,n)=>t((t=>{t.items[e]=n})),setLine:(e,n)=>t((t=>{t.lines[e]=n})),setTf:(e,n)=>t((t=>{t.tfs[e]=n})),setHull:(e,n)=>t((t=>{t.hulls[e]=n})),setText:(e,n)=>t((t=>{t.texts[e]=n})),setProperty:(e,n)=>t((t=>{ny.set(t,e,n)}))})))),iy=tg(ry),ay=(0,r.createContext)(),sy=(t,e)=>Km((0,r.useContext)(ay),t,e),oy=({store:t,children:e,debug:n=!1})=>(n&&console.log("SceneProvider regenerated"),Sh(ay.Provider,{value:t||iy,children:e})),ly=r.forwardRef(((t,e)=>Sh("ambientLight",{ref:e,...t})));r.forwardRef(((t,e)=>Sh("pointLight",{ref:e,...t})));const cy=r.forwardRef(((t,e)=>Sh("directionalLight",{ref:e,...t}))),uy=(t,e,n,r)=>{var i=new Kt;return i.setRGB(t/255,e/255,n/255),new Ul(r<=.99?{color:i.getHex(),opacity:r+.1,transparent:!0,depthWrite:!0,blendSrc:l,blendDst:c,blendEquation:102,blending:1}:{color:i.getHex(),opacity:r,blending:1})},hy=ey.exports.memoize((t=>{var e=new Kt(t);return new hr({uniforms:{coeficient:{type:"f",value:1.2},power:{type:"f",value:4},glowColor:{type:"c",value:e}},vertexShader:"\n\t\tvarying vec3\tvVertexWorldPosition;\n\t\tvarying vec3\tvVertexNormal;\n\n\t\t// varying vec4\tvFragColor;\n\n\t\tvoid main(){\n\t\t\tvVertexNormal\t= normalize(normalMatrix * normal);\n\n\t\t\tvVertexWorldPosition\t= (modelMatrix * vec4(position, 1.0)).xyz;\n\n\t\t\t// set gl_Position\n\t\t\tgl_Position\t= projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t}",fragmentShader:"\n\t\tuniform vec3\tglowColor;\n\t\tuniform float\tcoeficient;\n\t\tuniform float\tpower;\n\n\t\tvarying vec3\tvVertexNormal;\n\t\tvarying vec3\tvVertexWorldPosition;\n\n\t\t// varying vec4\tvFragColor;\n\n\t\tvoid main(){\n\t\t\tvec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;\n\t\t\tvec3 viewCameraToVertex\t= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;\n\t\t\tviewCameraToVertex\t= normalize(viewCameraToVertex);\n\t\t\tfloat intensity\t\t= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);\n\t\t\tgl_FragColor\t\t= vec4(glowColor, intensity);\n\t\t}",blending:2,transparent:!0,depthWrite:!1,depthTest:!1})}));const dy=new Eu,fy=new ue,py=new ue,my=new ce,gy={X:new ue(1,0,0),Y:new ue(0,1,0),Z:new ue(0,0,1)},yy={type:"change"},vy={type:"mouseDown"},by={type:"mouseUp",mode:null},xy={type:"objectChange"};class _y extends fn{constructor(t,e){super(),void 0===e&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),e=document),this.isTransformControls=!0,this.visible=!1,this.domElement=e,this.domElement.style.touchAction="none";const n=new Hy;this._gizmo=n,this.add(n);const r=new jy;this._plane=r,this.add(r);const i=this;function a(t,e){let a=e;Object.defineProperty(i,t,{get:function(){return void 0!==a?a:e},set:function(e){a!==e&&(a=e,r[t]=e,n[t]=e,i.dispatchEvent({type:t+"-changed",value:e}),i.dispatchEvent(yy))}}),i[t]=e,r[t]=e,n[t]=e}a("camera",t),a("object",void 0),a("enabled",!0),a("axis",null),a("mode","translate"),a("translationSnap",null),a("rotationSnap",null),a("scaleSnap",null),a("space","world"),a("size",1),a("dragging",!1),a("showX",!0),a("showY",!0),a("showZ",!0);const s=new ue,o=new ue,l=new ce,c=new ce,u=new ue,h=new ce,d=new ue,f=new ue,p=new ue,m=new ue;a("worldPosition",s),a("worldPositionStart",o),a("worldQuaternion",l),a("worldQuaternionStart",c),a("cameraPosition",u),a("cameraQuaternion",h),a("pointStart",d),a("pointEnd",f),a("rotationAxis",p),a("rotationAngle",0),a("eye",m),this._offset=new ue,this._startNorm=new ue,this._endNorm=new ue,this._cameraScale=new ue,this._parentPosition=new ue,this._parentQuaternion=new ce,this._parentQuaternionInv=new ce,this._parentScale=new ue,this._worldScaleStart=new ue,this._worldQuaternionInv=new ce,this._worldScale=new ue,this._positionStart=new ue,this._quaternionStart=new ce,this._scaleStart=new ue,this._getPointer=wy.bind(this),this._onPointerDown=Ey.bind(this),this._onPointerHover=Sy.bind(this),this._onPointerMove=My.bind(this),this._onPointerUp=Cy.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye):this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(t){if(void 0===this.object||!0===this.dragging)return;dy.setFromCamera(t,this.camera);const e=Ty(this._gizmo.picker[this.mode],dy);this.axis=e?e.object.name:null}pointerDown(t){if(void 0!==this.object&&!0!==this.dragging&&0===t.button&&null!==this.axis){dy.setFromCamera(t,this.camera);const e=Ty(this._plane,dy,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,vy.mode=this.mode,this.dispatchEvent(vy)}}pointerMove(t){const e=this.axis,n=this.mode,r=this.object;let i=this.space;if("scale"===n?i="local":("E"===e||"XYZE"===e||"XYZ"===e)&&(i="world"),void 0===r||null===e||!1===this.dragging||-1!==t.button)return;dy.setFromCamera(t,this.camera);const a=Ty(this._plane,dy,!0);if(a){if(this.pointEnd.copy(a.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===i&&"XYZ"!==e&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===e.indexOf("X")&&(this._offset.x=0),-1===e.indexOf("Y")&&(this._offset.y=0),-1===e.indexOf("Z")&&(this._offset.z=0),"local"===i&&"XYZ"!==e?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===i&&(r.position.applyQuaternion(my.copy(this._quaternionStart).invert()),-1!==e.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),"world"===i&&(r.parent&&r.position.add(fy.setFromMatrixPosition(r.parent.matrixWorld)),-1!==e.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(fy.setFromMatrixPosition(r.parent.matrixWorld))));else if("scale"===n){if(-1!==e.search("XYZ")){let t=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(t*=-1),py.set(t,t,t)}else fy.copy(this.pointStart),py.copy(this.pointEnd),fy.applyQuaternion(this._worldQuaternionInv),py.applyQuaternion(this._worldQuaternionInv),py.divide(fy),-1===e.search("X")&&(py.x=1),-1===e.search("Y")&&(py.y=1),-1===e.search("Z")&&(py.z=1);r.scale.copy(this._scaleStart).multiply(py),this.scaleSnap&&(-1!==e.search("X")&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);const t=20/this.worldPosition.distanceTo(fy.setFromMatrixPosition(this.camera.matrixWorld));"E"===e?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===e?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(fy.copy(this.rotationAxis).cross(this.eye))*t):("X"===e||"Y"===e||"Z"===e)&&(this.rotationAxis.copy(gy[e]),fy.copy(gy[e]),"local"===i&&fy.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(fy.cross(this.eye).normalize())*t),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===i&&"E"!==e&&"XYZE"!==e?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(my.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(my.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(yy),this.dispatchEvent(xy)}}pointerUp(t){0===t.button&&(this.dragging&&null!==this.axis&&(by.mode=this.mode,this.dispatchEvent(by)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()}))}attach(t){return this.object=t,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){!this.enabled||this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(yy),this.dispatchEvent(xy),this.pointStart.copy(this.pointEnd))}getRaycaster(){return dy}getMode(){return this.mode}setMode(t){this.mode=t}setTranslationSnap(t){this.translationSnap=t}setRotationSnap(t){this.rotationSnap=t}setScaleSnap(t){this.scaleSnap=t}setSize(t){this.size=t}setSpace(t){this.space=t}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function wy(t){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:t.button};{const e=this.domElement.getBoundingClientRect();return{x:(t.clientX-e.left)/e.width*2-1,y:-(t.clientY-e.top)/e.height*2+1,button:t.button}}}function Sy(t){if(this.enabled)switch(t.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(t))}}function Ey(t){!this.enabled||(document.pointerLockElement||this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(t)),this.pointerDown(this._getPointer(t)))}function My(t){!this.enabled||this.pointerMove(this._getPointer(t))}function Cy(t){!this.enabled||(this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(t)))}function Ty(t,e,n){const r=e.intersectObject(t,!0);for(let i=0;i<r.length;i++)if(r[i].object.visible||n)return r[i];return!1}const Ay=new Ze,ky=new ue(0,1,0),Ly=new ue(0,0,0),Py=new Ge,Ry=new ce,Iy=new ce,Dy=new ue,By=new Ge,Oy=new ue(1,0,0),Ny=new ue(0,1,0),Fy=new ue(0,0,1),zy=new ue,Uy=new ue,Gy=new ue;class Hy extends fn{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const t=new Tn({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=new Xs({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=t.clone();n.opacity=.15;const r=e.clone();r.opacity=.5;const i=t.clone();i.color.setHex(16711680);const a=t.clone();a.color.setHex(65280);const s=t.clone();s.color.setHex(255);const o=t.clone();o.color.setHex(16711680),o.opacity=.5;const l=t.clone();l.color.setHex(65280),l.opacity=.5;const c=t.clone();c.color.setHex(255),c.opacity=.5;const u=t.clone();u.opacity=.25;const h=t.clone();h.color.setHex(16776960),h.opacity=.25,t.clone().color.setHex(16776960);const d=t.clone();d.color.setHex(7895160);const f=new Uo(0,.04,.1,12);f.translate(0,.05,0);const p=new or(.08,.08,.08);p.translate(0,.04,0);const m=new Gn;m.setAttribute("position",new In([0,0,0,1,0,0],3));const g=new Uo(.0075,.0075,.5,3);function y(t,e){const n=new Rl(t,.0075,3,64,e*Math.PI*2);return n.rotateY(Math.PI/2),n.rotateX(Math.PI/2),n}g.translate(0,.25,0);const v={X:[[new ar(f,i),[.5,0,0],[0,0,-Math.PI/2]],[new ar(f,i),[-.5,0,0],[0,0,Math.PI/2]],[new ar(g,i),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new ar(f,a),[0,.5,0]],[new ar(f,a),[0,-.5,0],[Math.PI,0,0]],[new ar(g,a)]],Z:[[new ar(f,s),[0,0,.5],[Math.PI/2,0,0]],[new ar(f,s),[0,0,-.5],[-Math.PI/2,0,0]],[new ar(g,s),null,[Math.PI/2,0,0]]],XYZ:[[new ar(new Tl(.1,0),u.clone()),[0,0,0]]],XY:[[new ar(new or(.15,.15,.01),c.clone()),[.15,.15,0]]],YZ:[[new ar(new or(.15,.15,.01),o.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ar(new or(.15,.15,.01),l.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},b={X:[[new ar(new Uo(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new ar(new Uo(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new ar(new Uo(.2,0,.6,4),n),[0,.3,0]],[new ar(new Uo(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new ar(new Uo(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new ar(new Uo(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new ar(new Tl(.2,0),n)]],XY:[[new ar(new or(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new ar(new or(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ar(new or(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]]},x={START:[[new ar(new Tl(.01,2),r),null,null,null,"helper"]],END:[[new ar(new Tl(.01,2),r),null,null,null,"helper"]],DELTA:[[new eo(function(){const t=new Gn;return t.setAttribute("position",new In([0,0,0,1,1,1],3)),t}(),r),null,null,null,"helper"]],X:[[new eo(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new eo(m,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new eo(m,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},_={XYZE:[[new ar(y(.5,1),d),null,[0,Math.PI/2,0]]],X:[[new ar(y(.5,.5),i)]],Y:[[new ar(y(.5,.5),a),null,[0,0,-Math.PI/2]]],Z:[[new ar(y(.5,.5),s),null,[0,Math.PI/2,0]]],E:[[new ar(y(.75,1),h),null,[0,Math.PI/2,0]]]},w={AXIS:[[new eo(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},S={XYZE:[[new ar(new Ll(.25,10,8),n)]],X:[[new ar(new Rl(.5,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new ar(new Rl(.5,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new ar(new Rl(.5,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new ar(new Rl(.75,.1,2,24),n)]]},E={X:[[new ar(p,i),[.5,0,0],[0,0,-Math.PI/2]],[new ar(g,i),[0,0,0],[0,0,-Math.PI/2]],[new ar(p,i),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new ar(p,a),[0,.5,0]],[new ar(g,a)],[new ar(p,a),[0,-.5,0],[0,0,Math.PI]]],Z:[[new ar(p,s),[0,0,.5],[Math.PI/2,0,0]],[new ar(g,s),[0,0,0],[Math.PI/2,0,0]],[new ar(p,s),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new ar(new or(.15,.15,.01),c),[.15,.15,0]]],YZ:[[new ar(new or(.15,.15,.01),o),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ar(new or(.15,.15,.01),l),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new ar(new or(.1,.1,.1),u.clone())]]},M={X:[[new ar(new Uo(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new ar(new Uo(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new ar(new Uo(.2,0,.6,4),n),[0,.3,0]],[new ar(new Uo(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new ar(new Uo(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new ar(new Uo(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new ar(new or(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new ar(new or(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ar(new or(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new ar(new or(.2,.2,.2),n),[0,0,0]]]},C={X:[[new eo(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new eo(m,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new eo(m,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function T(t){const e=new fn;for(const n in t)for(let r=t[n].length;r--;){const i=t[n][r][0].clone(),a=t[n][r][1],s=t[n][r][2],o=t[n][r][3],l=t[n][r][4];i.name=n,i.tag=l,a&&i.position.set(a[0],a[1],a[2]),s&&i.rotation.set(s[0],s[1],s[2]),o&&i.scale.set(o[0],o[1],o[2]),i.updateMatrix();const c=i.geometry.clone();c.applyMatrix4(i.matrix),i.geometry=c,i.renderOrder=1/0,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),e.add(i)}return e}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=T(v)),this.add(this.gizmo.rotate=T(_)),this.add(this.gizmo.scale=T(E)),this.add(this.picker.translate=T(b)),this.add(this.picker.rotate=T(S)),this.add(this.picker.scale=T(M)),this.add(this.helper.translate=T(x)),this.add(this.helper.rotate=T(w)),this.add(this.helper.scale=T(C)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(t){const e="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:Iy;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let n=[];n=n.concat(this.picker[this.mode].children),n=n.concat(this.gizmo[this.mode].children),n=n.concat(this.helper[this.mode].children);for(let r=0;r<n.length;r++){const t=n[r];let i;t.visible=!0,t.rotation.set(0,0,0),t.position.copy(this.worldPosition),(i=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),t.scale.set(1,1,1).multiplyScalar(i*this.size/4),"helper"!==t.tag)?(t.quaternion.copy(e),"translate"===this.mode||"scale"===this.mode?("X"===t.name&&Math.abs(ky.copy(Oy).applyQuaternion(e).dot(this.eye))>.99&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"Y"===t.name&&Math.abs(ky.copy(Ny).applyQuaternion(e).dot(this.eye))>.99&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"Z"===t.name&&Math.abs(ky.copy(Fy).applyQuaternion(e).dot(this.eye))>.99&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"XY"===t.name&&Math.abs(ky.copy(Fy).applyQuaternion(e).dot(this.eye))<.2&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"YZ"===t.name&&Math.abs(ky.copy(Oy).applyQuaternion(e).dot(this.eye))<.2&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"XZ"===t.name&&Math.abs(ky.copy(Ny).applyQuaternion(e).dot(this.eye))<.2&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1)):"rotate"===this.mode&&(Ry.copy(e),ky.copy(this.eye).applyQuaternion(my.copy(e).invert()),-1!==t.name.search("E")&&t.quaternion.setFromRotationMatrix(Py.lookAt(this.eye,Ly,Ny)),"X"===t.name&&(my.setFromAxisAngle(Oy,Math.atan2(-ky.y,ky.z)),my.multiplyQuaternions(Ry,my),t.quaternion.copy(my)),"Y"===t.name&&(my.setFromAxisAngle(Ny,Math.atan2(ky.x,ky.z)),my.multiplyQuaternions(Ry,my),t.quaternion.copy(my)),"Z"===t.name&&(my.setFromAxisAngle(Fy,Math.atan2(ky.y,ky.x)),my.multiplyQuaternions(Ry,my),t.quaternion.copy(my))),t.visible=t.visible&&(-1===t.name.indexOf("X")||this.showX),t.visible=t.visible&&(-1===t.name.indexOf("Y")||this.showY),t.visible=t.visible&&(-1===t.name.indexOf("Z")||this.showZ),t.visible=t.visible&&(-1===t.name.indexOf("E")||this.showX&&this.showY&&this.showZ),t.material._color=t.material._color||t.material.color.clone(),t.material._opacity=t.material._opacity||t.material.opacity,t.material.color.copy(t.material._color),t.material.opacity=t.material._opacity,this.enabled&&this.axis&&(t.name===this.axis||this.axis.split("").some((function(e){return t.name===e})))&&(t.material.color.setHex(16776960),t.material.opacity=1)):(t.visible=!1,"AXIS"===t.name?(t.position.copy(this.worldPositionStart),t.visible=!!this.axis,"X"===this.axis&&(my.setFromEuler(Ay.set(0,0,0)),t.quaternion.copy(e).multiply(my),Math.abs(ky.copy(Oy).applyQuaternion(e).dot(this.eye))>.9&&(t.visible=!1)),"Y"===this.axis&&(my.setFromEuler(Ay.set(0,0,Math.PI/2)),t.quaternion.copy(e).multiply(my),Math.abs(ky.copy(Ny).applyQuaternion(e).dot(this.eye))>.9&&(t.visible=!1)),"Z"===this.axis&&(my.setFromEuler(Ay.set(0,Math.PI/2,0)),t.quaternion.copy(e).multiply(my),Math.abs(ky.copy(Fy).applyQuaternion(e).dot(this.eye))>.9&&(t.visible=!1)),"XYZE"===this.axis&&(my.setFromEuler(Ay.set(0,Math.PI/2,0)),ky.copy(this.rotationAxis),t.quaternion.setFromRotationMatrix(Py.lookAt(Ly,ky,Ny)),t.quaternion.multiply(my),t.visible=this.dragging),"E"===this.axis&&(t.visible=!1)):"START"===t.name?(t.position.copy(this.worldPositionStart),t.visible=this.dragging):"END"===t.name?(t.position.copy(this.worldPosition),t.visible=this.dragging):"DELTA"===t.name?(t.position.copy(this.worldPositionStart),t.quaternion.copy(this.worldQuaternionStart),fy.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),fy.applyQuaternion(this.worldQuaternionStart.clone().invert()),t.scale.copy(fy),t.visible=this.dragging):(t.quaternion.copy(e),this.dragging?t.position.copy(this.worldPositionStart):t.position.copy(this.worldPosition),this.axis&&(t.visible=-1!==this.axis.search(t.name))))}super.updateMatrixWorld(t)}}class jy extends ar{constructor(){super(new Tr(1e5,1e5,2,2),new Tn({visible:!1,wireframe:!0,side:2,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(t){let e=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(e="local"),zy.copy(Oy).applyQuaternion("local"===e?this.worldQuaternion:Iy),Uy.copy(Ny).applyQuaternion("local"===e?this.worldQuaternion:Iy),Gy.copy(Fy).applyQuaternion("local"===e?this.worldQuaternion:Iy),ky.copy(Uy),this.mode){case"translate":case"scale":switch(this.axis){case"X":ky.copy(this.eye).cross(zy),Dy.copy(zy).cross(ky);break;case"Y":ky.copy(this.eye).cross(Uy),Dy.copy(Uy).cross(ky);break;case"Z":ky.copy(this.eye).cross(Gy),Dy.copy(Gy).cross(ky);break;case"XY":Dy.copy(Gy);break;case"YZ":Dy.copy(zy);break;case"XZ":ky.copy(Gy),Dy.copy(Uy);break;case"XYZ":case"E":Dy.set(0,0,0)}break;default:Dy.set(0,0,0)}0===Dy.length()?this.quaternion.copy(this.cameraQuaternion):(By.lookAt(fy.set(0,0,0),Dy,ky),this.quaternion.setFromRotationMatrix(By)),super.updateMatrixWorld(t)}}const Vy=t=>{let{length:e,radius:n}=void 0===t?{}:t;e=void 0===e?1:e,n=void 0===n?1:n;const r=.4*e,i=new Uo(0,.1*n,r,32,1),a=.6*e,s=.025*n,o=new Uo(s,s,a,32,1);var l=new Ge;return l.setPosition(new ue(0,.5*a,0)),o.applyMatrix4(l),l.setPosition(new ue(0,a+.5*r,0)),i.applyMatrix4(l),Gf([i,o])},Wy=(t,e,n)=>{if(t.current&&e){const r="function"==typeof e.r?e.r(n)/255:e.r/255,i="function"==typeof e.g?e.g(n)/255:e.g/255,a="function"==typeof e.b?e.b(n)/255:e.b/255,s="function"==typeof e.a?e.a(n):e.a;t.current.material.color.setRGB(r,i,a),t.current.material.opacity=s,t.current.material.transparent=1!==s}},$y=t=>{let e=null;return t.shape?("cube"===t.shape?e=(t=>{let{x:e,y:n,z:r}=void 0===t?{}:t;return e=void 0===e?1:e,n=void 0===n?1:n,r=void 0===r?1:r,new Yf(e,n,r,2,.05)})(t.shapeParams):"cylinder"===t.shape?e=(t=>{let{radius:e,height:n}=void 0===t?{}:t;return e=void 0===e?.5:e,n=void 0===n?1:n,new Uo(e,e,n,32,1,!1)})(t.shapeParams):"sphere"===t.shape?e=(t=>{let{radius:e}=void 0===t?{}:t;return e=void 0===e?.5:e,new Ll(e,32,32)})(t.shapeParams):"capsule"===t.shape?e=(t=>{let{radius:e,height:n}=void 0===t?{}:t;e=void 0===e?.5:e,n=void 0===n?1:n;const r=new Uo(e,e,n,32,1,!0),i=new Ll(e,32,32,Math.PI,Math.PI),a=new Ll(e,32,32,Math.PI,Math.PI);var s=new Ge;s.makeRotationX(Math.PI/2),s.setPosition(0,n/2,0);var o=new Ge;return o.makeRotationX(-Math.PI/2),o.setPosition(0,-n/2,0),i.applyMatrix4(s),a.applyMatrix4(o),Gf([r,i,a])})(t.shapeParams):"arrow"===t.shape&&(e=Vy(t.shapeParams)),[{geometry:e,type:"part"}]):[]};function Yy(...t){const e=(0,r.useRef)();return(0,r.useEffect)((()=>{t.forEach((t=>{!t||("function"==typeof t?t(e.current):t.current=e.current)}))}),[t]),e}const qy=(0,r.forwardRef)((({objectKey:t,displayTfs:e,position:n,rotation:i,scale:a,ghost:s,highlightColor:o,children:l},c)=>{const u=Yy(c,(0,r.useRef)(null)),h=sy((0,r.useCallback)((e=>e.tfs[t]),[t])),d=sy((t=>t.clock));cd((0,r.useCallback)((()=>{const t=1e3*d.getElapsed();u.current&&(u.current.position.set(n?n.x:"function"==typeof h.position.x?h.position.x(t):h.position.x,n?n.y:"function"==typeof h.position.y?h.position.y(t):h.position.y,n?n.z:"function"==typeof h.position.z?h.position.z(t):h.position.z),u.current.quaternion.set(i?i.x:"function"==typeof h.rotation.x?h.rotation.x(t):h.rotation.x,i?i.y:"function"==typeof h.rotation.y?h.rotation.y(t):h.rotation.y,i?i.z:"function"==typeof h.rotation.z?h.rotation.z(t):h.rotation.z,i?i.w:"function"==typeof h.rotation.w?h.rotation.w(t):h.rotation.w),u.current.scale.set(a?a.x:h.scale?"function"==typeof h.scale.x?h.scale.x(t):h.scale.x:0,a?a.y:h.scale?"function"==typeof h.scale.y?h.scale.y(t):h.scale.y:0,a?a.z:h.scale?"function"==typeof h.scale.z?h.scale.z(t):h.scale.z:0))}),[h,n,i,a,u,d]));const f=Vy();return Eh("group",{ref:u,dispose:null,up:[0,0,1],children:[e&&Eh(wh,{children:[Sh("axesHelper",{size:1}),Sh("mesh",{geometry:f,material:s?hy(o):uy(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},`${t}ArrowX`),Sh("mesh",{geometry:f,material:s?hy(o):uy(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},`${t}ArrowY`),Sh("mesh",{geometry:f,material:s?hy(o):uy(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},`${t}ArrowZ`)]}),l]})}));function Xy({displayTfs:t,children:e}){const n=Vy();return Eh("group",{dispose:null,up:[0,0,1],children:[t&&Eh(wh,{children:[Sh("axesHelper",{size:1}),Sh("mesh",{geometry:n,material:uy(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),Sh("mesh",{geometry:n,material:uy(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),Sh("mesh",{geometry:n,material:uy(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}function Jy({displayTfs:t,children:e}){const n=Vy();return Eh("group",{dispose:null,up:[0,0,1],children:[t&&Eh(wh,{children:[Sh("axesHelper",{size:1}),Sh("mesh",{geometry:n,material:uy(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),Sh("mesh",{geometry:n,material:uy(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),Sh("mesh",{geometry:n,material:uy(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}var Zy="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Ky=class extends hr{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{THREE_REVISION:i.replace(/\D+/g,""),MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new _u(null),luminanceBuffer1:new _u(null),minLuminance:new _u(.01),deltaTime:new _u(0),tau:new _u(1)},extensions:{shaderTextureLOD:!0},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <packing>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\nuniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));\n#if __VERSION__ < 300\nfloat l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;\n#else\nfloat l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;\n#endif\nl0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}",vertexShader:Zy}),this.toneMapped=!1}set luminanceBuffer0(t){this.uniforms.luminanceBuffer0.value=t}setLuminanceBuffer0(t){this.uniforms.luminanceBuffer0.value=t}set luminanceBuffer1(t){this.uniforms.luminanceBuffer1.value=t}setLuminanceBuffer1(t){this.uniforms.luminanceBuffer1.value=t}set mipLevel1x1(t){this.defines.MIP_LEVEL_1X1=t.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(t){this.mipLevel1x1=t}set deltaTime(t){this.uniforms.deltaTime.value=t}setDeltaTime(t){this.uniforms.deltaTime.value=t}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(t){this.uniforms.minLuminance.value=t}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(t){this.uniforms.minLuminance.value=t}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(t){this.uniforms.tau.value=t}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(t){this.uniforms.tau.value=t}};function Qy(t,e){let n="texel";if(null!==t){const r=Number.parseInt(i);if(!(e&&r>=133&&135!==r&&t.format===P&&t.type===M&&t.encoding===pt))switch(t.encoding){case pt:n="sRGBToLinear(texel)";break;case ft:n="texel";break;default:throw new Error(`Unsupported encoding: ${t.encoding}`)}}return n}var tv=0,ev=1,nv=2,rv=3,iv=4,av=5,sv=6,ov=7,lv=8,cv=9,uv=10,hv=11,dv=12,fv=13,pv=14,mv=15,gv=16,yv=17,vv=18,bv=19,xv=20,_v=21,wv=22,Sv=23,Ev=24,Mv=25,Cv=26,Tv=27,Av=28,kv=29,Lv=30,Pv=31,Rv=32,Iv=0,Dv=1,Bv=2,Ov={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Nv=0,Fv=2,zv=3,Uv=0,Gv=1,Hv=2,jv=3,Vv=4,Wv=0,$v=1,Yv=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],qv=class extends hr{constructor(t=new ae){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new _u(null),texelSize:new _u(new ae),scale:new _u(1),kernel:new _u(0)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <encodings_fragment>\n}",vertexShader:"uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.setTexelSize(t.x,t.y),this.kernelSize=Fv}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return Yv[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,.5*t,.5*e)}setSize(t,e){const n=1/t,r=1/e;this.uniforms.texelSize.value.set(n,r,.5*n,.5*r)}},Xv=class extends hr{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new _u(null),opacity:new _u(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",vertexShader:Zy}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},Jv=class extends hr{constructor(t=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new _u(null),cameraNear:new _u(.3),cameraFar:new _u(1e3)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <packing>\n#include <clipping_planes_pars_fragment>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){\n#include <clipping_planes_fragment>\nvec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);\n#if DEPTH_PACKING == 3201\nfloat fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));\n#else\nfloat fragCoordZ=texture2D(depthBuffer,projTexCoord).r;\n#endif\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#else\nfloat viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#endif\nfloat depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}",vertexShader:"#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying float vViewZ;varying vec4 vProjTexCoord;void main(){\n#include <skinbase_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\nvViewZ=mvPosition.z;vProjTexCoord=gl_Position;\n#include <clipping_planes_vertex>\n}"}),this.toneMapped=!1,this.depthBuffer=t,this.depthPacking=gt,this.adoptCameraSettings(e)}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=gt){this.depthBuffer=t,this.depthPacking=e}adoptCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof fr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Zv=class extends hr{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new _u(null),normalBuffer:new _u(null),texelSize:new _u(new Ot)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\n#ifdef DOWNSAMPLE_NORMALS\nuniform lowp sampler2D normalBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);\n#ifdef DOWNSAMPLE_NORMALS\nvec2 uvs[4];uvs[0]=vUv0;uvs[1]=vUv1;uvs[2]=vUv2;uvs[3]=vUv3;vec3 n=texture2D(normalBuffer,uvs[index]).rgb;\n#else\nvec3 n=vec3(0.0);\n#endif\ngl_FragColor=vec4(n,d[index]);}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=mt){this.depthBuffer=t,this.depthPacking=e}set normalBuffer(t){this.uniforms.normalBuffer.value=t,null!==t?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(t){this.normalBuffer=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},Kv=class extends hr{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new _u(null),texelSize:new _u(new Ot)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#define WEIGHT_INNER 0.125\n#define WEIGHT_OUTER 0.0555555\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\n#include <encodings_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},Qv="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}",tb=class extends hr{constructor(t,e,n,r,a=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:i.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new _u(null),depthBuffer:new _u(null),resolution:new _u(new Ot),texelSize:new _u(new Ot),cameraNear:new _u(.3),cameraFar:new _u(1e3),aspect:new _u(1),time:new _u(0)},blending:0,depthWrite:!1,depthTest:!1,dithering:a}),this.toneMapped=!1,t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.adoptCameraSettings(r)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=mt){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){var e,n,r,i,a;return this.fragmentShader=Qv.replace(Ov.FRAGMENT_HEAD,null!=(e=t.get(Ov.FRAGMENT_HEAD))?e:"").replace(Ov.FRAGMENT_MAIN_UV,null!=(n=t.get(Ov.FRAGMENT_MAIN_UV))?n:"").replace(Ov.FRAGMENT_MAIN_IMAGE,null!=(r=t.get(Ov.FRAGMENT_MAIN_IMAGE))?r:""),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(Ov.VERTEX_HEAD,null!=(i=t.get(Ov.VERTEX_HEAD))?i:"").replace(Ov.VERTEX_MAIN_SUPPORT,null!=(a=t.get(Ov.VERTEX_MAIN_SUPPORT))?a:""),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof fr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return Ov}},eb=class extends hr{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:i.replace(/\D+/g,"")},uniforms:{inputBuffer:new _u(null),threshold:new _u(0),smoothing:new _u(1),range:new _u(null)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:Zy}),this.toneMapped=!1,this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return null!==this.luminanceRange}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){null!==t?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},nb=class extends hr{constructor(t=new Ot){super({name:"OutlineMaterial",uniforms:{inputBuffer:new _u(null),texelSize:new _u(new Ot)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.setTexelSize(t.x,t.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},rb=class extends hr{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new _u(null),supportBuffer:new _u(null),texelSize:new _u(new Ot),radius:new _u(.85)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\n#else\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\n#endif\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\n#include <encodings_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}set supportBuffer(t){this.uniforms.supportBuffer.value=t}get radius(){return this.uniforms.radius.value}set radius(t){this.uniforms.radius.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},ib=new dr,ab=null;var sb=class{constructor(t="Pass",e=new cs,n=ib){this.name=t,this.renderer=null,this.scene=e,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const e=this.fullscreenMaterial;null!==e&&(e.needsUpdate=!0),this.rtt=!t}}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;null!==e?e.material=t:(e=new ar(function(){if(null===ab){const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);void 0!==(ab=new Gn).setAttribute?(ab.setAttribute("position",new Ln(t,3)),ab.setAttribute("uv",new Ln(e,2))):(ab.addAttribute("position",new Ln(t,3)),ab.addAttribute("uv",new Ln(e,2)))}return ab}(),t),e.frustumCulled=!1,null===this.scene&&(this.scene=new cs),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=mt){}render(t,e,n,r,i){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof se||e instanceof Cn||e instanceof ie||e instanceof sb)&&this[t].dispose()}}},ob=class extends sb{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new Xv,this.needsSwap=!1,this.renderTarget=t,void 0===t&&(this.renderTarget=new se(1,1,{minFilter:w,magFilter:w,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,r,i){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){void 0!==n&&(this.renderTarget.texture.type=n,n!==M?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":t.outputEncoding===pt&&(this.renderTarget.texture.encoding=pt))}},lb=class extends sb{constructor(t,{minLuminance:e=.01,adaptationRate:n=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new Ky,this.needsSwap=!1,this.renderTargetPrevious=new se(1,1,{minFilter:b,magFilter:b,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const r=this.fullscreenMaterial;r.luminanceBuffer0=this.renderTargetPrevious.texture,r.luminanceBuffer1=t,r.minLuminance=e,r.adaptationRate=n,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new ob(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(t){this.fullscreenMaterial.mipLevel1x1=t}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(t){this.fullscreenMaterial.adaptationRate=t}render(t,e,n,r,i){this.fullscreenMaterial.deltaTime=r,t.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),t.render(this.scene,this.camera),this.copyPass.render(t,this.renderTargetAdapted)}},cb=class extends sb{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,r,i){const a=t.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},ub=new Kt,hb=class extends sb{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,r,i){const a=this.overrideClearColor,s=this.overrideClearAlpha,o=t.getClearAlpha(),l=null!==a,c=s>=0;l?(ub.copy(t.getClearColor(ub)),t.setClearColor(a,c?s:o)):c&&t.setClearAlpha(s),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),l?t.setClearColor(ub,o):c&&t.setClearAlpha(o)}},db=-1,fb=class extends St{constructor(t,e=-1,n=-1,r=1){super(),this.resizable=t,this.baseSize=new Ot(1,1),this.preferredSize=new Ot(e,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new Ot,this.addEventListener("change",(()=>this.updateEffectiveSize())),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,r=this.scale;e.width!==db?n.width=e.width:e.height!==db?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*r),e.height!==db?n.height=e.height:e.width!==db?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*r)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(db),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.getBaseWidth(),t.getBaseHeight()),this.preferredSize.set(t.getPreferredWidth(),t.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return db}},pb=!1,mb=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let e;if(t.material.flatShading)switch(t.material.side){case 2:e=this.materialsFlatShadedDoubleSide;break;case 1:e=this.materialsFlatShadedBackSide;break;default:e=this.materialsFlatShaded}else switch(t.material.side){case 2:e=this.materialsDoubleSide;break;case 1:e=this.materialsBackSide;break;default:e=this.materials}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=e[2]:t.isInstancedMesh?t.material=e[1]:t.material=e[0],++this.meshCount}}}setMaterial(t){if(this.disposeMaterials(),this.material=t,null!==t){const e=this.materials=[t.clone(),t.clone(),t.clone()];for(const n of e)n.uniforms=Object.assign({},t.uniforms),n.side=0;e[2].skinning=!0,this.materialsBackSide=e.map((e=>{const n=e.clone();return n.uniforms=Object.assign({},t.uniforms),n.side=1,n})),this.materialsDoubleSide=e.map((e=>{const n=e.clone();return n.uniforms=Object.assign({},t.uniforms),n.side=2,n})),this.materialsFlatShaded=e.map((e=>{const n=e.clone();return n.uniforms=Object.assign({},t.uniforms),n.flatShading=!0,n})),this.materialsFlatShadedBackSide=e.map((e=>{const n=e.clone();return n.uniforms=Object.assign({},t.uniforms),n.flatShading=!0,n.side=1,n})),this.materialsFlatShadedDoubleSide=e.map((e=>{const n=e.clone();return n.uniforms=Object.assign({},t.uniforms),n.flatShading=!0,n.side=2,n}))}}render(t,e,n){const r=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,pb){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(const t of r)t[0].material=t[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=r}t.shadowMap.enabled=r}disposeMaterials(){if(null!==this.material){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return pb}static set workaroundEnabled(t){pb=t}},gb=class extends sb{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new hb,this.overrideMaterialManager=null===n?null:new mb(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){const t=this.overrideMaterialManager;return null!==t?t.material:null}set overrideMaterial(t){const e=this.overrideMaterialManager;null!==t?null!==e?e.setMaterial(t):this.overrideMaterialManager=new mb(t):null!==e&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,r,i){const a=this.scene,s=this.camera,o=this.selection,l=s.layers.mask,c=a.background,u=t.shadowMap.autoUpdate,h=this.renderToScreen?null:e;null!==o&&s.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(h),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(t,a,s):t.render(a,s),s.layers.mask=l,a.background=c,t.shadowMap.autoUpdate=u}},yb=class extends sb{constructor(t,e,{renderTarget:n,resolutionScale:r=1,width:i=fb.AUTO_SIZE,height:a=fb.AUTO_SIZE,resolutionX:s=i,resolutionY:o=a}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new gb(t,e,new Wa({depthPacking:gt}));const l=this.renderPass;l.skipShadowMapUpdate=!0,l.ignoreBackground=!0;const c=l.getClearPass();c.overrideClearColor=new Kt(16777215),c.overrideClearAlpha=1,this.renderTarget=n,void 0===this.renderTarget&&(this.renderTarget=new se(1,1,{minFilter:b,magFilter:b}),this.renderTarget.texture.name="DepthPass.Target");const u=this.resolution=new fb(this,s,o,r);u.addEventListener("change",(t=>this.setSize(u.baseWidth,u.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,a)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}},vb=class extends sb{constructor({normalBuffer:t=null,resolutionScale:e=.5,width:n=fb.AUTO_SIZE,height:r=fb.AUTO_SIZE,resolutionX:i=n,resolutionY:a=r}={}){super("DepthDownsamplingPass");const s=new Zv;s.normalBuffer=t,this.fullscreenMaterial=s,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new se(1,1,{minFilter:b,magFilter:b,depthBuffer:!1,type:A}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new fb(this,i,a,e);o.addEventListener("change",(t=>this.setSize(o.baseWidth,o.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(t,e=mt){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e}render(t,e,n,r,i){t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.fullscreenMaterial.setSize(t,e);const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){if(!t.capabilities.isWebGL2)throw new Error("The DepthDownsamplingPass requires WebGL 2")}};function bb(t,e,n){for(const r of e){const e="$1"+t+r.charAt(0).toUpperCase()+r.slice(1),i=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const t of n.entries())null!==t[1]&&n.set(t[0],t[1].replace(i,e))}}function xb(t,e,n){var r,i,a,s,o;let l=e.getFragmentShader(),c=e.getVertexShader();const u=void 0!==l&&/mainImage/.test(l),h=void 0!==l&&/mainUv/.test(l);if(n.attributes|=e.getAttributes(),void 0===l)throw new Error(`Missing fragment shader (${e.name})`);if(h&&0!=(n.attributes&Bv))throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!u&&!h)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const d=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,f=n.shaderParts;let p=null!=(r=f.get(Ov.FRAGMENT_HEAD))?r:"",m=null!=(i=f.get(Ov.FRAGMENT_MAIN_UV))?i:"",g=null!=(a=f.get(Ov.FRAGMENT_MAIN_IMAGE))?a:"",y=null!=(s=f.get(Ov.VERTEX_HEAD))?s:"",v=null!=(o=f.get(Ov.VERTEX_MAIN_SUPPORT))?o:"";const b=new Set,x=new Set;if(h&&(m+=`\t${t}MainUv(UV);\n`,n.uvTransformation=!0),null!==c&&/mainSupport/.test(c)){const e=/mainSupport *\([\w\s]*?uv\s*?\)/.test(c);v+=`\t${t}MainSupport(`,v+=e?"vUv);\n":");\n";for(const t of c.matchAll(/(?:varying\s+\w+\s+(\w*))/g))n.varyings.add(t[1]),b.add(t[1]),x.add(t[1]);for(const t of c.matchAll(d))x.add(t[1])}for(const t of l.matchAll(d))x.add(t[1]);for(const t of e.defines.keys())x.add(t.replace(/\([\w\s,]*\)/g,""));for(const t of e.uniforms.keys())x.add(t);x.delete("while"),x.delete("for"),x.delete("if"),e.uniforms.forEach(((e,r)=>n.uniforms.set(t+r.charAt(0).toUpperCase()+r.slice(1),e))),e.defines.forEach(((e,r)=>n.defines.set(t+r.charAt(0).toUpperCase()+r.slice(1),e)));const _=new Map([["fragment",l],["vertex",c]]);bb(t,x,n.defines),bb(t,x,_),l=_.get("fragment"),c=_.get("vertex");const w=e.blendMode;if(n.blendModes.set(w.blendFunction,w),u){null!==e.inputColorSpace&&e.inputColorSpace!==n.colorSpace&&(g+=e.inputColorSpace===pt?"color0 = LinearTosRGB(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),null!==e.outputColorSpace?n.colorSpace=e.outputColorSpace:null!==e.inputColorSpace&&(n.colorSpace=e.inputColorSpace);const r=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;g+=`${t}MainImage(color0, UV, `,0!=(n.attributes&Dv)&&r.test(l)&&(g+="depth, ",n.readDepth=!0),g+="color1);\n\t";const i=t+"BlendOpacity";n.uniforms.set(i,w.opacity),g+=`color0 = blend${w.blendFunction}(color0, color1, ${i});\n\n\t`,p+=`uniform float ${i};\n\n`}if(p+=l+"\n",null!==c&&(y+=c+"\n"),f.set(Ov.FRAGMENT_HEAD,p),f.set(Ov.FRAGMENT_MAIN_UV,m),f.set(Ov.FRAGMENT_MAIN_IMAGE,g),f.set(Ov.VERTEX_HEAD,y),f.set(Ov.VERTEX_MAIN_SUPPORT,v),null!==e.extensions)for(const t of e.extensions)n.extensions.add(t)}}var _b=class extends sb{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new tb(null,null,null,t),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort(((t,e)=>e.attributes-t.attributes));for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const t=new kb;let e=0;for(const s of this.effects)if(s.blendMode.blendFunction===cv)t.attributes|=s.getAttributes()&Dv;else{if(0!=(t.attributes&s.getAttributes()&Bv))throw new Error(`Convolution effects cannot be merged (${s.name})`);xb("e"+e++,s,t)}let n=t.shaderParts.get(Ov.FRAGMENT_HEAD),r=t.shaderParts.get(Ov.FRAGMENT_MAIN_IMAGE),i=t.shaderParts.get(Ov.FRAGMENT_MAIN_UV);const a=/\bblend\b/g;for(const s of t.blendModes.values())n+=s.getShaderCode().replace(a,`blend${s.blendFunction}`)+"\n";0!=(t.attributes&Dv)?(t.readDepth&&(r="float depth = readDepth(UV);\n\n\t"+r),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,t.colorSpace===pt&&(r+="color0 = sRGBToLinear(color0);\n\t"),t.uvTransformation?(i="vec2 transformedUv = vUv;\n"+i,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(Ov.FRAGMENT_HEAD,n),t.shaderParts.set(Ov.FRAGMENT_MAIN_IMAGE,r),t.shaderParts.set(Ov.FRAGMENT_MAIN_UV,i),t.shaderParts.forEach(((t,e,n)=>n.set(e,null==t?void 0:t.trim().replace(/^#/,"\n#")))),this.skipRendering=0===e,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=mt){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,r,i){for(const a of this.effects)a.update(t,e,r);if(!this.skipRendering||this.renderToScreen){const i=this.fullscreenMaterial;i.inputBuffer=e.texture,i.time+=r,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(const r of this.effects)r.initialize(t,e,n);this.updateMaterial(),void 0!==n&&n!==M&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){if("change"===t.type)this.recompile()}},wb=class extends sb{constructor({kernelSize:t=Fv,resolutionScale:e=.5,width:n=fb.AUTO_SIZE,height:r=fb.AUTO_SIZE,resolutionX:i=n,resolutionY:a=r}={}){super("KawaseBlurPass"),this.renderTargetA=new se(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const s=this.resolution=new fb(this,i,a,e);s.addEventListener("change",(t=>this.setSize(s.baseWidth,s.baseHeight))),this.blurMaterial=new qv,this.copyMaterial=new Xv}getResolution(){return this.resolution}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const a=this.scene,s=this.camera,o=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,u=c.kernelSequence;let h=e;this.fullscreenMaterial=c;for(let d=0,f=u.length;d<f;++d){const e=0==(1&d)?o:l;c.kernel=u[d],c.inputBuffer=h.texture,t.setRenderTarget(e),t.render(a,s),h=e}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(a,s)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(t,e)}initialize(t,e,n){void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==M?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):t.outputEncoding===pt&&(this.renderTargetA.texture.encoding=pt,this.renderTargetB.texture.encoding=pt))}static get AUTO_SIZE(){return fb.AUTO_SIZE}},Sb=class extends sb{constructor({renderTarget:t,luminanceRange:e,colorOutput:n,resolutionScale:r=1,width:i=fb.AUTO_SIZE,height:a=fb.AUTO_SIZE,resolutionX:s=i,resolutionY:o=a}={}){super("LuminancePass"),this.fullscreenMaterial=new eb(n,e),this.needsSwap=!1,this.renderTarget=t,void 0===this.renderTarget&&(this.renderTarget=new se(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new fb(this,s,o,r);l.addEventListener("change",(t=>this.setSize(l.baseWidth,l.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,n,r,i){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){void 0!==n&&n!==M&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Eb=class extends sb{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new hb(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,r,i){const a=t.getContext(),s=t.state.buffers,o=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,h=1-u;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),s.stencil.setFunc(a.ALWAYS,u,4294967295),s.stencil.setClear(h),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(t,null):(c.render(t,e),c.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(o,l)):(t.setRenderTarget(e),t.render(o,l),t.setRenderTarget(n),t.render(o,l)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(a.EQUAL,1,4294967295),s.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),s.stencil.setLocked(!0)}},Mb=class extends sb{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new se(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Kv,this.upsamplingMaterial=new rb,this.resolution=new Ot}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(t){if(this.levels!==t){const e=this.renderTarget;this.dispose();for(let n=0;n<t;++n){const t=e.clone();t.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(t)}this.upsamplingMipmaps.push(e);for(let n=1,r=t-1;n<r;++n){const t=e.clone();t.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(t)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(t){this.upsamplingMaterial.radius=t}render(t,e,n,r,i){const{scene:a,camera:s}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:u}=this;let h=e;this.fullscreenMaterial=o;for(let d=0,f=c.length;d<f;++d){const e=c[d];o.setSize(h.width,h.height),o.inputBuffer=h.texture,t.setRenderTarget(e),t.render(a,s),h=e}this.fullscreenMaterial=l;for(let d=u.length-1;d>=0;--d){const e=u[d];l.setSize(h.width,h.height),l.inputBuffer=h.texture,l.supportBuffer=c[d].texture,t.setRenderTarget(e),t.render(a,s),h=e}}setSize(t,e){const n=this.resolution;n.set(t,e);let r=n.width,i=n.height;for(let a=0,s=this.downsamplingMipmaps.length;a<s;++a)r=Math.round(.5*r),i=Math.round(.5*i),this.downsamplingMipmaps[a].setSize(r,i),a<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[a].setSize(r,i)}initialize(t,e,n){if(void 0!==n){const e=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const t of e)t.texture.type=n;if(n!==M)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(t.outputEncoding===pt)for(const t of e)t.texture.encoding=pt}}dispose(){super.dispose();for(const t of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))t.dispose()}},Cb=class extends sb{constructor(t,e,{renderTarget:n,resolutionScale:r=1,width:i=fb.AUTO_SIZE,height:a=fb.AUTO_SIZE,resolutionX:s=i,resolutionY:o=a}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new gb(t,e,new Vl);const l=this.renderPass;l.setBackgroundDisabled(!0),l.setShadowMapDisabled(!0);const c=l.getClearPass();c.setOverrideClearColor(new Kt(7829503)),c.setOverrideClearAlpha(1),this.renderTarget=n,void 0===this.renderTarget&&(this.renderTarget=new se(1,1,{minFilter:b,magFilter:b}),this.renderTarget.texture.name="NormalPass.Target");const u=this.resolution=new fb(this,s,o,r);u.addEventListener("change",(t=>this.setSize(u.baseWidth,u.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,a,a)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}},Tb=class extends sb{constructor(t,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=t,this.input=e}setInput(t){}render(t,e,n,r,i){const a=this.fullscreenMaterial.uniforms;null!==e&&void 0!==a&&void 0!==a[this.input]&&(a[this.input].value=e.texture),t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}initialize(t,e,n){void 0!==n&&n!==M&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Ab=.001,kb=class{constructor(){this.shaderParts=new Map([[Ov.FRAGMENT_HEAD,null],[Ov.FRAGMENT_MAIN_UV,null],[Ov.FRAGMENT_MAIN_IMAGE,null],[Ov.VERTEX_HEAD,null],[Ov.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Iv,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=ft}},Lb=class extends Set{constructor(t,e=10){super(),this.l=e,this.exclusive=!1,void 0!==t&&this.set(t)}get layer(){return this.l}set layer(t){const e=this.l;for(const n of this)n.layers.disable(e),n.layers.enable(t);this.l=t}getLayer(){return this.layer}setLayer(t){this.layer=t}isExclusive(){return this.exclusive}setExclusive(t){this.exclusive=t}clear(){const t=this.layer;for(const e of this)e.layers.disable(t);return super.clear()}set(t){this.clear();for(const e of t)this.add(e);return this}indexOf(t){return this.has(t)?0:-1}add(t){return this.exclusive?t.layers.set(this.layer):t.layers.enable(this.layer),super.add(t)}delete(t){return this.has(t)&&t.layers.disable(this.layer),super.delete(t)}toggle(t){let e;return this.has(t)?(this.delete(t),e=!1):(this.add(t),e=!0),e}setVisible(t){for(const e of this)t?e.layers.enable(0):e.layers.disable(0);return this}},Pb=new Map([[tv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}"],[ev,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}"],[nv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}"],[rv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[iv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}"],[av,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}"],[sv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}"],[ov,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}"],[lv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}"],[cv,null],[uv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}"],[hv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}"],[dv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}"],[fv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}"],[pv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}"],[mv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}"],[gv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}"],[yv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}"],[vv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}"],[bv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}"],[xv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[_v,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}"],[wv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}"],[Sv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}"],[Ev,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}"],[Mv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}"],[Cv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}"],[Tv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[Av,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}"],[kv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}"],[Lv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}"],[Pv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}"],[Rv,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}"]]),Rb=class extends St{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new _u(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return Pb.get(this.blendFunction)}},Ib=class extends St{constructor(t,e,{attributes:n=Iv,blendFunction:r=Sv,defines:i=new Map,uniforms:a=new Map,extensions:s=null,vertexShader:o=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=o,this.defines=i,this.uniforms=a,this.extensions=s,this.blendMode=new Rb(r),this.blendMode.addEventListener("change",(t=>this.setChanged())),this._inputColorSpace=ft,this._outputColorSpace=null}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=mt){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof se||e instanceof Cn||e instanceof ie||e instanceof sb)&&this[t].dispose()}}};new ue,new Ge;new Kt;var Db=class extends Ib{constructor(t,e,{blendFunction:n=Av,patternTexture:r=null,patternScale:i=1,edgeStrength:a=1,pulseSpeed:s=0,visibleEdgeColor:o=16777215,hiddenEdgeColor:l=2230538,kernelSize:c=Nv,blur:u=!1,xRay:h=!0,multisampling:d=0,resolutionScale:f=.5,width:p=fb.AUTO_SIZE,height:m=fb.AUTO_SIZE,resolutionX:g=p,resolutionY:y=m}={}){super("OutlineEffect","uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;\n#ifdef USE_PATTERN\nuniform lowp sampler2D patternTexture;varying vec2 vUvPattern;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;\n#ifndef X_RAY\nedge.y=0.0;\n#endif\nedge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;\n#ifdef USE_PATTERN\nvec4 patternColor=texelToLinear(texture2D(patternTexture,vUvPattern));\n#ifdef X_RAY\nfloat hiddenFactor=0.5;\n#else\nfloat hiddenFactor=0.0;\n#endif\nvisibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;\n#endif\nfloat alpha=max(max(edge.x,edge.y),visibilityFactor);\n#ifdef ALPHA\noutputColor=vec4(color,alpha);\n#else\noutputColor=vec4(color,max(alpha,inputColor.a));\n#endif\n}",{uniforms:new Map([["maskTexture",new _u(null)],["edgeTexture",new _u(null)],["edgeStrength",new _u(a)],["visibleEdgeColor",new _u(new Kt(o))],["hiddenEdgeColor",new _u(new Kt(l))],["pulse",new _u(1)],["patternScale",new _u(i)],["patternTexture",new _u(null)]])}),this.blendMode.addEventListener("change",(t=>{this.blendMode.getBlendFunction()===ev?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()})),this.blendMode.setBlendFunction(n),this.patternTexture=r,this.xRay=h,this.scene=t,this.camera=e,this.renderTargetMask=new se(1,1),this.renderTargetMask.samples=d,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new se(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new hb,this.clearPass.overrideClearColor=new Kt(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new yb(t,e),this.maskPass=new gb(t,e,new Jv(this.depthPass.texture,e));const v=this.maskPass.clearPass;v.overrideClearColor=new Kt(16777215),v.overrideClearAlpha=1,this.blurPass=new wb({resolutionScale:f,resolutionX:g,resolutionY:y,kernelSize:c}),this.blurPass.enabled=u;const b=this.blurPass.resolution;b.addEventListener("change",(t=>this.setSize(b.baseWidth,b.baseHeight))),this.outlinePass=new Tb(new nb);this.outlinePass.fullscreenMaterial.inputBuffer=this.renderTargetMask.texture,this.time=0,this.selection=new Lb,this.selection.layer=10,this.pulseSpeed=s}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(t){this.renderTargetMask.samples=t,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(t){this.uniforms.get("patternScale").value=t}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(t){this.uniforms.get("edgeStrength").value=t}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(t){this.uniforms.get("visibleEdgeColor").value=t}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(t){this.uniforms.get("hiddenEdgeColor").value=t}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(t){this.pulseSpeed=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get selectionLayer(){return this.selection.layer}set selectionLayer(t){this.selection.layer=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get blur(){return this.blurPass.enabled}set blur(t){this.blurPass.enabled=t}get xRay(){return this.defines.has("X_RAY")}set xRay(t){this.xRay!==t&&(t?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(t){this.xRay=t}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(t){if(null!==t?(t.wrapS=t.wrapT=g,this.defines.set("USE_PATTERN","1"),this.setVertexShader("uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}")):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),null!==this.renderer){const e=Qy(t,this.renderer.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",e)}this.uniforms.get("patternTexture").value=t,this.setChanged()}setPatternTexture(t){this.patternTexture=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}setSelection(t){return this.selection.set(t),this}clearSelection(){return this.selection.clear(),this}selectObject(t){return this.selection.add(t),this}deselectObject(t){return this.selection.delete(t),this}update(t,e,n){const r=this.scene,i=this.camera,a=this.selection,s=this.uniforms.get("pulse"),o=r.background,l=i.layers.mask;a.size>0?(r.background=null,s.value=1,this.pulseSpeed>0&&(s.value=.375*Math.cos(this.time*this.pulseSpeed*10)+.625),this.time+=n,a.setVisible(!1),this.depthPass.render(t),a.setVisible(!0),i.layers.set(a.layer),this.maskPass.render(t,this.renderTargetMask),i.layers.mask=l,r.background=o,this.outlinePass.render(t,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(t,this.renderTargetOutline,this.renderTargetOutline)):this.time>0&&(this.clearPass.render(t,this.renderTargetOutline),this.time=0)}setSize(t,e){this.blurPass.setSize(t,e),this.renderTargetMask.setSize(t,e);const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.depthPass.setSize(r,i),this.renderTargetOutline.setSize(r,i),this.outlinePass.fullscreenMaterial.setSize(r,i)}initialize(t,e,n){const r=Qy(this.patternTexture,t.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",r),this.blurPass.initialize(t,e,M),void 0!==n&&(this.depthPass.initialize(t,e,n),this.maskPass.initialize(t,e,n),this.outlinePass.initialize(t,e,n))}},Bb=.5*Math.PI,Ob=new ue,Nb=new ue;let Fb;const zb=t=>(t=>!!t.current)(t)?t.current:t,Ub=function(t,e){return void 0===e&&(e=Sv),(0,r.forwardRef)((function(n,i){let{blendFunction:a,opacity:s,...o}=n;const l=ld((t=>t.invalidate)),c=(0,r.useMemo)((()=>new t(o)),[o]);return(0,r.useLayoutEffect)((()=>{c.blendMode.blendFunction=a||0===a?a:e,void 0!==s&&(c.blendMode.opacity.value=s),l()}),[a,c.blendMode,s]),Sh("primitive",{ref:i,object:c,dispose:null})}))};Ub(class extends Ib{constructor({blendFunction:t=Av,luminanceThreshold:e=.9,luminanceSmoothing:n=.025,mipmapBlur:r=!1,intensity:i=1,radius:a=.85,levels:s=8,kernelSize:o=zv,resolutionScale:l=.5,width:c=fb.AUTO_SIZE,height:u=fb.AUTO_SIZE,resolutionX:h=c,resolutionY:d=u}={}){super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}",{blendFunction:t,uniforms:new Map([["map",new _u(null)],["intensity",new _u(i)]])}),this.renderTarget=new se(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new wb({kernelSize:o}),this.luminancePass=new Sb({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new Mb,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=a,this.mipmapBlurPass.levels=s,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const f=this.resolution=new fb(this,h,d,l);f.addEventListener("change",(t=>this.setSize(f.baseWidth,f.baseHeight)))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,n){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(t,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,i.renderTarget):this.blurPass.render(t,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,e):this.blurPass.render(t,e,r)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(t,e),this.mipmapBlurPass.setSize(t,e)}initialize(t,e,n){this.blurPass.initialize(t,e,n),this.luminancePass.initialize(t,e,n),this.mipmapBlurPass.initialize(t,e,n),void 0!==n&&(this.renderTarget.texture.type=n,t.outputEncoding===pt&&(this.renderTarget.texture.encoding=pt))}},tv),Ub(class extends Ib{constructor({blendFunction:t=Lv,brightness:e=0,contrast:n=0}={}){super("BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}",{blendFunction:t,uniforms:new Map([["brightness",new _u(e)],["contrast",new _u(n)]])}),this.inputColorSpace=pt}get brightness(){return this.uniforms.get("brightness").value}set brightness(t){this.uniforms.get("brightness").value=t}getBrightness(t){return this.brightness}setBrightness(t){this.brightness=t}get contrast(){return this.uniforms.get("contrast").value}set contrast(t){this.uniforms.get("contrast").value=t}getContrast(t){return this.contrast}setContrast(t){this.contrast=t}}),Ub(class extends Ib{constructor({blendFunction:t,bits:e=16}={}){super("ColorDepthEffect","uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",{blendFunction:t,uniforms:new Map([["factor",new _u(1)]])}),this.bits=0,this.bitDepth=e}get bitDepth(){return this.bits}set bitDepth(t){this.bits=t,this.uniforms.get("factor").value=Math.pow(2,t/3)}getBitDepth(){return this.bitDepth}setBitDepth(t){this.bitDepth=t}}),Ub(class extends Ib{constructor({blendFunction:t=Lv,inverted:e=!1}={}){super("DepthEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\n#ifdef INVERTED\nvec3 color=vec3(1.0-depth);\n#else\nvec3 color=vec3(depth);\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:t,attributes:Dv}),this.inverted=e}get inverted(){return this.defines.has("INVERTED")}set inverted(t){this.inverted!==t&&(t?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}isInverted(){return this.inverted}setInverted(t){this.inverted=t}});const Gb=(0,r.createContext)(null),Hb=r.memo((0,r.forwardRef)(((t,e)=>{let{children:n,camera:a,scene:s,resolutionScale:o,enabled:l=!0,renderPriority:c=1,autoClear:u=!0,depthBuffer:h,disableNormalPass:d,stencilBuffer:f,multisampling:p=8,frameBufferType:m=k}=t;const{gl:g,scene:y,camera:v,size:b}=ld();s=s||y,a=a||v;const[x,_,S]=(0,r.useMemo)((()=>{const t=function(){if(void 0!==Fb)return Fb;try{var t;let e;const n=document.createElement("canvas");return Fb=!(!window.WebGL2RenderingContext||!(e=n.getContext("webgl2"))),e&&(null===(t=e.getExtension("WEBGL_lose_context"))||void 0===t||t.loseContext()),Fb}catch{return Fb=!1}}(),e=new class{constructor(t=null,{depthBuffer:e=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,n,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new ob,this.depthTexture=null,this.passes=[],this.timer=new class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(t){return this.fixedDeltaEnabled=t,this}isAutoResetEnabled(t){return this.autoReset}setAutoResetEnabled(t){return typeof document<"u"&&void 0!==document.hidden&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=t),this}getDelta(){return this.delta*Ab}getFixedDelta(){return this.fixedDelta*Ab}setFixedDelta(t){return this.fixedDelta=1e3*t,this}getElapsed(){return this.elapsed*Ab}getTimescale(){return this.timescale}setTimescale(t){return this.timescale=t,this}update(t){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=void 0!==t?t:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(t){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){const e=this.inputBuffer,n=this.multisampling;n>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,null!==t){const e=t.getSize(new Ot),n=t.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===M&&t.outputEncoding===pt&&(this.inputBuffer.texture.encoding=pt,this.outputBuffer.texture.encoding=pt,this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(e.width,e.height);for(const i of this.passes)i.initialize(t,n,r)}}replaceRenderer(t,e=!0){const n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(t),e&&null!==r&&(r.removeChild(n.domElement),r.appendChild(t.domElement)),n}createDepthTexture(){const t=this.depthTexture=new es;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=I,t.type=L):t.type=T,t}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,n,r){const a=this.renderer,s=null===a?new Ot:a.getDrawingBufferSize(new Ot),o={minFilter:w,magFilter:w,stencilBuffer:e,depthBuffer:t,type:n};let l;return r>0?(l=Number(i.replace(/\D+/g,""))<138?new Qu(s.width,s.height,o):new se(s.width,s.height,o),l.ignoreDepthForMultisampleCopy=!1,l.samples=r):l=new se(s.width,s.height,o),n===M&&null!==a&&a.outputEncoding===pt&&(l.texture.encoding=pt),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}addPass(t,e){const n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new Ot),a=r.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;if(t.setRenderer(r),t.setSize(i.width,i.height),t.initialize(r,a,s),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==e?n.splice(e,0,t):n.push(t),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),t.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){const e=this.createDepthTexture();for(t of n)t.setDepthTexture(e)}else t.setDepthTexture(this.depthTexture)}removePass(t){const e=this.passes,n=e.indexOf(t);if(-1!==n&&e.splice(n,1).length>0){if(null!==this.depthTexture){const n=(t,e)=>t||e.needsDepthTexture;e.reduce(n,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){const e=this.renderer,n=this.copyPass;let r,i,a,s=this.inputBuffer,o=this.outputBuffer,l=!1;void 0===t&&(t=this.timer.update().getDelta());for(const c of this.passes)c.enabled&&(c.render(e,s,o,t,l),c.needsSwap&&(l&&(n.renderToScreen=c.renderToScreen,r=e.getContext(),i=e.state.buffers.stencil,i.setFunc(r.NOTEQUAL,1,4294967295),n.render(e,s,o,t,l),i.setFunc(r.EQUAL,1,4294967295)),a=s,s=o,o=a),c instanceof Eb?l=!0:c instanceof cb&&(l=!1))}setSize(t,e,n){const r=this.renderer;if(void 0===t||void 0===e){const n=r.getSize(new Ot);t=n.width,e=n.height}r.setSize(t,e,n);const i=r.getDrawingBufferSize(new Ot);this.inputBuffer.setSize(i.width,i.height),this.outputBuffer.setSize(i.width,i.height);for(const a of this.passes)a.setSize(i.width,i.height)}reset(){const t=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(t)}dispose(){for(const t of this.passes)t.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}}(g,{depthBuffer:h,stencilBuffer:f,multisampling:p>0&&t?p:0,frameBufferType:m});e.addPass(new gb(s,a));let n=null,r=null;return d||(r=new Cb(s,a),r.enabled=!1,e.addPass(r),void 0!==o&&t&&(n=new vb({normalBuffer:r.texture,resolutionScale:o}),n.enabled=!1,e.addPass(n))),[e,r,n]}),[a,g,h,f,p,m,s,d,o]);(0,r.useEffect)((()=>null==x?void 0:x.setSize(b.width,b.height)),[x,b]),cd(((t,e)=>{l&&(g.autoClear=u,x.render(e))}),l?c:0);const E=(0,r.useRef)(null);(0,r.useLayoutEffect)((()=>{let t;return E.current&&E.current.__r3f&&x&&(t=new _b(a,...E.current.__r3f.objects),t.renderToScreen=!0,x.addPass(t),_&&(_.enabled=!0),S&&(S.enabled=!0)),()=>{t&&(null==x||x.removePass(t)),_&&(_.enabled=!1),S&&(S.enabled=!1)}}),[x,n,a,_,S]);const C=(0,r.useMemo)((()=>({composer:x,normalPass:_,downSamplingPass:S,resolutionScale:o,camera:a,scene:s})),[x,_,S,o,a,s]);return(0,r.useImperativeHandle)(e,(()=>x),[x]),Sh(Gb.Provider,{value:C,children:Sh("group",{ref:E,children:n})})})));Ub(class extends Ib{constructor({blendFunction:t,angle:e=.5*Math.PI,scale:n=1}={}){super("DotScreenEffect","uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",{blendFunction:t,uniforms:new Map([["angle",new _u(new Ot)],["scale",new _u(n)]])}),this.angle=e}get angle(){return Math.acos(this.uniforms.get("angle").value.y)}set angle(t){this.uniforms.get("angle").value.set(Math.sin(t),Math.cos(t))}getAngle(){return this.angle}setAngle(t){this.angle=t}get scale(){return this.uniforms.get("scale").value}set scale(t){this.uniforms.get("scale").value=t}}),Ub(class extends Ib{constructor({blendFunction:t=Lv,hue:e=0,saturation:n=0}={}){super("HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:t,uniforms:new Map([["hue",new _u(new ue)],["saturation",new _u(n)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(t){this.uniforms.get("saturation").value=t}getSaturation(){return this.saturation}setSaturation(t){this.saturation=t}get hue(){const t=this.uniforms.get("hue").value;return Math.acos((3*t.x-1)/2)}set hue(t){const e=Math.sin(t),n=Math.cos(t);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3)}getHue(){return this.hue}setHue(t){this.hue=t}}),Ub(class extends Ib{constructor({blendFunction:t=Av,premultiply:e=!1}={}){super("NoiseEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\n#ifdef PREMULTIPLY\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}",{blendFunction:t}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}},av);const jb=(0,r.createContext)(null);function Vb(t){let{children:e,enabled:n=!0}=t;const[i,a]=(0,r.useState)([]),s=(0,r.useMemo)((()=>({selected:i,select:a,enabled:n})),[i,a,n]);return r.createElement(jb.Provider,{value:s},e)}function Wb(t){let{enabled:e=!1,children:n,...i}=t;const a=(0,r.useRef)(null),s=(0,r.useContext)(jb);return(0,r.useEffect)((()=>{if(s&&e){let t=!1;const e=[];if(a.current.traverse((n=>{"Mesh"===n.type&&e.push(n),-1===s.selected.indexOf(n)&&(t=!0)})),t)return s.select((t=>[...t,...e])),()=>{s.select((t=>t.filter((t=>!e.includes(t)))))}}}),[e,n]),Sh("group",{ref:a,...i,children:n})}const $b=(0,r.forwardRef)((function(t,e){let{selection:n=[],selectionLayer:i=10,blendFunction:a,patternTexture:s,edgeStrength:o,pulseSpeed:l,visibleEdgeColor:c,hiddenEdgeColor:u,width:h,height:d,kernelSize:f,blur:p,xRay:m,...g}=t;const y=ld((t=>t.invalidate)),{scene:v,camera:b}=(0,r.useContext)(Gb),x=(0,r.useMemo)((()=>new Db(v,b,{blendFunction:a,patternTexture:s,edgeStrength:o,pulseSpeed:l,visibleEdgeColor:c,hiddenEdgeColor:u,width:h,height:d,kernelSize:f,blur:p,xRay:m,...g})),[a,p,b,o,d,u,f,s,l,v,c,h,m]),_=(0,r.useContext)(jb);return(0,r.useEffect)((()=>{if(!_&&n)return x.selection.set(Array.isArray(n)?n.map(zb):[zb(n)]),y(),()=>{x.selection.clear(),y()}}),[x,n,_]),(0,r.useEffect)((()=>{x.selectionLayer=i,y()}),[x,i]),(0,r.useRef)(),(0,r.useEffect)((()=>{var t;if(_&&_.enabled&&(null!=(t=_.selected)&&t.length))return x.selection.set(_.selected),y(),()=>{x.selection.clear(),y()}}),[_]),Sh("primitive",{ref:e,object:x})}));Ub(class extends Ib{constructor({blendFunction:t=Ev,density:e=1.25,scrollSpeed:n=0}={}){super("ScanlineEffect","uniform float count;\n#ifdef SCROLL\nuniform float scrollSpeed;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;\n#ifdef SCROLL\ny+=time*scrollSpeed;\n#endif\nvec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}",{blendFunction:t,uniforms:new Map([["count",new _u(0)],["scrollSpeed",new _u(0)]])}),this.resolution=new Ot,this.d=e,this.scrollSpeed=n}get density(){return this.d}set density(t){this.d=t,this.setSize(this.resolution.width,this.resolution.height)}getDensity(){return this.density}setDensity(t){this.density=t}get scrollSpeed(){return this.uniforms.get("scrollSpeed").value}set scrollSpeed(t){this.uniforms.get("scrollSpeed").value=t,0===t?this.defines.delete("SCROLL")&&this.setChanged():this.defines.has("SCROLL")||(this.defines.set("SCROLL","1"),this.setChanged())}setSize(t,e){this.resolution.set(t,e),this.uniforms.get("count").value=Math.round(e*this.density)}},Ev),Ub(class extends Ib{constructor({blendFunction:t,intensity:e=1}={}){super("SepiaEffect","uniform vec3 weightsR;uniform vec3 weightsG;uniform vec3 weightsB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,weightsR),dot(inputColor.rgb,weightsG),dot(inputColor.rgb,weightsB));outputColor=vec4(color,inputColor.a);}",{blendFunction:t,uniforms:new Map([["weightsR",new _u(new ue(.393,.769,.189))],["weightsG",new _u(new ue(.349,.686,.168))],["weightsB",new _u(new ue(.272,.534,.131))]])})}get intensity(){return this.blendMode.opacity.value}set intensity(t){this.blendMode.opacity.value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}get weightsR(){return this.uniforms.get("weightsR").value}get weightsG(){return this.uniforms.get("weightsG").value}get weightsB(){return this.uniforms.get("weightsB").value}}),Ub(class extends Ib{constructor({blendFunction:t=Lv,adaptive:e=!0,mode:n=(e?Hv:Gv),resolution:r=256,maxLuminance:i=16,whitePoint:a=i,middleGrey:s=.6,minLuminance:o=.01,averageLuminance:l=1,adaptationRate:c=1}={}){super("ToneMappingEffect","#include <tonemapping_pars_fragment>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\nuniform lowp sampler2D luminanceBuffer;uniform float whitePoint;uniform float middleGrey;\n#if TONE_MAPPING_MODE != 2\nuniform float averageLuminance;\n#endif\nvec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);\n#if TONE_MAPPING_MODE == 2\nfloat lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));\n#else\nfloat lumAvg=averageLuminance;\n#endif\nfloat lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\n#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2\noutputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);\n#else\noutputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);\n#endif\n}",{blendFunction:t,uniforms:new Map([["luminanceBuffer",new _u(null)],["maxLuminance",new _u(i)],["whitePoint",new _u(a)],["middleGrey",new _u(s)],["averageLuminance",new _u(l)]])}),this.renderTargetLuminance=new se(1,1,{minFilter:E,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new Sb({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new lb(this.luminancePass.texture,{minLuminance:o,adaptationRate:c}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=r,this.mode=n}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(t){if(this.mode!==t){switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",t.toFixed(0)),t){case Uv:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case jv:this.defines.set("toneMapping(texel)","OptimizedCineonToneMapping(texel)");break;case Vv:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel")}this.adaptiveLuminancePass.enabled=t===Hv,this.setChanged()}}getMode(){return this.mode}setMode(t){this.mode=t}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(t){this.uniforms.get("whitePoint").value=t}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(t){this.uniforms.get("middleGrey").value=t}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(t){this.uniforms.get("averageLuminance").value=t}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(t){const e=Math.max(0,Math.ceil(Math.log2(t))),n=Math.pow(2,e);this.luminancePass.resolution.setPreferredSize(n,n),this.adaptiveLuminanceMaterial.mipLevel1x1=e}getResolution(){return this.resolution}setResolution(t){this.resolution=t}get adaptive(){return this.mode===Hv}set adaptive(t){this.mode=t?Hv:Gv}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(t){this.adaptiveLuminanceMaterial.adaptationRate=t}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(t){console.warn(this.name,"distinction was removed.")}update(t,e,n){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(t,e),this.adaptiveLuminancePass.render(t,null,null,n))}initialize(t,e,n){this.adaptiveLuminancePass.initialize(t,e,n)}}),Ub(class extends Ib{constructor({blendFunction:t,technique:e=Wv,eskil:n=!1,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new _u(r)],["darkness",new _u(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===$v}set eskil(t){this.technique=t?$v:Wv}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}}),Ub(class extends Ib{constructor(t,e=new ue,{speed:n=2,maxRadius:r=1,waveSize:i=.2,amplitude:a=.05}={}){super("ShockWaveEffect","uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",{vertexShader:"uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",uniforms:new Map([["active",new _u(!1)],["center",new _u(new Ot(.5,.5))],["cameraDistance",new _u(1)],["size",new _u(1)],["radius",new _u(-i)],["maxRadius",new _u(r)],["waveSize",new _u(i)],["amplitude",new _u(a)]])}),this.position=e,this.speed=n,this.camera=t,this.screenPosition=this.uniforms.get("center").value,this.time=0,this.active=!1}get amplitude(){return this.uniforms.get("amplitude").value}set amplitude(t){this.uniforms.get("amplitude").value=t}get waveSize(){return this.uniforms.get("waveSize").value}set waveSize(t){this.uniforms.get("waveSize").value=t}get maxRadius(){return this.uniforms.get("maxRadius").value}set maxRadius(t){this.uniforms.get("maxRadius").value=t}get epicenter(){return this.position}set epicenter(t){this.position=t}getPosition(){return this.position}setPosition(t){this.position=t}getSpeed(){return this.speed}setSpeed(t){this.speed=t}explode(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}update(t,e,n){const r=this.position,i=this.camera,a=this.uniforms,s=a.get("active");if(this.active){const t=a.get("waveSize").value;i.getWorldDirection(Ob),Nb.copy(i.position).sub(r),s.value=Ob.angleTo(Nb)>Bb,s.value&&(a.get("cameraDistance").value=i.position.distanceTo(r),Ob.copy(r).project(i),this.screenPosition.set(.5*(Ob.x+1),.5*(Ob.y+1))),this.time+=n*this.speed;const e=this.time-t;a.get("radius").value=e,e>=2*(a.get("maxRadius").value+t)&&(this.active=!1,s.value=!1)}}});const Yb=["cube","cylinder","sphere","capsule","arrow"],qb=(0,r.createContext)(),Xb=({meshes:t,children:e})=>Sh(qb.Provider,{value:t,children:e}),Jb=(0,r.forwardRef)((({objectKey:t,highlightColor:e,position:n,rotation:i,scale:a,ghost:s},o)=>{const l=Yy(o,(0,r.useRef)(null)),c=sy((t=>t.onClick)),u=sy((t=>t.onPointerOver)),h=sy((t=>t.onPointerOut)),d=sy((t=>t.clock)),f=sy((0,r.useCallback)((e=>e.items[t]),[t])),p=(t=>{const e=(0,r.useContext)(qb)[t.shape];return Yb.includes(t.shape)?$y(t):e&&"function"==typeof e?e():(console.warn(`Shape not loaded: ${t.shape} (reading property 'shape' of item)`,t),[])})(f);return cd((0,r.useCallback)((()=>{const t=1e3*d.getElapsed();l.current&&(l.current.position.set(n?n.x:"function"==typeof f.position.x?f.position.x(t):f.position.x,n?n.y:"function"==typeof f.position.y?f.position.y(t):f.position.y,n?n.z:"function"==typeof f.position.z?f.position.z(t):f.position.z),l.current.quaternion.set(i?i.x:"function"==typeof f.rotation.x?f.rotation.x(t):f.rotation.x,i?i.y:"function"==typeof f.rotation.y?f.rotation.y(t):f.rotation.y,i?i.z:"function"==typeof f.rotation.z?f.rotation.z(t):f.rotation.z,i?i.w:"function"==typeof f.rotation.w?f.rotation.w(t):f.rotation.w),l.current.scale.set(a?a.x:"function"==typeof f.scale.x?f.scale.x(t):f.scale.x,a?a.y:"function"==typeof f.scale.y?f.scale.y(t):f.scale.y,a?a.z:"function"==typeof f.scale.z?f.scale.z(t):f.scale.z),l.current.visible="function"==typeof f.hidden?!f.hidden(t):!f.hidden)}),[f,n,i,a,l,d])),Sh(Wb,{enabled:f.highlighted,children:Eh("group",{ref:l,up:[0,0,1],children:[Sh("group",{up:[0,0,1],rotation:[Math.PI/2,0,0],onPointerDown:e=>{c(t,!l.current.visible,e)},onPointerOver:e=>{u(t,!l.current.visible,e)},onPointerOut:e=>{h(t,!l.current.visible,e)},children:p.map(((n,r)=>Sh(Kb,{idx:r,groupOrPart:n,objectKey:t,ghost:s,highlightColor:e},r)))}),f.showName&&Sh(Of,{distanceFactor:3,position:[0,0,.2],children:Sh("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey",padding:5,userSelect:"none"},children:f.name})})]})})})),Zb=({part:t,objectKey:e,ghost:n,highlightColor:i})=>{const a=sy((0,r.useCallback)((t=>t.items[e].wireframe),[e])),s=sy((0,r.useCallback)((t=>t.items[e].color),[e])),o=void 0!==s,l=(0,r.useRef)(),c=(0,r.useRef)(),u=sy((t=>t.clock));return cd((0,r.useCallback)((()=>{const t=1e3*u.getElapsed();n||(Wy(c,s,t),Wy(l,s,t))}),[n,l,c,u,s])),n?Sh("mesh",{ref:c,geometry:t.geometry,material:hy(i),scale:t.scale,castShadow:!1,receiveShadow:!1},"B"):o?Eh("group",{up:[0,0,1],children:[Sh("mesh",{ref:c,geometry:t.geometry,scale:t.scale,castShadow:!1,receiveShadow:!1,children:Sh("meshLambertMaterial",{transparent:!0,wireframe:a,attach:"material",opacity:1,side:1})},"B"),Sh("mesh",{ref:l,geometry:t.geometry,scale:t.scale,castShadow:!1,receiveShadow:!1,children:Sh("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:a,opacity:1,side:0})},"F")]}):Sh(wh,{children:Sh("mesh",{ref:l,geometry:t.geometry,material:t.material,scale:t.scale,castShadow:!0,receiveShadow:!0,wireframe:a},"I")})},Kb=({idx:t,groupOrPart:e,ghost:n,objectKey:r,highlightColor:i})=>"group"===e.type?Sh("group",{up:[0,0,1],position:e.position,rotation:e.rotation,scale:e.scale,children:e.children.map(((t,e)=>Sh(Kb,{idx:e,groupOrPart:t,objectKey:r,ghost:n,highlightColor:i},e)))},t):Sh(Zb,{part:e,objectKey:r,highlightColor:i,ghost:n},t),Qb=(0,r.forwardRef)((({objectKey:t},e)=>{const n=Yy(e,(0,r.useRef)(null)),{vertices:i,width:a,hidden:s}=sy((0,r.useCallback)((e=>({vertices:e.lines[t].vertices,width:e.lines[t].width,hidden:e.lines[t].hidden})),[t]));return i.length<=1?null:Sh(bp,{ref:n,visible:!s,points:i.map((t=>[t.position.x,t.position.y,t.position.z])),color:"white",vertexColors:i.map((t=>[t.color.r/255,t.color.g/255,t.color.b/255])),lineWidth:a})}));function tx(t,e){if(Object.is(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}const ex=(0,r.forwardRef)((({objectKey:t},e)=>{const n=Yy(e,(0,r.useRef)(null)),i=sy((t=>t.onClick)),a=sy((t=>t.onPointerOver)),s=sy((t=>t.onPointerOut)),o=sy((0,r.useCallback)((e=>e.hulls[t]),[t]),tx),l=sy((0,r.useCallback)((e=>e.hulls[t].vertices),[t])),c=sy((t=>t.clock)),u=(0,r.useRef)(),h=(0,r.useRef)(),d="function"==typeof l?l(0):l,f=new zf(d.map((t=>new ue(t.x,t.y,t.z))));return cd((0,r.useCallback)((()=>{const t=1e3*c.getElapsed();Wy(h,o.color,t),Wy(u,o.color,t);const e="function"==typeof l?l(t):l;if(e!==d){const t=new zf(e.map((t=>new ue(t.x,t.y,t.z))));u.current.geometry=t,h.current.geometry=t}const n="function"==typeof o.hidden?!o.hidden(t):!o.hidden;u.current.visible=n,h.current.visible=n}),[u,h,d,o,c,l])),Sh(Wb,{enabled:o.highlighted,children:Eh("group",{ref:n,up:[0,0,1],children:[Eh("group",{up:[0,0,1],onPointerDown:e=>{i(t,u.current.visible,e)},onPointerOver:e=>{a(t,u.current.visible,e)},onPointerOut:e=>{s(t,u.current.visible,e)},children:[Sh("mesh",{ref:h,geometry:f,castShadow:!1,receiveShadow:!1,children:Sh("meshLambertMaterial",{transparent:!0,wireframe:o.wireframe,attach:"material",side:1})},`${t}B`),Sh("mesh",{ref:u,geometry:f,castShadow:!1,receiveShadow:!1,children:Sh("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:o.wireframe,side:0})},`${t}F`)]}),o.showName&&Sh(Of,{distanceFactor:2,position:[0,0,.5],children:Sh("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey"},className:"disable-text-selection",children:o.name})})]})})})),nx=(0,r.forwardRef)((({objectKey:t},e)=>{const n=Yy(e,(0,r.useRef)(null)),i=(0,r.useRef)(),a=sy((t=>t.clock)),s=sy((0,r.useCallback)((e=>e.texts[t]),[t]));return cd((0,r.useCallback)((()=>{const t=1e3*a.getElapsed();n.current&&(n.current.position.set("function"==typeof s.position.x?s.position.x(t):s.position.x,"function"==typeof s.position.y?s.position.y(t):s.position.y,"function"==typeof s.position.z?s.position.z(t):s.position.z),n.current.visible="function"==typeof s.hidden?!s.hidden(t):!s.hidden),i.current&&Wy(i,s.color,t)}),[s,n,a])),Sh("group",{ref:n,children:Sh(vp,{follow:!0,children:Sh(pm,{ref:i,depthOffset:2,children:s.value})})})})),rx=(0,r.memo)((({activeTf:t,displayTfs:e,allTfs:n,allItems:r,allLines:i,allHulls:a,allTexts:s,highlightColor:o,ghosts:l,targetRef:c,targetId:u,targetSource:h,filterActive:d,tfFilter:f,customProps:p})=>{const m="world"===t?Xy:"gizmo"===t?Jy:qy,g=t===u?p:{},y=d?n.filter((t=>f.includes(t.key))):n,v=d&&t!==c;return Eh(m,{objectKey:t,displayTfs:e,ref:u===t?c:null,...g,ghost:l,highlightColor:o,children:[y.filter((e=>e.frame===t||"world"===t&&!e.frame)).map((t=>Sh(rx,{activeTf:t.key,displayTfs:e,allTfs:n,allItems:r,allLines:i,allHulls:a,allTexts:s,highlightColor:o,ghosts:l,targetRef:c,targetSource:h,targetId:u,filterActive:v,tfFilter:f,customProps:p},t.key))),r.filter((e=>e.frame===t||"world"===t&&!e.frame)).map((e=>{const n=e.key===u&&"items"===h?p:{};return d&&e.key!==u&&t!==u?null:Sh(Jb,{objectKey:e.key,highlightColor:o,ghost:l,ref:e.key===u?c:null,...n},e.key)})),i.filter((e=>e.frame===t||"world"===t&&!e.frame)).map((e=>{const n=e.key===u&&"lines"===h?p:{};return d&&e.key!==u&&t!==u?null:Sh(Qb,{objectKey:e.key,ref:e.lineKey===u?c:null,...n},e.key)})),a.filter((e=>e.frame===t||"world"===t&&!e.frame)).map((e=>{const n=e.key===u&&"hulls"===h?p:{};return d&&e.key!==u&&t!==u?null:Sh(ex,{objectKey:e.key,highlightColor:o,ghost:l,ref:e.key===u?c:null,...n},e.key)})),s.filter((e=>e.frame===t||"world"===t&&!e.frame)).map((e=>{const n=e.key===u&&"texts"===h?p:{};return d&&e.key!==u&&t!==u?null:Sh(nx,{objectKey:e.key,highlightColor:o,ref:e.key===u?c:null,...n},e.key)}))]})})),ix=["enabled","axis","mode","translationSnap","rotationSnap","scaleSnap","space","size","showX","showY","showZ"],ax=["displayTfs","allTfs","allItems","allLines","allHulls","allTexts","highlightColor"],sx=(0,r.memo)((({camera:t,objectInfo:e,highlightColor:n,translateSnap:i,rotateSnap:a,scaleSnap:s,onDragStart:o,onDragEnd:l,...c})=>{const u=Fm(c,ix),h=Fm(c,ax),d=sy((0,r.useCallback)((t=>{let n=[];"tfs"===e.source&&n.push(e.key);let r=t[e.source][e.key].frame;for(;r&&"world"!==r&&"gizmo"!==r;){let e=t.tfs[r];n.push(r),r=e.frame}return n}),[e])),f=(0,r.useRef)(),p=(0,r.useRef)(),m=ld((({gl:t})=>t)),g=ld((({camera:t})=>t)),y=ld((({invalidate:t})=>t)),v=t||g,[b]=(0,r.useState)((()=>new _y(v,m.domElement)));b.translationSnap=i,b.rotationSnap=a,b.scaleSnap=s;const[x,_]=(0,r.useState)(!1),[w,S]=(0,r.useState)(null),[E,M]=(0,r.useState)(null),[C,T]=(0,r.useState)(null),A=sy((t=>t.onMove),tx);return(0,r.useEffect)((()=>{const t=t=>{var n,r,i;const a=null==(n=null==p?void 0:p.current)?void 0:n.position,s=null==(r=null==p?void 0:p.current)?void 0:r.quaternion,c=null==(i=null==p?void 0:p.current)?void 0:i.scale;t.value&&!x?(_(!0),o&&o()):!t.value&&x&&(_(!1),l&&l(),A(e.key,e.source,{position:b.worldPosition,quaternion:b.worldQuaternion,scale:b._worldScale},{position:a?{x:a.x,y:a.y,z:a.z}:null,quaternion:s?{x:s.x,y:s.y,z:s.z,w:s.w}:null,scale:c?{x:c.x,y:c.y,z:c.z}:null})),a&&S(a),s&&M(s),c&&T(c)};return b&&b.addEventListener("dragging-changed",t),()=>{b.removeEventListener("dragging-changed",t)}})),(0,r.useEffect)((()=>{null==b||b.attach(p.current)}),[p,b]),(0,r.useEffect)((()=>(b&&b.addEventListener("change",y),()=>{var t;return null==(t=null==b?void 0:b.removeEventListener)?void 0:t.call(b,"change",y)})),[b,y]),b?Eh(wh,{children:[Sh("primitive",{ref:f,object:b,...u}),Sh(rx,{...h,activeTf:"world",tfFilter:d,ghosts:!0,targetRef:p,targetSource:e.source,targetId:e.key,filterActive:!0,customProps:{position:w,rotation:E,scale:C}})]}):null})),ox=(t,e)=>t.length===e.length&&!t.some(((t,n)=>!ey.exports.isEqual(e[n],t)));function lx({displayTfs:t=!1,displayGrid:e=!0,isPolar:n=!1,backgroundColor:i="#d0d0d0",planeColor:a="#a8a8a8",highlightColor:s="#00ffff",plane:o=0,translateSnap:l=0,rotateSnap:c=0,scaleSnap:u=0,debug:h=!1}){h&&console.log("content rerender");const d=ld((t=>t.camera)),f=sy((t=>t.clock),tx);cd((()=>{f.update()}));const p=sy((t=>ey.exports.sortBy(Object.entries(t.tfs).map((([t,e])=>({key:t,frame:e.frame,transformMode:e.transformMode,source:"tfs"}))),(t=>t.key))),ox),m=sy((t=>ey.exports.sortBy(Object.entries(t.items).map((([t,e])=>({key:t,frame:e.frame,transformMode:e.transformMode,source:"items"}))),(t=>t.key))),ox),g=sy((t=>ey.exports.sortBy(Object.entries(t.lines).map((([t,e])=>({key:t,frame:e.frame,source:"lines"}))),(t=>t.key))),ox),y=sy((t=>ey.exports.sortBy(Object.entries(t.hulls).map((([t,e])=>({key:t,frame:e.frame,source:"hulls"}))),(t=>t.key))),ox),v=sy((t=>ey.exports.sortBy(Object.entries(t.texts).map((([t,e])=>({key:t,frame:e.frame,source:"texts"}))),(t=>t.key))),ox),b=[...m,...p].filter((t=>["translate","rotate","scale"].includes(t.transformMode))),x=(0,r.useRef)(),_=(0,r.useRef)(),w=(0,r.useRef)(),S=(0,r.useRef)(),E=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,r){return e+e+n+n+r+r}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}(a),M=[E.r,E.g,E.b,.5];return Eh(r.Fragment,{children:[Sh(zm,{ref:S,makeDefault:!0,camera:d}),Sh("pointLight",{ref:_,intensity:.5,position:[-1,-3,3],color:"#FFFAEE"}),Sh(ly,{ref:x,intensity:.7,color:"white"}),Sh(cy,{ref:w,castShadow:!0,position:[5,15,15],intensity:.6,color:"#FFFAEE"}),Sh("spotLight",{penumbra:1,position:[-1,-1,4],intensity:.3,castShadow:!0,color:"#FFFAEE"}),Sh("color",{attach:"background",args:[i]}),Sh("fogExp2",{attach:"fog",args:[i,.01]}),Sh(Um,{receiveShadow:!0,scale:1e3,position:[0,0,o-.01],material:uy(...M)}),Eh(Vb,{children:[Sh(Hb,{autoClear:!1,children:Sh($b,{visibleEdgeColor:s,hiddenEdgeColor:s,blur:!0,kernelSize:1,edgeStrength:50,pulseSpeed:.25,xRay:!0})}),Sh(rx,{activeTf:"world",displayTfs:t,allTfs:p,allItems:m,allLines:g,allHulls:y,allTexts:v,highlightColor:s})]}),Sh("group",{position:[0,0,o],rotation:[Math.PI/2,0,0],up:[0,0,1],children:e&&(n?Sh("polarGridHelper",{args:[10,16,8,64,"white","gray"]}):Sh("gridHelper",{args:[20,20,"white","gray"]}))}),b.map((e=>Sh(sx,{objectInfo:e,mode:e.transformMode,displayTfs:t,allTfs:p,allItems:m,allLines:g,allHulls:y,allTexts:v,translateSnap:l,rotateSnap:c,scaleSnap:u,highlightColor:s,onDragEnd:()=>{S.current&&(S.current.enabled=!0)},onDragStart:()=>{S.current&&(S.current.enabled=!1)}},`movableObjectTransform-${e.key}`)))]})}fn.DefaultUp.set(0,0,1);function cx({backgroundColor:t="#d0d0d0",store:e,fov:n=60,onPointerMissed:i=(()=>{}),meshLookup:a={},debug:s=!1,...o}){return s&&console.log("Scene rerender"),Sh(Ad,{camera:{up:[0,0,1],fov:n,position:[0,-3,3]},shadows:!0,style:{background:t||"#d0d0d0"},resize:{polyfill:yf},onPointerMissed:i||(()=>{}),children:Sh(oy,{store:e,debug:s,children:Sh(Xb,{meshes:a,children:Sh(r.Suspense,{children:Sh(lx,{...o,backgroundColor:t,debug:s})})})})})}},53:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<a(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=t[o],c=o+1,u=t[c];if(0>a(l,n))c<i&&0>a(u,l)?(t[r]=u,t[c]=n,r=c):(t[r]=l,t[o]=n,r=o);else{if(!(c<i&&0>a(u,n)))break t;t[r]=u,t[c]=n,r=c}}}return e}function a(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(t){for(var e=r(u);null!==e;){if(null===e.callback)i(u);else{if(!(e.startTime<=t))break;i(u),e.sortIndex=e.expirationTime,n(c,e)}e=r(u)}}function _(t){if(g=!1,x(t),!m)if(null!==r(c))m=!0,I(w);else{var e=r(u);null!==e&&D(_,e.startTime-t)}}function w(t,n){m=!1,g&&(g=!1,v(C),C=-1),p=!0;var a=f;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||t&&!k());){var s=d.callback;if("function"==typeof s){d.callback=null,f=d.priorityLevel;var o=s(d.expirationTime<=n);n=e.unstable_now(),"function"==typeof o?d.callback=o:d===r(c)&&i(c),x(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(_,h.startTime-n),l=!1}return l}finally{d=null,f=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,M=null,C=-1,T=5,A=-1;function k(){return!(e.unstable_now()-A<T)}function L(){if(null!==M){var t=e.unstable_now();A=t;var n=!0;try{n=M(!0,t)}finally{n?S():(E=!1,M=null)}}else E=!1}if("function"==typeof b)S=function(){b(L)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=L,S=function(){R.postMessage(null)}}else S=function(){y(L,0)};function I(t){M=t,E||(E=!0,S())}function D(t,n){C=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,I(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,a){var s=e.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(t.sortIndex=a,n(u,t),null===r(c)&&t===r(u)&&(g?(v(C),C=-1):g=!0,D(_,a-s))):(t.sortIndex=o,n(c,t),m||p||(m=!0,I(w))),t},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},3840:(t,e,n)=>{"use strict";t.exports=n(53)},4141:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>Rt});var r=n(9864),i=n(7294),a=n(6774),s=n.n(a);const o=function(t){function e(t,r,l,c,d){for(var f,p,m,g,x,w=0,S=0,E=0,M=0,C=0,R=0,D=m=f=0,O=0,N=0,F=0,z=0,U=l.length,G=U-1,H="",j="",V="",W="";O<U;){if(p=l.charCodeAt(O),O===G&&0!==S+M+E+w&&(0!==S&&(p=47===S?10:47),M=E=w=0,U++,G++),0===S+M+E+w){if(O===G&&(0<N&&(H=H.replace(h,"")),0<H.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:H+=l.charAt(O)}p=59}switch(p){case 123:for(f=(H=H.trim()).charCodeAt(0),m=1,z=++O;O<U;){switch(p=l.charCodeAt(O)){case 123:m++;break;case 125:m--;break;case 47:switch(p=l.charCodeAt(O+1)){case 42:case 47:t:{for(D=O+1;D<G;++D)switch(l.charCodeAt(D)){case 47:if(42===p&&42===l.charCodeAt(D-1)&&O+2!==D){O=D+1;break t}break;case 10:if(47===p){O=D+1;break t}}O=D}}break;case 91:p++;case 40:p++;case 34:case 39:for(;O++<G&&l.charCodeAt(O)!==p;);}if(0===m)break;O++}if(m=l.substring(z,O),0===f&&(f=(H=H.replace(u,"").trim()).charCodeAt(0)),64===f){switch(0<N&&(H=H.replace(h,"")),p=H.charCodeAt(1)){case 100:case 109:case 115:case 45:N=r;break;default:N=P}if(z=(m=e(r,N,m,p,d+1)).length,0<I&&(x=o(3,m,N=n(P,H,F),r,A,T,z,p,d,c),H=N.join(""),void 0!==x&&0===(z=(m=x.trim()).length)&&(p=0,m="")),0<z)switch(p){case 115:H=H.replace(_,s);case 100:case 109:case 45:m=H+"{"+m+"}";break;case 107:m=(H=H.replace(y,"$1 $2"))+"{"+m+"}",m=1===L||2===L&&a("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=H+m,112===c&&(j+=m,m="")}else m=""}else m=e(r,n(r,H,F),m,c,d+1);V+=m,m=F=N=D=f=0,H="",p=l.charCodeAt(++O);break;case 125:case 59:if(1<(z=(H=(0<N?H.replace(h,""):H).trim()).length))switch(0===D&&(f=H.charCodeAt(0),45===f||96<f&&123>f)&&(z=(H=H.replace(" ",":")).length),0<I&&void 0!==(x=o(1,H,r,t,A,T,j.length,c,d,c))&&0===(z=(H=x.trim()).length)&&(H="\0\0"),f=H.charCodeAt(0),p=H.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){W+=H+l.charAt(O);break}default:58!==H.charCodeAt(z-1)&&(j+=i(H,f,p,H.charCodeAt(2)))}F=N=D=f=0,H="",p=l.charCodeAt(++O)}}switch(p){case 13:case 10:47===S?S=0:0===1+f&&107!==c&&0<H.length&&(N=1,H+="\0"),0<I*B&&o(0,H,r,t,A,T,j.length,c,d,c),T=1,A++;break;case 59:case 125:if(0===S+M+E+w){T++;break}default:switch(T++,g=l.charAt(O),p){case 9:case 32:if(0===M+w+S)switch(C){case 44:case 58:case 9:case 32:g="";break;default:32!==p&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===M+S+w&&(N=F=1,g="\f"+g);break;case 108:if(0===M+S+w+k&&0<D)switch(O-D){case 2:112===C&&58===l.charCodeAt(O-3)&&(k=C);case 8:111===R&&(k=R)}break;case 58:0===M+S+w&&(D=O);break;case 44:0===S+E+M+w&&(N=1,g+="\r");break;case 34:case 39:0===S&&(M=M===p?0:0===M?p:M);break;case 91:0===M+S+E&&w++;break;case 93:0===M+S+E&&w--;break;case 41:0===M+S+w&&E--;break;case 40:if(0===M+S+w){if(0===f)if(2*C+3*R==533);else f=1;E++}break;case 64:0===S+E+M+w+D+m&&(m=1);break;case 42:case 47:if(!(0<M+w+E))switch(S){case 0:switch(2*p+3*l.charCodeAt(O+1)){case 235:S=47;break;case 220:z=O,S=42}break;case 42:47===p&&42===C&&z+2!==O&&(33===l.charCodeAt(z+2)&&(j+=l.substring(z,O+1)),g="",S=0)}}0===S&&(H+=g)}R=C,C=p,O++}if(0<(z=j.length)){if(N=r,0<I&&(void 0!==(x=o(2,j,N,t,A,T,z,c,d,c))&&0===(j=x).length))return W+j+V;if(j=N.join(",")+"{"+j+"}",0!=L*k){switch(2!==L||a(j,2)||(k=0),k){case 111:j=j.replace(b,":-moz-$1")+j;break;case 112:j=j.replace(v,"::-webkit-input-$1")+j.replace(v,"::-moz-$1")+j.replace(v,":-ms-input-$1")+j}k=0}}return W+j+V}function n(t,e,n){var i=e.trim().split(m);e=i;var a=i.length,s=t.length;switch(s){case 0:case 1:var o=0;for(t=0===s?"":t[0]+" ";o<a;++o)e[o]=r(t,e[o],n).trim();break;default:var l=o=0;for(e=[];o<a;++o)for(var c=0;c<s;++c)e[l++]=r(t[c]+" ",i[o],n).trim()}return e}function r(t,e,n){var r=e.charCodeAt(0);switch(33>r&&(r=(e=e.trim()).charCodeAt(0)),r){case 38:return e.replace(g,"$1"+t.trim());case 58:return t.trim()+e.replace(g,"$1"+t.trim());default:if(0<1*n&&0<e.indexOf("\f"))return e.replace(g,(58===t.charCodeAt(0)?"":"$1")+t.trim())}return t+e}function i(t,e,n,r){var s=t+";",o=2*e+3*n+4*r;if(944===o){t=s.indexOf(":",9)+1;var l=s.substring(t,s.length-1).trim();return l=s.substring(0,t).trim()+l+";",1===L||2===L&&a(l,1)?"-webkit-"+l+l:l}if(0===L||2===L&&!a(s,1))return s;switch(o){case 1015:return 97===s.charCodeAt(10)?"-webkit-"+s+s:s;case 951:return 116===s.charCodeAt(3)?"-webkit-"+s+s:s;case 963:return 110===s.charCodeAt(5)?"-webkit-"+s+s:s;case 1009:if(100!==s.charCodeAt(4))break;case 969:case 942:return"-webkit-"+s+s;case 978:return"-webkit-"+s+"-moz-"+s+s;case 1019:case 983:return"-webkit-"+s+"-moz-"+s+"-ms-"+s+s;case 883:if(45===s.charCodeAt(8))return"-webkit-"+s+s;if(0<s.indexOf("image-set(",11))return s.replace(C,"$1-webkit-$2")+s;break;case 932:if(45===s.charCodeAt(4))switch(s.charCodeAt(5)){case 103:return"-webkit-box-"+s.replace("-grow","")+"-webkit-"+s+"-ms-"+s.replace("grow","positive")+s;case 115:return"-webkit-"+s+"-ms-"+s.replace("shrink","negative")+s;case 98:return"-webkit-"+s+"-ms-"+s.replace("basis","preferred-size")+s}return"-webkit-"+s+"-ms-"+s+s;case 964:return"-webkit-"+s+"-ms-flex-"+s+s;case 1023:if(99!==s.charCodeAt(8))break;return"-webkit-box-pack"+(l=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+s+"-ms-flex-pack"+l+s;case 1005:return f.test(s)?s.replace(d,":-webkit-")+s.replace(d,":-moz-")+s:s;case 1e3:switch(e=(l=s.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(e)){case 226:l=s.replace(x,"tb");break;case 232:l=s.replace(x,"tb-rl");break;case 220:l=s.replace(x,"lr");break;default:return s}return"-webkit-"+s+"-ms-"+l+s;case 1017:if(-1===s.indexOf("sticky",9))break;case 975:switch(e=(s=t).length-10,o=(l=(33===s.charCodeAt(e)?s.substring(0,e):s).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:s=s.replace(l,"-webkit-"+l)+";"+s;break;case 207:case 102:s=s.replace(l,"-webkit-"+(102<o?"inline-":"")+"box")+";"+s.replace(l,"-webkit-"+l)+";"+s.replace(l,"-ms-"+l+"box")+";"+s}return s+";";case 938:if(45===s.charCodeAt(5))switch(s.charCodeAt(6)){case 105:return l=s.replace("-items",""),"-webkit-"+s+"-webkit-box-"+l+"-ms-flex-"+l+s;case 115:return"-webkit-"+s+"-ms-flex-item-"+s.replace(S,"")+s;default:return"-webkit-"+s+"-ms-flex-line-pack"+s.replace("align-content","").replace(S,"")+s}break;case 973:case 989:if(45!==s.charCodeAt(3)||122===s.charCodeAt(4))break;case 931:case 953:if(!0===M.test(t))return 115===(l=t.substring(t.indexOf(":")+1)).charCodeAt(0)?i(t.replace("stretch","fill-available"),e,n,r).replace(":fill-available",":stretch"):s.replace(l,"-webkit-"+l)+s.replace(l,"-moz-"+l.replace("fill-",""))+s;break;case 962:if(s="-webkit-"+s+(102===s.charCodeAt(5)?"-ms-"+s:"")+s,211===n+r&&105===s.charCodeAt(13)&&0<s.indexOf("transform",10))return s.substring(0,s.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+s}return s}function a(t,e){var n=t.indexOf(1===e?":":"{"),r=t.substring(0,3!==e?n:10);return n=t.substring(n+1,t.length-1),D(2!==e?r:r.replace(E,"$1"),n,e)}function s(t,e){var n=i(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return n!==e+";"?n.replace(w," or ($1)").substring(4):"("+e+")"}function o(t,e,n,r,i,a,s,o,l,u){for(var h,d=0,f=e;d<I;++d)switch(h=R[d].call(c,t,f,n,r,i,a,s,o,l,u)){case void 0:case!1:case!0:case null:break;default:f=h}if(f!==e)return f}function l(t){return void 0!==(t=t.prefix)&&(D=null,t?"function"!=typeof t?L=1:(L=2,D=t):L=0),l}function c(t,n){var r=t;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<I){var i=o(-1,n,r,r,A,T,0,0,0,0);void 0!==i&&"string"==typeof i&&(n=i)}var a=e(P,r,n,0,0);return 0<I&&(void 0!==(i=o(-2,a,r,r,A,T,a.length,0,0,0))&&(a=i)),"",k=0,T=A=1,a}var u=/^\0+/g,h=/[\0\r\f]/g,d=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,_=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,E=/[^]*?(:[rp][el]a[\w-]+)[^]*/,M=/stretch|:\s*\w+\-(?:conte|avail)/,C=/([^-])(image-set\()/,T=1,A=1,k=0,L=1,P=[],R=[],I=0,D=null,B=0;return c.use=function t(e){switch(e){case void 0:case null:I=R.length=0;break;default:if("function"==typeof e)R[I++]=e;else if("object"==typeof e)for(var n=0,r=e.length;n<r;++n)t(e[n]);else B=0|!!e}return t},c.set=l,void 0!==t&&l(t),c};const l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var c=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const u=function(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){return c.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91}));var h=n(8679),d=n.n(h);function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var p=function(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n},m=function(t){return null!==t&&"object"==typeof t&&"[object Object]"===(t.toString?t.toString():Object.prototype.toString.call(t))&&!(0,r.typeOf)(t)},g=Object.freeze([]),y=Object.freeze({});function v(t){return"function"==typeof t}function b(t){return t.displayName||t.name||"Component"}function x(t){return t&&"string"==typeof t.styledComponentId}var _="undefined"!=typeof process&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",w="undefined"!=typeof window&&"HTMLElement"in window,S=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&("false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY));function E(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var M=function(){function t(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}var e=t.prototype;return e.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},e.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;t>=i;)(i<<=1)<0&&E(16,""+t);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var s=this.indexOfGroup(t+1),o=0,l=e.length;o<l;o++)this.tag.insertRule(s,e[o])&&(this.groupSizes[t]++,s++)},e.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),r=n+e;this.groupSizes[t]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.getGroup=function(t){var e="";if(t>=this.length||0===this.groupSizes[t])return e;for(var n=this.groupSizes[t],r=this.indexOfGroup(t),i=r+n,a=r;a<i;a++)e+=this.tag.getRule(a)+"/*!sc*/\n";return e},t}(),C=new Map,T=new Map,A=1,k=function(t){if(C.has(t))return C.get(t);for(;T.has(A);)A++;var e=A++;return C.set(t,e),T.set(e,t),e},L=function(t){return T.get(t)},P=function(t,e){e>=A&&(A=e+1),C.set(t,e),T.set(e,t)},R="style["+_+'][data-styled-version="5.3.6"]',I=new RegExp("^"+_+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),D=function(t,e,n){for(var r,i=n.split(","),a=0,s=i.length;a<s;a++)(r=i[a])&&t.registerName(e,r)},B=function(t,e){for(var n=(e.textContent||"").split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var s=n[i].trim();if(s){var o=s.match(I);if(o){var l=0|parseInt(o[1],10),c=o[2];0!==l&&(P(c,l),D(t,c,o[3]),t.getTag().insertRules(l,r)),r.length=0}else r.push(s)}}},O=function(){return n.nc},N=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(t){for(var e=t.childNodes,n=e.length;n>=0;n--){var r=e[n];if(r&&1===r.nodeType&&r.hasAttribute(_))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(_,"active"),r.setAttribute("data-styled-version","5.3.6");var s=O();return s&&r.setAttribute("nonce",s),n.insertBefore(r,a),r},F=function(){function t(t){var e=this.element=N(t);e.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var e=document.styleSheets,n=0,r=e.length;n<r;n++){var i=e[n];if(i.ownerNode===t)return i}E(17)}(e),this.length=0}var e=t.prototype;return e.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch(t){return!1}},e.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.getRule=function(t){var e=this.sheet.cssRules[t];return void 0!==e&&"string"==typeof e.cssText?e.cssText:""},t}(),z=function(){function t(t){var e=this.element=N(t);this.nodes=e.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e),r=this.nodes[t];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},e.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},t}(),U=function(){function t(t){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},e.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.getRule=function(t){return t<this.length?this.rules[t]:""},t}(),G=w,H={isServer:!w,useCSSOMInjection:!S},j=function(){function t(t,e,n){void 0===t&&(t=y),void 0===e&&(e={}),this.options=f({},H,{},t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&w&&G&&(G=!1,function(t){for(var e=document.querySelectorAll(R),n=0,r=e.length;n<r;n++){var i=e[n];i&&"active"!==i.getAttribute(_)&&(B(t,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}t.registerId=function(t){return k(t)};var e=t.prototype;return e.reconstructWithOptions=function(e,n){return void 0===n&&(n=!0),new t(f({},this.options,{},e),this.gs,n&&this.names||void 0)},e.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.getTag=function(){return this.tag||(this.tag=(n=(e=this.options).isServer,r=e.useCSSOMInjection,i=e.target,t=n?new U(i):r?new F(i):new z(i),new M(t)));var t,e,n,r,i},e.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},e.registerName=function(t,e){if(k(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},e.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(k(t),n)},e.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.clearRules=function(t){this.getTag().clearGroup(k(t)),this.clearNames(t)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(t){for(var e=t.getTag(),n=e.length,r="",i=0;i<n;i++){var a=L(i);if(void 0!==a){var s=t.names.get(a),o=e.getGroup(i);if(s&&o&&s.size){var l=_+".g"+i+'[id="'+a+'"]',c="";void 0!==s&&s.forEach((function(t){t.length>0&&(c+=t+",")})),r+=""+o+l+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},t}(),V=/(a)(d)/gi,W=function(t){return String.fromCharCode(t+(t>25?39:97))};function $(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=W(e%52)+n;return(W(e%52)+n).replace(V,"$1-$2")}var Y=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},q=function(t){return Y(5381,t)};function X(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(v(n)&&!x(n))return!1}return!0}var J=q("5.3.6"),Z=function(){function t(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&X(t),this.componentId=e,this.baseHash=Y(J,e),this.baseStyle=n,j.registerId(e)}return t.prototype.generateAndInjectStyles=function(t,e,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(t,e,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=mt(this.rules,t,e,n).join(""),s=$(Y(this.baseHash,a)>>>0);if(!e.hasNameForId(r,s)){var o=n(a,"."+s,void 0,r);e.insertRules(r,s,o)}i.push(s),this.staticRulesId=s}else{for(var l=this.rules.length,c=Y(this.baseHash,n.hash),u="",h=0;h<l;h++){var d=this.rules[h];if("string"==typeof d)u+=d;else if(d){var f=mt(d,t,e,n),p=Array.isArray(f)?f.join(""):f;c=Y(c,p+h),u+=p}}if(u){var m=$(c>>>0);if(!e.hasNameForId(r,m)){var g=n(u,"."+m,void 0,r);e.insertRules(r,m,g)}i.push(m)}}return i.join(" ")},t}(),K=/^\s*\/\/.*$/gm,Q=[":","[",".","#"];function tt(t){var e,n,r,i,a=void 0===t?y:t,s=a.options,l=void 0===s?y:s,c=a.plugins,u=void 0===c?g:c,h=new o(l),d=[],f=function(t){function e(e){if(e)try{t(e+"}")}catch(t){}}return function(n,r,i,a,s,o,l,c,u,h){switch(n){case 1:if(0===u&&64===r.charCodeAt(0))return t(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return t(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(e)}}}((function(t){d.push(t)})),p=function(t,r,a){return 0===r&&-1!==Q.indexOf(a[n.length])||a.match(i)?t:"."+e};function m(t,a,s,o){void 0===o&&(o="&");var l=t.replace(K,""),c=a&&s?s+" "+a+" { "+l+" }":l;return e=o,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),h(s||!a?"":a,c)}return h.use([].concat(u,[function(t,e,i){2===t&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,p))},f,function(t){if(-2===t){var e=d;return d=[],e}}])),m.hash=u.length?u.reduce((function(t,e){return e.name||E(15),Y(t,e.name)}),5381).toString():"",m}var et=i.createContext(),nt=(et.Consumer,i.createContext()),rt=(nt.Consumer,new j),it=tt();function at(){return(0,i.useContext)(et)||rt}function st(){return(0,i.useContext)(nt)||it}function ot(t){var e=(0,i.useState)(t.stylisPlugins),n=e[0],r=e[1],a=at(),o=(0,i.useMemo)((function(){var e=a;return t.sheet?e=t.sheet:t.target&&(e=e.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[t.disableCSSOMInjection,t.sheet,t.target]),l=(0,i.useMemo)((function(){return tt({options:{prefix:!t.disableVendorPrefixes},plugins:n})}),[t.disableVendorPrefixes,n]);return(0,i.useEffect)((function(){s()(n,t.stylisPlugins)||r(t.stylisPlugins)}),[t.stylisPlugins]),i.createElement(et.Provider,{value:o},i.createElement(nt.Provider,{value:l},t.children))}var lt=function(){function t(t,e){var n=this;this.inject=function(t,e){void 0===e&&(e=it);var r=n.name+e.hash;t.hasNameForId(n.id,r)||t.insertRules(n.id,r,e(n.rules,r,"@keyframes"))},this.toString=function(){return E(12,String(n.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=e}return t.prototype.getName=function(t){return void 0===t&&(t=it),this.name+t.hash},t}(),ct=/([A-Z])/,ut=/([A-Z])/g,ht=/^ms-/,dt=function(t){return"-"+t.toLowerCase()};function ft(t){return ct.test(t)?t.replace(ut,dt).replace(ht,"-ms-"):t}var pt=function(t){return null==t||!1===t||""===t};function mt(t,e,n,r){if(Array.isArray(t)){for(var i,a=[],s=0,o=t.length;s<o;s+=1)""!==(i=mt(t[s],e,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return pt(t)?"":x(t)?"."+t.styledComponentId:v(t)?"function"!=typeof(c=t)||c.prototype&&c.prototype.isReactComponent||!e?t:mt(t(e),e,n,r):t instanceof lt?n?(t.inject(n,r),t.getName(r)):t:m(t)?function t(e,n){var r,i,a=[];for(var s in e)e.hasOwnProperty(s)&&!pt(e[s])&&(Array.isArray(e[s])&&e[s].isCss||v(e[s])?a.push(ft(s)+":",e[s],";"):m(e[s])?a.push.apply(a,t(e[s],s)):a.push(ft(s)+": "+(r=s,(null==(i=e[s])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in l?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(t):t.toString();var c}var gt=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function yt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return v(t)||m(t)?gt(mt(p(g,[t].concat(n)))):0===n.length&&1===t.length&&"string"==typeof t[0]?t:gt(mt(p(t,n)))}new Set;var vt=function(t,e,n){return void 0===n&&(n=y),t.theme!==n.theme&&t.theme||e||n.theme},bt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,xt=/(^-|-$)/g;function _t(t){return t.replace(bt,"-").replace(xt,"")}var wt=function(t){return $(q(t)>>>0)};function St(t){return"string"==typeof t&&!0}var Et=function(t){return"function"==typeof t||"object"==typeof t&&null!==t&&!Array.isArray(t)},Mt=function(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t};function Ct(t,e,n){var r=t[n];Et(e)&&Et(r)?Tt(r,e):t[n]=e}function Tt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var s=a[i];if(Et(s))for(var o in s)Mt(o)&&Ct(t,s[o],o)}return t}var At=i.createContext();At.Consumer;var kt={};function Lt(t,e,n){var r=x(t),a=!St(t),s=e.attrs,o=void 0===s?g:s,l=e.componentId,c=void 0===l?function(t,e){var n="string"!=typeof t?"sc":_t(t);kt[n]=(kt[n]||0)+1;var r=n+"-"+wt("5.3.6"+n+kt[n]);return e?e+"-"+r:r}(e.displayName,e.parentComponentId):l,h=e.displayName,p=void 0===h?function(t){return St(t)?"styled."+t:"Styled("+b(t)+")"}(t):h,m=e.displayName&&e.componentId?_t(e.displayName)+"-"+e.componentId:e.componentId||c,_=r&&t.attrs?Array.prototype.concat(t.attrs,o).filter(Boolean):o,w=e.shouldForwardProp;r&&t.shouldForwardProp&&(w=e.shouldForwardProp?function(n,r,i){return t.shouldForwardProp(n,r,i)&&e.shouldForwardProp(n,r,i)}:t.shouldForwardProp);var S,E=new Z(n,m,r?t.componentStyle:void 0),M=E.isStatic&&0===o.length,C=function(t,e){return function(t,e,n,r){var a=t.attrs,s=t.componentStyle,o=t.defaultProps,l=t.foldedComponentIds,c=t.shouldForwardProp,h=t.styledComponentId,d=t.target,p=function(t,e,n){void 0===t&&(t=y);var r=f({},e,{theme:t}),i={};return n.forEach((function(t){var e,n,a,s=t;for(e in v(s)&&(s=s(r)),s)r[e]=i[e]="className"===e?(n=i[e],a=s[e],n&&a?n+" "+a:n||a):s[e]})),[r,i]}(vt(e,(0,i.useContext)(At),o)||y,e,a),m=p[0],g=p[1],b=function(t,e,n,r){var i=at(),a=st();return e?t.generateAndInjectStyles(y,i,a):t.generateAndInjectStyles(n,i,a)}(s,r,m),x=n,_=g.$as||e.$as||g.as||e.as||d,w=St(_),S=g!==e?f({},e,{},g):e,E={};for(var M in S)"$"!==M[0]&&"as"!==M&&("forwardedAs"===M?E.as=S[M]:(c?c(M,u,_):!w||u(M))&&(E[M]=S[M]));return e.style&&g.style!==e.style&&(E.style=f({},e.style,{},g.style)),E.className=Array.prototype.concat(l,h,b!==h?b:null,e.className,g.className).filter(Boolean).join(" "),E.ref=x,(0,i.createElement)(_,E)}(S,t,e,M)};return C.displayName=p,(S=i.forwardRef(C)).attrs=_,S.componentStyle=E,S.displayName=p,S.shouldForwardProp=w,S.foldedComponentIds=r?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):g,S.styledComponentId=m,S.target=r?t.target:t,S.withComponent=function(t){var r=e.componentId,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(e,["componentId"]),a=r&&r+"-"+(St(t)?t:_t(b(t)));return Lt(t,f({},i,{attrs:_,componentId:a}),n)},Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=r?Tt({},t.defaultProps,e):e}}),S.toString=function(){return"."+S.styledComponentId},a&&d()(S,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),S}var Pt=function(t){return function t(e,n,i){if(void 0===i&&(i=y),!(0,r.isValidElementType)(n))return E(1,String(n));var a=function(){return e(n,i,yt.apply(void 0,arguments))};return a.withConfig=function(r){return t(e,n,f({},i,{},r))},a.attrs=function(r){return t(e,n,f({},i,{attrs:Array.prototype.concat(i.attrs,r).filter(Boolean)}))},a}(Lt,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(t){Pt[t]=Pt(t)}));!function(){function t(t,e){this.rules=t,this.componentId=e,this.isStatic=X(t),j.registerId(this.componentId+1)}var e=t.prototype;e.createStyles=function(t,e,n,r){var i=r(mt(this.rules,e,n,r).join(""),""),a=this.componentId+t;n.insertRules(a,a,i)},e.removeStyles=function(t,e){e.clearRules(this.componentId+t)},e.renderStyles=function(t,e,n,r){t>2&&j.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,r)}}();!function(){function t(){var t=this;this._emitSheetCSS=function(){var e=t.instance.toString();if(!e)return"";var n=O();return"<style "+[n&&'nonce="'+n+'"',_+'="true"','data-styled-version="5.3.6"'].filter(Boolean).join(" ")+">"+e+"</style>"},this.getStyleTags=function(){return t.sealed?E(2):t._emitSheetCSS()},this.getStyleElement=function(){var e;if(t.sealed)return E(2);var n=((e={})[_]="",e["data-styled-version"]="5.3.6",e.dangerouslySetInnerHTML={__html:t.instance.toString()},e),r=O();return r&&(n.nonce=r),[i.createElement("style",f({},n,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new j({isServer:!0}),this.sealed=!1}var e=t.prototype;e.collectStyles=function(t){return this.sealed?E(2):i.createElement(ot,{sheet:this.instance},t)},e.interleaveWithNodeStream=function(t){return E(3)}}();const Rt=Pt},655:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__assign:()=>a,__asyncDelegator:()=>_,__asyncGenerator:()=>x,__asyncValues:()=>w,__await:()=>b,__awaiter:()=>u,__classPrivateFieldGet:()=>T,__classPrivateFieldIn:()=>k,__classPrivateFieldSet:()=>A,__createBinding:()=>d,__decorate:()=>o,__exportStar:()=>f,__extends:()=>i,__generator:()=>h,__importDefault:()=>C,__importStar:()=>M,__makeTemplateObject:()=>S,__metadata:()=>c,__param:()=>l,__read:()=>m,__rest:()=>s,__spread:()=>g,__spreadArray:()=>v,__spreadArrays:()=>y,__values:()=>p});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var a=function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},a.apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function o(t,e,n,r){var i,a=arguments.length,s=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(a<3?i(s):a>3?i(e,n,s):i(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s}function l(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,n,r){return new(n||(n=Promise))((function(i,a){function s(t){try{l(r.next(t))}catch(e){a(e)}}function o(t){try{l(r.throw(t))}catch(e){a(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}l((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(l){o=[6,l],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var d=Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function f(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||d(e,t,n)}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(o){i={error:o}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return s}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function v(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function x(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),a=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){a.push([t,e,n,r])>1||o(t,e)}))})}function o(t,e){try{!function(t){t.value instanceof b?Promise.resolve(t.value.v).then(l,c):u(a[0][2],t)}(i[t](e))}catch(n){u(a[0][3],n)}}function l(t){o("next",t)}function c(t){o("throw",t)}function u(t,e){t(e),a.shift(),a.length&&o(a[0][0],a[0][1])}}function _(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:b(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}}function S(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var E=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function M(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&d(e,t,n);return E(e,t),e}function C(t){return t&&t.__esModule?t:{default:t}}function T(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function A(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}function k(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}},5820:(t,e,n)=>{"use strict";n.d(e,{M:()=>v});var r=n(7294),i=n(9304),a=n(404),s=n(8868);function o(){const t=(0,r.useRef)(!1);return(0,s.L)((()=>(t.current=!0,()=>{t.current=!1})),[]),t}var l=n(240),c=n(6681);class u extends r.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=e.offsetHeight||0,t.width=e.offsetWidth||0,t.top=e.offsetTop,t.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:t,isPresent:e}){const n=(0,r.useId)(),i=(0,r.useRef)(null),a=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)((()=>{const{width:t,height:r,top:s,left:o}=a.current;if(e||!i.current||!t||!r)return;i.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${t}px !important;\n            height: ${r}px !important;\n            top: ${s}px !important;\n            left: ${o}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[e]),r.createElement(u,{isPresent:e,childRef:i,sizeRef:a},r.cloneElement(t,{ref:i}))}const d=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:a,presenceAffectsLayout:s,mode:o})=>{const u=(0,c.h)(f),d=(0,r.useId)(),p=(0,r.useMemo)((()=>({id:d,initial:e,isPresent:n,custom:a,onExitComplete:t=>{u.set(t,!0);for(const e of u.values())if(!e)return;i&&i()},register:t=>(u.set(t,!1),()=>u.delete(t))})),s?void 0:[n]);return(0,r.useMemo)((()=>{u.forEach(((t,e)=>u.set(e,!1)))}),[n]),r.useEffect((()=>{!n&&!u.size&&i&&i()}),[n]),"popLayout"===o&&(t=r.createElement(h,{isPresent:n},t)),r.createElement(l.O.Provider,{value:p},t)};function f(){return new Map}var p=n(5364),m=n(5411),g=n(6034);const y=t=>t.key||"";const v=({children:t,custom:e,initial:n=!0,onExitComplete:l,exitBeforeEnter:c,presenceAffectsLayout:u=!0,mode:h="sync"})=>{c&&(h="wait",(0,g.O)(!1,"Replace exitBeforeEnter with mode='wait'"));let[f]=function(){const t=o(),[e,n]=(0,r.useState)(0),i=(0,r.useCallback)((()=>{t.current&&n(e+1)}),[e]);return[(0,r.useCallback)((()=>a.Z_.postRender(i)),[i]),e]}();const v=(0,r.useContext)(p.p).forceRender;v&&(f=v);const b=o(),x=function(t){const e=[];return r.Children.forEach(t,(t=>{(0,r.isValidElement)(t)&&e.push(t)})),e}(t);let _=x;const w=new Set,S=(0,r.useRef)(_),E=(0,r.useRef)(new Map).current,M=(0,r.useRef)(!0);if((0,s.L)((()=>{M.current=!1,function(t,e){t.forEach((t=>{const n=y(t);e.set(n,t)}))}(x,E),S.current=_})),(0,m.z)((()=>{M.current=!0,E.clear(),w.clear()})),M.current)return r.createElement(r.Fragment,null,_.map((t=>r.createElement(d,{key:y(t),isPresent:!0,initial:!!n&&void 0,presenceAffectsLayout:u,mode:h},t))));_=[..._];const C=S.current.map(y),T=x.map(y),A=C.length;for(let r=0;r<A;r++){const t=C[r];-1===T.indexOf(t)&&w.add(t)}return"wait"===h&&w.size&&(_=[]),w.forEach((t=>{if(-1!==T.indexOf(t))return;const n=E.get(t);if(!n)return;const i=C.indexOf(t);_.splice(i,0,r.createElement(d,{key:y(n),isPresent:!1,onExitComplete:()=>{E.delete(t),w.delete(t);const e=S.current.findIndex((e=>e.key===t));if(S.current.splice(e,1),!w.size){if(S.current=x,!1===b.current)return;f(),l&&l()}},custom:e,presenceAffectsLayout:u,mode:h},n))})),_=_.map((t=>{const e=t.key;return w.has(e)?t:r.createElement(d,{key:y(t),isPresent:!0,presenceAffectsLayout:u,mode:h},t)})),"production"!==i.O&&"wait"===h&&_.length>1&&console.warn('You\'re attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.'),r.createElement(r.Fragment,null,w.size?_:_.map((t=>(0,r.cloneElement)(t))))}},5364:(t,e,n)=>{"use strict";n.d(e,{p:()=>r});const r=(0,n(7294).createContext)({})},240:(t,e,n)=>{"use strict";n.d(e,{O:()=>r});const r=(0,n(7294).createContext)(null)},7367:(t,e,n)=>{"use strict";n.d(e,{w:()=>r});const r={delta:0,timestamp:0}},404:(t,e,n)=>{"use strict";n.d(e,{qY:()=>f,iW:()=>p,Z_:()=>d});const r=1/60*1e3,i="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),a="undefined"!=typeof window?t=>window.requestAnimationFrame(t):t=>setTimeout((()=>t(i())),r);var s=n(7367);let o=!0,l=!1,c=!1;const u=["read","update","preRender","render","postRender"],h=u.reduce(((t,e)=>(t[e]=function(t){let e=[],n=[],r=0,i=!1,a=!1;const s=new WeakSet,o={schedule:(t,a=!1,o=!1)=>{const l=o&&i,c=l?e:n;return a&&s.add(t),-1===c.indexOf(t)&&(c.push(t),l&&i&&(r=e.length)),t},cancel:t=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1),s.delete(t)},process:l=>{if(i)a=!0;else{if(i=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let n=0;n<r;n++){const r=e[n];r(l),s.has(r)&&(o.schedule(r),t())}i=!1,a&&(a=!1,o.process(l))}}};return o}((()=>l=!0)),t)),{}),d=u.reduce(((t,e)=>{const n=h[e];return t[e]=(t,e=!1,r=!1)=>(l||y(),n.schedule(t,e,r)),t}),{}),f=u.reduce(((t,e)=>(t[e]=h[e].cancel,t)),{}),p=u.reduce(((t,e)=>(t[e]=()=>h[e].process(s.w),t)),{}),m=t=>h[t].process(s.w),g=t=>{l=!1,s.w.delta=o?r:Math.max(Math.min(t-s.w.timestamp,40),1),s.w.timestamp=t,c=!0,u.forEach(m),c=!1,l&&(o=!1,a(g))},y=()=>{l=!0,o=!0,c||a(g)}},3478:(t,e,n)=>{"use strict";n.d(e,{E:()=>Va});var r=n(7294);const i=(0,r.createContext)({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),a=(0,r.createContext)({});var s=n(240),o=n(8868);const l=(0,r.createContext)({strict:!1});function c(t,e,n,c){const u=(0,r.useContext)(a).visualElement,h=(0,r.useContext)(l),d=(0,r.useContext)(s.O),f=(0,r.useContext)(i).reducedMotion,p=(0,r.useRef)();c=c||h.renderer,!p.current&&c&&(p.current=c(t,{visualState:e,parent:u,props:n,presenceId:d?d.id:void 0,blockInitialAnimation:!!d&&!1===d.initial,reducedMotionConfig:f}));const m=p.current;return(0,o.L)((()=>{m&&m.render()})),(0,o.L)((()=>{m&&m.animationState&&m.animationState.animateChanges()})),(0,o.L)((()=>()=>m&&m.notify("Unmount")),[]),m}function u(t){return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function h(t){return"string"==typeof t||Array.isArray(t)}function d(t){return"object"==typeof t&&"function"==typeof t.start}const f=["initial","animate","exit","whileHover","whileDrag","whileTap","whileFocus","whileInView"];function p(t){return d(t.animate)||f.some((e=>h(t[e])))}function m(t){return Boolean(p(t)||t.variants)}function g(t){const{initial:e,animate:n}=function(t,e){if(p(t)){const{initial:e,animate:n}=t;return{initial:!1===e||h(e)?e:void 0,animate:h(n)?n:void 0}}return!1!==t.inherit?e:{}}(t,(0,r.useContext)(a));return(0,r.useMemo)((()=>({initial:e,animate:n})),[y(e),y(n)])}function y(t){return Array.isArray(t)?t.join(" "):t}const v=t=>({isEnabled:e=>t.some((t=>!!e[t]))}),b={measureLayout:v(["layout","layoutId","drag"]),animation:v(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:v(["exit"]),drag:v(["drag","dragControls"]),focus:v(["whileFocus"]),hover:v(["whileHover","onHoverStart","onHoverEnd"]),tap:v(["whileTap","onTap","onTapStart","onTapCancel"]),pan:v(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:v(["whileInView","onViewportEnter","onViewportLeave"])};var x=n(1741),_=n(6681);const w={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let S=1;var E=n(5364);class M extends r.Component{getSnapshotBeforeUpdate(){const{visualElement:t,props:e}=this.props;return t&&t.setProps(e),null}componentDidUpdate(){}render(){return this.props.children}}const C=(0,r.createContext)({}),T=Symbol.for("motionComponentSymbol");function A({preloadedFeatures:t,createVisualElement:e,projectionNodeConstructor:n,useRender:s,useVisualState:o,Component:h}){t&&function(t){for(const e in t)"projectionNodeConstructor"===e?b.projectionNodeConstructor=t[e]:b[e].Component=t[e]}(t);const d=(0,r.forwardRef)((function(d,f){const p={...(0,r.useContext)(i),...d,layoutId:k(d)},{isStatic:m}=p;let y=null;const v=g(d),E=m?void 0:(0,_.h)((()=>{if(w.hasEverUpdated)return S++})),T=o(d,m);if(!m&&x.j){v.visualElement=c(h,T,p,e);const i=(0,r.useContext)(l).strict,a=(0,r.useContext)(C);v.visualElement&&(y=v.visualElement.loadFeatures(p,i,t,E,n||b.projectionNodeConstructor,a))}return r.createElement(M,{visualElement:v.visualElement,props:p},y,r.createElement(a.Provider,{value:v},s(h,d,E,function(t,e,n){return(0,r.useCallback)((r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&("function"==typeof n?n(r):u(n)&&(n.current=r))}),[e])}(T,v.visualElement,f),T,m,v.visualElement)))}));return d[T]=h,d}function k({layoutId:t}){const e=(0,r.useContext)(E.p).id;return e&&void 0!==t?e+"-"+t:t}function L(t){function e(e,n={}){return A(t(e,n))}if("undefined"==typeof Proxy)return e;const n=new Map;return new Proxy(e,{get:(t,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const P=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function R(t){return"string"==typeof t&&!t.includes("-")&&!!(P.indexOf(t)>-1||/[A-Z]/.test(t))}const I={};const D=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],B=new Set(D);function O(t,{layout:e,layoutId:n}){return B.has(t)||t.startsWith("origin")||(e||void 0!==n)&&(!!I[t]||"opacity"===t)}const N=t=>!!(null==t?void 0:t.getVelocity),F={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},z=(t,e)=>D.indexOf(t)-D.indexOf(e);function U(t){return t.startsWith("--")}const G=(t,e)=>e&&"number"==typeof t?e.transform(t):t,H=(t,e,n)=>Math.min(Math.max(n,t),e),j={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},V={...j,transform:t=>H(0,1,t)},W={...j,default:1},$=t=>Math.round(1e5*t)/1e5,Y=/(-)?([\d]*\.?[\d])+/g,q=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,X=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function J(t){return"string"==typeof t}const Z=t=>({test:e=>J(e)&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),K=Z("deg"),Q=Z("%"),tt=Z("px"),et=Z("vh"),nt=Z("vw"),rt={...Q,parse:t=>Q.parse(t)/100,transform:t=>Q.transform(100*t)},it={...j,transform:Math.round},at={borderWidth:tt,borderTopWidth:tt,borderRightWidth:tt,borderBottomWidth:tt,borderLeftWidth:tt,borderRadius:tt,radius:tt,borderTopLeftRadius:tt,borderTopRightRadius:tt,borderBottomRightRadius:tt,borderBottomLeftRadius:tt,width:tt,maxWidth:tt,height:tt,maxHeight:tt,size:tt,top:tt,right:tt,bottom:tt,left:tt,padding:tt,paddingTop:tt,paddingRight:tt,paddingBottom:tt,paddingLeft:tt,margin:tt,marginTop:tt,marginRight:tt,marginBottom:tt,marginLeft:tt,rotate:K,rotateX:K,rotateY:K,rotateZ:K,scale:W,scaleX:W,scaleY:W,scaleZ:W,skew:K,skewX:K,skewY:K,distance:tt,translateX:tt,translateY:tt,translateZ:tt,x:tt,y:tt,z:tt,perspective:tt,transformPerspective:tt,opacity:V,originX:rt,originY:rt,originZ:tt,zIndex:it,fillOpacity:V,strokeOpacity:V,numOctaves:it};function st(t,e,n,r){const{style:i,vars:a,transform:s,transformKeys:o,transformOrigin:l}=t;o.length=0;let c=!1,u=!1,h=!0;for(const d in e){const t=e[d];if(U(d)){a[d]=t;continue}const n=at[d],r=G(t,n);if(B.has(d)){if(c=!0,s[d]=r,o.push(d),!h)continue;t!==(n.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,l[d]=r):i[d]=r}if(e.transform||(c||r?i.transform=function({transform:t,transformKeys:e},{enableHardwareAcceleration:n=!0,allowTransformNone:r=!0},i,a){let s="";e.sort(z);for(const o of e)s+=`${F[o]||o}(${t[o]}) `;return n&&!t.z&&(s+="translateZ(0)"),s=s.trim(),a?s=a(t,i?"":s):r&&i&&(s="none"),s}(t,n,h,r):i.transform&&(i.transform="none")),u){const{originX:t="50%",originY:e="50%",originZ:n=0}=l;i.transformOrigin=`${t} ${e} ${n}`}}const ot=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}});function lt(t,e,n){for(const r in e)N(e[r])||O(r,n)||(t[r]=e[r])}function ct(t,e,n){const i={};return lt(i,t.style||{},t),Object.assign(i,function({transformTemplate:t},e,n){return(0,r.useMemo)((()=>{const r={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};return st(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)}),[e])}(t,e,n)),t.transformValues?t.transformValues(i):i}function ut(t,e,n){const r={},i=ct(t,e,n);return t.drag&&!1!==t.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),r.style=i,r}const ht=new Set(["initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","onHoverStart","onHoverEnd","layoutScroll","whileInView","onViewportEnter","onViewportLeave","viewport","whileTap","onTap","onTapStart","onTapCancel","animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView","onPan","onPanStart","onPanSessionStart","onPanEnd"]);function dt(t){return ht.has(t)}let ft=t=>!dt(t);try{(pt=require("@emotion/is-prop-valid").default)&&(ft=t=>t.startsWith("on")?!dt(t):pt(t))}catch(Wa){}var pt;function mt(t,e,n){return"string"==typeof t?t:tt.transform(e+n*t)}const gt={offset:"stroke-dashoffset",array:"stroke-dasharray"},yt={offset:"strokeDashoffset",array:"strokeDasharray"};function vt(t,{attrX:e,attrY:n,originX:r,originY:i,pathLength:a,pathSpacing:s=1,pathOffset:o=0,...l},c,u,h){if(st(t,l,c,h),u)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:d,style:f,dimensions:p}=t;d.transform&&(p&&(f.transform=d.transform),delete d.transform),p&&(void 0!==r||void 0!==i||f.transform)&&(f.transformOrigin=function(t,e,n){return`${mt(e,t.x,t.width)} ${mt(n,t.y,t.height)}`}(p,void 0!==r?r:.5,void 0!==i?i:.5)),void 0!==e&&(d.x=e),void 0!==n&&(d.y=n),void 0!==a&&function(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?gt:yt;t[a.offset]=tt.transform(-r);const s=tt.transform(e),o=tt.transform(n);t[a.array]=`${s} ${o}`}(d,a,s,o,!1)}const bt=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{},attrs:{}}),xt=t=>"string"==typeof t&&"svg"===t.toLowerCase();function _t(t,e,n,i){const a=(0,r.useMemo)((()=>{const n={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{},attrs:{}};return vt(n,e,{enableHardwareAcceleration:!1},xt(i),t.transformTemplate),{...n.attrs,style:{...n.style}}}),[e]);if(t.style){const e={};lt(e,t.style,t),a.style={...e,...a.style}}return a}function wt(t=!1){return(e,n,i,a,{latestValues:s},o)=>{const l=(R(e)?_t:ut)(n,s,o,e),c=function(t,e,n){const r={};for(const i in t)(ft(i)||!0===n&&dt(i)||!e&&!dt(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}(n,"string"==typeof e,t),u={...c,...l,ref:a};return i&&(u["data-projection-id"]=i),(0,r.createElement)(e,u)}}const St=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function Et(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const Mt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ct(t,e,n,r){Et(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Mt.has(i)?i:St(i),e.attrs[i])}function Tt(t){const{style:e}=t,n={};for(const r in e)(N(e[r])||O(r,t))&&(n[r]=e[r]);return n}function At(t){const e=Tt(t);for(const n in t)if(N(t[n])){e["x"===n||"y"===n?"attr"+n.toUpperCase():n]=t[n]}return e}function kt(t,e,n,r={},i={}){return"function"==typeof e&&(e=e(void 0!==n?n:t.custom,r,i)),"string"==typeof e&&(e=t.variants&&t.variants[e]),"function"==typeof e&&(e=e(void 0!==n?n:t.custom,r,i)),e}const Lt=t=>Array.isArray(t);function Pt(t){const e=N(t)?t.get():t;return n=e,Boolean(n&&"object"==typeof n&&n.mix&&n.toValue)?e.toValue():e;var n}const Rt=t=>(e,n)=>{const i=(0,r.useContext)(a),o=(0,r.useContext)(s.O),l=()=>function({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,a){const s={latestValues:It(r,i,a,t),renderState:e()};return n&&(s.mount=t=>n(r,t,s)),s}(t,e,i,o);return n?l():(0,_.h)(l)};function It(t,e,n,r){const i={},a=r(t);for(const d in a)i[d]=Pt(a[d]);let{initial:s,animate:o}=t;const l=p(t),c=m(t);e&&c&&!l&&!1!==t.inherit&&(void 0===s&&(s=e.initial),void 0===o&&(o=e.animate));let u=!!n&&!1===n.initial;u=u||!1===s;const h=u?o:s;if(h&&"boolean"!=typeof h&&!d(h)){(Array.isArray(h)?h:[h]).forEach((e=>{const n=kt(t,e);if(!n)return;const{transitionEnd:r,transition:a,...s}=n;for(const t in s){let e=s[t];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(i[t]=e)}for(const t in r)i[t]=r[t]}))}return i}const Dt={useVisualState:Rt({scrapeMotionValuesFromProps:At,createRenderState:bt,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(i){n.dimensions={x:0,y:0,width:0,height:0}}vt(n,r,{enableHardwareAcceleration:!1},xt(e.tagName),t.transformTemplate),Ct(e,n)}})},Bt={useVisualState:Rt({scrapeMotionValuesFromProps:Tt,createRenderState:ot})};var Ot;function Nt(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ft(t,e,n,i){(0,r.useEffect)((()=>{const r=t.current;if(n&&r)return Nt(r,e,n,i)}),[t,e,n,i])}!function(t){t.Animate="animate",t.Hover="whileHover",t.Tap="whileTap",t.Drag="whileDrag",t.Focus="whileFocus",t.InView="whileInView",t.Exit="exit"}(Ot||(Ot={}));const zt=t=>!1!==t.isPrimary;function Ut(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const Gt=(t,e=!1)=>{const n=e=>t(e,Ut(e));return e?t=>zt(t)&&n(t):n};function Ht(t,e,n,r){return Nt(t,e,Gt(n,"pointerdown"===e),r)}function jt(t,e,n,r){return Ft(t,e,n&&Gt(n,"pointerdown"===e),r)}function Vt(t){let e=null;return()=>{const n=()=>{e=null};return null===e&&(e=t,n)}}const Wt=Vt("dragHorizontal"),$t=Vt("dragVertical");function Yt(t){let e=!1;if("y"===t)e=$t();else if("x"===t)e=Wt();else{const t=Wt(),n=$t();t&&n?e=()=>{t(),n()}:(t&&t(),n&&n())}return e}function qt(){const t=Yt(!0);return!t||(t(),!1)}function Xt(t,e,n){return(r,i)=>{(function(t){return"pen"!==t.type&&"touch"!==t.type})(r)&&!qt()&&(t.animationState&&t.animationState.setActive(Ot.Hover,e),n&&n(r,i))}}const Jt=(t,e)=>!!e&&(t===e||Jt(t,e.parentElement));var Zt=n(5411);const Kt=(t,e)=>n=>e(t(n)),Qt=(...t)=>t.reduce(Kt);var te=n(9304),ee=n(6034);const ne=new WeakMap,re=new WeakMap,ie=t=>{const e=ne.get(t.target);e&&e(t)},ae=t=>{t.forEach(ie)};function se(t,e,n){const r=function({root:t,...e}){const n=t||document;re.has(n)||re.set(n,{});const r=re.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(ae,{root:t,...e})),r[i]}(e);return ne.set(t,n),r.observe(t),()=>{ne.delete(t),r.unobserve(t)}}const oe={some:0,all:1};function le(t,e,n,{root:i,margin:a,amount:s="some",once:o}){(0,r.useEffect)((()=>{if(!t||!n.current)return;const r={root:null==i?void 0:i.current,rootMargin:a,threshold:"number"==typeof s?s:oe[s]};return se(n.current,r,(t=>{const{isIntersecting:r}=t;if(e.isInView===r)return;if(e.isInView=r,o&&!r&&e.hasEnteredView)return;r&&(e.hasEnteredView=!0),n.animationState&&n.animationState.setActive(Ot.InView,r);const i=n.getProps(),a=r?i.onViewportEnter:i.onViewportLeave;a&&a(t)}))}),[t,i,a,s])}function ce(t,e,n,{fallback:i=!0}){(0,r.useEffect)((()=>{t&&i&&("production"!==te.O&&(0,ee.O)(!1,"IntersectionObserver not available on this device. whileInView animations will trigger on mount."),requestAnimationFrame((()=>{e.hasEnteredView=!0;const{onViewportEnter:t}=n.getProps();t&&t(null),n.animationState&&n.animationState.setActive(Ot.InView,!0)})))}),[t])}const ue=t=>e=>(t(e),null),he={inView:ue((function({visualElement:t,whileInView:e,onViewportEnter:n,onViewportLeave:i,viewport:a={}}){const s=(0,r.useRef)({hasEnteredView:!1,isInView:!1});let o=Boolean(e||n||i);a.once&&s.current.hasEnteredView&&(o=!1),("undefined"==typeof IntersectionObserver?ce:le)(o,s.current,t,a)})),tap:ue((function({onTap:t,onTapStart:e,onTapCancel:n,whileTap:i,visualElement:a}){const s=t||e||n||i,o=(0,r.useRef)(!1),l=(0,r.useRef)(null),c={passive:!(e||t||n||p)};function u(){l.current&&l.current(),l.current=null}function h(){return u(),o.current=!1,a.animationState&&a.animationState.setActive(Ot.Tap,!1),!qt()}function d(e,r){h()&&(Jt(a.current,e.target)?t&&t(e,r):n&&n(e,r))}function f(t,e){h()&&n&&n(t,e)}function p(t,n){u(),o.current||(o.current=!0,l.current=Qt(Ht(window,"pointerup",d,c),Ht(window,"pointercancel",f,c)),a.animationState&&a.animationState.setActive(Ot.Tap,!0),e&&e(t,n))}jt(a,"pointerdown",s?p:void 0,c),(0,Zt.z)(u)})),focus:ue((function({whileFocus:t,visualElement:e}){const{animationState:n}=e;Ft(e,"focus",t?()=>{n&&n.setActive(Ot.Focus,!0)}:void 0),Ft(e,"blur",t?()=>{n&&n.setActive(Ot.Focus,!1)}:void 0)})),hover:ue((function({onHoverStart:t,onHoverEnd:e,whileHover:n,visualElement:r}){jt(r,"pointerenter",t||n?Xt(r,!0,t):void 0,{passive:!t}),jt(r,"pointerleave",e||n?Xt(r,!1,e):void 0,{passive:!e})}))};function de(){const t=(0,r.useContext)(s.O);if(null===t)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,a=(0,r.useId)();(0,r.useEffect)((()=>i(a)),[]);return!e&&n?[!1,()=>n&&n(a)]:[!0]}function fe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const pe=t=>/^0[^.\s]+$/.test(t);var me=n(7367),ge=n(404);function ye(t,e){-1===t.indexOf(e)&&t.push(e)}function ve(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class be{constructor(){this.subscriptions=[]}add(t){return ye(this.subscriptions,t),()=>ve(this.subscriptions,t)}notify(t,e,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](t,e,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function xe(t,e){return e?t*(1e3/e):0}class _e{constructor(t,e={}){var n;this.version="8.0.2",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(t,e=!0)=>{this.prev=this.current,this.current=t;const{delta:n,timestamp:r}=me.w;this.lastUpdated!==r&&(this.timeDelta=n,this.lastUpdated=r,ge.Z_.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),e&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ge.Z_.postRender(this.velocityCheck),this.velocityCheck=({timestamp:t})=>{t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(n=this.current,!isNaN(parseFloat(n))),this.owner=e.owner}onChange(t){return this.on("change",t)}on(t,e){return this.events[t]||(this.events[t]=new be),this.events[t].add(e)}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t){this.passiveEffect=t}set(t,e=!0){e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)}setWithVelocity(t,e,n){this.set(e),this.prev=t,this.timeDelta=n}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?xe(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise((e=>{this.hasAnimated=!0,this.stopAnimation=t(e),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.stopAnimation&&(this.stopAnimation(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.stopAnimation}clearAnimation(){this.stopAnimation=null}destroy(){this.clearListeners(),this.stop()}}function we(t,e){return new _e(t,e)}const Se=(t,e)=>n=>Boolean(J(n)&&X.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Ee=(t,e,n)=>r=>{if(!J(r))return r;const[i,a,s,o]=r.match(Y);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:void 0!==o?parseFloat(o):1}},Me={...j,transform:t=>Math.round((t=>H(0,255,t))(t))},Ce={test:Se("rgb","red"),parse:Ee("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Me.transform(t)+", "+Me.transform(e)+", "+Me.transform(n)+", "+$(V.transform(r))+")"};const Te={test:Se("#"),parse:function(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:Ce.transform},Ae={test:Se("hsl","hue"),parse:Ee("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Q.transform($(e))+", "+Q.transform($(n))+", "+$(V.transform(r))+")"},ke={test:t=>Ce.test(t)||Te.test(t)||Ae.test(t),parse:t=>Ce.test(t)?Ce.parse(t):Ae.test(t)?Ae.parse(t):Te.parse(t),transform:t=>J(t)?t:t.hasOwnProperty("red")?Ce.transform(t):Ae.transform(t)},Le="${c}",Pe="${n}";function Re(t){"number"==typeof t&&(t=`${t}`);const e=[];let n=0,r=0;const i=t.match(q);i&&(n=i.length,t=t.replace(q,Le),e.push(...i.map(ke.parse)));const a=t.match(Y);return a&&(r=a.length,t=t.replace(Y,Pe),e.push(...a.map(j.parse))),{values:e,numColors:n,numNumbers:r,tokenised:t}}function Ie(t){return Re(t).values}function De(t){const{values:e,numColors:n,tokenised:r}=Re(t),i=e.length;return t=>{let e=r;for(let r=0;r<i;r++)e=e.replace(r<n?Le:Pe,r<n?ke.transform(t[r]):$(t[r]));return e}}const Be=t=>"number"==typeof t?0:t;const Oe={test:function(t){var e,n;return isNaN(t)&&J(t)&&((null===(e=t.match(Y))||void 0===e?void 0:e.length)||0)+((null===(n=t.match(q))||void 0===n?void 0:n.length)||0)>0},parse:Ie,createTransformer:De,getAnimatableNone:function(t){const e=Ie(t);return De(t)(e.map(Be))}},Ne=new Set(["brightness","contrast","saturate","opacity"]);function Fe(t){const[e,n]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;const[r]=n.match(Y)||[];if(!r)return t;const i=n.replace(r,"");let a=Ne.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const ze=/([a-z-]*)\(.*?\)/g,Ue={...Oe,getAnimatableNone:t=>{const e=t.match(ze);return e?e.map(Fe).join(" "):t}},Ge={...at,color:ke,backgroundColor:ke,outlineColor:ke,fill:ke,stroke:ke,borderColor:ke,borderTopColor:ke,borderRightColor:ke,borderBottomColor:ke,borderLeftColor:ke,filter:Ue,WebkitFilter:Ue},He=t=>Ge[t];function je(t,e){var n;let r=He(t);return r!==Ue&&(r=Oe),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,e)}const Ve=t=>e=>e.test(t),We=[j,tt,Q,K,nt,et,{test:t=>"auto"===t,parse:t=>t}],$e=t=>We.find(Ve(t)),Ye=[...We,ke,Oe],qe=t=>Ye.find(Ve(t));function Xe(t,e,n){const r=t.getProps();return kt(r,e,void 0!==n?n:r.custom,function(t){const e={};return t.values.forEach(((t,n)=>e[n]=t.get())),e}(t),function(t){const e={};return t.values.forEach(((t,n)=>e[n]=t.getVelocity())),e}(t))}function Je(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,we(n))}function Ze(t,e){const n=Xe(t,e);let{transitionEnd:r={},transition:i={},...a}=n?t.makeTargetAnimatable(n,!1):{};a={...a,...r};for(const o in a){Je(t,o,(s=a[o],Lt(s)?s[s.length-1]||0:s))}var s}function Ke(t,e){if(!e)return;return(e[t]||e.default||e).from}function Qe(t){return Boolean(N(t)&&t.add)}function tn(t,e){const{MotionAppearAnimations:n}=window,r=((t,e)=>`${t}: ${e}`)(t,B.has(e)?"transform":e),i=n&&n.get(r);return i?(ge.Z_.render((()=>{try{i.cancel(),n.delete(r)}catch(t){}})),i.currentTime||0):0}const en="data-"+St("framerAppearId");const nn=t=>1e3*t,rn=!1,an=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,sn=t=>e=>1-t(1-e),on=t=>t*t,ln=sn(on),cn=an(on),un=(t,e,n)=>-n*t+n*e+t;function hn(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}const dn=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},fn=[Te,Ce,Ae];function pn(t){const e=(n=t,fn.find((t=>t.test(n))));var n;Boolean(e);let r=e.parse(t);return e===Ae&&(r=function({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,n/=100;let i=0,a=0,s=0;if(e/=100){const r=n<.5?n*(1+e):n+e-n*e,o=2*n-r;i=hn(o,r,t+1/3),a=hn(o,r,t),s=hn(o,r,t-1/3)}else i=a=s=n;return{red:Math.round(255*i),green:Math.round(255*a),blue:Math.round(255*s),alpha:r}}(r)),r}const mn=(t,e)=>{const n=pn(t),r=pn(e),i={...n};return t=>(i.red=dn(n.red,r.red,t),i.green=dn(n.green,r.green,t),i.blue=dn(n.blue,r.blue,t),i.alpha=un(n.alpha,r.alpha,t),Ce.transform(i))};function gn(t,e){return"number"==typeof t?n=>un(t,e,n):ke.test(t)?mn(t,e):bn(t,e)}const yn=(t,e)=>{const n=[...t],r=n.length,i=t.map(((t,n)=>gn(t,e[n])));return t=>{for(let e=0;e<r;e++)n[e]=i[e](t);return n}},vn=(t,e)=>{const n={...t,...e},r={};for(const i in n)void 0!==t[i]&&void 0!==e[i]&&(r[i]=gn(t[i],e[i]));return t=>{for(const e in r)n[e]=r[e](t);return n}},bn=(t,e)=>{const n=Oe.createTransformer(e),r=Re(t),i=Re(e);return r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Qt(yn(r.values,i.values),n):n=>`${n>0?e:t}`},xn=(t,e,n)=>{const r=e-t;return 0===r?1:(n-t)/r},_n=(t,e)=>n=>un(t,e,n);function wn(t,e,n){const r=[],i=n||("number"==typeof(a=t[0])?_n:"string"==typeof a?ke.test(a)?mn:bn:Array.isArray(a)?yn:"object"==typeof a?vn:_n);var a;const s=t.length-1;for(let o=0;o<s;o++){let n=i(t[o],t[o+1]);if(e){const t=Array.isArray(e)?e[o]:e;n=Qt(t,n)}r.push(n)}return r}function Sn(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;e.length,!r||!Array.isArray(r)||r.length,t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=wn(e,r,i),o=s.length,l=e=>{let n=0;if(o>1)for(;n<t.length-2&&!(e<t[n+1]);n++);const r=xn(t[n],t[n+1],e);return s[n](r)};return n?e=>l(H(t[0],t[a-1],e)):l}const En=t=>t,Mn=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t;function Cn(t,e,n,r){if(t===e&&n===r)return En;const i=e=>function(t,e,n,r,i){let a,s,o=0;do{s=e+(n-e)/2,a=Mn(s,r,i)-t,a>0?n=s:e=s}while(Math.abs(a)>1e-7&&++o<12);return s}(e,0,1,t,n);return t=>0===t||1===t?t:Mn(i(t),e,r)}const Tn=t=>1-Math.sin(Math.acos(t)),An=sn(Tn),kn=an(An),Ln=Cn(.33,1.53,.69,.99),Pn=sn(Ln),Rn=an(Pn),In={linear:En,easeIn:on,easeInOut:cn,easeOut:ln,circIn:Tn,circInOut:kn,circOut:An,backIn:Pn,backInOut:Rn,backOut:Ln,anticipate:t=>(t*=2)<1?.5*Pn(t):.5*(2-Math.pow(2,-10*(t-1)))},Dn=t=>{if(Array.isArray(t)){t.length;const[e,n,r,i]=t;return Cn(e,n,r,i)}return"string"==typeof t?In[t]:t};function Bn({keyframes:t,ease:e=cn,times:n,duration:r=300}){t=[...t];const i=Bn[0],a=(t=>Array.isArray(t)&&"number"!=typeof t[0])(e)?e.map(Dn):Dn(e),s={done:!1,value:i},o=function(t,e){return t.map((t=>t*e))}(n&&n.length===Bn.length?n:function(t){const e=t.length;return t.map(((t,n)=>0!==n?n/(e-1):0))}(t),r);function l(){return Sn(o,t,{ease:Array.isArray(a)?a:(e=t,n=a,e.map((()=>n||cn)).splice(0,e.length-1))});var e,n}let c=l();return{next:t=>(s.value=c(t),s.done=t>=r,s),flipTarget:()=>{t.reverse(),c=l()}}}const On=.001;function Nn({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,a,s=1-e;s=H(.05,1,s),t=H(.01,10,t/1e3),s<1?(i=e=>{const r=e*s,i=r*t,a=r-n,o=Fn(e,s),l=Math.exp(-i);return On-a/o*l},a=e=>{const r=e*s*t,a=r*n+n,o=Math.pow(s,2)*Math.pow(e,2)*t,l=Math.exp(-r),c=Fn(Math.pow(e,2),s);return(-i(e)+On>0?-1:1)*((a-o)*l)/c}):(i=e=>Math.exp(-e*t)*((e-n)*t+1)-.001,a=e=>Math.exp(-e*t)*(t*t*(n-e)));const o=function(t,e,n){let r=n;for(let i=1;i<12;i++)r-=t(r)/e(r);return r}(i,a,5/t);if(t*=1e3,isNaN(o))return{stiffness:100,damping:10,duration:t};{const e=Math.pow(o,2)*r;return{stiffness:e,damping:2*s*Math.sqrt(r*e),duration:t}}}function Fn(t,e){return t*Math.sqrt(1-e*e)}const zn=["duration","bounce"],Un=["stiffness","damping","mass"];function Gn(t,e){return e.some((e=>void 0!==t[e]))}function Hn({keyframes:t,restSpeed:e=2,restDelta:n=.01,...r}){let i=t[0],a=t[t.length-1];const s={done:!1,value:i},{stiffness:o,damping:l,mass:c,velocity:u,duration:h,isResolvedFromDuration:d}=function(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Gn(t,Un)&&Gn(t,zn)){const n=Nn(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}(r);let f=jn,p=u?-u/1e3:0;const m=l/(2*Math.sqrt(o*c));function g(){const t=a-i,e=Math.sqrt(o/c)/1e3;if(void 0===n&&(n=Math.min(Math.abs(a-i)/100,.4)),m<1){const n=Fn(e,m);f=r=>{const i=Math.exp(-m*e*r);return a-i*((p+m*e*t)/n*Math.sin(n*r)+t*Math.cos(n*r))}}else if(1===m)f=n=>a-Math.exp(-e*n)*(t+(p+e*t)*n);else{const n=e*Math.sqrt(m*m-1);f=r=>{const i=Math.exp(-m*e*r),s=Math.min(n*r,300);return a-i*((p+m*e*t)*Math.sinh(s)+n*t*Math.cosh(s))/n}}}return g(),{next:t=>{const r=f(t);if(d)s.done=t>=h;else{let i=p;if(0!==t)if(m<1){const e=Math.max(0,t-5);i=xe(r-f(e),t-e)}else i=0;const o=Math.abs(i)<=e,l=Math.abs(a-r)<=n;s.done=o&&l}return s.value=s.done?a:r,s},flipTarget:()=>{p=-p,[i,a]=[a,i],g()}}}Hn.needsInterpolation=(t,e)=>"string"==typeof t||"string"==typeof e;const jn=t=>0;const Vn={decay:function({keyframes:t=[0],velocity:e=0,power:n=.8,timeConstant:r=350,restDelta:i=.5,modifyTarget:a}){const s=t[0],o={done:!1,value:s};let l=n*e;const c=s+l,u=void 0===a?c:a(c);return u!==c&&(l=u-s),{next:t=>{const e=-l*Math.exp(-t/r);return o.done=!(e>i||e<-i),o.value=o.done?u:u+e,o},flipTarget:()=>{}}},keyframes:Bn,tween:Bn,spring:Hn};function Wn(t,e,n=0){return t-e-n}const $n=t=>{const e=({delta:e})=>t(e);return{start:()=>ge.Z_.update(e,!0),stop:()=>ge.qY.update(e)}};function Yn({duration:t,driver:e=$n,elapsed:n=0,repeat:r=0,repeatType:i="loop",repeatDelay:a=0,keyframes:s,autoplay:o=!0,onPlay:l,onStop:c,onComplete:u,onRepeat:h,onUpdate:d,type:f="keyframes",...p}){var m,g;let y,v,b,x=0,_=t,w=!1,S=!0;const E=Vn[s.length>2?"keyframes":f],M=s[0],C=s[s.length-1];(null===(g=(m=E).needsInterpolation)||void 0===g?void 0:g.call(m,M,C))&&(b=Sn([0,100],[M,C],{clamp:!1}),s=[0,100]);const T=E({...p,duration:t,keyframes:s});function A(){x++,"reverse"===i?(S=x%2==0,n=function(t,e=0,n=0,r=!0){return r?Wn(e+-t,e,n):e-(t-e)+n}(n,_,a,S)):(n=Wn(n,_,a),"mirror"===i&&T.flipTarget()),w=!1,h&&h()}function k(t){if(S||(t=-t),n+=t,!w){const t=T.next(Math.max(0,n));v=t.value,b&&(v=b(v)),w=S?t.done:n<=0}d&&d(v),w&&(0===x&&(_=void 0!==_?_:n),x<r?function(t,e,n,r){return r?t>=e+n:t<=-n}(n,_,a,S)&&A():(y.stop(),u&&u()))}return o&&(l&&l(),y=e(k),y.start()),{stop:()=>{c&&c(),y.stop()},sample:t=>T.next(Math.max(0,t))}}const qn=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Xn={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qn([0,.65,.55,1]),circOut:qn([.55,0,1,.45]),backIn:qn([.31,.01,.66,-.59]),backOut:qn([.33,1.53,.69,.99])};function Jn(t){if(t)return Array.isArray(t)?qn(t):Xn[t]}function Zn(t,e,{onUpdate:n,onComplete:r,...i}){let{keyframes:a,duration:s=300,elapsed:o=0,ease:l}=i;if("spring"===i.type||!(!(c=i.ease)||Array.isArray(c)||"string"==typeof c&&Xn[c])){const t=Yn(i);let e={done:!1,value:a[0]};const n=[];let r=0;for(;!e.done;)e=t.sample(r),n.push(e.value),r+=10;a=n,s=r-10,l="linear"}var c;const u=function(t,e,n,{delay:r=0,duration:i,repeat:a=0,repeatType:s="loop",ease:o,times:l}={}){return t.animate({[e]:n,offset:l},{delay:r,duration:i,easing:Jn(o),fill:"both",iterations:a+1,direction:"reverse"===s?"alternate":"normal"})}(t.owner.current,e,a,{...i,delay:-o,duration:s,ease:l});return u.onfinish=()=>{t.set(a[a.length-1]),r&&r()},()=>{const{currentTime:e}=u;if(e){const n=Yn(i);t.setWithVelocity(n.sample(e-10).value,n.sample(e).value,10)}ge.Z_.update((()=>u.cancel()))}}function Kn(t,e){const n=performance.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(ge.qY.read(r),t(a-e))};return ge.Z_.read(r,!0),()=>ge.qY.read(r)}function Qn({keyframes:t,elapsed:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),()=>{});return e?Kn(i,-e):i()}const tr=()=>({type:"spring",stiffness:500,damping:25,restSpeed:10}),er=t=>({type:"spring",stiffness:550,damping:0===t?2*Math.sqrt(550):30,restSpeed:10}),nr=()=>({type:"keyframes",ease:"linear",duration:.3}),rr={type:"keyframes",duration:.8},ir={x:tr,y:tr,z:tr,rotate:tr,rotateX:tr,rotateY:tr,rotateZ:tr,scaleX:er,scaleY:er,scale:er,opacity:nr,backgroundColor:nr,color:nr,default:er},ar=(t,{keyframes:e})=>{if(e.length>2)return rr;return(ir[t]||ir.default)(e[1])},sr=(t,e)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!Oe.test(e)||e.startsWith("url(")));function or(t){return 0===t||"string"==typeof t&&0===parseFloat(t)&&-1===t.indexOf(" ")}function lr(t){return"number"==typeof t?0:je("",t)}function cr(t,e){return t[e]||t.default||t}const ur={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},hr={},dr={};for(const $a in ur)dr[$a]=()=>(void 0===hr[$a]&&(hr[$a]=ur[$a]()),hr[$a]);const fr=new Set(["opacity"]),pr=(t,e,n,r={})=>i=>{const a=cr(r,t)||{},s=a.delay||r.delay||0;let{elapsed:o=0}=r;o-=nn(s);const l=function(t,e,n,r){const i=sr(e,n);let a=void 0!==r.from?r.from:t.get();return"none"===a&&i&&"string"==typeof n?a=je(e,n):or(a)&&"string"==typeof n?a=lr(n):!Array.isArray(n)&&or(n)&&"string"==typeof a&&(n=lr(a)),Array.isArray(n)?(null===n[0]&&(n[0]=a),n):[a,n]}(e,t,n,a),c=l[0],u=l[l.length-1],h=sr(t,c),d=sr(t,u);let f={keyframes:l,velocity:e.getVelocity(),...a,elapsed:o,onUpdate:t=>{e.set(t),a.onUpdate&&a.onUpdate(t)},onComplete:()=>{i(),a.onComplete&&a.onComplete()}};if(!h||!d||rn||!1===a.type)return Qn(f);if("inertia"===a.type){const t=function({keyframes:t,velocity:e=0,min:n,max:r,power:i=.8,timeConstant:a=750,bounceStiffness:s=500,bounceDamping:o=10,restDelta:l=1,modifyTarget:c,driver:u,onUpdate:h,onComplete:d,onStop:f}){const p=t[0];let m;function g(t){return void 0!==n&&t<n||void 0!==r&&t>r}function y(t){return void 0===n?r:void 0===r||Math.abs(n-t)<Math.abs(r-t)?n:r}function v(t){null==m||m.stop(),m=Yn({keyframes:[0,1],velocity:0,...t,driver:u,onUpdate:e=>{var n;null==h||h(e),null===(n=t.onUpdate)||void 0===n||n.call(t,e)},onComplete:d,onStop:f})}function b(t){v({type:"spring",stiffness:s,damping:o,restDelta:l,...t})}if(g(p))b({velocity:e,keyframes:[p,y(p)]});else{let t=i*e+p;void 0!==c&&(t=c(t));const r=y(t),s=r===n?-1:1;let o,u;const h=t=>{o=u,u=t,e=xe(t-o,me.w.delta),(1===s&&t>r||-1===s&&t<r)&&b({keyframes:[t,r],velocity:e})};v({type:"decay",keyframes:[p,0],velocity:e,timeConstant:a,power:i,restDelta:l,modifyTarget:c,onUpdate:g(t)?h:void 0})}return{stop:()=>null==m?void 0:m.stop()}}(f);return()=>t.stop()}(function({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length})(a)||(f={...f,...ar(t,f)}),f.duration&&(f.duration=nn(f.duration)),f.repeatDelay&&(f.repeatDelay=nn(f.repeatDelay));const p=e.owner,m=p&&p.current;if(dr.waapi()&&fr.has(t)&&!f.repeatDelay&&"mirror"!==f.repeatType&&0!==f.damping&&p&&m instanceof HTMLElement&&!p.getProps().onUpdate)return Zn(e,t,f);{const t=Yn(f);return()=>t.stop()}};function mr(t,e,n={}){var r;const i=Xe(t,e,n.custom);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const s=i?()=>gr(t,i,n):()=>Promise.resolve(),o=(null===(r=t.variantChildren)||void 0===r?void 0:r.size)?(r=0)=>{const{delayChildren:i=0,staggerChildren:s,staggerDirection:o}=a;return function(t,e,n=0,r=0,i=1,a){const s=[],o=(t.variantChildren.size-1)*r,l=1===i?(t=0)=>t*r:(t=0)=>o-t*r;return Array.from(t.variantChildren).sort(yr).forEach(((t,r)=>{s.push(mr(t,e,{...a,delay:n+l(r)}).then((()=>t.notify("AnimationComplete",e))))})),Promise.all(s)}(t,e,i+r,s,o,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[t,e]="beforeChildren"===l?[s,o]:[o,s];return t().then(e)}return Promise.all([s(),o(n.delay)])}function gr(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");r&&(s=r);const u=[],h=i&&(null===(a=t.animationState)||void 0===a?void 0:a.getState()[i]);for(const d in l){const e=t.getValue(d),r=l[d];if(!e||void 0===r||h&&vr(h,d))continue;let i={delay:n,elapsed:0,...s};if(t.shouldReduceMotion&&B.has(d)&&(i={...i,type:!1,delay:0}),!e.hasAnimated){const e=t.getProps()[en];e&&(i.elapsed=tn(e,d))}let a=e.start(pr(d,e,r,i));Qe(c)&&(c.add(d),a=a.then((()=>c.remove(d)))),u.push(a)}return Promise.all(u).then((()=>{o&&Ze(t,o)}))}function yr(t,e){return t.sortNodePosition(e)}function vr({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&!0!==e[n];return e[n]=!1,r}const br=[Ot.Animate,Ot.InView,Ot.Focus,Ot.Hover,Ot.Tap,Ot.Drag,Ot.Exit],xr=[...br].reverse(),_r=br.length;function wr(t){return e=>Promise.all(e.map((({animation:e,options:n})=>function(t,e,n={}){let r;if(t.notify("AnimationStart",e),Array.isArray(e)){const i=e.map((e=>mr(t,e,n)));r=Promise.all(i)}else if("string"==typeof e)r=mr(t,e,n);else{const i="function"==typeof e?Xe(t,e,n.custom):e;r=gr(t,i,n)}return r.then((()=>t.notify("AnimationComplete",e)))}(t,e,n))))}function Sr(t){let e=wr(t);const n={[Ot.Animate]:Mr(!0),[Ot.InView]:Mr(),[Ot.Hover]:Mr(),[Ot.Tap]:Mr(),[Ot.Drag]:Mr(),[Ot.Focus]:Mr(),[Ot.Exit]:Mr()};let r=!0;const i=(e,n)=>{const r=Xe(t,n);if(r){const{transition:t,transitionEnd:n,...i}=r;e={...e,...i,...n}}return e};function a(a,s){const o=t.getProps(),l=t.getVariantContext(!0)||{},c=[],u=new Set;let f={},p=1/0;for(let e=0;e<_r;e++){const m=xr[e],g=n[m],y=void 0!==o[m]?o[m]:l[m],v=h(y),b=m===s?g.isActive:null;!1===b&&(p=e);let x=y===l[m]&&y!==o[m]&&v;if(x&&r&&t.manuallyAnimateOnMount&&(x=!1),g.protectedKeys={...f},!g.isActive&&null===b||!y&&!g.prevProp||d(y)||"boolean"==typeof y)continue;const _=Er(g.prevProp,y);let w=_||m===s&&g.isActive&&!x&&v||e>p&&v;const S=Array.isArray(y)?y:[y];let E=S.reduce(i,{});!1===b&&(E={});const{prevResolvedValues:M={}}=g,C={...M,...E},T=t=>{w=!0,u.delete(t),g.needsAnimating[t]=!0};for(const t in C){const e=E[t],n=M[t];f.hasOwnProperty(t)||(e!==n?Lt(e)&&Lt(n)?!fe(e,n)||_?T(t):g.protectedKeys[t]=!0:void 0!==e?T(t):u.add(t):void 0!==e&&u.has(t)?T(t):g.protectedKeys[t]=!0)}g.prevProp=y,g.prevResolvedValues=E,g.isActive&&(f={...f,...E}),r&&t.blockInitialAnimation&&(w=!1),w&&!x&&c.push(...S.map((t=>({animation:t,options:{type:m,...a}}))))}if(u.size){const e={};u.forEach((n=>{const r=t.getBaseTarget(n);void 0!==r&&(e[n]=r)})),c.push({animation:e})}let m=Boolean(c.length);return r&&!1===o.initial&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(c):Promise.resolve()}return{animateChanges:a,setActive:function(e,r,i){var s;if(n[e].isActive===r)return Promise.resolve();null===(s=t.variantChildren)||void 0===s||s.forEach((t=>{var n;return null===(n=t.animationState)||void 0===n?void 0:n.setActive(e,r)})),n[e].isActive=r;const o=a(i,e);for(const t in n)n[t].protectedKeys={};return o},setAnimateFunction:function(n){e=n(t)},getState:()=>n}}function Er(t,e){return"string"==typeof e?e!==t:!!Array.isArray(e)&&!fe(e,t)}function Mr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}const Cr={animation:ue((({visualElement:t,animate:e})=>{t.animationState||(t.animationState=Sr(t)),d(e)&&(0,r.useEffect)((()=>e.subscribe(t)),[e])})),exit:ue((t=>{const{custom:e,visualElement:n}=t,[i,a]=de(),o=(0,r.useContext)(s.O);(0,r.useEffect)((()=>{n.isPresent=i;const t=n.animationState&&n.animationState.setActive(Ot.Exit,!i,{custom:o&&o.custom||e});t&&!i&&t.then(a)}),[i])}))},Tr=(t,e)=>Math.abs(t-e);class Ar{constructor(t,e,{transformPagePoint:n}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const t=Pr(this.lastMoveEventInfo,this.history),e=null!==this.startEvent,n=function(t,e){const n=Tr(t.x,e.x),r=Tr(t.y,e.y);return Math.sqrt(n**2+r**2)}(t.offset,{x:0,y:0})>=3;if(!e&&!n)return;const{point:r}=t,{timestamp:i}=me.w;this.history.push({...r,timestamp:i});const{onStart:a,onMove:s}=this.handlers;e||(a&&a(this.lastMoveEvent,t),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,t)},this.handlePointerMove=(t,e)=>{zt(t)&&(this.lastMoveEvent=t,this.lastMoveEventInfo=kr(e,this.transformPagePoint),ge.Z_.update(this.updatePoint,!0))},this.handlePointerUp=(t,e)=>{if(!zt(t))return;this.end();const{onEnd:n,onSessionEnd:r}=this.handlers,i=Pr(kr(e,this.transformPagePoint),this.history);this.startEvent&&n&&n(t,i),r&&r(t,i)},!zt(t))return;this.handlers=e,this.transformPagePoint=n;const r=kr(Ut(t),this.transformPagePoint),{point:i}=r,{timestamp:a}=me.w;this.history=[{...i,timestamp:a}];const{onSessionStart:s}=e;s&&s(t,Pr(r,this.history)),this.removeListeners=Qt(Ht(window,"pointermove",this.handlePointerMove),Ht(window,"pointerup",this.handlePointerUp),Ht(window,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ge.qY.update(this.updatePoint)}}function kr(t,e){return e?{point:e(t.point)}:t}function Lr(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Pr({point:t},e){return{point:t,delta:Lr(t,Ir(e)),offset:Lr(t,Rr(e)),velocity:Dr(e,.1)}}function Rr(t){return t[0]}function Ir(t){return t[t.length-1]}function Dr(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Ir(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>nn(e)));)n--;if(!r)return{x:0,y:0};const a=(i.timestamp-r.timestamp)/1e3;if(0===a)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Br(t){return t.max-t.min}function Or(t,e=0,n=.01){return Math.abs(t-e)<=n}function Nr(t,e,n,r=.5){t.origin=r,t.originPoint=un(e.min,e.max,t.origin),t.scale=Br(n)/Br(e),(Or(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=un(n.min,n.max,t.origin)-t.originPoint,(Or(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Fr(t,e,n,r){Nr(t.x,e.x,n.x,null==r?void 0:r.originX),Nr(t.y,e.y,n.y,null==r?void 0:r.originY)}function zr(t,e,n){t.min=n.min+e.min,t.max=t.min+Br(e)}function Ur(t,e,n){t.min=e.min-n.min,t.max=t.min+Br(e)}function Gr(t,e,n){Ur(t.x,e.x,n.x),Ur(t.y,e.y,n.y)}function Hr(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function jr(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}const Vr=.35;function Wr(t,e,n){return{min:$r(t,e),max:$r(t,n)}}function $r(t,e){return"number"==typeof t?t:t[e]||0}function Yr(t){return[t("x"),t("y")]}function qr({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Xr(t){return void 0===t||1===t}function Jr({scale:t,scaleX:e,scaleY:n}){return!Xr(t)||!Xr(e)||!Xr(n)}function Zr(t){return Jr(t)||Kr(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Kr(t){return Qr(t.x)||Qr(t.y)}function Qr(t){return t&&"0%"!==t}function ti(t,e,n){return n+e*(t-n)}function ei(t,e,n,r,i){return void 0!==i&&(t=ti(t,i,r)),ti(t,n,r)+e}function ni(t,e=0,n=1,r,i){t.min=ei(t.min,e,n,r,i),t.max=ei(t.max,e,n,r,i)}function ri(t,{x:e,y:n}){ni(t.x,e.translate,e.scale,e.originPoint),ni(t.y,n.translate,n.scale,n.originPoint)}function ii(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function ai(t,e){t.min=t.min+e,t.max=t.max+e}function si(t,e,[n,r,i]){const a=void 0!==e[i]?e[i]:.5,s=un(t.min,t.max,a);ni(t,e[n],e[r],s,e.scale)}const oi=["x","scaleX","originX"],li=["y","scaleY","originY"];function ci(t,e){si(t.x,e,oi),si(t.y,e,li)}function ui(t,e){return qr(function(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(t.getBoundingClientRect(),e))}const hi=new WeakMap;class di{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=t}start(t,{snapToCursor:e=!1}={}){if(!1===this.visualElement.isPresent)return;this.panSession=new Ar(t,{onSessionStart:t=>{this.stopAnimation(),e&&this.snapToCursor(Ut(t,"page").point)},onStart:(t,e)=>{var n;const{drag:r,dragPropagation:i,onDragStart:a}=this.getProps();(!r||i||(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Yt(r),this.openGlobalLock))&&(this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yr((t=>{var e,n;let r=this.getAxisMotionValue(t).get()||0;if(Q.test(r)){const i=null===(n=null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout)||void 0===n?void 0:n.layoutBox[t];if(i){r=Br(i)*(parseFloat(r)/100)}}this.originPoint[t]=r})),null==a||a(t,e),null===(n=this.visualElement.animationState)||void 0===n||n.setActive(Ot.Drag,!0))},onMove:(t,e)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:a}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:s}=e;if(r&&null===this.currentDirection)return this.currentDirection=function(t,e=10){let n=null;Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x");return n}(s),void(null!==this.currentDirection&&(null==i||i(this.currentDirection)));this.updateAxis("x",e.point,s),this.updateAxis("y",e.point,s),this.visualElement.render(),null==a||a(t,e)},onSessionEnd:(t,e)=>this.stop(t,e)},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=e;this.startAnimation(r);const{onDragEnd:i}=this.getProps();null==i||i(t,e)}cancel(){var t,e;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(t=this.panSession)||void 0===t||t.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(e=this.visualElement.animationState)||void 0===e||e.setActive(Ot.Drag,!1)}updateAxis(t,e,n){const{drag:r}=this.getProps();if(!n||!fi(t,r,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=function(t,{min:e,max:n},r){return void 0!==e&&t<e?t=r?un(e,t,r.min):Math.max(t,e):void 0!==n&&t>n&&(t=r?un(n,t,r.max):Math.min(t,n)),t}(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),{layout:n}=this.visualElement.projection||{},r=this.constraints;t&&u(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&function(t,{top:e,left:n,bottom:r,right:i}){return{x:Hr(t.x,n,i),y:Hr(t.y,e,r)}}(n.layoutBox,t),this.elastic=function(t=Vr){return!1===t?t=0:!0===t&&(t=Vr),{x:Wr(t,"left","right"),y:Wr(t,"top","bottom")}}(e),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Yr((t=>{this.getAxisMotionValue(t)&&(this.constraints[t]=function(t,e){const n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(n.layoutBox[t],this.constraints[t]))}))}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!u(t))return!1;const n=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(t,e,n){const r=ui(t,n),{scroll:i}=e;return i&&(ai(r.x,i.offset.x),ai(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let a=function(t,e){return{x:jr(t.x,e.x),y:jr(t.y,e.y)}}(r.layout.layoutBox,i);if(e){const t=e(function({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}(a));this.hasMutatedConstraints=!!t,t&&(a=qr(t))}return a}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),o=this.constraints||{},l=Yr((s=>{if(!fi(s,e,this.currentDirection))return;let l=(null==o?void 0:o[s])||{};a&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,h={type:"inertia",velocity:n?t[s]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(s,h)}));return Promise.all(l).then(s)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return n.start(pr(t,n,0,e))}stopAnimation(){Yr((t=>this.getAxisMotionValue(t).stop()))}getAxisMotionValue(t){var e;const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps()[n];return r||this.visualElement.getValue(t,(null===(e=this.visualElement.getProps().initial)||void 0===e?void 0:e[t])||0)}snapToCursor(t){Yr((e=>{const{drag:n}=this.getProps();if(!fi(e,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(e);if(r&&r.layout){const{min:n,max:a}=r.layout.layoutBox[e];i.set(t[e]-un(n,a,.5))}}))}scalePositionWithinConstraints(){var t;if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!u(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Yr((t=>{const e=this.getAxisMotionValue(t);if(e){const n=e.get();i[t]=function(t,e){let n=.5;const r=Br(t),i=Br(e);return i>r?n=xn(e.min,e.max-r,t.min):r>i&&(n=xn(t.min,t.max-i,e.min)),H(0,1,n)}({min:n,max:n},this.constraints[t])}}));const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",null===(t=r.root)||void 0===t||t.updateScroll(),r.updateLayout(),this.resolveConstraints(),Yr((t=>{if(!fi(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:a}=this.constraints[t];n.set(un(r,a,i[t]))}))}addListeners(){var t;if(!this.visualElement.current)return;hi.set(this.visualElement,this);const e=Ht(this.visualElement.current,"pointerdown",(t=>{const{drag:e,dragListener:n=!0}=this.getProps();e&&n&&this.start(t)})),n=()=>{const{dragConstraints:t}=this.getProps();u(t)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",n);r&&!r.layout&&(null===(t=r.root)||void 0===t||t.updateScroll(),r.updateLayout()),n();const a=Nt(window,"resize",(()=>this.scalePositionWithinConstraints())),s=r.addEventListener("didUpdate",(({delta:t,hasLayoutChanged:e})=>{this.isDragging&&e&&(Yr((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{a(),e(),i(),null==s||s()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=Vr,dragMomentum:s=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:s}}}function fi(t,e,n){return!(!0!==e&&e!==t||null!==n&&n!==t)}const pi={pan:ue((function({onPan:t,onPanStart:e,onPanEnd:n,onPanSessionStart:a,visualElement:s}){const o=t||e||n||a,l=(0,r.useRef)(null),{transformPagePoint:c}=(0,r.useContext)(i),u={onSessionStart:a,onStart:e,onMove:t,onEnd:(t,e)=>{l.current=null,n&&n(t,e)}};(0,r.useEffect)((()=>{null!==l.current&&l.current.updateHandlers(u)})),jt(s,"pointerdown",o&&function(t){l.current=new Ar(t,u,{transformPagePoint:c})}),(0,Zt.z)((()=>l.current&&l.current.end()))})),drag:ue((function(t){const{dragControls:e,visualElement:n}=t,i=(0,_.h)((()=>new di(n)));(0,r.useEffect)((()=>e&&e.subscribe(i)),[i,e]),(0,r.useEffect)((()=>i.addListeners()),[i])}))};function mi(t){return"string"==typeof t&&t.startsWith("var(--")}const gi=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function yi(t,e,n=1){const[r,i]=function(t){const e=gi.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);return a?a.trim():mi(i)?yi(i,e,n+1):i}const vi=new Set(["width","height","top","left","right","bottom","x","y"]),bi=t=>vi.has(t),xi=(t,e)=>{t.set(e,!1),t.set(e)},_i=t=>t===j||t===tt;var wi;!function(t){t.width="width",t.height="height",t.left="left",t.right="right",t.top="top",t.bottom="bottom"}(wi||(wi={}));const Si=(t,e)=>parseFloat(t.split(", ")[e]),Ei=(t,e)=>(n,{transform:r})=>{if("none"===r||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return Si(i[1],e);{const e=r.match(/^matrix\((.+)\)$/);return e?Si(e[1],t):0}},Mi=new Set(["x","y","z"]),Ci=D.filter((t=>!Mi.has(t)));const Ti={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Ei(4,13),y:Ei(5,14)},Ai=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(bi);let a=[],s=!1;const o=[];if(i.forEach((i=>{const l=t.getValue(i);if(!t.hasValue(i))return;let c=n[i],u=$e(c);const h=e[i];let d;if(Lt(h)){const t=h.length,e=null===h[0]?1:0;c=h[e],u=$e(c);for(let n=e;n<t;n++)d?$e(h[n]):(d=$e(h[n]),d===u||_i(u)&&_i(d))}else d=$e(h);if(u!==d)if(_i(u)&&_i(d)){const t=l.get();"string"==typeof t&&l.set(parseFloat(t)),"string"==typeof h?e[i]=parseFloat(h):Array.isArray(h)&&d===tt&&(e[i]=h.map(parseFloat))}else(null==u?void 0:u.transform)&&(null==d?void 0:d.transform)&&(0===c||0===h)?0===c?l.set(d.transform(c)):e[i]=u.transform(h):(s||(a=function(t){const e=[];return Ci.forEach((n=>{const r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),e.length&&t.render(),e}(t),s=!0),o.push(i),r[i]=void 0!==r[i]?r[i]:e[i],xi(l,h))})),o.length){const n=o.indexOf("height")>=0?window.pageYOffset:null,i=((t,e,n)=>{const r=e.measureViewportBox(),i=e.current,a=getComputedStyle(i),{display:s}=a,o={};"none"===s&&e.setStaticValue("display",t.display||"block"),n.forEach((t=>{o[t]=Ti[t](r,a)})),e.render();const l=e.measureViewportBox();return n.forEach((n=>{const r=e.getValue(n);xi(r,o[n]),t[n]=Ti[n](l,a)})),t})(e,t,o);return a.length&&a.forEach((([e,n])=>{t.getValue(e).set(n)})),t.render(),x.j&&null!==n&&window.scrollTo({top:n}),{target:i,transitionEnd:r}}return{target:e,transitionEnd:r}};function ki(t,e,n,r){return(t=>Object.keys(t).some(bi))(e)?Ai(t,e,n,r):{target:e,transitionEnd:r}}const Li=(t,e,n,r)=>{const i=function(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach((t=>{const e=t.get();if(!mi(e))return;const n=yi(e,r);n&&t.set(n)}));for(const i in e){const t=e[i];if(!mi(t))continue;const a=yi(t,r);a&&(e[i]=a,n&&void 0===n[i]&&(n[i]=t))}return{target:e,transitionEnd:n}}(t,e,r);return ki(t,e=i.target,n,r=i.transitionEnd)},Pi={current:null},Ri={current:!1};const Ii=Object.keys(b),Di=Ii.length,Bi=["AnimationStart","AnimationComplete","Update","Unmount","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Oi{constructor({parent:t,props:e,reducedMotionConfig:n,visualState:r},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.isPresent=!0,this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ge.Z_.render(this.render,!1,!0);const{latestValues:a,renderState:s}=r;this.latestValues=a,this.baseTarget={...a},this.initialValues=e.initial?{...a}:{},this.renderState=s,this.parent=t,this.props=e,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=i,this.isControllingVariants=p(e),this.isVariantNode=m(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:o,...l}=this.scrapeMotionValuesFromProps(e);for(const c in l){const t=l[c];void 0!==a[c]&&N(t)&&(t.set(a[c],!1),Qe(o)&&o.add(c))}}scrapeMotionValuesFromProps(t){return{}}mount(t){var e;this.current=t,this.projection&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=null===(e=this.parent)||void 0===e?void 0:e.addVariantChild(this)),this.values.forEach(((t,e)=>this.bindToMotionValue(e,t))),Ri.current||function(){if(Ri.current=!0,x.j)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Pi.current=t.matches;t.addListener(e),e()}else Pi.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Pi.current),this.parent&&this.parent.children.add(this),this.setProps(this.props)}unmount(){var t,e,n;null===(t=this.projection)||void 0===t||t.unmount(),ge.qY.update(this.notifyUpdate),ge.qY.render(this.render),this.valueSubscriptions.forEach((t=>t())),null===(e=this.removeFromVariantTree)||void 0===e||e.call(this),null===(n=this.parent)||void 0===n||n.children.delete(this);for(const r in this.events)this.events[r].clear();this.current=null}bindToMotionValue(t,e){const n=B.has(t),r=e.on("change",(e=>{this.latestValues[t]=e,this.props.onUpdate&&ge.Z_.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)})),i=e.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,(()=>{r(),i()}))}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}loadFeatures(t,e,n,i,a,s){const o=[];te.O;for(let l=0;l<Di;l++){const e=Ii[l],{isEnabled:n,Component:i}=b[e];n(t)&&i&&o.push((0,r.createElement)(i,{key:e,...t,visualElement:this}))}if(!this.projection&&a){this.projection=new a(i,this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:n,drag:r,dragConstraints:o,layoutScroll:l}=t;this.projection.setOptions({layoutId:e,layout:n,alwaysMeasureLayout:Boolean(r)||o&&u(o),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"==typeof n?n:"both",initialPromotionConfig:s,layoutScroll:l})}return o}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}makeTargetAnimatable(t,e=!0){return this.makeTargetAnimatableFromInstance(t,this.props,e)}setProps(t){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.props=t;for(let e=0;e<Bi.length;e++){const n=Bi[e];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const r=t["on"+n];r&&(this.propEventSubscriptions[n]=this.on(n,r))}this.prevMotionValues=function(t,e,n){const{willChange:r}=e;for(const i in e){const a=e[i],s=n[i];if(N(a))t.addValue(i,a),Qe(r)&&r.add(i);else if(N(s))t.addValue(i,we(a,{owner:t})),Qe(r)&&r.remove(i);else if(s!==a)if(t.hasValue(i)){const e=t.getValue(i);!e.hasAnimated&&e.set(a)}else{const e=t.getStaticValue(i);t.addValue(i,we(void 0!==e?e:a))}}for(const i in n)void 0===e[i]&&t.removeValue(i);return e}(this,this.scrapeMotionValuesFromProps(t),this.prevMotionValues)}getProps(){return this.props}getVariant(t){var e;return null===(e=this.props.variants)||void 0===e?void 0:e[t]}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){var t;return this.isVariantNode?this:null===(t=this.parent)||void 0===t?void 0:t.getClosestVariantNode()}getVariantContext(t=!1){var e,n;if(t)return null===(e=this.parent)||void 0===e?void 0:e.getVariantContext();if(!this.isControllingVariants){const t=(null===(n=this.parent)||void 0===n?void 0:n.getVariantContext())||{};return void 0!==this.props.initial&&(t.initial=this.props.initial),t}const r={};for(let i=0;i<Fi;i++){const t=Ni[i],e=this.props[t];(h(e)||!1===e)&&(r[t]=e)}return r}addVariantChild(t){var e;const n=this.getClosestVariantNode();if(n)return null===(e=n.variantChildren)||void 0===e||e.add(t),()=>n.variantChildren.delete(t)}addValue(t,e){this.hasValue(t)&&this.removeValue(t),this.values.set(t,e),this.latestValues[t]=e.get(),this.bindToMotionValue(t,e)}removeValue(t){var e;this.values.delete(t),null===(e=this.valueSubscriptions.get(t))||void 0===e||e(),this.valueSubscriptions.delete(t),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return void 0===n&&void 0!==e&&(n=we(e,{owner:this}),this.addValue(t,n)),n}readValue(t){return void 0===this.latestValues[t]&&this.current?this.readValueFromInstance(this.current,t,this.options):this.latestValues[t]}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props,r="string"==typeof n||"object"==typeof n?null===(e=kt(this.props,n))||void 0===e?void 0:e[t]:void 0;if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,t);return void 0===i||N(i)?void 0!==this.initialValues[t]&&void 0===r?void 0:this.baseTarget[t]:i}on(t,e){return this.events[t]||(this.events[t]=new be),this.events[t].add(e)}notify(t,...e){var n;null===(n=this.events[t])||void 0===n||n.notify(...e)}}const Ni=["initial",...br],Fi=Ni.length;class zi extends Oi{sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){var n;return null===(n=t.style)||void 0===n?void 0:n[e]}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:e,...n},{transformValues:r},i){let a=function(t,e,n){var r;const i={};for(const a in t){const t=Ke(a,e);i[a]=void 0!==t?t:null===(r=n.getValue(a))||void 0===r?void 0:r.get()}return i}(n,t||{},this);if(r&&(e&&(e=r(e)),n&&(n=r(n)),a&&(a=r(a))),i){!function(t,e,n){var r,i;const a=Object.keys(e).filter((e=>!t.hasValue(e))),s=a.length;if(s)for(let o=0;o<s;o++){const s=a[o],l=e[s];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(i=null!==(r=n[s])&&void 0!==r?r:t.readValue(s))&&void 0!==i?i:e[s]),null!=c&&("string"==typeof c&&(/^\-?\d*\.?\d+$/.test(c)||pe(c))?c=parseFloat(c):!qe(c)&&Oe.test(l)&&(c=je(s,l)),t.addValue(s,we(c,{owner:t})),void 0===n[s]&&(n[s]=c),null!==c&&t.setBaseTarget(s,c))}}(this,n,a);const t=Li(this,n,a,e);e=t.transitionEnd,n=t.target}return{transition:t,transitionEnd:e,...n}}}class Ui extends zi{readValueFromInstance(t,e){if(B.has(e)){const t=He(e);return t&&t.default||0}{const r=(n=t,window.getComputedStyle(n)),i=(U(e)?r.getPropertyValue(e):r[e])||0;return"string"==typeof i?i.trim():i}var n}measureInstanceViewportBox(t,{transformPagePoint:e}){return ui(t,e)}build(t,e,n,r){st(t,e,n,r.transformTemplate)}scrapeMotionValuesFromProps(t){return Tt(t)}renderInstance(t,e,n,r){Et(t,e,n,r)}}class Gi extends zi{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){var n;return B.has(e)?(null===(n=He(e))||void 0===n?void 0:n.default)||0:(e=Mt.has(e)?e:St(e),t.getAttribute(e))}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(t){return At(t)}build(t,e,n,r){vt(t,e,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,e,n,r){Ct(t,e,0,r)}mount(t){this.isSVGTag=xt(t.tagName),super.mount(t)}}const Hi=(t,e)=>R(t)?new Gi(e,{enableHardwareAcceleration:!1}):new Ui(e,{enableHardwareAcceleration:!0});function ji(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vi={correct:(t,e)=>{if(!e.target)return t;if("string"==typeof t){if(!tt.test(t))return t;t=parseFloat(t)}return`${ji(t,e.target.x)}% ${ji(t,e.target.y)}%`}},Wi="_$css",$i={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=t.includes("var("),a=[];i&&(t=t.replace(gi,(t=>(a.push(t),Wi))));const s=Oe.parse(t);if(s.length>5)return r;const o=Oe.createTransformer(t),l="number"!=typeof s[0]?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;s[0+l]/=c,s[1+l]/=u;const h=un(c,u,.5);"number"==typeof s[2+l]&&(s[2+l]/=h),"number"==typeof s[3+l]&&(s[3+l]/=h);let d=o(s);if(i){let t=0;d=d.replace(Wi,(()=>{const e=a[t];return t++,e}))}return d}};class Yi extends r.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=t;var a;a=qi,Object.assign(I,a),i&&(e.group&&e.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),w.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:r,isPresent:i}=this.props,a=n.projection;return a?(a.isPresent=i,r||t.layoutDependency!==e||void 0===e?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||ge.Z_.postRender((()=>{var t;(null===(t=a.getStack())||void 0===t?void 0:t.members.length)||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),!t.currentAnimation&&t.isLead()&&this.safeToRemove())}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),(null==e?void 0:e.group)&&e.group.remove(r),(null==n?void 0:n.deregister)&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;null==t||t()}render(){return null}}const qi={borderRadius:{...Vi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vi,borderTopRightRadius:Vi,borderBottomLeftRadius:Vi,borderBottomRightRadius:Vi,boxShadow:$i},Xi={measureLayout:function(t){const[e,n]=de(),i=(0,r.useContext)(E.p);return r.createElement(Yi,{...t,layoutGroup:i,switchLayoutGroup:(0,r.useContext)(C),isPresent:e,safeToRemove:n})}};const Ji=["TopLeft","TopRight","BottomLeft","BottomRight"],Zi=Ji.length,Ki=t=>"string"==typeof t?parseFloat(t):t,Qi=t=>"number"==typeof t||tt.test(t);function ta(t,e){return void 0!==t[e]?t[e]:t.borderRadius}const ea=ra(0,.5,An),na=ra(.5,.95,En);function ra(t,e,n){return r=>r<t?0:r>e?1:n(xn(t,e,r))}function ia(t,e){t.min=e.min,t.max=e.max}function aa(t,e){ia(t.x,e.x),ia(t.y,e.y)}function sa(t,e,n,r,i){return t=ti(t-=e,1/n,r),void 0!==i&&(t=ti(t,1/i,r)),t}function oa(t,e,[n,r,i],a,s){!function(t,e=0,n=1,r=.5,i,a=t,s=t){Q.test(e)&&(e=parseFloat(e),e=un(s.min,s.max,e/100)-s.min);if("number"!=typeof e)return;let o=un(a.min,a.max,r);t===a&&(o-=e),t.min=sa(t.min,e,n,o,i),t.max=sa(t.max,e,n,o,i)}(t,e[n],e[r],e[i],e.scale,a,s)}const la=["x","scaleX","originX"],ca=["y","scaleY","originY"];function ua(t,e,n,r){oa(t.x,e,la,null==n?void 0:n.x,null==r?void 0:r.x),oa(t.y,e,ca,null==n?void 0:n.y,null==r?void 0:r.y)}function ha(t){return 0===t.translate&&1===t.scale}function da(t){return ha(t.x)&&ha(t.y)}function fa(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function pa(t){return Br(t.x)/Br(t.y)}class ma{constructor(){this.members=[]}add(t){ye(this.members,t),t.scheduleRender()}remove(t){if(ve(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){const e=this.members.findIndex((e=>t===e));if(0===e)return!1;let n;for(let r=e;r>=0;r--){const t=this.members[r];if(!1!==t.isPresent){n=t;break}}return!!n&&(this.promote(n),!0)}promote(t,e){var n;const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,e&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),(null===(n=t.root)||void 0===n?void 0:n.isUpdating)&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;!1===i&&r.hide()}}exitAnimationComplete(){this.members.forEach((t=>{var e,n,r,i,a;null===(n=(e=t.options).onExitComplete)||void 0===n||n.call(e),null===(a=null===(r=t.resumingFrom)||void 0===r?void 0:(i=r.options).onExitComplete)||void 0===a||a.call(i)}))}scheduleRender(){this.members.forEach((t=>{t.instance&&t.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ga(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y;if((i||a)&&(r=`translate3d(${i}px, ${a}px, 0) `),1===e.x&&1===e.y||(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:t,rotateX:e,rotateY:i}=n;t&&(r+=`rotate(${t}deg) `),e&&(r+=`rotateX(${e}deg) `),i&&(r+=`rotateY(${i}deg) `)}const s=t.x.scale*e.x,o=t.y.scale*e.y;return 1===s&&1===o||(r+=`scale(${s}, ${o})`),r||"none"}const ya=(t,e)=>t.depth-e.depth;class va{constructor(){this.children=[],this.isDirty=!1}add(t){ye(this.children,t),this.isDirty=!0}remove(t){ve(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(ya),this.isDirty=!1,this.children.forEach(t)}}const ba=["","X","Y","Z"];let xa=0;function _a({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(t,n={},r=(null==e?void 0:e())){this.id=xa++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isTransformDirty=!1,this.isProjectionDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.nodes.forEach(Ea),this.nodes.forEach(ka),this.nodes.forEach(La)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.elementId=t,this.latestValues=n,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0,t&&this.root.registerPotentialNode(t,this);for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new va)}addEventListener(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new be),this.eventHandlers.get(t).add(e)}notifyListeners(t,...e){const n=this.eventHandlers.get(t);null==n||n.notify(...e)}hasListeners(t){return this.eventHandlers.has(t)}registerPotentialNode(t,e){this.potentialNodes.set(t,e)}mount(e,n=!1){var r;if(this.instance)return;this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;const{layoutId:i,layout:a,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),null===(r=this.parent)||void 0===r||r.children.add(this),this.elementId&&this.root.potentialNodes.delete(this.elementId),n&&(a||i)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=Kn(r,250),w.hasAnimatedSinceResize&&(w.hasAnimatedSinceResize=!1,this.nodes.forEach(Aa))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&s&&(i||a)&&this.addEventListener("didUpdate",(({delta:t,hasLayoutChanged:e,hasRelativeTargetChanged:n,layout:r})=>{var i,a,o,l,c;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const u=null!==(a=null!==(i=this.options.transition)&&void 0!==i?i:s.getDefaultTransition())&&void 0!==a?a:Oa,{onLayoutAnimationStart:h,onLayoutAnimationComplete:d}=s.getProps(),f=!this.targetLayout||!fa(this.targetLayout,r)||n,p=!e&&n;if((null===(o=this.resumeFrom)||void 0===o?void 0:o.instance)||p||e&&(f||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,p);const e={...cr(u,"layout"),onPlay:h,onComplete:d};s.shouldReduceMotion&&(e.delay=0,e.type=!1),this.startAnimation(e)}else e||0!==this.animationProgress||Aa(this),this.isLead()&&(null===(c=(l=this.options).onExitComplete)||void 0===c||c.call(l));this.targetLayout=r}))}unmount(){var t,e;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(t=this.getStack())||void 0===t||t.remove(this),null===(e=this.parent)||void 0===e||e.children.delete(this),this.instance=void 0,ge.qY.preRender(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){var t;return this.isAnimationBlocked||(null===(t=this.parent)||void 0===t?void 0:t.isTreeAnimationBlocked())||!1}startUpdate(){var t;this.isUpdateBlocked()||(this.isUpdating=!0,null===(t=this.nodes)||void 0===t||t.forEach(Pa),this.animationId++)}willUpdate(t=!0){var e,n,r;if(this.root.isUpdateBlocked())return void(null===(n=(e=this.options).onExitComplete)||void 0===n||n.call(e));if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let o=0;o<this.path.length;o++){const t=this.path[o];t.shouldResetTransform=!0,t.updateScroll("snapshot")}const{layoutId:i,layout:a}=this.options;if(void 0===i&&!a)return;const s=null===(r=this.options.visualElement)||void 0===r?void 0:r.getProps().transformTemplate;this.prevTransformTemplateValue=null==s?void 0:s(this.latestValues,""),this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}didUpdate(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Ca);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(Na),this.potentialNodes.clear()),this.nodes.forEach(Ta),this.nodes.forEach(wa),this.nodes.forEach(Sa),this.clearAllSnapshots(),ge.iW.update(),ge.iW.preRender(),ge.iW.render())}clearAllSnapshots(){this.nodes.forEach(Ma),this.sharedNodes.forEach(Ra)}scheduleUpdateProjection(){ge.Z_.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){ge.Z_.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){var t;if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox),null===(t=this.options.visualElement)||void 0===t||t.notify("LayoutMeasure",this.layout.layoutBox,null==e?void 0:e.layoutBox)}updateScroll(t="measure"){let e=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e&&(this.scroll={animationId:this.root.animationId,phase:t,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){var t;if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform,n=this.projectionDelta&&!da(this.projectionDelta),r=null===(t=this.options.visualElement)||void 0===t?void 0:t.getProps().transformTemplate,a=null==r?void 0:r(this.latestValues,""),s=a!==this.prevTransformTemplateValue;e&&(n||Zr(this.latestValues)||s)&&(i(this.instance,a),this.shouldResetTransform=!1,this.scheduleRender())}measure(t=!0){const e=this.measurePageBox();let n=this.removeElementScroll(e);var r;return t&&(n=this.removeTransform(n)),Fa((r=n).x),Fa(r.y),{animationId:this.root.animationId,measuredBox:e,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const e=t.measureViewportBox(),{scroll:n}=this.root;return n&&(ai(e.x,n.offset.x),ai(e.y,n.offset.y)),e}removeElementScroll(t){const e={x:{min:0,max:0},y:{min:0,max:0}};aa(e,t);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:a}=r;if(r!==this.root&&i&&a.layoutScroll){if(i.isRoot){aa(e,t);const{scroll:n}=this.root;n&&(ai(e.x,-n.offset.x),ai(e.y,-n.offset.y))}ai(e.x,i.offset.x),ai(e.y,i.offset.y)}}return e}applyTransform(t,e=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};aa(n,t);for(let r=0;r<this.path.length;r++){const t=this.path[r];!e&&t.options.layoutScroll&&t.scroll&&t!==t.root&&ci(n,{x:-t.scroll.offset.x,y:-t.scroll.offset.y}),Zr(t.latestValues)&&ci(n,t.latestValues)}return Zr(this.latestValues)&&ci(n,this.latestValues),n}removeTransform(t){var e;const n={x:{min:0,max:0},y:{min:0,max:0}};aa(n,t);for(let r=0;r<this.path.length;r++){const t=this.path[r];if(!t.instance)continue;if(!Zr(t.latestValues))continue;Jr(t.latestValues)&&t.updateSnapshot();const i={x:{min:0,max:0},y:{min:0,max:0}};aa(i,t.measurePageBox()),ua(n,t.latestValues,null===(e=t.snapshot)||void 0===e?void 0:e.layoutBox,i)}return Zr(this.latestValues)&&ua(n,this.latestValues),n}setTargetDelta(t){this.targetDelta=t,this.isProjectionDirty=!0,this.root.scheduleUpdateProjection()}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}resolveTargetDelta(){var t;const e=this.getLead();if(this.isProjectionDirty||(this.isProjectionDirty=e.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=e.isTransformDirty),!this.isProjectionDirty&&!this.attemptToResolveRelativeTarget)return;const{layout:n,layoutId:r}=this.options;if(this.layout&&(n||r)){if(!this.targetDelta&&!this.relativeTarget){const t=this.getClosestProjectingParent();t&&t.layout?(this.relativeParent=t,this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Gr(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox),aa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var i,a,s;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&(null===(t=this.relativeParent)||void 0===t?void 0:t.target)?(i=this.target,a=this.relativeTarget,s=this.relativeParent.target,zr(i.x,a.x,s.x),zr(i.y,a.y,s.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):aa(this.target,this.layout.layoutBox),ri(this.target,this.targetDelta)):aa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const t=this.getClosestProjectingParent();t&&Boolean(t.resumingFrom)===Boolean(this.resumingFrom)&&!t.options.layoutScroll&&t.target?(this.relativeParent=t,this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Gr(this.relativeTargetOrigin,this.target,t.target),aa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!Jr(this.parent.latestValues)&&!Kr(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()}calcProjection(){var t;const{isProjectionDirty:e,isTransformDirty:n}=this;this.isProjectionDirty=this.isTransformDirty=!1;const r=this.getLead(),i=Boolean(this.resumingFrom)||this!==r;let a=!0;if(e&&(a=!1),i&&n&&(a=!1),a)return;const{layout:s,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean((null===(t=this.parent)||void 0===t?void 0:t.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!o)return;aa(this.layoutCorrected,this.layout.layoutBox),function(t,e,n,r=!1){var i,a;const s=n.length;if(!s)return;let o,l;e.x=e.y=1;for(let c=0;c<s;c++)o=n[c],l=o.projectionDelta,"contents"!==(null===(a=null===(i=o.instance)||void 0===i?void 0:i.style)||void 0===a?void 0:a.display)&&(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ci(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,ri(t,l)),r&&Zr(o.latestValues)&&ci(t,o.latestValues));e.x=ii(e.x),e.y=ii(e.y)}(this.layoutCorrected,this.treeScale,this.path,i);const{target:l}=r;if(!l)return;this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.treeScale.x,u=this.treeScale.y,h=this.projectionTransform;Fr(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=ga(this.projectionDelta,this.treeScale),this.projectionTransform===h&&this.treeScale.x===c&&this.treeScale.y===u||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(t=!0){var e,n,r;null===(n=(e=this.options).scheduleRender)||void 0===n||n.call(e),t&&(null===(r=this.getStack())||void 0===r||r.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(t,e=!1){var n,r;const i=this.snapshot,a=(null==i?void 0:i.latestValues)||{},s={...this.latestValues},o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!e;const l={x:{min:0,max:0},y:{min:0,max:0}},c=(null==i?void 0:i.source)!==(null===(n=this.layout)||void 0===n?void 0:n.source),u=((null===(r=this.getStack())||void 0===r?void 0:r.members.length)||0)<=1,h=Boolean(c&&!u&&!0===this.options.crossfade&&!this.path.some(Ba));this.animationProgress=0,this.mixTargetDelta=e=>{var n;const r=e/1e3;var i,d,f,p;Ia(o.x,t.x,r),Ia(o.y,t.y,r),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&(null===(n=this.relativeParent)||void 0===n?void 0:n.layout)&&(Gr(l,this.layout.layoutBox,this.relativeParent.layout.layoutBox),i=this.relativeTarget,d=this.relativeTargetOrigin,f=l,p=r,Da(i.x,d.x,f.x,p),Da(i.y,d.y,f.y,p)),c&&(this.animationValues=s,function(t,e,n,r,i,a){i?(t.opacity=un(0,void 0!==n.opacity?n.opacity:1,ea(r)),t.opacityExit=un(void 0!==e.opacity?e.opacity:1,0,na(r))):a&&(t.opacity=un(void 0!==e.opacity?e.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let s=0;s<Zi;s++){const i=`border${Ji[s]}Radius`;let a=ta(e,i),o=ta(n,i);void 0===a&&void 0===o||(a||(a=0),o||(o=0),0===a||0===o||Qi(a)===Qi(o)?(t[i]=Math.max(un(Ki(a),Ki(o),r),0),(Q.test(o)||Q.test(a))&&(t[i]+="%")):t[i]=o)}(e.rotate||n.rotate)&&(t.rotate=un(e.rotate||0,n.rotate||0,r))}(s,a,this.latestValues,r,h,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(0)}startAnimation(t){var e,n;this.notifyListeners("animationStart"),null===(e=this.currentAnimation)||void 0===e||e.stop(),this.resumingFrom&&(null===(n=this.resumingFrom.currentAnimation)||void 0===n||n.stop()),this.pendingAnimation&&(ge.qY.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ge.Z_.update((()=>{w.hasAnimatedSinceResize=!0,this.currentAnimation=function(t,e,n={}){const r=N(t)?t:we(t);return r.start(pr("",r,e,n)),{stop:()=>r.stop(),isAnimating:()=>r.isAnimating()}}(0,1e3,{...t,onUpdate:e=>{var n;this.mixTargetDelta(e),null===(n=t.onUpdate)||void 0===n||n.call(t,e)},onComplete:()=>{var e;null===(e=t.onComplete)||void 0===e||e.call(t),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){var t;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(t=this.getStack())||void 0===t||t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){var t;this.currentAnimation&&(null===(t=this.mixTargetDelta)||void 0===t||t.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const t=this.getLead();let{targetWithTransforms:e,target:n,layout:r,latestValues:i}=t;if(e&&n&&r){if(this!==t&&this.layout&&r&&za(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const e=Br(this.layout.layoutBox.x);n.x.min=t.target.x.min,n.x.max=n.x.min+e;const r=Br(this.layout.layoutBox.y);n.y.min=t.target.y.min,n.y.max=n.y.min+r}aa(e,n),ci(e,i),Fr(this.projectionDeltaWithTransform,this.layoutCorrected,e,i)}}registerSharedNode(t,e){var n,r,i;this.sharedNodes.has(t)||this.sharedNodes.set(t,new ma);this.sharedNodes.get(t).add(e),e.promote({transition:null===(n=e.options.initialPromotionConfig)||void 0===n?void 0:n.transition,preserveFollowOpacity:null===(i=null===(r=e.options.initialPromotionConfig)||void 0===r?void 0:r.shouldPreserveFollowOpacity)||void 0===i?void 0:i.call(r,e)})}isLead(){const t=this.getStack();return!t||t.lead===this}getLead(){var t;const{layoutId:e}=this.options;return e&&(null===(t=this.getStack())||void 0===t?void 0:t.lead)||this}getPrevLead(){var t;const{layoutId:e}=this.options;return e?null===(t=this.getStack())||void 0===t?void 0:t.prevLead:void 0}getStack(){const{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote({needsReset:t,transition:e,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),t&&(this.projectionDelta=void 0,this.needsReset=!0),e&&this.setOptions({transition:e})}relegate(){const t=this.getStack();return!!t&&t.relegate(this)}resetRotation(){const{visualElement:t}=this.options;if(!t)return;let e=!1;const{latestValues:n}=t;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(e=!0),!e)return;const r={};for(let i=0;i<ba.length;i++){const e="rotate"+ba[i];n[e]&&(r[e]=n[e],t.setStaticValue(e,0))}null==t||t.render();for(const i in r)t.setStaticValue(i,r[i]);t.scheduleRender()}getProjectionStyles(t={}){var e,n,r;const i={};if(!this.instance||this.isSVG)return i;if(!this.isVisible)return{visibility:"hidden"};i.visibility="";const a=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=Pt(t.pointerEvents)||"",i.transform=a?a(this.latestValues,""):"none",i;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const e={};return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=Pt(t.pointerEvents)||""),this.hasProjected&&!Zr(this.latestValues)&&(e.transform=a?a({},""):"none",this.hasProjected=!1),e}const o=s.animationValues||s.latestValues;this.applyTransformsToTarget(),i.transform=ga(this.projectionDeltaWithTransform,this.treeScale,o),a&&(i.transform=a(o,i.transform));const{x:l,y:c}=this.projectionDelta;i.transformOrigin=`${100*l.origin}% ${100*c.origin}% 0`,s.animationValues?i.opacity=s===this?null!==(r=null!==(n=o.opacity)&&void 0!==n?n:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:i.opacity=s===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const u in I){if(void 0===o[u])continue;const{correct:t,applyTo:e}=I[u],n=t(o[u],s);if(e){const t=e.length;for(let r=0;r<t;r++)i[e[r]]=n}else i[u]=n}return this.options.layoutId&&(i.pointerEvents=s===this?Pt(t.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((t=>{var e;return null===(e=t.currentAnimation)||void 0===e?void 0:e.stop()})),this.root.nodes.forEach(Ca),this.root.sharedNodes.clear()}}}function wa(t){t.updateLayout()}function Sa(t){var e,n,r;const i=(null===(e=t.resumeFrom)||void 0===e?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=t.layout,{animationType:r}=t.options,a=i.source!==t.layout.source;"size"===r?Yr((t=>{const n=a?i.measuredBox[t]:i.layoutBox[t],r=Br(n);n.min=e[t].min,n.max=n.min+r})):za(r,i.layoutBox,e)&&Yr((t=>{const n=a?i.measuredBox[t]:i.layoutBox[t],r=Br(e[t]);n.max=n.min+r}));const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Fr(s,e,i.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?Fr(o,t.applyTransform(n,!0),i.measuredBox):Fr(o,e,i.layoutBox);const l=!da(s);let c=!1;if(!t.resumeFrom){const n=t.getClosestProjectingParent();if(n&&!n.resumeFrom){const{snapshot:t,layout:r}=n;if(t&&r){const n={x:{min:0,max:0},y:{min:0,max:0}};Gr(n,i.layoutBox,t.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};Gr(a,e,r.layoutBox),fa(n,a)||(c=!0)}}}t.notifyListeners("didUpdate",{layout:e,snapshot:i,delta:o,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else t.isLead()&&(null===(r=(n=t.options).onExitComplete)||void 0===r||r.call(n));t.options.transition=void 0}function Ea(t){t.isProjectionDirty||(t.isProjectionDirty=Boolean(t.parent&&t.parent.isProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=Boolean(t.parent&&t.parent.isTransformDirty))}function Ma(t){t.clearSnapshot()}function Ca(t){t.clearMeasurements()}function Ta(t){const{visualElement:e}=t.options;(null==e?void 0:e.getProps().onBeforeLayoutMeasure)&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Aa(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0}function ka(t){t.resolveTargetDelta()}function La(t){t.calcProjection()}function Pa(t){t.resetRotation()}function Ra(t){t.removeLeadSnapshot()}function Ia(t,e,n){t.translate=un(e.translate,0,n),t.scale=un(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Da(t,e,n,r){t.min=un(e.min,n.min,r),t.max=un(e.max,n.max,r)}function Ba(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}const Oa={duration:.45,ease:[.4,0,.1,1]};function Na(t,e){let n=t.root;for(let i=t.path.length-1;i>=0;i--)if(Boolean(t.path[i].instance)){n=t.path[i];break}const r=(n&&n!==t.root?n.instance:document).querySelector(`[data-projection-id="${e}"]`);r&&t.mount(r,!0)}function Fa(t){t.min=Math.round(t.min),t.max=Math.round(t.max)}function za(t,e,n){return"position"===t||"preserve-aspect"===t&&!Or(pa(e),pa(n),.2)}const Ua=_a({attachResizeListener:(t,e)=>Nt(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ga={current:void 0},Ha=_a({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ga.current){const t=new Ua(0,{});t.mount(window),t.setOptions({layoutScroll:!0}),Ga.current=t}return Ga.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>Boolean("fixed"===window.getComputedStyle(t).position)}),ja={...Cr,...he,...pi,...Xi},Va=L(((t,e)=>function(t,{forwardMotionProps:e=!1},n,r,i){return{...R(t)?Dt:Bt,preloadedFeatures:n,useRender:wt(e),createVisualElement:r,projectionNodeConstructor:i,Component:t}}(t,e,ja,Hi,Ha)))},1741:(t,e,n)=>{"use strict";n.d(e,{j:()=>r});const r="undefined"!=typeof document},9304:(t,e,n)=>{"use strict";n.d(e,{O:()=>r});const r=("undefined"==typeof process||process.env,"production")},6681:(t,e,n)=>{"use strict";n.d(e,{h:()=>i});var r=n(7294);function i(t){const e=(0,r.useRef)(null);return null===e.current&&(e.current=t()),e.current}},8868:(t,e,n)=>{"use strict";n.d(e,{L:()=>i});var r=n(7294);const i=n(1741).j?r.useLayoutEffect:r.useEffect},5411:(t,e,n)=>{"use strict";n.d(e,{z:()=>i});var r=n(7294);function i(t){return(0,r.useEffect)((()=>()=>t()),[])}},6034:(t,e,n)=>{"use strict";n.d(e,{O:()=>i});const r=new Set;function i(t,e,n){t||r.has(e)||(console.warn(e),n&&console.warn(n),r.add(e))}}}]);